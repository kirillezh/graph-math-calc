/*! For license information please see main.c1f2f0af.js.LICENSE.txt */
(()=>{var e={147:e=>{"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},r={"\u2013":"\\--","\u2014":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},i=function(e,n){return t({},e,n)};e.exports=function(e){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.preserveFormatting,s=void 0!==o&&o,l=a.escapeMapFn,u=void 0===l?i:l,c=String(e),d="",p=u(t({},n),s?t({},r):{}),h=Object.keys(p),f=function(){var e=!1;h.forEach((function(t,n){e||c.length>=t.length&&c.slice(0,t.length)===t&&(d+=p[h[n]],c=c.slice(t.length,c.length),e=!0)})),e||(d+=c.slice(0,1),c=c.slice(1,c.length))};c;)f();return d}},937:function(e){!function(){"use strict";var t={s:1,n:0,d:1};function n(e,t){if(isNaN(e=parseInt(e,10)))throw u();return e*t}function r(e,t){if(0===t)throw l();var n=Object.create(s.prototype);n.s=e<0?-1:1;var r=o(e=e<0?-e:e,t);return n.n=e/r,n.d=t/r,n}function i(e){for(var t={},n=e,r=2,i=4;i<=n;){for(;n%r===0;)n/=r,t[r]=(t[r]||0)+1;i+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var a=function(e,r){var i,a=0,o=1,s=1,d=0,p=0,h=0,f=1,m=1,g=0,v=1,y=1,b=1,x=1e7;if(void 0===e||null===e);else if(void 0!==r){if(s=(a=e)*(o=r),a%1!==0||o%1!==0)throw c()}else switch(typeof e){case"object":if("d"in e&&"n"in e)a=e.n,o=e.d,"s"in e&&(a*=e.s);else{if(!(0 in e))throw u();a=e[0],1 in e&&(o=e[1])}s=a*o;break;case"number":if(e<0&&(s=e,e=-e),e%1===0)a=e;else if(e>0){for(e>=1&&(e/=m=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));v<=x&&b<=x;){if(e===(i=(g+y)/(v+b))){v+b<=x?(a=g+y,o=v+b):b>v?(a=y,o=b):(a=g,o=v);break}e>i?(g+=y,v+=b):(y+=g,b+=v),v>x?(a=y,o=b):(a=g,o=v)}a*=m}else(isNaN(e)||isNaN(r))&&(o=a=NaN);break;case"string":if(null===(v=e.match(/\d+|./g)))throw u();if("-"===v[g]?(s=-1,g++):"+"===v[g]&&g++,v.length===g+1?p=n(v[g++],s):"."===v[g+1]||"."===v[g]?("."!==v[g]&&(d=n(v[g++],s)),(++g+1===v.length||"("===v[g+1]&&")"===v[g+3]||"'"===v[g+1]&&"'"===v[g+3])&&(p=n(v[g],s),f=Math.pow(10,v[g].length),g++),("("===v[g]&&")"===v[g+2]||"'"===v[g]&&"'"===v[g+2])&&(h=n(v[g+1],s),m=Math.pow(10,v[g+1].length)-1,g+=3)):"/"===v[g+1]||":"===v[g+1]?(p=n(v[g],s),f=n(v[g+2],1),g+=3):"/"===v[g+3]&&" "===v[g+1]&&(d=n(v[g],s),p=n(v[g+2],s),f=n(v[g+4],1),g+=5),v.length<=g){s=a=h+(o=f*m)*d+m*p;break}default:throw u()}if(0===o)throw l();t.s=s<0?-1:1,t.n=Math.abs(a),t.d=Math.abs(o)};function o(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function s(e,n){if(a(e,n),!(this instanceof s))return r(t.s*t.n,t.d);e=o(t.d,t.n),this.s=t.s,this.n=t.n/e,this.d=t.d/e}var l=function(){return new Error("Division by Zero")},u=function(){return new Error("Invalid argument")},c=function(){return new Error("Parameters must be integer")};s.prototype={s:1,n:0,d:1,abs:function(){return r(this.n,this.d)},neg:function(){return r(-this.s*this.n,this.d)},add:function(e,n){return a(e,n),r(this.s*this.n*t.d+t.s*this.d*t.n,this.d*t.d)},sub:function(e,n){return a(e,n),r(this.s*this.n*t.d-t.s*this.d*t.n,this.d*t.d)},mul:function(e,n){return a(e,n),r(this.s*t.s*this.n*t.n,this.d*t.d)},div:function(e,n){return a(e,n),r(this.s*t.s*this.n*t.d,this.d*t.n)},clone:function(){return r(this.s*this.n,this.d)},mod:function(e,n){if(isNaN(this.n)||isNaN(this.d))return new s(NaN);if(void 0===e)return r(this.s*this.n%this.d,1);if(a(e,n),0===t.n&&0===this.d)throw l();return r(this.s*(t.d*this.n)%(t.n*this.d),t.d*this.d)},gcd:function(e,n){return a(e,n),r(o(t.n,this.n)*o(t.d,this.d),t.d*this.d)},lcm:function(e,n){return a(e,n),0===t.n&&0===this.n?r(0,1):r(t.n*this.n,o(t.n,this.n)*o(t.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):r(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):r(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):r(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return r(this.s*this.d,this.n)},pow:function(e,n){if(a(e,n),1===t.d)return t.s<0?r(Math.pow(this.s*this.d,t.n),Math.pow(this.n,t.n)):r(Math.pow(this.s*this.n,t.n),Math.pow(this.d,t.n));if(this.s<0)return null;var o=i(this.n),s=i(this.d),l=1,u=1;for(var c in o)if("1"!==c){if("0"===c){l=0;break}if(o[c]*=t.n,o[c]%t.d!==0)return null;o[c]/=t.d,l*=Math.pow(c,o[c])}for(var c in s)if("1"!==c){if(s[c]*=t.n,s[c]%t.d!==0)return null;s[c]/=t.d,u*=Math.pow(c,s[c])}return t.s<0?r(u,l):r(l,u)},equals:function(e,n){return a(e,n),this.s*this.n*t.d===t.s*t.n*this.d},compare:function(e,n){a(e,n);var r=this.s*this.n*t.d-t.s*t.n*this.d;return(0<r)-(r<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),n=t.toContinued(),i=1;i<n.length;i++){for(var a=r(n[i-1],1),o=i-2;o>=0;o--)a=a.inverse().add(n[o]);if(Math.abs(a.sub(t).valueOf())<e)return a.mul(this.s)}return this},divisible:function(e,n){return a(e,n),!(!(t.n*this.d)||this.n*t.d%(t.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return r},toString:function(e){var t=this.n,n=this.d;if(isNaN(t)||isNaN(n))return"NaN";e=e||15;var r=function(e,t){for(;t%2===0;t/=2);for(;t%5===0;t/=5);if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++)if(n=10*n%t,r>2e3)return 0;return r}(0,n),i=function(e,t,n){for(var r=1,i=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)1&t&&(r=r*e%n);return r}(10,n,t),a=0;a<300;a++){if(r===i)return a;r=10*r%t,i=10*i%t}return 0}(0,n,r),a=this.s<0?"-":"";if(a+=t/n|0,t%=n,(t*=10)&&(a+="."),r){for(var o=i;o--;)a+=t/n|0,t%=n,t*=10;a+="(";for(o=r;o--;)a+=t/n|0,t%=n,t*=10;a+=")"}else for(o=e;t&&o--;)a+=t/n|0,t%=n,t*=10;return a}},Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Fraction=s,e.exports=s}()},939:e=>{e.exports=function e(t,n){"use strict";var r,i,a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,u=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},d=c(t).replace(o,"")||"",p=c(n).replace(o,"")||"",h=d.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=p.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(d.match(l),16)||1!==h.length&&d.match(s)&&Date.parse(d),g=parseInt(p.match(l),16)||m&&p.match(s)&&Date.parse(p)||null;if(g){if(m<g)return-1;if(m>g)return 1}for(var v=0,y=Math.max(h.length,f.length);v<y;v++){if(r=!(h[v]||"").match(u)&&parseFloat(h[v])||h[v]||0,i=!(f[v]||"").match(u)&&parseFloat(f[v])||f[v]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!==typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(h,e)&&(p.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),k=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var B=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var z,I=Object.assign;function P(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var q=!1;function R(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?P(e):""}function j(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=R(e.type,!1);case 11:return e=R(e.type.render,!1);case 1:return e=R(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case F:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Y(e,t){X(e,t);var n=U(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function ae(e,t){var n=U(t.value),r=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ve=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function De(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,_e=null,Se=null;function Ce(e){if(e=bi(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=Di(t),we(e.stateNode,e.type,t))}}function Ee(e){_e?Se?Se.push(e):Se=[e]:_e=e}function ke(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ae(e,t){return e(t)}function Ne(){}var Me=!1;function Fe(e,t,n){if(Me)return e(t,n);Me=!0;try{return Ae(e,t,n)}finally{Me=!1,(null!==_e||null!==Se)&&(Ne(),ke())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var r=Di(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Be=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Be=!1}function Oe(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var ze=!1,Ie=null,Pe=!1,qe=null,Re={onError:function(e){ze=!0,Ie=e}};function je(e,t,n,r,i,a,o,s,l){ze=!1,Ie=null,Oe.apply(Re,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(Ke(e)!==e)throw Error(a(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ue(i),e;if(o===r)return Ue(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!==(a&=o)&&(r=dt(a))}else 0!==(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Dt,wt,_t,St,Ct,Et=!1,kt=[],At=null,Nt=null,Mt=null,Ft=new Map,Tt=new Map,Bt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function zt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function It(e){var t=yi(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Pt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function qt(e,t,n){Pt(e)&&n.delete(t)}function Rt(){Et=!1,null!==At&&Pt(At)&&(At=null),null!==Nt&&Pt(Nt)&&(Nt=null),null!==Mt&&Pt(Mt)&&(Mt=null),Ft.forEach(qt),Tt.forEach(qt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Rt)))}function Kt(e){function t(t){return jt(t,e)}if(0<kt.length){jt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&jt(At,e),null!==Nt&&jt(Nt,e),null!==Mt&&jt(Mt,e),Ft.forEach(t),Tt.forEach(t),n=0;n<Bt.length;n++)(r=Bt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Bt.length&&null===(n=Bt[0]).blockedOn;)It(n),null===n.blockedOn&&Bt.shift()}var Vt=x.ReactCurrentBatchConfig,Ut=!0;function $t(e,t,n,r){var i=bt,a=Vt.transition;Vt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,Vt.transition=a}}function Ht(e,t,n,r){var i=bt,a=Vt.transition;Vt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,Vt.transition=a}}function Wt(e,t,n,r){if(Ut){var i=Zt(e,t,n,r);if(null===i)Ur(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=zt(At,e,t,n,r,i),!0;case"dragenter":return Nt=zt(Nt,e,t,n,r,i),!0;case"mouseover":return Mt=zt(Mt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ft.set(a,zt(Ft.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Tt.set(a,zt(Tt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&Dt(a),null===(a=Zt(e,t,n,r))&&Ur(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Ur(e,t,r,null,n)}}var Gt=null;function Zt(e,t,n,r){if(Gt=null,null!==(e=yi(e=De(r))))if(null===(t=Ke(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Yt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Yt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),dn=I({},un,{view:0,detail:0}),pn=an(dn),hn=I({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(hn),mn=an(I({},hn,{dataTransfer:0})),gn=an(I({},dn,{relatedTarget:0})),vn=an(I({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=I({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(I({},un,{data:0})),Dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Cn(){return Sn}var En=I({},dn,{key:function(e){if(e.key){var t=Dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=an(En),An=an(I({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(I({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Mn=an(I({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Fn=I({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=an(Fn),Bn=[9,13,27,32],Ln=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var zn=c&&"TextEvent"in window&&!On,In=c&&(!Ln||On&&8<On&&11>=On),Pn=String.fromCharCode(32),qn=!1;function Rn(e,t){switch(e){case"keyup":return-1!==Bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function $n(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Gn(e){Pr(e,0)}function Zn(e){if(W(xi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(c){var Yn;if(c){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Yn=Qn}else Yn=!1;Xn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Zn(Wn)){var t=[];$n(t,Wn,e,De(e)),Fe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Wn)}function ar(e,t){if("click"===e)return Zn(t)}function or(e,t){if("input"===e||"change"===e)return Zn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionend:Dr("Transition","TransitionEnd")},_r={},Sr={};function Cr(e){if(_r[e])return _r[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=Cr("animationend"),kr=Cr("animationiteration"),Ar=Cr("animationstart"),Nr=Cr("transitionend"),Mr=new Map,Fr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Mr.set(e,t),l(t,[e])}for(var Br=0;Br<Fr.length;Br++){var Lr=Fr[Br];Tr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Tr(Er,"onAnimationEnd"),Tr(kr,"onAnimationIteration"),Tr(Ar,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(je.apply(this,arguments),ze){if(!ze)throw Error(a(198));var c=Ie;ze=!1,Ie=null,Pe||(Pe=!0,qe=c)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Ir(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Ir(i,s,u),a=l}}}if(Pe)throw e=qe,Pe=!1,qe=null,e}function qr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Rr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(zr.has(t)||Rr(t,!1,e),Rr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Rr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Jt(t)){case 1:var i=$t;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Fe((function(){var r=a,i=De(n),o=[];e:{var s=Mr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Er:case kr:case Ar:l=vn;break;case Nr:l=Mn;break;case"scroll":l=pn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),d=!c&&"scroll"===e,p=c?null!==s?s+"Capture":null:s;c=[];for(var h,f=r;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==p&&(null!=(m=Te(f,p))&&c.push($r(f,m,h)))),d)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=Ke(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,m="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==l?s:xi(l),h=null==u?s:xi(u),(s=new c(m,f+"leave",l,n,i)).target=d,s.relatedTarget=h,m=null,yi(i)===r&&((c=new c(p,f+"enter",u,n,i)).target=h,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(p=u,f=0,h=c=l;h;h=Wr(h))f++;for(h=0,m=p;m;m=Wr(m))h++;for(;0<f-h;)c=Wr(c),f--;for(;0<h-f;)p=Wr(p),h--;for(;f--;){if(c===p||null!==p&&c===p.alternate)break e;c=Wr(c),p=Wr(p)}c=null}else c=null;null!==l&&Gr(o,s,l,c,!1),null!==u&&null!==d&&Gr(o,d,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Jn;else if(Un(s))if(Xn)g=or;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?$n(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xi(r):window,e){case"focusin":(Un(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Kn?Rn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(In&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Kn&&(y=en()):(Yt="value"in(Xt=i)?Xt.value:Xt.textContent,Kn=!0)),0<(v=Hr(r,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=zn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(qn=!0,Pn);case"textInput":return(e=t.data)===Pn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Ln&&Rn(e,t)?(e=en(),Qt=Yt=Xt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Pr(o,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Te(e,n))&&r.unshift($r(e,a,i)),null!=(a=Te(e,t))&&r.push($r(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Te(n,a))&&o.unshift($r(n,l,s)):i||null!=(l=Te(n,a))&&o.push($r(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Zr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Jr,"")}function Yr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Kt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Kt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),pi="__reactFiber$"+di,hi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[pi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[pi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Di(e){return e[hi]||null}var wi=[],_i=-1;function Si(e){return{current:e}}function Ci(e){0>_i||(e.current=wi[_i],wi[_i]=null,_i--)}function Ei(e,t){_i++,wi[_i]=e.current,e.current=t}var ki={},Ai=Si(ki),Ni=Si(!1),Mi=ki;function Fi(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ti(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Bi(){Ci(Ni),Ci(Ai)}function Li(e,t,n){if(Ai.current!==ki)throw Error(a(168));Ei(Ai,t),Ei(Ni,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return I({},n,r)}function zi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Mi=Ai.current,Ei(Ai,e),Ei(Ni,Ni.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ni),Ci(Ai),Ei(Ai,e)):Ci(Ni),Ei(Ni,n)}var Pi=null,qi=!1,Ri=!1;function ji(e){null===Pi?Pi=[e]:Pi.push(e)}function Ki(){if(!Ri&&null!==Pi){Ri=!0;var e=0,t=bt;try{var n=Pi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Pi=null,qi=!1}catch(i){throw null!==Pi&&(Pi=Pi.slice(e+1)),We(Qe,Ki),i}finally{bt=t,Ri=!1}}return null}var Vi=[],Ui=0,$i=null,Hi=0,Wi=[],Gi=0,Zi=null,Ji=1,Xi="";function Yi(e,t){Vi[Ui++]=Hi,Vi[Ui++]=$i,$i=e,Hi=t}function Qi(e,t,n){Wi[Gi++]=Ji,Wi[Gi++]=Xi,Wi[Gi++]=Zi,Zi=e;var r=Ji;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Ji=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Yi(e,1),Qi(e,1,0))}function ta(e){for(;e===$i;)$i=Vi[--Ui],Vi[Ui]=null,Hi=Vi[--Ui],Vi[Ui]=null;for(;e===Zi;)Zi=Wi[--Gi],Wi[Gi]=null,Xi=Wi[--Gi],Wi[Gi]=null,Ji=Wi[--Gi],Wi[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Fu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Fu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw pa(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=ra;e;)e=ui(e.nextSibling)}function ha(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=x.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Bu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Iu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===T&&ya(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Pu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Ou(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Iu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case D:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case w:return(t=Pu(t,e.mode,n)).return=e,t;case T:return p(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Ou(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case D:return n.key===i?u(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case T:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);va(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case D:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=h(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(i,d),ia&&Yi(i,m),u;if(null===d){for(;m<s.length;m++)null!==(d=p(i,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return ia&&Yi(i,m),u}for(d=r(i,d);m<s.length;m++)null!==(g=f(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),ia&&Yi(i,m),u}function g(i,s,l,u){var c=O(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=h(i,m,y.value,u);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===d?c=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),ia&&Yi(i,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=p(i,y.value,u))&&(s=o(y,s,g),null===d?c=y:d.sibling=y,d=y);return ia&&Yi(i,g),c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),ia&&Yi(i,g),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case D:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===_){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===T&&ya(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=ga(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===_?((a=Ou(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Lu(o.type,o.key,o.props,null,r.mode,l)).ref=ga(r,a,o),l.return=r,r=l)}return s(r);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Pu(o,r.mode,l)).return=r,r=a}return s(r);case T:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(O(o))return g(r,a,o,l);va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Iu(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var xa=ba(!0),Da=ba(!1),wa=Si(null),_a=null,Sa=null,Ca=null;function Ea(){Ca=Sa=_a=null}function ka(e){var t=wa.current;Ci(wa),e._currentValue=t}function Aa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Na(e,t){_a=e,Ca=Sa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ma(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===Sa){if(null===_a)throw Error(a(308));Sa=e,_a.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Fa=null;function Ta(e){null===Fa?Fa=[e]:Fa.push(e)}function Ba(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,La(e,r)}function La(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function za(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,La(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,La(e,n)}function Ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ja(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ka(e,t,n,r){var i=e.updateQueue;Oa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var p=s.lane,h=s.eventTime;if((r&p)===p){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(p=t,h=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=m.payload)?f.call(h,d,p):f)||void 0===p)break e;d=I({},d,p);break e;case 2:Oa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=h,l=d):c=c.next=h,o|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);zl|=o,e.lanes=o,e.memoizedState=d}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua={},$a=Si(Ua),Ha=Si(Ua),Wa=Si(Ua);function Ga(e){if(e===Ua)throw Error(a(174));return e}function Za(e,t){switch(Ei(Wa,t),Ei(Ha,e),Ei($a,Ua),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci($a),Ei($a,t)}function Ja(){Ci($a),Ci(Ha),Ci(Wa)}function Xa(e){Ga(Wa.current);var t=Ga($a.current),n=le(t,e.type);t!==n&&(Ei(Ha,e),Ei($a,n))}function Ya(e){Ha.current===e&&(Ci($a),Ci(Ha))}var Qa=Si(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=x.ReactCurrentDispatcher,io=x.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,uo=!1,co=!1,po=0,ho=0;function fo(){throw Error(a(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(ao=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Qo:es,e=n(r,i),co){o=0;do{if(co=!1,po=0,25<=o)throw Error(a(301));o+=1,lo=so=null,t.updateQueue=null,ro.current=ts,e=n(r,i)}while(co)}if(ro.current=Yo,t=null!==so&&null!==so.next,ao=0,lo=so=oo=null,uo=!1,t)throw Error(a(300));return e}function vo(){var e=0!==po;return po=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function xo(e,t){return"function"===typeof t?t(e):t}function Do(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((ao&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=p,s=r):u=u.next=p,oo.lanes|=d,zl|=d}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,zl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _o(){}function So(e,t){var n=oo,r=bo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,zo(ko.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Fo(9,Eo.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(a(349));0!==(30&ao)||Co(n,t,i)}return i}function Co(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Eo(e,t,n,r){t.value=n,t.getSnapshot=r,Ao(t)&&No(e)}function ko(e,t,n){return n((function(){Ao(t)&&No(e)}))}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function No(e){var t=La(e,1);null!==t&&nu(t,e,1,-1)}function Mo(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function To(){return bo().memoizedState}function Bo(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Fo(t,n,a,r))}oo.flags|=e,i.memoizedState=Fo(1|t,n,a,r)}function Oo(e,t){return Bo(8390656,8,e,t)}function zo(e,t){return Lo(2048,8,e,t)}function Io(e,t){return Lo(4,2,e,t)}function Po(e,t){return Lo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ro(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,qo.bind(null,t,e),n)}function jo(){}function Ko(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Uo(e,t,n){return 0===(21&ao)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),oo.lanes|=n,zl|=n,e.baseState=!0),t)}function $o(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Ho(){return bo().memoizedState}function Wo(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zo(e))Jo(t,n);else if(null!==(n=Ba(e,t,n,r))){nu(n,e,r,eu()),Xo(n,t,r)}}function Go(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zo(e))Jo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ta(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ba(e,t,i,r))&&(nu(n,e,r,i=eu()),Xo(n,t,r))}}function Zo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){co=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Yo={readContext:Ma,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Qo={readContext:Ma,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Oo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Mo,useDebugValue:jo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Mo(!1),t=e[0];return e=$o.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nl)throw Error(a(349));0!==(30&ao)||Co(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Oo(ko.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,Eo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Nl.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=po++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ho++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ma,useCallback:Ko,useContext:Ma,useEffect:zo,useImperativeHandle:Ro,useInsertionEffect:Io,useLayoutEffect:Po,useMemo:Vo,useReducer:Do,useRef:To,useState:function(){return Do(xo)},useDebugValue:jo,useDeferredValue:function(e){return Uo(bo(),so.memoizedState,e)},useTransition:function(){return[Do(xo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:So,useId:Ho,unstable_isNewReconciler:!1},ts={readContext:Ma,useCallback:Ko,useContext:Ma,useEffect:zo,useImperativeHandle:Ro,useInsertionEffect:Io,useLayoutEffect:Po,useMemo:Vo,useReducer:wo,useRef:To,useState:function(){return wo(xo)},useDebugValue:jo,useDeferredValue:function(e){var t=bo();return null===so?t.memoizedState=e:Uo(t,so.memoizedState,e)},useTransition:function(){return[wo(xo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:So,useId:Ho,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=qa(e,a,i))&&(nu(t,e,i,r),Ra(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=qa(e,a,i))&&(nu(t,e,i,r),Ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=qa(e,i,r))&&(nu(t,e,r,n),Ra(t,e,r))}};function as(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function os(e,t,n){var r=!1,i=ki,a=t.contextType;return"object"===typeof a&&null!==a?a=Ma(a):(i=Ti(t)?Mi:Ai.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Fi(e,i):ki),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},za(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ma(a):(a=Ti(t)?Mi:Ai.current,i.context=Fi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Ka(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ul||(Ul=!0,$l=r),ds(0,t)},n}function fs(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,qa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?Da(t,null,n,r):xa(t,e.child,n,r)}function Ds(e,t,n,r,i){n=n.render;var a=t.ref;return Na(t,i),r=go(e,t,n,r,a,i),n=vo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Us(e,t,i))}function ws(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Tu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_s(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Us(e,t,i)}return t.flags|=1,(e=Bu(a,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Us(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Es(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Bl,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Bl,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Bl,Tl),Tl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Bl,Tl),Tl|=r;return xs(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,i){var a=Ti(n)?Mi:Ai.current;return a=Fi(t,a),Na(t,i),n=go(e,t,n,r,a,i),r=vo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Us(e,t,i))}function ks(e,t,n,r,i){if(Ti(n)){var a=!0;zi(t)}else a=!1;if(Na(t,i),null===t.stateNode)Vs(e,t),os(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ma(u):u=Fi(t,u=Ti(n)?Mi:Ai.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&ss(t,o,r,u),Oa=!1;var p=t.memoizedState;o.state=p,Ka(t,r,o,i),l=t.memoizedState,s!==r||p!==l||Ni.current||Oa?("function"===typeof c&&(rs(t,n,c,r),l=t.memoizedState),(s=Oa||as(t,n,s,r,p,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ia(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ns(t.type,s),o.props=u,d=t.pendingProps,p=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ma(l):l=Fi(t,l=Ti(n)?Mi:Ai.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||p!==l)&&ss(t,o,r,l),Oa=!1,p=t.memoizedState,o.state=p,Ka(t,r,o,i);var f=t.memoizedState;s!==d||p!==f||Ni.current||Oa?("function"===typeof h&&(rs(t,n,h,r),f=t.memoizedState),(u=Oa||as(t,n,u,r,p,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ii(t,n,!1),Us(e,t,a);r=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=xa(t,e.child,null,a),t.child=xa(t,null,s,a)):xs(e,t,s,a),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),Za(e,t.containerInfo)}function Ms(e,t,n,r,i){return ha(),fa(i),t.flags|=256,xs(e,t,n,r),t.child}var Fs,Ts,Bs,Ls,Os={dehydrated:null,treeContext:null,retryLane:0};function zs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Is(e,t,n){var r,i=t.pendingProps,o=Qa.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(Qa,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=zu(l,i,0,null),e=Ou(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=zs(n),t.memoizedState=Os,e):Ps(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,qs(e,t,s,r=cs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=zu({mode:"visible",children:r.children},i,0,null),(o=Ou(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&xa(t,e.child,null,s),t.child.memoizedState=zs(s),t.memoizedState=Os,o);if(0===(1&t.mode))return qs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,qs(e,t,s,r=cs(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Nl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,La(e,i),nu(r,e,i,-1))}return mu(),qs(e,t,s,r=cs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=ku.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Gi++]=Ji,Wi[Gi++]=Xi,Wi[Gi++]=Zi,Ji=e.id,Xi=e.overflow,Zi=t),t=Ps(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Bu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Bu(r,s):(s=Ou(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?zs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Os,i}return e=(s=e.child).sibling,i=Bu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ps(e,t){return(t=zu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qs(e,t,n,r){return null!==r&&fa(r),xa(t,e.child,null,n),(e=Ps(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Rs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Aa(e.return,t,n)}function js(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Ks(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=Qa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Rs(e,n,t);else if(19===e.tag)Rs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(Qa,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,a);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Us(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Bu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $s(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ws(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ti(t.type)&&Bi(),Hs(t),null;case 3:return r=t.stateNode,Ja(),Ci(Ni),Ci(Ai),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ou(aa),aa=null))),Ts(e,t),Hs(t),null;case 5:Ya(t);var i=Ga(Wa.current);if(n=t.type,null!==e&&null!=t.stateNode)Bs(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=Ga($a.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pi]=t,r[hi]=o,e=0!==(1&t.mode),n){case"dialog":qr("cancel",r),qr("close",r);break;case"iframe":case"object":case"embed":qr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)qr(Or[i],r);break;case"source":qr("error",r);break;case"img":case"image":case"link":qr("error",r),qr("load",r);break;case"details":qr("toggle",r);break;case"input":J(r,o),qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},qr("invalid",r);break;case"textarea":ie(r,o),qr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&qr("scroll",r)}switch(n){case"input":H(r),Q(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[hi]=r,Fs(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":qr("cancel",e),qr("close",e),i=r;break;case"iframe":case"object":case"embed":qr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)qr(Or[i],e);i=r;break;case"source":qr("error",e),i=r;break;case"img":case"image":case"link":qr("error",e),qr("load",e),i=r;break;case"details":qr("toggle",e),i=r;break;case"input":J(e,r),i=Z(e,r),qr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=I({},r,{value:void 0}),qr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),qr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&pe(e,c):"number"===typeof c&&pe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&qr("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":H(e),Q(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+U(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ga(Wa.current),Ga($a.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Yr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ci(Qa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))pa(),ha(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[pi]=t}else ha(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Qa.current)?0===Ll&&(Ll=3):mu())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return Ja(),Ts(e,t),null===e&&Kr(t.stateNode.containerInfo),Hs(t),null;case 10:return ka(t.type._context),Hs(t),null;case 19:if(Ci(Qa),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)$s(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,$s(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(Qa,1&Qa.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Kl&&(t.flags|=128,r=!0,$s(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$s(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Hs(t),null}else 2*Xe()-o.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,r=!0,$s(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Qa.current,Ei(Qa,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Gs(e,t){switch(ta(t),t.tag){case 1:return Ti(t.type)&&Bi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),Ci(Ni),Ci(Ai),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ya(t),null;case 13:if(Ci(Qa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(Qa),null;case 4:return Ja(),null;case 10:return ka(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Fs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ts=function(){},Bs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ga($a.current);var a,o=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),o=[];break;case"select":i=I({},i,{value:void 0}),r=I({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&qr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Zs=!1,Js=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Ys=null;function Qs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Su(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[hi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||Qs(n,t);case 6:var r=cl,i=dl;cl=null,pl(e,t,n),dl=i,null!==(cl=r)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Kt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=dl,cl=n.stateNode.containerInfo,dl=!0,pl(e,t,n),cl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(n,t,o),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Js&&(Qs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Su(n,t,s)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,pl(e,t,n),Js=r):pl(e,t,n);break;default:pl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));hl(o,s,i),cl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Su(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Su(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Su(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(g){Su(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),be(l,s);var c=be(l,o);for(s=0;s<u.length;s+=2){var d=u[s],p=u[s+1];"style"===d?ge(i,p):"dangerouslySetInnerHTML"===d?de(i,p):"children"===d?pe(i,p):b(i,d,p,c)}switch(l){case"input":Y(i,o);break;case"textarea":ae(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[hi]=o}catch(g){Su(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Su(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kt(t.containerInfo)}catch(g){Su(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Xe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(c=Js)||d,ml(t,e),Js=c):ml(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Ys=e,d=e.child;null!==d;){for(p=Ys=d;null!==Ys;){switch(f=(h=Ys).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Qs(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Su(r,n,g)}}break;case 5:Qs(h,h.return);break;case 22:if(null!==h.memoizedState){Dl(p);continue}}null!==f?(f.return=h,Ys=f):Dl(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{i=p.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=p.stateNode,s=void 0!==(u=p.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){Su(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){Su(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pe(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){Su(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ys=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Ys;){var i=Ys,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Zs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Zs;var u=Js;if(Zs=o,(Js=l)&&!u)for(Ys=i;null!==Ys;)l=(o=Ys).child,22===o.tag&&null!==o.memoizedState?wl(i):null!==l?(l.return=o,Ys=l):wl(i);for(;null!==a;)Ys=a,bl(a,t,n),a=a.sibling;Ys=i,Zs=s,Js=u}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ys=a):xl(e)}}function xl(e){for(;null!==Ys;){var t=Ys;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Kt(p)}}}break;default:throw Error(a(163))}Js||512&t.flags&&il(t)}catch(h){Su(t,t.return,h)}}if(t===e){Ys=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ys=n;break}Ys=t.return}}function Dl(e){for(;null!==Ys;){var t=Ys;if(t===e){Ys=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ys=n;break}Ys=t.return}}function wl(e){for(;null!==Ys;){var t=Ys;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Su(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Su(t,i,l)}}var a=t.return;try{il(t)}catch(l){Su(t,a,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Su(t,o,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Ys=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ys=s;break}Ys=t.return}}var _l,Sl=Math.ceil,Cl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,kl=x.ReactCurrentBatchConfig,Al=0,Nl=null,Ml=null,Fl=0,Tl=0,Bl=Si(0),Ll=0,Ol=null,zl=0,Il=0,Pl=0,ql=null,Rl=null,jl=0,Kl=1/0,Vl=null,Ul=!1,$l=null,Hl=null,Wl=!1,Gl=null,Zl=0,Jl=0,Xl=null,Yl=-1,Ql=0;function eu(){return 0!==(6&Al)?Xe():-1!==Yl?Yl:Yl=Xe()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Fl?Fl&-Fl:null!==ma.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nu(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(a(185));vt(e,n,r),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Il|=n),4===Ll&&su(e,Fl)),ru(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Kl=Xe()+500,qi&&Ki()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=ht(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=pt(e,e===Nl?Fl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){qi=!0,ji(e)}(lu.bind(null,e)):ji(lu.bind(null,e)),oi((function(){0===(6&Al)&&Ki()})),n=null;else{switch(xt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Yl=-1,Ql=0,0!==(6&Al))throw Error(a(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=pt(e,e===Nl?Fl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Al;Al|=2;var o=fu();for(Nl===e&&Fl===t||(Vl=null,Kl=Xe()+500,pu(e,t));;)try{yu();break}catch(l){hu(e,l)}Ea(),Cl.current=o,Al=i,null!==Ml?t=0:(Nl=null,Fl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=au(e,i))),1===t)throw n=Ol,pu(e,0),su(e,r),ru(e,Xe()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(o=ft(e))&&(r=o,t=au(e,o))),1===t))throw n=Ol,pu(e,0),su(e,r),ru(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Du(e,Rl,Vl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=jl+500-Xe())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Du.bind(null,e,Rl,Vl),t);break}Du(e,Rl,Vl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(Du.bind(null,e,Rl,Vl),r);break}Du(e,Rl,Vl);break;default:throw Error(a(329))}}}return ru(e,Xe()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=ql;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Rl,Rl=n,null!==t&&ou(t)),e}function ou(e){null===Rl?Rl=e:Rl.push.apply(Rl,e)}function su(e,t){for(t&=~Pl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Al))throw Error(a(327));wu();var t=pt(e,0);if(0===(1&t))return ru(e,Xe()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Ol,pu(e,0),su(e,t),ru(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Du(e,Rl,Vl),ru(e,Xe()),null}function uu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Kl=Xe()+500,qi&&Ki())}}function cu(e){null!==Gl&&0===Gl.tag&&0===(6&Al)&&wu();var t=Al;Al|=1;var n=kl.transition,r=bt;try{if(kl.transition=null,bt=1,e)return e()}finally{bt=r,kl.transition=n,0===(6&(Al=t))&&Ki()}}function du(){Tl=Bl.current,Ci(Bl)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Bi();break;case 3:Ja(),Ci(Ni),Ci(Ai),no();break;case 5:Ya(r);break;case 4:Ja();break;case 13:case 19:Ci(Qa);break;case 10:ka(r.type._context);break;case 22:case 23:du()}n=n.return}if(Nl=e,Ml=e=Bu(e.current,null),Fl=Tl=t,Ll=0,Ol=null,Pl=Il=zl=0,Rl=ql=null,null!==Fa){for(t=0;t<Fa.length;t++)if(null!==(r=(n=Fa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Fa=null}return e}function hu(e,t){for(;;){var n=Ml;try{if(Ea(),ro.current=Yo,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(ao=0,lo=so=oo=null,co=!1,po=0,El.current=null,null===n||null===n.return){Ll=1,Ol=t,Ml=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Fl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(o,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ms(o,c,t),mu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),fa(us(u,l));break e}}o=u=us(u,l),4!==Ll&&(Ll=2),null===ql?ql=[o]:ql.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ja(o,hs(0,u,t));break e;case 1:l=u;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hl||!Hl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,ja(o,fs(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(x){t=x,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function fu(){var e=Cl.current;return Cl.current=Yo,null===e?Yo:e}function mu(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Nl||0===(268435455&zl)&&0===(268435455&Il)||su(Nl,Fl)}function gu(e,t){var n=Al;Al|=2;var r=fu();for(Nl===e&&Fl===t||(Vl=null,pu(e,t));;)try{vu();break}catch(i){hu(e,i)}if(Ea(),Al=n,Cl.current=r,null!==Ml)throw Error(a(261));return Nl=null,Fl=0,Ll}function vu(){for(;null!==Ml;)bu(Ml)}function yu(){for(;null!==Ml&&!Ze();)bu(Ml)}function bu(e){var t=_l(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?xu(e):Ml=t,El.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ws(n,t,Tl)))return void(Ml=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Ll=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Ll&&(Ll=5)}function Du(e,t,n){var r=bt,i=kl.transition;try{kl.transition=null,bt=1,function(e,t,n,r){do{wu()}while(null!==Gl);if(0!==(6&Al))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nl&&(Ml=Nl=null,Fl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Nu(tt,(function(){return wu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=kl.transition,kl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,El.current=null,function(e,t){if(ei=Ut,hr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(D){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,p=e,h=null;t:for(;;){for(var f;p!==n||0!==i&&3!==p.nodeType||(l=s+i),p!==o||0!==r&&3!==p.nodeType||(u=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(f=p.firstChild);)h=p,p=f;for(;;){if(p===e)break t;if(h===n&&++c===i&&(l=s),h===o&&++d===r&&(u=s),null!==(f=p.nextSibling))break;h=(p=h).parentNode}p=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ut=!1,Ys=t;null!==Ys;)if(e=(t=Ys).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ys=e;else for(;null!==Ys;){t=Ys;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(D){Su(t,t.return,D)}if(null!==(e=t.sibling)){e.return=t.return,Ys=e;break}Ys=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Ut=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),Al=l,bt=s,kl.transition=o}else e.current=n;if(Wl&&(Wl=!1,Gl=e,Zl=i),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ul)throw Ul=!1,e=$l,$l=null,e;0!==(1&Zl)&&0!==e.tag&&wu(),o=e.pendingLanes,0!==(1&o)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,Ki()}(e,t,n,r)}finally{kl.transition=i,bt=r}return null}function wu(){if(null!==Gl){var e=xt(Zl),t=kl.transition,n=bt;try{if(kl.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Zl=0,0!==(6&Al))throw Error(a(331));var i=Al;for(Al|=4,Ys=e.current;null!==Ys;){var o=Ys,s=o.child;if(0!==(16&Ys.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ys=c;null!==Ys;){var d=Ys;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var p=d.child;if(null!==p)p.return=d,Ys=p;else for(;null!==Ys;){var h=(d=Ys).sibling,f=d.return;if(al(d),d===c){Ys=null;break}if(null!==h){h.return=f,Ys=h;break}Ys=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ys=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ys=s;else e:for(;null!==Ys;){if(0!==(2048&(o=Ys).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ys=y;break e}Ys=o.return}}var b=e.current;for(Ys=b;null!==Ys;){var x=(s=Ys).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Ys=x;else e:for(s=b;null!==Ys;){if(0!==(2048&(l=Ys).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Su(l,l.return,w)}if(l===s){Ys=null;break e}var D=l.sibling;if(null!==D){D.return=l.return,Ys=D;break e}Ys=l.return}}if(Al=i,Ki(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{bt=n,kl.transition=t}}return!1}function _u(e,t,n){e=qa(e,t=hs(0,t=us(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function Su(e,t,n){if(3===e.tag)_u(e,e,n);else for(;null!==t;){if(3===t.tag){_u(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=qa(t,e=fs(t,e=us(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Fl&n)===n&&(4===Ll||3===Ll&&(130023424&Fl)===Fl&&500>Xe()-jl?pu(e,0):Pl|=n),ru(e,t)}function Eu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=La(e,t))&&(vt(e,t,n),ru(e,n))}function ku(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Eu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Eu(e,n)}function Nu(e,t){return We(e,t)}function Mu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fu(e,t,n,r){return new Mu(e,t,n,r)}function Tu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bu(e,t){var n=e.alternate;return null===n?((n=Fu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Tu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Ou(n.children,i,o,t);case S:s=8,i|=8;break;case C:return(e=Fu(12,n,t,2|i)).elementType=C,e.lanes=o,e;case N:return(e=Fu(13,n,t,i)).elementType=N,e.lanes=o,e;case M:return(e=Fu(19,n,t,i)).elementType=M,e.lanes=o,e;case B:return zu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case k:s=9;break e;case A:s=11;break e;case F:s=14;break e;case T:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Fu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ou(e,t,n,r){return(e=Fu(7,e,r,t)).lanes=n,e}function zu(e,t,n,r){return(e=Fu(22,e,r,t)).elementType=B,e.lanes=n,e.stateNode={isHidden:!1},e}function Iu(e,t,n){return(e=Fu(6,e,null,t)).lanes=n,e}function Pu(e,t,n){return(t=Fu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ru(e,t,n,r,i,a,o,s,l){return e=new qu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Fu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},za(a),e}function ju(e){if(!e)return ki;e:{if(Ke(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ti(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ti(n))return Oi(e,n,t)}return t}function Ku(e,t,n,r,i,a,o,s,l){return(e=Ru(n,r,!0,e,0,a,0,s,l)).context=ju(null),n=e.current,(a=Pa(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,qa(n,a,i),e.current.lanes=i,vt(e,i,r),ru(e,r),e}function Vu(e,t,n,r){var i=t.current,a=eu(),o=tu(i);return n=ju(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qa(i,t,o))&&(nu(e,i,o,a),Ra(e,i,o)),o}function Uu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $u(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){$u(e,t),(e=e.alternate)&&$u(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),ha();break;case 5:Xa(t);break;case 1:Ti(t.type)&&zi(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(wa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(Qa,1&Qa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Is(e,t,n):(Ei(Qa,1&Qa.current),null!==(e=Us(e,t,n))?e.sibling:null);Ei(Qa,1&Qa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ks(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(Qa,Qa.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Us(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Qi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Fi(t,Ai.current);Na(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ti(r)?(o=!0,zi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,za(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Tu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===F)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Es(null,t,r,e,n);break e;case 1:t=ks(null,t,r,e,n);break e;case 11:t=Ds(null,t,r,e,n);break e;case 14:t=ws(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ia(e,t),Ka(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ms(e,t,r,n,i=us(Error(a(423)),t));break e}if(r!==i){t=Ms(e,t,r,n,i=us(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Da(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===i){t=Us(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Is(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xa(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ds(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(wa,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Us(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Pa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Aa(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Aa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Na(t,n),r=r(i=Ma(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),ws(e,t,r,i=ns(r.type,i),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Vs(e,t),t.tag=1,Ti(r)?(e=!0,zi(t)):e=!1,Na(t,n),os(t,r,i),ls(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Ks(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Wu="function"===typeof reportError?reportError:function(e){console.error(e)};function Gu(e){this._internalRoot=e}function Zu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yu(){}function Qu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Uu(o);s.call(e)}}Vu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Uu(o);a.call(e)}}var o=Ku(t,r,e,0,null,!1,0,"",Yu);return e._reactRootContainer=o,e[fi]=o.current,Kr(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Uu(l);s.call(e)}}var l=Ru(e,0,!1,null,0,!1,0,"",Yu);return e._reactRootContainer=l,e[fi]=l.current,Kr(8===e.nodeType?e.parentNode:e),cu((function(){Vu(t,l,n,r)})),l}(n,t,e,i,r);return Uu(o)}Zu.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vu(e,t,null,null)},Zu.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Vu(null,e,null,null)})),t[fi]=null}},Zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bt.length&&0!==t&&t<Bt[n].priority;n++);Bt.splice(n,0,e),0===n&&It(e)}},Dt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Xe()),0===(6&Al)&&(Kl=Xe()+500,Ki()))}break;case 13:cu((function(){var t=La(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Hu(e,1)}},wt=function(e){if(13===e.tag){var t=La(e,134217728);if(null!==t)nu(t,e,134217728,eu());Hu(e,134217728)}},_t=function(e){if(13===e.tag){var t=tu(e),n=La(e,t);if(null!==n)nu(n,e,t,eu());Hu(e,t)}},St=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Di(r);if(!i)throw Error(a(90));W(r),Y(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uu,Ne=cu;var ec={usingClientEntryPoint:!1,Events:[bi,xi,Di,Ee,ke,uu]},tc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ju(e))throw Error(a(299));var n=!1,r="",i=Wu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ru(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Kr(8===e.nodeType?e.parentNode:e),new Gu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(a(200));return Qu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ju(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Wu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Ku(t,null,e,1,null!=n?n:null,i,0,o,s),e[fi]=t.current,Kr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zu(t)},t.render=function(e,t,n){if(!Xu(t))throw Error(a(200));return Qu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(a(40));return!!e._reactRootContainer&&(cu((function(){Qu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Qu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var D=Array.isArray,w=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+A(l,0):a,D(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",D(e))for(var u=0;u<e.length;u++){var c=a+A(s=e[u],u);l+=N(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=N(s=s.value,t,i,c=a+A(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function M(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function F(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},B={transition:null},L={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:B,ReactCurrentOwner:_};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:F}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,p=null,h=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function D(e){if(g=!1,x(e),!m)if(null!==r(u))m=!0,B(w);else{var t=r(c);null!==t&&L(D,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(E),E=-1),f=!0;var a=h;try{for(x(n),p=r(u);null!==p&&(!(p.expirationTime>n)||e&&!N());){var o=p.callback;if("function"===typeof o){p.callback=null,h=p.priorityLevel;var s=o(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?p.callback=s:p===r(u)&&i(u),x(n)}else i(u);p=r(u)}if(null!==p)var l=!0;else{var d=r(c);null!==d&&L(D,d.startTime-n),l=!1}return l}finally{p=null,h=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,C=null,E=-1,k=5,A=-1;function N(){return!(t.unstable_now()-A<k)}function M(){if(null!==C){var e=t.unstable_now();A=e;var n=!0;try{n=C(!0,e)}finally{n?_():(S=!1,C=null)}}else S=!1}if("function"===typeof b)_=function(){b(M)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,T=F.port2;F.port1.onmessage=M,_=function(){T.postMessage(null)}}else _=function(){v(M,0)};function B(e){C=e,S||(S=!0,_())}function L(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,B(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(y(E),E=-1):g=!0,L(D,a-o))):(e.sortIndex=s,n(u,e),m||f||(m=!0,B(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},334:(e,t,n)=>{var r=n(359),i=n(66),a=n(16),o=n(538),s=n(288),l=n(262),u=n(430);u.alea=r,u.xor128=i,u.xorwow=a,u.xorshift7=o,u.xor4096=s,u.tychei=l,e.exports=u},359:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new a(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},262:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},66:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},288:function(e,t,n){var r;!function(e,i){function a(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=o,e.X=s,e.i=i}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},538:function(e,t,n){var r;!function(e,i){function a(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},16:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},430:function(e,t,n){var r;!function(i,a,o){var s,l=256,u=o.pow(l,6),c=o.pow(2,52),d=2*c,p=255;function h(e,t,n){var r=[],p=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,y(a)]}}():e,3),r),h=new f(r),b=function(){for(var e=h.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|h.g(4)},b.quick=function(){return h.g(4)/4294967296},b.double=b,v(y(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(o.random=e,t):e})(b,p,"global"in t?t.global:this==o,t.state)}function f(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);i<l;)o[i]=i++;for(i=0;i<l;i++)o[i]=o[a=p&a+e[i%n]+(t=o[i])],o[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,o=r.S;e--;)t=o[i=p&i+1],n=n*l+o[p&(o[i]=o[a=p&a+t])+(o[a]=t)];return r.i=i,r.j=a,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(g(e[n],t-1))}catch(a){}return r.length?r:"string"==i?e:e+"\0"}function v(e,t){for(var n,r=e+"",i=0;i<r.length;)t[p&i]=p&(n^=19*t[p&i])+r.charCodeAt(i++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(v(o.random(),a),e.exports){e.exports=h;try{s=n(996)}catch(b){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},841:e=>{function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var a=0,o=r.length;a<o;a++)r[a].fn!==t&&r[a].fn._!==t&&i.push(r[a]);return i.length?n[e]=i:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t},996:()=>{},422:function(e){e.exports=function(){"use strict";function e(){return!0}function t(){return!1}function n(){}const r="Argument is not a typed-function.";function i(){function a(e){return"object"===typeof e&&null!==e&&e.constructor===Object}const o=[{name:"number",test:function(e){return"number"===typeof e}},{name:"string",test:function(e){return"string"===typeof e}},{name:"boolean",test:function(e){return"boolean"===typeof e}},{name:"Function",test:function(e){return"function"===typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],s={name:"any",test:e,isAny:!0};let l,u,c=0,d={createCount:0};function p(e){const t=l.get(e);if(t)return t;let n='Unknown type "'+e+'"';const r=e.toLowerCase();let i;for(i of u)if(i.toLowerCase()===r){n+='. Did you mean "'+i+'" ?';break}throw new TypeError(n)}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";const n=t?p(t).index:u.length,r=[];for(let a=0;a<e.length;++a){if(!e[a]||"string"!==typeof e[a].name||"function"!==typeof e[a].test)throw new TypeError("Object with properties {name: string, test: function} expected");const t=e[a].name;if(l.has(t))throw new TypeError('Duplicate type name "'+t+'"');r.push(t),l.set(t,{name:t,test:e[a].test,isAny:e[a].isAny,index:n+a,conversionsTo:[]})}const i=u.slice(n);u=u.slice(0,n).concat(r).concat(i);for(let a=n+r.length;a<u.length;++a)l.get(u[a]).index=a}function f(){l=new Map,u=[],c=0,h([s],!1)}function m(){let e;for(e of u)l.get(e).conversionsTo=[];c=0}function g(e){const t=u.filter((t=>{const n=l.get(t);return!n.isAny&&n.test(e)}));return t.length?t:["any"]}function v(e){return e&&"function"===typeof e&&"_typedFunctionData"in e}function y(e,t,n){if(!v(e))throw new TypeError(r);const i=n&&n.exact,a=C(Array.isArray(t)?t.join(","):t),o=D(a);if(!i||o in e.signatures){const t=e._typedFunctionData.signatureMap.get(o);if(t)return t}const s=a.length;let l,u;if(i){let t;for(t in l=[],e.signatures)l.push(e._typedFunctionData.signatureMap.get(t))}else l=e._typedFunctionData.signatures;for(let r=0;r<s;++r){const e=a[r],t=[];let n;for(n of l){const i=N(n.params,r);if(i&&(!e.restParam||i.restParam)){if(!i.hasAny){const t=S(i);if(e.types.some((e=>!t.has(e.name))))continue}t.push(n)}}if(l=t,0===l.length)break}for(u of l)if(u.params.length<=s)return u;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+D(a,", ")+"))")}function b(e,t,n){return y(e,t,n).implementation}function x(e,t){const n=p(t);if(n.test(e))return e;const r=n.conversionsTo;if(0===r.length)throw new Error("There are no conversions to "+t+" defined.");for(let i=0;i<r.length;i++)if(p(r[i].from).test(e))return r[i].convert(e);throw new Error("Cannot convert "+e+" to "+t)}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.map((e=>e.name)).join(t)}function w(e){const t=0===e.indexOf("..."),n=(t?e.length>3?e.slice(3):"any":e).split("|").map((e=>p(e.trim())));let r=!1,i=t?"...":"";return{types:n.map((function(e){return r=e.isAny||r,i+=e.name+"|",{name:e.name,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:null,conversionIndex:-1}})),name:i.slice(0,-1),hasAny:r,hasConversion:!1,restParam:t}}function _(e){const t=P(e.types.map((e=>e.name)));let n=e.hasAny,r=e.name;const i=t.map((function(e){const t=p(e.from);return n=t.isAny||n,r+="|"+e.from,{name:e.from,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:e,conversionIndex:e.index}}));return{types:e.types.concat(i),name:r,hasAny:n,hasConversion:i.length>0,restParam:e.restParam}}function S(e){return e.typeSet||(e.typeSet=new Set,e.types.forEach((t=>e.typeSet.add(t.name)))),e.typeSet}function C(e){const t=[];if("string"!==typeof e)throw new TypeError("Signatures must be strings");const n=e.trim();if(""===n)return t;const r=n.split(",");for(let i=0;i<r.length;++i){const e=w(r[i].trim());if(e.restParam&&i!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+r[i]+'": only allowed for the last parameter');if(0===e.types.length)return null;t.push(e)}return t}function E(e){const t=J(e);return!!t&&t.restParam}function k(t){if(t&&0!==t.types.length){if(1===t.types.length)return p(t.types[0].name).test;if(2===t.types.length){const e=p(t.types[0].name).test,n=p(t.types[1].name).test;return function(t){return e(t)||n(t)}}{const e=t.types.map((function(e){return p(e.name).test}));return function(t){for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}}return e}function A(e){let t,n,r;if(E(e)){t=Z(e).map(k);const n=t.length,r=k(J(e)),i=function(e){for(let t=n;t<e.length;t++)if(!r(e[t]))return!1;return!0};return function(e){for(let n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return i(e)&&e.length>=n+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=k(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=k(e[0]),r=k(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(k),function(e){for(let n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}function N(e,t){return t<e.length?e[t]:E(e)?J(e):null}function M(e,t){const n=N(e,t);return n?S(n):new Set}function F(e){return null===e.conversion||void 0===e.conversion}function T(e,t){const n=new Set;return e.forEach((e=>{const r=M(e.params,t);let i;for(i of r)n.add(i)})),n.has("any")?["any"]:Array.from(n)}function B(e,t,n){let r,i;const a=e||"unnamed";let o,s=n;for(o=0;o<t.length;o++){const e=[];if(s.forEach((n=>{const r=k(N(n.params,o));(o<n.params.length||E(n.params))&&r(t[o])&&e.push(n)})),0===e.length){if(i=T(s,o),i.length>0){const e=g(t[o]);return r=new TypeError("Unexpected type of argument in function "+a+" (expected: "+i.join(" or ")+", actual: "+e.join(" | ")+", index: "+o+")"),r.data={category:"wrongType",fn:a,index:o,actual:e,expected:i},r}}else s=e}const l=s.map((function(e){return E(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,l))return i=T(s,o),r=new TypeError("Too few arguments in function "+a+" (expected: "+i.join(" or ")+", index: "+t.length+")"),r.data={category:"tooFewArgs",fn:a,index:t.length,expected:i},r;const u=Math.max.apply(null,l);if(t.length>u)return r=new TypeError("Too many arguments in function "+a+" (expected: "+u+", actual: "+t.length+")"),r.data={category:"tooManyArgs",fn:a,index:t.length,expectedLength:u},r;const c=[];for(let d=0;d<t.length;++d)c.push(g(t[d]).join("|"));return r=new TypeError('Arguments of type "'+c.join(", ")+'" do not match any of the defined signatures of function '+a+"."),r.data={category:"mismatch",actual:c},r}function L(e){let t=u.length+1;for(let n=0;n<e.types.length;n++)F(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function O(e){let t=c+1;for(let n=0;n<e.types.length;n++)F(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function z(e,t){if(e.hasAny){if(!t.hasAny)return 1}else if(t.hasAny)return-1;if(e.restParam){if(!t.restParam)return 1}else if(t.restParam)return-1;if(e.hasConversion){if(!t.hasConversion)return 1}else if(t.hasConversion)return-1;const n=L(e)-L(t);if(n<0)return-1;if(n>0)return 1;const r=O(e)-O(t);return r<0?-1:r>0?1:0}function I(e,t){const n=e.params,r=t.params,i=J(n),a=J(r),o=E(n),s=E(r);if(o&&i.hasAny){if(!s||!a.hasAny)return 1}else if(s&&a.hasAny)return-1;let l,u=0,c=0;for(l of n)l.hasAny&&++u,l.hasConversion&&++c;let d=0,p=0;for(l of r)l.hasAny&&++d,l.hasConversion&&++p;if(u!==d)return u-d;if(o&&i.hasConversion){if(!s||!a.hasConversion)return 1}else if(s&&a.hasConversion)return-1;if(c!==p)return c-p;if(o){if(!s)return 1}else if(s)return-1;const h=(n.length-r.length)*(o?-1:1);if(0!==h)return h;const f=[];let m,g=0;for(let v=0;v<n.length;++v){const e=z(n[v],r[v]);f.push(e),g+=e}if(0!==g)return g;for(m of f)if(0!==m)return m;return 0}function P(e){if(0===e.length)return[];const t=e.map(p);e.length>1&&t.sort(((e,t)=>e.index-t.index));let n=t[0].conversionsTo;if(1===e.length)return n;n=n.concat([]);const r=new Set(e);for(let i=1;i<t.length;++i){let e;for(e of t[i].conversionsTo)r.has(e.from)||(n.push(e),r.add(e.from))}return n}function q(e,t){let n=t;if(e.some((e=>e.hasConversion))){const r=E(e),i=e.map(R);n=function(){const e=[],n=r?arguments.length-1:arguments.length;for(let t=0;t<n;t++)e[t]=i[t](arguments[t]);return r&&(e[n]=arguments[n].map(i[n])),t.apply(this,e)}}let r=n;if(E(e)){const t=e.length-1;r=function(){return n.apply(this,X(arguments,0,t).concat([X(arguments,t)]))}}return r}function R(e){let t,n,r,i;const a=[],o=[];switch(e.types.forEach((function(e){e.conversion&&(a.push(p(e.conversion.from).test),o.push(e.conversion.convert))})),o.length){case 0:return function(e){return e};case 1:return t=a[0],r=o[0],function(e){return t(e)?r(e):e};case 2:return t=a[0],n=a[1],r=o[0],i=o[1],function(e){return t(e)?r(e):n(e)?i(e):e};default:return function(e){for(let t=0;t<o.length;t++)if(a[t](e))return o[t](e);return e}}}function j(e){function t(e,n,r){if(n<e.length){const i=e[n];let a=[];if(i.restParam){const e=i.types.filter(F);e.length<i.types.length&&a.push({types:e,name:"..."+e.map((e=>e.name)).join("|"),hasAny:e.some((e=>e.isAny)),hasConversion:!1,restParam:!0}),a.push(i)}else a=i.types.map((function(e){return{types:[e],name:e.name,hasAny:e.isAny,hasConversion:e.conversion,restParam:!1}}));return Q(a,(function(i){return t(e,n+1,r.concat([i]))}))}return[r]}return t(e,0,[])}function K(e,t){const n=Math.max(e.length,t.length);for(let s=0;s<n;s++){const n=M(e,s),r=M(t,s);let i,a=!1;for(i of r)if(n.has(i)){a=!0;break}if(!a)return!1}const r=e.length,i=t.length,a=E(e),o=E(t);return a?o?r===i:i>=r:o?r>=i:r===i}function V(e){return e.map((e=>ie(e)?ne(e.referToSelf.callback):re(e)?te(e.referTo.references,e.referTo.callback):e))}function U(e,t,n){const r=[];let i;for(i of e){let e=n[i];if("number"!==typeof e)throw new TypeError('No definition for referenced signature "'+i+'"');if(e=t[e],"function"!==typeof e)return!1;r.push(e)}return r}function $(e,t,n){const r=V(e),i=new Array(r.length).fill(!1);let a=!0;for(;a;){a=!1;let e=!0;for(let o=0;o<r.length;++o){if(i[o])continue;const s=r[o];if(ie(s))r[o]=s.referToSelf.callback(n),r[o].referToSelf=s.referToSelf,i[o]=!0,e=!1;else if(re(s)){const n=U(s.referTo.references,r,t);n?(r[o]=s.referTo.callback.apply(this,n),r[o].referTo=s.referTo,i[o]=!0,e=!1):a=!0}}if(e&&a)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return r}function H(e){const t=/\bthis(\(|\.signatures\b)/;Object.keys(e).forEach((n=>{const r=e[n];if(t.test(r.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")}))}function W(e,r){if(d.createCount++,0===Object.keys(r).length)throw new SyntaxError("No signatures provided");d.warnAgainstDeprecatedThis&&H(r);const i=[],a=[],o={},s=[];let l;for(l in r){if(!Object.prototype.hasOwnProperty.call(r,l))continue;const e=C(l);if(!e)continue;i.forEach((function(t){if(K(t,e))throw new TypeError('Conflicting signatures "'+D(t)+'" and "'+D(e)+'".')})),i.push(e);const t=a.length;a.push(r[l]);const n=e.map(_);let u;for(u of j(n)){const e=D(u);s.push({params:u,name:e,fn:t}),u.every((e=>!e.hasConversion))&&(o[e]=t)}}s.sort(I);const u=$(a,o,le);let c;for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&(o[c]=u[o[c]]);const p=[],h=new Map;for(c of s)h.has(c.name)||(c.fn=u[c.fn],p.push(c),h.set(c.name,c));const f=p[0]&&p[0].params.length<=2&&!E(p[0].params),m=p[1]&&p[1].params.length<=2&&!E(p[1].params),g=p[2]&&p[2].params.length<=2&&!E(p[2].params),v=p[3]&&p[3].params.length<=2&&!E(p[3].params),y=p[4]&&p[4].params.length<=2&&!E(p[4].params),b=p[5]&&p[5].params.length<=2&&!E(p[5].params),x=f&&m&&g&&v&&y&&b;for(let t=0;t<p.length;++t)p[t].test=A(p[t].params);const w=f?k(p[0].params[0]):t,S=m?k(p[1].params[0]):t,N=g?k(p[2].params[0]):t,M=v?k(p[3].params[0]):t,F=y?k(p[4].params[0]):t,T=b?k(p[5].params[0]):t,B=f?k(p[0].params[1]):t,L=m?k(p[1].params[1]):t,O=g?k(p[2].params[1]):t,z=v?k(p[3].params[1]):t,P=y?k(p[4].params[1]):t,R=b?k(p[5].params[1]):t;for(let t=0;t<p.length;++t)p[t].implementation=q(p[t].params,p[t].fn);const V=f?p[0].implementation:n,U=m?p[1].implementation:n,W=g?p[2].implementation:n,G=v?p[3].implementation:n,Z=y?p[4].implementation:n,J=b?p[5].implementation:n,X=f?p[0].params.length:-1,Y=m?p[1].params.length:-1,Q=g?p[2].params.length:-1,ee=v?p[3].params.length:-1,te=y?p[4].params.length:-1,ne=b?p[5].params.length:-1,re=x?6:0,ie=p.length,ae=p.map((e=>e.test)),oe=p.map((e=>e.implementation)),se=function(){for(let e=re;e<ie;e++)if(ae[e](arguments))return oe[e].apply(this,arguments);return d.onMismatch(e,arguments,p)};function le(e,t){return arguments.length===X&&w(e)&&B(t)?V.apply(this,arguments):arguments.length===Y&&S(e)&&L(t)?U.apply(this,arguments):arguments.length===Q&&N(e)&&O(t)?W.apply(this,arguments):arguments.length===ee&&M(e)&&z(t)?G.apply(this,arguments):arguments.length===te&&F(e)&&P(t)?Z.apply(this,arguments):arguments.length===ne&&T(e)&&R(t)?J.apply(this,arguments):se.apply(this,arguments)}try{Object.defineProperty(le,"name",{value:e})}catch(ue){}return le.signatures=o,le._typedFunctionData={signatures:p,signatureMap:h},le}function G(e,t,n){throw B(e,t,n)}function Z(e){return X(e,0,e.length-1)}function J(e){return e[e.length-1]}function X(e,t,n){return Array.prototype.slice.call(e,t,n)}function Y(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return e[n]}function Q(e,t){return Array.prototype.concat.apply([],e.map(t))}function ee(){const e=Z(arguments).map((e=>D(C(e)))),t=J(arguments);if("function"!==typeof t)throw new TypeError("Callback function expected as last argument");return te(e,t)}function te(e,t){return{referTo:{references:e,callback:t}}}function ne(e){if("function"!==typeof e)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:e}}}function re(e){return e&&"object"===typeof e.referTo&&Array.isArray(e.referTo.references)&&"function"===typeof e.referTo.callback}function ie(e){return e&&"object"===typeof e.referToSelf&&"function"===typeof e.referToSelf.callback}function ae(e,t){if(!e)return t;if(t&&t!==e){const n=new Error("Function names do not match (expected: "+e+", actual: "+t+")");throw n.data={actual:t,expected:e},n}return e}function oe(e){let t;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(v(e[n])||"string"===typeof e[n].signature)&&(t=ae(t,e[n].name));return t}function se(e,t){let n;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(n in e&&t[n]!==e[n]){const r=new Error('Signature "'+n+'" is defined twice');throw r.data={signature:n,sourceFunction:t[n],destFunction:e[n]},r}e[n]=t[n]}}f(),h(o);const le=d;function ue(e){if(!e||"string"!==typeof e.from||"string"!==typeof e.to||"function"!==typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(e.to===e.from)throw new SyntaxError('Illegal to define conversion from "'+e.from+'" to itself.')}return d=function(e){const t="string"===typeof e;let n=t?e:"";const r={};for(let i=t?1:0;i<arguments.length;++i){const e=arguments[i];let o,s={};if("function"===typeof e?(o=e.name,"string"===typeof e.signature?s[e.signature]=e:v(e)&&(s=e.signatures)):a(e)&&(s=e,t||(o=oe(e))),0===Object.keys(s).length){const t=new TypeError("Argument to 'typed' at index "+i+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw t.data={index:i,argument:e},t}t||(n=ae(n,o)),se(r,s)}return W(n||"",r)},d.create=i,d.createCount=le.createCount,d.onMismatch=G,d.throwMismatchError=G,d.createError=B,d.clear=f,d.clearConversions=m,d.addTypes=h,d._findType=p,d.referTo=ee,d.referToSelf=ne,d.convert=x,d.findSignature=y,d.find=b,d.isTypedFunction=v,d.warnAgainstDeprecatedThis=!0,d.addType=function(e,t){let n="any";!1!==t&&l.has("Object")&&(n="Object"),d.addTypes([e],n)},d.addConversion=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{override:!1};ue(e);const n=p(e.to),r=n.conversionsTo.find((t=>t.from===e.from));if(r){if(!t||!t.override)throw new Error('There is already a conversion from "'+e.from+'" to "'+n.name+'"');d.removeConversion({from:r.from,to:e.to,convert:r.convert})}n.conversionsTo.push({from:e.from,convert:e.convert,index:c++})},d.addConversions=function(e,t){e.forEach((e=>d.addConversion(e,t)))},d.removeConversion=function(e){ue(e);const t=p(e.to),n=Y(t.conversionsTo,(t=>t.from===e.from));if(!n)throw new Error("Attempt to remove nonexistent conversion from "+e.from+" to "+e.to);if(n.convert!==e.convert)throw new Error("Conversion to remove does not match existing conversion");const r=t.conversionsTo.indexOf(n);t.conversionsTo.splice(r,1)},d.resolve=function(e,t){if(!v(e))throw new TypeError(r);const n=e._typedFunctionData.signatures;for(let r=0;r<n.length;++r)if(n[r].test(t))return n[r];return null},d}return i()}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".a3ac2b94.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="graph-math-calc:";n.l=(r,i,a,o)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var p=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/graph-math-calc/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,a,o=r[0],s=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkgraph_math_calc=self.webpackChunkgraph_math_calc||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{createAbs:()=>Xf,createAccessorNode:()=>YD,createAcos:()=>fx,createAcosh:()=>Bx,createAcot:()=>Ox,createAcoth:()=>Ix,createAcsc:()=>qx,createAcsch:()=>jx,createAdd:()=>PD,createAddScalar:()=>nm,createAnd:()=>cb,createAndTransform:()=>Dk,createApply:()=>Qf,createApplyTransform:()=>HE,createArg:()=>Pg,createArrayNode:()=>ew,createAsec:()=>Vx,createAsech:()=>$x,createAsin:()=>Wx,createAsinh:()=>Gx,createAssignmentNode:()=>sw,createAtan:()=>Zx,createAtan2:()=>Xx,createAtanh:()=>Qx,createAtomicMass:()=>_E,createAvogadro:()=>SE,createBellNumbers:()=>JS,createBigNumberClass:()=>wp,createBignumber:()=>hf,createBin:()=>Dy,createBitAnd:()=>Mg,createBitAndTransform:()=>_k,createBitNot:()=>Tg,createBitOr:()=>Lg,createBitOrTransform:()=>Sk,createBitXor:()=>Ig,createBlockNode:()=>uw,createBohrMagneton:()=>rE,createBohrRadius:()=>uE,createBoltzmann:()=>CE,createBoolean:()=>pf,createCatalan:()=>YS,createCbrt:()=>om,createCeil:()=>hm,createChain:()=>E_,createChainClass:()=>b_,createClassicalElectronRadius:()=>cE,createClone:()=>kh,createColumn:()=>ev,createColumnTransform:()=>WE,createCombinations:()=>hS,createCombinationsWithRep:()=>gS,createCompare:()=>pb,createCompareNatural:()=>gb,createCompareText:()=>bb,createCompile:()=>Kw,createComplex:()=>ff,createComplexClass:()=>Fp,createComposition:()=>eC,createConcat:()=>Yg,createConcatTransform:()=>uk,createConditionalNode:()=>dw,createConductanceQuantum:()=>iE,createConj:()=>Rg,createConstantNode:()=>xw,createCorr:()=>uS,createCos:()=>tD,createCosh:()=>rD,createCot:()=>iD,createCoth:()=>oD,createCoulomb:()=>tE,createCount:()=>nv,createCreateUnit:()=>px,createCross:()=>iv,createCsc:()=>sD,createCsch:()=>uD,createCtranspose:()=>Yv,createCube:()=>mm,createCumSum:()=>J_,createCumSumTransform:()=>gk,createDeepEqual:()=>Pb,createDenseMatrixClass:()=>Ch,createDerivative:()=>gC,createDet:()=>k_,createDeuteronMass:()=>gE,createDiag:()=>ov,createDiff:()=>Sv,createDiffTransform:()=>dk,createDistance:()=>H_,createDivide:()=>U_,createDivideScalar:()=>By,createDot:()=>VD,createDotDivide:()=>Hy,createDotMultiply:()=>pg,createDotPow:()=>Uy,createE:()=>OC,createEfimovFactor:()=>wE,createEigs:()=>B_,createElectricConstant:()=>QC,createElectronMass:()=>dE,createElementaryCharge:()=>nE,createEqual:()=>Db,createEqualScalar:()=>of,createEqualText:()=>Sb,createErf:()=>oy,createEvaluate:()=>Uw,createExp:()=>gm,createExpm:()=>O_,createExpm1:()=>ym,createFactorial:()=>NS,createFalse:()=>NC,createFaraday:()=>EE,createFermiCoupling:()=>pE,createFft:()=>ty,createFibonacciHeapClass:()=>Xb,createFilter:()=>lv,createFilterTransform:()=>ZE,createFineStructure:()=>hE,createFirstRadiation:()=>kE,createFix:()=>wm,createFlatten:()=>dv,createFloor:()=>Em,createForEach:()=>hv,createForEachTransform:()=>XE,createFormat:()=>xy,createFraction:()=>mf,createFractionClass:()=>Bp,createFreqz:()=>wC,createFunctionAssignmentNode:()=>ww,createFunctionNode:()=>Pw,createGamma:()=>CS,createGasConstant:()=>NE,createGcd:()=>jm,createGetMatrixDataType:()=>gv,createGravitationConstant:()=>ZC,createGravity:()=>PE,createHartreeEnergy:()=>fE,createHasNumericValue:()=>Wh,createHelp:()=>S_,createHelpClass:()=>v_,createHex:()=>_y,createHypot:()=>RD,createI:()=>VC,createIdentity:()=>yv,createIfft:()=>ry,createIm:()=>jg,createImmutableDenseMatrixClass:()=>Gb,createIndex:()=>HD,createIndexClass:()=>Zb,createIndexNode:()=>Sw,createIndexTransform:()=>YE,createInfinity:()=>FC,createIntersect:()=>W_,createInv:()=>A_,createInverseConductanceQuantum:()=>aE,createInvmod:()=>ug,createIsInteger:()=>zh,createIsNaN:()=>Qh,createIsNegative:()=>Vh,createIsNumeric:()=>$h,createIsPositive:()=>Zh,createIsPrime:()=>My,createIsZero:()=>Xh,createKldivergence:()=>FS,createKlitzing:()=>lE,createKron:()=>xv,createLN10:()=>PC,createLN2:()=>IC,createLOG10E:()=>RC,createLOG2E:()=>qC,createLarger:()=>Tb,createLargerEq:()=>Ob,createLcm:()=>Vm,createLeafCount:()=>nC,createLeftShift:()=>ab,createLgamma:()=>kS,createLog:()=>Py,createLog10:()=>$m,createLog1p:()=>Ry,createLog2:()=>Wm,createLoschmidt:()=>AE,createLsolve:()=>Zy,createLsolveAll:()=>Qy,createLup:()=>Gw,createLusolve:()=>p_,createLyap:()=>V_,createMad:()=>tS,createMagneticConstant:()=>YC,createMagneticFluxQuantum:()=>oE,createMap:()=>Dv,createMapTransform:()=>QE,createMatrix:()=>vf,createMatrixClass:()=>Op,createMatrixFromColumns:()=>_f,createMatrixFromFunction:()=>bf,createMatrixFromRows:()=>Df,createMax:()=>Hb,createMaxTransform:()=>rk,createMean:()=>Y_,createMeanTransform:()=>ik,createMedian:()=>eS,createMin:()=>Wb,createMinTransform:()=>ak,createMod:()=>Bm,createMode:()=>my,createMolarMass:()=>zE,createMolarMassC12:()=>IE,createMolarPlanckConstant:()=>ME,createMolarVolume:()=>FE,createMultinomial:()=>BS,createMultiply:()=>Jm,createMultiplyScalar:()=>Gm,createNaN:()=>TC,createNeutronMass:()=>vE,createNode:()=>GD,createNorm:()=>KD,createNot:()=>Gg,createNthRoot:()=>Ym,createNthRoots:()=>Ky,createNuclearMagneton:()=>sE,createNull:()=>MC,createNumber:()=>lf,createNumeric:()=>Fy,createObjectNode:()=>Ew,createOct:()=>wy,createOnes:()=>Cv,createOperatorNode:()=>Nw,createOr:()=>Zg,createOrTransform:()=>wk,createParenthesisNode:()=>Fw,createParse:()=>Rw,createParser:()=>Ww,createParserClass:()=>$w,createPartitionSelect:()=>Vb,createPermutations:()=>OS,createPhi:()=>zC,createPi:()=>BC,createPickRandom:()=>jS,createPinv:()=>M_,createPlanckCharge:()=>KE,createPlanckConstant:()=>JC,createPlanckLength:()=>qE,createPlanckMass:()=>RE,createPlanckTemperature:()=>VE,createPlanckTime:()=>jE,createPolynomialRoot:()=>m_,createPow:()=>Ly,createPrint:()=>Ey,createPrintTransform:()=>xk,createProd:()=>yy,createProtonMass:()=>mE,createQr:()=>Zw,createQuantileSeq:()=>oS,createQuantileSeqTransform:()=>fk,createQuantumOfCirculation:()=>yE,createRandom:()=>US,createRandomInt:()=>HS,createRange:()=>Mv,createRangeClass:()=>Lp,createRangeNode:()=>Bw,createRangeTransform:()=>ok,createRationalize:()=>yC,createRe:()=>Kg,createReducedPlanckConstant:()=>XC,createRelationalNode:()=>Ow,createReplacer:()=>SC,createReshape:()=>Tv,createResize:()=>Bv,createResolve:()=>pC,createResultSet:()=>Rc,createReviver:()=>_C,createRightArithShift:()=>sb,createRightLogShift:()=>ub,createRotate:()=>Ov,createRotationMatrix:()=>Iv,createRound:()=>Iy,createRow:()=>Pv,createRowTransform:()=>sk,createRydberg:()=>bE,createSQRT1_2:()=>jC,createSQRT2:()=>KC,createSackurTetrode:()=>TE,createSchur:()=>j_,createSec:()=>cD,createSech:()=>pD,createSecondRadiation:()=>BE,createSetCartesian:()=>bD,createSetDifference:()=>DD,createSetDistinct:()=>_D,createSetIntersect:()=>CD,createSetIsSubset:()=>kD,createSetMultiplicity:()=>ND,createSetPowerset:()=>FD,createSetSize:()=>BD,createSetSymDifference:()=>OD,createSetUnion:()=>ID,createSign:()=>eg,createSimplify:()=>lC,createSimplifyConstant:()=>uC,createSimplifyCore:()=>dC,createSin:()=>hD,createSinh:()=>mD,createSize:()=>Rv,createSlu:()=>l_,createSmaller:()=>Eb,createSmallerEq:()=>Nb,createSolveODE:()=>ay,createSort:()=>$b,createSpaClass:()=>Yb,createSparse:()=>cx,createSparseMatrixClass:()=>sf,createSpeedOfLight:()=>GC,createSplitUnit:()=>Cf,createSqrt:()=>tg,createSqrtm:()=>I_,createSquare:()=>rg,createSqueeze:()=>Kv,createStd:()=>sS,createStdTransform:()=>pk,createStefanBoltzmann:()=>LE,createStirlingS2:()=>GS,createString:()=>cf,createSubset:()=>Uv,createSubsetTransform:()=>lk,createSubtract:()=>ag,createSubtractScalar:()=>im,createSum:()=>G_,createSumTransform:()=>hk,createSylvester:()=>q_,createSymbolNode:()=>zw,createSymbolicEqual:()=>fC,createTan:()=>gD,createTanh:()=>vD,createTau:()=>LC,createThomsonCrossSection:()=>xE,createTo:()=>Ay,createTrace:()=>UD,createTranspose:()=>Jv,createTrue:()=>AC,createTypeOf:()=>tf,createTyped:()=>Lc,createUnaryMinus:()=>Gf,createUnaryPlus:()=>Jf,createUnequal:()=>Rb,createUnitClass:()=>ox,createUnitFunction:()=>lx,createUppercaseE:()=>$C,createUppercasePi:()=>UC,createUsolve:()=>Xy,createUsolveAll:()=>tb,createVacuumImpedance:()=>eE,createVariance:()=>iS,createVarianceTransform:()=>yk,createVersion:()=>HC,createWeakMixingAngle:()=>DE,createWienDisplacement:()=>OE,createXgcd:()=>sg,createXor:()=>Jg,createZeros:()=>ey,createZeta:()=>hy,createZpk2tf:()=>xC});var t=n(43),r=n(391);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object.create,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,m=(e,t,n)=>(n=null!=e?u(h(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of p(t))!f.call(e,i)&&i!==n&&c(e,i,{get:()=>t[i],enumerable:!(r=d(t,i))||r.enumerable});return e})(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)),g=((e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports))(((e,t)=>{!function(n){var r=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:.5*(Math.exp(e)+Math.exp(-e))},i=Math.sinh||function(e){return Math.abs(e)<1e-9?e:.5*(Math.exp(e)-Math.exp(-e))},a=function(){throw SyntaxError("Invalid Param")};function o(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):(e/=2,t/=2,.5*Math.log(e*e+t*t)+Math.LN2)}function s(e,t){if(!(this instanceof s))return new s(e,t);var n=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return s.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return s.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):a();break;case"string":n.im=n.re=0;var r=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,o=0;null===r&&a();for(var l=0;l<r.length;l++){var u=r[l];" "===u||"\t"===u||"\n"===u||("+"===u?i++:"-"===u?o++:"i"===u||"I"===u?(i+o===0&&a()," "===r[l+1]||isNaN(r[l+1])?n.im+=parseFloat((o%2?"-":"")+"1"):(n.im+=parseFloat((o%2?"-":"")+r[l+1]),l++),i=o=0):((i+o===0||isNaN(u))&&a(),"i"===r[l+1]||"I"===r[l+1]?(n.im+=parseFloat((o%2?"-":"")+u),l++):n.re+=parseFloat((o%2?"-":"")+u),i=o=0))}i+o>0&&a();break;case"number":n.im=0,n.re=e;break;default:a()}return isNaN(n.re)||isNaN(n.im),n}(e,t);this.re=n.re,this.im=n.im}s.prototype={re:0,im:0,sign:function(){var e=this.abs();return new s(this.re/e,this.im/e)},add:function(e,t){var n=new s(e,t);return this.isInfinite()&&n.isInfinite()?s.NAN:this.isInfinite()||n.isInfinite()?s.INFINITY:new s(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new s(e,t);return this.isInfinite()&&n.isInfinite()?s.NAN:this.isInfinite()||n.isInfinite()?s.INFINITY:new s(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new s(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?s.NAN:this.isInfinite()||n.isInfinite()?s.INFINITY:0===n.im&&0===this.im?new s(this.re*n.re,0):new s(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new s(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return s.NAN;if(this.isInfinite()||n.isZero())return s.INFINITY;if(this.isZero()||n.isInfinite())return s.ZERO;e=this.re,t=this.im;var r,i,a=n.re,o=n.im;return 0===o?new s(e/a,t/a):Math.abs(a)<Math.abs(o)?new s((e*(i=a/o)+t)/(r=a*i+o),(t*i-e)/r):new s((e+t*(i=o/a))/(r=o*i+a),(t-e*i)/r)},pow:function(e,t){var n=new s(e,t);if(e=this.re,t=this.im,n.isZero())return s.ONE;if(0===n.im){if(0===t&&e>0)return new s(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new s(Math.pow(t,n.re),0);case 1:return new s(0,Math.pow(t,n.re));case 2:return new s(-Math.pow(t,n.re),0);case 3:return new s(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return s.ZERO;var r=Math.atan2(t,e),i=o(e,t);return e=Math.exp(n.re*i-n.im*r),t=n.im*i+n.re*r,new s(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new s(Math.sqrt(n),0);e=.5*Math.sqrt(2*(i+n))}else e=Math.abs(r)/Math.sqrt(2*(i-n));return t=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new s(e,r<0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new s(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new s(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new s(o(e,t),Math.atan2(t,e))},abs:function(){return function(e,t){var n=Math.abs(e),r=Math.abs(t);return n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=e/t):r=t/e,n*Math.sqrt(1+r*r))}(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new s(Math.sin(e)*r(t),Math.cos(e)*i(t))},cos:function(){var e=this.re,t=this.im;return new s(Math.cos(e)*r(t),-Math.sin(e)*i(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+r(t);return new s(Math.sin(e)/n,i(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-r(t);return new s(-Math.sin(e)/n,i(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*r(2*t)+.5*Math.cos(2*e);return new s(Math.cos(e)*r(t)/n,Math.sin(e)*i(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*r(2*t)-.5*Math.cos(2*e);return new s(Math.sin(e)*r(t)/n,-Math.cos(e)*i(t)/n)},asin:function(){var e=this.re,t=this.im,n=new s(t*t-e*e+1,-2*e*t).sqrt(),r=new s(n.re-t,n.im+e).log();return new s(r.im,-r.re)},acos:function(){var e=this.re,t=this.im,n=new s(t*t-e*e+1,-2*e*t).sqrt(),r=new s(n.re-t,n.im+e).log();return new s(Math.PI/2-r.im,r.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new s(0,1/0);if(-1===t)return new s(0,-1/0)}var n=e*e+(1-t)*(1-t),r=new s((1-t*t-e*e)/n,-2*e/n).log();return new s(-.5*r.im,.5*r.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new s(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).atan():new s(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(0,1/0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).acos():new s(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).asin():new s(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new s(i(e)*Math.cos(t),r(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new s(r(e)*Math.cos(t),i(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=r(e)+Math.cos(t);return new s(i(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=r(e)-Math.cos(t);return new s(i(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-r(2*e);return new s(-2*i(e)*Math.cos(t)/n,2*r(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+r(2*e);return new s(2*r(e)*Math.cos(t)/n,-2*i(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else{t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,i=1+e,a=r*r+t*t,l=0!==a?new s((i*r-t*t)/a,(t*r+i*t)/a):new s(-1!==e?e/0:0,0!==t?t/0:0),u=l.re;return l.re=o(l.re,l.im)/2,l.im=Math.atan2(l.im,u)/2,n&&(l.im=-l.im),l},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).atanh():new s(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new s(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).asinh():new s(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return s.INFINITY;var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).acosh():new s(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return s.INFINITY;if(this.isInfinite())return s.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new s(e/n,-t/n)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new s(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new s(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new s(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new s(e,t);return Math.abs(n.re-this.re)<=s.EPSILON&&Math.abs(n.im-this.im)<=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<s.EPSILON&&(e=0),Math.abs(t)<s.EPSILON&&(t=0),0===t?n+e:(0!==e?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),1!==t&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.INFINITY=new s(1/0,1/0),s.NAN=new s(NaN,NaN),s.EPSILON=1e-15,"function"==typeof define&&define.amd?define([],(function(){return s})):"object"==typeof e?(Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Complex=s,t.exports=s):n.Complex=s}(e)})),v=245,y=260,b=270,x=275,D=390,w=600;function _(e){return"kind"in e&&"matchfix"===e.kind}function S(e){return"kind"in e&&"infix"===e.kind}function C(e){return"kind"in e&&"prefix"===e.kind}function E(e){return"kind"in e&&"postfix"===e.kind}var k,A,N=m(g(),1),M=9e15,F=1e9,T="0123456789abcdef",B="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",L="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",O={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-M,maxE:M,crypto:!1},z=!0,I="[DecimalError] ",P=I+"Invalid argument: ",q=I+"Precision limit exceeded",R=I+"crypto unavailable",j="[object Decimal]",K=Math.floor,V=Math.pow,U=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,$=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,H=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,W=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,G=1e7,Z=B.length-1,J=L.length-1,X={toStringTag:j};function Y(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=ue(n)),a+=r;(n=7-(r=(o=e[t])+"").length)&&(a+=ue(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return a+o}function Q(e,t,n){if(e!==~~e||e<t||e>n)throw Error(P+e)}function ee(e,t,n,r){var i,a,o,s;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),a=V(10,7-t),s=e[i]%a|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),o=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):o=(n<4&&s+1==a||n>3&&s+1==a/2)&&(e[i+1]/a/100|0)==V(10,t-2)-1||(s==a/2||0==s)&&0==(e[i+1]/a/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),o=(r||n<4)&&9999==s||!r&&n>3&&4999==s):o=((r||n<4)&&s+1==a||!r&&n>3&&s+1==a/2)&&(e[i+1]/a/1e3|0)==V(10,t-3)-1,o}function te(e,t,n){for(var r,i,a=[0],o=0,s=e.length;o<s;){for(i=a.length;i--;)a[i]*=t;for(a[0]+=T.indexOf(e.charAt(o++)),r=0;r<a.length;r++)a[r]>n-1&&(void 0===a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}X.absoluteValue=X.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),re(e)},X.ceil=function(){return re(new this.constructor(this),this.e+1,2)},X.clampedTo=X.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(P+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},X.comparedTo=X.cmp=function(e){var t,n,r,i,a=this,o=a.d,s=(e=new a.constructor(e)).d,l=a.s,u=e.s;if(!o||!s)return l&&u?l!==u?l:o===s?0:!o^l<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?l:s[0]?-u:0;if(l!==u)return l;if(a.e!==e.e)return a.e>e.e^l<0?1:-1;for(t=0,n=(r=o.length)<(i=s.length)?r:i;t<n;++t)if(o[t]!==s[t])return o[t]>s[t]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},X.cosine=X.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/ye(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=ve(e,1,t.times(i),new e(1));for(var a=n;a--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,be(r,n)),r.precision=e,r.rounding=t,re(2==A||3==A?n.neg():n,e,t,!0)):new r(1):new r(NaN)},X.cubeRoot=X.cbrt=function(){var e,t,n,r,i,a,o,s,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(z=!1,(a=c.s*V(c.s*c,1/3))&&Math.abs(a)!=1/0?r=new d(a.toString()):(n=Y(c.d),(a=((e=c.e)-n.length+1)%3)&&(n+=1==a||-2==a?"0":"00"),a=V(n,1/3),e=K((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?n="5e"+e:n=(n=a.toExponential()).slice(0,n.indexOf("e")+1)+e,(r=new d(n)).s=c.s),o=(e=d.precision)+3;;)if(u=(l=(s=r).times(s).times(s)).plus(c),r=ne(u.plus(c).times(s),u.plus(l),o+2,1),Y(s.d).slice(0,o)===(n=Y(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(i||"4999"!=n)){(!+n||!+n.slice(1)&&"5"==n.charAt(0))&&(re(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!i&&(re(s,e+1,0),s.times(s).times(s).eq(c))){r=s;break}o+=4,i=1}return z=!0,re(r,e,d.rounding,t)},X.decimalPlaces=X.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-K(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},X.dividedBy=X.div=function(e){return ne(this,new this.constructor(e))},X.dividedToIntegerBy=X.divToInt=function(e){var t=this.constructor;return re(ne(this,new t(e),0,1,1),t.precision,t.rounding)},X.equals=X.eq=function(e){return 0===this.cmp(e)},X.floor=function(){return re(new this.constructor(this),this.e+1,3)},X.greaterThan=X.gt=function(e){return this.cmp(e)>0},X.greaterThanOrEqualTo=X.gte=function(e){var t=this.cmp(e);return 1==t||0===t},X.hyperbolicCosine=X.cosh=function(){var e,t,n,r,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,(i=a.d.length)<32?t=(1/ye(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=ve(o,1,a.times(t),new o(1),!0);for(var l,u=e,c=new o(8);u--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return re(a,o.precision=n,o.rounding=r,!0)},X.hyperbolicSine=X.sinh=function(){var e,t,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,n=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,(r=i.d.length)<3)i=ve(a,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=ve(a,2,i=i.times(1/ye(5,e)),i,!0);for(var o,s=new a(5),l=new a(16),u=new a(20);e--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(u))))}return a.precision=t,a.rounding=n,re(i,t,n,!0)},X.hyperbolicTangent=X.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,ne(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},X.inverseCosine=X.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,a=n.rounding;return-1!==r?0===r?t.isNeg()?se(n,i,a):new n(0):new n(NaN):t.isZero()?se(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=se(n,i+4,a).times(.5),n.precision=i,n.rounding=a,e.minus(t))},X.inverseHyperbolicCosine=X.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,z=!1,n=n.times(n).minus(1).sqrt().plus(n),z=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},X.inverseHyperbolicSine=X.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,z=!1,n=n.times(n).plus(1).sqrt().plus(n),z=!0,r.precision=e,r.rounding=t,n.ln())},X.inverseHyperbolicTangent=X.atanh=function(){var e,t,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?re(new a(i),e,t,!0):(a.precision=n=r-i.e,i=ne(i.plus(1),new a(1).minus(i),n+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)},X.inverseSine=X.asin=function(){var e,t,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),n=a.precision,r=a.rounding,-1!==t?0===t?((e=se(a,n+4,r).times(.5)).s=i.s,e):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))},X.inverseTangent=X.atan=function(){var e,t,n,r,i,a,o,s,l,u=this,c=u.constructor,d=c.precision,p=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=J)return(o=se(c,d+4,p).times(.25)).s=u.s,o}else{if(!u.s)return new c(NaN);if(d+4<=J)return(o=se(c,d+4,p).times(.5)).s=u.s,o}for(c.precision=s=d+10,c.rounding=1,e=n=Math.min(28,s/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(z=!1,t=Math.ceil(s/7),r=1,l=u.times(u),o=new c(u),i=u;-1!==e;)if(i=i.times(l),a=o.minus(i.div(r+=2)),i=i.times(l),void 0!==(o=a.plus(i.div(r+=2))).d[t])for(e=t;o.d[e]===a.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),z=!0,re(o,c.precision=d,c.rounding=p,!0)},X.isFinite=function(){return!!this.d},X.isInteger=X.isInt=function(){return!!this.d&&K(this.e/7)>this.d.length-2},X.isNaN=function(){return!this.s},X.isNegative=X.isNeg=function(){return this.s<0},X.isPositive=X.isPos=function(){return this.s>0},X.isZero=function(){return!!this.d&&0===this.d[0]},X.lessThan=X.lt=function(e){return this.cmp(e)<0},X.lessThanOrEqualTo=X.lte=function(e){return this.cmp(e)<1},X.logarithm=X.log=function(e){var t,n,r,i,a,o,s,l,u=this,c=u.constructor,d=c.precision,p=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(t)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=1!==i}if(z=!1,o=fe(u,s=d+5),r=t?oe(c,s+10):fe(e,s),ee((l=ne(o,r,s,1)).d,i=d,p))do{if(o=fe(u,s+=10),r=t?oe(c,s+10):fe(e,s),l=ne(o,r,s,1),!a){+Y(l.d).slice(i+1,i+15)+1==1e14&&(l=re(l,d+1,0));break}}while(ee(l.d,i+=10,p));return z=!0,re(l,d,p)},X.minus=X.sub=function(e){var t,n,r,i,a,o,s,l,u,c,d,p,h=this,f=h.constructor;if(e=new f(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new f(e.d||h.s!==e.s?h:NaN):e=new f(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(u=h.d,p=e.d,s=f.precision,l=f.rounding,!u[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!u[0])return new f(3===l?-0:0);e=new f(h)}return z?re(e,s,l):e}if(n=K(e.e/7),c=K(h.e/7),u=u.slice(),a=c-n){for((d=a<0)?(t=u,a=-a,o=p.length):(t=p,n=c,o=u.length),a>(r=Math.max(Math.ceil(s/7),o)+2)&&(a=r,t.length=1),t.reverse(),r=a;r--;)t.push(0);t.reverse()}else{for((d=(r=u.length)<(o=p.length))&&(o=r),r=0;r<o;r++)if(u[r]!=p[r]){d=u[r]<p[r];break}a=0}for(d&&(t=u,u=p,p=t,e.s=-e.s),o=u.length,r=p.length-o;r>0;--r)u[o++]=0;for(r=p.length;r>a;){if(u[--r]<p[r]){for(i=r;i&&0===u[--i];)u[i]=G-1;--u[i],u[r]+=G}u[r]-=p[r]}for(;0===u[--o];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=ae(u,n),z?re(e,s,l):e):new f(3===l?-0:0)},X.modulo=X.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?re(new r(n),r.precision,r.rounding):(z=!1,9==r.modulo?(t=ne(n,e.abs(),0,3,1)).s*=e.s:t=ne(n,e,0,r.modulo,1),t=t.times(e),z=!0,n.minus(t))},X.naturalExponential=X.exp=function(){return he(this)},X.naturalLogarithm=X.ln=function(){return fe(this)},X.negated=X.neg=function(){var e=new this.constructor(this);return e.s=-e.s,re(e)},X.plus=X.add=function(e){var t,n,r,i,a,o,s,l,u,c,d=this,p=d.constructor;if(e=new p(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new p(e.d||d.s===e.s?d:NaN)):e=new p(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(u=d.d,c=e.d,s=p.precision,l=p.rounding,!u[0]||!c[0])return c[0]||(e=new p(d)),z?re(e,s,l):e;if(a=K(d.e/7),r=K(e.e/7),u=u.slice(),i=a-r){for(i<0?(n=u,i=-i,o=c.length):(n=c,r=a,o=u.length),i>(o=(a=Math.ceil(s/7))>o?a+1:o+1)&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((o=u.length)-(i=c.length)<0&&(i=o,n=c,c=u,u=n),t=0;i;)t=(u[--i]=u[i]+c[i]+t)/G|0,u[i]%=G;for(t&&(u.unshift(t),++r),o=u.length;0==u[--o];)u.pop();return e.d=u,e.e=ae(u,r),z?re(e,s,l):e},X.precision=X.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(P+e);return n.d?(t=le(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},X.round=function(){var e=this,t=e.constructor;return re(new t(e),e.e+1,t.rounding)},X.sine=X.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:ve(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:0|n,t=t.times(1/ye(5,n)),t=ve(e,2,t,t);for(var i,a=new e(5),o=new e(16),s=new e(20);n--;)i=t.times(t),t=t.times(a.plus(i.times(o.times(i).minus(s))));return t}(r,be(r,n)),r.precision=e,r.rounding=t,re(A>2?n.neg():n,e,t,!0)):new r(NaN)},X.squareRoot=X.sqrt=function(){var e,t,n,r,i,a,o=this,s=o.d,l=o.e,u=o.s,c=o.constructor;if(1!==u||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?o:1/0);for(z=!1,0==(u=Math.sqrt(+o))||u==1/0?(((t=Y(s)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=K((l+1)/2)-(l<0||l%2),u==1/0?t="5e"+l:t=(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l,r=new c(t)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(r=(a=r).plus(ne(o,a,n+2,1)).times(.5),Y(a.d).slice(0,n)===(t=Y(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){(!+t||!+t.slice(1)&&"5"==t.charAt(0))&&(re(r,l+1,1),e=!r.times(r).eq(o));break}if(!i&&(re(a,l+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}return z=!0,re(r,l,c.rounding,e)},X.tangent=X.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=ne(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,re(2==A||4==A?n.neg():n,e,t,!0)):new r(NaN)},X.times=X.mul=function(e){var t,n,r,i,a,o,s,l,u,c=this,d=c.constructor,p=c.d,h=(e=new d(e)).d;if(e.s*=c.s,!p||!p[0]||!h||!h[0])return new d(!e.s||p&&!p[0]&&!h||h&&!h[0]&&!p?NaN:p&&h?0*e.s:e.s/0);for(n=K(c.e/7)+K(e.e/7),(l=p.length)<(u=h.length)&&(a=p,p=h,h=a,o=l,l=u,u=o),a=[],r=o=l+u;r--;)a.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)s=a[i]+h[r]*p[i-r-1]+t,a[i--]=s%G|0,t=s/G|0;a[i]=(a[i]+t)%G|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=ae(a,n),z?re(e,d.precision,d.rounding):e},X.toBinary=function(e,t){return xe(this,2,e,t)},X.toDecimalPlaces=X.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(Q(e,0,F),void 0===t?t=r.rounding:Q(t,0,8),re(n,e+n.e+1,t))},X.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=ie(r,!0):(Q(e,0,F),void 0===t?t=i.rounding:Q(t,0,8),n=ie(r=re(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},X.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?n=ie(i):(Q(e,0,F),void 0===t?t=a.rounding:Q(t,0,8),n=ie(r=re(new a(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},X.toFraction=function(e){var t,n,r,i,a,o,s,l,u,c,d,p,h=this,f=h.d,m=h.constructor;if(!f)return new m(h);if(u=n=new m(1),r=l=new m(0),o=(a=(t=new m(r)).e=le(f)-h.e-1)%7,t.d[0]=V(10,o<0?7+o:o),null==e)e=a>0?t:u;else{if(!(s=new m(e)).isInt()||s.lt(u))throw Error(P+s);e=s.gt(t)?a>0?t:u:s}for(z=!1,s=new m(Y(f)),c=m.precision,m.precision=a=7*f.length*2;d=ne(s,t,0,1,1),1!=(i=n.plus(d.times(r))).cmp(e);)n=r,r=i,i=u,u=l.plus(d.times(i)),l=i,i=t,t=s.minus(d.times(i)),s=i;return i=ne(e.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=h.s,p=ne(u,r,a,1).minus(h).abs().cmp(ne(l,n,a,1).minus(h).abs())<1?[u,r]:[l,n],m.precision=c,z=!0,p},X.toHexadecimal=X.toHex=function(e,t){return xe(this,16,e,t)},X.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:Q(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(z=!1,n=ne(n,e,0,t,1).times(e),z=!0,re(n)):(e.s=n.s,n=e),n},X.toNumber=function(){return+this},X.toOctal=function(e,t){return xe(this,8,e,t)},X.toPower=X.pow=function(e){var t,n,r,i,a,o,s=this,l=s.constructor,u=+(e=new l(e));if(!s.d||!e.d||!s.d[0]||!e.d[0])return new l(V(+s,u));if((s=new l(s)).eq(1))return s;if(r=l.precision,a=l.rounding,e.eq(1))return re(s,r,a);if((t=K(e.e/7))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=ce(l,s,n,r),e.s<0?new l(1).div(i):re(i,r,a);if((o=s.s)<0){if(t<e.d.length-1)return new l(NaN);if(1&e.d[t]||(o=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=o,s}return(t=0!=(n=V(+s,u))&&isFinite(n)?new l(n+"").e:K(u*(Math.log("0."+Y(s.d))/Math.LN10+s.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(z=!1,l.rounding=s.s=1,n=Math.min(12,(t+"").length),(i=he(e.times(fe(s,r+n)),r)).d&&(ee((i=re(i,r+5,1)).d,r,a)&&(t=r+10,+Y((i=re(he(e.times(fe(s,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=re(i,r+1,0)))),i.s=o,z=!0,l.rounding=a,re(i,r,a))},X.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=ie(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Q(e,1,F),void 0===t?t=i.rounding:Q(t,0,8),n=ie(r=re(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},X.toSignificantDigits=X.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(Q(e,1,F),void 0===t?t=n.rounding:Q(t,0,8)),re(new n(this),e,t)},X.toString=function(){var e=this,t=e.constructor,n=ie(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},X.truncated=X.trunc=function(){return re(new this.constructor(this),this.e+1,1)},X.valueOf=X.toJSON=function(){var e=this,t=e.constructor,n=ie(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var ne=function(){function e(e,t,n){var r,i=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+i,e[a]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,o,s,l){var u,c,d,p,h,f,m,g,v,y,b,x,D,w,_,S,C,E,A,N,M=r.constructor,F=r.s==i.s?1:-1,T=r.d,B=i.d;if(!T||!T[0]||!B||!B[0])return new M(r.s&&i.s&&(T?!B||T[0]!=B[0]:B)?T&&0==T[0]||!B?0*F:F/0:NaN);for(l?(h=1,c=r.e-i.e):(l=G,h=7,c=K(r.e/h)-K(i.e/h)),A=B.length,C=T.length,y=(v=new M(F)).d=[],d=0;B[d]==(T[d]||0);d++);if(B[d]>(T[d]||0)&&c--,null==a?(w=a=M.precision,o=M.rounding):w=s?a+(r.e-i.e)+1:a,w<0)y.push(1),f=!0;else{if(w=w/h+2|0,d=0,1==A){for(p=0,B=B[0],w++;(d<C||p)&&w--;d++)_=p*l+(T[d]||0),y[d]=_/B|0,p=_%B|0;f=p||d<C}else{for((p=l/(B[0]+1)|0)>1&&(B=e(B,p,l),T=e(T,p,l),A=B.length,C=T.length),S=A,x=(b=T.slice(0,A)).length;x<A;)b[x++]=0;(N=B.slice()).unshift(0),E=B[0],B[1]>=l/2&&++E;do{p=0,(u=t(B,b,A,x))<0?(D=b[0],A!=x&&(D=D*l+(b[1]||0)),(p=D/E|0)>1?(p>=l&&(p=l-1),1==(u=t(m=e(B,p,l),b,g=m.length,x=b.length))&&(p--,n(m,A<g?N:B,g,l))):(0==p&&(u=p=1),m=B.slice()),(g=m.length)<x&&m.unshift(0),n(b,m,x,l),-1==u&&((u=t(B,b,A,x=b.length))<1&&(p++,n(b,A<x?N:B,x,l))),x=b.length):0===u&&(p++,b=[0]),y[d++]=p,u&&b[0]?b[x++]=T[S]||0:(b=[T[S]],x=1)}while((S++<C||void 0!==b[0])&&w--);f=void 0!==b[0]}y[0]||y.shift()}if(1==h)v.e=c,k=f;else{for(d=1,p=y[0];p>=10;p/=10)d++;v.e=d+c*h-1,re(v,s?a+v.e+1:a,o,f)}return v}}();function re(e,t,n,r){var i,a,o,s,l,u,c,d,p,h=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(i=1,s=d[0];s>=10;s/=10)i++;if((a=t-i)<0)a+=7,o=t,l=(c=d[p=0])/V(10,i-o-1)%10|0;else if((p=Math.ceil((a+1)/7))>=(s=d.length)){if(!r)break e;for(;s++<=p;)d.push(0);c=l=0,i=1,o=(a%=7)-7+1}else{for(c=s=d[p],i=1;s>=10;s/=10)i++;l=(o=(a%=7)-7+i)<0?0:c/V(10,i-o-1)%10|0}if(r=r||t<0||void 0!==d[p+1]||(o<0?c:c%V(10,i-o-1)),u=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(a>0?o>0?c/V(10,i-o):0:d[p-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=V(10,(7-t%7)%7),e.e=-t||0):d[0]=e.e=0,e;if(0==a?(d.length=p,s=1,p--):(d.length=p+1,s=V(10,7-a),d[p]=o>0?(c/V(10,i-o)%V(10,o)|0)*s:0),u)for(;;){if(0==p){for(a=1,o=d[0];o>=10;o/=10)a++;for(o=d[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(e.e++,d[0]==G&&(d[0]=1));break}if(d[p]+=s,d[p]!=G)break;d[p--]=0,s=1}for(a=d.length;0===d[--a];)d.pop()}return z&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function ie(e,t,n){if(!e.isFinite())return me(e);var r,i=e.e,a=Y(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+ue(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+ue(-i-1)+a,n&&(r=n-o)>0&&(a+=ue(r))):i>=o?(a+=ue(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+ue(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=ue(r))),a}function ae(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function oe(e,t,n){if(t>Z)throw z=!0,n&&(e.precision=n),Error(q);return re(new e(B),t,1,!0)}function se(e,t,n){if(t>J)throw Error(q);return re(new e(L),t,n,!0)}function le(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function ue(e){for(var t="";e--;)t+="0";return t}function ce(e,t,n,r){var i,a=new e(1),o=Math.ceil(r/7+4);for(z=!1;;){if(n%2&&(De((a=a.times(t)).d,o)&&(i=!0)),0===(n=K(n/2))){n=a.d.length-1,i&&0===a.d[n]&&++a.d[n];break}De((t=t.times(t)).d,o)}return z=!0,a}function de(e){return 1&e.d[e.d.length-1]}function pe(e,t,n){for(var r,i=new e(t[0]),a=0;++a<t.length;){if(!(r=new e(t[a])).s){i=r;break}i[n](r)&&(i=r)}return i}function he(e,t){var n,r,i,a,o,s,l,u=0,c=0,d=0,p=e.constructor,h=p.rounding,f=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(z=!1,l=f):l=t,s=new p(.03125);e.e>-2;)e=e.times(s),d+=5;for(l+=r=Math.log(V(2,d))/Math.LN10*2+5|0,n=a=o=new p(1),p.precision=l;;){if(a=re(a.times(e),l,1),n=n.times(++c),Y((s=o.plus(ne(a,n,l,1))).d).slice(0,l)===Y(o.d).slice(0,l)){for(i=d;i--;)o=re(o.times(o),l,1);if(null!=t)return p.precision=f,o;if(!(u<3&&ee(o.d,l-r,h,u)))return re(o,p.precision=f,h,z=!0);p.precision=l+=10,n=a=s=new p(1),c=0,u++}o=s}}function fe(e,t){var n,r,i,a,o,s,l,u,c,d,p,h=1,f=e,m=f.d,g=f.constructor,v=g.rounding,y=g.precision;if(f.s<0||!m||!m[0]||!f.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=f.s?NaN:m?0:f);if(null==t?(z=!1,c=y):c=t,g.precision=c+=10,r=(n=Y(m)).charAt(0),!(Math.abs(a=f.e)<15e14))return u=oe(g,c+2,y).times(a+""),f=fe(new g(r+"."+n.slice(1)),c-10).plus(u),g.precision=y,null==t?re(f,y,v,z=!0):f;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=Y((f=f.times(e)).d)).charAt(0),h++;for(a=f.e,r>1?(f=new g("0."+n),a++):f=new g(r+"."+n.slice(1)),d=f,l=o=f=ne(f.minus(1),f.plus(1),c,1),p=re(f.times(f),c,1),i=3;;){if(o=re(o.times(p),c,1),Y((u=l.plus(ne(o,new g(i),c,1))).d).slice(0,c)===Y(l.d).slice(0,c)){if(l=l.times(2),0!==a&&(l=l.plus(oe(g,c+2,y).times(a+""))),l=ne(l,new g(h),c,1),null!=t)return g.precision=y,l;if(!ee(l.d,c-10,v,s))return re(l,g.precision=y,v,z=!0);g.precision=c+=10,u=o=f=ne(d.minus(1),d.plus(1),c,1),p=re(f.times(f),c,1),i=s=1}l=u,i+=2}}function me(e){return String(e.s*e.s/0)}function ge(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),z&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function ve(e,t,n,r,i){var a,o,s,l,u=e.precision,c=Math.ceil(u/7);for(z=!1,l=n.times(n),s=new e(r);;){if(o=ne(s.times(l),new e(t++*t++),u,1),s=i?r.plus(o):r.minus(o),r=ne(o.times(l),new e(t++*t++),u,1),void 0!==(o=s.plus(r)).d[c]){for(a=c;o.d[a]===s.d[a]&&a--;);if(-1==a)break}a=s,s=r,r=o,o=a}return z=!0,o.d.length=c+1,o}function ye(e,t){for(var n=e;--t;)n*=e;return n}function be(e,t){var n,r=t.s<0,i=se(e,e.precision,1),a=i.times(.5);if((t=t.abs()).lte(a))return A=r?4:1,t;if((n=t.divToInt(i)).isZero())A=r?3:2;else{if((t=t.minus(n.times(i))).lte(a))return A=de(n)?r?2:3:r?4:1,t;A=de(n)?r?1:4:r?3:2}return t.minus(i).abs()}function xe(e,t,n,r){var i,a,o,s,l,u,c,d,p,h=e.constructor,f=void 0!==n;if(f?(Q(n,1,F),void 0===r?r=h.rounding:Q(r,0,8)):(n=h.precision,r=h.rounding),e.isFinite()){for(f?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(c=ie(e)).indexOf("."))>=0&&(c=c.replace(".",""),(p=new h(1)).e=c.length-o,p.d=te(ie(p),10,i),p.e=p.d.length),a=l=(d=te(c,10,i)).length;0==d[--l];)d.pop();if(d[0]){if(o<0?a--:((e=new h(e)).d=d,e.e=a,d=(e=ne(e,p,n,r,0,i)).d,a=e.e,u=k),o=d[n],s=i/2,u=u||void 0!==d[n+1],u=r<4?(void 0!==o||u)&&(0===r||r===(e.s<0?3:2)):o>s||o===s&&(4===r||u||6===r&&1&d[n-1]||r===(e.s<0?8:7)),d.length=n,u)for(;++d[--n]>i-1;)d[n]=0,n||(++a,d.unshift(1));for(l=d.length;!d[l-1];--l);for(o=0,c="";o<l;o++)c+=T.charAt(d[o]);if(f){if(l>1)if(16==t||8==t){for(o=16==t?4:3,--l;l%o;l++)c+="0";for(l=(d=te(c,i,t)).length;!d[l-1];--l);for(o=1,c="1.";o<l;o++)c+=T.charAt(d[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}else c=f?"0p+0":"0";c=(16==t?"0x":2==t?"0b":8==t?"0o":"")+c}else c=me(e);return e.s<0?"-"+c:c}function De(e,t){if(e.length>t)return e.length=t,!0}function we(e){return new this(e).abs()}function _e(e){return new this(e).acos()}function Se(e){return new this(e).acosh()}function Ce(e,t){return new this(e).plus(t)}function Ee(e){return new this(e).asin()}function ke(e){return new this(e).asinh()}function Ae(e){return new this(e).atan()}function Ne(e){return new this(e).atanh()}function Me(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,a=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?se(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=se(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,n=this.atan(ne(e,t,a,1)),t=se(this,a,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(ne(e,t,a,1)):(n=se(this,a,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function Fe(e){return new this(e).cbrt()}function Te(e){return re(e=new this(e),e.e+1,2)}function Be(e,t,n){return new this(e).clamp(t,n)}function Le(e){if(!e||"object"!=typeof e)throw Error(I+"Object expected");var t,n,r,i=!0===e.defaults,a=["precision",1,F,"rounding",0,8,"toExpNeg",-M,0,"toExpPos",0,M,"maxE",0,M,"minE",-M,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(n=a[t],i&&(this[n]=O[n]),void 0!==(r=e[n])){if(!(K(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(P+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=O[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(P+n+": "+r);if(r){if(!(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)))throw Error(R);this[n]=!0}else this[n]=!1}return this}function Oe(e){return new this(e).cos()}function ze(e){return new this(e).cosh()}function Ie(e,t){return new this(e).div(t)}function Pe(e){return new this(e).exp()}function qe(e){return re(e=new this(e),e.e+1,3)}function Re(){var e,t,n=new this(0);for(z=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return z=!0,new this(1/0);n=t}return z=!0,n.sqrt()}function je(e){return e instanceof lt||e&&e.toStringTag===j||!1}function Ke(e){return new this(e).ln()}function Ve(e,t){return new this(e).log(t)}function Ue(e){return new this(e).log(2)}function $e(e){return new this(e).log(10)}function He(){return pe(this,arguments,"lt")}function We(){return pe(this,arguments,"gt")}function Ge(e,t){return new this(e).mod(t)}function Ze(e,t){return new this(e).mul(t)}function Je(e,t){return new this(e).pow(t)}function Xe(e){var t,n,r,i,a=0,o=new this(1),s=[];if(void 0===e?e=this.precision:Q(e,1,F),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));a<r;)(i=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else{if(!crypto.randomBytes)throw Error(R);for(t=crypto.randomBytes(r*=4);a<r;)(i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(s.push(i%1e7),a+=4);a=r/4}else for(;a<r;)s[a++]=1e7*Math.random()|0;for(e%=7,(r=s[--a])&&e&&(i=V(10,7-e),s[a]=(r/i|0)*i);0===s[a];a--)s.pop();if(a<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=s,o}function Ye(e){return re(e=new this(e),e.e+1,this.rounding)}function Qe(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function et(e){return new this(e).sin()}function tt(e){return new this(e).sinh()}function nt(e){return new this(e).sqrt()}function rt(e,t){return new this(e).sub(t)}function it(){var e=0,t=arguments,n=new this(t[e]);for(z=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return z=!0,re(n,this.precision,this.rounding)}function at(e){return new this(e).tan()}function ot(e){return new this(e).tanh()}function st(e){return re(e=new this(e),e.e+1,1)}X[Symbol.for("nodejs.util.inspect.custom")]=X.toString,X[Symbol.toStringTag]="Decimal";var lt=X.constructor=function e(t){var n,r,i;function a(e){var t,n,r,i=this;if(!(i instanceof a))return new a(e);if(i.constructor=a,je(e))return i.s=e.s,void(z?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(z?t>a.maxE?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!==0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):ge(i,e.toString())}if("string"!==r)throw Error(P+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),W.test(e)?ge(i,e):function(e,t){var n,r,i,a,o,s,l,u,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),W.test(t))return ge(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if($.test(t))n=16,t=t.toLowerCase();else if(U.test(t))n=2;else{if(!H.test(t))throw Error(P+t);n=8}for((a=t.search(/p/i))>0?(l=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),o=(a=t.indexOf("."))>=0,r=e.constructor,o&&(a=(s=(t=t.replace(".","")).length)-a,i=ce(r,new r(n),a,2*a)),a=c=(u=te(t,n,G)).length-1;0===u[a];--a)u.pop();return a<0?new r(0*e.s):(e.e=ae(u,c),e.d=u,z=!1,o&&(e=ne(e,i,4*s)),l&&(e=e.times(Math.abs(l)<54?V(2,l):lt.pow(2,l))),z=!0,e)}(i,e)}if(a.prototype=X,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=Le,a.clone=e,a.isDecimal=je,a.abs=we,a.acos=_e,a.acosh=Se,a.add=Ce,a.asin=Ee,a.asinh=ke,a.atan=Ae,a.atanh=Ne,a.atan2=Me,a.cbrt=Fe,a.ceil=Te,a.clamp=Be,a.cos=Oe,a.cosh=ze,a.div=Ie,a.exp=Pe,a.floor=qe,a.hypot=Re,a.ln=Ke,a.log=Ve,a.log10=$e,a.log2=Ue,a.max=He,a.min=We,a.mod=Ge,a.mul=Ze,a.pow=Je,a.random=Xe,a.round=Ye,a.sign=Qe,a.sin=et,a.sinh=tt,a.sqrt=nt,a.sub=rt,a.sum=it,a.tan=at,a.tanh=ot,a.trunc=st,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(O);B=new lt(B),L=new lt(L);var ut=lt;var ct=8205,dt=[127462,127487];function pt(e){return e===ct||65038===e||65039===e||e>=127995&&e<=128e3||e>=129456&&e<=129460||e>=917536&&e<=917632}function ht(e){return e>=dt[0]&&e<=dt[1]}var ft=class{constructor(e){this.obeyspaces=!1,e=e.replace(/[\u200E\u200F\u2066-\u2069\u202A-\u202E]/g,""),this.s=function(e){if(/^[\u0020-\u00FF]*$/.test(e))return e;let t=[],n=function(e){let t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r>=55296&&r<=56319){let t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(r=65536+1024*(r-55296)+(t-56320),n++)}t.push(r)}return t}(e),r=0;for(;r<n.length;){let e=n[r++],i=n[r];if(i===ct){let e=r-1;for(r+=2;n[r]===ct;)r+=2;t.push(String.fromCodePoint(...n.slice(e,2*r-e+1)))}else if(pt(i)){let e=r-1;for(;pt(n[r]);)r+=n[r]===ct?2:1;t.push(String.fromCodePoint(...n.slice(e,2*r-e-1)))}else ht(e)?(r+=1,t.push(String.fromCodePoint(...n.slice(r-2,2)))):t.push(String.fromCodePoint(e))}return t}(e),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){var t;let n;return n="string"==typeof this.s?e.exec(this.s.slice(this.pos)):e.exec(this.s.slice(this.pos).join("")),null!==(t=n)&&void 0!==t&&t[0]?(this.pos+=n[0].length,n[0]):null}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]+/))return"<space>";if(this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]/))return"<space>";let e=this.get();if("\\"===e){if(!this.end()){let e=this.match(/^[a-zA-Z*]+/);if(e)this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]*/);else if(e=this.get()," "===e)return"<space>";return"\\"+e}}else{if("{"===e)return"<{>";if("}"===e)return"<}>";if("^"===e){if("^"===this.peek()){this.get();let e=this.match(/^(\^(\^(\^(\^[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f][0-9a-f]/);if(e)return String.fromCodePoint(parseInt(e.slice(e.lastIndexOf("^")+1),16))}return e}if("#"===e){if(!this.end()){let e=!1;if(/[0-9?]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){let t=this.s[this.pos+1];e=/[^0-9A-Za-z]/.test(t)}return e?"#"+this.get():"#"}}else if("$"===e)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return e}};function mt(e,t){let n=e.next();if(!n)return[];let r=[];if("\\relax"!==n)if("\\noexpand"===n)n=e.next(),n&&r.push(n);else if("\\obeyspaces"===n)e.obeyspaces=!0;else if("\\space"===n||"~"===n)r.push("<space>");else if("\\bgroup"===n)r.push("<{>");else if("\\egroup"===n)r.push("<}>");else if("\\string"===n)n=e.next(),n&&("\\"===n[0]?Array.from(n).forEach((e=>r.push("\\"===e?"\\backslash":e))):"<{>"===n?r.push("\\{"):"<space>"===n?r.push("~"):"<}>"===n&&r.push("\\}"));else if("\\csname"===n){for(;"<space>"===e.peek();)e.next();let o="",s=!1,l=[];do{if(0===l.length)if(/^#[0-9?]$/.test(e.peek())){var i,a;let r=e.get().slice(1);l=gt(null!==(i=null!==(a=null===t||void 0===t?void 0:t[r])&&void 0!==a?a:null===t||void 0===t?void 0:t["?"])&&void 0!==i?i:"\\placeholder{}",t),n=l[0]}else n=e.next(),l=n?[n]:[];s=0===l.length,!s&&"\\endcsname"===n&&(s=!0,l.shift()),s||(s="<$>"===n||"<$$>"===n||"<{>"===n||"<}>"===n||!!n&&n.length>1&&"\\"===n[0]),s||(o+=l.shift())}while(!s);o&&r.push("\\"+o),r=r.concat(l)}else if("\\endcsname"!==n)if(n.length>1&&"#"===n[0]){var o,s;let e=n.slice(1);r=r.concat(gt(null!==(o=null!==(s=null===t||void 0===t?void 0:t[e])&&void 0!==s?s:null===t||void 0===t?void 0:t["?"])&&void 0!==o?o:"\\placeholder{}",t))}else r.push(n);return r}function gt(e,t){let n=e.toString().split(/\r?\n/),r="",i="";for(let s of n){r+=i,i=" ";let e=s.match(/((?:\\%)|[^%])*/);null!==e&&(r+=e[0])}let a=new ft(r),o=[];do{o.push(...mt(a,t))}while(!a.end());return o}function vt(e){return gt(e,[]).length}function yt(e){let t="",n="";for(let r of e)r&&(/[a-zA-Z*]/.test(r[0])&&(n+=t),t=/\\[a-zA-Z]+\*?$/.test(r)?" ":"",n+=r);return n}function bt(e){let t=[];if(Array.isArray(e))for(let n of e)Array.isArray(n)?t=[...t,...n]:t.push(n);else t=[e];return yt(t.map((e=>{var t;return null!==(t={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])&&void 0!==t?t:e})))}var xt,Dt=["Error","'missing'"];function wt(e){return null!==e&&!!("number"==typeof e||_t(e)||"string"==typeof e&&/^[+-]?[0-9\.]/.test(e))}function _t(e){return null!==e&&"object"==typeof e&&"num"in e}function St(e){return null!==e&&"object"==typeof e&&"sym"in e}function Ct(e){return null!==e&&"object"==typeof e&&"fn"in e}function Et(e){if(!xt){let e="^[".concat(["Zyyy","Zinh","Arab","Armn","Beng","Bopo","Cyrl","Deva","Ethi","Geor","Grek","Gujr","Guru","Hang","Hani","Hebr","Hira","Kana","Knda","Khmr","Laoo","Latn","Mlym","Mymr","Orya","Sinh","Taml","Telu","Thaa","Thai","Tibt"].map((e=>"\\p{Script=".concat(e,"}"))).join(""),"]*$");xt=new RegExp(e,"u")}return xt.test(e)}function kt(e){return!(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)&&!Tt.test(e))||!!Et(e)&&/^(?:[A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037B-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFC5D\uFC64-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDF9\uFE71\uFE73\uFE77\uFE79\uFE7B\uFE7D\uFE7F-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037B-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFC5D\uFC64-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDF9\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE71\uFE73\uFE77\uFE79\uFE7B\uFE7D\uFE7F-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/.test(e)}var At="(?:\\p{EMod}|".concat("\\u{FE0F}").concat("\\u{20E3}","?|").concat("(?:[\\u{E0020}-\\u{E007E}]+\\u{E007F})",")"),Nt="(?:".concat("(?:(?=\\P{XIDC})\\p{Emoji})").concat(At,"*|\\p{Emoji}").concat(At,"+|").concat("\\p{RI}\\p{RI}",")"),Mt="(?:".concat(Nt,")(").concat("\\u{200D}").concat(Nt,")*"),Ft=new RegExp("(?:".concat(Mt,")+"),"u"),Tt=new RegExp("^(?:".concat(Mt,")+$"),"u");function Bt(e){return"string"!=typeof e?"not-a-string":""===e?"empty-string":e.normalize()!==e?"expected-nfc":/[\u200E\u200F\u2066-\u2069\u202A-\u202E]/.test(e)?"unexpected-bidi-marker":Tt.test(e)?"valid":/(?:[0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037B-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFC5D\uFC64-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDF9\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE71\uFE73\uFE77\uFE79\uFE7B\uFE7D\uFE7F-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])/.test(e)&&Ft.test(e)?"unexpected-mixed-emoji":Et(e)?kt(e)?"valid":kt(e[0])?"invalid-char":"invalid-first-char":"unexpected-script"}function Lt(e){return null==e?null:"object"==typeof e&&"str"in e?e.str:"string"!=typeof e||e.length<2||"'"!==e[0]||"'"!==e[e.length-1]?null:e.substring(1,e.length-1)}function Ot(e){var t;if(null==e||null!==Lt(e))return null;let n=zt(e);return null!==n?[n,...(null!==(t=It(e))&&void 0!==t?t:[]).map((e=>Ot(e))).filter((e=>null!==e))]:e}function zt(e){return null==e?null:Array.isArray(e)?"string"!=typeof e[0]||kt(e[0])?e[0]:(console.error('Invalid identifier "'.concat(e[0],'": ').concat(Bt(e[0]))),null):Ct(e)?e.fn[0]:null}function It(e){return null==e?null:Array.isArray(e)?e.slice(1):Ct(e)?e.fn.slice(1):null}function Pt(e,t){var n,r;return null==e?null:Array.isArray(e)?null!==(n=e[t])&&void 0!==n?n:null:Ct(e)&&null!==(r=e.fn[t])&&void 0!==r?r:null}function qt(e){return Pt(e,1)}function Rt(e){return Pt(e,2)}function jt(e){return null==e?0:Array.isArray(e)?Math.max(0,e.length-1):Ct(e)?Math.max(0,e.fn.length-1):0}function Kt(e){return null==e?null:"Hold"===zt(e)?Pt(e,1):e}function Vt(e){if(null==e||"string"==typeof e&&(/^[+\-\.0-9]/.test(e)||e.length>=2&&"'"===e[0]&&"'"===e[e.length-1]))return null;let t=St(e)?e.sym:e;return"string"!=typeof t?null:t}function Ut(e){let t=zt(e);if("KeyValuePair"===t||"Tuple"===t||"Pair"===t){var n;let t=Lt(qt(e));return t?[t,null!==(n=Rt(e))&&void 0!==n?n:"Nothing"]:null}return null}function $t(e){if(null===e)return null;if("object"==typeof e&&"dict"in e)return e.dict;let t=Ut(e);if(t)return{[t[0]]:t[1]};if("Dictionary"===zt(e)){let t={};for(let n=1;n<jt(e);n++){let r=Ut(Pt(e,n));r&&(t[r[0]]=r[1])}return t}return null}function Ht(e){return null==e?null:"number"==typeof e?e:"string"==typeof e?function(e){if("nan"===(e=e.toLowerCase().replace(/[nd]$/g,"").replace(/[\u0009-\u000d\u0020\u00a0]/g,"")))return NaN;if("+infinity"===e)return 1/0;if("-infinity"===e)return-1/0;if(/\([0-9]+\)/.test(e)){var t;let[n,r,i,a]=null!==(t=e.match(/(.+)\(([0-9]+)\)(.*)$/))&&void 0!==t?t:[];e=r+i.repeat(Math.ceil(16/i.length))+(null!==a&&void 0!==a?a:"")}return parseFloat(e)}(e):_t(e)?Ht(e.num):null}function Wt(e){var t,n;if(null==e)return null;if("Half"===Vt(e))return[1,2];let r=zt(e);if(!r)return null;let i=null,a=null;if("Negate"===r){let t=Wt(qt(e));if(t)return[-t[0],t[1]]}if(("Rational"===r||"Divide"===r)&&(i=null!==(t=Ht(qt(e)))&&void 0!==t?t:NaN,a=null!==(n=Ht(Rt(e)))&&void 0!==n?n:NaN),"Power"===r){let t=Ht(Rt(e));1===t?(i=Ht(qt(e)),a=1):-1===t&&(i=1,a=Ht(qt(e)))}return"Multiply"===r&&"Power"===zt(Rt(e))&&-1===Ht(Rt(Rt(e)))&&(i=Ht(qt(e)),a=Ht(qt(Rt(e)))),null===i||null===a?null:Number.isInteger(i)&&Number.isInteger(a)?[i,a]:null}function Gt(e,t){var n;let r=zt(e);if(null!==r)return[Gt(r,t),...(null!==(n=It(e))&&void 0!==n?n:[]).map((e=>Gt(e,t)))];let i=$t(e);if(null!==i){let e=Object.keys(i),n={};for(let r of e)n[r]=Gt(i[r],t);return{dict:n}}let a=Vt(e);return a&&t[a]?t[a]:e}function Zt(e,t){let n=null;if(Array.isArray(e)&&(n=e),Ct(e)&&(n=e.fn),null===n)return[];let r=1,i=[];for(;r<n.length;)i.push(t(n[r])),r+=1;return i}function Jt(e,t,n){var r,i,a,o,s,l;let u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"both";if("non"===u)return[e,t,n];let c=zt(t),d=zt(n);return"left"===u?c===e?[e,...null!==(r=It(t))&&void 0!==r?r:[],n]:[e,t,n]:"right"===u?d===e?[e,t,...null!==(i=It(n))&&void 0!==i?i:[]]:[e,t,n]:c===e&&d===e?[e,...null!==(a=It(t))&&void 0!==a?a:[],...null!==(o=It(n))&&void 0!==o?o:[]]:c===e?[e,...null!==(s=It(t))&&void 0!==s?s:[],n]:d===e?[e,t,...null!==(l=It(n))&&void 0!==l?l:[]]:[e,t,n]}function Xt(e){var t;if(null===e)return null;let n=zt(e);if("Delimiter"===n){if(null===(e=Pt(e,1)))return[];if(n=zt(e),"Sequence"!==n)return[e]}return"Sequence"!==n?null:null!==(t=It(e))&&void 0!==t?t:[]}function Yt(e){return"Sequence"===zt(e)&&0===jt(e)}function Qt(e){return Yt(e)?Dt:null!==e&&void 0!==e?e:Dt}function en(e){return"Square"===e[0]?en(e.slice(1))+2:e.reduce(((e,t)=>e+tn(t)),0)}function tn(e){if(null===e)return 0;if("number"==typeof e||"string"==typeof e||wt(e)||St(e)||function(e){return null!==e&&"object"==typeof e&&"str"in e}(e))return 1;if(Array.isArray(e))return en(e);if("fn"in e)return en(e.fn);let t=$t(e);if(t){let e=Object.keys(t);return 1+e.length+e.reduce(((e,n)=>e+tn(t[n])),0)}return 0}function nn(e,t){return t>2?"solidus":"radical"}function rn(e,t){if(t>3)return"inline-solidus";if("Divide"===zt(e)){let[t,n]=[tn(qt(e)),tn(Rt(e))];if(n<=2&&t>5)return"factor";if(t<=2&&n>5)return"reciprocal"}return"quotient"}function an(e,t,n,r){var i;return null===n?"\\sqrt{}":(r=null!==(i=r)&&void 0!==i?i:2,"solidus"===t?e.wrapShort(n)+"^{1\\/"+e.serialize(r)+"}":"quotient"===t?e.wrapShort(n)+"^{\\frac{1}{"+e.serialize(r)+"}}":2===Ht(r)?"\\sqrt{"+e.serialize(n)+"}":"\\sqrt["+e.serialize(r)+"]{"+e.serialize(n)+"}")}function on(e,t){if(null===t)return"";let n=Qt(Pt(t,1)),r=Qt(Pt(t,2)),i=e.canonical?rn(t,e.level):"quotient";if("inline-solidus"===i||"nice-solidus"===i){let t=e.wrapShort(n),a=e.wrapShort(r);return"inline-solidus"===i?"".concat(t,"\\/").concat(a):"{}^{".concat(t,"}\\!\\!/\\!{}_{").concat(a,"}")}if("reciprocal"===i)return 1===Ht(n)?e.wrap(r)+"^{-1}":e.wrap(n)+e.wrap(r)+"^{-1}";if("factor"===i)return 1===Ht(r)?e.wrap(n):"\\frac{1}{"+e.serialize(r)+"}{"+e.wrap(n)+"}";let a="\\frac";"block-quotient"===i?a="\\dfrac":"inline-quotient"===i&&(a="\\tfrac");let o=e.serialize(n),s=e.serialize(r);return"".concat(a,"{").concat(o,"}{").concat(s,"}")}function sn(e,t){let n=zt(t),r=Qt(Pt(t,1));if("Sqrt"===n)return an(e,nn(0,e.level-1),r,2);let i=Qt(Pt(t,2));if("Root"===n)return an(e,nn(0,e.level-1),r,i);if(e.canonical){var a;let t=null!==(a=Ht(i))&&void 0!==a?a:1;if(-1===t)return e.serialize(["Divide","1",r]);if(t<0)return e.serialize(["Divide","1",["Power",r,-t]]);if("Divide"===zt(i)||"Rational"===zt(i)){if(1===Ht(Pt(i,1))){return an(e,nn(0,e.level),r,Pt(i,2))}if(2===Ht(Pt(i,2)))return"".concat(e.serialize(["Sqrt",r]),"^{").concat(e.serialize(Pt(i,1)),"}")}else if("Power"===zt(i)&&-1===Ht(Pt(i,2))){return an(e,nn(0,e.level),r,Pt(i,1))}}return e.wrapShort(r)+"^{"+e.serialize(i)+"}"}var ln=[{name:"CatalanConstant",identifierTrigger:"G"},{name:"GoldenRatio",latexTrigger:"\\varphi"},{name:"EulerGamma",latexTrigger:"\\gamma"},{name:"Degrees",latexTrigger:["\\degree"],kind:"postfix",precedence:880,parse:(e,t)=>["Degrees",t],serialize:(e,t)=>yt([e.serialize(Pt(t,1)),"\\degree"])},{latexTrigger:["\\degree"],kind:"postfix",precedence:880,parse:(e,t)=>["Degrees",t]},{latexTrigger:["^","<{>","\\circ","<}>"],kind:"postfix",parse:(e,t)=>["Degrees",t]},{latexTrigger:["^","\\circ"],kind:"postfix",parse:(e,t)=>["Degrees",t]},{latexTrigger:["\xb0"],kind:"postfix",precedence:880,parse:(e,t)=>["Degrees",t]},{latexTrigger:["\\ang"],parse:e=>{let t=e.parseGroup();return null===t?["Degrees"]:["Degrees",t]}},{latexTrigger:["\\infty"],parse:{num:"+Infinity"}},{name:"ComplexInfinity",latexTrigger:["\\tilde","\\infty"],serialize:"\\tilde\\infty"},{latexTrigger:["\\tilde","<{>","\\infty","<}>"],parse:"ComplexInfinity"},{name:"Pi",kind:"symbol",latexTrigger:["\\pi"]},{latexTrigger:["\u03c0"],parse:"Pi"},{name:"ExponentialE",latexTrigger:["\\exponentialE"],parse:"ExponentialE",serialize:"\\exponentialE"},{latexTrigger:"\\operatorname{e}",parse:"ExponentialE"},{latexTrigger:"\\mathrm{e}",parse:"ExponentialE"},{kind:"function",identifierTrigger:"exp",parse:"Exp"},{latexTrigger:"\\exp",parse:"Exp"},{name:"ImaginaryUnit",latexTrigger:["\\imaginaryI"]},{latexTrigger:"\\operatorname{i}",parse:"ImaginaryUnit"},{latexTrigger:"\\mathrm{i}",parse:"ImaginaryUnit"},{name:"Abs",kind:"matchfix",openTrigger:"|",closeTrigger:"|",parse:(e,t)=>Yt(t)?null:["Abs",t]},{identifierTrigger:"abs",kind:"function",parse:"Abs"},{name:"Add",latexTrigger:["+"],kind:"infix",associativity:"both",precedence:x,parse:(e,t,n)=>{if(n&&x<n.minPrec)return null;let r=e.parseExpression(l(l({},n),{},{minPrec:x}));return null===r?null:Jt("Add",t,r)},serialize:function(e,t){e.level-=1;let n=zt(t),r="",i=Pt(t,1);if("Negate"===n)r="-"+e.wrap(i,276);else if("Add"===n){var a;if(e.canonical&&2===jt(t)&&"+"!==e.options.invisiblePlus){let[n,i]=[Pt(t,1),Pt(t,2)],[a,o]=[n,i],s=Ht(a),l=Wt(o);if((null===s||null===l)&&([a,o]=[i,n],s=Ht(a),l=Wt(o)),null!==s&&null!==l&&isFinite(s)&&Number.isInteger(s)&&s>=0&&s<=1e3&&isFinite(l[0])&&isFinite(l[1])&&l[0]>0&&l[0]<=100&&l[1]<=100)return r=yt([e.serialize(a),e.options.invisiblePlus,e.serialize(o)]),e.level+=1,r}let n=null!==(a=Ht(i))&&void 0!==a?a:NaN;r=e.serialize(i);let s=jt(t)+1;for(let a=2;a<s;a++){var o;if(i=Pt(t,a),n=null!==(o=Ht(i))&&void 0!==o?o:NaN,n<0)r+=e.serialize(i);else if("Negate"===zt(i))r+=e.wrap(i,x);else{let t=e.wrap(i,x);"-"===t[0]||"+"===t[0]?r+=t:r+="+"+t}}}else if("Subtract"===n){r=e.wrap(i,x);let n=Pt(t,2);if(null!==n){let t=e.wrap(n,x);"-"===t[0]?r+="+"+t.slice(1):"+"===t[0]?r+="-"+t.slice(1):r=r+"-"+t}}return e.level+=1,r}},{kind:"prefix",latexTrigger:["+"],precedence:x,parse:(e,t)=>t&&x<t.minPrec?null:e.parseExpression(l(l({},t),{},{minPrec:400}))},{name:"Ceil",kind:"matchfix",openTrigger:"\\lceil",closeTrigger:"\\rceil",parse:(e,t)=>Yt(t)?null:["Ceil",t]},{kind:"matchfix",openTrigger:["\u2308"],closeTrigger:["\u2309"],parse:(e,t)=>Yt(t)?null:["Ceil",t]},{identifierTrigger:"ceil",kind:"function",parse:"Ceil"},{name:"Chop",identifierTrigger:"chop",kind:"function",parse:"Chop"},{name:"Complex",precedence:274,serialize:(e,t)=>{let n=Ht(Pt(t,1)),r=Ht(Pt(t,2));if(0===r)return e.serialize(Pt(t,1));let i=1===r?"\\imaginaryI":-1===r?"-\\imaginaryI":yt([e.serialize(Pt(t,2)),"\\imaginaryI"]);return 0===n?i:yt(null!==r&&r<0?[e.serialize(Pt(t,1)),i]:[e.serialize(Pt(t,1)),"+",i])}},{name:"Divide",latexTrigger:"\\frac",precedence:w,parse:function(e){let t=e.parseGroup(),n=null;if(null===t?(t=e.parseToken(),n=e.parseToken()):n=e.parseGroup(),t=Qt(t),n=Qt(n),"PartialDerivative"===zt(t)&&("PartialDerivative"===zt(n)||"Multiply"===zt(n)&&"PartialDerivative"===zt(Pt(n,1)))){var r;let a=null!==(r=Pt(t,3))&&void 0!==r?r:null,o=Pt(t,1);null===o&&(o=Qt(e.parseExpression()));let s=[];if("Multiply"===zt(n))for(let e of null!==(i=It(n))&&void 0!==i?i:[]){var i;if("PartialDerivative"===zt(e)){let t=Pt(e,2);t&&s.push(t)}}else{let e=Pt(n,2);e&&s.push(e)}return s.length>1&&(s=["List",...s]),["PartialDerivative",o,...s,null===a?1:a]}return["Divide",t,n]},serialize:on},{kind:"infix",latexTrigger:"\\over",precedence:w,parse:"Divide"},{latexTrigger:["\\/"],kind:"infix",associativity:"non",precedence:w,parse:"Divide"},{latexTrigger:["/"],kind:"infix",associativity:"non",precedence:w,parse:"Divide"},{latexTrigger:["\\div"],kind:"infix",associativity:"non",precedence:w,parse:"Divide"},{name:"Exp",serialize:(e,t)=>{let n=Pt(t,1);return Vt(n)||null!==Ht(n)?yt(["\\exponentialE^{",e.serialize(n)]):yt(["\\exp",e.wrap(Qt(n))])}},{name:"Factorial",latexTrigger:["!"],kind:"postfix",precedence:810},{name:"Factorial2",latexTrigger:["!","!"],kind:"postfix",precedence:810},{name:"Floor",kind:"matchfix",openTrigger:"\\lfloor",closeTrigger:"\\rfloor",parse:(e,t)=>Yt(t)?null:["Floor",t]},{kind:"matchfix",openTrigger:["\u230a"],closeTrigger:["\u230b"],parse:(e,t)=>Yt(t)?null:["Floor",t]},{identifierTrigger:"floor",kind:"function",parse:"Floor"},{latexTrigger:["\\Gamma"],parse:"Gamma"},{name:"GCD",identifierTrigger:"gcd",kind:"function"},{identifierTrigger:"GCD",kind:"function",parse:"GCD"},{name:"Half",serialize:"\\frac12"},{name:"Lg",latexTrigger:["\\lg"],serialize:(e,t)=>"\\log_{10}"+e.wrapArguments(t),parse:e=>{let t=e.parseArguments("implicit");return null===t?"Lg":["Log",...t,10]}},{name:"Lb",latexTrigger:"\\lb",parse:e=>{let t=e.parseArguments("implicit");return null===t?"Log":["Log",...t,2]}},{name:"Ln",latexTrigger:["\\ln"],serialize:(e,t)=>"\\ln"+e.wrapArguments(t),parse:e=>dn("Ln",e)},{name:"Log",latexTrigger:["\\log"],parse:e=>dn("Log",e),serialize:(e,t)=>{let n=Rt(t);return n?yt(["\\log_{",n.toString(),"}",e.wrap(qt(t))]):"\\log"+e.wrapArguments(t)}},{name:"LCM",identifierTrigger:"lcm",kind:"function"},{identifierTrigger:"LCM",kind:"function",parse:"LCM"},{identifierTrigger:"max",kind:"function",parse:"Max"},{identifierTrigger:"min",kind:"function",parse:"Min"},{name:"Max",latexTrigger:"\\max",kind:"function"},{name:"Min",latexTrigger:"\\min",kind:"function"},{name:"Supremum",latexTrigger:"\\sup",kind:"function"},{name:"Infimum",latexTrigger:"\\inf",kind:"function"},{name:"Limit",latexTrigger:"\\lim",kind:"expression",parse:e=>{if(!e.match("_"))return;let t=e.parseGroup();if("To"!==zt(t))return;let n=e.parseArguments("implicit");return n?["Limit",["Function",n[0],Pt(t,1)],Pt(t,2)]:void 0},serialize:(e,t)=>{let n=Pt(t,1),r=Pt(n,2),i=Pt(t,2);return yt(["\\lim_{",e.serialize(r),"\\to",e.serialize(i),"}",e.serialize(Pt(n,1))])}},{name:"MinusPlus",latexTrigger:["\\mp"],kind:"infix",associativity:"both",precedence:b},{name:"Multiply",latexTrigger:["\\times"],kind:"infix",associativity:"both",precedence:D,serialize:function e(t,n){if(null===n)return"";t.level-=1;let r="";if(!0===t.canonical){let[i,a]=function(e){var t;if("Multiply"!==zt(e))return[[],[]];let n=[],r=[],i=null!==(t=It(e))&&void 0!==t?t:[];for(let o of i)if("Power"===zt(o)){let e=Pt(o,1),t=Pt(o,2);if("Negate"===zt(t)){let n=Pt(t,1);e&&n&&r.push(["Power",e,n])}else{var a;let i=null!==(a=Ht(t))&&void 0!==a?a:NaN;-1===i?e&&r.push(e):i<0?e&&r.push(["Power",e,-i]):n.push(o)}}else if("Rational"===zt(o)&&2===jt(o)){let e=Pt(o,1),t=Pt(o,2);1!==Ht(e)&&n.push(e),1!==Ht(t)&&r.push(t)}else{let e=Wt(o);null!==e?(1!==e[0]&&n.push(e[0]),r.push(e[1])):n.push(o)}return[n,r]}(n);a.length>0&&(r=1===a.length&&1===a[0]?0===i.length?"1":1===i.length?t.serialize(i[0]):e(t,["Multiply",...i]):t.serialize(["Divide",1===i.length?i[0]:["Multiply",...i],1===a.length?a[0]:["Multiply",...a]]))}if(r)return t.level+=1,r;let i=!1,a=null,o=jt(n)+1,s=!1;for(let u=1;u<o;u++){var l;if(a=Pt(n,u),null===a)continue;let e;if(wt(a))e=t.serialize(a),"-1"!==e||r?("-"===e[0]&&(e=e.slice(1),i=!i),r=r?yt([r,t.options.multiply,e]):e):(r="",i=!i),s=!0;else{if("Power"===zt(a)){let e=Wt(Pt(a,2));if(e){let[n,i]=e;if(1===n&&null!==i){r+=an(t,nn(0,t.level),Pt(a,1),i),s=!1;continue}}}if("Power"!==zt(a)||isNaN(null!==(l=Ht(Pt(a,1)))&&void 0!==l?l:NaN)){if("Negate"===zt(a)&&(a=Pt(a,1),i=!i),e=t.wrap(a,D),r){let n=zt(a);r=!s||"Divide"!==n&&"Rational"!==n?t.options.invisibleMultiply?yt([r,t.options.invisibleMultiply,e]):yt([r,e]):yt([r,t.options.multiply,e])}else r=e;s=!1}else e=t.serialize(a),r=r?yt([r,t.options.multiply,e]):e,s=!0}}return t.level+=1,i?"-"+r:r}},{latexTrigger:["\\cdot"],kind:"infix",associativity:"both",precedence:D,parse:(e,t,n)=>{let r=e.parseExpression(l(l({},n),{},{minPrec:392}));return null===r?["Multiply",t,Dt]:Jt("Multiply",t,r)}},{latexTrigger:["*"],kind:"infix",associativity:"both",precedence:D,parse:(e,t,n)=>{let r=e.parseExpression(l(l({},n),{},{minPrec:392}));return null===r?["Multiply",t,Dt]:Jt("Multiply",t,r)}},{name:"Mod",latexTrigger:"\\bmod",kind:"infix",precedence:w,serialize:(e,t)=>{if(2!==jt(t))return"";return yt([e.serialize(Pt(t,1)),"\\bmod",e.serialize(Pt(t,2))])}},{latexTrigger:"\\mod",kind:"infix",precedence:w,parse:"Mod"},{latexTrigger:"\\pmod",kind:"prefix",precedence:v,parse:e=>{var t;return["Mod",Qt(null!==(t=e.parseGroup())&&void 0!==t?t:e.parseToken())]}},{name:"Congruent",serialize:(e,t)=>{let n=e.serialize(Pt(t,1)),r=e.serialize(Pt(t,2));return null===Pt(t,3)?yt([n,"\\equiv",r]):yt([n,"\\equiv",r,"\\pmod{",e.serialize(Pt(t,3)),"}"])}},{name:"Negate",latexTrigger:["-"],kind:"prefix",precedence:x,parse:(e,t)=>{if(/\d/.test(e.peek))return null;let n=e.index;return null!==e.parseNumber()?(e.index=n,null):["Negate",Qt(e.parseExpression(l(l({},t),{},{minPrec:276})))]}},{kind:"matchfix",openTrigger:"||",closeTrigger:"||",parse:(e,t)=>Yt(t)?null:["Norm",t]},{name:"Norm",kind:"matchfix",openTrigger:["\\left","\\Vert"],closeTrigger:["\\right","\\Vert"],parse:(e,t)=>Yt(t)?null:["Norm",t]},{name:"PlusMinus",latexTrigger:["\\pm"],kind:"infix",associativity:"both",precedence:b,serialize:(e,t)=>{let n=Pt(t,1);if(null===n)return"\\pm";if(1===jt(t))return yt(["\\pm",e.serialize(n)]);let r=Pt(t,2);return yt([e.serialize(n),"\\pm",e.serialize(r)])}},{latexTrigger:["\\pm"],kind:"prefix",precedence:b,parse:(e,t)=>["PlusMinus",Qt(e.parseExpression(l(l({},t),{},{minPrec:400})))]},{latexTrigger:["\\plusmn"],kind:"infix",associativity:"both",precedence:b,parse:(e,t,n)=>["PlusMinus",t,Qt(e.parseExpression(l(l({},n),{},{minPrec:400})))]},{latexTrigger:["\\plusmn"],kind:"prefix",precedence:b,parse:(e,t)=>["PlusMinus",Qt(e.parseExpression(l(l({},t),{},{minPrec:400})))]},{name:"Power",latexTrigger:["^"],kind:"infix",serialize:sn},{latexTrigger:"\\prod",precedence:D,name:"Product",parse:un("Product",D),serialize:cn("\\prod")},{name:"Rational",precedence:w,serialize:(e,t)=>t&&1===jt(t)?"\\operatorname{Rational}"+e.wrapArguments(t):on(e,t)},{name:"Root",serialize:sn},{name:"Round",identifierTrigger:"round",kind:"function"},{name:"Square",precedence:720,serialize:(e,t)=>e.wrapShort(Pt(t,1))+"^2"},{latexTrigger:["\\sum"],precedence:x,name:"Sum",parse:un("Sum",x),serialize:cn("\\sum")},{name:"Sign",identifierTrigger:"sgn",kind:"function"},{name:"Sqrt",latexTrigger:["\\sqrt"],parse:function(e){var t;let n=e.parseOptionalGroup(),r=null!==(t=e.parseGroup())&&void 0!==t?t:e.parseToken();return null===r||Yt(r)?null!==n?["Root",Dt,Qt(n)]:["Sqrt",Dt]:null!==n?["Root",r,n]:["Sqrt",r]},serialize:sn},{name:"Subtract",latexTrigger:["-"],kind:"infix",associativity:"both",precedence:x,parse:(e,t,n)=>["Subtract",t,Qt(e.parseExpression(l(l({},n),{},{minPrec:277})))]}];function un(e,t){return n=>{var r,i,a;n.skipSpace();let o=null,s=null;for(;(!s||!o)&&("_"===n.peek||"^"===n.peek);){var l,u;n.match("_")?s=null!==(l=n.parseGroup())&&void 0!==l?l:n.parseToken():n.match("^")&&(o=null!==(u=n.parseGroup())&&void 0!==u?u:n.parseToken()),n.skipSpace()}("Nothing"===s||Yt(s))&&(s=null),("Nothing"===o||Yt(o))&&(o=null);let c=null,d=null;"Equal"===zt(s)?(c=Pt(s,1),d=Pt(s,2)):c=s;let p=n.parseExpression({minPrec:t+1});return p?o?[e,p,["Tuple",null!==(r=c)&&void 0!==r?r:"Nothing",null!==(i=d)&&void 0!==i?i:1,o]]:d?[e,p,["Tuple",null!==(a=c)&&void 0!==a?a:"Nothing",d]]:c?[e,p,["Tuple",c]]:[e,p]:[e]}}function cn(e){return(t,n)=>{if(!Pt(n,1))return e;let r=Pt(n,2),i=zt(r);"Tuple"!==i&&"Triple"!==i&&"Pair"!==i&&"Single"!==i&&(r=null);let a=Pt(r,1);a&&"Hold"===zt(a)&&(a=Pt(a,1));let o=Pt(n,1);if(!r)return Pt(n,2)?yt([e,"_{",t.serialize(Pt(n,2)),"}",t.serialize(o)]):yt([e,t.serialize(o)]);let s=Pt(r,2),l=[];a&&"Nothing"!==Vt(a)&&s?l=[t.serialize(a),"=",t.serialize(s)]:a&&"Nothing"!==Vt(a)?l=[t.serialize(a)]:s&&(l=[t.serialize(s)]),l.length>0&&(l=["_{",...l,"}"]);let u=[];return Pt(r,3)&&(u=["^{",t.serialize(Pt(r,3)),"}"]),yt([e,...u,...l,t.serialize(o)])}}function dn(e,t){var n,r,i;let a=null,o=null;t.match("_")&&(a=null!==(n=null===(r=t.parseStringGroup())||void 0===r?void 0:r.trim())&&void 0!==n?n:t.nextToken(),o=Number.parseFloat(null!==(i=a)&&void 0!==i?i:"10"));let s=t.parseArguments("implicit");return null===s?e:10===o?["Log",s[0]]:2===o?["Lb",...s]:null===a?[e,...s]:["Log",...s,a]}function pn(e,t,n,r,i){if(t.minPrec>=r)return null;let a=n?[n]:["Nothing"],o=!1;for(;!o;){for(o=!0,e.skipSpace();e.match(i);)a.push("Nothing"),e.skipSpace();if(e.atTerminator(t))a.push("Nothing");else{let n=e.parseExpression(l(l({},t),{},{minPrec:r}));a.push(null!==n&&void 0!==n?n:"Nothing"),o=null===n}o||(e.skipSpace(),o=!e.match(i))}return a}function hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t,n)=>{var r,i;if(!n)return"";let a=null!==(r=It(n))&&void 0!==r?r:[];if(0===a.length)return"";if(1===a.length)return t.serialize(a[0]);e=null!==(i={"&":"\\&",":":"\\colon","|":"\\mvert","-":"-","\xb7":"\\cdot","\u2012":"-","\u2013":"--","\u2014":"---","\u2015":"-","\u2022":"\\bullet","\u2026":"\\ldots"}[e])&&void 0!==i?i:e;let o=a.reduce(((n,r)=>(n.push(t.serialize(r),e),n)),[]);return o.pop(),yt(o)}}var fn=[{latexTrigger:["\\placeholder"],kind:"symbol",parse:e=>{for(;e.match("<space>"););if(e.match("["))for(;!e.match("]")&&!e.atBoundary;)e.nextToken();for(;e.match("<space>"););if(e.match("<{>"))for(;!e.match("<}>")&&!e.atBoundary;)e.nextToken();return"Nothing"}},{name:"Function",latexTrigger:["\\mapsto"],kind:"infix",precedence:b,parse:(e,t)=>{var n,r,i,a;let o=[];if("Delimiter"===zt(t)&&(t=null!==(n=Pt(t,1))&&void 0!==n?n:"Nothing"),"Sequence"===zt(t))for(let u of null!==(s=It(t))&&void 0!==s?s:[]){var s;if(!Vt(u))return null;o.push(Vt(u))}else{if(!Vt(t))return null;o=[Vt(t)]}let l=null!==(r=e.parseExpression({minPrec:b}))&&void 0!==r?r:"Nothing";return"Delimiter"===zt(l)&&(l=null!==(i=Pt(l,1))&&void 0!==i?i:"Nothing"),"Sequence"===zt(l)&&(l=["Block",...null!==(a=It(l))&&void 0!==a?a:[]]),["Function",l,...o]},serialize:(e,t)=>{var n,r;let i=It(t);return null===i||i.length<1?"()\\mapsto()":1===i.length?yt(["()","\\mapsto",e.serialize(Pt(t,1))]):2===i.length?yt([e.serialize(Pt(t,2)),"\\mapsto",e.serialize(Pt(t,1))]):yt([e.wrapString((null!==(n=null===(r=It(t))||void 0===r?void 0:r.slice(1))&&void 0!==n?n:[]).map((t=>e.serialize(t))).join(", "),"paren"),"\\mapsto",e.serialize(Pt(t,1))])}},{name:"Apply",kind:"function",identifierTrigger:"apply",serialize:(e,t)=>{if("string"==typeof Pt(t,1)){let n=t.slice(1);return e.serialize(n)}return e.serializeFunction(It(t))}},{latexTrigger:"\\lhd",kind:"infix",precedence:20,parse:"Apply"},{latexTrigger:"\\rhd",kind:"infix",precedence:20,parse:(e,t)=>{var n;return["Apply",null!==(n=e.parseExpression({minPrec:21}))&&void 0!==n?n:"Nothing",t]}},{name:"Assign",latexTrigger:"\\coloneq",kind:"infix",associativity:"right",precedence:y,serialize:(e,t)=>{let n=Kt(Pt(t,1));if("Function"===zt(Pt(t,2))){var r,i;let a=Pt(t,2),o=Kt(Pt(a,1)),s=null!==(r=null===(i=It(a))||void 0===i?void 0:i.slice(1))&&void 0!==r?r:[];return yt([e.serialize(n),e.wrapString(s.map((t=>e.serialize(t))).join(", "),e.options.applyFunctionStyle(t,e.level)),"\\coloneq",e.serialize(o)])}return yt([e.serialize(n),"\\coloneq",e.serialize(Pt(t,2))])},parse:bn},{latexTrigger:[":","="],kind:"infix",associativity:"right",precedence:y,parse:bn},{latexTrigger:"\\colonequals",kind:"infix",associativity:"right",precedence:y,parse:bn},{latexTrigger:"\\coloneqq",kind:"infix",associativity:"right",precedence:y,parse:bn},{name:"BaseForm",serialize:(e,t)=>{var n;let r=null!==(n=Ht(Pt(t,2)))&&void 0!==n?n:NaN;if(isFinite(r)&&r>=2&&r<=36){var i;let e=null!==(i=Ht(Pt(t,1)))&&void 0!==i?i:NaN;if(isFinite(e)&&Number.isInteger(e)){let t=Number(e).toString(r),n=0;if(2===r||10===r?n=4:16===r?n=2:r>16&&(n=4),n>0){let e=t;t="";for(let r=0;r<e.length;r++)r>0&&r%n===0&&(t="\\, "+t),t=e[e.length-r-1]+t}return"(\\text{".concat(t,"}_{").concat(r,"}")}}return"\\operatorname{BaseForm}("+e.serialize(Pt(t,1))+", "+e.serialize(Pt(t,2))+")"}},{name:"Sequence",serialize:hn(" ")},{name:"InvisibleOperator",serialize:hn("")},{name:"Delimiter",serialize:(e,t)=>{var n;let r=Pt(t,1),i=e.options.groupStyle(t,e.level+1),a=zt(r),o=null!==(n={Set:"{,}",List:"[,]",Tuple:"(,)",Single:"(,)",Pair:"(,)",Triple:"(,)",Sequence:"(,)",String:'""'}["string"==typeof a?a:""])&&void 0!==n?n:"(,)";if(jt(t)>1){let e=Lt(Pt(t,2));"string"==typeof e&&e.length<=3&&(o=e)}let[s,l,u]=["","",""];3===o.length?[s,l,u]=o:2===o.length?[s,u]=o:1===o.length&&(l=o);let c=r?It(r)?hn(l)(e,r):e.serialize(r):"";return e.wrapString(c,i,s+u)}},{name:"Domain",serialize:(e,t)=>"Error"===zt(t)?e.serialize(t):"\\mathbf{".concat(e.serialize(Pt(t,1)),"}")},{latexTrigger:["\\mathtip"],parse:e=>{let t=e.parseGroup();return e.parseGroup(),t}},{latexTrigger:["\\texttip"],parse:e=>{let t=e.parseGroup();return e.parseGroup(),t}},{latexTrigger:["\\error"],parse:e=>["Error",e.parseGroup()]},{name:"Error",serialize:(e,t)=>{var n;let r=Pt(t,1);if("missing"===Lt(r))return"\\error{".concat(null!==(n=e.options.missingSymbol)&&void 0!==n?n:"\\placeholder{}","}");let i=function(e,t){var n;let r=Pt(t,2);return r?"LatexString"===zt(r)?"\\texttt{".concat(gn(null!==(n=Lt(Pt(r,1)))&&void 0!==n?n:""),"}"):"Hold"===zt(r)?e.serialize(Pt(r,1)):e.serialize(r):""}(e,t)||"\\blacksquare",a="ErrorCode"===zt(r)?Lt(Pt(r,1)):Lt(r);return"incompatible-domain"===a?"Undefined"===Vt(Pt(r,3))?"\\mathtip{\\error{".concat(i,"}}{\\notin ").concat(e.serialize(Pt(r,2)),"}"):"\\mathtip{\\error{".concat(i,"}}{\\in ").concat(e.serialize(Pt(r,3)),"\\notin ").concat(e.serialize(Pt(r,2)),"}"):"\\error{".concat(i,"}")}},{name:"ErrorCode",serialize:(e,t)=>{var n;let r=Lt(Pt(t,1));return"missing"===r?null!==(n=e.options.missingSymbol)&&void 0!==n?n:"\\placeholder{}":"unexpected-command"===r||"unexpected-operator"===r||"unexpected-token"===r||"invalid-identifier"===r||"unknown-environment"===r||"unexpected-base"===r||"incompatible-domain"===r||"invalid-domain"===r?"":"\\texttip{\\error{\\blacksquare}}{\\mathtt{".concat(r,"}}")}},{name:"FromLatex",serialize:(e,t)=>"\\texttt{".concat(gn(Lt(Pt(t,1))),"}")},{name:"Latex",serialize:(e,t)=>null===t?"":yt(Zt(t,(t=>{var n;return null!==(n=Lt(t))&&void 0!==n?n:e.serialize(t)})))},{name:"LatexString",serialize:(e,t)=>null===t?"":yt(Zt(t,(t=>e.serialize(t))))},{name:"LatexTokens",serialize:function(e,t){return null===t?"":yt(Zt(t,(t=>{let n=Lt(t);return null===n?e.serialize(t):"<{>"===n?"{":"<}>"===n?"}":"<$>"===n?"$":"<$$>"===n?"$$":"<space>"===n?" ":n})))}},{name:"List",kind:"matchfix",openTrigger:"[",closeTrigger:"]",parse:function e(t,n){var r;if(null===n||Yt(n))return["List"];let i=zt(n);if("Range"===i||"Linspace"===i)return n;if("Sequence"===i)return["List",...null!==(r=It(n))&&void 0!==r?r:[]];if("Delimiter"===i){var a,o,s,l;let r=null!==(a=Lt(Pt(n,2)))&&void 0!==a?a:"...";if(";"===r||".;."===r)return["List",...(null!==(o=It(Pt(n,1)))&&void 0!==o?o:[]).map((n=>e(t,n)))];if(","===r||".,."===r)return"Sequence"===zt(n=Pt(n,1))?["List",...null!==(s=It(n))&&void 0!==s?s:[]]:["List",null!==(l=n)&&void 0!==l?l:["Sequence"]]}return["List",n]},serialize:(e,t)=>yt(["\\bigl\\lbrack",hn(", ")(e,t),"\\bigr\\rbrack"])},{kind:"matchfix",openTrigger:"(",closeTrigger:")",parse:function(e,t){var n;if(null===t||Yt(t))return["Delimiter"];let r=zt(t);if("Delimiter"===r&&Pt(t,2)){var i;let e=Lt(Pt(t,2));if(1===(null===e||void 0===e?void 0:e.length))return["Delimiter",null!==(i=Pt(t,1))&&void 0!==i?i:["Sequence"],{str:"(".concat(e,")")}]}return"Sequence"===r?0===jt(t)?["Delimiter"]:["Delimiter",t]:"Matrix"===r&&".."===(null!==(n=Lt(Pt(t,2)))&&void 0!==n?n:"..")?["Matrix",Pt(t,1)]:["Delimiter",["Sequence",t]]}},{latexTrigger:[","],kind:"infix",precedence:20,parse:(e,t,n)=>{let r=pn(e,n,t,20,",");return null===r?null:["Delimiter",["Sequence",...r],{str:","}]}},{latexTrigger:[","],kind:"prefix",precedence:20,parse:(e,t)=>{let n=pn(e,t,null,20,",");return null===n?null:["Delimiter",["Sequence",...n],{str:","}]}},{name:"Range",latexTrigger:[".","."],kind:"infix",precedence:10,parse:function(e,t){let n=e.index;if(!t)return null;let r=null,i=null;if("Sequence"===zt(t)){if(2!==jt(t))return null;if(r=Pt(t,1),i=Pt(t,2),null===i)return e.index=n,null}else r=Pt(t,1);if(null===r)return null;let a=e.parseExpression({minPrec:0});if(!a)return e.index=n,null;if(i){let e=Ht(i),t=Ht(r);return null!==e&&null!==t?["Range",r,a,e-t]:["Range",r,a,["Subtract",i,r]]}return["Range",r,a]},serialize:(e,t)=>{let n=It(t);if(null===n)return"";if(1===n.length)return"1.."+e.serialize(Pt(t,1));if(2===n.length)return e.wrap(Pt(t,1),10)+".."+e.wrap(Pt(t,2),10);if(3===n.length){let n=Ht(Pt(t,3)),r=Ht(Pt(t,1));return null!==n&&null!==r?e.wrap(Pt(t,1),10)+","+e.wrap(r+n,10)+".."+e.wrap(Pt(t,2),10):e.wrap(Pt(t,1),10)+","+e.wrap(Pt(t,3),x)+"+"+e.wrap(Pt(t,3),x)+".."+e.wrap(Pt(t,2),10)}return""}},{latexTrigger:[";"],kind:"infix",precedence:19,parse:(e,t,n)=>{let r=pn(e,n,t,19,";");return null===r?null:["Delimiter",["Sequence",...r],"';'"]}},{name:"String",latexTrigger:["\\text"],parse:e=>mn(e),serialize:(e,t)=>{let n=It(t);return null===n||0===n.length?"\\text{}":yt(["\\text{",n.map((t=>e.serialize(t))).join(""),"}"])}},{name:"Subscript",latexTrigger:["_"],kind:"infix",serialize:(e,t)=>2===jt(t)?e.serialize(Pt(t,1))+"_{"+e.serialize(Pt(t,2))+"}":"_{"+e.serialize(Pt(t,1))+"}"},{name:"Superplus",latexTrigger:["^","+"],kind:"postfix"},{name:"Subplus",latexTrigger:["_","+"],kind:"postfix"},{name:"Superminus",latexTrigger:["^","-"],kind:"postfix"},{name:"Subminus",latexTrigger:["_","-"],kind:"postfix"},{latexTrigger:["^","*"],kind:"postfix",parse:(e,t)=>["Superstar",t]},{latexTrigger:["_","*"],kind:"postfix",parse:(e,t)=>["Substar",t]},{name:"Substar",latexTrigger:["_","\\star"],kind:"postfix"},{name:"Superdagger",latexTrigger:["^","\\dagger"],kind:"postfix"},{latexTrigger:["^","\\dag"],kind:"postfix",parse:(e,t)=>["Superdagger",t]},{name:"Prime",latexTrigger:["^","\\prime"],kind:"postfix",parse:(e,t)=>vn(e,t,1),serialize:(e,t)=>{var n;let r=null!==(n=Ht(Pt(t,2)))&&void 0!==n?n:1,i=e.serialize(Pt(t,1));return 1===r?i+"^\\prime":2===r?i+"^\\doubleprime":3===r?i+"^\\tripleprime":i+"^{("+e.serialize(Pt(t,2))+")}"}},{latexTrigger:"^{\\prime\\prime}",kind:"postfix",parse:(e,t)=>vn(e,t,2)},{latexTrigger:"^{\\prime\\prime\\prime}",kind:"postfix",parse:(e,t)=>vn(e,t,3)},{latexTrigger:["^","\\doubleprime"],kind:"postfix",parse:(e,t)=>vn(e,t,2)},{latexTrigger:["^","\\tripleprime"],kind:"postfix",parse:(e,t)=>vn(e,t,3)},{latexTrigger:"'",kind:"postfix",precedence:810,parse:(e,t)=>vn(e,t,1)},{latexTrigger:"\\prime",kind:"postfix",precedence:810,parse:(e,t)=>vn(e,t,1)},{latexTrigger:"\\doubleprime",kind:"postfix",precedence:810,parse:(e,t)=>vn(e,t,2)},{latexTrigger:"\\tripleprime",kind:"postfix",precedence:810,parse:(e,t)=>vn(e,t,3)},{latexTrigger:["^","<{>","("],kind:"postfix",parse:(e,t)=>{var n;if(null===(n=e.computeEngine)||void 0===n||null===(n=n.box(t))||void 0===n||null===(n=n.domain)||void 0===n||!n.isFunction)return null;let r=e.index;e.addBoundary([")"]);let i=e.parseExpression();return e.matchBoundary()&&e.match("<}>")?["Derivative",t,i]:(e.index=r,null)}},{name:"InverseFunction",latexTrigger:"^{-1",kind:"postfix",parse:(e,t)=>{var n;if(null===(n=e.computeEngine)||void 0===n||null===(n=n.box(t))||void 0===n||null===(n=n.domain)||void 0===n||!n.isFunction)return null;let r=0,i=e.index;for(;!e.atEnd&&!e.match("<}>");)if(e.match("'"))r++;else if(e.match("\\prime"))r++;else if(e.match("\\doubleprime"))r+=2;else{if(!e.match("\\tripleprime"))return e.index=i,null;r+=3}return 1===r?["Derivative",["InverseFunction",t]]:r>0?["Derivative",["InverseFunction",t],r]:["InverseFunction",t]},serialize:(e,t)=>e.serialize(Pt(t,1))+"^{-1}"},{name:"Derivative",serialize:(e,t)=>{var n;let r=null!==(n=Ht(Pt(t,2)))&&void 0!==n?n:1,i=e.serialize(Pt(t,1));return 1===r?i+"^{\\prime}":2===r?i+"^{\\doubleprime}":3===r?i+"^{\\tripleprime}":i+"^{("+e.serialize(Pt(t,2))+")}"}},{kind:"environment",name:"Which",identifierTrigger:"cases",parse:xn,serialize:(e,t)=>{let n=[],r=It(t);if(r)for(let i=0;i<=r.length-2;i+=2){let t=[];t.push(e.serialize(r[i+1])),t.push(e.serialize(r[i])),n.push(t.join("&"))}return yt(["\\begin{cases}",n.join("\\\\"),"\\end{cases}"])}},{kind:"environment",identifierTrigger:"dcases",parse:xn},{kind:"environment",identifierTrigger:"rcases",parse:xn}];function mn(e,t){if(!e.match("<{>"))return"''";let n,r=[],i="",a=null;for(;!e.atEnd&&!e.match("<}>");)if("<{>"===e.peek)r.push(mn(e));else if(e.match("\\textbf")&&e.match("<{>"))r.push(mn(e,{"font-weight":"bold"}));else if(e.match("\\color")){let t=e.parseStringGroup();null!==t&&(null!==a&&i?r.push(["Style",i,{dict:a}]):i&&r.push(["String",i]),i="",a={color:t})}else if(e.match("<space>"))i+=" ";else if(e.match("<$>")){var o;let t=e.index,n=null!==(o=e.parseExpression())&&void 0!==o?o:["Sequence"];e.skipSpace(),e.match("<$>")?r.push(n):(i+="$",e.index=t)}else if(e.match("<$$>")){var s;let t=e.index,n=null!==(s=e.parseExpression())&&void 0!==s?s:["Sequence"];e.skipSpace(),e.match("<$$>")?r.push(n):(i+="$$",e.index=t)}else{var l,u;let t=null!==(l=e.matchChar())&&void 0!==l?l:e.nextToken();i+=null!==(u={"\\enskip":"\u2002","\\enspace":"\u2002","\\quad":"\u2003","\\qquad":"\u2003\u2003","\\space":"\u2003","\\ ":"\u2003","\\;":"\u2004","\\,":"\u2009","\\:":"\u205f","\\!":"","\\{":"{","\\}":"}","\\$":"$","\\&":"&","\\#":"#","\\%":"%","\\_":"_","\\textbackslash":"\\","\\textasciitilde":"~","\\textasciicircum":"^","\\textless":"<","\\textgreater":">","\\textbar":"|","\\textunderscore":"_","\\textbraceleft":"{","\\textbraceright":"}","\\textasciigrave":"`","\\textquotesingle":"'","\\textquotedblleft":"\u201c","\\textquotedblright":"\u201d","\\textquotedbl":'"',"\\textquoteleft":"\u2018","\\textquoteright":"\u2019","\\textbullet":"\u2022","\\textdagger":"\u2020","\\textdaggerdbl":"\u2021","\\textsection":"\xa7","\\textparagraph":"\xb6","\\textperiodcentered":"\xb7","\\textellipsis":"\u2026","\\textemdash":"\u2014","\\textendash":"\u2013","\\textregistered":"\xae","\\texttrademark":"\u2122","\\textdegree":"\xb0"}[t])&&void 0!==u?u:t}return null!==a&&i?r.push(["Style","'".concat(i,"'"),{dict:a}]):i&&r.push("'".concat(i,"'")),n=1===r.length?r[0]:r.every((e=>null!==Lt(e)))?"'"+r.map((e=>Lt(e))).join()+"'":["String",...r],t?["Style",n,{dict:t}]:n}function gn(e){return null===e?"":e.replace(/[{}\[\]\\:\-\$%]/g,(e=>{var t;return null!==(t={"{":"\\lbrace ","}":"\\rbrace ","[":"\\lbrack ","]":"\\rbrack ",":":"\\colon ","\\":"\\backslash "}[e])&&void 0!==t?t:"\\"+e}))}function vn(e,t,n){var r;let i=zt(t);if("Derivative"===i||"Prime"===i){var a;let e=null!==(a=Ht(Pt(t,2)))&&void 0!==a?a:1;return[i,Qt(Pt(t,1)),e+n]}return null!==(r=e.computeEngine)&&void 0!==r&&null!==(r=r.box(t))&&void 0!==r&&null!==(r=r.domain)&&void 0!==r&&r.isFunction?1===n?["Derivative",t]:["Derivative",t,n]:1===n?["Prime",Qt(t)]:["Prime",Qt(t),n]}var yn={"(":"(",")":")","[":"\\lbrack","]":"\\rbrack","\u27e6":"\\llbrack","\u27e7":"\\rrbrack","{":"\\lbrace","}":"\\rbrace","<":"\\langle",">":"\\rangle","\u2016":"\\Vert","\\":"\\backslash","\u2308":"\\lceil","\u2309":"\\rceil","\u230a":"\\lfloor","\u230b":"\\rfloor","\u231c":"\\ulcorner","\u231d":"\\urcorner","\u231e":"\\llcorner","\u231f":"\\lrcorner","\u23b0":"\\lmoustache","\u23b1":"\\rmoustache"};function bn(e,t){let n=e.index;if("InvisibleOperator"===zt(t)&&2===jt(t)&&"Delimiter"===zt(Pt(t,2))&&"Sequence"===zt(Pt(Pt(t,2),1))){let r=Vt(Pt(t,1));if(!r)return null;let i=It(Pt(Pt(t,2),1)),a=e.parseExpression({minPrec:0});return null===a?(e.index=n,null):["Assign",r,["Function",a,...null!==i&&void 0!==i?i:[]]]}if("string"==typeof zt(t)){var r;let i=zt(t),a=null!==(r=It(t))&&void 0!==r?r:[],o=e.parseExpression({minPrec:0});return null===o?(e.index=n,null):["Assign",i,["Function",o,...a]]}if(!Vt(t))return null;let i=e.parseExpression({minPrec:0});return null===i?(e.index=n,null):["Assign",t,i]}function xn(e){let t=e.parseTabular();if(!t)return["Which"];let n=["Which"];for(let i of t)if(1===i.length)n.push("True"),n.push(i[0]);else if(2===i.length){var r;let e=Lt(i[1]);n.push(e?"True":null!==(r=Ot(i[1]))&&void 0!==r?r:"True"),n.push(i[0])}return n}var Dn=[{latexTrigger:["\\not","<"],kind:"infix",associativity:"right",precedence:246,parse:"NotLess"},{name:"NotLess",latexTrigger:["\\nless"],kind:"infix",associativity:"right",precedence:246},{latexTrigger:["<"],kind:"infix",associativity:"right",precedence:245,parse:"Less"},{name:"Less",latexTrigger:["\\lt"],kind:"infix",associativity:"right",precedence:245},{latexTrigger:["<","="],kind:"infix",associativity:"right",precedence:241,parse:"LessEqual"},{name:"LessEqual",latexTrigger:["\\le"],kind:"infix",associativity:"right",precedence:241},{latexTrigger:["\\leq"],kind:"infix",associativity:"right",precedence:241,parse:"LessEqual"},{latexTrigger:["\\leqslant"],kind:"infix",associativity:"right",precedence:250,parse:"LessEqual"},{name:"LessNotEqual",latexTrigger:["\\lneqq"],kind:"infix",associativity:"right",precedence:v},{name:"NotLessNotEqual",latexTrigger:["\\nleqq"],kind:"infix",associativity:"right",precedence:v},{name:"LessOverEqual",latexTrigger:["\\leqq"],kind:"infix",associativity:"right",precedence:250},{name:"GreaterOverEqual",latexTrigger:["\\geqq"],kind:"infix",associativity:"right",precedence:250,parse:"GreaterEqual"},{name:"Equal",latexTrigger:["="],kind:"infix",associativity:"right",precedence:v},{latexTrigger:["*","="],kind:"infix",associativity:"right",precedence:v,parse:"StarEqual"},{name:"StarEqual",latexTrigger:["\\star","="],kind:"infix",associativity:"right",precedence:v},{name:"PlusEqual",latexTrigger:["+","="],kind:"infix",associativity:"right",precedence:v},{name:"MinusEqual",latexTrigger:["-","="],kind:"infix",associativity:"right",precedence:v},{name:"SlashEqual",latexTrigger:["/","="],kind:"infix",associativity:"right",precedence:v},{name:"EqualEqual",latexTrigger:["=","="],kind:"infix",associativity:"right",precedence:v},{name:"EqualEqualEqual",latexTrigger:["=","=","="],kind:"infix",associativity:"right",precedence:250},{name:"TildeFullEqual",latexTrigger:["\\cong"],kind:"infix",associativity:"right",precedence:v},{name:"NotTildeFullEqual",latexTrigger:["\\ncong"],kind:"infix",associativity:"right",precedence:v},{name:"Approx",latexTrigger:["\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"NotApprox",latexTrigger:["\\not","\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"ApproxEqual",latexTrigger:["\\approxeq"],kind:"infix",associativity:"right",precedence:v},{name:"NotApproxEqual",latexTrigger:["\\not","\\approxeq"],kind:"infix",associativity:"right",precedence:250},{name:"NotEqual",latexTrigger:["\\ne"],kind:"infix",associativity:"right",precedence:255},{name:"Unequal",latexTrigger:["!","="],kind:"infix",associativity:"right",precedence:v},{name:"GreaterEqual",latexTrigger:["\\ge"],kind:"infix",associativity:"right",precedence:242},{latexTrigger:["\\geq"],kind:"infix",associativity:"right",precedence:242,parse:"GreaterEqual"},{latexTrigger:[">","="],kind:"infix",associativity:"right",precedence:243,parse:"GreaterEqual"},{latexTrigger:["\\geqslant"],kind:"infix",associativity:"right",precedence:250,parse:"GreaterEqual"},{name:"GreaterNotEqual",latexTrigger:["\\gneqq"],kind:"infix",associativity:"right",precedence:v},{name:"NotGreaterNotEqual",latexTrigger:["\\ngeqq"],kind:"infix",associativity:"right",precedence:v},{latexTrigger:[">"],kind:"infix",associativity:"right",precedence:245,parse:"Greater"},{name:"Greater",latexTrigger:["\\gt"],kind:"infix",associativity:"right",precedence:245},{name:"NotGreater",latexTrigger:["\\ngtr"],kind:"infix",associativity:"right",precedence:244},{latexTrigger:["\\not",">"],kind:"infix",associativity:"right",precedence:244,parse:"NotGreater"},{name:"RingEqual",latexTrigger:["\\circeq"],kind:"infix",associativity:"right",precedence:v},{name:"TriangleEqual",latexTrigger:["\\triangleq"],kind:"infix",associativity:"right",precedence:v},{name:"DotEqual",latexTrigger:["\\doteq"],kind:"infix",associativity:"right",precedence:250},{name:"DotEqualDot",latexTrigger:["\\doteqdot"],kind:"infix",associativity:"right",precedence:250},{name:"FallingDotEqual",latexTrigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:250},{name:"RisingDotEqual",latexTrigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:250},{name:"QuestionEqual",latexTrigger:["\\questeq"],kind:"infix",associativity:"right",precedence:v},{name:"MuchLess",latexTrigger:["\\ll"],kind:"infix",associativity:"right",precedence:v},{name:"MuchGreater",latexTrigger:["\\gg"],kind:"infix",associativity:"right",precedence:v},{name:"Precedes",latexTrigger:["\\prec"],kind:"infix",associativity:"right",precedence:v},{name:"Succeeds",latexTrigger:["\\succ"],kind:"infix",associativity:"right",precedence:v},{name:"PrecedesEqual",latexTrigger:["\\preccurlyeq"],kind:"infix",associativity:"right",precedence:v},{name:"SucceedsEqual",latexTrigger:["\\curlyeqprec"],kind:"infix",associativity:"right",precedence:v},{name:"NotPrecedes",latexTrigger:["\\nprec"],kind:"infix",associativity:"right",precedence:v},{name:"NotSucceeds",latexTrigger:["\\nsucc"],kind:"infix",associativity:"right",precedence:v},{name:"Between",latexTrigger:["\\between"],kind:"infix",associativity:"right",precedence:250}],wn=[{name:"Matrix",serialize:(e,t)=>{var n;return Cn(e,null!==(n=It(Pt(t,1)))&&void 0!==n?n:[],Lt(Pt(t,2)),Lt(Pt(t,3)))}},{name:"Vector",serialize:(e,t)=>{var n;return Cn(e,(null!==(n=It(t))&&void 0!==n?n:[]).map((e=>["List",e])),Lt(Pt(t,2)),Lt(Pt(t,3)))}},{kind:"environment",identifierTrigger:"pmatrix",parse:e=>{let t=Sn(e),[n,r]=_n(e);return t?[n,r,{str:"()"},{str:t}]:[n,r]}},{kind:"environment",identifierTrigger:"bmatrix",parse:e=>{let t=Sn(e),[n,r]=_n(e);return t?[n,r,{str:"[]"},{str:t}]:[n,r,{str:"[]"}]}},{kind:"environment",identifierTrigger:"Bmatrix",parse:e=>{let t=Sn(e),[n,r]=_n(e);return t?[n,r,{str:"{}"},{str:t}]:[n,r,{str:"{}"}]}},{kind:"environment",identifierTrigger:"vmatrix",parse:e=>{let t=Sn(e),[n,r]=_n(e);return t?[n,r,{str:"||"},{str:t}]:[n,r,{str:"||"}]}},{kind:"environment",identifierTrigger:"Vmatrix",parse:e=>{let t=Sn(e),[n,r]=_n(e);return t?[n,r,{str:"\u2016\u2016"},{str:t}]:[n,r,{str:"\u2016\u2016"}]}},{kind:"environment",identifierTrigger:"smallmatrix",parse:e=>{let t=Sn(e),[n,r]=_n(e);return t?[n,r,{str:"()"},{str:t}]:[n,r]}},{kind:"environment",identifierTrigger:"array",parse:e=>{let t=Sn(e,!1),[n,r]=_n(e);return t?[n,r,{str:".."},{str:t}]:[n,r,{str:".."}]}},{kind:"environment",identifierTrigger:"matrix",parse:e=>{let t=Sn(e),[n,r]=_n(e);return t?[n,r,{str:".."},{str:t}]:[n,r,{str:".."}]}},{kind:"environment",identifierTrigger:"matrix*",parse:e=>{let t=Sn(e),[n,r]=_n(e);return t?[n,r,{str:".."},{str:t}]:[n,r,{str:".."}]}},{name:"ConjugateTranspose",kind:"postfix",latexTrigger:["^","\\star"]},{kind:"postfix",latexTrigger:["^","\\H"],parse:"ConjugateTranspose"},{kind:"postfix",latexTrigger:["^","\\dagger"],parse:(e,t)=>["ConjugateTranspose",t]},{kind:"postfix",latexTrigger:["^","\\ast"],parse:(e,t)=>["ConjugateTranspose",t]},{kind:"postfix",latexTrigger:["^","\\top"],parse:(e,t)=>["Transpose",t]},{kind:"postfix",latexTrigger:["^","\\intercal"],parse:(e,t)=>["Transpose",t]},{name:"Transpose",kind:"postfix",latexTrigger:["^","T"]},{name:"PseudoInverse",kind:"postfix",latexTrigger:["^","+"]},{name:"Trace",kind:"function",identifierTrigger:"tr"},{name:"Determinant",kind:"function",identifierTrigger:"det"}];function _n(e){let t=e.parseTabular();return t?["Matrix",["List",...t.map((e=>["List",...e]))]]:["",null]}function Sn(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=null===(t=e.parseStringGroup(n))||void 0===t?void 0:t.trim();if(!r)return"";let i="";for(let a of r)"c"===a&&(i+="="),"l"===a&&(i+="<"),"r"===a&&(i+=">"),"|"===a&&(i+="|"),":"===a&&(i+=":");return i}function Cn(e,t,n,r){var i,a,o;null!==(i=n)&&void 0!==i||(n="()");let[s,l]=["",""];"string"==typeof n&&2===n.length&&([s,l]=n);let u="";if(r)for(let f of r)"<"===f?u+="l":">"===f?u+="r":"="===f?u+="c":"|"===f?u+="|":":"===f&&(u+=":");let c=[];for(let f of null!==t&&void 0!==t?t:[]){let t=[];for(let n of null!==(d=It(f))&&void 0!==d?d:[]){var d;t.push(e.serialize(n))}c.push(t.join(" & "))}let p=c.join("\\\\\n"),h=u.length>0?"[".concat(u,"]"):"";return yt("("===s&&")"===l?["\\begin{pmatrix}",h,p,"\\end{pmatrix}"]:"["===s&&"]"===l?["\\begin{bmatrix}",h,p,"\\end{bmatrix}"]:"{"===s&&"}"===l?["\\begin{Bmatrix}",h,p,"\\end{Bmatrix}"]:"|"===s&&"|"===l?["\\begin{vmatrix}",h,p,"\\end{vmatrix}"]:"\u2016"===s&&"\u2016"===l?["\\begin{Vmatrix}",h,p,"\\end{Vmatrix}"]:"{"===s&&"."===l?["\\begin{dcases}",h,p,"\\end{dcases}"]:"."===s&&"}"===l?["\\begin{rcases}",h,p,"\\end{rcases}"]:u||"."!==s||"."!==l?["\\left",null!==(a=yn[s])&&void 0!==a?a:s,"\\begin{array}","{".concat(u,"}"),p,"\\end{array}","\\right",null!==(o=yn[l])&&void 0!==o?o:l]:["\\begin{matrix}",p,"\\end{matrix}"])}var En=[{name:"True",kind:"symbol",latexTrigger:["\\top"]},{kind:"symbol",latexTrigger:"\\mathrm{True}",parse:"True"},{kind:"symbol",latexTrigger:"\\operator{True}",parse:"True"},{kind:"symbol",latexTrigger:"\\mathsf{T}",parse:"True"},{name:"False",kind:"symbol",latexTrigger:["\\bot"]},{kind:"symbol",latexTrigger:"\\operator{False}",parse:"False"},{kind:"symbol",latexTrigger:"\\mathsf{F}",parse:"False"},{name:"And",kind:"infix",latexTrigger:["\\land"],precedence:317},{kind:"infix",latexTrigger:["\\wedge"],parse:"And",precedence:317},{kind:"infix",latexTrigger:"\\&",parse:"And",precedence:317},{kind:"infix",latexTrigger:"\\operatorname{and}",parse:"And",precedence:317},{name:"Or",kind:"infix",latexTrigger:["\\lor"],precedence:310},{kind:"infix",latexTrigger:["\\vee"],parse:"Or",precedence:310},{kind:"infix",latexTrigger:"\\parallel",parse:"Or",precedence:310},{kind:"infix",latexTrigger:"\\operatorname{or}",parse:"Or",precedence:310},{name:"Xor",kind:"infix",latexTrigger:["\\veebar"],precedence:315},{name:"Not",kind:"prefix",latexTrigger:["\\lnot"],precedence:880},{name:"Nand",kind:"infix",latexTrigger:["\\barwedge"],precedence:315},{name:"Nor",kind:"infix",latexTrigger:["\u22bd"],precedence:315},{kind:"function",identifierTrigger:"and",parse:"And"},{kind:"function",identifierTrigger:"or",parse:"Or"},{kind:"function",identifierTrigger:"not",parse:"Not"},{name:"Implies",kind:"infix",precedence:220,associativity:"right",latexTrigger:["\\implies"],serialize:"\\implies"},{latexTrigger:["\\Rightarrow"],kind:"infix",precedence:220,associativity:"right",parse:"Implies"},{name:"Equivalent",latexTrigger:["\\iff"],kind:"infix",associativity:"right",precedence:219},{latexTrigger:["\\Leftrightarrow"],kind:"infix",associativity:"right",precedence:219,parse:"Equivalent"},{latexTrigger:["\\equiv"],kind:"infix",associativity:"right",precedence:219,parse:(e,t,n)=>{let r=e.parseExpression(l(l({},n),{},{minPrec:219})),i=e.index,a=e.parseExpression(l(l({},n),{},{minPrec:219}));return a&&"Mod"===zt(a)?["Congruent",t,r,Qt(Pt(a,1))]:(e.index=i,["Equivalent",t,Qt(r)])}},{name:"Proves",kind:"infix",latexTrigger:["\\vdash"],precedence:220,associativity:"right",serialize:"\\vdash"},{name:"Entails",kind:"infix",latexTrigger:["\\vDash"],precedence:220,associativity:"right",serialize:"\\vDash"},{name:"Satisfies",kind:"infix",latexTrigger:["\\models"],precedence:220,associativity:"right",serialize:"\\models"}];function kn(e){return t=>{let n=t.parseGroup();return null===n?[e]:[e,n]}}var An=[{name:"Overscript",latexTrigger:["\\overset"],kind:"infix",precedence:700},{name:"Underscript",latexTrigger:["\\underset"],kind:"infix",precedence:700},{name:"Increment",latexTrigger:["+","+"],kind:"postfix",precedence:880},{name:"Decrement",latexTrigger:["-","-"],kind:"postfix",precedence:880},{name:"PreIncrement",latexTrigger:["+","+"],kind:"prefix",precedence:880},{name:"PreDecrement",latexTrigger:["-","-"],kind:"prefix",precedence:880},{name:"Ring",latexTrigger:["\\circ"],kind:"infix",precedence:265},{name:"StringJoin",latexTrigger:["\\lt","\\gt"],kind:"infix",precedence:780},{name:"Starstar",latexTrigger:["\\star","\\star"],kind:"infix",precedence:780},{name:"PartialDerivative",latexTrigger:["\\partial"],kind:"prefix",parse:e=>{var t;let n=!1,r="Nothing",i="Nothing";for(;!n;){var a,o;e.skipSpace(),e.match("_")?i=null!==(a=e.parseGroup())&&void 0!==a?a:e.parseToken():e.match("^")?r=null!==(o=e.parseGroup())&&void 0!==o?o:e.parseToken():n=!0}let s=Xt(i);if(s&&(i=["List",...s]),null===i||null===r)return null;let l=null!==(t=e.parseGroup())&&void 0!==t?t:"Nothing";if("Nothing"!==l&&!Yt(l)){var u;l=[l,...null!==(u=e.parseArguments())&&void 0!==u?u:["Nothing"]]}return["PartialDerivative",l,i,r]},serialize:(e,t)=>{var n;let r="\\partial",i=Pt(t,1),a=Pt(t,2),o=Pt(t,3);return null!==a&&"Nothing"!==a&&("List"===zt(a)?r+="_{"+e.serialize(["Sequence",...null!==(n=It(a))&&void 0!==n?n:[]])+"}":r+="_{"+e.serialize(a)+"}"),null!==o&&"Nothing"!==o&&(r+="^{"+e.serialize(o)+"}"),null!==i&&"Nothing"!==i&&(r+=e.serialize(i)),r},precedence:740},{name:"OverBar",latexTrigger:["\\overline"],parse:kn("OverBar")},{name:"UnderBar",latexTrigger:["\\underline"],parse:kn("UnderBar")},{name:"OverVector",latexTrigger:["\\vec"],parse:kn("OverVector")},{name:"OverTilde",latexTrigger:["\\tilde"],parse:kn("OverTilde")},{name:"OverHat",latexTrigger:["\\hat"],parse:kn("OverHat")},{name:"OverRightArrow",latexTrigger:["\\overrightarrow"],parse:kn("OverRightArrow")},{name:"OverLeftArrow",latexTrigger:["\\overleftarrow"],parse:kn("OverLeftArrow")},{name:"OverRightDoubleArrow",latexTrigger:["\\Overrightarrow"],parse:kn("OverRightDoubleArrow")},{name:"OverLeftHarpoon",latexTrigger:["\\overleftharpoon"],parse:kn("OverLeftHarpoon")},{name:"OverRightHarpoon",latexTrigger:["\\overrightharpoon"],parse:kn("OverRightHarpoon")},{name:"OverLeftRightArrow",latexTrigger:["\\overleftrightarrow"],parse:kn("OverLeftRightArrow")},{name:"OverBrace",latexTrigger:["\\overbrace"],parse:kn("OverBrace")},{name:"OverLineSegment",latexTrigger:["\\overlinesegment"],parse:kn("OverLineSegment")},{name:"OverGroup",latexTrigger:["\\overgroup"],parse:kn("OverGroup")},{latexTrigger:["\\displaystyle"],parse:()=>["Sequence"]},{latexTrigger:["\\textstyle"],parse:()=>["Sequence"]},{latexTrigger:["\\scriptstyle"],parse:()=>["Sequence"]},{latexTrigger:["\\scriptscriptstyle"],parse:()=>["Sequence"]},{latexTrigger:["\\tiny"],parse:()=>["Sequence"]},{latexTrigger:["\\scriptsize"],parse:()=>["Sequence"]},{latexTrigger:["\\footnotesize"],parse:()=>["Sequence"]},{latexTrigger:["\\small"],parse:()=>["Sequence"]},{latexTrigger:["\\normalsize"],parse:()=>["Sequence"]},{latexTrigger:["\\large"],parse:()=>["Sequence"]},{latexTrigger:["\\Large"],parse:()=>["Sequence"]},{latexTrigger:["\\LARGE"],parse:()=>["Sequence"]},{latexTrigger:["\\huge"],parse:()=>["Sequence"]},{latexTrigger:["\\Huge"],parse:()=>["Sequence"]},{name:"Style",serialize:(e,t)=>{let n=e.serialize(Pt(t,1)),r=$t(Pt(t,2));if(null===r)return n;"block"===Lt(r.display)?n=yt(["{\\displaystyle",n,"}"]):"inline"===Lt(r.display)?n=yt(["{\\textstyle",n,"}"]):"script"===Lt(r.display)?n=yt(["{\\scriptstyle",n,"}"]):"scriptscript"===Lt(r.display)&&(n=yt(["{\\scriptscriptstyle",n,"}"]));let i=Ht(r.size);return null!==i&&i>=1&&i<=10&&(n=yt(["{",{1:"\\tiny",2:"\\scriptsize",3:"\\footnotesize",4:"\\small",5:"\\normalsize",6:"\\large",7:"\\Large",8:"\\LARGE",9:"\\huge",10:"\\Huge"}[i],n,"}"])),n}},{latexTrigger:["\\!"],parse:()=>["HorizontalSpacing",-3]},{latexTrigger:["\\ "],parse:()=>["HorizontalSpacing",6]},{latexTrigger:["\\:"],parse:()=>["HorizontalSpacing",4]},{latexTrigger:["\\enskip"],parse:()=>["HorizontalSpacing",9]},{latexTrigger:["\\quad"],parse:()=>["HorizontalSpacing",18]},{latexTrigger:["\\qquad"],parse:()=>["HorizontalSpacing",36]},{latexTrigger:["\\,"],parse:()=>["HorizontalSpacing",3]},{latexTrigger:["\\;"],parse:()=>["HorizontalSpacing",5]},{latexTrigger:["\\enspace"],parse:()=>["HorizontalSpacing",9]},{name:"HorizontalSpacing",serialize:(e,t)=>{var n;if(Pt(t,2))return e.serialize(Pt(t,1));let r=Ht(Pt(t,1));return null===r?"":null!==(n={"-3":"\\!",6:"\\ ",3:"\\,",4:"\\:",5:"\\;",9:"\\enspace",18:"\\quad",36:"\\qquad"}[r])&&void 0!==n?n:""}}];function Nn(e){return(t,n)=>{var r,i,a;let o=null!==(r=null!==(i={"\\arcsin":"Arcsin","\\arccos":"Arccos","\\arctan":"Arctan","\\arctg":"Arctan","\\arcctg":"Arctan","\\arcsec":"Arcsec","\\arccsc":" Arccsc","\\arsinh":"Arsinh","\\arcosh":"Arcosh","\\artanh":"Artanh","\\arcsech":"Arcsech","\\arccsch":"Arcsch","\\ch":"Cosh","\\cos":"Cos","\\cosec":"Csc","\\cosh":"Csch","\\cot":"Cot","\\cotg":"Cot","\\coth":"Coth","\\csc":"Csc","\\ctg":"Cot","\\cth":"Coth","\\sec":"Sec","\\sin":"Sin","\\sinh":"Sinh","\\sh":"Sinh","\\tan":"Tan","\\tanh":"Tanh","\\tg":"Tan","\\th":"Tanh"}[null!==e&&void 0!==e?e:""])&&void 0!==i?i:e)&&void 0!==r?r:"";if(t.atTerminator(n))return o;let s=o;for(;;){let e=t.parsePostfixOperator(s,n);if(null===e)break;s=e}let l=null;t.match("^")&&(l=null!==(a=t.parseGroup())&&void 0!==a?a:t.parseToken());let u=t.parseArguments("implicit",n),c=null===u?s:"string"==typeof s?[s,...u]:["Apply",s,...u];return null===l?c:["Power",c,l]}}var Mn=[{name:"Arcsin",latexTrigger:["\\arcsin"],parse:Nn("Arcsin")},{name:"Arccos",latexTrigger:["\\arccos"],parse:Nn("Arccos")},{name:"Arctan",latexTrigger:["\\arctan"],parse:Nn("Arctan")},{latexTrigger:["\\arctg"],parse:Nn("Arctan")},{name:"Arccot",latexTrigger:["\\arcctg"],parse:Nn("Arccot")},{name:"Arcsec",latexTrigger:"arcsec",parse:Nn("Arcsec")},{name:"Arccsc",latexTrigger:["\\arccsc"],parse:Nn("Arccsc")},{name:"Arsinh",latexTrigger:["\\arsinh"],parse:Nn("Arsinh")},{name:"Arcosh",latexTrigger:["\\arcosh"],parse:Nn("Arcosh")},{name:"Artanh",latexTrigger:["\\artanh"],parse:Nn("Artanh")},{name:"Arsech",latexTrigger:["\\arsech"],parse:Nn("Arsech")},{name:"Arcsch",latexTrigger:["\\arcsch"],parse:Nn("Arcsch")},{latexTrigger:["\\ch"],parse:Nn("Cosh")},{name:"Cosec",latexTrigger:["\\cosec"],parse:Nn("Cosec")},{name:"Cosh",latexTrigger:["\\cosh"],parse:Nn("Cosh")},{name:"Cot",latexTrigger:["\\cot"],parse:Nn("Cot")},{latexTrigger:["\\cotg"],parse:Nn("Cot")},{name:"Coth",latexTrigger:["\\coth"],parse:Nn("Coth")},{name:"Csc",latexTrigger:["\\csc"],parse:Nn("Csc")},{latexTrigger:["\\ctg"],parse:Nn("Cot")},{latexTrigger:["\\cth"],parse:Nn("Cotanh")},{name:"Sec",latexTrigger:["\\sec"],parse:Nn("Sec")},{name:"Sinh",latexTrigger:["\\sinh"],parse:Nn("Sinh")},{latexTrigger:["\\sh"],parse:Nn("Sinh")},{name:"Tan",latexTrigger:["\\tan"],parse:Nn("Tan")},{latexTrigger:["\\tg"],parse:Nn("Tan")},{name:"Tanh",latexTrigger:["\\tanh"],parse:Nn("Tanh")},{latexTrigger:["\\th"],parse:Nn("Tanh")},{name:"Cos",latexTrigger:["\\cos"],parse:Nn("Cos")},{name:"Sin",latexTrigger:["\\sin"],parse:Nn("Sin")}],Fn=[{name:"AlgebraicNumbers",latexTrigger:"\\bar\\Q"},{name:"ComplexNumbers",latexTrigger:["\\C"]},{latexTrigger:"\\mathbb{C}",parse:"ComplexNumbers"},{name:"ImaginaryNumbers",latexTrigger:["\\imaginaryI","\\R"]},{name:"ExtendedComplexNumbers",latexTrigger:["\\bar","\\C"]},{name:"EmptySet",latexTrigger:["\\emptyset"]},{latexTrigger:["\\varnothing"],parse:"EmptySet"},{name:"Integers",latexTrigger:["\\Z"]},{latexTrigger:"\\mathbb{Z}",parse:"Integers"},{name:"RationalNumbers",latexTrigger:["\\Q"]},{name:"RealNumbers",latexTrigger:["\\R"]},{latexTrigger:"\\mathbb{R}",parse:"RealNumbers"},{name:"ExtendedRealNumbers",latexTrigger:["\\bar","\\R"]},{name:"TranscendentalNumberss",latexTrigger:"\\R-\\bar\\Q"},{latexTrigger:"\\R\\backslash\\bar\\Q",parse:"TranscendentalNumbers"},{name:"NegativeNumbers",latexTrigger:"\\R^-"},{latexTrigger:"\\R^{-}",parse:"NegativeNumbers"},{latexTrigger:"\\R_-",parse:"NegativeNumbers"},{latexTrigger:"\\R_{-}",parse:"NegativeNumbers"},{latexTrigger:"\\R^{\\lt}",parse:"NegativeNumbers"},{name:"PositiveNumbers",latexTrigger:"\\R^+"},{latexTrigger:"\\R^{+}",parse:"PositiveNumbers"},{latexTrigger:"\\R_+",parse:"PositiveNumbers"},{latexTrigger:"\\R_{+}",parse:"PositiveNumbers"},{latexTrigger:"\\R^{\\gt}",parse:"PositiveNumbers"},{name:"NonPositiveNumbers",latexTrigger:"\\R^{0-}"},{latexTrigger:"\\R^{-0}",parse:"NonPositiveNumbers"},{latexTrigger:"\\R^{\\leq}",parse:"NonPositiveNumbers"},{name:"NegativeIntegers",latexTrigger:"\\Z^-"},{latexTrigger:"\\Z^-",parse:"NegativeIntegers"},{latexTrigger:"\\Z^{-}",parse:"NegativeIntegers"},{latexTrigger:"\\Z_-",parse:"NegativeIntegers"},{latexTrigger:"\\Z_{-}",parse:"NegativeIntegers"},{latexTrigger:"\\Z^{\\lt}",parse:"NegativeIntegers"},{name:"PositiveIntegers",latexTrigger:"\\Z^+"},{latexTrigger:"\\Z^{+}",parse:"PositiveIntegers"},{latexTrigger:"\\Z_+",parse:"PositiveIntegers"},{latexTrigger:"\\Z_{+}",parse:"PositiveIntegers"},{latexTrigger:"\\Z^{\\gt}",parse:"PositiveIntegers"},{latexTrigger:"\\Z^{\\gt0}",parse:"PositiveIntegers"},{latexTrigger:"\\N^+",parse:"PositiveIntegers"},{latexTrigger:"\\N^{+}",parse:"PositiveIntegers"},{latexTrigger:"\\N^*",parse:"PositiveIntegers"},{latexTrigger:"\\N^{*}",parse:"PositiveIntegers"},{latexTrigger:"\\N^\\star",parse:"PositiveIntegers"},{latexTrigger:"\\N^{\\star}",parse:"PositiveIntegers"},{latexTrigger:"\\N_1",parse:"PositiveIntegers"},{latexTrigger:"\\N_{1}",parse:"PositiveIntegers"},{name:"NonNegativeIntegers",latexTrigger:["\\N"]},{latexTrigger:"\\Z^{+0}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{\\geq}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{\\geq0}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{0+}",parse:"NonNegativeIntegers"},{latexTrigger:"\\mathbb{N}",parse:"NonNegativeIntegers"},{latexTrigger:"\\N_0",parse:"NonNegativeIntegers"},{latexTrigger:"\\N_{0}",parse:"NonNegativeIntegers"},{name:"CartesianProduct",latexTrigger:["\\times"],kind:"infix",associativity:"right",precedence:390,parse:(e,t,n)=>{if(390<n.minPrec)return null;let r=e.computeEngine;if(!r||!r.box(t).domain.isCompatible("Sets"))return null;let i=e.index,a=e.parseExpression(l(l({},n),{},{minPrec:390}));return null===a||!0!==r.box(t).domain.isCompatible("Sets")?(e.index=i,null):["CartesianProduct",t,a]}},{latexTrigger:["^","\\complement"],kind:"postfix",parse:(e,t)=>["Complement",t]},{name:"Complement",latexTrigger:["^","<{>","\\complement","<}>"],kind:"postfix"},{name:"Intersection",latexTrigger:["\\cap"],kind:"infix",precedence:350},{name:"Interval",serialize:Tn},{name:"Multiple",serialize:Tn},{name:"Union",latexTrigger:["\\cup"],kind:"infix",precedence:350},{name:"Set",kind:"matchfix",openTrigger:"{",closeTrigger:"}",precedence:20,parse:(e,t)=>{var n;return null===t||Yt(t)?"EmptySet":("Delimiter"==zt(t)&&","===Lt(Pt(t,2))&&(t=Pt(t,1)),"Sequence"!==zt(t)?["Set",t]:["Set",...null!==(n=It(t))&&void 0!==n?n:[]])},serialize:(e,t)=>{var n;return yt(["\\lbrace",(null!==(n=It(t))&&void 0!==n?n:[]).map((t=>e.serialize(t))).join(", "),"\\rbrace"])}},{name:"SetMinus",latexTrigger:["\\setminus"],kind:"infix",precedence:650},{name:"SymmetricDifference",latexTrigger:["\\triangle"],kind:"infix",precedence:v},{latexTrigger:["\\ni"],kind:"infix",associativity:"right",precedence:160,parse:(e,t,n)=>{let r=e.parseExpression(n);return null===r?null:["Element",r,t]}},{name:"Element",latexTrigger:["\\in"],kind:"infix",precedence:240},{name:"NotElement",latexTrigger:["\\notin"],kind:"infix",precedence:240},{name:"NotSubset",latexTrigger:["\\nsubset"],kind:"infix",associativity:"right",precedence:240},{name:"NotSuperset",latexTrigger:["\\nsupset"],kind:"infix",associativity:"right",precedence:240},{name:"NotSubsetNotEqual",latexTrigger:["\\nsubseteq"],kind:"infix",associativity:"right",precedence:240},{name:"NotSupersetNotEqual",latexTrigger:["\\nsupseteq"],kind:"infix",associativity:"right",precedence:240},{name:"SquareSubset",latexTrigger:["\\sqsubset"],kind:"infix",associativity:"right",precedence:265},{name:"SquareSubsetEqual",latexTrigger:["\\sqsubseteq"],kind:"infix",associativity:"right",precedence:265},{name:"SquareSuperset",latexTrigger:["\\sqsupset"],kind:"infix",associativity:"right",precedence:265},{name:"SquareSupersetEqual",latexTrigger:["\\sqsupseteq"],kind:"infix",associativity:"right",precedence:265},{name:"Subset",latexTrigger:["\\subset"],kind:"infix",associativity:"right",precedence:240},{latexTrigger:["\\subsetneq"],kind:"infix",associativity:"right",precedence:240,parse:"Subset"},{latexTrigger:["\\varsubsetneqq"],kind:"infix",associativity:"right",precedence:240,parse:"Subset"},{name:"SubsetEqual",latexTrigger:["\\subseteq"],kind:"infix",precedence:240},{name:"Superset",latexTrigger:["\\supset"],kind:"infix",associativity:"right",precedence:240},{latexTrigger:["\\supsetneq"],kind:"infix",associativity:"right",precedence:240,parse:"Superset"},{latexTrigger:["\\varsupsetneq"],kind:"infix",associativity:"right",precedence:240,parse:"Superset"},{name:"SupersetEqual",latexTrigger:["\\supseteq"],kind:"infix",associativity:"right",precedence:240}];function Tn(e,t){var n;if(null===t)return"";let r=zt(t);if(null===r)return"";if("Set"===r)return 0===jt(t)?"\\emptyset":2===jt(t)&&"Condition"===zt(Pt(t,2))?yt(["\\left\\lbrace",e.serialize(Pt(t,1)),"\\middle\\mid",e.serialize(Pt(t,2)),"\\right\\rbrace"]):yt(["\\left\\lbrace",...(null!==(n=It(t))&&void 0!==n?n:[]).map((t=>e.serialize(t)+" ,")),"\\right\\rbrace"]);if("Range"===r)return yt(["\\mathopen\\lbrack",e.serialize(Pt(t,1)),", ",e.serialize(Pt(t,2)),"\\mathclose\\rbrack"]);if("Interval"===r){let n=Pt(t,1),r=Pt(t,2),i=!1,a=!1;return"Open"===zt(n)&&(n=Pt(n,1),i=!0),"Open"===zt(r)&&(r=Pt(r,1),a=!0),yt(["\\mathopen".concat(i?"\\rbrack":"\\lbrack"),e.serialize(n),", ",e.serialize(r),"\\mathclose".concat(a?"\\lbrack":"\\rbrack")])}e.numericSetStyle(t,e.level);return""}function Bn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n=>{n.skipSpace();let r=null,i=null;for(;(null===i||null===r)&&("_"===n.peek||"^"===n.peek);){var a,o;n.match("_")?i=null!==(a=n.parseGroup())&&void 0!==a?a:n.parseToken():n.match("^")&&(r=null!==(o=n.parseGroup())&&void 0!==o?o:n.parseToken()),n.skipSpace()}("Nothing"===i||Yt(i))&&(i=null),("Nothing"===r||Yt(r))&&(r=null);let[s,l]=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.index,i=!1,a=e.parseExpression({minPrec:266,condition:()=>((e.matchAll(["\\mathrm","<{>","d","<}>"])||e.matchAll(["\\operatorname","<{>","d","<}>"]))&&(i=!0),i)});if(i||(e.index=r,a=e.parseExpression({minPrec:266,condition:()=>(e.match("d")&&(i=!0),i)})),a&&!i)return On(a);let o=function(e){e.skipSpace();let t=[],n=Vt(e.parseSymbol());return null===n?[]:(t.push(n),t)}(e,n);return[a,null!==(t=o[0])&&void 0!==t?t:null]}(n,t);if(s&&!l)if("Add"===zt(s)||"Subtract"===zt(s)){let t=[],a=[];for(let e of null!==(u=It(s))&&void 0!==u?u:[]){var u;if(l)a.push(e);else{var c;let n;[n,l]=On(e),t.push(null!==(c=n)&&void 0!==c?c:e)}}if(null!==l&&a.length>0)return["Add",Ln(n,e,["Add",...t],[{index:l,sub:i,sup:r}]),...a]}else if("Divide"===zt(s)){let e;[e,l]=On(Pt(s,1)),null!==e&&null!==l&&(s=["Divide",e,Pt(s,2)])}return Ln(n,e,s,[{index:l,sub:i,sup:r}])}}function Ln(e,t,n,r){var i;if(n&&0===r.length)return[t,n];if(null!==(i=n)&&void 0!==i||(n="Nothing"),e.computeEngine){let t=e.computeEngine,i=!1,a={};for(let e of r)e.index&&(i=!0,a[e.index]={domain:"ExtendedRealNumbers"});i&&t.pushScope().declare(a),n=t.box(n).json,i&&t.popScope()}return[t,n,...r.map((e=>function(e){var t;let n=e.index?["Hold",e.index]:"Nothing";return null!==e.sup?["Tuple",n,null!==(t=e.sub)&&void 0!==t?t:"Nothing",e.sup]:null!==e.sub?["Tuple",n,e.sub]:n}(e)))]}function On(e){let t=zt(e),n=Pt(e,1);if(!n)return[e,null];if("Sequence"===t&&1===jt(e))return On(n);if("Multiply"===t||"InvisibleOperator"===t){let t=It(e);if(t&&t.length>1){let e=Vt(t[t.length-2]);if("d"===e||"d_upright"===e)return 2===t.length?[null,Vt(t[1])]:3===t.length?[t[0],Vt(t[2])]:[["Multiply",...t.slice(0,-2)],Vt(t[t.length-1])];let[n,r]=On(t[t.length-1]);if(n)return[["Multiply",...t.slice(0,-1),n],r]}}else if("Delimiter"===t){let[t,r]=On(n);if(r)return t?[["Delimiter",["Sequence",t],...It(e).slice(1)],r]:[null,r]}else if("Add"===t){let t=It(e);if(t&&t.length>0){let[e,n]=On(t[t.length-1]);if(n){if(e)return[["Add",...t.slice(0,-1),e],n];if(t.length>2)return[["Add",...t.slice(0,-1)],n];if(t.length>2)return[t[0],n]}}}else if("Negate"===t){let[e,t]=On(n);if(t)return[e?["Negate",e]:null,t]}else if("Divide"===t){let[t,r]=On(n);if(r)return[["Divide",null!==t&&void 0!==t?t:1,Pt(e,2)],r]}else{let t=It(e);if(1===(null===t||void 0===t?void 0:t.length)){let[n,r]=On(t[0]);if(r)return[[zt(e),n],r]}}return[e,null]}function zn(e){return(t,n)=>{var r;if(!Pt(n,1))return e;let i=Pt(n,2),a=zt(i),o=null;"Tuple"===a||"Triple"===a||"Pair"===a||"Single"===a||"Hold"===a?o=Pt(i,1):(o=null!==(r=Pt(i,1))&&void 0!==r?r:"x",i=null),"Hold"===zt(o)&&(o=Pt(o,1));let s=null!==o?Vt(o):null,l=Pt(n,1);if("Lambda"===zt(l)&&Pt(l,1)&&(l=Gt(Pt(l,1),{_:null!==s&&void 0!==s?s:"x",_1:null!==s&&void 0!==s?s:"x"})),!i)return yt(s&&"Nothing"!==s?[e,"\\!",t.serialize(l),"\\,\\operatorname{d}",t.serialize(s)]:[e,"\\!",t.serialize(l)]);let u=Pt(i,2)?Vt(Pt(i,2)):null,c=i&&"Nothing"!==u?t.serialize(Pt(i,2)):"";c.length>0&&(c="_{".concat(c,"}"));let d="",p=Pt(i,3)?Vt(Pt(i,3)):null;return Pt(i,3)&&"Nothing"!==p&&(d="^{".concat(t.serialize(Pt(i,3)),"}")),yt([e,d,c,"\\!",t.serialize(l),...s&&"Nothing"!==Vt(s)?["\\,\\operatorname{d}",t.serialize(s)]:[]])}}var In=[{kind:"expression",name:"Integrate",latexTrigger:["\\int"],parse:Bn("Integrate"),serialize:zn("\\int")},{kind:"expression",latexTrigger:["\\iint"],parse:Bn("Integrate",2)},{kind:"expression",latexTrigger:["\\iiint"],parse:Bn("Integrate",3)},{kind:"expression",name:"CircularIntegrate",latexTrigger:["\\oint"],parse:Bn("CircularIntegrate"),serialize:zn("\\oint")},{kind:"expression",latexTrigger:["\\oiint"],parse:Bn("CircularIntegrate",2)},{kind:"expression",latexTrigger:["\\oiiint"],parse:Bn("CircularIntegrate",3)}],Pn=[["alpha","\\alpha",945],["beta","\\beta",946],["gamma","\\gamma",947],["delta","\\delta",948],["epsilon","\\epsilon",949],["epsilonSymbol","\\varepsilon",1013],["zeta","\\zeta",950],["eta","\\eta",951],["theta","\\theta",952],["thetaSymbol","\\vartheta",977],["iota","\\iota",953],["kappa","\\kappa",954],["kappaSymbol","\\varkappa",1008],["lambda","\\lambda",955],["mu","\\mu",956],["nu","\\nu",957],["xi","\\xi",958],["omicron","\\omicron",959],["pi","\\pi",960],["piSymbol","\\varpi",982],["rho","\\rho",961],["rhoSymbol","\\varrho",1009],["sigma","\\sigma",963],["finalSigma","\\varsigma",962],["tau","\\tau",964],["phi","\\phi",981],["phiLetter","\\varphi",966],["upsilon","\\upsilon",965],["chi","\\chi",967],["psi","\\psi",968],["omega","\\omega",969],["Alpha","\\Alpha",913],["Beta","\\Beta",914],["Gamma","\\Gamma",915],["Delta","\\Delta",916],["Epsilon","\\Epsilon",917],["Zeta","\\Zeta",918],["Eta","\\Eta",919],["Theta","\\Theta",920],["Iota","\\Iota",921],["Kappa","\\Kappa",922],["Lambda","\\Lambda",923],["Mu","\\Mu",924],["Nu","\\Nu",925],["Xi","\\Xi",926],["Omicron","\\Omicron",927],["Rho","\\Rho",929],["Sigma","\\Sigma",931],["Tau","\\Tau",932],["Phi","\\Phi",934],["Upsilon","\\Upsilon",933],["Chi","\\Chi",935],["Psi","\\Psi",936],["Omega","\\Omega",937],["digamma","\\digamma",989],["aleph","\\aleph",8501],["bet","\\beth",8502],["gimel","\\gimel",8503],["dalet","\\daleth",8504],["ell","\\ell",8499],["turnedCapitalF","\\Finv",8498],["turnedCapitalG","\\Game",8513],["weierstrass","\\wp",8472],["eth","\\eth",240],["invertedOhm","\\mho",8487],["hBar","\\hbar",295],["hSlash","\\hslash",8463],["blackClubSuit","\\clubsuit",9827],["whiteHeartSuit","\\heartsuit",9825],["blackSpadeSuit","\\spadesuit",9824],["whiteDiamondSuit","\\diamondsuit",9826],["sharp","\\sharp",9839],["flat","\\flat",9837],["natural","\\natural",9838]],qn=[...Pn.map((e=>{let[t,n,r]=e;return{kind:"symbol",name:t,latexTrigger:[n],parse:t}})),...Pn.map((e=>{let[t,n,r]=e;return{kind:"symbol",latexTrigger:[String.fromCodePoint(r)],parse:t}}))],Rn=[{name:"Mean",kind:"function",identifierTrigger:"mean"},{name:"Median",kind:"function",identifierTrigger:"median"},{name:"StandarDeviation",kind:"function",identifierTrigger:"stddev"},{latexTrigger:["\\bar"],kind:"expression",parse:(e,t)=>{var n;let r=null!==(n=e.parseGroup())&&void 0!==n?n:e.parseToken();return r&&Vt(r)?["Mean",r]:null}}],jn={"(":"(",")":")","[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace","<":"\\langle",">":"\\rangle","|":"\\vert","||":"\\Vert","\\lceil":"\\lceil","\\lfloor":"\\lfloor","\\rceil":"\\rceil","\\rfloor":"\\rfloor"};function Kn(e,t,n){let r=function(e,t){var n,r,i,a;if(!function(e,t){var n,r,i;let a=null!==(n=null!==(r=null!==(i=e.name)&&void 0!==i?i:e.latexTrigger)&&void 0!==r?r:e.identifierTrigger)&&void 0!==n?n:e.openTrigger;if(!a)try{a=JSON.stringify(e)}catch(o){a="???"}if(Array.isArray(a)&&(a=bt(a)),"trigger"in e&&t({severity:"warning",message:["invalid-dictionary-entry",a,"The 'trigger' property is deprecated. Use 'latexTrigger' or 'identifierTrigger' instead"]}),"kind"in e&&!["expression","symbol","function","infix","postfix","prefix","matchfix","environment"].includes(e.kind)&&t({severity:"warning",message:["invalid-dictionary-entry",a,"The 'kind' property must be one of 'expression', 'symbol', 'function', 'infix', 'postfix', 'prefix', 'matchfix', 'environment'"]}),void 0!==e.serialize&&!e.name)return t({severity:"warning",message:["invalid-dictionary-entry",a,"A 'name' property must be provided if a 'serialize' handler is provided"]}),!1;if("identifierTrigger"in e&&(!("kind"in e)||"environment"!==e.kind)&&("string"!=typeof e.identifierTrigger||!kt(e.identifierTrigger))&&t({severity:"warning",message:["invalid-dictionary-entry",a,"The 'identifierTrigger' property must be a valid identifier"]}),"name"in e&&("string"!=typeof e.name?void 0!==e.name&&t({severity:"warning",message:["invalid-dictionary-entry",a,"The 'name' property must be a string"]}):kt(e.name)||t({severity:"warning",message:["invalid-dictionary-entry",e.name,"The 'name' property must be a valid identifier"]})),_(e)){if("latexTrigger"in e||"identifierTrigger"in C)return t({severity:"warning",message:["invalid-dictionary-entry",a,"'matchfix' operators use a 'openTrigger' and 'closeTrigger' instead of a 'latexTrigger' or 'identifierTrigger'. "]}),!1;if(!e.openTrigger||!e.closeTrigger)return t({severity:"warning",message:["invalid-dictionary-entry",a,"Expected `openTrigger` and a `closeTrigger` for matchfix operator"]}),!1;if(typeof e.openTrigger!=typeof e.closeTrigger)return t({severity:"warning",message:["invalid-dictionary-entry",a,"Expected `openTrigger` and `closeTrigger` to both be strings or array of LatexToken"]}),!1}if(S(e)||E(e)||C(e)){if(Array.isArray(e.latexTrigger)&&("_"===e.latexTrigger[0]||"^"===e.latexTrigger[0])||"string"==typeof e.latexTrigger&&(e.latexTrigger.startsWith("^")||e.latexTrigger.startsWith("_"))){if(void 0!==e.precedence||void 0!==e.associativity)return t({severity:"warning",message:["invalid-dictionary-entry",a,'Unexpected "precedence" or "associativity" for superscript/subscript operator']}),!1}else if(void 0===e.precedence)return t({severity:"warning",message:["invalid-dictionary-entry",a,'Expected a "precedence" for '.concat(e.kind," operator")]}),!1}else if(void 0!==e.associativity)return t({severity:"warning",message:["invalid-dictionary-entry",a,'Unexpected "associativity" operator']}),!1;return _(e)||function(e){return"kind"in e&&"environment"===e.kind}(e)||e.latexTrigger||e.identifierTrigger||e.name?void 0!==e.parse||void 0!==e.name||(t({severity:"warning",message:["invalid-dictionary-entry",a,"Expected a 'parse' or 'name'"]}),!1):(t({severity:"warning",message:["invalid-dictionary-entry",a,"Expected a 'name', a 'latexTrigger' or a 'identifierTrigger'"]}),!1)}(e,t))return null;let o={kind:"kind"in e?e.kind:"expression"},s=null;"latexTrigger"in e&&(s="string"==typeof e.latexTrigger?gt(e.latexTrigger,[]):e.latexTrigger);let u=null;"identifierTrigger"in e&&(u=e.identifierTrigger),null!==s&&(o.latexTrigger=bt(s)),null!==u&&(o.identifierTrigger=u),e.name&&(o.name=e.name,o.serialize=function(e,t,n){var r,i;if("function"==typeof e.serialize)return e.serialize;let a=null!==(r=e.kind)&&void 0!==r?r:"expression";if("environment"===a){var o,s;let t=null!==(o=null!==(s=e.identifierTrigger)&&void 0!==s?s:e.name)&&void 0!==o?o:"unknown";return(e,n)=>yt(["\\begin{".concat(t,"}"),e.serialize(Pt(n,1)),"\\end{".concat(t,"}")])}if(_(e)){let t="string"==typeof e.openTrigger?jn[e.openTrigger]:bt(e.openTrigger),n="string"==typeof e.closeTrigger?jn[e.closeTrigger]:bt(e.closeTrigger);return(e,r)=>yt([t,e.serialize(Pt(r,1)),n])}let l=e.serialize;if(void 0===l&&t&&(l=bt(t)),l)return"postfix"===a?(e,t)=>yt([e.serialize(Pt(t,1)),l]):"prefix"===a?(e,t)=>yt([l,e.serialize(Pt(t,1))]):"infix"===a?(e,t)=>{var n;return yt((null!==(n=It(t))&&void 0!==n?n:[]).flatMap(((n,r)=>r<jt(t)-1?[e.serialize(n),l]:[e.serialize(n)])))}:(e,t)=>zt(t)?yt([l,e.wrapArguments(t)]):l;let u=null!==(i=null!==n&&void 0!==n?n:e.name)&&void 0!==i?i:"unknown";return"postfix"===a?(e,t)=>yt([e.serialize(Pt(t,1)),e.serializeSymbol(u)]):"prefix"===a?(e,t)=>yt([e.serializeSymbol(u),e.serialize(Pt(t,1))]):"infix"===a?(e,t)=>yt([e.serialize(Pt(t,1)),e.serializeSymbol(u),e.serialize(Pt(t,2))]):(e,t)=>zt(t)?yt([e.serializeSymbol(u),e.wrapArguments(t)]):e.serializeSymbol(u)}(e,s,u)),"matchfix"===o.kind&&_(e)&&(o.openTrigger=e.openTrigger,o.closeTrigger=e.closeTrigger),"symbol"===o.kind&&function(e){return"kind"in e&&"symbol"===e.kind}(e)&&(o.precedence=null!==(n=e.precedence)&&void 0!==n?n:1e4),("prefix"===o.kind||"postfix"===o.kind)&&(C(e)||E(e))&&(!s||"^"!==s[0]&&"_"!==s[0]?o.precedence=null!==(r=e.precedence)&&void 0!==r?r:1e4:(o.precedence=720,e.precedence)),"infix"===o.kind&&S(e)&&(!s||"^"!==s[0]&&"_"!==s[0]||!e.associativity||e.associativity,o.associativity=null!==(i=e.associativity)&&void 0!==i?i:"non",o.precedence=null!==(a=e.precedence)&&void 0!==a?a:1e4);let c=function(e,t,n){if("parse"in e&&"function"==typeof e.parse)return e.parse;let r="kind"in e?e.kind:"expression";if("environment"===r){var i,a;let t=null!==(i=null!==(a=e.parse)&&void 0!==a?a:e.name)&&void 0!==i?i:n;if(t)return(e,n)=>{let r=e.parseTabular();return null===r?null:[t,["List",r.map((e=>["List",...e]))]]}}if("function"===r){var o,s;let t=null!==(o=null!==(s=e.parse)&&void 0!==s?s:e.name)&&void 0!==o?o:n;if(t)return(e,n)=>{let r=e.parseArguments("enclosure",n);return null===r?t:[t,...r]}}if("symbol"===r){var u,c;let t=null!==(u=null!==(c=e.parse)&&void 0!==c?c:e.name)&&void 0!==u?u:n;if(t)return(e,n)=>t}if("prefix"===r){var d,p;let t=null!==(d=null!==(p=e.parse)&&void 0!==p?p:e.name)&&void 0!==d?d:n;if(t){var h;let n=null!==(h=e.precedence)&&void 0!==h?h:1e4;return(e,r)=>{let i=e.parseExpression(l(l({},null!==r&&void 0!==r?r:[]),{},{minPrec:n}));return null===i?null:[t,i]}}}if("postfix"===r){var f;let t=null!==(f=e.parse)&&void 0!==f?f:e.name;if(t)return(e,n)=>null===n?null:[t,n]}if("infix"===r){var m,g,v,y,b;if(/[_^]/.test(null!==(m=null===t||void 0===t?void 0:t[0])&&void 0!==m?m:"")){var x;let t=null!==(x=e.name)&&void 0!==x?x:e.parse;return(e,n)=>[t,Qt(Pt(n,1)),Qt(Pt(n,2))]}let r=null!==(g=null!==(v=e.parse)&&void 0!==v?v:e.name)&&void 0!==g?g:n,i=null!==(y=e.precedence)&&void 0!==y?y:1e4,a=null!==(b=e.associativity)&&void 0!==b?b:"non";if(r)return(e,t,n)=>{if(null===t||i<n.minPrec)return null;let o=Qt(e.parseExpression(l(l({},n),{},{minPrec:i})));return"string"==typeof r?Jt(r,t,o,a):[r,t,o]}}if("matchfix"===r){var D;let t=null!==(D=e.parse)&&void 0!==D?D:e.name;if(t)return(e,n)=>null===n||Yt(n)?null:[t,n]}if("expression"===r){var w,_;let t=null!==(w=null!==(_=e.parse)&&void 0!==_?_:e.name)&&void 0!==w?w:n;if(t)return()=>t}if("parse"in e){let t=e.parse;return()=>t}}(e,s,u);return c&&(o.parse=c),o}(t,n);if(null===r)return;let i="kind"in t?t.kind:"expression",a=r.latexTrigger;"string"==typeof a&&(e.lookahead=Math.max(e.lookahead,vt(a)));let o=gt(null!==a&&void 0!==a?a:"",[]);if(2===o.length&&/[_^]/.test(o[0])&&"<{>"!==o[1]&&"function"!==i&&"environment"!==i&&"matchfix"!==i){let r=t.parse;!r&&t.name&&(r="postfix"===i||"prefix"===i?(e,n)=>[t.name,n]:t.name),Kn(e,l(l({},t),{},{kind:i,name:void 0,serialize:void 0,parse:r,latexTrigger:[o[0],"<{>",o[1],"<}>"]}),n)}e.defs.push(r),void 0!==r.name&&(e.ids.has(r.name)&&n({severity:"warning",message:["invalid-dictionary-entry",r.name,"Duplicate definition. The name (MathJSON identifier) must be unique, but triggers can be shared by multiple definitions."]}),e.ids.set(r.name,r))}function Vn(e,t){let n={lookahead:1,ids:new Map,defs:[]};for(let r of e)Kn(n,r,t);return n}var Un={algebra:[{name:"To",latexTrigger:["\\to"],kind:"infix",precedence:270},{latexTrigger:["\\rightarrow"],kind:"infix",precedence:270,parse:"To"}],arithmetic:ln,calculus:In,complex:[{name:"Real",kind:"function",latexTrigger:["\\Re"]},{name:"Imaginary",kind:"function",latexTrigger:["\\Im"]},{name:"Argument",kind:"function",latexTrigger:["\\arg"]},{name:"Conjugate",latexTrigger:["^","\\star"],kind:"postfix"}],core:fn,"linear-algebra":wn,logic:En,relop:Dn,other:An,physics:[{name:"mu0",kind:"symbol",latexTrigger:"\\mu_0"}],sets:Fn,statistics:Rn,symbols:qn,trigonometry:Mn},$n={"\\mathord":"","\\mathop":"","\\mathbin":"","\\mathrel":"","\\mathopen":"","\\mathclose":"","\\mathpunct":"","\\mathinner":"","\\operatorname":"","\\mathrm":"_upright","\\mathit":"_italic","\\mathbf":"_bold","\\mathscr":"_script","\\mathcal":"_calligraphic","\\mathfrak":"_fraktur","\\mathsf":"_sansserif","\\mathtt":"_monospace","\\mathbb":"_doublestruck"},Hn={"\\mathring":"_ring","\\hat":"_hat","\\tilde":"_tilde","\\vec":"_vec","\\overline":"_bar","\\underline":"_underbar","\\dot":"_dot","\\ddot":"_ddot","\\dddot":"_dddot","\\ddddot":"_ddddot","\\acute":"_acute","\\grave":"_grave","\\breve":"_breve","\\check":"_check"};function Wn(e,t){var n;if(e.atEnd)return null;let r=e.peek,i={"\\_":"_","\\#":"hash"}[r];if(!i&&!t.toplevel&&(i={"+":"plus","-":"minus","\\plusmn":"pm","\\pm":"pm","\\ast":"ast","\\dag":"dag","\\ddag":"ddag","\\bot":"bottom","\\top":"top","\\bullet":"bullet","\\cir":"circle","\\diamond":"diamond","\\times":"times","\\square":"square","\\star":"star"}[r]),i)return e.nextToken(),i;let a=Pn.findIndex((e=>e[1]===r));return a>=0?(e.nextToken(),Pn[a][0]):null!==(n=e.matchChar())&&void 0!==n?n:e.nextToken()}function Gn(e){var t;let n=Zn(e),r=e.index,i=null!==(t=Hn[e.peek])&&void 0!==t?t:null;if(i){if(e.nextToken(),!e.match("<{>"))return e.index=r,null;let t=Gn(e);if(null===t||!e.match("<}>"))return e.index=r,null;n="".concat(t).concat(i)}if(null===n){for(n="";!e.atEnd;){let t=e.peek;if("<}>"===t||"_"===t||"^"===t)break;let i=Wn(e,{toplevel:!1});if(null===i)return e.index=r,null;n+=i}for(;!e.atEnd&&/\d/.test(e.peek);)n+=e.nextToken()}for(;!e.atEnd;)if(e.match("\\degree"))n+="_deg";else if(e.matchAll(["^","\\prime"]))n+="_prime";else if(e.matchAll(["^","<{>","\\prime","<}>"]))n+="_prime";else if(e.matchAll(["^","<{>","\\doubleprime","<}>"]))n+="_dprime";else{if(!e.matchAll(["^","<{>","\\prime","\\prime","<}>"]))break;n+="_dprime"}let a=[],o=[];for(;!e.atEnd;)if(e.match("_")){let t=e.match("<{>"),n=Gn(e);if(t&&!e.match("<}>")||null===n)return e.index=r,null;o.push(n)}else{if(!e.match("^"))break;{let t=e.match("<{>"),n=Gn(e);if(t&&!e.match("<}>")||null===n)return e.index=r,null;a.push(n)}}return a.length>0&&(n+="__"+a.join("")),o.length>0&&(n+="_"+o.join("")),n}function Zn(e){var t;let n=e.index,r=null!==(t=$n[e.peek])&&void 0!==t?t:null;if(null===r)return null;if(e.nextToken(),e.match("<{>")){var i;let t="",a=null!==(i={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine"}[e.peek])&&void 0!==i?i:"";return a&&(t=a,e.nextToken()),t+=Gn(e),null!==t&&e.match("<}>")?"_upright"===r&&t.length>1?t:t+r:(e.index=n,null)}return e.index=n,null}function Jn(e){let t=e.index,n=Zn(e);return null===n||kt(n)?(e.index=t,null):e.error(["invalid-identifier",{str:Bt(n)}],t)}function Xn(e){var t;if(/^[a-zA-Z]$/.test(e.peek)||/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037B-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFC5D\uFC64-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDF9\uFE71\uFE73\uFE77\uFE79\uFE7B\uFE7D\uFE7F-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])$/.test(e.peek))return e.nextToken();let n=e.index,r=Zn(e);if(!r){for(r="";!e.atEnd&&Tt.test(r+e.peek);)r+=e.nextToken();r||(r=null)}return null!==(t=r)&&void 0!==t||(r=Wn(e,{toplevel:!0})),r&&(r=r.normalize(),kt(r))?r:(e.index=n,null)}var Yn={"(":["\\lparen","("],")":["\\rparen",")"],"[":["\\lbrack","\\[","["],"]":["\\rbrack","\\]","]"],"<":["<","\\langle"],">":[">","\\rangle"],"{":["\\{","\\lbrace"],"}":["\\}","\\rbrace"],":":[":","\\colon"],"|":["|","\\|","\\lvert","\\rvert"],"||":["||","\\Vert","\\lVert","\\rVert"],"\\lfloor":["\\lfloor"],"\\rfloor":["\\rfloor"],"\\lceil":["\\lceil"],"\\rceil":["\\rceil"],"\\ulcorner":["\\ulcorner"],"\\urcorner":["\\urcorner"],"\\llcorner":["\\llcorner"],"\\lrcorner":["\\lrcorner"],"\\lgroup":["\\lgroup"],"\\rgroup":["\\rgroup"],"\\lmoustache":["\\lmoustache"],"\\rmoustache":["\\rmoustache"]},Qn={"\\left":"\\right","\\bigl":"\\bigr","\\Bigl":"\\Bigr","\\biggl":"\\biggr","\\Biggl":"\\Biggr","\\big":"\\big","\\Big":"\\Big","\\bigg":"\\bigg","\\Bigg":"\\Bigg"},er={"(":")","[":"]","|":"|","\\{":"\\}","\\[":"\\]","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},tr={precision:6,positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalMarker:".",groupSeparator:"\\,",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",notation:"auto",truncationMarker:"\\ldots",beginRepeatingDigits:"\\overline{",endRepeatingDigits:"}",imaginaryUnit:"\\imaginaryI",avoidExponentsInRange:[-7,20]},nr={skipSpace:!0,parseArgumentsOfUnknownLatexCommands:!0,parseNumbers:"auto",parseUnknownIdentifier:(e,t)=>{var n;return void 0!==(null===(n=t.computeEngine)||void 0===n?void 0:n.lookupFunction(e))?"function":"symbol"},preserveLatex:!1},rr=class{constructor(e,t,n,r){this.index=0,this._boundaries=[],this._lastPeek="",this._peekCounter=0,this._tokens=e,this.options=l(l(l({},tr),nr),t),this._dictionary=n,this.computeEngine=r,this._positiveInfinityTokens=gt(this.options.positiveInfinity,[]),this._negativeInfinityTokens=gt(this.options.negativeInfinity,[]),this._notANumberTokens=gt(this.options.notANumber,[]),this._decimalMarkerTokens=gt(this.options.decimalMarker,[]),this._groupSeparatorTokens=gt(this.options.groupSeparator,[]),this._exponentProductTokens=gt(this.options.exponentProduct,[]),this._beginExponentMarkerTokens=gt(this.options.beginExponentMarker,[]),this._endExponentMarkerTokens=gt(this.options.endExponentMarker,[]),this._truncationMarkerTokens=gt(this.options.truncationMarker,[]),this._beginRepeatingDigitsTokens=gt(this.options.beginRepeatingDigits,[]),this._endRepeatingDigitsTokens=gt(this.options.endRepeatingDigits,[]),this._imaginaryNumberTokens=gt(this.options.imaginaryUnit,[])}updateOptions(e){for(let[t,n]of Object.entries(e)){if(!(t in this.options))throw Error('Unexpected option "'.concat(t,'"'));this.options[t]=n,"string"==typeof n&&("positiveInfinity"===t&&(this._positiveInfinityTokens=gt(n,[])),"negativeInfinity"===t&&(this._negativeInfinityTokens=gt(n,[])),"notANumber"===t&&(this._notANumberTokens=gt(n,[])),"decimalMarker"===t&&(this._decimalMarkerTokens=gt(n,[])),"groupSeparator"===t&&(this._groupSeparatorTokens=gt(n,[])),"exponentProduct"===t&&(this._exponentProductTokens=gt(n,[])),"beginExponentMarker"===t&&(this._beginExponentMarkerTokens=gt(n,[])),"endExponentMarker"===t&&(this._endExponentMarkerTokens=gt(n,[])),"truncationMarker"===t&&(this._truncationMarkerTokens=gt(n,[])),"beginRepeatingDigits"===t&&(this._beginRepeatingDigitsTokens=gt(n,[])),"endRepeatingDigits"===t&&(this._endRepeatingDigitsTokens=gt(n,[])),"imaginaryNumber"===t&&(this._imaginaryNumberTokens=gt(n,[])))}}get atEnd(){return this.index>=this._tokens.length}get peek(){let e=this._tokens[this.index];if(e===this._lastPeek?this._peekCounter+=1:this._peekCounter=0,this._peekCounter>=1024){let e='Infinite loop detected while parsing "'.concat(this.latex(0),'" at "').concat(this._lastPeek,'" (index ').concat(this.index,")");throw console.error(e),new Error(e)}return this._lastPeek=e,e}nextToken(){return this._tokens[this.index++]}atTerminator(e){var t;return this.atBoundary||null!==(t=(null===e||void 0===e?void 0:e.condition)&&e.condition(this))&&void 0!==t&&t}get atBoundary(){if(this.atEnd)return!0;let e=this.index;for(let t of this._boundaries)if(this.matchAll(t.tokens))return this.index=e,!0;return!1}addBoundary(e){this._boundaries.push({index:this.index,tokens:e})}removeBoundary(){this._boundaries.pop()}matchBoundary(){let e=this._boundaries[this._boundaries.length-1],t=e&&this.matchAll(e.tokens);return t&&this._boundaries.pop(),t}boundaryError(e){let t=this._boundaries[this._boundaries.length-1];return this._boundaries.pop(),this.error(e,t.index)}latex(e,t){return bt(this._tokens.slice(e,t))}latexAhead(e){return this.latex(this.index,this.index+e)}lookAhead(){let e=Math.min(this._dictionary.lookahead,this._tokens.length-this.index);if(e<=0)return[];let t=[];for(;e>0;)t.push([e,this.latexAhead(e--)]);return t}peekDefinitions(e){if(this.atEnd)return[];let t=[],n=[...this.getDefs(e)];for(let r of n)""===r.latexTrigger&&t.push([r,0]);for(let[r,i]of this.lookAhead())for(let e of n)e.latexTrigger===i&&t.push([e,r]);for(let r of n)if(r.identifierTrigger){let e=ir(this,r.identifierTrigger);e>0&&t.push([r,e])}return t}skipSpaceTokens(){for(;this.match("<space>"););}skipSpace(){if(!this.atEnd&&"<{>"===this.peek){let e=this.index;for(this.nextToken();this.match("<space>"););if("<}>"===this.nextToken())return this.skipSpace(),!0;this.index=e}if(!this.options.skipSpace)return!1;let e=!1;for(;this.match("<space>");)e=!0;return e&&this.skipSpace(),e}skipVisualSpace(){this.options.skipSpace&&(this.skipSpace(),["\\!","\\,","\\:","\\;","\\enskip","\\enspace","\\space","\\quad","\\qquad"].includes(this.peek)&&(this.nextToken(),this.skipVisualSpace()),this.skipSpace())}match(e){return this._tokens[this.index]===e&&(this.index++,!0)}matchAll(e){if(Array.isArray(e),0===e.length)return!1;let t=!0,n=0;do{t=this._tokens[this.index+n]===e[n++]}while(t&&n<e.length);return t&&(this.index+=n),t}matchAny(e){return e.includes(this._tokens[this.index])?this._tokens[this.index++]:""}matchChar(){let e=this.index,t=0;for(;this.match("^");)t+=1;if(t<2&&(this.index=e),t>=2){let e="",n=0;for(;n!=t;){let t=this.matchAny(["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"]);if(!t)break;e+=t,n+=1}if(e.length===t)return String.fromCodePoint(Number.parseInt(e,16))}else{if(this.match("\\char")){var n;let e=Math.floor(null!==(n=this.matchLatexNumber())&&void 0!==n?n:Number.NaN);return(!Number.isFinite(e)||e<0||e>1114111)&&(e=10067),String.fromCodePoint(e)}if(this.match("\\unicode"))if(this.skipSpaceTokens(),this.match("<{>")){let e=this.matchLatexNumber();if(this.match("<}>")&&null!==e&&e>=0&&e<=1114111)return String.fromCodePoint(e)}else{let e=this.matchLatexNumber();if(null!==e&&e>=0&&e<=1114111)return String.fromCodePoint(e)}}return this.index=e,null}matchDelimiter(e,t){var n,r;if("["===this.peek)return!1;if(Array.isArray(e))return Array.isArray(t),!!this.matchAll(e)&&(this.addBoundary(t),!0);Array.isArray(t);let i=this.index,a=Qn[this.peek];return a&&this.nextToken(),"||"===e&&this.matchAll(["|","|"])?(this.addBoundary(["|","|"]),!0):(null!==(n=Yn[e])&&void 0!==n?n:[e]).includes(this.peek)?(e=this.nextToken(),t=null!==(r=er[e])&&void 0!==r?r:t,this.addBoundary(a?[a,t]:[t]),!0):(this.index=i,!1)}parseGroup(){let e=this.index;if(this.skipSpaceTokens(),this.match("<{>")){this.addBoundary(["<}>"]);let t=this.parseExpression();if(this.skipSpace(),this.matchBoundary())return null!==t&&void 0!==t?t:["Sequence"];for(;!this.matchBoundary()&&!this.atEnd;)this.nextToken();if("Error"===zt(t))return t;let n=this.error("expected-closing-delimiter",e);return t?["InvisibleOperator",t,n]:n}return this.index=e,null}parseToken(){var e;if([...'!"#$%&(),/;:?@[]\\`|~'.split(""),"\\left","\\bigl"].includes(this.peek))return null;if(/^[0-9]$/.test(this.peek))return parseInt(this.nextToken());return(null!==(e=this.parseGenericExpression())&&void 0!==e?e:this.parseSymbol())||null}parseOptionalGroup(){let e=this.index;if(this.skipSpaceTokens(),this.match("[")){this.addBoundary(["]"]);let e=this.parseExpression();return this.skipSpace(),this.matchBoundary()?e:this.boundaryError("expected-closing-delimiter")}return this.index=e,null}parseTabular(){let e=[],t=[],n=null;for(;!this.atBoundary;){var r;if(this.skipSpace(),this.match("&"))t.push(null!==(r=n)&&void 0!==r?r:"Nothing"),n=null;else if(this.match("\\\\")||this.match("\\cr"))this.skipSpace(),this.parseOptionalGroup(),null!==n&&t.push(n),e.push(t),t=[],n=null;else{var i;let e=[],t=this.peek;for(;"&"!==t&&"\\\\"!==t&&"\\cr"!==t&&!this.atBoundary;)n=this.parseExpression({minPrec:0,condition:e=>{let t=e.peek;return"&"===t||"\\\\"===t||"\\cr"===t}}),n?e.push(n):(e.push(["Error",["'unexpected-token'",t]]),this.nextToken()),this.skipSpace(),t=this.peek;n=e.length>1?["Sequence",...e]:null!==(i=e[0])&&void 0!==i?i:"Nothing"}}return null!==n&&t.push(n),t.length>0&&e.push(t),e}parseStringGroup(e){void 0===e&&(e=!1);let t=this.index;for(;this.match("<space>"););if(this.match(e?"[":"<{>")){this.addBoundary([e?"]":"<}>"]);let t=this.parseStringGroupContent();if(this.matchBoundary())return t;this.removeBoundary()}return this.index=t,null}parseEnvironment(e){var t;let n=this.index;if(!this.match("\\begin"))return null;let r=null===(t=this.parseStringGroup())||void 0===t?void 0:t.trim();if(!r)return this.error("expected-environment-name",n);this.addBoundary(["\\end","<{>",...r.split(""),"<}>"]);for(let i of this.getDefs("environment"))if(i.identifierTrigger===r){let t=i.parse(this,e);return this.skipSpace(),this.matchBoundary()?null!==t?this.decorate(t,n):(this.index=n,null):this.boundaryError("unbalanced-environment")}return this.parseTabular(),this.skipSpace(),this.matchBoundary()?this.error(["unknown-environment",{str:r}],n):this.boundaryError("unbalanced-environment")}parseOptionalSign(){let e=!!this.matchAny(["-","\u2212"]);for(;this.matchAny(["+","\ufe62"])||this.skipSpace();)this.matchAny(["-","\u2212"])&&(e=!e);return e?"-":"+"}parseDecimalDigits(e){var t,n;null!==(t=e)&&void 0!==t||(e={}),null!==(n=e.withGrouping)&&void 0!==n||(e.withGrouping=!0);let r=[],i=!1;for(;!i;){for(;/^[0-9]$/.test(this.peek);)r.push(this.nextToken()),this.skipVisualSpace();if(i=!0,e.withGrouping&&this.options.groupSeparator){let e=this.index;this.skipVisualSpace(),this.matchAll(this._groupSeparatorTokens)&&(this.skipVisualSpace(),/^[0-9]$/.test(this.peek)?i=!1:this.index=e)}}return r.join("")}parseSignedInteger(e){var t,n;null!==(t=e)&&void 0!==t||(e={}),null!==(n=e.withGrouping)&&void 0!==n||(e.withGrouping=!0);let r=this.index,i=this.parseOptionalSign(),a=this.parseDecimalDigits(e);return a?"-"===i?"-"+a:a:(this.index=r,"")}parseExponent(){let e=this.index;if(this.matchAny(["e","E"])){let e=this.parseSignedInteger({withGrouping:!1});if(e)return e}if(this.index=e,this.match("\\times")&&(this.skipSpaceTokens(),this.match("1")&&this.match("0")&&this.match("^"))){if(/^[0-9]$/.test(this.peek))return this.nextToken();if(this.match("<{>")){this.skipSpaceTokens();let e=this.parseSignedInteger();if(this.skipSpaceTokens(),this.match("<}>")&&e)return e}}if(this.index=e,this.skipSpaceTokens(),this.match("\\%"))return"-2";if(this.index=e,this.matchAll(this._exponentProductTokens)&&(this.skipSpaceTokens(),this.matchAll(this._beginExponentMarkerTokens))){this.skipSpaceTokens();let e=this.parseSignedInteger({withGrouping:!1});if(this.skipSpaceTokens(),this.matchAll(this._endExponentMarkerTokens)&&e)return e}return this.index=e,""}parseRepeatingDecimal(){let e=this.index,t="";return this.match("(")?(t=this.parseDecimalDigits(),t&&this.match(")")?"("+t+")":(this.index=e,"")):(this.index=e,this.matchAll(["\\left","("])?(t=this.parseDecimalDigits(),t&&this.matchAll(["\\right",")"])?"("+t+")":(this.index=e,"")):(this.index=e,this.matchAll(["\\overline","<{>"])?(t=this.parseDecimalDigits(),t&&this.match("<}>")?"("+t+")":(this.index=e,"")):(this.index=e,this.matchAll(this._beginRepeatingDigitsTokens)?(t=this.parseDecimalDigits(),t&&this.matchAll(this._endRepeatingDigitsTokens)?"("+t+")":(this.index=e,"")):(this.index=e,""))))}parseNumber(){if(!1===this.options.parseNumbers||"never"===this.options.parseNumbers)return null;let e=this.index;this.skipVisualSpace();let t=1;for(;"-"===this.peek||"+"===this.peek;)this.match("-")?t*=-1:this.match("+"),this.skipVisualSpace();let n="",r="",i=!1;if(this.match(".")||this.matchAll(this._decimalMarkerTokens)){let e=this.peek;("\\overline"===e||e===this._beginRepeatingDigitsTokens[0]||/[0-9\(]/.test(e))&&(i=!0,n="0")}else n=this.parseDecimalDigits();if(!n)return this.index=e,null;let a=this.index,o=!1;(i||this.match(".")||this.matchAll(this._decimalMarkerTokens))&&(r=this.parseDecimalDigits(),o=!0);let s=!1;if(o){let e=this.parseRepeatingDecimal();e?(r+=e,s=!0):this.match("\\ldots")||this.matchAll(this._truncationMarkerTokens)}if(o&&!r)return this.index=a,{num:t<0?"-"+n:n};this.skipVisualSpace();let l=this.parseExponent();if(!s&&"rational"===this.options.parseNumbers){let e=parseInt(n,10);if(!r)return l?["Multiply",t*e,["Power",10,l]]:t*e;let i=parseInt(r,10),a=r.length,o=e*Math.pow(10,a)+i,s=Math.pow(10,a);return l?["Multiply",["Rational",t*o,s],["Power",10,l]]:["Rational",t*o,s]}return{num:(t<0?"-":"")+n+(o?"."+r:"")+(l?"e"+l:"")}}matchLatexNumber(){var e,t;let n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!1,i=this.peek;for(;"<space>"===i||"+"===i||"-"===i;)"-"===i&&(r=!r),this.nextToken(),i=this.peek;let a=10,o=["0","1","2","3","4","5","6","7","8","9"];if(this.match("'"))a=8,o=["0","1","2","3","4","5","6","7"],n=!0;else if(this.match('"')||this.match("x"))a=16,o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],n=!0;else if(this.match("`"))return i=this.nextToken(),i?i.startsWith("\\")&&2===i.length?(r?-1:1)*(null!==(e=i.codePointAt(1))&&void 0!==e?e:0):(r?-1:1)*(null!==(t=i.codePointAt(0))&&void 0!==t?t:0):null;let s="";for(;o.includes(this.peek);)s+=this.nextToken();if(!n&&this.match("."))for(s+=".";o.includes(this.peek);)s+=this.nextToken();let l=n?Number.parseInt(s,a):Number.parseFloat(s);return Number.isNaN(l)?null:r?-l:l}parsePrefixOperator(e){e||(e={minPrec:0}),e.minPrec||(e=l(l({},e),{},{minPrec:0}));let t=this.index;for(let[n,r]of this.peekDefinitions("prefix")){this.index=t+r;let i=n.parse(this,e);if(i)return i}return this.index=t,null}parseInfixOperator(e,t){var n;null!==(n=t)&&void 0!==n||(t={minPrec:0}),t.minPrec,void 0===t.minPrec&&(t=l(l({},t),{},{minPrec:0}));let r=this.index;for(let[i,a]of this.peekDefinitions("infix"))if(i.precedence>=t.minPrec){this.index=r+a;let n=i.parse(this,e,t);if(n)return n}return this.index=r,null}parseArguments(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"enclosure",n=arguments.length>1?arguments[1]:void 0;if(this.atTerminator(n))return null;let r=this.index,i=this.parseEnclosure();if("enclosure"===t)return null===i?null:null!==(e=Xt(i))&&void 0!==e?e:[];if("implicit"===t){if("Delimiter"===zt(i)){if("Sequence"===zt(qt(i))){let e=qt(qt(i));return e?[e]:[]}return qt(i)?[qt(i)]:[]}if(null!==i)return[i];let e=this.parseExpression(l(l({},n),{},{minPrec:390}));return null===e?null:[e]}return this.index=r,null}matchOpenDelimiter(e,t){var n;let r=this.index,i=Qn[this.peek];i&&this.nextToken();let a=null!==(n=Yn[e])&&void 0!==n?n:[e],o=i?[i]:[];return a.includes("||")&&this.matchAll(["|","|"])?(o.push("|"),o.push("|"),o):a.includes(this.peek)?(er[e]===t?o.push(er[this.peek]):o.push(t),this.nextToken(),o):(this.index=r,null)}parseEnclosure(){let e=this.getDefs("matchfix"),t=this.index;for(let r of e){var n;if(this.index=t,!this.matchDelimiter(r.openTrigger,r.closeTrigger))continue;let e=this.index;this.skipSpace();let i=this.parseExpression();if(this.skipSpace(),!this.matchBoundary()){let n=this._boundaries[this._boundaries.length-1].tokens;if(this.removeBoundary(),this.index=e,this.skipSpace(),i=this.parseExpression(),this.skipSpace(),!this.matchAll(n)){if(!this.atEnd)continue;return this.index=t,null}}let a=r.parse(this,null!==(n=i)&&void 0!==n?n:["Sequence"]);if(null!==a)return a}return this.index=t,null}parseGenericExpression(e){var t;if(this.atTerminator(e))return null;let n=this.index,r=null,i=null!==(t=this.peekDefinitions("expression"))&&void 0!==t?t:[];for(let[a,o]of i){if(this.index=n+o,"function"!=typeof a.parse)return a.name;if(r=a.parse(this,e),null!==r)return r}return this.index=n,null}parseFunction(e){if(this.atTerminator(e))return null;let t=this.index,n=null;for(let[i,a]of this.peekDefinitions("function")){if(this.index=t+a,"function"!=typeof i.parse){n=i.name;break}if(n=i.parse(this,e),null!==n)return n}if(null===n&&(this.index=t,n=Xn(this),!this.isFunctionHead(n)))return this.index=t,null;for(;;){let t=this.parsePostfixOperator(n,e);if(null===t)break;n=t}let r=this.parseArguments("enclosure",e);return null===r?n:"string"==typeof n?[n,...r]:["Apply",n,...r]}parseSymbol(e){var t,n;if(this.atTerminator(e))return null;let r=this.index;for(let[a,o]of this.peekDefinitions("symbol")){if(this.index=r+o,"function"!=typeof a.parse)return a.name;{let t=a.parse(this,e);if(t)return t}}this.index=r;let i=Xn(this);return null===i?null:"symbol"===(null===(t=(n=this.options).parseUnknownIdentifier)||void 0===t?void 0:t.call(n,i,this))?i:(this.index=r,null)}parseSupsub(e){if(this.atEnd)return e;let t=this.index;this.skipSpace();let n=[],r=[],i=t;for(;"_"===this.peek||"^"===this.peek;){if(this.match("_"))if(i=this.index,this.match("_")||this.match("^"))r.push(this.error("syntax-error",i));else{var a,o;let e=null!==(a=null!==(o=this.parseGroup())&&void 0!==o?o:this.parseToken())&&void 0!==a?a:this.parseStringGroup();if(null===e)return this.error("missing",t);r.push(e)}else if(this.match("^"))if(i=this.index,this.match("_")||this.match("^"))n.push(this.error("syntax-error",i));else{var s;let e=null!==(s=this.parseGroup())&&void 0!==s?s:this.parseToken();if(null===e)return this.error("missing",t);n.push(e)}i=this.index,this.skipSpace()}if(0===n.length&&0===r.length)return this.index=t,e;let l=e;if(r.length>0){let e=[...this.getDefs("infix")].filter((e=>"_"===e.latexTrigger));if(e){let t=["Subscript",l,1===r.length?r[0]:["List",...r]];for(let n of e)if(l="function"==typeof n.parse?n.parse(this,t,{minPrec:0}):t,l)break}}if(n.length>0){let e=[...this.getDefs("infix")].filter((e=>"^"===e.latexTrigger));if(e){let t=n.filter((e=>!("Sequence"===zt(e)&&0===jt(e))));if(0!==t.length){let n=["Superscript",l,1===t.length?t[0]:["List",...t]];for(let t of e)if(l="function"==typeof t.parse?t.parse(this,n,{minPrec:0}):n,l)break}}}return null===l&&(this.index=t),l}parsePostfixOperator(e,t){if(null===e||this.atEnd)return null;let n=this.index;for(let[r,i]of this.peekDefinitions("postfix")){this.index=n+i;let a=r.parse(this,e,t);if(null!==a)return a}return this.index=n,null}parseStringGroupContent(){let e=this.index,t="",n=0;for(;!this.atBoundary||n>0;){let r=this.nextToken();if("<$>"===r||"<$$>"===r)return this.index=e,"";"<{>"===r?(n+=1,t+="\\{"):"<}>"===r?(n-=1,t+="\\}"):"<space>"===r?t+=" ":(r[0],t+=r)}return t}parseSyntaxError(){let e=this.index;if("^"===this.peek)return this.index+=1,["Superscript",this.error("missing",e),Qt(this.parseGroup())];let t=this.peekDefinitions("operator");if(t.length>0){if(t=this.peekDefinitions("postfix"),t.length>0){let[n,r]=t[0];if(this.index+=r,"function"==typeof n.parse){let t=n.parse(this,this.error("missing",e));if(t)return t}return n.name?[n.name,this.error("missing",e)]:this.error("unexpected-operator",e)}if(t=this.peekDefinitions("prefix"),t.length>0){var n;let[r,i]=t[0];if(this.index+=i,"function"==typeof r.parse){let e=r.parse(this,{minPrec:0});if(e)return e}return r.name?[r.name,null!==(n=this.parseExpression())&&void 0!==n?n:this.error("missing",e)]:this.error("unexpected-operator",e)}if(t=this.peekDefinitions("infix"),t.length>0){let[n,r]=t[0];return this.index+=r,n.parse(this,this.error("missing",e),{minPrec:0})||this.error("unexpected-operator",e)}}let r=this.index,i=Jn(this);if(i)return i;if(i=Xn(this),i)return this.error(["unexpected-identifier",i],r);let a=this.peek;if(!a)return this.error("syntax-error",e);if("\\"!==a[0])return this.error(["unexpected-token",{str:bt(a)}],e);if(function(e){let t=e.peek;return Object.values(er).includes(t)||er[t]?(e.nextToken(),!0):!(!Qn[t]&&!Object.values(Qn).includes(t))&&(e.nextToken(),e.nextToken(),!0)}(this))return this.error("unexpected-delimiter",e);let o=this.nextToken();if(this.skipSpaceTokens(),"\\end"===o){let t=this.parseStringGroup();return null===t?this.error("expected-environment-name",e):this.error(["unbalanced-environment",{str:t}],e)}for(;this.match("[");){let e=0;for(;!this.atEnd&&0===e&&"]"!==this.peek;)"["===this.peek&&(e+=1),"]"===this.peek&&(e-=1),this.nextToken();this.match("]")}for(;this.match("<{>");){let e=0;for(;!this.atEnd&&0===e&&"<}>"!==this.peek;)"<{>"===this.peek&&(e+=1),"<}>"===this.peek&&(e-=1),this.nextToken();this.match("<}>")}return this.error(["unexpected-command",{str:bt(o)}],e)}parsePrimary(e){var t,n,r,i,a,o,s,l;if(this.atBoundary||this.atTerminator(e))return null;let u=null,c=this.index;if(this.match("<}>"))return this.error("unexpected-closing-delimiter",c);if(null!==(t=u)&&void 0!==t||(u=this.parseGroup()),null!==(n=u)&&void 0!==n||(u=this.parseNumber()),null!==(r=u)&&void 0!==r||(u=this.parseEnclosure()),null!==(i=u)&&void 0!==i||(u=this.parseEnvironment(e)),null===u&&this.matchAll(this._positiveInfinityTokens)&&(u={num:"+Infinity"}),null===u&&this.matchAll(this._negativeInfinityTokens)&&(u={num:"-Infinity"}),null===u&&this.matchAll(this._notANumberTokens)&&(u={num:"NaN"}),null!==(a=u)&&void 0!==a||(u=null!==(o=null!==(s=null!==(l=this.parseGenericExpression(e))&&void 0!==l?l:this.parseFunction(e))&&void 0!==s?s:this.parseSymbol(e))&&void 0!==o?o:Jn(this)),null!==u){u=this.decorate(u,c);let t=null,n=this.index;do{var d;if(t=this.parsePostfixOperator(u,e),u=null!==(d=t)&&void 0!==d?d:u,this.index===n&&null!==t){this.index;break}n=this.index}while(null!==t)}return null!==u&&(u=this.parseSupsub(u)),this.decorate(u,c)}parseExpression(e){var t;this.skipSpace();let n=this.index;if(this.atBoundary)return this.index=n,null;null!==(t=e)&&void 0!==t||(e={minPrec:0}),e.minPrec,void 0===e.minPrec&&(e=l(l({},e),{},{minPrec:0}));let r=this.parsePrefixOperator(l(l({},e),{},{minPrec:0}));if(null===r&&(r=this.parsePrimary(e),"Sequence"===zt(r)&&0===jt(r)&&(r=null)),r){let t=!1;for(;!t&&!this.atTerminator(e);){this.skipSpace();let n=this.parseInfixOperator(r,e);if(null===n&&0===this.peekDefinitions("operator").length){let t=this.parseExpression(l(l({},e),{},{minPrec:D}));null!==t&&(n="InvisibleOperator"===zt(r)?"InvisibleOperator"===zt(t)?["InvisibleOperator",...It(r),...It(t)]:["InvisibleOperator",...It(r),t]:"InvisibleOperator"===zt(t)?["InvisibleOperator",r,...It(t)]:["InvisibleOperator",r,t])}null!==n?r=n:t=!0}}return this.decorate(r,n)}decorate(e,t){if(null===e)return null;if(!this.options.preserveLatex)return e;let n=this.latex(t,this.index);return Array.isArray(e)?e={latex:n,fn:e}:"number"==typeof e?e={latex:n,num:Number(e).toString()}:"string"==typeof e?e={latex:n,sym:e}:"object"==typeof e&&null!==e&&(e.latex=n),e}error(e,t){let n;"string"==typeof e?(e.startsWith("'"),n={str:e}):(e[0].startsWith("'"),n=["ErrorCode",{str:e[0]},...e.slice(1)]);let r=this.latex(t,this.index);return r?["Error",n,["LatexString",{str:r}]]:["Error",n]}isFunctionHead(e){var t,n,r;if(null===e)return!1;let i=Vt(e);return!!i&&(void 0!==(null===(t=this.computeEngine)||void 0===t?void 0:t.lookupFunction(i))||"function"===(null===(n=(r=this.options).parseUnknownIdentifier)||void 0===n?void 0:n.call(r,i,this)))}*getDefs(e){if("operator"===e)for(let t of this._dictionary.defs)/^prefix|infix|postfix/.test(t.kind)&&(yield t);else for(let t of this._dictionary.defs)t.kind===e&&(yield t)}};function ir(e,t){var n;let r=e.index,i=null===(n=Xn(e))||void 0===n?void 0:n.trim();if(null===i)return 0;let a=i!==t?0:e.index-r;return e.index=r,a}function ar(e,t){let n=e.length,r=e;if(t.beginRepeatingDigits&&t.endRepeatingDigits){e=e.slice(0,-1);for(let n=0;n<e.length-16;n++){let r=e.substring(0,n);for(let i=0;i<17;i++){let a=e.substring(n,n+i+1),o=Math.floor((e.length-r.length)/a.length);if(o<=3)break;if((r+a.repeat(o+1)).startsWith(e))return"0"===a?r.replace(/(\d{3})/g,"$1"+t.groupSeparator):r.replace(/(\d{3})/g,"$1"+t.groupSeparator)+t.beginRepeatingDigits+a+t.endRepeatingDigits}}}let i=n>t.precision-1;return e=r,i&&(e=e.substring(0,t.precision-1)),t.groupSeparator&&((e=e.replace(/(\d{3})/g,"$1"+t.groupSeparator)).endsWith(t.groupSeparator)&&(e=e.slice(0,-t.groupSeparator.length))),i?e+t.truncationMarker:e}function or(e,t){var n;return e?t.beginExponentMarker?t.beginExponentMarker+e+(null!==(n=t.endExponentMarker)&&void 0!==n?n:""):"10^{"+e+"}":""}function sr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/);if(!r){let t="";if("-"===e[0]?(t="-",e=e.substring(1)):"+"===e[0]&&(e=e.substring(1)),e.indexOf(".")<0)e=1===e.length?t+e+"e+0":t+e[0]+"."+e.slice(1)+"e+"+(e.length-1).toString();else{let[n,r,i]=e.match(/^(.*)\.(.*)$/);for(i||(i="");r.startsWith("0");)r=r.substring(1);e=r?t+r[0]+"."+r.slice(1)+i+"e+"+(r.length-1).toString():t+"0."+i+"e+0"}r=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/)}if(!r)return lr(e,t);let i=parseInt(r[2]),a=r[1];if(Math.abs(i)%n!==0){var o;let e=i>0?i%n:-(n+i)%n;i=i>=0?i-e:i+e;let[t,r,s]=null!==(o=a.match(/^(.*)\.(.*)$/))&&void 0!==o?o:["",a,""];a=r+(s+"00000000000000000").slice(0,Math.abs(e))+"."+s.slice(Math.abs(e))}let s=t.avoidExponentsInRange;if(s&&i>=s[0]&&i<=s[1])return;let l="",u=a;r=u.match(/^(.*)\.(.*)$/),r&&(u=r[1],l=r[2]);let c=0!==i?or(Number(i).toString(),t):"";return t.groupSeparator&&(u=u.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator),l=ar(l,t)),l&&(l=t.decimalMarker+l),c?"1"!==u||l?u+l+t.exponentProduct+c:c:u+l}function lr(e,t){var n,r,i,a;let o,s=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/i);(null===(n=s)||void 0===n?void 0:n[1])&&s[2]&&(o=or(s[2],t));let l=null!==(r=null===(i=s)||void 0===i?void 0:i[1])&&void 0!==r?r:e,u="";return s=(o?s[1]:e).match(/^(.*)\.(.*)$/),null!==(a=s)&&void 0!==a&&a[1]&&s[2]&&(l=s[1],u=s[2]),t.groupSeparator&&(l=l.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator),u=ar(u,t)),u&&(u=t.decimalMarker+u),o?"1"!==l||u?l+u+t.exponentProduct+o:o:l+u}var ur={deg:e=>"".concat(e,"\\degree"),prime:e=>"".concat(e,"^{\\prime}"),dprime:e=>"".concat(e,"^{\\doubleprime}"),ring:e=>"\\mathring{".concat(e,"}"),hat:e=>"\\hat{".concat(e,"}"),tilde:e=>"\\tilde{".concat(e,"}"),vec:e=>"\\vec{".concat(e,"}"),bar:e=>"\\overline{".concat(e,"}"),underbar:e=>"\\underline{".concat(e,"}"),dot:e=>"\\dot{".concat(e,"}"),ddot:e=>"\\ddot{".concat(e,"}"),tdot:e=>"\\dddot{".concat(e,"}"),qdot:e=>"\\ddddot{".concat(e,"}"),acute:e=>"\\acute{".concat(e,"}"),grave:e=>"\\grave{".concat(e,"}"),breve:e=>"\\breve{".concat(e,"}"),check:e=>"\\check{".concat(e,"}")},cr={upright:e=>"\\mathrm{".concat(e,"}"),italic:e=>"\\mathit{".concat(e,"}"),bold:e=>"\\mathbf{".concat(e,"}"),script:e=>"\\mathscr{".concat(e,"}"),fraktur:e=>"\\mathfrak{".concat(e,"}"),doublestruck:e=>"\\mathbb{".concat(e,"}"),blackboard:e=>"\\mathbb{".concat(e,"}"),calligraphic:e=>"\\mathcal{".concat(e,"}"),gothic:e=>"\\mathfrak{".concat(e,"}"),sansserif:e=>"\\mathsf{".concat(e,"}"),monospace:e=>"\\mathtt{".concat(e,"}")},dr=class{constructor(e,t,n){this.level=-1,this.options=e,e.invisibleMultiply&&(!/#1/.test(e.invisibleMultiply)||!/#2/.test(e.invisibleMultiply))&&n([{severity:"warning",message:["expected-argument","invisibleMultiply"]}]),this.onError=n,this.dictionary=t,this.canonical=void 0}updateOptions(e){for(let t of Object.keys(this.options))t in e&&(this.options[t]=e[t])}wrap(e,t){if(null===e)return"";if(void 0===t)return this.wrapString(this.serialize(e),this.options.groupStyle(e,this.level+1));if("number"==typeof e||_t(e)||"string"==typeof e||St(e))return this.serialize(e);let n=zt(e);if("string"==typeof n&&"Delimiter"!==n&&"Subscript"!==n){let r=this.dictionary.ids.get(n);if(r&&("symbol"===r.kind||"prefix"===r.kind||"infix"===r.kind||"postfix"===r.kind)&&r.precedence<t)return this.wrapString(this.serialize(e),this.options.applyFunctionStyle(e,this.level))}return this.serialize(e)}wrapShort(e){if(null===e)return"";let t=this.serialize(e);if(null!==Vt(e)||"Delimiter"===zt(e)&&1===jt(e)||wt(e)&&!/^(-|\.)/.test(t))return t;let n=zt(e);return"Add"!==n&&"Negate"!==n&&"Subtract"!==n&&"PlusMinus"!==n&&"Multiply"!==n?t:this.wrapString(t,this.options.groupStyle(e,this.level+1))}wrapString(e,t,n){var r,i,a,o,s,l;if("none"===t)return e;void 0===n&&(n="()");let u=null!==(r=null===(i=n)||void 0===i?void 0:i[0])&&void 0!==r?r:".",c=null!==(a=null===(o=n)||void 0===o?void 0:o[1])&&void 0!==a?a:".";return("."===u||"."===c)&&"paren"===t&&(t="leftright"),u='"'===u?"``":"|"===u?"\\lvert":null!==(s=yn[u])&&void 0!==s?s:u,c='"'===c?"''":"|"===c?"\\rvert":null!==(l=yn[c])&&void 0!==l?l:c,"."===u&&"."===c?e:"leftright"===t?"\\left".concat(u).concat(e,"\\right").concat(c,"}"):"big"===t?"".concat("."===u?"":"\\Bigl".concat(u)).concat(e).concat("."===c?"":"\\Bigr".concat(c),")"):u+e+c}wrapArguments(e){var t;return this.wrapString((null!==(t=It(e))&&void 0!==t?t:[]).map((e=>this.serialize(e))).join(", "),this.options.applyFunctionStyle(e,this.level))}serializeSymbol(e,t){var n,r,i,a,o;return"string"==typeof e||St(e),"function"===(null===t||void 0===t?void 0:t.kind)?null!==(n=fr(null!==(r=Vt(e))&&void 0!==r?r:""))&&void 0!==n?n:"":null!==(i=null!==(a=null===t||void 0===t||null===(o=t.serialize)||void 0===o?void 0:o.call(t,this,e))&&void 0!==a?a:fr(Vt(e)))&&void 0!==i?i:""}serializeFunction(e,t){var n;if(null!==t&&void 0!==t&&t.serialize)return t.serialize(this,e);let r=zt(e);if("string"==typeof r)return fr(r,"auto")+this.wrapArguments(e);if("InverseFunction"===zt(r)||"Derivative"===zt(r))return this.serializeFunction(r,this.dictionary.ids.get(zt(r)))+this.wrapArguments(e);let i=null!==(n=It(e))&&void 0!==n?n:[];if(1===i.length)return yt([this.serialize(i[0]),"\\rhd",this.wrapString(this.serialize(r),this.options.applyFunctionStyle(e,this.level))]);let a=this.options.applyFunctionStyle(e,this.level);return yt(["\\operatorname{apply}",this.wrapString(this.serialize(r)+", "+this.serialize(["List",...i]),a)])}serializeDictionary(e){return"\\left\\lbrack\\begin{array}{lll}".concat(Object.keys(e).map((t=>"\\textbf{".concat(t,"} & \\rightarrow & ").concat(this.serialize(e[t])))).join("\\\\"),"\\end{array}\\right\\rbrack")}serialize(e,t){var n;if(null==e)return"";null!==(n=t)&&void 0!==n||(t={}),"canonical"in(t=l({},t))||(t.canonical=!0);let r=this.canonical;void 0===this.canonical&&(this.canonical=t.canonical),this.level+=1;try{let t=(()=>{let t=function(e,t){var n;if(null===e)return"";let r;if("number"==typeof e||"string"==typeof e)r=e;else{if("object"!=typeof e||!("num"in e))return"";r=e.num}if("number"==typeof r){var i;if(r===1/0)return t.positiveInfinity;if(r===-1/0)return t.negativeInfinity;if(Number.isNaN(r))return t.notANumber;let e;return"engineering"===t.notation?e=sr(r.toExponential(),t,3):"scientific"===t.notation&&(e=sr(r.toExponential(),t)),null!==(i=e)&&void 0!==i?i:lr(r.toString(),t)}if(r=r.toLowerCase().replace(/[\u0009-\u000d\u0020\u00a0]/g,""),"infinity"===r||"+infinity"===r)return t.positiveInfinity;if("-infinity"===r)return t.negativeInfinity;if("nan"===r)return t.notANumber;if(!/^[-+\.]?[0-9]/.test(r))return"";if(r=r.replace(/[nd]$/,""),/\([0-9]+\)/.test(r)){var a;let[e,n,i,o]=null!==(a=r.match(/(.+)\(([0-9]+)\)(.*)$/))&&void 0!==a?a:[];r=n+i.repeat(Math.ceil(t.precision/i.length))+o}let o,s="";for("-"===r[0]?(s="-",r=r.substring(1)):"+"===r[0]&&(r=r.substring(1));"0"===r[0];)r=r.substring(1);return 0===r.length?r="0":"."===r[0]&&(r="0"+r),"engineering"===t.notation?o=sr(r,t,3):"scientific"===t.notation&&(o=sr(r,t)),s+(null!==(n=o)&&void 0!==n?n:lr(r,t))}(e,this.options);if(t)return t;let n=Lt(e);if(null!==n)return"\\text{".concat(n,"}");let r=$t(e);if(null!==r)return this.serializeDictionary(r);let i=Vt(e);if(null!==i)return this.serializeSymbol(e,this.dictionary.ids.get(i));let a=function(e){let t=zt(e);return"string"==typeof t?t:""}(e);return a?this.serializeFunction(e,this.dictionary.ids.get(a)):null!==zt(e)?this.serializeFunction(e):void this.onError([{severity:"warning",message:["syntax-error",e?JSON.stringify(e):"undefined"]}])})();return this.level-=1,this.canonical=r,null!==t&&void 0!==t?t:""}catch(i){}return this.level-=1,this.canonical=r,""}applyFunctionStyle(e,t){return this.options.applyFunctionStyle(e,t)}groupStyle(e,t){return this.options.groupStyle(e,t)}rootStyle(e,t){return this.options.rootStyle(e,t)}fractionStyle(e,t){return this.options.fractionStyle(e,t)}logicStyle(e,t){return this.options.logicStyle(e,t)}powerStyle(e,t){return this.options.powerStyle(e,t)}numericSetStyle(e,t){return this.options.numericSetStyle(e,t)}};function pr(e){let[t,n]=function(e){var t,n;let r=null!==(t=null===(n=e.match(/^([^_]+)/))||void 0===n?void 0:n[1])&&void 0!==t?t:"",i=Pn.findIndex((e=>r===e[0]));if(i>=0)return[Pn[i][1],e.substring(Pn[i][0].length)];let a={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10"};if(i=Object.keys(a).findIndex((t=>e.startsWith(t))),i>=0){let t=Object.keys(a)[i];return[a[t],e.substring(t.length)]}let o=e.codePointAt(0);if(i=Pn.findIndex((e=>e[2]===o)),i>=0)return[Pn[i][1],e.substring(1)];let s={plus:"+",minus:"-",pm:"\\pm",ast:"\\ast",dag:"\\dag",ddag:"\\ddag",hash:"\\#",bottom:"\\bot",top:"\\top",bullet:"\\bullet",circle:"\\circ",diamond:"\\diamond",times:"\\times",square:"\\square",star:"\\star"};if(i=Object.keys(s).findIndex((e=>r===e)),i>=0){let t=Object.keys(s)[i];return[s[t],e.substring(t.length)]}return[r,e.substring(r.length)]}(e),r=[];for(;n.length>0;){let e=n.match(/^_([a-zA-Z]+)(.*)/);if(!e||!ur[e[1]])break;r.push(e[1]),n=e[2]}let i=[];for(;n.length>0;){let e=n.match(/^_([a-zA-Z]+)(.*)/);if(!e||!cr[e[1]])break;i.push(e[1]),n=e[2]}return[t,r,i,n]}function hr(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto",[r,i,a,o]=pr(e);for(let s of i)ur[s]&&(r=ur[s](r));if(t){let e=[],t=[],n=r.match(/^([^\d].*?)(\d+)$/);for(n&&(t.push(n[2]),r=n[1]);o.length>0;)if(o.startsWith("__")){let[t,n]=hr(o.substring(2),!1,"none");e.push(t),o=n}else{if(!o.startsWith("_"))break;{let[e,n]=hr(o.substring(1),!1,"none");t.push(e),o=n}}e.length>0&&(r="".concat(r,"^{").concat(e.join(","),"}")),t.length>0&&(r="".concat(r,"_{").concat(t.join(","),"}"))}for(let s of a)cr[s]&&(r=cr[s](r));if(0===a.length&&"none"!==n)switch(n){case"auto":vt(r)>1&&(r="\\mathrm{".concat(r,"}"));break;case"operator":r="\\operatorname{".concat(r,"}");break;case"italic":r="\\mathit{".concat(r,"}");break;case"upright":r="\\mathrm{".concat(r,"}")}return[r,o]}function fr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";if(null===e)return null;if(Tt.test(e))return e;let n=e.match(/^(_+)(.*)/);if(n){let[e,t]=hr(n[2],!0,"none");return"\\operatorname{".concat("\\_".repeat(n[1].length)+e+t,"}")}let[r,i]=hr(e,!0,t);return i.length>0?"\\operatorname{".concat(e,"}"):r}var mr={invisibleMultiply:"",invisiblePlus:"",multiply:"\\times",missingSymbol:"\\blacksquare",applyFunctionStyle:function(e,t){return"paren"},groupStyle:function(e,t){return"paren"},rootStyle:nn,fractionStyle:rn,logicStyle:function(e,t){return"boolean"},powerStyle:function(e,t){return"solidus"},numericSetStyle:function(e,t){return"compact"}},gr=class e{constructor(t){var n,r;this.onError=null!==(n=t.onError)&&void 0!==n?n:e=>{if(typeof window<"u")for(let t of e)console.warn(t.message)},this.computeEngine=t.computeEngine;let i=l({},t);delete i.dictionary,delete i.onError,this.options=l(l(l(l({},tr),nr),mr),i),this._dictionaryInput=null!==(r=t.dictionary)&&void 0!==r?r:e.getDictionary(),this._dictionary=Vn(this._dictionaryInput,(e=>this.onError([e])))}get dictionary(){return this._dictionaryInput}set dictionary(e){this._dictionaryInput=e,this._dictionary=Vn(e,(e=>this.onError([e])))}updateOptions(e){for(let t of Object.keys(this.options))t in e&&(this.options[t]=e[t]);this.serializer.updateOptions(e)}static getDictionary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";if("all"===e){let e=[];for(let t of Object.keys(Un))Un[t]&&e.push(...Un[t]);return e}return Un[e]?Object.freeze([...Un[e]]):[]}parse(e){var t,n;let r=new rr(gt(e,[]),this.options,this._dictionary,this.computeEngine),i=r.parseExpression();if(!r.atEnd){let e=r.parseSyntaxError();for(i=i?["Sequence",i,e]:e;!r.atEnd;)r.nextToken()}return null!==(t=i)&&void 0!==t||(i=["Sequence"]),this.options.preserveLatex&&(Array.isArray(i)?i={latex:e,fn:i}:"number"==typeof i?i={latex:e,num:Number(i).toString()}:"string"==typeof i?i={latex:e,sym:i}:"object"==typeof i&&null!==i&&(i.latex=e)),null!==(n=i)&&void 0!==n?n:["Sequence"]}serialize(e,t){return this.serializer.serialize(e,t)}get serializer(){return this._serializer||(this._serializer=new dr(this.options,this._dictionary,this.onError)),this._serializer}},vr=m(g(),1),yr=m(g(),1),br=m(g(),1);function xr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{contract:r=.125,step:i=1,power:a=2,atol:o=1e-16,rtol:s=(o>0?0:Math.sqrt(Number.EPSILON)),maxeval:l=1e6,breaktol:u=2}=n;if(!isFinite(t))return xr((t=>e(1/t)),1/t,{rtol:s,atol:o,maxeval:l,contract:Math.abs(r)>1?1/r:r,step:1/i,power:a});let c=i,d=Math.pow(1/r,a),p=e(t+c),h=[p],f=1/0,m=1;for(;m<l;){m+=1,c*=r,h.push(e(t+c));let n=d,i=1/0;for(let e=h.length-2;e>=0;e--){let t=h[e];h[e]=h[e+1]+(h[e+1]-h[e])/(n-1);let r=Math.abs(h[e]-t);i=Math.min(i,r),r<f&&(p=h[e],f=r),n*=d}if(i>u*f||!isFinite(i)||f<=Math.max(s*Math.abs(p),o))break}return[p,f]}var Dr=Math.log10(Math.pow(2,53)),wr=(Math.pow(2,-46),Math.pow(10,-10)),_r=1e6,Sr=1e6,Cr=new Set([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919]);function Er(e){if(Number.isInteger(e)&&e>=0&&Number.MAX_SAFE_INTEGER,e<=3)return{[e]:1};let t={},n=0;for(;e%2===0;)n+=1,e/=2;for(n>0&&(t[2]=n),n=0;e%3===0;)n+=1,e/=3;n>0&&(t[3]=n);let r=!1;for(;!r;){if(1===e)return t;let n=Math.sqrt(e);r=!0;for(let o=6;o<=n+6;o+=6){if(e%(o-1)===0){var i;t[o-1]=(null!==(i=t[o-1])&&void 0!==i?i:0)+1,e/=o-1,r=!1;break}if(e%(o+1)===0){var a;t[o+1]=(null!==(a=t[o+1])&&void 0!==a?a:0)+1,e/=o+1,r=!1;break}}}return void 0!==t[e]?t[e]+=1:t[e]=1,t}function kr(e,t){if(e>=Number.MAX_SAFE_INTEGER)return[1,e];Number.isInteger(e)&&e>0&&Number.MAX_SAFE_INTEGER;let n=Er(e),r=1,i=1;for(let a of Object.keys(n)){let e=parseInt(a);r*=Math.pow(e,Math.floor(n[a]/t)),i*=Math.pow(e,n[a]%t)}return[r,i]}function Ar(e,t){if(0===e)return t;if(0===t||e===t)return e;if(!Number.isInteger(e)||!Number.isInteger(t))return NaN;for(;0!==t;)[e,t]=[t,e%t];return e<0?-e:e}function Nr(e,t){return e*t/Ar(e,t)}function Mr(e){if(!Number.isInteger(e)||e<0)return NaN;let t=1;for(let n=2;n<=e;n++)t*=n;return t}var Fr=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];function Tr(e){if(e<0)return NaN;let t=Math.PI,n=e*e*e;return e*Math.log(e)-e-.5*Math.log(e)+.5*Math.log(2*t)+1/(12*e)-1/(360*n)+1/(1260*n*e*e)}function Br(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Br(1-e));if(e>100)return Math.exp(Tr(e));e-=1;let t=Fr[0];for(let r=1;r<9;r++)t+=Fr[r]/(e+r);let n=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(n,e+.5)*Math.exp(-n)*t}function Lr(e){if(null==e)return null;let t=e.numericValue;if(null===t)return null;if("number"==typeof t)return t;if(t instanceof lt)return t.toNumber();if(Array.isArray(t)){let[e,n]=t;return"number"==typeof e&&"number"==typeof n?e/n:Number(e)/Number(n)}return!(t instanceof br.Complex)||t.im,null}function Or(e){if(null==e)return null;let t=e.numericValue;if(null===t)return null;if(t instanceof lt)return t;if("number"==typeof t)return e.engine.bignum(t);if(Array.isArray(t)){let[n,r]=t;return"number"==typeof n&&"number"==typeof r?e.engine.bignum(n/r):e.engine.bignum(n).div(r.toString())}return!(t instanceof br.Complex)||t.im,null}function zr(e){if(null==e)return null;let t=e.numericValue;if(null===t)return null;if("number"==typeof t)return Number.isInteger(t)&&t>=-_r&&t<=_r?t:null;if(t instanceof lt){if(t.isInteger()){let e=t.toNumber();if(e>=-_r&&e<=_r)return e}return null}if(e.isCanonical)return null;let n=t;if(Array.isArray(n)){let e,[t,r]=n;return e="number"==typeof t&&"number"==typeof r?t/r:Number(t)/Number(r),Number.isInteger(e)&&e>=-_r&&e<=_r?e:null}return null}function Ir(e,t){return"number"==typeof e&&Math.abs(e)<=t||e instanceof lt&&e.abs().lte(t)||e instanceof br.Complex&&Math.abs(e.re)<=t&&Math.abs(e.im)<=t?0:e}function Pr(e){let t=e<0?-1:1,n=1/(1+.3275911*(e=Math.abs(e)));return t*(1-((((1.061405429*n-1.453152027)*n+1.421413741)*n-.284496736)*n+.254829592)*n*Math.exp(-e*e))}function qr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===n){let n=qr(e,t,-1),r=qr(e,t,1);return void 0===n||void 0===r||Math.abs(n-r)>1e-5?NaN:(n+r)/2}let[r,i]=xr(e,t,{step:n>0?1:-1});return r}function Rr(e,t){if(0===(e=e.trim()).length)return[NaN,""];if(e.startsWith("+"))return Rr(e.slice(1),t);if(e.startsWith("-")){let[n,r]=Rr(e.slice(1),t);return[-n,r]}let n=10;if("string"==typeof t&&(t=t.toLowerCase()),e.startsWith("0x"))n=16,e=e.slice(2);else if(e.startsWith("0b"))n=2,e=e.slice(2);else{if("roman"===t)return function(e){if("N"===e)return[0,""];let t={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},n=0,r=0;for(let i=(e=e.toUpperCase()).length-1;i>=0;i--){let a=t[e[i]];if(void 0===a)return[n,e.slice(i)];a<r?n-=a:n+=a,r=a}return[n,""]}(e);if("base64"===t||"base-64"===t)try{return[parseInt(btoa(e)),""]}catch(i){return[NaN,""]}else"number"==typeof t?n=t:"string"==typeof t&&(n=parseInt(t))}let r=0;for(let a=0;a<e.length;a++){let t={" ":-1,"\xa0":-1,"\u2000":-1,"\u2001":-1,"\u2002":-1,"\u2003":-1,"\u2004":-1,"\u2005":-1,"\u2006":-1,"\u2007":-1,"\u2008":-1,"\u2009":-1,"\u200a":-1,"\u200b":-1,"\u202f":-1,"\u205f":-1,_:-1,",":-1,0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35}[e[a]];if(-1!==t){if(void 0===t)return[r,e.substring(a)];if(t>=n)return[r,e.substring(a)];r=r*n+t}}return[r,""]}function jr(e){var t;if("bigint"==typeof e)return e;if(e instanceof ut)return jr(e.toString());let n=e.toString(),r=n.match(/([^\.]+)(?:\.([0-9]+))?e(.+)$/);return r&&(n=r[1]+(null!==(t=r[2])&&void 0!==t?t:"")+"0".repeat(parseInt(r[3])-(r[2]?r[2].length:0))),BigInt(n)}var Kr=[BigInt(4),BigInt(2),BigInt(4),BigInt(2),BigInt(4),BigInt(6),BigInt(2),BigInt(6)];function Vr(e,t){let n=function(e){var t;if(e<Number.MAX_SAFE_INTEGER){let t=Er(Number(e)),n=new Map;for(let e of Object.keys(t))n.set(jr(e),t[e]);return n}let n=e,r=new Map,i=0,a=0,o=0,s=BigInt(10);for(;n%s===BigInt(0);)i+=1,o+=1,n/=s;for(s=BigInt(5);n%s===BigInt(0);)o+=1,n/=s;for(s=BigInt(3);n%s===BigInt(0);)a+=1,n/=s;for(s=BigInt(2);n%s===BigInt(0);)i+=1,n/=s;i>0&&r.set("2",i),a>0&&r.set("3",a),o>0&&r.set("5",o),s=BigInt(7);let l="",u=0;for(;s*s<n;){var c;n%s===BigInt(0)?(l||(l=s.toString()),r.set(l,(null!==(c=r.get(l))&&void 0!==c?c:0)+1),n/=s):(s+=Kr[u],l="",u=u<7?u+1:0)}n!==BigInt(1)&&r.set(n.toString(),(null!==(t=r.get(n.toString()))&&void 0!==t?t:0)+1);let d=new Map;for(let[p,h]of r)d.set(jr(p),h);return d}(e),r=BigInt(1),i=BigInt(1),a=jr(t);for(let[o,s]of n){let e=jr(s);r*=o**(e/a),i*=o**(e%a)}return[r,i]}function Ur(e){return null!==e&&Array.isArray(e)}function $r(e){return null!==e&&Array.isArray(e)&&"number"==typeof e[0]}function Hr(e){return null!==e&&Array.isArray(e)&&"bigint"==typeof e[0]}function Wr(e){return 0==e[0]}function Gr(e){return e[0]===e[1]}function Zr(e){return e[0]===-e[1]}function Jr(e){return Number(e[0])}function Xr(e){return Number(e[1])}function Yr(e){return e[0]<0}function Qr(e){return[-e[0],e[1]]}function ei(e){return e[0]<0?[-e[1],-e[0]]:[e[1],e[0]]}function ti(e){let t=e.numericValue;if(null!==t){if(Array.isArray(t))return t;if("number"==typeof t&&Number.isInteger(t))return[t,1];if(t instanceof lt&&t.isInteger())return[jr(t),BigInt(1)]}}function ni(e){return[Number(e[0]),Number(e[1])]}function ri(e,t){if(Array.isArray(t)||null!==t.numericValue&&yr.Complex,"number"==typeof e[0]&&!Number.isFinite(e[0]))return e;let n=Array.isArray(t)?t:t.numericValue;if(null===n)return e;if(Array.isArray(n)){if(Hr(n))return e=[jr(e[0]),jr(e[1])],[n[1]*e[0]+n[0]*e[1],n[1]*e[1]];if(!Number.isFinite(n[0]))return n;if(Hr(e)){let t=[jr(n[0]),jr(n[1])];return[t[1]*e[0]+t[0]*e[1],t[1]*e[1]]}return[n[1]*e[0]+n[0]*e[1],n[1]*e[1]]}return n instanceof lt?n.isNaN()?[Number.NaN,1]:n.isFinite()?(n.isInteger(),$r(e)&&(e=[jr(e[0]),jr(e[1])]),[e[0]+e[1]*jr(n.toString()),e[1]]):[n.isNegative()?-1/0:1/0,1]:n instanceof yr.Complex?[Number.NaN,1]:(!Number.isFinite(n)||Number.isInteger(n),Number.isFinite(n)?$r(e)?[e[0]+e[1]*n,e[1]]:[e[0]+e[1]*jr(n),e[1]]:[n,1])}function ii(e,t){if(Array.isArray(t)||null!==t.numericValue&&yr.Complex,Array.isArray(t))return $r(e)&&$r(t)||($r(e)&&(e=[jr(e[0]),jr(e[1])]),$r(t)&&(t=[jr(t[0]),jr(t[1])])),[e[0]*t[0],e[1]*t[1]];let n=t.numericValue;return null!==n&&"number"==typeof n?(Number.isInteger(n),$r(e)?[e[0]*n,e[1]]:[e[0]*jr(n),e[1]]):n instanceof lt?(n.isInteger(),$r(e)?[jr(n.toString())*jr(e[0]),jr(e[1])]:[jr(n.toString())*e[0],e[1]]):Array.isArray(n)?Hr(n)?[n[0]*jr(e[0]),n[1]*jr(e[1])]:$r(e)?[e[0]*n[0],e[1]*n[1]]:[e[0]*jr(n[0]),e[1]*jr(n[1])]:e}function ai(e,t){if(Number.isInteger(t),0===t)return[1,1];if(t<0&&(e=ei(e),t=-t),1===t)return e;if($r(e))return[Math.pow(e[0],t),Math.pow(e[1],t)];let n=jr(t);return[e[0]**n,e[1]**n]}function oi(e){if($r(e)){if(1===e[0]||1===e[1])return e;if(e[1]<0&&(e=[-e[0],-e[1]]),!Number.isFinite(e[1]))return[0,1];let t=Ar(e[0],e[1]);return t<=1?e:[e[0]/t,e[1]/t]}if(e[0]===BigInt(1)||e[1]===BigInt(1))return e;e[1]<0&&(e=[-e[0],-e[1]]);let t=function(e,t){for(;t!==BigInt(0);)[e,t]=[t,e%t];return e<0?-e:e}(e[0],e[1]);return t<=1?e:[e[0]/t,e[1]/t]}function si(e){e.isCanonical;let t=e.engine;if("Multiply"===e.head){let n=[],r=[1,1];for(let t of e.ops){let e=t.numericValue;null!==e&&("number"==typeof e&&Number.isInteger(e)||e instanceof lt&&e.isInteger()||Ur(e))?r=ii(r,t):n.push(t)}return r=oi(r),Gr(r)?[[1,1],e]:0===n.length?[r,t.One]:1===n.length?[r,n[0]]:[r,t.mul(n)]}if("Divide"===e.head){let[n,r]=si(e.op1),[i,a]=si(e.op2),o=oi(ii(n,ei(i)));return a.isOne?[o,r]:[o,t.div(r,a)]}if("Power"===e.head){if(null===e.op2.numericValue)return[[1,1],e];let[n,r]=si(e.op1);if(Gr(n))return[[1,1],e];let i=e.op2,a=zr(i);if(-1===a)return[ei(n),t.inv(r)];if(null!==a)return[ai(n,a),t.pow(r,i)];if(null!==i.numericValue&&Array.isArray(i.numericValue)){let[a,o]=ni(i.numericValue),[s,l]=ni(n);if(s>0&&1===Math.abs(a)){let[n,u]=kr(s,o),[c,d]=kr(l,o);return 1===n&&1===c?[[1,1],e]:[1===a?[n,c]:[c,n],t.pow(t.mul([t.number([u,d]),r]),i)]}}return[[1,1],e]}if(e.head,"Negate"===e.head){let[t,n]=si(e.op1);return[Qr(t),n]}let n=e.numericValue;if(null!==n){if(n instanceof lt){if(n.isInteger())return[[jr(n.toString()),BigInt(1)],t.One];if(n.isNegative())return[[-1,1],t.number(n.neg())]}if("number"==typeof n){if(Number.isInteger(n))return[[n,1],t.One];if(n<0)return[[-1,1],t.number(-n)]}if(Ur(n))return[n,t.One];if(n instanceof yr.Complex&&n.re<0)return[[-1,1],t.number(t.complex(-n.re,-n.im))]}return[[1,1],e]}function li(e,t,n){var r;if(e===t)return 0;let i=e.N(),a=t.N(),o=i.numericValue,s=a.numericValue;if(null===o||null===s){let n=e.sgn,r=t.sgn;return"number"!=typeof n||"number"!=typeof r?void 0:0===n&&0===r?0:n<0&&r>0?-1:n>0&&r<0?1:void 0}if(null!==(r=n)&&void 0!==r||(n=e.engine.tolerance),o instanceof yr.Complex&&s instanceof yr.Complex)return 0===Ir(o.re-s.re,n)&&0===Ir(o.im-s.im,n)?0:void 0;if(o instanceof yr.Complex||s instanceof yr.Complex||Ur(o)||Ur(s))return;if("number"==typeof o&&"number"==typeof s)return 0===Ir(s-o,n)?0:o<s?-1:1;let l=e.engine,u=l.bignum(s).sub(l.bignum(o));return 0===Ir(u,n)?0:u.isPos()?1:-1}function ui(e){e.ctor;let t,n=e.engine,r=e.params,i=[],a=[],o=n.domain(r[r.length-1]);for(let s of r.slice(0,-1))if("OptArg"===zt(s)){if(a.length>0)throw Error("Unexpected multiple OptArg in domain ".concat(e));if(t)throw Error("Unexpected OptArg after VarArg in domain ".concat(e));if(0===jt(s))throw Error("Unexpected empty OptArg in domain ".concat(e));for(let t of It(s)){if("OptArg"===zt(t))throw Error("Unexpected OptArg of OptArg in domain ".concat(e));if("VarArg"===zt(t))throw Error("Unexpected superfluous OptArg of VarArg in domain ".concat(e));a.push(n.domain(t))}}else if("VarArg"===zt(s)){let r=It(s);if(1!==r.length)throw Error("Invalid VarArg in domain ".concat(e));if("OptArg"===zt(r[0]))throw Error("Unexpectedf VarArg of OptArg in domain ".concat(e));if("VarArg"===zt(r[0]))throw Error("Unexpected VarArg of VarArg in domain ".concat(e));t=n.domain(r[0])}else{if(a.length>0)throw Error("Unexpected required parameter after OptArg in domain ".concat(e));if(t)throw Error("Unexpected required parameter after VarArg in domain ".concat(e));i.push(n.domain(s))}return[i,a,t,o]}function ci(e){let[t,n,r,i]=ui(e);return{params:t.map((e=>e.json)),optParams:n.map((e=>e.json)),restParam:null===r||void 0===r?void 0:r.json,result:i.json}}function di(e,t){var n;let r=[...t.params];return t.optParams.length>0&&r.push(["OptArg",...t.optParams]),t.restParam&&r.push(["VarArg",t.restParam]),"function"==typeof t.result?r.push(null!==(n=t.result(e,[]))&&void 0!==n?n:e.symbol("Undefined")):r.push(t.result),e.domain(["FunctionOf",...r])}var pi=m(g(),1);function hi(e){return"string"==typeof e&&(e.startsWith("$")&&e.endsWith("$"))}function fi(e){return"string"!=typeof e?null:e.startsWith("$$")&&e.endsWith("$$")?e.slice(2,-2):e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):null}function mi(e){if("ImaginaryUnit"===e.symbol)return 1;let t=e.numericValue;if(null!==t&&t instanceof pi.Complex&&0===t.re)return t.im;if("Negate"===e.head){let t=mi(e.op1);return null===t?null:-t}if("Multiply"===e.head&&2===e.nops){if("ImaginaryUnit"===e.op1.symbol)return Lr(e.op2);if("ImaginaryUnit"===e.op2.symbol)return Lr(e.op1)}return 0}function gi(e,t){if(e.symbol)t.add(e.symbol);else{if(e.head&&"string"!=typeof e.head&&gi(e.head,t),e.ops)for(let n of e.ops)gi(n,t);if(e.keys)for(let n of e.keys)gi(e.getKey(n),t)}}function vi(e,t){if(e.symbol){let n=e.engine.lookupSymbol(e.symbol);if(n&&void 0!==n.value)return;let r=e.engine.lookupFunction(e.symbol);if(r&&(r.signature.evaluate||r.signature.N))return;t.add(e.symbol)}else{if(e.head&&"string"!=typeof e.head&&vi(e.head,t),e.ops)for(let n of e.ops)vi(n,t);if(e.keys)for(let n of e.keys)vi(e.getKey(n),t)}}function yi(e,t){if(e.head,e.symbol){let n=e.engine.lookupSymbol(e.symbol);if(n&&void 0!==n.value)return;let r=e.engine.lookupFunction(e.symbol);if(r&&(r.signature.evaluate||r.signature.N))return;t.add(e.symbol)}else{if(e.head&&"string"!=typeof e.head&&yi(e.head,t),e.ops)for(let n of e.ops)yi(n,t);if(e.keys)for(let n of e.keys)yi(e.getKey(n),t)}}function bi(e,t){let n=t&&e.head!==t?[]:[e];if(e.ops)for(let r of e.ops)n.push(...bi(r,t));else if(e.keys)for(let r of e.keys)n.push(...bi(e.getKey(r),t));return n}function xi(e){return"bignum"===e.numericMode||"auto"===e.numericMode}function Di(e){return"auto"===e.numericMode||"complex"===e.numericMode}function wi(e){let t=0;for(let n=0;n<e.length;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return Math.abs(t)}function _i(e,t){if(null==t)return null;if("number"==typeof t)return Number.isInteger(t)?jr(t):null;if(wt(t)){let r=(_t(t)?t.num.toString():t).toLowerCase().replace(/[nd]$/g,"").replace(/[\u0009-\u000d\u0020\u00a0]/g,"");if(/\([0-9]+\)/.test(r)){var n;let[t,i,a,o]=null!==(n=r.match(/(.+)\(([0-9]+)\)(.*)$/))&&void 0!==n?n:[];r=i+a.repeat(Math.ceil(e.precision/a.length))+(null!==o&&void 0!==o?o:"")}return"nan"===r||"infinity"===r||"+infinity"===r||"-infinity"===r||r.includes(".")?null:jr(r)}return null}function Si(e){let t=e.numericValue;return null===t?null:"number"==typeof t&&Number.isInteger(t)||t instanceof lt&&t.isInteger()?jr(t):null}function Ci(e,t,n){let r=[];for(let i of t){let t=ki(i,e,n);null!==t&&(r.some((e=>e.isEqual(t)))||r.push(t))}return r}function Ei(e,t){let n=new Set;for(let{match:r,replace:i,condition:a,priority:o,id:s}of t){let t;if("string"==typeof a){let n=fi(a);if(n){let r=e.pattern(n);t=(e,t)=>{var n;return"True"===(null===(n=r.subs(e).evaluate())||void 0===n?void 0:n.symbol)}}}else t=a;n.add({match:e.pattern(r),replace:"function"==typeof i?i:e.pattern(i),priority:null!==o&&void 0!==o?o:0,condition:t,id:null!==s&&void 0!==s?s:e.box(r,{canonical:!1}).toString()+("function"==typeof i?"  ->  function":"  ->  "+e.box(i,{canonical:!1}).toString())})}return n}function ki(e,t,n,r){let{match:i,replace:a,condition:o,id:s}=e,u=i.match(t,l({substitution:n},r));return null===u||"function"==typeof o&&!o(u,t.engine)?null:"function"==typeof a?a(t,u):a.subs(u,{canonical:!0})}function Ai(e,t,n){var r,i;let a=null!==(r=null===n||void 0===n?void 0:n.iterationLimit)&&void 0!==r?r:1,o=0,s=null!==(i=null===n||void 0===n?void 0:n.once)&&void 0!==i&&i,l=!1,u=!1;try{for(;!l&&o<a;){l=!0;for(let r of t){let t=ki(r,e,{},n);if(null!==t&&t!==e){if(s)return t;l=!1,u=!0,e=t}}o+=1}}catch(c){console.error(c)}return u?e:null}var Ni=m(g(),1);function Mi(e){if("Power"===e.head&&null!==e.op2.numericValue){let t=zr(e.op2);return null!==t&&t>0?t:1}if("Multiply"===e.head){let t=1;for(let n of e.ops){let e=Mi(n);e>1&&(t+=e)}return t}return 1}function Fi(e){if("Power"===e.head&&null!==e.op2.numericValue){let t=zr(e.op2);return null!==t&&t>0?t:1}if("Multiply"===e.head){let t=1;for(let n of e.ops)t=Math.max(t,Mi(n));return t}return 1}function Ti(e){return e.symbol?e.symbol:e.ops?("string"==typeof e.head?e.head:Ti(e.head))+'"'+e.ops.map((e=>Ti(e))).filter((e=>e.length>0)).join('"'):""}var Bi=1e5;function Li(e){return e.sort(((e,t)=>{let n=Ti(e),r=Ti(t);if(!n&&!r)return Oi(e,t);if(!n)return 1;if(!r||n<r)return-1;if(n>r)return 1;let i=Mi(e),a=Mi(t);if(i!==a)return a-i;let o=Fi(e),s=Fi(t);return o!==s?o-s:Oi(e,t)}))}function Oi(e,t){var n,r;if(e===t||null!==e.numericValue&&e.numericValue===t.numericValue)return 0;let i=Lr(e);if(null!==i){let e=Lr(t);return null!==e?i-e:-1}if(e.numericValue instanceof Ni.Complex)return t.numericValue instanceof Ni.Complex?e.numericValue.re===t.numericValue.re?Math.abs(e.numericValue.im)===Math.abs(t.numericValue.im)?e.numericValue.im-t.numericValue.im:Math.abs(e.numericValue.im)-Math.abs(t.numericValue.im):e.numericValue.re-t.numericValue.re:null!==t.numericValue?1:-1;if(e.numericValue)return t.numericValue?1:-1;if("Sqrt"===e.head&&e.op1.numericValue)return"Sqrt"===t.head&&t.op1.numericValue?Oi(e.op1,t.op1):-1;if(e.symbol)return t.symbol?e.symbol===t.symbol?0:e.symbol>t.symbol?1:-1:null!==t.numericValue?1:-1;if(e.ops){if(t.ops){var a,o,s,l;let n=null!==(a=null===(o=e.functionDefinition)||void 0===o?void 0:o.complexity)&&void 0!==a?a:Bi,r=null!==(s=null===(l=t.functionDefinition)||void 0===l?void 0:l.complexity)&&void 0!==s?s:Bi;return n===r?"string"==typeof e.head&&"string"==typeof t.head?e.head===t.head?Ii(e)-Ii(t):e.head<t.head?1:-1:Ii(e)-Ii(t):n-r}return null!==t.numericValue||t.symbol?1:-1}if(e.string)return t.string?e.string.length!==t.string.length?t.string.length-e.string.length:t.string<e.string?-1:e.string>t.string?1:0:t.keys?-1:1;if(e.keys&&t.keys){if(e.keysCount!==t.keysCount)return t.keysCount-e.keysCount;let n=0,r=0;for(let e of t.keys){var u;n+=null!==(u=t.getKey(e).complexity)&&void 0!==u?u:Bi}for(let t of e.keys){var c;r+=null!==(c=e.getKey(t).complexity)&&void 0!==c?c:Bi}return r-n}return(null!==(n=e.complexity)&&void 0!==n?n:Bi)-(null!==(r=t.complexity)&&void 0!==r?r:Bi)}function zi(e,t){let{recursive:n=!1}=t;if(e.ops){let t=n?e.ops.map((e=>zi(e,{recursive:n}))):e.ops;return"Add"===e.head?e.engine._fn("Add",Li(t)):e.engine._fn(e.head,t.sort(Oi))}return e}function Ii(e){return null!==e.keys?1+e.keysCount:e.ops?("string"==typeof e.head?1:Ii(e.head))+[...e.ops].reduce(((e,t)=>e+Ii(t)),0):1}function Pi(e,t){if(!t||e.every((e=>!e.ops||e.head!==t)))return e;let n=[];for(let r of e)r.ops&&r.head===t?n.push(...Pi(r.ops,t)):n.push(r);return n.length,e.length,n.length===e.length?e:n}function qi(e){if(e.every((e=>"Sequence"!==e.head&&"Delimiter"!==e.head)))return e;let t=[];for(let r of e)if(r.isValid)if("Delimiter"===r.head){var n;let e=null!==(n=r.op1.ops)&&void 0!==n?n:[];0===e.length?t.push(r.engine.box(["Tupple"])):t.push(...qi(e))}else"Sequence"===r.head?r.ops&&t.push(...r.ops):t.push(r);else t.push(r);return t}function Ri(e,t){return void 0===t?e._fn("Tuple",[]):"Delimiter"===t.head?Ri(e,t.op1):"Sequence"===t.head?t:t.ops?e._fn("Tuple",t.ops):t}var ji=m(g(),1);function Ki(e){var t,n,r,i,a;return null!==e.string||null!==(null!==(t=null===(n=e.symbolDefinition)||void 0===n||null===(n=n.value)||void 0===n?void 0:n.string)&&void 0!==t?t:null)||void 0!==(null===(r=null!==(i=e.functionDefinition)&&void 0!==i?i:null===(a=e.symbolDefinition)||void 0===a||null===(a=a.value)||void 0===a?void 0:a.functionDefinition)||void 0===r?void 0:r.iterator)}function Vi(e){var t,n,r,i,a;return null!==e.string||null!==(null!==(t=null===(n=e.symbolDefinition)||void 0===n||null===(n=n.value)||void 0===n?void 0:n.string)&&void 0!==t?t:null)||void 0!==(null===(r=null!==(i=e.functionDefinition)&&void 0!==i?i:null===(a=e.symbolDefinition)||void 0===a||null===(a=a.value)||void 0===a?void 0:a.functionDefinition)||void 0===r?void 0:r.at)}function Ui(e){var t,n,r,i,a,o;if(null!==e.string||null!==(null!==(t=null===(n=e.symbolDefinition)||void 0===n||null===(n=n.value)||void 0===n?void 0:n.string)&&void 0!==t?t:null))return!0;let s=null!==(r=e.functionDefinition)&&void 0!==r?r:null===(i=e.symbolDefinition)||void 0===i||null===(i=i.value)||void 0===i?void 0:i.functionDefinition;return!!s&&(void 0!==s.at&&Number.isFinite(null!==(a=null===(o=s.size)||void 0===o?void 0:o.call(s,e))&&void 0!==a?a:1/0))}function*$i(e){let t=function(e){var t,n,r,i,a;let o=null!==(t=e.functionDefinition)&&void 0!==t?t:null===(n=e.symbolDefinition)||void 0===n||null===(n=n.value)||void 0===n?void 0:n.functionDefinition;if(null!==o&&void 0!==o&&o.iterator)return o.iterator(e);let s=null!==(r=null!==(i=e.string)&&void 0!==i?i:null===(a=e.symbolDefinition)||void 0===a||null===(a=a.value)||void 0===a?void 0:a.string)&&void 0!==r?r:null;if(null!==s){if(0===s.length)return{next:()=>({done:!0,value:void 0})};let t=0;return{next:()=>({value:e.engine.string(s.charAt(t++)),done:t>s.length})}}}(e);if(!t)return void(yield e);let n=e.engine.iterationLimit,r=0;for(;;){let{done:i,value:a}=t.next();if(i)return;if(r++>n)return void(yield e.engine.error("iteration-limit-exceeded"));yield a}}function Hi(e,t){var n,r;let i=null!==(n=e.functionDefinition)&&void 0!==n?n:null===(r=e.symbolDefinition)||void 0===r||null===(r=r.value)||void 0===r?void 0:r.functionDefinition;if(null!==i&&void 0!==i&&i.at)return i.at(e,t);let a=e.string;return a?t<1?e.engine.string(a.charAt(a.length+t)):e.engine.string(a.charAt(t-1)):void 0}var Wi,Gi=class{constructor(e,t,n){var r;if(this._isCanonical=!0,this._imaginary=0,this._posInfinityCount=0,this._negInfinityCount=0,this._naNCount=0,this._terms=[],null!==(r=n)&&void 0!==r||(n={}),this._isCanonical=!("canonical"in n)||n.canonical,this.engine=e,this._rational=xi(e)?[BigInt(0),BigInt(1)]:[0,1],this._bignum=e._BIGNUM_ZERO,this._number=0,t)for(let i of t)this.addTerm(i)}get isEmpty(){return this._isCanonical?0===this._terms.length&&Wr(this._rational)&&0===this._imaginary&&0===this._number&&this._bignum.isZero()&&0===this._negInfinityCount&&0===this._posInfinityCount&&0===this._naNCount:0===this._terms.length}addTerm(e,t){if(e.isNothing)return;if(e.isNaN||e.isImaginary&&!Di(this.engine))return void(this._naNCount+=1);if(this._isCanonical&&null!==e.numericValue){if(e.isInfinity)return void(e.isPositive?this._posInfinityCount+=1:this._negInfinityCount+=1);let n=ti(e);if(n)return void(this._rational=ri(this._rational,void 0===t?n:ii(n,t)));let r=e.numericValue;if(null!==r&&"number"==typeof r)return Number.isInteger(r),void(xi(this.engine)?this._bignum=this._bignum.add(r):this._number+=r);if(null!==r&&r instanceof lt)return r.isInteger(),void(this._bignum=this._bignum.add(r));if(null!==r&&r instanceof ji.Complex){let n=r.re,i=r.im;if(Number.isInteger(n)?(this._rational=ri(this._rational,ii([n,1],null!==t&&void 0!==t?t:[1,1])),n=0):(xi(this.engine)?this._bignum=this._bignum.add(n):this._number+=n,n=0),Number.isInteger(i)&&(void 0===t?this._imaginary+=i:$r(t)?this._imaginary+=i*t[0]/t[1]:this._imaginary+=this.engine.bignum(t[0]).mul(i).div(this.engine.bignum(t[1])).toNumber(),i=0),0===n&&0===i)return;e=this.engine.number(this.engine.complex(n,i))}}let n;if([n,e]=si(e),Wr(n))return;if(void 0!==t&&(n=ii(n,t)),"Negate"===e.head)return void this.addTerm(e.op1,Qr(n));if("Add"===e.head){for(let t of e.ops)this.addTerm(t,n);return}let r=!1;if(null===e.numericValue)if(this._terms.length>500){let t=e.hash;for(let i=0;i<this._terms.length;i++)if(null===this._terms[i].term.numericValue&&t===this._terms[i].term.hash&&e.isSame(this._terms[i].term)){this._terms[i].coef=ri(this._terms[i].coef,n),r=!0;break}}else for(let i=0;i<this._terms.length;i++)if(null===this._terms[i].term.numericValue&&e.isSame(this._terms[i].term)){this._terms[i].coef=ri(this._terms[i].coef,n),r=!0;break}r||this._terms.push({term:e,coef:n})}toString(){let e=this.terms("expression");return 0===e.length?"0":e.map((e=>e.toString())).join("\\n")}terms(e){let t=this.engine;if(this._naNCount>0)return[t.NaN];if(0!==this._imaginary&&!Di(t))return[t.NaN];if(this._posInfinityCount>0&&this._negInfinityCount>0)return[t.NaN];if(this._posInfinityCount>0)return[t.PositiveInfinity];if(this._negInfinityCount>0)return[t.NegativeInfinity];let n=[];for(let{coef:r,term:i}of this._terms)Wr(r)||(Gr(r)?n.push(i):Zr(r)?n.push(t.neg(i)):1===Xr(r)?n.push(t.mul([t.number(r[0]),i])):1===Jr(r)?n.push(t.div(i,t.number(r[1]))):n.push(t.mul([t.number(r),i])));if("numeric"===e)if(xi(this.engine)){let e=this._bignum.add(this._number);Wr(this._rational)||(e=e.add(t.bignum(this._rational[0]).div(t.bignum(this._rational[1])))),0!==this._imaginary?n.push(t.number(t.complex(e.toNumber(),this._imaginary))):e.isZero()||n.push(t.number(e))}else{let e=this._bignum.toNumber()+this._number;Wr(this._rational)||(e+=Jr(this._rational)/Xr(this._rational)),0!==this._imaginary?n.push(t.number(t.complex(e,this._imaginary))):0!==e&&n.push(t.number(e))}else{if(Wr(this._rational)||n.push(t.number(this._rational)),0!==this._imaginary){if(!Di(t))return[t.NaN];n.push(t.number(t.complex(0,this._imaginary)))}if(xi(this.engine)){let e=this._bignum.add(this._number);e.isZero()||n.push(t.number(e))}else this._bignum.isZero()||n.push(t.number(this._bignum)),0!==this._number&&n.push(t.number(this._number))}return Pi(n,"Add")}asExpression(e){let t=this.engine,n=this.terms(e);return 0===n.length?t.Zero:1!==n.length||Vi(n[0])?t._fn("Add",Li(n)):n[0]}},Zi=["InvalidDomain","DictionaryOf","FunctionOf","ListOf","TupleOf","Intersection","Union","OptArg","VarArg"],Ji={Functions:["FunctionOf",["VarArg","Anything"],"Anything"],NumericFunctions:["FunctionOf","Numbers",["VarArg","Numbers"],"Numbers"],RealFunctions:["FunctionOf","ExtendedRealNumbers",["VarArg","ExtendedRealNumbers"],"ExtendedRealNumbers"],LogicOperators:["FunctionOf","Booleans",["VarArg","Booleans"],"Booleans"],Predicates:["FunctionOf","Anything",["VarArg","Anything"],"Booleans"],RelationalOperators:["FunctionOf","Anything","Anything","Booleans"]},Xi={Anything:[],Values:"Anything",Domains:"Anything",Void:"NothingDomain",NothingDomain:["Booleans","Strings","Symbols","Tuples","Lists","Dictionaries","ImaginaryNumbers","TranscendentalNumbers","PositiveIntegers","NegativeIntegers","NonPositiveIntegers","NonNegativeIntegers","PositiveNumbers","NegativeNumbers","NonPositiveNumbers","NonNegativeNumbers","LogicOperators","RelationalOperators"],Booleans:"Values",Strings:"Values",Symbols:"Values",Collections:"Values",Lists:"Collections",Dictionaries:"Collections",Sequences:"Collections",Tuples:"Collections",Sets:"Collections",Functions:"Anything",Predicates:"Functions",LogicOperators:"Predicates",RelationalOperators:"Predicates",NumericFunctions:"Functions",RealFunctions:"NumericFunctions",Numbers:"Values",ExtendedComplexNumbers:"Numbers",ComplexNumbers:"ExtendedComplexNumbers",ImaginaryNumbers:"ComplexNumbers",ExtendedRealNumbers:"ExtendedComplexNumbers",RealNumbers:["ComplexNumbers","ExtendedRealNumbers"],PositiveNumbers:"NonNegativeNumbers",NonNegativeNumbers:"RealNumbers",NonPositiveNumbers:"NegativeNumbers",NegativeNumbers:"RealNumbers",TranscendentalNumbers:"RealNumbers",AlgebraicNumbers:"RealNumbers",RationalNumbers:"AlgebraicNumbers",Integers:"RationalNumbers",PositiveIntegers:"NonNegativeIntegers",NonNegativeIntegers:"Integers",NonPositiveIntegers:"NegativeIntegers",NegativeIntegers:"Integers"};function Yi(e){return!!e&&void 0!==Xi[e]}function Qi(e){if(Wi||(Wi={},Qi("Void")),Wi[e])return Array.from(Wi[e]);let t=[];if("string"!=typeof e||!Xi[e]){if(!Array.isArray(e))throw Error("Unknown domain literal ".concat(e));if(!Zi.includes(e[0]))throw Error("Unknown domain constructor ".concat(e[0]));return"FunctionOf"===e[0]?Qi("Functions"):"TupleOf"===e[0]?Qi("Tuples"):"ListOf"===e[0]?Qi("Lists"):"DictionaryOf"===e[0]?Qi("Dictionaries"):"OptArg"===e[0]||"VarArg"===e[0]?Qi(e[1]):("Literal"===e[0]||"Union"===e[0]||e[0],["Anything"])}if("string"==typeof Xi[e])t=[Xi[e],...Qi(Xi[e])];else if(Array.isArray(Xi[e]))for(let n of Xi[e])t.push(n),t.push(...Qi(n));return Wi[e]=new Set(t),t}var ea=m(g(),1),ta=m(g(),1);function na(e){if("Negate"===e.head)return[-1,e.op1];let t=e.numericValue;if(null===t)return[1,e];let n=e.engine;return"number"==typeof t&&t<0?[-1,n.number(-t)]:t instanceof lt&&t.isNegative()?[-1,n.number(t.neg())]:t instanceof ta.Complex&&t.re<0?[-1,n.number(n.complex(-t.re,-t.im))]:$r(t)&&t[0]<0||Hr(t)&&t[0]<0?[-1,n.number([-t[0],t[1]])]:[1,e]}function ra(e,t,n,r){var i;if(null!==(null!==(i=null===e||void 0===e?void 0:e.numericValue)&&void 0!==i?i:null))return e.engine.number(function(e,t,n,r){var i;let a=e.numericValue,o=e.engine;return"number"==typeof a?xi(o)&&n?o.chop(n(o.bignum(a))):o.chop(t(a)):a instanceof lt?o.chop(null!==(i=null===n||void 0===n?void 0:n(a))&&void 0!==i?i:t(a.toNumber())):$r(a)?xi(o)&&n?o.chop(n(o.bignum(a[0]).div(a[1]))):o.chop(t(a[0]/a[1])):Hr(a)?n?o.chop(n(o.bignum(a[0]).div(o.bignum(a[1])))):o.chop(t(Number(a[0])/Number(a[1]))):a instanceof ta.Complex&&r&&Di(o)?o.chop(r(a)):NaN}(e,t,n,r))}function ia(e,t,n,r,i){if(null!==e.numericValue&&null!==t.numericValue)return e.engine.number(function(e,t,n,r,i){var a,o,s,l,u,c,d;null!==e.numericValue&&t.numericValue;let p=e.engine,h=e.numericValue;$r(h)&&(h=h[0]/h[1]);let f,m,g=t.numericValue;return $r(g)&&(g=g[0]/g[1]),xi(p)||"number"!=typeof h||"number"!=typeof g?(h instanceof lt?f=h:Hr(h)?f=p.bignum(h[0]).div(p.bignum(h[1])):null!==h&&"number"==typeof h&&(f=p.bignum(h)),g instanceof lt?m=g:Hr(g)?f=p.bignum(g[0]).div(p.bignum(g[1])):null!==g&&"number"==typeof g&&(m=p.bignum(g)),f&&m?null!==(a=null===r||void 0===r?void 0:r(f,m))&&void 0!==a?a:n(f.toNumber(),m.toNumber()):(h instanceof ta.Complex||g instanceof ta.Complex)&&i&&Di(p)?i(p.complex(null!==(o=null!==(s=h)&&void 0!==s?s:null===(l=f)||void 0===l?void 0:l.toNumber())&&void 0!==o?o:NaN),p.complex(null!==(u=null!==(c=g)&&void 0!==c?c:null===(d=m)||void 0===d?void 0:d.toNumber())&&void 0!==u?u:NaN)):NaN):n(h,g)}(e,t,n,r,i))}function aa(e,t,n){return"all"===e||"none"!==e&&("first"===e?0===n:"rest"===e?0!==n:"last"===e?n===t:"most"!==e||n!==t)}function oa(e){return e.every((e=>e.isCanonical))?e:e.map((e=>e.canonical))}function sa(e,t,n){if(t=qi(t=oa(t)),!e.strict||t.length===n)return t;let r=[...t.slice(0,n)],i=Math.min(n,t.length);for(;i<n;)r.push(e.error("missing")),i+=1;for(;i<t.length;)r.push(e.error("unexpected-argument",t[i])),i+=1;return r}function la(e,t,n){var r,i;let a="number"==typeof n?n:null===n||void 0===n?void 0:n.count,o="number"==typeof n||null===(r=null===n||void 0===n?void 0:n.flatten)||void 0===r||r;if(t=oa(t),o&&(t=qi(t)),"string"==typeof o&&Pi(t,o),!e.strict){for(let n of t)Ui(n)||n.infer(e.Numbers);return t}let s=!0;null!==(i=a)&&void 0!==i||(a=t.length);let l=[];for(let h=0;h<=Math.max(a-1,t.length-1);h++){var u,c,d;let n=t[h];if(h>a-1)s=!1,l.push(e.error("unexpected-argument",n));else if(void 0===n)s=!1,l.push(e.error("missing"));else if(!n.symbol||e.lookupSymbol(n.symbol)||e.lookupFunction(n.symbol))if(n.isNumber||null!==(u=n.domain)&&void 0!==u&&u.isNumber)l.push(n);else if(n.isValid)if(n.domain)if(Ui(n)){for(let e of $i(n)){var p;if(!e.isNumber&&(null===(p=e.domain)||void 0===p||!p.isNumber)){s=!1;break}}s?l.push(n):l.push(e.domainError("Numbers",n.domain,n))}else null!==(c=n.symbolDefinition)&&void 0!==c&&c.inferredDomain&&n.domain.isCompatible(e.Numbers,"contravariant")||null!==(d=n.functionDefinition)&&void 0!==d&&d.signature.inferredSignature&&n.domain.isCompatible(e.Numbers,"contravariant")?l.push(n):(s=!1,l.push(e.domainError("Numbers",n.domain,n)));else l.push(n);else s=!1,l.push(n);else l.push(n)}if(s)for(let h of l)if(Ui(h))for(let t of $i(h))t.infer(e.Numbers);else h.infer(e.Numbers);return l}function ua(e,t,n){return null==t?e.error("missing"):void 0===n?e.error("unexpected-argument",t):("Sequence"===(t=t.canonical).head&&(t=t.op1),t.isValid&&t.domain&&!t.domain.isCompatible(n)?e.domainError(n,t.domain,t):t)}function ca(e,t,n){if(t.length===n.length&&t.every(((e,t)=>!e.domain||e.domain.isCompatible(n[t]))))return t;let r=[];for(let i=0;i<=n.length-1;i++)r.push(ua(e,t[i],n[i]));for(let i=n.length;i<=t.length-1;i++)r.push(e.error("unexpected-argument",t[i]));return r}function da(e){var t,n,r,i,a;if(!e)return;let o=e.engine,s=null,l=null,u=null;return"Tuple"!==e.head&&"Triple"!==e.head&&"Pair"!==e.head&&"Single"!==e.head?s=e:(s=null!==(t=e.ops[0])&&void 0!==t?t:null,l=null!==(n=null===(r=e.ops[1])||void 0===r?void 0:r.canonical)&&void 0!==n?n:null,u=null!==(i=null===(a=e.ops[2])||void 0===a?void 0:a.canonical)&&void 0!==i?i:null),"Hold"===s.head&&(s=s.op1),s.symbol?(o.declare(s.symbol,{domain:"Integers"}),s.bind(),s=o.hold(s)):s=o.domainError("Symbols",s.domain,s),l&&l.isFinite&&(l=ua(o,l,"Integers")),u&&u.isFinite&&(u=ua(o,u,"Integers")),l&&u?o.tuple([s,l,u]):u?o.tuple([s,o.One,u]):l?o.tuple([s,l]):s}function pa(e){var t;let n,r=1,i=r+Sr,a=!0;if(!e||"Tuple"!==e.head&&"Triple"!==e.head&&"Pair"!==e.head&&"Single"!==e.head)e&&(n=null!==(t="Hold"===e.head?e.op1.symbol:e.symbol)&&void 0!==t?t:"Nothing",r=1,i=r+Sr);else{var o,s;if(n=null!==(o="Hold"===e.op1.head?e.op1.op1.symbol:e.op1.symbol)&&void 0!==o?o:"Nothing",r=null!==(s=zr(e.op2))&&void 0!==s?s:1,Number.isFinite(r)||(a=!1),e.op3.isNothing||e.op3.isInfinity)a=!1;else{let t=zr(e.op3);null===t?a=!1:(i=t,Number.isFinite(i)||(a=!1))}!a&&Number.isFinite(r)&&(i=r+Sr)}return[n,r,i,a]}var ha={Add:["+",11],Negate:["-",14],Subtract:["-",11],Multiply:["*",12],Divide:["/",13],Equal:["===",8],NotEqual:["!==",8],LessEqual:["<=",9],GreaterEqual:[">=",9],Less:["<",9],Greater:[">",9],And:["&&",4],Or:["||",3],Not:["!",14]},fa={Abs:"Math.abs",Add:(e,t)=>1===e.length?t(e[0]):"(".concat(e.map((e=>t(e))).join(" + "),")"),Arccos:"Math.acos",Arcosh:"Math.acosh",Arsin:"Math.asin",Arsinh:"Math.asinh",Arctan:"Math.atan",Artanh:"Math.atanh",Ceiling:"Math.ceil",Chop:"_SYS.chop",Cos:"Math.cos",Cosh:"Math.cosh",Exp:"Math.exp",Floor:"Math.floor",Gamma:"_SYS.gamma",GCD:"_SYS.gcd",LCM:"_SYS.lcm",Limit:(e,t)=>"_SYS.limit(".concat(t(e[0]),", ").concat(t(e[1]),")"),Ln:"Math.log",List:(e,t)=>"[".concat(e.map((e=>t(e))).join(", "),"]"),Log:(e,t)=>1===e.length?"Math.log(".concat(t(e[0]),")"):"(Math.log(".concat(t(e[0]),") / Math.log(").concat(t(e[1]),"))"),LogGamma:"_SYS.lngamma",Lb:"Math.log2",Max:"Math.max",Min:"Math.min",Power:(e,t)=>{let n=e[0];if(null===n)throw new Error("Power: no argument");let r=Lr(e[1]);return.5===r?"Math.sqrt(".concat(t(n),")"):r===1/3?"Math.cbrt(".concat(t(n),")"):1===r?t(n):-1===r?"1 / (".concat(t(n),")"):-.5===r?"1 / Math.sqrt(".concat(t(n),")"):"Math.pow(".concat(t(n),", ").concat(t(e[1]),")")},Range:(e,t)=>{if(0===e.length)return"[]";if(1===e.length)return"Array.from({length: ".concat(t(e[0]),"}, (_, i) => i)");let n=t(e[0]),r=t(e[1]),i=e[2]?t(e[2]):"1";if(null===n)throw new Error("Range: no start");if(null===r&&(r=n,n="1"),"0"===i)throw new Error("Range: step cannot be zero");if(1===parseFloat(i)){let e=parseFloat(r),t=parseFloat(n);return null!==e&&null!==t?e-t<50?"[".concat(Array.from({length:e-t+1},((e,n)=>t+n)).join(", "),"]"):"Array.from({length: ".concat(e-t+1," \n        }, (_, i) => ").concat(n," + i)"):"Array.from({length: ".concat(r," - ").concat(n," + 1\n      }, (_, i) => ").concat(n," + i)")}return"Array.from({length: Math.floor((".concat(r," - ").concat(n,") / ").concat(i,") + 1}, (_, i) => ").concat(n," + i * ").concat(i,")")},Root:(e,t)=>{let n=e[0];if(null===n)throw new Error("Root: no argument");let r=e[1];return null===r?"Math.sqrt(".concat(t(n),")"):"Math.pow(".concat(t(n),", 1 / (").concat(t(r),"))")},Random:"Math.random",Round:"Math.round",Square:(e,t)=>{let n=e[0];if(null===n)throw new Error("Square: no argument");return"Math.pow(".concat(t(n),", 2)")},Sgn:"Math.sign",Sin:"Math.sin",Sinh:"Math.sinh",Sqrt:"Math.sqrt",Tan:"Math.tan",Tanh:"Math.tanh"},ma=class extends Function{constructor(e){return super("_SYS","_","return ".concat(e)),this.sys={factorial:Mr,gamma:Br,lngamma:Tr,gcd:Ar,lcm:Nr,chop:Ir,limit:qr},new Proxy(this,{apply:(e,t,n)=>super.apply(t,[this.sys,...n]),get:(t,n)=>"toString"===n?()=>e:t[n]})}};function ga(e){let t=e.unknowns;return function(e,t){let n=ya(e,t);return new ma(n)}(e,{operators:e=>ha[e],functions:e=>fa[e],var:e=>{let n={Pi:"Math.PI",ExponentialE:"Math.E",NaN:"Number.NaN",ImaginaryUnit:"Number.NaN",Half:"0.5",MachineEpsilon:"Number.EPSILON",GoldenRatio:"((1 + Math.sqrt(5)) / 2)",CatalanConstant:"0.91596559417721901",EulerGamma:"0.57721566490153286"}[e];return void 0!==n?n:t.includes(e)?"_.".concat(e):void 0},string:e=>JSON.stringify(e),number:e=>e.toString(),indent:0,ws:e=>null!==e&&void 0!==e?e:""})}function va(e,t,n,r){var i;if("Error"===e)throw new Error("Error");if("Sequence"===e)return 0===t.length?"":"(".concat(t.map((e=>ya(e,r,n))).join(", "),")");if("Sum"===e||"Product"===e)return function(e,t,n){if(null===t)throw new Error("Sum/Product: no arguments");if(!t[0])throw new Error("Sum/Product: no body");let[r,i,a,o]=pa(t[1]),s="Sum"===e?"+":"*";if(!r){let e=ba(),r=ba();return"".concat(ya(t[0],n),".reduce((").concat(r,", ").concat(e,") => ").concat(r," ").concat(s," ").concat(e,", ").concat("+"===s?"0":"1",")")}let u=ya(t[0],l(l({},n),{},{var:e=>e===r?r:n.var(e)})),c=ba(),d=ba();return"(() => {\n  let ".concat(d," = ").concat("+"===s?"0":"1",";\n  let ").concat(r," = ").concat(i,";\n  const _fn = () => ").concat(u,";\n  while (").concat(c," <= ").concat(a,") {\n    ").concat(d," ").concat(s,"= _fn();\n    ").concat(c,"++;\n  }\n  return ").concat(d,";\n})()")}(e,t,r);if(t.every((e=>!Ki(e)))){var a;let i=null===(a=r.operators)||void 0===a?void 0:a.call(r,e);if(("NotEqual"===e||"Equal"===e||"Less"===e||"Greater"===e||"LessEqual"===e||"GreaterEqual"===e)&&t.length>2&&i){let n=[];for(let a=0;a<t.length-1;a++)n.push(va(e,[t[a],t[a+1]],i[1],r));return"(".concat(n.join(") && ("),")")}if(void 0!==i){if(null===t)return"";let e;return e=1===t.length?"".concat(i[0]).concat(ya(t[0],r,i[1])):t.map((e=>ya(e,r,i[1]))).join(" ".concat(i[0]," ")),i[1]<n?"(".concat(e,")"):e}}if("Function"===e){let e=t.slice(1).map((e=>e.symbol));return"((".concat(e.join(", "),") => ").concat(ya(t[0].canonical,l(l({},r),{},{var:t=>e.includes(t)?t:r.var(t)})),")")}if("Declare"===e)return"let ".concat(t[0].symbol);if("Assign"===e)return"".concat(t[0].symbol," = ").concat(ya(t[1],r));if("Return"===e)return"return ".concat(ya(t[0],r));if("If"===e){if(3!==t.length)throw new Error("If: wrong number of arguments");return"((".concat(ya(t[0],r),") ? (").concat(ya(t[1],r),") : (").concat(ya(t[2],r),"))")}if("Block"===e){let e=[];for(let r of t)"Declare"===r.head&&e.push(r.ops[0].symbol);if(1===t.length&&0===e.length)return ya(t[0],r);let n=t.map((t=>ya(t,l(l({},r),{},{var:t=>e.includes(t)?t:r.var(t)}))));return n[n.length-1]="return ".concat(n[n.length-1]),"(() => {".concat(r.ws("\n")).concat(n.join(";".concat(r.ws("\n")))).concat(r.ws("\n"),"})()")}let o=null===(i=r.functions)||void 0===i?void 0:i.call(r,e);if(!o)throw new Error("Unknown function ".concat(e));if("function"==typeof o){if(1===t.length&&Ui(t[0])){let e=ba();return"(".concat(ya(t[0],r),").map((").concat(e,") => ").concat(o(t[0].engine.box(e),(e=>ya(e,r))),")")}return o(t,(e=>ya(e,r)))}if(null===t)return"".concat(o,"()");if(1===t.length&&Ui(t[0])){let e=ba();return"(".concat(ya(t[0],r),").map((").concat(e,") => ").concat(o,"(").concat(ya(t[0].engine.box(e),r),"))")}return"".concat(o,"(").concat(t.map((e=>ya(e,r))).join(", "),")")}function ya(e,t){var n,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(void 0===e)return"";if(!e.isValid)throw new Error("Invalid expression");let a=Lr(e);if(null!==a)return t.number(a);let o=e.symbol;if(null!==o)return null!==(n=null===(r=t.var)||void 0===r?void 0:r.call(t,o))&&void 0!==n?n:o;if(null!==e.string)return t.string(o);let s=e.keys;if(null!==s){let n=[];for(let r of s){let i=e.getKey(r);i&&n.push("".concat(r,": ").concat(ya(i,t,0)))}return"{".concat(n.join(", "),"}")}let l=e.head;return"string"==typeof l?va(l,e.ops,i,t):""}function ba(){return"_".concat(Math.random().toString(36).substring(2))}var xa=class{constructor(e,t){this.engine=e,void 0!==(null===t||void 0===t?void 0:t.latex)&&(this._latex=t.latex)}valueOf(){var e,t,n,r;return"True"===this.symbol||"False"!==this.symbol&&(this.head&&"string"==typeof this.head&&["List","Set","Sequence","Tuple","Pair","Single","Triple"].includes(this.head)?null===(e=this.ops)||void 0===e?void 0:e.map((e=>e.valueOf())):null!==(t=null!==(n=null!==(r=Lr(this))&&void 0!==r?r:this.string)&&void 0!==n?n:this.symbol)&&void 0!==t?t:JSON.stringify(this.json))}toString(){if(this.symbol)return this.symbol;if(this.string)return this.string;let e=this.numericValue;if(null!==e){if("number"==typeof e)return e.toString();if($r(e))return"(".concat(e[0].toString(),"/").concat(e[1].toString(),")");if(Hr(e))return"(".concat(e[0].toString(),"/").concat(e[1].toString(),")");if(e instanceof ea.Complex){let t=1===e.im?"":-1===e.im?"-":e.im.toString();return 0===e.re?t+"i":e.im<0?"".concat(e.re.toString()).concat(t,"i"):"(".concat(e.re.toString(),"+").concat(t,"i)")}}return JSON.stringify(this.json)}print(){this.toString()}[Symbol.toPrimitive](e){if("number"===e){let e=this.valueOf();return"number"==typeof e?e:null}return this.toString()}toJSON(){return this.json}get rawJson(){return this.json}get scope(){return null}is(e){return null!=e&&this.isSame(this.engine.box(e))}get latex(){var e;return null!==(e=this._latex)&&void 0!==e?e:this.engine.serialize(this)}set latex(e){this._latex=e}get symbol(){return null}get isNothing(){return!1}get string(){return null}getSubexpressions(e){return bi(this,e)}get subexpressions(){return this.getSubexpressions("")}get symbols(){let e=new Set;return gi(this,e),Array.from(e)}get unknowns(){let e=new Set;return vi(this,e),Array.from(e)}get freeVariables(){let e=new Set;return yi(this,e),Array.from(e)}get errors(){return this.getSubexpressions("Error")}get ops(){return null}get nops(){return 0}get op1(){return this.engine.Nothing}get op2(){return this.engine.Nothing}get op3(){return this.engine.Nothing}get isValid(){return!0}get isPure(){return!1}get isExact(){return!0}get isConstant(){return!1}get canonical(){return this}subs(e,t){return null!==t&&void 0!==t&&t.canonical?this.canonical:this}solve(e){return null}replace(e){return null}has(e){return!1}get isNaN(){}get isZero(){}get isNotZero(){}get isOne(){}get isNegativeOne(){}get isInfinity(){}get isFinite(){}get isEven(){}get isOdd(){}get isPrime(){}get isComposite(){}get numericValue(){return null}get shape(){return[]}get rank(){return 0}get sgn(){return null}isLess(e){}isLessEqual(e){}isGreater(e){}isGreaterEqual(e){}get isPositive(){}get isNonNegative(){}get isNegative(){}get isNonPositive(){}isCompatible(e,t){return!1}get description(){if(this.baseDefinition&&this.baseDefinition.description)return"string"==typeof this.baseDefinition.description?[this.baseDefinition.description]:this.baseDefinition.description}get url(){var e,t;return null!==(e=null===(t=this.baseDefinition)||void 0===t?void 0:t.url)&&void 0!==e?e:void 0}get wikidata(){var e,t;return null!==(e=null===(t=this.baseDefinition)||void 0===t?void 0:t.wikidata)&&void 0!==e?e:void 0}get complexity(){}get baseDefinition(){}get symbolDefinition(){}get functionDefinition(){}infer(e){return!1}bind(){}reset(){}get keys(){return null}get keysCount(){return 0}getKey(e){}hasKey(e){return!1}get value(){return this.N().valueOf()}set value(e){throw new Error("Can't change the value of \\(".concat(this.latex,"\\)"))}get domain(){}set domain(e){throw new Error("Can't change the domain of \\(".concat(this.latex,"\\)"))}get isNumber(){}get isInteger(){}get isRational(){}get isAlgebraic(){return!1}get isReal(){}get isExtendedReal(){}get isComplex(){}get isImaginary(){}get isExtendedComplex(){}simplify(e){return this}evaluate(e){return this.simplify()}N(e){return this.evaluate({numericMode:!0})}compile(){var e;let t=arguments.length>1?arguments[1]:void 0;if("javascript"!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript"))return;null!==(e=t)&&void 0!==e||(t={optimize:["simplify"]});let n=this;return t.optimize.includes("simplify")&&(n=n.simplify()),t.optimize.includes("evaluate")&&(n=n.evaluate()),ga(n)}},Da=class e extends xa{constructor(e,t,n){if(super(e,n),"string"==typeof t){if(!Yi(t))throw Error('Unknown domain literal "'.concat(t,'"'));return this.base=t,this.ctor=null,void(this.params=[])}if(!Array.isArray(t))throw Error("Expected a domain expression");if(!Zi.includes(t[0]))throw Error('Unknown domain constructor "'.concat(t[0]));let r=t[0];if(this.ctor=r,"OptArg"===r||"VarArg"===r)throw Error('Unexpected domain constructor "'.concat(r,'" outside of FunctionOf'));if(this.params=t.slice(1).map((e=>e instanceof xa?e.json:e)),"FunctionOf"===r&&(this.base="Functions",e.strict&&ui(this)),"DictionaryOf"===r&&(this.base="Dictionaries"),"ListOf"===r&&(this.base="Lists"),"TupleOf"===r&&(this.base="Tuples"),"Covariant"===r||"Contravariant"===r||"Bivariant"===r||"Invariant"===r){let n=e.domain(t[1]);if(this.ctor=r,this.base=n.base,this.params=[n.json],2!==t.length)throw Error('Invalid "'.concat(r,'" in domain "').concat(t,'"'))}if("Union"===r||"Intersection"===r){let t;if("Union"===r)for(let n of this.params)t=Ca(t,e.domain(n));else for(let n of this.params)t=Ea(t,e.domain(n));this.base=t.base}}get isCanonical(){return!0}get canonical(){return this}get isValid(){return!0}get json(){return this.ctor?[this.ctor,...this.params]:this.base}get hash(){return void 0===this._hash&&(this._hash=wi(JSON.stringify(this.json))),this._hash}isCompatible(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"covariant",r=this.json,i=t instanceof e?t.json:t,a=Array.isArray(i)?i[0]:null;if(a){let e=i[1];if("Covariant"===a)return _a(r,e);if("Contravariant"===a)return _a(e,r);if("Invariant"===a)return!_a(e,r)&&!_a(r,e);if("Bivariant"===a)return _a(r,e)&&_a(e,r)}return"covariant"===n?_a(r,i):"contravariant"===n?_a(i,r):"bivariant"===n?_a(i,r)&&_a(r,i):!_a(i,r)&&!_a(r,i)}isEqual(t){return t instanceof e&&(this===t||this.isCompatible(t,"invariant"))}isSame(e){return this.isEqual(e)}match(t,n){return t instanceof e&&this.isCompatible(t,"invariant")?{}:null}get head(){return"Domain"}get domain(){return this.engine.domain("Domains")}get isFunction(){return"Functions"===this.base}get isNumeric(){return this.isCompatible(this.engine.domain("Numbers"))}};function wa(e){if(e instanceof Da)return!0;if(e instanceof xa&&(e=e.json),"string"==typeof e)return Yi(e);if(!Array.isArray(e)||e.length<=1)return!1;let t=e[0];return!("string"!=typeof t||!Zi.includes(t))&&("ListOf"===t||"OptArg"===t||"VarArg"===t?2===e.length&&wa(e[1]):"FunctionOf"===t||"TupleOf"===t||"Intersection"===t||"Union"===t?e.slice(1).every(wa):e.every((e=>null!==e)))}function _a(e,t){let[n,r]=Sa([e],t);return!(!n||0!==r.length)}function Sa(e,t){let n=e.shift(),r="string"==typeof t?t:null;if("Anything"===r)return[!0,e];let i="string"==typeof n?n:null;if(i&&r)return i===r?[!0,e]:[Qi(i).includes(r),e];if(r){let t=n[0];return"FunctionOf"===t?["Functions"===r,e]:"DictionaryOf"===t?["Dictionaries"===r,e]:"ListOf"===t?["Lists"===r,e]:"TupleOf"===t?["Tuples"===r,e]:[!0,e]}let a=t[0];if("FunctionOf"===a){if("Functions"===i)return[!0,e];if(i)return[!1,e];if("FunctionOf"!==n[0])return[!1,e];if(1===n.length&&1===t.length)return[!0,e];if(!_a(n[n.length-1],t[t.length-1]))return[!1,e];let r=n.slice(1,-1),a=t.slice(1,-1);for(let t=0;t<=r.length-1;t++){if(0===a.length)return"OptArg"!==(Array.isArray(r[t])?r[t][0]:null)?[!1,e]:[!0,e];{let n=!1;if([n,a]=Sa(a,r[t]),!n)return[!1,e]}}return[0===a.length,e]}if("Intersection"===a)return[t.slice(1,-1).every((e=>_a(n,e))),e];if("Union"===a)return[t.slice(1,-1).some((e=>_a(n,e))),e];if("OptArg"===a)return"NothingDomain"===i?[!0,e]:Sa([n,...e],t[1]);if("VarArg"===a){let r=t[1];if(!_a(n,r))return[!1,e];n=e.shift();let i=!0;for(;e.length>0&&i;)[i,e]=Sa(e,r),n=e.shift();return[!0,e]}if("TupleOf"===a){if(!Array.isArray(n)||"TupleOf"!==n[0])return[!1,e];if(n.length>t.length)return[!1,e];for(let r=1;r<=t.length-1;r++)if(!n[r]||!_a(n[r],t[r]))return[!1,e];return[!0,e]}return console.error("Unexpected domain constructor "+a),[!1,e]}function Ca(e,t){if(null==e)return t;if(null==t)return e;let n=[e.base,...Qi(e.base)],r=[t.base,...Qi(t.base)];for(;!r.includes(n[0]);)n.shift();return e.engine.domain(n[0])}function Ea(e,t){return void 0===e?t:void 0===t||_a(e.base,t.base)?e:_a(t.base,e.base)?t:e.engine.Void}function ka(e,t){if(t.every((e=>e.isCanonical)),0===(t=t.filter((e=>null===e.numericValue||!e.isZero))).length)return e.Zero;if(1===t.length&&!Vi(t[0]))return t[0];if(2===t.length){let n=0,r=0;if(r=Lr(t[0]),null!==r&&0!==r?n=mi(t[1]):(n=mi(t[0]),0!==n&&null!==t[1].numericValue&&(r=Lr(t[1]))),null!==r&&null!==n&&0!==n)return e.number(e.complex(r,n))}return t.length>1&&(t=Li(t)),e._fn("Add",t)}function Aa(e,t){let n=new Gi(e);for(let r of t){if(r=r.simplify(),r.isImaginary&&r.isInfinity)return e.ComplexInfinity;if(r.isNaN||"Undefined"===r.symbol)return e.NaN;r.isZero||n.addTerm(r)}return n.asExpression("expression")}function Na(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"evaluate";if("N"===n&&"machine"===e.numericMode){let n=function(e){let t=0;for(let n of e){let e=n.numericValue;if("number"!=typeof e)return null;t+=e}return t}(t=t.map((e=>e.N())));if(null!==n)return e.number(n)}for(let r of t){if(r.isImaginary&&r.isInfinity)return e.ComplexInfinity;if(r.isNaN||"Undefined"===r.symbol)return e.NaN;r.isExact||(n="N")}return t="N"===n?t.map((e=>e.N())):t.map((e=>e.evaluate())),new Gi(e,t).asExpression("N"===n?"numeric":"expression")}function Ma(e,t,n,r){var i;let a=null;if(!n){var o;let n="simplify"===r?t.simplify():t.evaluate({numericMode:"N"===r});if(xi(e)){let t=e.bignum(0);for(let e of $i(n)){let n=Or(e);if(null===n){a=void 0;break}if(!n.isFinite()){t=n;break}t=t.add(n)}null===a&&(a=e.number(t))}else{let t=0;for(let e of $i(n)){let n=Lr(e);if(null===n){a=void 0;break}if(null===n||!Number.isFinite(n)){t=n;break}t+=n}null===a&&(a=e.number(t))}return null!==(o=a)&&void 0!==o?o:void 0}let[s,l,u,c]=pa(n.evaluate());if(!s)return;let d=t;if(l>=u||"simplify"===r&&u-l>=200)return;"evaluate"===r&&u-l>=200&&(r="N");let p=e.swapScope(d.scope);if(e.pushScope(),d.bind(),"simplify"===r){let t=[];for(let n=l;n<=u;n++)e.assign(s,n),t.push(d.simplify());a=e.add(t).simplify()}if("evaluate"===r){let t=[];for(let n=l;n<=u;n++)e.assign(s,n),t.push(d.evaluate());a=e.add(t).evaluate()}if("N"===r)if(null===a&&c)if(xi(e)){let t=e.bignum(0);for(let n=l;n<=u;n++){e.assign(s,n);let r=Or(d.N());if(null===r){a=void 0;break}if(!r.isFinite()){t=r;break}t=t.add(r)}null===a&&(a=e.number(t))}else{let t=e.numericMode,n=e.precision;e.numericMode="machine";let r=0;for(let i=l;i<=u;i++){e.assign(s,i);let t=Lr(d.N());if(null===t){a=void 0;break}if(!Number.isFinite(t)){r=t;break}r+=t}e.numericMode=t,e.precision=n,null===a&&(a=e.number(r))}else if(null===a){e.assign(s,1e3);let t=d.N();e.assign(s,999);let n=d.N(),r=Lr(e.div(t,n).N());if(null!==r&&Number.isFinite(r)&&Math.abs(r)>1)a=e.PositiveInfinity;else{let t=0,n=e.numericMode,r=e.precision;e.numericMode="machine";for(let i=l;i<=u;i++){e.assign(s,i);let n=Lr(d.N());if(null===n){a=void 0;break}if(Math.abs(n)<Number.EPSILON||!Number.isFinite(n))break;t+=n}e.numericMode=n,e.precision=r,null===a&&(a=e.number(t))}}return e.popScope(),e.swapScope(p),null!==(i=a)&&void 0!==i?i:void 0}var Fa=m(g(),1);function Ta(e,t){if("Negate"===e.head)return e.op1;if(null!==e.numericValue)return function(e,t){let n=e.numericValue;return null===n?null:("number"==typeof n?n=-n:n instanceof lt||n instanceof Fa.Complex?n=n.neg():Array.isArray(n)&&(n=Qr(n)),e.engine.number(n,{metadata:t}))}(e,t);if("Add"===e.head){let n=e.ops.map((e=>Ta(e)));return n=Pi(n,"Add"),e.engine.add(n,t)}return"Multiply"===e.head?function(e,t){let n=[],r=!1;for(let i of t)r||"Negate"!==i.head?n.push(i):(r=!0,n.push(i.op1));if(r)return e.mul(n);n=[];for(let i of t)r||null===i.numericValue||!i.isInteger?n.push(i):(r=!0,n.push(Ta(i)));if(r)return e.mul(n);n=[];for(let i of t)r||null===i.numericValue||!i.isNumber?n.push(i):(r=!0,n.push(Ta(i)));return r?e.mul(n):e._fn("Negate",[e._fn("Multiply",t)])}(e.engine,e.ops):"Divide"===e.head?e.engine._fn("Divide",[Ta(e.op1),e.op2]):(e.head,e.engine._fn("Negate",[e],t))}function Ba(e,t){return Ta(t)}function La(e,t){if("Negate"===e.head&&"Negate"===t.head)return La(e.op1,t.op1);if("Negate"===e.head)return Ta(La(e.op1,t));if("Negate"===t.head)return Ta(La(e,t.op1));let n=e.engine;if("Divide"===e.head&&"Divide"===t.head){let r=n.mul([e.op2,t.op2]);return n.div(La(e.op1,t.op1),r)}return"Divide"===e.head?n.div(La(e.op1,t),e.op2):"Divide"===t.head?n.div(La(e,t.op1),t.op2):"Add"===e.head?n.add(e.ops.map((e=>La(e,t)))):"Add"===t.head?n.add(t.ops.map((t=>La(e,t)))):n.mul([e,t])}function Oa(e){return 1===e.length?e[0]:2===e.length?La(e[0],e[1]):La(e[0],Oa(e.slice(1)))}var za=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1],[1,6,15,20,15,6,1],[1,7,21,35,35,21,7,1],[1,8,28,56,70,56,28,8,1]];function Ia(e,t){for(;e>=za.length;){let e=za.length,t=[1],n=za[e-1];for(let r=1;r<e;r++)t[r]=n[r-1]+n[r];t[e]=1,za.push(t)}return za[e][t]}function Pa(e){let t=e.reduce(((e,t)=>e+t),0),n=1;for(let r=0;r<e.length;r+=1)n*=Ia(t,e[r]),t-=e[r];return n}function*qa(e,t){if(1!==e)for(let n=0;n<=t;n+=1)for(let r of qa(e-1,t-n))yield[n,...r];else yield[t]}function Ra(e){if("Power"!==e.head)return null;let t=zr(e.op2);if(null===t||t<0)return null;if(0===t)return e.engine.One;if(1===t)return e.op1;let n=e.engine;if("Negate"===e.op1.head){let r=t%2===0?1:-1,i=Ra(n.pow(e.op1.op1,e.op2));return null===i?null:r>0?i:n.neg(i)}if(e.op1.head,"Add"!==e.op1.head)return null;let r=e.op1.ops,i=qa(r.length,t),a=[];for(let o of i){let e=[n.number(Pa(o))];for(let t=0;t<o.length;t+=1)0!==o[t]&&(1===o[t]?e.push(r[t]):e.push(n.pow(r[t],o[t])));a.push(n.mul(e))}return n.add(a)}function ja(e){if(!e)return null;let t=function(e){if("Divide"!==e.head)return null;let t=ja(e.op1);if(null===t)return null;let n=e.engine;return"Add"===t.head?n.add(t.ops.map((t=>n.div(t,e.op2)))):e.engine.div(t,e.op2)}(e);if(null!==t||"Multiply"===e.head&&(t=Oa(e.ops),null!==t))return t;if("Add"===e.head){let t=e.ops.map((e=>{var t;return null!==(t=ja(e))&&void 0!==t?t:e}));return Aa(e.engine,t)}return"Negate"===e.head&&(t=ja(e.op1),null!==t)?e.engine.neg(t):"Power"===e.head&&(t=Ra(e),null!==t)?t:null}var Ka=[{match:["Multiply","_x","__a"],replace:0,id:"ax",condition:e=>{let{__a:t}=e;return!t.has("_x")}},{match:["Add",["Divide","_a","_x"],"__b"],replace:1/0,condition:e=>{let{_a:t,__b:n}=e;return!t.has("_x")&&!n.has("_x")}},{match:["Add",["Multiply","_x","__a"],"__b"],replace:["Divide",["Negate","__b"],"__a"],condition:e=>{let{__a:t,__b:n}=e;return!t.has("_x")&&!n.has("_x")}},{match:["Add",["Multiply","_a",["Power","_x","_n"]],"__b"],replace:["Divide",["Power",["Negate","__b"],["Divide",1,"_n"]],"_a"],condition:e=>{let{_a:t,__b:n,_n:r}=e;return!t.has("_x")&&!n.has("_x")&&!r.isZero}},{match:["Add",["Multiply","__a",["Power","_x",2]],["Multiply","__b","_x"],"__c"],replace:["Divide",["Add",["Negate","__b"],["Sqrt",["Subtract",["Square","__b"],["Multiply",4,"__a","__c"]]]],["Multiply",2,"__a"]],condition:e=>{let{__a:t,__b:n,__c:r}=e;return!t.has("_x")&&!n.has("_x")&&!r.has("_x")}},{match:["Add",["Multiply","__a",["Power","_x",2]],["Multiply","__b","_x"],"__c"],replace:["Divide",["Subtract",["Negate","__b"],["Sqrt",["Subtract",["Square","__b"],["Multiply",4,"__a","__c"]]]],["Multiply",2,"__a"]],condition:e=>{let{__a:t,__b:n,__c:r}=e;return!t.has("_x")&&!n.has("_x")&&!r.has("_x")}},{match:["Add",["Multiply","__a",["Exp",["Multiply","__b","_x"]]],"__c"],replace:["Divide",["Ln",["Negate",["Divide","__c","__a"]]],"__b"],condition:(e,t)=>{var n;let{__a:r,__c:i}=e;return null!==(n=!r.isZero&&t.div(i,r).isNegative)&&void 0!==n&&n&&!r.has("_x")&&!i.has("_x")}},{match:["Add",["Multiply","__a",["Exp","_x"]],"__c"],replace:["Ln",["Negate",["Divide","__c","__a"]]],condition:(e,t)=>{var n;let{__a:r,__c:i}=e;return null!==(n=!r.isZero&&t.div(i,r).isNegative)&&void 0!==n&&n&&!r.has("_x")&&!i.has("_x")}}];function Va(e,t){let n=e.engine;"Equal"===e.head&&(e=n.add([e.op1.canonical,n.neg(e.op2.canonical)]).simplify());let r=n.cache("univariate-roots-rules",(()=>Ei(n,Ka))),i=[e.subs({[t]:"_x"},{canonical:!1})],a=i.flatMap((e=>Ci(e,r,{_x:n.symbol("_x")})));return 0===a.length&&(i=i.flatMap((e=>$a(e))),a=i.flatMap((e=>Ci(e,r,{_x:n.symbol(t)})))),0===a.length&&(i=i.flatMap((e=>ja(e.canonical))).filter((e=>null!==e)),i=i.flatMap((e=>$a(e))),a=i.flatMap((e=>Ci(e,r,{_x:n.symbol(t)})))),a.map((e=>e.evaluate()))}var Ua=[{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Add",["Multiply","__a","_x"],"__b","__c"]},{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Add",["Negate",["Multiply","__a","_x"]],["Negate","__b"],"__c"]},{match:["Multiply","__a",["Power","_b","_n"]],replace:"_b",condition:e=>{let{__a:t,_b:n,_n:r}=e;return!t.has("_x")&&n.has("_x")&&!r.isZero}},{match:["Multiply","__a",["Sqrt","_b"]],replace:["Multiply",["Square","_a"],"__b"],condition:e=>{let{_b:t}=e;return t.has("_x")}},{match:["Divide","_a","_b"],replace:"_a",condition:e=>{let{_a:t,_b:n}=e;return t.has("_x")&&!n.isZero}},{match:["Multiply","__a","_b"],replace:"_b",condition:e=>{let{__a:t,_b:n}=e;return!t.has("_x")&&n.has("_x")}},{match:["Add",["Ln","_a"],["Ln","_b"],"__c"],replace:["Add",["Ln",["Multiply","_a","_b"]],"__c"]},{match:["Multiply",["Exp","__a"],["Exp","__b"],"__c"],replace:["Multiply",["Exp",["Add","_a","_b"]],"__c"]},{match:["Ln","_a"],replace:["Subtract","_a",1],condition:e=>{let{_a:t}=e;return t.has("_x")}},{match:["Sin","_a"],replace:"_a",condition:e=>{let{_a:t}=e;return t.has("_x")}},{match:["Cos","_a"],replace:["Subtract","_a",["Divide","Pi",2]],condition:e=>{let{_a:t}=e;return t.has("_x")}},{match:["Tan","_a"],replace:"_a",condition:e=>{let{_a:t}=e;return t.has("_x")}},{match:["Add",["Sin","_a"],["Cos","_a"]],replace:1,condition:e=>{let{_a:t}=e;return t.has("_x")}},{match:["Subtract",["Square",["Sin","_a"]],["Square",["Cos","_a"]]],replace:["PlusMinus",["Sin","_a"],["Divide",["Sqrt",2],2]],condition:e=>{let{_a:t}=e;return t.has("_x")}}];function $a(e){let t=e.engine;return Ci(e,t.cache("univariate-roots-rules",(()=>Ei(t,Ua))),{_x:t.symbol("_x")})}function Ha(e){return"Element"===e.head?function(e){e.head;let t=e.engine,n=function(e){return e.symbols.filter((t=>!Wa(e.engine,t)))}(e.op1);if(1===n.length){let r=t.domain(e.op2.evaluate().json);return r.isValid?(t.declare(n[0],r),"ok"):"not-a-predicate"}if(e.op1.symbol&&Wa(t,e.op1.symbol)){var r;let n=t.domain(e.op2.evaluate().json);if(!n.isValid)return"not-a-predicate";(null===(r=t.context)||void 0===r||null===(r=r.ids)||void 0===r?void 0:r.has(e.op1.symbol))||t.declare(e.op1.symbol,n);let i=t.lookupSymbol(e.op1.symbol);if(i)return i.domain&&!n.isCompatible(i.domain)?"contradiction":(i.domain=n,"ok");let a=t.lookupFunction(e.op1.symbol);return a?n.isCompatible(di(t,a.signature))?"ok":"contradiction":"not-a-predicate"}if(n.length>0)return t.assumptions.set(e,!0),"ok";let i=e.evaluate();return"True"===i.symbol?"tautology":"False"===i.symbol?"contradiction":"not-a-predicate"}(e):"Equal"===e.head?function(e){e.head;let t=e.unknowns;if(0===t.length){let t=e.evaluate();return"True"===t.symbol?"tautology":"False"===t.symbol?"contradiction":(e.canonical.evaluate(),"not-a-predicate")}let n=e.engine,r=e.op1.symbol;if(r&&!function(e,t){var n;return!e.lookupFunction(t)&&void 0!==(null===(n=e.lookupSymbol(t))||void 0===n?void 0:n.value)}(n,r)&&!e.op2.has(r)){var i;let t=e.op2.evaluate();if(!t.isValid)return"not-a-predicate";let a=n.lookupSymbol(r);return a?!a.domain||null!==(i=t.domain)&&void 0!==i&&i.isCompatible(a.domain)?(a.value=t,"ok"):"contradiction":(n.defineSymbol(r,{value:t,domain:t.domain}),"ok")}if(1===t.length){let r=t[0],i=Va(e,r);0===i.length&&n.assumptions.set(n.fn("Equal",[n.add([e.op1.canonical,n.neg(e.op2.canonical)]).simplify(),0]),!0);let a=1===i.length?i[0]:n.fn("List",i),o=n.lookupSymbol(r);return o?o.domain&&!i.every((e=>{var t;return!e.domain||(null===(t=a.domain)||void 0===t?void 0:t.isCompatible(e.domain))}))?"contradiction":(o.value=a,"ok"):(n.defineSymbol(r,{value:a,domain:a.domain}),"ok")}return n.assumptions.set(e,!0),"ok"}(e):function(e){let t=e.head;return"string"==typeof t&&["Less","Greater","LessEqual","GreaterEqual"].includes(t)}(e)?function(e){let t=e.engine;if(e.op1.symbol&&!Wa(t,e.op1.symbol))return e.op2.evaluate().isZero?"Less"===e.head?t.defineSymbol(e.op1.symbol,{domain:t.domain("NegativeNumbers")}):"LessEqual"===e.head?t.defineSymbol(e.op1.symbol,{domain:t.domain("NonPositiveNumbers")}):"Greater"===e.head?t.defineSymbol(e.op1.symbol,{domain:t.domain("PositiveNumbers")}):"GreaterEqual"===e.head&&t.defineSymbol(e.op1.symbol,{domain:t.domain("NonNegativeNumbers")}):(t.defineSymbol(e.op1.symbol,{domain:t.domain("ExtendedRealNumbers")}),t.assumptions.set(e,!0)),"ok";let n,r,i="";if("Less"===e.head?(n=e.op1,r=e.op2,i="<"):"LessEqual"===e.head?(n=e.op1,r=e.op2,i="<="):"Greater"===e.head?(n=e.op2,r=e.op1,i="<"):"GreaterEqual"===e.head&&(n=e.op2,r=e.op1,i="<="),!i)return"internal-error";let a=t.add([n.canonical,t.neg(r.canonical)]).simplify(),o=t.box(["<"===i?"Less":"LessEqual",a,0]).evaluate();if("True"===o.symbol)return"tautology";if("False"===o.symbol)return"contradiction";let s=o.unknowns;return 0===s.length?"not-a-predicate":(1===s.length&&(t.lookupSymbol(s[0])||t.defineSymbol(s[0],{domain:"ExtendedRealNumbers"})),"Less"===o.head||o.head,t.assumptions.set(o,!0),"ok")}(e):"not-a-predicate"}function Wa(e,t){var n;return void 0!==(null!==(n=e.lookupSymbol(t))&&void 0!==n?n:e.lookupFunction(t))}var Ga=m(g(),1),Za=m(g(),1);function Ja(e,t){for(e.isInteger()&&t.isInteger();!t.isZero();)[e,t]=[t,e.modulo(t)];return e.abs()}function Xa(e,t){return e.mul(t).div(Ja(e,t))}function Ya(e,t){if(!t.isInteger()||t.isNegative())return e._BIGNUM_NAN;if(t.lessThan(10))return e.bignum([1,1,2,6,24,120,720,5040,40320,362880,3628800][t.toNumber()]);if(t.gt(Number.MAX_SAFE_INTEGER)){let n=e._BIGNUM_ONE,r=e._BIGNUM_TWO;for(;r.lessThan(t);)n=n.mul(r),r=r.add(1);return n}if(t.modulo(2).eq(1))return t.times(Ya(e,t.minus(1)));let n=t.toNumber(),r=t,i=t;for(;n>2;)n-=2,r=r.add(n),i=i.mul(r);return i}function Qa(e,t){if(t.isNegative())return e._BIGNUM_NAN;let n=e.cache("gamma-p-ln",(()=>["0.99999999999999709182","57.156235665862923517","-59.597960355475491248","14.136097974741747174","-0.49191381609762019978","0.33994649984811888699e-4","0.46523628927048575665e-4","-0.98374475304879564677e-4","0.15808870322491248884e-3","-0.21026444172410488319e-3","0.2174396181152126432e-3","-0.16431810653676389022e-3","0.84418223983852743293e-4","-0.2619083840158140867e-4","0.36899182659531622704e-5"].map((t=>e.bignum(t))))),r=n[0];for(let o=n.length-1;o>0;--o)r=r.add(n[o].div(t.add(o)));let i=e.cache("gamma-g-ln",(()=>e.bignum(607).div(128))),a=t.add(i).add(e._BIGNUM_HALF);return e._BIGNUM_NEGATIVE_ONE.acos().mul(e._BIGNUM_TWO).log().mul(e._BIGNUM_HALF).add(a.log().mul(t.add(e._BIGNUM_HALF)).minus(a).add(r.log()).minus(t.log()))}function eo(e,t){if(t.lessThan(e._BIGNUM_HALF)){let n=e._BIGNUM_NEGATIVE_ONE.acos();return n.div(n.mul(t).sin().mul(eo(e,e._BIGNUM_ONE.sub(t))))}if(t.greaterThan(100))return Qa(e,t).exp();t=t.sub(1);let n=e.cache("lanczos-7-c",(()=>["0.99999999999980993227684700473478","676.520368121885098567009190444019","-1259.13921672240287047156078755283","771.3234287776530788486528258894","-176.61502916214059906584551354","12.507343278686904814458936853","-0.13857109526572011689554707","9.984369578019570859563e-6","1.50563273514931155834e-7"].map((t=>e.bignum(t))))),r=n[0];for(let a=1;a<9;a++)r=r.add(n[a].div(t.add(a)));let i=t.add(7).add(e._BIGNUM_HALF);return e._BIGNUM_NEGATIVE_ONE.acos().times(e._BIGNUM_TWO).sqrt().mul(r.mul(i.neg().exp()).mul(i.pow(t.add(e._BIGNUM_HALF))))}function to(e){return!e.isFinite()||!(e.d.length>3||3===e.d.length&&e.d[0]>=90)&&(e.precision(),e.e<308&&e.e>-306)}var no=m(g(),1),ro=class{constructor(e,t,n){if(this.options=n,this._terms=[],this._hasInfinity=!1,this._hasZero=!1,this._isCanonical=!0,"canonical"in(n=n?l({},n):{})||(n.canonical=!0),this._isCanonical=n.canonical,this.engine=e,this._sign=1,this._rational=xi(e)?[BigInt(1),BigInt(1)]:[1,1],this._complex=no.Complex.ONE,this._bignum=e._BIGNUM_ONE,this._number=1,t)for(let r of t)this.addTerm(r)}get isEmpty(){return this._isCanonical?0===this._terms.length&&!1===this._hasInfinity&&!1===this._hasZero&&1===this._sign&&Gr(this._rational)&&1===this._complex.re&&0===this._complex.im&&this._bignum.eq(this.engine._BIGNUM_ONE)&&1===this._number:0===this._terms.length}addTerm(e){if(e.isCanonical,"Multiply"===e.head){for(let t of e.ops)this.addTerm(t);return}if(this._isCanonical){if(e.isNothing)return;if(null!==e.numericValue){if(e.isOne)return;if(e.isZero)return void(this._hasZero=!0);if(e.isNegativeOne)return void(this._sign*=-1);if(e.isInfinity)return this._hasInfinity=!0,void(e.isNegative&&(this._sign*=-1));let t=e.numericValue;if("number"==typeof t)return t<0&&(this._sign*=-1,t=-t),void(Number.isInteger(t)?this._rational=ii(this._rational,[t,1]):xi(this.engine)?this._bignum=this._bignum.mul(t):this._number*=t);if(t instanceof lt)return t.isNegative()&&(this._sign*=-1,t=t.neg()),void(t.isInteger()?this._rational=ii(this._rational,[jr(t),BigInt(1)]):xi(this.engine)?this._bignum=this._bignum.mul(t):this._number*=t.toNumber());if(t instanceof no.Complex)return void(this._complex=this._complex.mul(t));if(Ur(t))return this._rational=ii(this._rational,t),void(Yr(this._rational)&&(this._sign*=-1,this._rational=Qr(this._rational)))}}let t=e;if(this._isCanonical){let n;[n,t]=si(e),this._rational=ii(this._rational,n),Yr(this._rational)&&(this._sign*=-1,this._rational=Qr(this._rational))}if(null!==t.numericValue&&t.isOne)return;let n=[1,1];if("Power"===t.head){let e=ti(t.op2);e&&(n=e,t=t.op1)}else"Divide"===t.head&&(this.addTerm(t.op1),n=[-1,1],t=t.op2);let r=!1;for(let i of this._terms)if(i.term.isSame(t)){i.exponent=ri(i.exponent,n),r=!0;break}r||this._terms.push({term:t,exponent:n})}unitTerms(e){let t=this.engine;if("numeric"===e){if(!Di(t)&&0!==this._complex.im)return null;if(xi(t)){let e=t._BIGNUM_ONE;if(Gr(this._rational)||(e=Hr(this._rational)?t.bignum(this._rational[0].toString()).div(t.bignum(this._rational[1].toString())):t.bignum(this._rational[0]).div(this._rational[1])),e=e.mul(this._bignum).mul(this._sign*this._number),0!==this._complex.im){let n=this._complex.mul(e.toNumber());return n.equals(1)?[]:[{exponent:[1,1],terms:[t.number(n)]}]}return e=e.mul(this._complex.re),e.equals(1)?[]:[{exponent:[1,1],terms:[t.number(e)]}]}let e=1;if(Gr(this._rational)||(e=Hr(this._rational)?Number(this._rational[0])/Number(this._rational[1]):this._rational[0]/this._rational[1]),e*=this._sign*this._number*this._bignum.toNumber(),0!==this._complex.im){let n=this._complex.mul(e);return n.equals(1)?[]:[{exponent:[1,1],terms:[t.number(n)]}]}return e*=this._complex.re,1===e?[]:[{exponent:[1,1],terms:[t.number(e)]}]}let n=[],r=[];this._hasInfinity&&r.push(t.PositiveInfinity),this._rational=oi(this._rational),(1!==this._complex.re||0!==this._complex.im)&&(0===this._complex.im&&(this._number*=Math.abs(this._complex.re)),this._complex.re<0?this._rational=Qr(this._rational):r.push(t.number(this._complex)));let i=this._sign*this._number,a=this._bignum;return Gr(this._rational)||("rational"===e?(1!==Jr(this._rational)&&(Hr(this._rational)?a=a.mul(t.bignum(this._rational[0])):i*=this._rational[0]),1!==Xr(this._rational)&&n.push({exponent:[-1,1],terms:[t.number(this._rational[1])]})):-1===i?(r.push(t.number(Qr(this._rational))),i=1):r.push(t.number(this._rational))),a.equals(t._BIGNUM_ONE)?1!==i&&r.push(t.number(i)):r.push(t.number(a.mul(i))),r.length>0&&n.push({exponent:[1,1],terms:r}),n}groupedByDegrees(e){var t,n;null!==(t=e)&&void 0!==t||(e={}),"mode"in e||(e.mode="expression");let r=this.engine;if("numeric"===e.mode){if(0!==this._complex.im&&!Di(r))return null;if(this._hasInfinity)return[{exponent:[1,1],terms:[r.PositiveInfinity]}]}let i=this.unitTerms(null!==(n=e.mode)&&void 0!==n?n:"expression");if(null===i)return null;for(let a of this._terms){let e=oi(a.exponent);if(0===e[0])continue;let t=!1;for(let n of i)if(e[0]===n.exponent[0]&&e[1]===n.exponent[1]){n.terms.push(a.term),t=!0;break}t||i.push({exponent:e,terms:[a.term]})}return i}asExpression(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"evaluate",t=this.engine;if(this._hasInfinity){if(this._hasZero)return t.NaN;if(0===this._terms.length)return Jr(this._rational)>0?t.PositiveInfinity:t.NegativeInfinity}if(this._hasZero)return t.Zero;let n=this.groupedByDegrees({mode:"N"===e?"numeric":"expression"});if(null===n)return t.NaN;let r=oo(t,n);return 0===r.length?t.One:1===r.length?r[0]:this.engine._fn("Multiply",r)}asNumeratorDenominator(){let e=this.groupedByDegrees({mode:"rational"});if(null===e)return[this.engine.NaN,this.engine.NaN];let t=[],n=[];for(let l of e)l.exponent[0]>=0?t.push(l):n.push({exponent:Qr(l.exponent),terms:l.terms});let r=this.engine,i=oo(r,t),a=r.One;1===i.length?a=i[0]:i.length>0&&(a=r._fn("Multiply",i));let o=oo(r,n),s=r.One;return 1===o.length?s=o[0]:o.length>0&&(s=r._fn("Multiply",o)),[a,s]}asRationalExpression(){let[e,t]=this.asNumeratorDenominator();if(null!==t.numericValue){if(t.isOne)return e;if(t.isNegativeOne)return this.engine.neg(e)}return this.engine._fn("Divide",[e,t])}};function io(e){if(Gr(e))return 0;let[t,n]=[Jr(e),Xr(e)];return t>0&&Number.isInteger(t/n)?1:t>0?2:Number.isInteger(t/n)?3:4}function ao(e,t){let n=io(e.exponent),r=io(t.exponent);if(n!==r)return n-r;let[i,a]=[Jr(e.exponent),Xr(e.exponent)],[o,s]=[Jr(t.exponent),Xr(t.exponent)];return i/a-o/s}function oo(e,t){var n;let r=t.sort(ao).map((t=>{let n=Pi(t.terms,"Multiply"),r=n.length<=1?n[0]:e._fn("Multiply",n.sort(Oi));return e.pow(r,t.exponent)}));return null!==(n=Pi(r,"Multiply"))&&void 0!==n?n:r}function so(e,t,n,r){if(null!==t.numericValue){if(Ur(t.numericValue))return Jr(t.numericValue)<0?lo(e,"Subtract",[n,e.number(Qr(t.numericValue))],r):null;let i=zr(t);if(null!==i&&i<0)return lo(e,"Subtract",[n,e.number(-i)],r)}return"Negate"===t.head?lo(e,"Subtract",[n,t.op1],r):null}function lo(e,t,n,r){var i;let a=e.jsonSerializationOptions.exclude;if(("Rational"===t||"Divide"===t)&&2===n.length&&1===zr(n[0])&&2===zr(n[1])&&!a.includes("Half"))return uo(e,"Half",l(l({},r),{},{wikidata:"Q39373172"}));if(1===n.length){var o;let r=null===(o=n[0])||void 0===o?void 0:o.numericValue;if("Negate"===t&&null!==r){if("number"==typeof r)return co(e,-r);if(r instanceof lt||r instanceof Za.Complex)return co(e,r.neg());if(Ur(r))return co(e,Qr(r))}}if("string"==typeof t&&a.includes(t)){var s,u,c;if("Rational"===t&&2===n.length)return lo(e,"Divide",n,r);if("Complex"===t&&2===n.length)return lo(e,"Add",[n[0],e._fn("Multiply",[null!==(s=n[1])&&void 0!==s?s:e.symbol("Undefined"),e.I])],r);if("Sqrt"===t&&1===n.length)return lo(e,"Power",[n[0],a.includes("Half")?e.number([1,2]):e.Half],r);if("Root"===t&&2===n.length&&null!==(null===(u=n[1])||void 0===u?void 0:u.numericValue)){var d;let t=zr(n[1]);if(2===t)return lo(e,"Sqrt",[n[0]]);if(null!==t)return t<0?lo(e,"Divide",[e.One,e._fn("Power",[null!==(d=n[0])&&void 0!==d?d:e.symbol("Undefined"),e.number([1,-t])])],r):lo(e,"Power",[n[0],e.number([1,-t])],r)}if("Square"===t&&1===n.length)return lo(e,"Power",[n[0],e.number(2)],r);if("Exp"===t&&1===n.length)return lo(e,"Power",[e.E,n[0]],r);if("Subtract"===t&&2===n.length)return lo(e,"Add",[n[0],e._fn("Negate",[null!==(c=n[1])&&void 0!==c?c:e.symbol("Undefined")])],r);if("Subtract"===t&&1===n.length)return lo(e,"Negate",n,r)}if("Add"===t&&2===n.length&&!a.includes("Subtract")){var p,h;if(null!==(null===(p=n[1])||void 0===p?void 0:p.numericValue)){let t=zr(n[1]);if(null!==t&&t<0)return lo(e,"Subtract",[n[0],e.number(-t)],r)}if("Negate"===(null===(h=n[1])||void 0===h?void 0:h.head))return lo(e,"Subtract",[n[0],n[1].op1],r)}if("Tuple"===t){if(1===n.length&&!a.includes("Single"))return lo(e,"Single",n,r);if(2===n.length&&!a.includes("Pair"))return lo(e,"Pair",n,r);if(3===n.length&&!a.includes("Triple"))return lo(e,"Triple",n,r)}let f=["string"==typeof t?t:t.json,...n.map((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.json)&&void 0!==t?t:"Undefined"}))],m=l({},null!==r&&void 0!==r?r:{});return e.jsonSerializationOptions.metadata.includes("latex")?m.latex=null!==(i=m.latex)&&void 0!==i?i:e.serialize({fn:f}):m.latex="",e.jsonSerializationOptions.metadata.includes("wikidata")||(m.wikidata=""),m.latex||m.wikidata||!e.jsonSerializationOptions.shorthands.includes("function")?m.latex&&m.wikidata?{fn:f,latex:m.latex,wikidata:m.wikidata}:m.latex?{fn:f,latex:m.latex}:m.wikidata?{fn:f,wikidata:m.wikidata}:{fn:f}:f}function uo(e,t,n){var r;if("Half"===t&&e.jsonSerializationOptions.exclude.includes("Half"))return co(e,[1,2],n);if(n=l({},n),e.jsonSerializationOptions.metadata.includes("latex")?(n.latex=null!==(r=n.latex)&&void 0!==r?r:e.serialize({sym:t}),void 0!==n.latex&&(n.latex=n.latex)):n.latex=void 0,e.jsonSerializationOptions.metadata.includes("wikidata")){if(void 0===n.wikidata){var i;let r=null===(i=e.lookupSymbol(t))||void 0===i?void 0:i.wikidata;void 0!==r&&(n.wikidata=r)}}else n.wikidata=void 0;return void 0===n.latex&&void 0===n.wikidata&&e.jsonSerializationOptions.shorthands.includes("symbol")?t:void 0!==n.latex&&void 0!==n.wikidata?{sym:t,latex:n.latex,wikidata:n.wikidata}:void 0!==n.latex?{sym:t,latex:n.latex}:void 0!==n.wikidata?{sym:t,wikidata:n.wikidata}:{sym:t}}function co(e,t,n){var r,i;n=l({},n),e.jsonSerializationOptions.metadata.includes("latex")||(n.latex=void 0);let a=void 0===n.latex&&void 0===n.wikidata&&!e.jsonSerializationOptions.metadata.includes("latex")&&e.jsonSerializationOptions.shorthands.includes("number"),o=e.jsonSerializationOptions.exclude,s="";if(t instanceof lt){var u;if(t.isNaN())s="NaN";else if(t.isFinite()){if(a&&to(t))return t.toNumber();if(t.isInteger()&&t.e<t.precision()+4)s=t.toFixed(0);else{let n=e.jsonSerializationOptions.precision;if(s=po(e,"max"===n?t.toString():t.toPrecision("auto"===n?e.precision:n)),a){let e=t.toNumber();if(e.toString()===s)return e}}}else s=t.isPositive()?"+Infinity":"-Infinity";return e.jsonSerializationOptions.metadata.includes("latex")&&(n.latex=null!==(u=n.latex)&&void 0!==u?u:e.serialize({num:s})),void 0!==n.latex?{num:s,latex:n.latex}:a?s:{num:s}}if(t instanceof Za.Complex)return t.isInfinite()?uo(e,"ComplexInfinity",n):t.isNaN()?(s="NaN",e.jsonSerializationOptions.metadata.includes("latex")&&(n.latex=null!==(r=n.latex)&&void 0!==r?r:e.serialize({num:s})),void 0!==n.latex?{num:s,latex:n.latex}:{num:s}):lo(e,"Complex",[e.number(t.re),e.number(t.im)],l(l({},n),{},{wikidata:"Q11567"}));if(Ur(t)){let r=!o.includes("Rational");return a&&e.jsonSerializationOptions.shorthands.includes("function")&&$r(t)?1!==t[0]||2!==t[1]||o.includes("Half")?[r?"Rational":"Divide",t[0],t[1]]:uo(e,"Half",n):lo(e,r?"Rational":"Divide",[e.number(t[0]),e.number(t[1])],l({},n))}if(Number.isNaN(t))s="NaN";else if(Number.isFinite(t)){if(a)return t;s=po(e,t.toString())}else s=t>0?"+Infinity":"-Infinity";return e.jsonSerializationOptions.metadata.includes("latex")&&(n.latex=null!==(i=n.latex)&&void 0!==i?i:e.serialize({num:s})),void 0!==n.latex?{num:s,latex:n.latex}:{num:s}}function po(e,t){var n;if(!e.jsonSerializationOptions.repeatingDecimals)return t;let[r,i,a,o]=null!==(n=t.match(/^(.*)\.([0-9]+)([e|E][-+]?[0-9]+)?$/))&&void 0!==n?n:[];if(!a)return t.toLowerCase();let s=a[a.length-1];a=a.slice(0,-1);let l="";for(let u=0;u<a.length-16;u++){l=a.substring(0,u);for(let e=0;e<=16;e++){let n=a.substring(u,u+e+1),r=Math.floor((a.length-l.length)/n.length);if(r<3)break;if((l+n.repeat(r+1)).startsWith(a))return"0"===n?"0"===s?i+"."+l+(null!==o&&void 0!==o?o:""):t:i+"."+l+"("+n+")"+(null!==o&&void 0!==o?o:"")}}for(a+=s;a.endsWith("0");)a=a.slice(0,-1);return o?"".concat(i,".").concat(a).concat(o.toLowerCase()):"".concat(i,".").concat(a)}var ho=class e extends xa{constructor(e,t,n){var r,i;null!==(r=n)&&void 0!==r||(n={}),super(e,n.metadata),this._value=new Map;let a=null===(i=n.canonical)||void 0===i||i;if(t instanceof Map)for(let[o,s]of t)this._value.set(o,e.box(s,{canonical:a}));else for(let o of Object.keys(t))this._value.set(o,e.box(t[o],{canonical:a}));e._register(this)}bind(){for(let[e,t]of this._value)t.bind()}reset(){for(let[e,t]of this._value)t.reset()}get hash(){let e=wi("Dictionary");for(let[t,n]of this._value)e^=wi(t)^n.hash;return e}get complexity(){return 97}get head(){return"Dictionary"}get isPure(){return!1}getKey(e){return this._value.get(e)}hasKey(e){return this._value.has(e)}get keys(){return this._value.keys()}get keysCount(){return this._value.size}has(e){for(let[t,n]of this._value)if(n.has(e))return!0;return!1}get domain(){return this.engine.domain("Dictionaries")}get json(){if(this.engine.jsonSerializationOptions.shorthands.includes("dictionary")){let e={};for(let t of this._value.keys())e[t]=this._value.get(t).json;return{dict:e}}let e=[];for(let t of this._value.keys())e.push(this.engine._fn("KeyValuePair",[this.engine.string(t),this._value.get(t)]));return lo(this.engine,"Dictionary",e,{latex:this._latex})}isSame(t){if(this===t)return!0;if(!(t instanceof e)||this._value.size!==t._value.size)return!1;for(let[e,n]of this._value){let r=t.getKey(e);if(!r||!n.isSame(r))return!1}return!0}match(t,n){if(!(t instanceof e)||this._value.size!==t._value.size)return null;let r={};for(let[e,i]of this._value){let n=t.getKey(e);if(!n)return null;let a=i.match(n);if(null===a)return null;r=l(l({},r),a)}return r}isEqual(t){if(this===t)return!0;if(!(t instanceof e)||!t.keys||this._value.size!==t._value.size)return!1;for(let[e,n]of this._value){let r=t.getKey(e);if(!r||!n.isEqual(r))return!1}return!0}evaluate(e){return this}get isCanonical(){return this._isCanonical}set isCanonical(e){this._isCanonical=e}get canonical(){return this.isCanonical?this:new e(this.engine,this._value,{canonical:!0})}simplify(e){return this}N(e){return this}replace(t,n){let r=0,i={};for(let e of this.keys){let a=this.getKey(e),o=a.replace(t,n);null!==o&&(r+=1),i[e]=null!==o&&void 0!==o?o:a}return 0===r?null:new e(this.engine,i)}subs(t,n){let r={};for(let e of this.keys)r[e]=this.getKey(e).subs(t,n);return new e(this.engine,r,n)}},fo=m(g(),1),mo=[];function go(e){if("N"===e.head&&"string"==typeof e.op1.head){let t={Integrate:"NIntegrate",Limit:"NLimit"}[e.op1.head];t&&(e=e.engine._fn(t,e.op1.ops))}if("Function"===e.head)return e;let t=e.unknowns;t.includes("_")&&(t=(e=e.subs({_:"_1"})).unknowns);let n=0;for(let i of t)if(i.startsWith("_")){let e=Number(i.slice(1));e>n&&(n=e)}let r=e.engine;return r._fn("Function",[e,...Array.from({length:n},((e,t)=>r.symbol("_".concat(t+1))))])}function vo(e){let t=e.engine,n=e.symbol?t.lookupFunction(e.symbol):void 0;if(n){var r;let i=null!==(r=n.signature.N)&&void 0!==r?r:n.signature.evaluate;return i?n=>{var r;return null!==(r=i(t,n))&&void 0!==r?r:t._fn(e,n)}:n=>t._fn(e,n)}let i=go(e);if(!i)return;i.head;let a=i.ops.slice(1).map((e=>{var t;return null!==(t=e.symbol)&&void 0!==t?t:"Nothing"}));t.pushScope();for(let l of a)t.declare(l,{inferred:!0,domain:void 0});let o=i.op1.canonical;o.bind(),t.popScope();let s=o.scope;return 0===a.length?()=>{var e;let n=t.swapScope(s);t.resetContext();let r=null!==(e=o.N())&&void 0!==e?e:o.evaluate();return t.swapScope(n),r}:e=>{var n;if(t.strict&&!(e=sa(t,e,a.length)).every((e=>e.isValid)))return;e=e.map((e=>e.evaluate()));let r=t.swapScope(s);t.resetContext();let i=0;for(let o of a)t.assign(o,e[i++]);let l=null!==(n=o.N())&&void 0!==n?n:o.evaluate();return t.swapScope(r),l.isValid?l:void 0}}function yo(e,t){var n,r;return null!==(n=null===(r=vo(e))||void 0===r?void 0:r(t))&&void 0!==n?n:e.engine._fn(e,t)}function bo(e){var t;return null!==(t=vo(e))&&void 0!==t?t:t=>e.engine._fn(e.N(),t).N()}function xo(e){let t=e.engine,n=vo(e);return n?e=>{var r,i;return null!==(r=null===(i=n([t.number(e)]))||void 0===i?void 0:i.value)&&void 0!==r?r:NaN}:n=>t._fn(e.evaluate(),[t.number(n)]).value}function Do(e){let t=e.match(/(.+)\((.*)\)/);return t?[t[1],t[2].split(",").map((e=>e.trim()))]:[e,void 0]}var wo=class e extends xa{constructor(e,t,n,r){var i,a;null!==(i=r)&&void 0!==i||(r={}),null!==(a=r.canonical)&&void 0!==a||(r.canonical=!1),super(e,r.metadata),this._result=void 0,this._head=t,this._ops=n,r.canonical&&(this._canonical=this,this.bind()),e._register(this)}get hash(){if(void 0!==this._hash)return this._hash;let e=0;for(let t of this._ops)e=e<<1^t.hash;return"string"==typeof this._head?e^=wi(this._head):e^=this._head.hash,this._hash=e,e}infer(e){let t=this._def;return!(!t||!t.signature.inferredSignature)&&("function"!=typeof t.signature.result&&(t.signature.result=Ea(t.signature.result,e)),!0)}bind(){this._def=void 0,this._scope=this.engine.context;let e=this._head;if("string"==typeof e){this._def=this.engine.lookupFunction(e);for(let e of this._ops)e.bind()}else e.bind()}reset(){}get isCanonical(){return this._canonical===this}set isCanonical(e){this._canonical=e?this:void 0}get isPure(){var e,t;if(void 0!==this._isPure)return this._isPure;if(!this.isCanonical)return this._isPure=!1,!1;let n=null!==(e=null===(t=this.functionDefinition)||void 0===t?void 0:t.pure)&&void 0!==e&&e;return n&&(n=this._ops.every((e=>e.isPure))),this._isPure=n,n}get json(){return this.isValid&&this._canonical===this?function(e,t,n,r){let i=e.jsonSerializationOptions.exclude;if("Add"===t&&2===n.length&&!i.includes("Subtract")){var a;let t=null!==(a=so(e,n[0],n[1],r))&&void 0!==a?a:so(e,n[1],n[0],r);if(t)return t}if("Divide"===t&&2===n.length&&i.includes("Divide"))return lo(e,"Multiply",[n[0],e._fn("Power",[n[1],e.NegativeOne])],r);if("Multiply"===t&&!i.includes("Negate")&&-1===Lr(n[0]))return 2===n.length?lo(e,"Negate",[n[1]]):lo(e,"Negate",[e._fn("Multiply",n.slice(1))],r);if("Multiply"===t&&!i.includes("Divide")){let t=new ro(e,n,{canonical:!1}).asRationalExpression();if("Divide"===t.head)return lo(e,t.head,t.ops,r)}if("Power"===t){var o,s;if(!i.includes("Exp")&&"ExponentialE"===(null===(o=n[0])||void 0===o?void 0:o.symbol))return lo(e,"Exp",[n[1]],r);if(null!==(null===(s=n[1])||void 0===s?void 0:s.numericValue)){let t=zr(n[1]);if(2===t&&!i.includes("Square"))return lo(e,"Square",[n[0]],r);if(null!==t&&t<0&&!i.includes("Divide"))return lo(e,"Divide",[e.One,-1===t?n[0]:e.pow(n[0],-t)],r);let a=n[1].numericValue;if(!i.includes("Sqrt")&&.5===a)return lo(e,"Sqrt",[n[0]],r);if(!i.includes("Sqrt")&&-.5===a)return lo(e,"Divide",[e.One,e._fn("Sqrt",[n[0]])],r);if(Ur(a)){let t=Jr(a),o=Xr(a);if(1===t){if(!i.includes("Sqrt")&&2===o)return lo(e,"Sqrt",[n[0]],r);if(!i.includes("Root"))return lo(e,"Root",[n[0],e.number(a[1])],r)}if(-1===t){if(!i.includes("Sqrt")&&2===o)return lo(e,"Divide",[e.One,e._fn("Sqrt",[n[0]])],r);if(!i.includes("Root"))return lo(e,"Divide",[e.One,e._fn("Root",[n[0],e.number(a[1])])],r)}}}}return lo(e,t,n,r)}(this.engine,this._head,this._ops,{latex:this._latex,wikidata:this.wikidata}):lo(this.engine,this._head,this._ops,{latex:this._latex,wikidata:this.wikidata})}get rawJson(){return["string"==typeof this._head?this._head:this._head.rawJson,...this.ops.map((e=>e.rawJson))]}get scope(){return this._scope}get head(){return this._head}get ops(){return this._ops}get nops(){return this._ops.length}get op1(){var e;return null!==(e=this._ops[0])&&void 0!==e?e:this.engine.Nothing}get op2(){var e;return null!==(e=this._ops[1])&&void 0!==e?e:this.engine.Nothing}get op3(){var e;return null!==(e=this._ops[2])&&void 0!==e?e:this.engine.Nothing}get isValid(){return!("Error"===this._head||"string"!=typeof this._head&&!this._head.isValid)&&this._ops.every((e=>null===e||void 0===e?void 0:e.isValid))}get canonical(){var e;return null!==(e=this._canonical)&&void 0!==e||(this._canonical=this.isValid?_o(this.engine,this._head,this._ops):this),this._canonical}*map(e){let t=0;for(;t<this._ops.length;)yield e(this._ops[t++])}subs(t,n){"canonical"in(n=n?l({},n):{})||(n.canonical=!0);let r=this._ops.map((e=>e.subs(t,n)));return n.canonical&&r.every((e=>e.isValid))?_o(this.engine,this._head,r):new e(this.engine,this._head,r,{canonical:!1})}replace(e,t){return Ai(this,e,t)}has(e){if("string"==typeof this._head)if("string"==typeof e){if(this._head===e)return!0}else if(e.includes(this._head))return!0;for(let t of this._ops)if(t.has(e))return!0;return!1}isSame(t){if(this===t)return!0;if(!(t instanceof e)||this.nops!==t.nops)return!1;if("string"==typeof this.head){if(this.head!==t.head)return!1}else if("string"==typeof t.head||!t.head||!this.engine.box(this.head).isSame(this.engine.box(t.head)))return!1;let n=this._ops,r=t._ops;for(let e=0;e<n.length;e++)if(!n[e].isSame(r[e]))return!1;return!0}match(t,n){if(!(t instanceof e))return null;let r={};if("string"==typeof this.head){if(this.head!==t.head)return null}else{if("string"==typeof t.head)return null;{if(!t.head)return null;let e=this.head.match(t.head,n);if(null===e)return null;r=l(l({},r),e)}}let i=this._ops,a=t._ops;for(let e=0;e<i.length;e++){let t=i[e].match(a[e],n);if(null===t)return null;r=l(l({},r),t)}return r}get complexity(){var e,t;if(this.isCanonical)return null!==(e=null===(t=this.functionDefinition)||void 0===t?void 0:t.complexity)&&void 0!==e?e:Bi}get baseDefinition(){return this.functionDefinition}get functionDefinition(){return this._def}isEqual(e){if(this===e)return!0;let t=li(this,e);return 0===t||void 0===t&&(!!this.engine.add([this,this.engine.neg(e)]).simplify().isZero||this.isSame(e))}get isNumber(){var e;return null===(e=this.domain)||void 0===e?void 0:e.isCompatible("Numbers")}get isInteger(){var e;return null===(e=this.domain)||void 0===e?void 0:e.isCompatible("Integers")}get isRational(){var e;return null===(e=this.domain)||void 0===e?void 0:e.isCompatible("RationalNumbers")}get isAlgebraic(){var e;return null===(e=this.domain)||void 0===e?void 0:e.isCompatible("AlgebraicNumbers")}get isReal(){var e;return null===(e=this.domain)||void 0===e?void 0:e.isCompatible("RealNumbers")}get isExtendedReal(){var e;return null===(e=this.domain)||void 0===e?void 0:e.isCompatible("ExtendedRealNumbers")}get isComplex(){var e;return null===(e=this.domain)||void 0===e?void 0:e.isCompatible("ComplexNumbers")}get isImaginary(){var e;return null===(e=this.domain)||void 0===e?void 0:e.isCompatible("ImaginaryNumbers")}get domain(){var e;if(void 0!==this._result)return this._result;if(!this.canonical)return;let t,n=this.engine;if("string"!=typeof this._head)t=this._head.domain;else if(this._def){let e=this._def.signature;t="function"==typeof e.result?e.result(n,this._ops):e.result}return null!==(e=t)&&void 0!==e||(t=void 0),this._result=t,t}simplify(e){var t,n,r,i,a;if(!this.isValid)return this;if(!this.isCanonical){let t=this.canonical;return t.isCanonical&&t.isValid?t.simplify(e):this}let o,s=null===(t=null===e||void 0===e?void 0:e.recursive)||void 0===t||t;if(s&&(o=ja(this),null!==o))return o=o.simplify(l(l({},e),{},{recursive:!1})),Co(this,o);let u=this.functionDefinition,c=s?So(this._ops,null!==(n=null===u||void 0===u?void 0:u.hold)&&void 0!==n?n:"none",null!==u&&void 0!==u&&u.associative?u.name:"",(t=>t.simplify(e))):this._ops;if("string"!=typeof this._head){let t=yo(this._head,c);return"string"!=typeof t.head?t:t.simplify(e)}if(u)if(u.inert)o=null!==(r=null===(i=c[0])||void 0===i?void 0:i.canonical)&&void 0!==r?r:this;else{let e=u.signature;(null===e||void 0===e?void 0:e.simplify)&&(o=e.simplify(this.engine,c))}o=o?Co(this.engine.fn(this._head,c),o):this.engine.fn(this._head,c),o=Co(this,o);let d=null!==(a=null===e||void 0===e?void 0:e.rules)&&void 0!==a?a:this.engine.cache("standard-simplification-rules",(()=>Ei(this.engine,mo)),(e=>{for(let[t,n,r,i]of e)t.reset(),n.reset();return e})),p=0,h=!1;do{let e=o.replace(d);null!==e?(o=Co(o,e),o===e&&(h=!0)):h=!0,p+=1}while(!h&&p<this.engine.iterationLimit);return Co(this,o)}evaluate(e){var t,n,r;if(!this.isValid)return this;if(null!==e&&void 0!==e&&e.numericMode){let t=this.head;if("Integrate"===t||"Limit"===t)return this.engine.box(["N",this],{canonical:!0}).evaluate(e)}if(!this.isCanonical){this.engine.pushScope();let t=this.canonical;return this.engine.popScope(),t.isCanonical&&t.isValid?t.evaluate(e):this}let i=this.functionDefinition;if(null!==i&&void 0!==i&&i.threadable&&this.ops.some((e=>Ui(e)))){let t=Math.max(...this._ops.map((e=>{var t,n,r;return null!==(t=null===(n=e.functionDefinition)||void 0===n||null===(r=n.size)||void 0===r?void 0:r.call(n,e))&&void 0!==t?t:0}))),n=[];for(let r=0;r<=t-1;r++){let i=this._ops.map((e=>{var n;return Ui(e)?null!==(n=Hi(e,r%t+1))&&void 0!==n?n:this.engine.Nothing:e}));n.push(this.engine._fn(this.head,i).evaluate(e))}return 0===n.length?this.engine.box(["Sequence"]):1===n.length?n[0]:this.engine._fn("List",n)}let a,o=So(this._ops,null!==(t=null===i||void 0===i?void 0:i.hold)&&void 0!==t?t:"none",null!==i&&void 0!==i&&i.associative?i.name:"",(t=>t.evaluate(e)));if(null!==i&&void 0!==i&&i.inert)return null!==(n=o[0])&&void 0!==n?n:this;"string"!=typeof this._head&&(a=yo(this._head,o));let s=null===i||void 0===i?void 0:i.signature;if(!a&&s){var l;let t=null!==(l=null===e||void 0===e?void 0:e.numericMode)&&void 0!==l&&l,n=this.engine.swapScope(this.scope);t&&s.N&&(a=s.N(this.engine,o)),!a&&s.evaluate&&(a=s.evaluate(this.engine,o)),this.engine.swapScope(n)}if(a){let e=a.numericValue;null!==e&&(!Di(this.engine)&&e instanceof fo.Complex?a=this.engine.NaN:!xi(this.engine)&&e instanceof lt&&(a=this.engine.number(e.toNumber())))}return null!==(r=a)&&void 0!==r?r:this.engine.fn(this._head,o)}N(e){return this.evaluate(l(l({},e),{},{numericMode:!0}))}solve(e){return 1!==e.length?null:Va(this.simplify(),e[0])}};function _o(e,t,n,r){var i;if("string"!=typeof t&&(e.pushScope(),t=null!==(i=t.evaluate().symbol)&&void 0!==i?i:t,e.popScope()),"string"==typeof t){let i=function(e,t,n,r){let i=[];if("Add"===t||"Multiply"===t)i=la(e,e.canonical(n),{flatten:t});else if("Negate"===t||"Square"===t||"Sqrt"===t||"Exp"===t||"Ln"===t)i=la(e,e.canonical(n),1);else{if("Divide"!==t&&"Power"!==t)return null;i=la(e,e.canonical(n),2)}if(!i.every((e=>e.isValid)))return e._fn(t,i,r);if("Add"===t)return e.add(i,r);if("Negate"===t)return e.neg(i[0],r);if("Multiply"===t)return e.mul(i,r);if("Divide"===t)return e.div(i[0],i[1],r);if("Exp"===t)return e.pow(e.E,i[0],r);if("Power"===t)return e.pow(i[0],i[1],r);if("Square"===t)return e.pow(i[0],2,r);if("Sqrt"===t){let t=i[0].canonical;return Ur(t.numericValue)?e._fn("Sqrt",[t],r):e.pow(t,e.Half,r)}return"Ln"===t?e._fn("Ln",i,r):null}(e,t,n,r);if(i)return i}else if(!t.isValid)return new wo(e,t,n.map((t=>e.box(t,{canonical:!1}))),{metadata:r,canonical:!1});let a=e.lookupFunction(t);if(!a)return new wo(e,t,qi(n.map((t=>e.box(t)))),{metadata:r,canonical:!0});let o=[];for(let c=0;c<n.length;c++)if(aa(a.hold,n.length-1,c)){let t=e.box(n[c],{canonical:!1});"ReleaseHold"===t.head?o.push(t.op1.canonical):o.push(t)}else o.push(e.box(n[c]));let s=a.signature;if(s.canonical){try{let t=s.canonical(e,o);if(t)return t}catch(u){console.error(u)}return new wo(e,t,o,{metadata:r,canonical:!1})}o=qi(o),a.associative&&(o=Pi(o,t));let l=function(e,t,n,r,i,a,o){if(!e.strict)return null;let s=[],l=!0,u=0;for(let m of i){var c,d;let a=t[u++];a?aa(n,i.length,u-1)?s.push(a):a.isValid?a.domain?r&&Ui(a)||null!==(c=a.symbolDefinition)&&void 0!==c&&c.inferredDomain&&a.domain.isCompatible(m,"contravariant")||null!==(d=a.functionDefinition)&&void 0!==d&&d.signature.inferredSignature&&a.domain.isCompatible(m,"contravariant")||a.domain.isCompatible(m)?s.push(a):(s.push(e.domainError(m,a.domain,a)),l=!1):s.push(a):(s.push(a),l=!1):(s.push(e.error("missing")),l=!1)}for(let m of a){var p;let a=t[u];if(!a)break;aa(n,i.length,u)?s.push(a):a.isValid?a.domain?r&&Ui(a)||null!==(p=a.symbolDefinition)&&void 0!==p&&p.inferredDomain&&a.domain.isCompatible(m,"contravariant")?s.push(a):a.domain.isCompatible(m)?(s.push(a),u+=1):(s.push(e.domainError(m,a.domain,a)),l=!1,u+=1):(s.push(a),u+=1):(s.push(a),l=!1,u+=1)}if(o)for(let m of t.slice(u)){var h;u+=1,aa(n,i.length,u-1)?s.push(m):m.isValid?m.domain?r&&Ui(m)||null!==(h=m.symbolDefinition)&&void 0!==h&&h.inferredDomain&&m.domain.isCompatible(o,"contravariant")||m.domain.isCompatible(o)?s.push(m):(s.push(e.domainError(o,m.domain,m)),l=!1):s.push(m):(s.push(m),l=!1)}if(u<t.length)for(let m of t.slice(u))s.push(e.error("unexpected-argument",m)),l=!1;if(!l)return s;u=0;for(let m of i)aa(n,i.length,u)||(!r||!Ui(t[u]))&&t[u].infer(m),u+=1;for(let m of a){var f;(!r||!Ui(t[u]))&&null!==(f=t[u])&&void 0!==f&&f.infer(m),u+=1}if(o)for(let m of t.slice(u))aa(n,i.length,u)||(!r||!Ui(m))&&m.infer(o),u+=1;return null}(e,o,a.hold,a.threadable,s.params,s.optParams,s.restParam);if(l)return e._fn(t,l,r);if(1===o.length&&o[0].head===t){if(a.involution)return o[0].op1;a.idempotent&&(o=o[0].ops)}return o.length>1&&!0===a.commutative&&(o=o.sort(Oi)),e._fn(t,o,r)}function So(e,t,n,r){if(0===e.length)return[];if(e=Pi(e,n),"all"===t)return e;if("none"===t){let t=[];for(let n of e){let e=n.head;if("Hold"===e)t.push(n);else{let i="ReleaseHold"===e?n.op1:n;if(i){let e=r(i);null!==e&&t.push(e)}}}return Pi(t,n)}let i=[];for(let a=0;a<e.length;a++)if("Hold"===e[a].head)i.push(e[a]);else{let n;if("ReleaseHold"===e[a].head?n=e[a].op1:aa(t,e.length-1,a)?i.push(e[a]):n=e[a],n){let e=r(n);null!==e&&i.push(e)}}return Pi(i,n)}function Co(e,t){if(null==t||e===t)return e;let n=e.engine,r=n.box(t);return n.costFunction(r)<=1.2*n.costFunction(e)?r:e}var Eo=m(g(),1);function ko(e){if(!Number.isInteger(e)||!Number.isFinite(e)||Number.isNaN(e)||e<=1)return!1;if(e<=7919)return Cr.has(e);for(let t of Cr)if(e%t===0)return!1;return e>=0x3ffffffffffe5?!!function(e,t){let n=0,r=e-1;for(;r%2===0;)r/=2,++n;e:do{let t=Math.pow(2+Math.floor(Math.random()*(e-3)),r)%e;if(1!==t&&t!==e-1){for(let r=n-1;r--;){if(t=t*t%e,1===t)return!1;if(t===e-1)continue e}return!1}}while(--t);return!0}(e,30)&&void 0:e===function(e){if(1===e)return 1;if(e%2===0)return 2;if(e%3===0)return 3;if(e%5===0)return 5;let t=Math.floor(Math.sqrt(e)),n=7;for(;n<=t;){if(e%n===0)return n;if(e%(n+4)===0)return n+4;if(e%(n+6)===0)return n+6;if(e%(n+10)===0)return n+10;if(e%(n+12)===0)return n+12;if(e%(n+16)===0)return n+16;if(e%(n+22)===0)return n+22;if(e%(n+24)===0)return n+24;n+=30}return e}(e)}var Ao=class e extends xa{constructor(e,t,n){if(super(e,null===n||void 0===n?void 0:n.metadata),"number"==typeof t)return this._value=t,void(this._isCanonical=!0);if(Ur(t)){var r;let[i,a]=t;"number"!=typeof i||Number.isInteger(i)&&Number.isInteger(a),!("bigint"==typeof i&&"bigint"==typeof a)||a!==i&&BigInt(1),null===(r=null===n||void 0===n?void 0:n.canonical)||void 0===r||r?(this._value=No(e,t),this._isCanonical=!0):(this._value=t,this._isCanonical=!1)}else!(t instanceof Eo.Complex)||!Number.isNaN(t.re)&&!Number.isNaN(t.im)&&e.chop(t.im),this._value=No(e,t),this._isCanonical=!0}get hash(){if(void 0!==this._hash)return this._hash;let e=0;return e="number"==typeof this._value?wi(this._value.toString()):this._value instanceof Eo.Complex?wi(this._value.re.toString()+" +i "+this._value.im.toString()):this._value instanceof lt?wi(this._value.toString()):wi(this._value[0].toString()+" / "+this._value[1].toString()),this._hash=e,e}get head(){return"Number"}get isPure(){return!0}get isExact(){return"number"==typeof this._value?Number.isInteger(this._value):this._value instanceof lt?this._value.isInteger():this._value instanceof Eo.Complex?Number.isInteger(this._value.re)&&Number.isInteger(this._value.im):Ur(this._value)}get isCanonical(){return this._isCanonical}set isCanonical(e){this._isCanonical=e}get complexity(){return 1}get numericValue(){return this._value}get domain(){var e;return null!==(e=this._domain)&&void 0!==e||(this._domain=this.engine.domain(function(e){if("number"==typeof e&&!isNaN(e))return isFinite(e)?Number.isInteger(e)?e>0?"PositiveIntegers":e<0?"NegativeIntegers":"Integers":e>0?"PositiveNumbers":e<0?"NegativeNumbers":"RealNumbers":"ExtendedRealNumbers";if(e instanceof lt)return e.isNaN()?"Numbers":e.isFinite()?e.isInteger()?e.isPositive()?"PositiveIntegers":e.isNegative()?"NegativeIntegers":"Integers":e.isPositive()?"PositiveNumbers":e.isNegative()?"NegativeNumbers":"RealNumbers":"ExtendedRealNumbers";if(e instanceof vr.Complex){let t=e;return t.im,0===t.re?"ImaginaryNumbers":"ComplexNumbers"}if(Ur(e)){let[t,n]=e;return"number"!=typeof t||!Number.isNaN(t)&&Number.isNaN(n),"RationalNumbers"}return"Numbers"}(this._value))),this._domain}get json(){return co(this.engine,this._value,{latex:this._latex})}get sgn(){if(0===this._value)return 0;if("number"==typeof this._value)return this._value<0?-1:this._value>0?1:null;if(this._value instanceof lt)return this._value.isZero()?0:this._value.isNegative()?-1:this._value.isPositive()?1:null;if(Array.isArray(this._value)){let[e,t]=this._value;return 0===e&&0!==t?0:e<0?-1:e>0?1:null}return null}isSame(t){if(this===t)return!0;if(!(t instanceof e))return!1;if("number"==typeof this._value)return"number"==typeof t._value&&this._value===t._value;if(this._value instanceof lt)return t._value instanceof lt&&this._value.eq(t._value);if(Array.isArray(this._value)){if(!Array.isArray(t._value))return!1;let[e,n]=t._value;return this._value[0]===e&&this._value[1]===n}return this._value instanceof Eo.Complex&&t._value instanceof Eo.Complex&&this._value.equals(t._value)}isEqual(e){return this===e||0===li(this,e)}match(e,t){var n;return this.isEqualWithTolerance(e,null!==(n=null===t||void 0===t?void 0:t.numericTolerance)&&void 0!==n?n:0)?{}:null}isEqualWithTolerance(t,n){return t instanceof e&&0===li(this,t,n)}isLess(e){let t=li(this,e);if(void 0!==t)return t<0}isLessEqual(e){let t=li(this,e);if(void 0!==t)return t<=0}isGreater(e){return e.isLessEqual(this)}isGreaterEqual(e){return e.isLess(this)}get isPositive(){if("number"==typeof this._value)return this._value>0;let e=this.sgn;return null!=e?e>0:void 0}get isNonNegative(){if("number"==typeof this._value)return this._value>=0;let e=this.sgn;return null!=e?e>=0:void 0}get isNegative(){if("number"==typeof this._value)return this._value<0;let e=this.sgn;return null!=e?e<0:void 0}get isNonPositive(){if("number"==typeof this._value)return this._value<=0;let e=this.sgn;return null!=e?e<=0:void 0}get isZero(){return 0===this._value||(this._value instanceof lt||this._value instanceof Eo.Complex)&&this._value.isZero()}get isNotZero(){return 0!==this._value&&(this._value instanceof lt?!this._value.isZero():!(this._value instanceof Eo.Complex)||!this._value.isZero())}get isOne(){return 1===this._value||"number"!=typeof this._value&&(this._value instanceof lt?this._value.equals(this.engine._BIGNUM_ONE):this._value instanceof Eo.Complex?0===this._value.im&&1===this._value.re:Gr(this._value))}get isNegativeOne(){return-1===this._value||"number"!=typeof this._value&&(this._value instanceof lt?this._value.equals(this.engine._BIGNUM_NEGATIVE_ONE):this._value instanceof Eo.Complex?0===this._value.im&&-1===this._value.re:Zr(this._value))}get isOdd(){return!(!this.isOne&&!this.isNegativeOne)||!(this.isZero||!this.isInteger)&&("number"==typeof this._value?this._value%2!==0:this._value instanceof lt?!this._value.mod(2).isZero():void 0)}get isEven(){return!this.isOne&&!this.isNegativeOne&&(!!this.isZero||!!this.isInteger&&("number"==typeof this._value?this._value%2===0:this._value instanceof lt?this._value.mod(2).isZero():void 0))}get isPrime(){return!(!this.isInteger||!this.isFinite||this.isNonPositive||this.isOne||this.isZero)&&("number"==typeof this._value?ko(this._value):this._value instanceof lt?ko(this._value.toNumber()):void 0)}get isComposite(){return!(!this.isInteger||!this.isFinite||this.isNonPositive||this.isOne||this.isZero)&&("number"==typeof this._value?!ko(this._value):this._value instanceof lt?!ko(this._value.toNumber()):void 0)}get isInfinity(){return"number"==typeof this._value?!Number.isFinite(this._value)&&!Number.isNaN(this._value):(this._value instanceof lt||this._value instanceof Eo.Complex)&&!this._value.isFinite()&&!this._value.isNaN()}get isNaN(){return"number"==typeof this._value?Number.isNaN(this._value):(this._value instanceof lt||this._value instanceof Eo.Complex)&&this._value.isNaN()}get isFinite(){return!this.isInfinity&&!this.isNaN}get isNumber(){return!0}get isInteger(){return"number"==typeof this._value?Number.isInteger(this._value):this._value instanceof lt&&this._value.isInteger()}get isRational(){return!!Array.isArray(this._value)||this.isInteger}get isAlgebraic(){if(this.isRational)return!0}get isReal(){return!!this.isFinite&&(!(this._value instanceof Eo.Complex)||0===this.engine.chop(this._value.im))}get isExtendedReal(){return this.isInfinity||this.isReal}get isComplex(){return!this.isNaN}get isImaginary(){return this._value instanceof Eo.Complex&&(this._value.im,!0)}get isExtendedComplex(){return this.isInfinity||!this.isNaN}get canonical(){return this._isCanonical?this:this.engine.number(No(this.engine,this._value))}simplify(e){return this.canonical}evaluate(e){return null!==e&&void 0!==e&&e.numericMode?this.N(e):this}N(e){if(!Array.isArray(this._value))return this;let t=this.engine,[n,r]=this._value;return"number"!=typeof n||"number"!=typeof r||xi(t)?t.number(t.bignum(n).div(t.bignum(r))):t.number(n/r)}};function No(e,t){if(t instanceof lt&&to(t))return t.toNumber();if(!Ur(t))return t;if(Hr(t=oi(t))){let[n,r]=t;if(!(n>Number.MIN_SAFE_INTEGER&&n<Number.MAX_SAFE_INTEGER&&r>Number.MIN_SAFE_INTEGER&&r<Number.MAX_SAFE_INTEGER))return r<0&&([n,r]=[-n,-r]),r===BigInt(1)?e.bignum(n):r===BigInt(0)?n===r?NaN:n<0?-1/0:1/0:[n,r];t=[Number(n),Number(r)]}let[n,r]=t;return Number.isNaN(n)||Number.isNaN(r)?NaN:(r<0&&([n,r]=[-n,-r]),1===r?n:0===r?0!==n&&Number.isFinite(n)?n<0?-1/0:1/0:NaN:0===n?n:[n,r])}var Mo=class e extends xa{constructor(e,t,n){super(e,n),this._string=t.normalize(),e._register(this)}get hash(){return wi("String"+this._string)}get json(){return function(e,t){return e.jsonSerializationOptions.shorthands.includes("string")?"'".concat(t,"'"):{str:t}}(this.engine,this._string)}get head(){return"String"}get isPure(){return!0}get isCanonical(){return!0}set isCanonical(e){}get domain(){return this.engine.Strings}get complexity(){return 19}get string(){return this._string}isEqual(e){return e.string===this._string}isSame(e){return e.string===this._string}match(t,n){return t instanceof e&&this._string===t._string?{}:null}},Fo=m(g(),1);function To(e,t){switch(t){case"float64":case"float32":case"int32":case"uint8":return new Bo(e);case"complex128":case"complex64":return new Oo(e);case"bool":case"string":case"expression":return new Lo(e)}throw new Error("Unknown dtype ".concat(t))}var Bo=class{constructor(e){this.ce=e,this.one=1,this.zero=0,this.nan=NaN}cast(e,t){let n=this.ce;switch(t){case"float64":case"float32":case"int32":case"uint8":return e;case"complex128":case"complex64":return Array.isArray(e)?e.map((e=>n.complex(e))):this.ce.complex(e);case"bool":return Array.isArray(e)?e.map((e=>0!==e)):0!==e;case"string":return Array.isArray(e)?e.map((e=>Number(e).toString())):Number(e).toString();case"expression":return Array.isArray(e)?e.map((e=>n.number(e))):n.number(e)}throw new Error("Cannot cast ".concat(e," to ").concat(t))}expression(e){return this.ce.number(e)}isZero(e){return 0===e}isOne(e){return 1===e}equals(e,t){return e===t}add(e,t){return e+t}addn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>e+t),0)}neg(e){return-e}sub(e,t){return e-t}mul(e,t){return e*t}muln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>e*t),1)}div(e,t){return e/t}pow(e,t){return e**t}conjugate(e){return e}},Lo=class{constructor(e){this.one=e.number(1),this.zero=e.number(0),this.nan=e.number(NaN),this.ce=e}cast(e,t){if(Array.isArray(e))return e.map((e=>this.cast(e,t)));let n=e.value;switch(t){case"float64":case"float32":return"number"==typeof n?n:void 0;case"int32":return"number"==typeof n?Math.round(n):void 0;case"uint8":if("number"!=typeof n)return;let t=Math.round(n);return t>=0&&t<=255?t:void 0;case"complex128":case"complex64":if("number"==typeof n)return this.ce.complex(n);let r=e.numericValue;return r instanceof Fo.default?r:void 0;case"bool":return"boolean"==typeof n?n:void 0;case"string":return"string"==typeof n?n:void 0;case"expression":return e}throw new Error("Cannot cast ".concat(e," to ").concat(t))}expression(e){return e}isZero(e){var t;return null!==(t=e.isZero)&&void 0!==t&&t}isOne(e){var t;return null!==(t=e.isOne)&&void 0!==t&&t}equals(e,t){return e.isEqual(t)}add(e,t){return this.ce.add([e,t])}addn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.ce.add(t)}neg(e){return this.ce.neg(e)}sub(e,t){return this.ce.add([e,this.ce.neg(t)])}mul(e,t){return this.ce.mul([e,t])}muln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.ce.mul(t)}div(e,t){return this.ce.div(e,t)}pow(e,t){return this.ce.pow(e,t)}conjugate(e){return this.ce.box(["Conjugate",e])}},Oo=class{constructor(e){this.ce=e,this.one=e.complex(1),this.zero=e.complex(0),this.nan=e.complex(NaN)}cast(e,t){if(Array.isArray(e))return e.map((e=>this.cast(e,t)));switch(t){case"float64":case"float32":return 0===e.im?e.re:void 0;case"int32":return 0===e.im?Math.round(e.re):void 0;case"uint8":if(0!==e.im)return;let t=Math.round(e.re);return t>=0&&t<=255?t:void 0;case"complex128":case"complex64":return e;case"bool":return!(0===e.im&&0===e.re);case"string":return e.toString();case"expression":return this.ce.number(e)}throw new Error("Cannot cast ".concat(e," to ").concat(t))}expression(e){return this.ce.number(e)}isZero(e){return e.isZero()}isOne(e){return 1===e.re&&0===e.im}equals(e,t){return e.equals(t)}add(e,t){return e.add(t)}addn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>e.add(t)),this.zero)}neg(e){return e.neg()}sub(e,t){return e.sub(t)}mul(e,t){return e.mul(t)}muln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>e.mul(t)),this.one)}div(e,t){return e.div(t)}pow(e,t){return e.pow(t)}conjugate(e){return e.conjugate()}};function zo(e,t){return e===t?e:"string"===e||"string"===t||"expression"===e||"expression"===t?"expression":"complex128"===e||"complex128"===t?"complex128":"complex64"===e||"complex64"===t?"complex64":"float64"===e||"float64"===t?"float64":"float32"===e||"float32"===t?"float32":"int32"===e||"int32"===t?"int32":"uint8"===e||"uint8"===t?"uint8":"bool"===e||"bool"===t?"bool":"expression"}function Io(e){let t=e.value;if("number"==typeof t)return Number.isInteger(t)?t>=0&&t<=255?"uint8":"int32":"float64";let n=e.numericValue;return null!==n&&n instanceof Fo.default?"complex128":e.string?"string":"expression"}var Po=class e{constructor(e,t){this.ce=e,this.shape=t.shape,this.rank=this.shape.length,this._strides=function(e){let t=new Array(e.length);for(let n=e.length-1,r=1;n>=0;n--)t[n]=r,r*=e[n];return t}(this.shape),this.field=To(e,t.dtype)}static align(e,t){if(e.dtype===t.dtype)return[e,t];let n=zo(e.dtype,t.dtype);return e.dtype===n?[e,t.upcast(n)]:[e.upcast(n),t]}static broadcast(t,n,r){if(!(r instanceof e))return n.map1(t,r);let[i,a]=e.align(n,r),o=i.data.map(((e,n)=>t(e,a.data[n])));return Vo(i.ce,{dtype:i.dtype,shape:i.shape,data:o})}get expression(){let e=this.shape,t=this.rank,n=this.data,r=this._index.bind(this),i=this.field.expression.bind(this.field),a=o=>{if(o.length===t-1){let a=r(o),s=this.ce._fn("List",n.slice(a,a+e[t-1]).map((e=>i(e))));return s.isCanonical=s.ops.every((e=>e.isCanonical)),s}{let t=[];for(let r=0;r<=e[o.length]-1;r++)t.push(a([...o,r+1]));let n=this.ce._fn("List",t);return n.isCanonical=n.ops.every((e=>e.isCanonical)),n}};return a([])}get array(){let e=this.shape,t=this.rank,n=this.data;if(1===t)return n;if(2===t){let[t,r]=e,i=new Array(t);for(let e=0;e<t;e++)i[e]=n.slice(e*r,(e+1)*r);return i}let r=this._index.bind(this),i=a=>{if(a.length===t-1){let i=r(a);return n.slice(i,i+e[t-1])}{let t=[];for(let n=0;n<e[a.length];n++)t.push(i([...a,n+1]));return t}};return i([])}_index(e){let t=this._strides;return e.reduce(((e,n,r)=>e+(n-1)*t[r]),0)}get isSquare(){let e=this.shape;return 2===e.length&&e[0]===e[1]}get isSymmetric(){if(!this.isSquare)return!1;let e=this.shape[0],t=this.data,n=this.field.equals.bind(this.field);for(let r=0;r<e;r++)for(let i=r+1;i<e;i++)if(!n(t[r*e+i],t[i*e+r]))return!1;return!0}get isSkewSymmetric(){if(!this.isSquare)return!1;let e=this.shape[0],t=this.data,n=this.field.equals.bind(this.field),r=this.field.neg.bind(this.field);for(let i=0;i<e;i++)for(let a=i+1;a<e;a++)if(!n(t[i*e+a],r(t[a*e+i])))return!1;return!0}get isUpperTriangular(){if(!this.isSquare)return!1;let e=this.shape[0],t=this.data,n=this.field.isZero.bind(this.field);for(let r=1;r<e;r++)for(let i=0;i<r;i++)if(n(t[r*e+i]))return!1;return!0}get isLowerTriangular(){if(!this.isSquare)return!1;let e=this.shape[0],t=this.data,n=this.field.isZero.bind(this.field);for(let r=0;r<e-1;r++)for(let i=r+1;i<e;i++)if(!n(t[r*e+i]))return!1;return!0}get isTriangular(){if(!this.isSquare)return!1;let e=this.shape[0],t=this.data,n=this.field.isZero.bind(this.field);for(let r=0;r<e;r++)for(let i=0;i<e;i++)if(r<i&&!n(t[r*e+i])||r>i&&!n(t[r*e+i]))return!1;return!0}get isDiagonal(){if(!this.isSquare)return!1;let e=this.shape[0],t=this.data,n=this.field.isZero.bind(this.field);for(let r=0;r<e;r++)for(let i=0;i<e;i++)if(r===i&&!n(t[r*e+i])||r!==i&&!n(t[r*e+i]))return!1;return!0}get isIdentity(){if(!this.isSquare)return!1;let[e,t]=this.shape,n=this.data,r=this.field.isOne.bind(this.field),i=this.field.isZero.bind(this.field);for(let a=0;a<t;a++)for(let e=0;e<t;e++)if(a===e&&!r(n[a*t+e])||a!==e&&!i(n[a*t+e]))return!1;return!0}get isZero(){let e=this.field.isZero.bind(this.field);return this.data.every((t=>e(t)))}at(){let e=this.data.length;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.data[this._index(n)%e]}diagonal(e,t){var n,r;if(null!==(n=e)&&void 0!==n||(e=1),null!==(r=t)&&void 0!==r||(t=2),e===t||e<=0||e>this.shape.length||this.shape[e-1]!==this.shape[t-1])return;let i=new Array(this.shape[e-1]),a=this.data,o=this.shape[e-1];for(let s=0;s<o;s++)i[s]=a[s*o+s];return i}trace(e,t){if(2!==this.rank)return;let[n,r]=this.shape;if(n!==r)return;let i=this.data,a=new Array(n);for(let o=0;o<n;o++)a[o]=i[o*n+o];return this.field.addn(...a)}reshape(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Vo(this.ce,{dtype:this.dtype,shape:t,data:this.data})}flatten(){return this.data}upcast(e){let t=this.field.cast(this.data,e);if(void 0===t)throw Error("Cannot cast tensor to ".concat(e));return Vo(this.ce,{dtype:e,shape:this.shape,data:t})}transpose(e,t,n){var r,i;if(2!==this.rank)return;if(null!==(r=e)&&void 0!==r||(e=1),null!==(i=t)&&void 0!==i||(t=2),e===t)return this;if(e<=0||e>2||t<=0||t>2)return;let[a,o]=this.shape,s=this.data;n&&(s=s.map((e=>n(e))));let l=0,u=new Array(a*o),c=o;for(let d=0;d<o;d++)for(let e=0;e<a;e++)u[l++]=s[e*c+d];return Vo(this.ce,{dtype:this.dtype,shape:[o,a],data:u})}conjugateTranspose(e,t){let n=this.field.conjugate.bind(this.field);return this.transpose(e,t,n)}determinant(){if(2!==this.rank)return;let[e,t]=this.shape;if(e!==t)return;if(1===e)return this.data[0];let n=this.field.add.bind(this.field),r=this.field.mul.bind(this.field),i=this.field.neg.bind(this.field);if(2===e){let[e,t,a,o]=this.data;return n(r(e,o),i(r(t,a)))}let a=this.field.addn.bind(this.field),o=this.field.muln.bind(this.field);if(3===e){let[e,t,n,r,s,l,u,c,d]=this.data;return a([o(e,s,d),o(t,l,u),o(n,r,c),i(o(n,s,u)),i(o(t,r,d)),i(o(e,l,c))])}let s=this.shape[0],l=!1,u=this.field.div.bind(this.field),c=this.field.sub.bind(this.field),d=new Array(s).fill(0).map(((e,t)=>t)),p=[...this.data];for(let f=0;f<s;f++){let e=d[f-1];if(0===this.at(e,f)){let t;for(t=f+1;t<s;t++)if(0!==this.at(d[t],f)){e=d[t],d[t-1]=d[f-1],d[f-1]=e,l=!l;break}if(t===s)return this.at(e,f)}let t=this.at(e,f),n=0===f?1:this.at(d[f-2],f-2);for(let i=f+1;i<s;i++){let a=d[i-1];for(let i=f+1;i<s;i++)p[a][i]=u(c(r(p[a][i],t),r(p[a][f],p[e][i])),n)}}let h=p[d[s-1]][s-1];return l?this.field.neg(h):h}inverse(){if(2!==this.rank)return;let[e,t]=this.shape;if(e!==t)return;if(2===e){let[e,n,r,i]=this.data,a=this.determinant();if(void 0===a||this.field.isZero(a))return;let o=this.field.div.bind(this.field),s=this.field.neg.bind(this.field),l=[o(i,a),s(o(n,a)),s(o(r,a)),o(e,a)];return Vo(this.ce,{dtype:this.dtype,shape:[t,t],data:l})}let n=this.shape[0],r=this.field.div.bind(this.field),i=this.field.sub.bind(this.field),a=this.field.mul.bind(this.field),o=this.array,s=new Array(n).fill(0).map(((e,t)=>{let r=new Array(n).fill(0);return r[t]=1,r})),l=o.map(((e,t)=>[...e,...s[t]])),u=new Array(n).fill(0).map(((e,t)=>t));for(let d=0;d<n;d++){let e=u[d-1];if(0===this.at(e,d)){let t;for(t=d+1;t<n;t++)if(0!==this.at(u[t],d)){e=u[t],u[t-1]=u[d-1],u[d-1]=e;break}if(t===n)return}let t=this.at(e,d),o=0===d?1:this.at(u[d-2],d-2);for(let s=d+1;s<n;s++){let c=u[s-1];for(let s=d+1;s<2*n;s++)l[c][s]=i(l[c][s],a(r(a(l[c][d],l[e][s]),t),o))}}for(let d=n-1;d>=0;d--){let e=l[(u[d],d)];for(let t=0;t<d;t++){let o=u[t];for(let t=n;t<2*n;t++)l[o][t]=i(l[o][t],a(r(a(l[o][d],l[d][t]),e),e))}for(let t=n;t<2*n;t++)l[d][t]=r(l[d][t],e)}let c=l.map((e=>e.slice(n)));return Vo(this.ce,{dtype:this.dtype,shape:[t,t],data:c})}pseudoInverse(){}adjugateMatrix(){}minor(e,t){}map1(e,t){return Vo(this.ce,{dtype:this.dtype,shape:this.shape,data:this.data.map((n=>e(n,t)))})}map2(e,t){let n=t.data;return Vo(this.ce,{dtype:this.dtype,shape:this.shape,data:this.data.map(((t,r)=>e(t,n[r])))})}add(t){return e.broadcast(this.field.add.bind(this.field),this,t)}subtract(t){return e.broadcast(this.field.sub.bind(this.field),this,t)}multiply(t){return e.broadcast(this.field.mul.bind(this.field),this,t)}divide(t){return e.broadcast(this.field.div.bind(this.field),this,t)}power(t){return e.broadcast(this.field.pow.bind(this.field),this,t)}equals(e){if(this.rank!==e.rank||!this.shape.every(((t,n)=>t===e.shape[n])))return!1;let t=this.field.equals.bind(this.field),n=this.field.cast.bind(this.field),r=this.dtype;return this.dtype!==e.dtype?!!this.data.every(((i,a)=>t(i,n(e.data[a],r)))):this.data.every(((n,r)=>t(n,e.data[r])))}};var qo=class extends Po{constructor(e,t){super(e,t),this.dtype="float64",this.data=t.data}get isZero(){return this.data.every((e=>0===e))}},Ro=class extends Po{constructor(e,t){super(e,t),this.dtype="complex128",this.data=t.data}},jo=class extends Po{constructor(e,t){super(e,t),this.dtype="bool",this.data=t.data}},Ko=class extends Po{constructor(e,t){super(e,t),this.dtype="expression",this.data=t.data}};function Vo(e,t){let n=t.dtype;return"float64"===n||"float32"===n||"uint8"===n||"int32"===n?new qo(e,t):"bool"===n?new jo(e,t):"complex64"===n||"complex128"===n?new Ro(e,t):new Ko(e,t)}var Uo=class e extends xa{constructor(e,t,n){var r,i,a;null!==(r=n)&&void 0!==r||(n={}),null!==(i=n.canonical)&&void 0!==i||(n.canonical=!0),super(e,n.metadata),t instanceof Po?this._tensor=t:(this._head=null!==(a=t.head)&&void 0!==a?a:"List",this._ops=n.canonical?e.canonical(t.ops):t.ops,this._expression=e._fn(this._head,this._ops),this.expression.isCanonical=n.canonical),e._register(this)}get expression(){var e;return null!==(e=this._expression)&&void 0!==e||(this._expression=this._tensor.expression),this._expression}get tensor(){if(void 0===this._tensor){this._head,this._ops;let e=function(e,t){var n;let{shape:r,dtype:i}=null!==(n=Ho(e,t))&&void 0!==n?n:{shape:[],dtype:void 0};if(void 0===i)return;let a=!0,o=[],s=To(t[0].engine,"expression"),l=s.cast.bind(s),u=t=>{for(let n of t)if(n.head===e)u(n.ops);else{let e=l(n,i);if(void 0===e)return void(a=!1);o.push(e)}};if(u(t),a)return{shape:r,data:o,dtype:i}}(this._head,this._ops);if(void 0===e)throw new Error("Invalid tensor");this._tensor=Vo(this.engine,e)}return this._tensor}get baseDefinition(){return this.expression.baseDefinition}get functionDefinition(){return this.expression.functionDefinition}bind(){this.expression.bind()}reset(){}get hash(){return wi("BoxedTensor")}get canonical(){return this.expression.canonical}get isCanonical(){return!!this._tensor||this.expression.isCanonical}set isCanonical(e){this._tensor||(this.expression.isCanonical=e)}get isPure(){return!!this._tensor||this.expression.isPure}get isValid(){return!!this._tensor||this.expression.isValid}get complexity(){return 97}get head(){return this._tensor?"List":this._head}get nops(){return this._tensor?this._tensor.shape[0]:this.expression.nops}get ops(){return this.expression.ops}get op1(){if(this._tensor){let e=this._tensor.data;return 0===e.length?this.engine.Nothing:this.engine.box(e[0])}return this.expression.op1}get op2(){if(this._tensor){let e=this._tensor.data;return e.length<2?this.engine.Nothing:this.engine.box(e[1])}return this.expression.op2}get op3(){if(this._tensor){let e=this._tensor.data;return e.length<3?this.engine.Nothing:this.engine.box(e[2])}return this.expression.op3}get shape(){return this.tensor.shape}get rank(){return this.tensor.rank}get domain(){return this._tensor?this.engine.domain("Lists"):this.expression.domain}get json(){return this.expression.json}get rawJson(){return this.expression.rawJson}isSame(t){return this===t||(t instanceof e?this.tensor.equals(t.tensor):this.expression.isSame(t))}isEqual(t){return this===t||(t instanceof e?this.tensor.equals(t.tensor):this.expression.isEqual(t))}match(e,t){return this.expression.match(e,t)}evaluate(e){return this._tensor?this:this.expression.evaluate(e)}simplify(e){return this._tensor?this:this.expression.simplify(e)}N(e){return this._tensor?this:this.expression.N(e)}};function $o(e){return e instanceof Uo}function Ho(e,t){let n,r=[],i=!0,a=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==t.length){var s;t.length>1&&void 0!==r[o]?i=i&&r[o]===t.length:r[o]=Math.max(null!==(s=r[o])&&void 0!==s?s:0,t.length);for(let r of t)if(r.head===e?a(r.ops,o+1):n=void 0===n?Io(r):zo(n,Io(r)),!i)return}};if(a(t),i)return{shape:r,dtype:n}}function Wo(e,t,n){if(!t.isValid||!n.isValid)return e._fn("Divide",[t,n]);if("Negate"===t.head&&"Negate"===n.head&&(t=t.op1,n=n.op1),null!==t.numericValue&&null!==n.numericValue){if(n.isOne)return t;if(n.isNegativeOne)return e.neg(t);if(t.isOne)return e.inv(n);if(t.isNegativeOne)return e.neg(e.inv(n));let r=ti(t),i=ti(n);if(r&&i&&!Wr(i))return e.number(ii(r,ei(i)))}if("Divide"===t.head&&"Divide"===n.head)return Wo(e,e.mul([t.op1,n.op2]),e.mul([t.op2,n.op1]));if("Divide"===t.head)return Wo(e,e.mul([t.op1,n]),t.op2);if("Divide"===n.head)return Wo(e,e.mul([t,n.op2]),n.op1);let r=t.numericValue;if(null!==r){if($r(r)){let[t,i]=r;return Wo(e,e.number(t),e.mul([e.number(i),n]))}if(Hr(r)){let[t,i]=r;return Wo(e,e.number(t),e.mul([e.number(i),n]))}}let i=n.numericValue;if(null!==i){if($r(i)){let[n,r]=i;return Wo(e,e.mul([t,e.number(r)]),e.number(n))}if(Hr(i)){let[n,r]=i;return Wo(e,e.mul([t,e.number(r)]),e.number(n))}}let[a,o]=si(t),[s,l]=si(n);if(!Gr(a)||!Gr(s)){let[t,n]=ii(a,ei(s)),r=e.mul([e.number(t),o]);if(r.isZero)return e.Zero;let i=e.mul([e.number(n),l]);return i.isOne?r:e._fn("Divide",[r,i])}let[u,c]=na(t),[d,p]=na(n);return c=c.canonical,p=p.canonical,null!==p.numericValue&&p.isOne?u*d<0?Ta(c):c:u*d>0?e._fn("Divide",[c,p]):c.numericValue?e._fn("Divide",[Ta(c),p]):Ta(e._fn("Divide",[c,p]))}function Go(e,t,n){if(null!==t.numericValue&&null!==n.numericValue){let r=ti(t),i=ti(n);if(r&&i&&!Wr(i))return e.number(ii(r,ei(i)))}return new ro(e,[t,e.inv(n)]).asRationalExpression()}var Zo=m(g(),1);function Jo(e,t,n,r){if("ComplexInfinity"===n.symbol)return e.NaN;if(n.isZero)return e.One;if(n.isOne)return t;if(n.isNegativeOne)return e.inv(t);if(null!==n.numericValue&&null!==t.numericValue){let i=Lr(t);if(1===i)return e.One;if(0===i){if(n.isPositive)return e.Zero;if(n.isNegative)return e.ComplexInfinity}if(n.isNegativeOne)return e.inv(t);let a=Lr(n);if(.5===a||-.5===a){let n=zr(t);if(null!==n&&n>0){let[i,o]=kr(n,2);return 1===o&&1===i?e.One:1!==i?1===o?e.number(a>=0?i:[1,i]):e.mul([e.number(i),e._fn("Sqrt",[e.number(o)])]):a>0?e._fn("Sqrt",[t],r):e.inv(e._fn("Sqrt",[t]),r)}return a>0?e._fn("Power",[t,e.Half],r):e._fn("Power",[t,e.number([-1,2])],r)}if(t.isInfinity){if(n.numericValue instanceof Zo.Complex){let t=n.numericValue.re;if(0===t)return e.NaN;if(t<0)return e.Zero;if(t>0)return e.ComplexInfinity}if(t.isNegative){if(n.isInfinity)return e.NaN}else if(t.isPositive){if(n.isNegativeOne)return e.Zero;if(n.isInfinity)return n.isNegative?e.Zero:e.PositiveInfinity}}if(n.isInfinity&&(t.isOne||t.isNegativeOne))return e.NaN}if("Power"===t.head&&t.op1.isReal){let r=zr(n);if(null!==r){let n=zr(t.op2);if(null!==n)return e.pow(t.op1,e.number(r*n))}if(t.op1.isNonNegative){let r=ti(n);if(r){let n=ti(t.op2);if(n)return e.pow(t.op1,e.number(ii(r,n)))}}}return"Multiply"===t.head&&null!==zr(n)?e._fn("Multiply",t.ops.map((t=>e.pow(t,n)))):e._fn("Power",[t,n],r)}function Xo(e,t){let n=t.numericValue;if("number"==typeof n)return e.number(n*n);if(n instanceof lt||n instanceof Zo.Complex)return e.number(n.pow(2));if($r(n))return e.number([n[1]*n[1],n[0]*n[0]]);if(Hr(n))return e.number([n[1]*n[1],n[0]*n[0]]);if("Multiply"===t.head)return e._fn("Multiply",t.ops.map((t=>Xo(e,t))));if("Power"===t.head){let n=zr(t.op2);return null!==n?e.pow(t.op1,e.number(2*n)):e.pow(t.op1,e.mul([e.number(2),t.op2]))}return e.pow(t,e.number(2))}function Yo(e,t,n){var r,i,a;if(null===t.numericValue||null===n.numericValue)return;if(t.numericValue instanceof Zo.Complex)return n.numericValue instanceof Zo.Complex?e.number(t.numericValue.pow(n.numericValue)):e.number(t.numericValue.pow(null!==(r=Lr(n))&&void 0!==r?r:NaN));if(n.numericValue instanceof Zo.Complex){var o;let r=null!==(o=Lr(t))&&void 0!==o?o:null;return null!==r?e.number(e.complex(r).pow(n.numericValue)):void 0}let s=function(e){if("number"==typeof e.numericValue){let t=1/e.numericValue;return Number.isInteger(t)?t:null}if(e.numericValue instanceof lt){let t=e.engine._BIGNUM_ONE.div(e.numericValue);return t.isInt()?t.toNumber():null}if(!Ur(e.numericValue))return null;let[t,n]=[Jr(e.numericValue),Xr(e.numericValue)];return 1!==t&&-1!==t?null:t*n}(n);if(xi(e)||t.numericValue instanceof lt||n.numericValue instanceof lt){let r=Or(t),i=Or(n);if(!r||!i)return;if(2===s)return r.isNeg()?Di(e)?e.number(e.complex(0,r.neg().sqrt().toNumber())):e.NaN:e.number(r.sqrt());if(!i.isInteger()&&r.isNeg()){if(!Di(e))return e.NaN;let t=e.complex(r.toNumber()),n=e.complex(i.toNumber());return e.number(t.pow(n))}return e.number(r.pow(i))}let l=null!==(i=Lr(n))&&void 0!==i?i:NaN,u=null!==(a=Lr(t))&&void 0!==a?a:NaN;if(2===s)return u<0?Di(e)?e.mul([e.I,e.number(Math.sqrt(-u))]):e.NaN:e.number(Math.sqrt(u));if(!Number.isInteger(l)&&u<0){if(!Di(e))return e.NaN;let t=e.complex(u),n=e.complex(l);return e.number(t.pow(n))}return e.number(Math.pow(u,l))}function Qo(e,t,n,r){if("Multiply"===t.head){var i,a;let o=xi(e)?[BigInt(1),BigInt(1)]:[1,1],s=[];for(let e of t.ops){let t=ti(e);t?o=ii(o,t):s.push(e)}if(!Gr(o))return e.mul([null!==(i=es(e,e.number(o),r))&&void 0!==i?i:e.One,e.pow(null!==(a=Qo(e,e.mul(s),n,r))&&void 0!==a?a:e.mul(s),n)])}if("Power"===t.head){if(-1===zr(t.op2)&&-1===zr(n))return t.op1;let i=ti(t.op2),a=ti(n);if(i&&a){let n=ii(i,a);return e.pow(t.op1,n)}if("N"===r){let r=Lr(t.op2),i=Lr(n);if(null!==r&&null!==i){let n=r*i;return 0===n?e.One:1===n?t.op1:e.pow(t.op1,n)}}}if("N"!==r&&null!==t.numericValue&&t.isInteger){if(zr(n))return Yo(e,t,n);let r=ti(n);if(r){let[i,a]=[Jr(r),Xr(r)];if((1===i||-1===i)&&(2===a||3===a))if(xi(e)||t.numericValue instanceof lt){let r=Si(t);if(a%2===0&&r<0&&!Di(e))return e.NaN;let o=r<0?a%2===0?e.I:e.NegativeOne:e.One,[s,l]=Vr(r>0?r:-r,a);if(l===BigInt(1)&&s===BigInt(1))return o;if(s!==BigInt(1))return l===BigInt(1)?e.mul([o,e.number(i>=0?s:[BigInt(1),s])]):e.mul([o,e.number(s),e.pow(e.number(l),n)])}else if("number"==typeof t.numericValue){if(t.numericValue<0&&a%2===0&&!Di(e))return e.NaN;let[r,o]=kr(Math.abs(t.numericValue),a),s=t.numericValue<0?a%2===0?e.I:e.NegativeOne:e.One;if(1===o&&1===r)return s;if(1!==r)return 1===o?e.mul([s,e.number(i>=0?r:[1,r])]):e.mul([s,e.number(r),e.pow(e.number(o),n)])}return t.isNegative?Di?e.mul([e.I,e.fn("Sqrt",[e.neg(t)])]):e.NaN:void 0}}if("simplify"!==r&&null!==t.numericValue&&null!==n.numericValue)return Yo(e,t,n)}function es(e,t,n){if(t.isOne)return e.One;if(t.isZero)return e.Zero;if(t.isNegativeOne)return Di(e)?e.I:e.NaN;if(t.isNegative&&!Di(e))return e.NaN;let r=ti(t);if("N"===n||"evaluate"===n&&!r)return ra(t,(t=>t<0?e.complex(t).sqrt():Math.sqrt(t)),(t=>t.isNeg()?e.complex(t.toNumber()).sqrt():t.sqrt()),(e=>e.sqrt()));let i=zr(t);if(null!==i){let[t,n]=kr(Math.abs(i),2);return i<0?(1===n&&e.mul([e.number(e.complex(0,t))]),e.mul([e.number(e.complex(0,t)),e.sqrt(e.number(n))])):1===n?e.number(t):e.mul([e.number(t),e.sqrt(e.number(n))])}if(r){if($r(r)&&!xi(e)){let[t,n]=r;if(Math.abs(t)<Number.MAX_SAFE_INTEGER&&n<Number.MAX_SAFE_INTEGER){let[r,i]=kr(Math.abs(t),2),[a,o]=kr(n,2);return t<0?e.mul([e.number([r,a]),e.sqrt(e.number([i,o])),e.I]):e.mul([e.number([r,a]),e.sqrt(e.number([i,o]))])}}if(Hr(r)||xi(e)){let t=jr(r[0]),[n,i]=Vr(t>0?t:-t,2),[a,o]=Vr(jr(r[1]),2);return t<0?e.mul([e.number([n,a]),e.sqrt(e.number([i,o])),e.I]):e.mul([e.number([n,a]),e.sqrt(e.number([i,o]))])}}}function ts(e,t){if(t.every((e=>e.isCanonical)),0===t.length)return e.One;if(1===t.length)return t[0];if(2===t.length)return rs(t[0],t[1]);let n=new ro(e);for(let r of t){if(r.isNaN||"Undefined"===r.symbol)return e.NaN;n.addTerm(r)}return n.asExpression()}function ns(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"evaluate";if(t.length,"N"===n&&(t=t.map((e=>e.N())),("machine"===e.numericMode||"auto"===e.numericMode)&&t.every((e=>"number"==typeof e.numericValue)))){let n=1;for(let e of t)n*=e.numericValue;return e.number(n)}for(let r of t){if(r.isNaN||"Undefined"===r.symbol)return e.NaN;r.isExact||(n="N")}return t.every((e=>"Multiply"!==e.head)),t="N"===n?t.map((e=>e.N())):t.map((e=>e.evaluate())),new ro(e,t).asExpression(n)}function rs(e,t,n){var r;e.isCanonical,t.isCanonical;let i=e.engine;if("ImaginaryUnit"===e.symbol){let e=Lr(t);if(null!==e)return i.number(i.complex(0,e))}if("ImaginaryUnit"===t.symbol){let t=Lr(e);if(null!==t)return i.number(i.complex(0,t))}if(null!==e.numericValue&&null!==t.numericValue){let n=Lr(e),r=Lr(t);if(null!==n&&i.isComplex(t))return i.number(i.complex(n*t.re,n*t.im));if(null!==r&&i.isComplex(e))return i.number(i.complex(r*e.re,r*e.im))}if(null!==e.numericValue&&null!==t.numericValue&&e.isInteger&&t.isInteger)return null!==(r=ia(e,t,((e,t)=>e*t),((e,t)=>e.mul(t))))&&void 0!==r?r:i.NaN;if(e.isNaN||t.isNaN||"Undefined"===e.symbol||"Undefined"===t.symbol)return i.NaN;if(e.isNothing)return t;if(t.isNothing)return e;if(null!==e.numericValue){if(e.isOne)return t;if(e.isNegativeOne)return Ta(t)}if(null!==t.numericValue){if(t.isOne)return e;if(t.isNegativeOne)return Ta(e)}let a=1,[o,s]=null!==e.numericValue?[e,t]:[t,e];if(o.head,"Negate"===o.head&&(o=o.op1,a=-a),null!==s.numericValue){let e=ti(s);if(e){if(Gr(e))return o;if(Wr(e))return i.Zero;if("Add"===o.head)return a<0&&(s=Ta(s)),i.add(o.ops.map((e=>rs(s,e))),n);let t=ti(o);if(t){let r=ii(e,t);return i.number(a<0?Qr(r):r,{metadata:n})}return a<0?i._fn("Multiply",[Ta(s),o],n):i._fn("Multiply",[s,o],n)}}if(s.hash===o.hash&&s.isSame(o))return Xo(i,s);let l=new ro(i,[s,o]);return a>0?l.asExpression():Ta(l.asExpression(),n)}function is(e,t,n,r){var i;let a=null,o="simplify"===r?t.simplify():t.evaluate({numericMode:"N"===r});if(!n){var s;if(xi(e)){let t=e.bignum(1);for(let e of $i(o)){let n=Or(e);if(null===n){a=void 0;break}if(!n.isFinite()){t=n;break}t=t.mul(n)}null===a&&(a=e.number(t))}else{let t=1;for(let e of $i(o)){let n=Lr(e);if(null===n){a=void 0;break}if(null===n||!Number.isFinite(n)){t=n;break}t*=n}null===a&&(a=e.number(t))}return null!==(s=a)&&void 0!==s?s:void 0}let[l,u,c,d]=pa(n);if(!l)return;let p=t;if("N"!==r&&(u>=c||c-u>=200))return;let h=e.swapScope(p.scope);if(e.pushScope(),p.bind(),"simplify"===r){let t=[];for(let n=u;n<=c;n++)e.assign({[l]:n}),t.push(p.simplify());a=e.mul(t).simplify()}if("evaluate"===r){let t=[];for(let n=u;n<=c;n++)e.assign({[l]:n}),t.push(p.evaluate());a=e.mul(t).evaluate()}if("N"===r){if(null===a&&d){if(xi(e)){let t=e.bignum(1);for(let n=u;n<=c;n++){e.assign({[l]:n});let r=Or(p.N());if(null===r||!r.isFinite()){a=null!==r?e.number(r):void 0;break}t=t.mul(r)}null===a&&(a=e.number(t))}let t=1,n=e.numericMode,r=e.precision;e.numericMode="machine";for(let i=u;i<=c;i++){e.assign({[l]:i});let n=Lr(p.N());if(null===n||!Number.isFinite(n)){a=null!==n?e.number(n):void 0;break}t*=n}e.numericMode=n,e.precision=r,null===a&&(a=e.number(t))}if(null===a){e.assign({[l]:1e3});let t=p.N();e.assign({[l]:999});let n=p.N(),r=Lr(e.div(t,n).N());if(null!==r&&Number.isFinite(r)&&Math.abs(r)>1)a=e.PositiveInfinity;else{let t=1,n=e.numericMode,r=e.precision;e.numericMode="machine";for(let i=u;i<=c;i++){e.assign({[l]:i});let n=Lr(p.N());if(null===n){a=void 0;break}if(Math.abs(1-n)<Number.EPSILON||!Number.isFinite(n))break;t*=n}null===a&&(a=e.number(t)),e.numericMode=n,e.precision=r}}}return e.popScope(),e.swapScope(h),null!==(i=a)&&void 0!==i?i:void 0}function as(e){return e[Math.floor(Math.random()*e.length)]}function os(e,t){if("Add"===e||"Multiply"===e){let n=[],r=1+Math.floor(12*Math.random());for(;r>0;)n.push(ss(t+1)),r-=1;return[e,...n]}return"Divide"===e||"Power"===e?[e,ss(t+1),ss(t+1)]:"Root"===e?[e,ss(t+1),ss(10)]:"trig"===e?[as(["Cos","Sin","Tan","Sinh","Arccos","Arsinh"]),as(["Pi","-1","0","1",["Divide","Pi",-5],["Multiply",-2,["Divide","Pi",11]],["Multiply","Half","Pi"],["Multiply",5,"Pi"],["Multiply",12,"Pi"],["Divide","Pi",5],["Divide","Pi",9],["Multiply",5,["Divide","Pi",9]],["Multiply",2,["Divide","Pi",11]],["Multiply",2,["Divide","Pi",3]]])]:[e,ss(t+1)]}function ss(e){var t;if(null!==(t=e)&&void 0!==t||(e=1),1===e){let e=as([["Sqrt",["Multiply",6,["Sum",["Divide",1,["Power","n",2]],["Triple",["Hold","n"],1,{num:"+Infinity"}]]]],"Add","Add","Add","Add","Add","Multiply","Multiply","Multiply","Multiply","Divide","Divide","Divide","Root","Sqrt","Subtract","Negate","trig"]);return"string"==typeof e?os(e,1):e}if(2===e){let e=Math.random();return e>.75?ss(1):e>.5?ss(3):os(as(["Multiply","Multiply","Add","Power","trig","Ln","Exp"]),2)}return as([-12345e-9,-2,-2,-2,-3,-5,-6,-12,-1654e-60,0,0,12345e-8,1654e-60,1,2,2,2,2,3,3,5,5,6,6,1234.5678,5678.1234,10,15,18,30,60,1234e54,"123456789.12345678912345e200","987654321.12345678912345",["Rational",-6,10],["Rational",-12,15],["Rational",-15,12],["Rational",3,5],["Rational",12,15],["Rational",15,12],"ExponentialE",["Sqrt",3],["Sqrt",5],["Sqrt",15],["Sqrt",25],["Complex",-1.1,1.1],["Complex",4,5],"x","x","x","x",["Add","x",1],["Divide","x",3],["Square","x"],["Power","x",3],["Power","x",4],["Subtract","x",1],["Add","x",1],"Pi"])}var ls=[{Nothing:{domain:"NothingDomain"}},{InvisibleOperator:{complexity:9e3,hold:"all",signature:{restParam:"Anything",result:(e,t)=>0===t.length?e.domain("NothingDomain"):1===t.length?t[0].domain:e.Anything,canonical:us}},Sequence:{hold:"all",signature:{restParam:"Anything",result:(e,t)=>0===t.length?e.domain("NothingDomain"):1===t.length?t[0].domain:e.Anything,canonical:(e,t)=>{let n=oa(qi(t));return 0===n.length?e._fn("Sequence",[]):1===n.length?n[0]:e._fn("Sequence",n)}}},Delimiter:{complexity:9e3,hold:"all",signature:{params:["Anything"],optParams:["Strings"],result:(e,t)=>t[0].domain,canonical:(e,t)=>{var n,r;if(0===t.length)return e._fn("Tuple",[]);let i=t[0];return i.ops,"Sequence"===i.head&&(i=e._fn("Sequence",e.canonical(i.ops))),1===(t=[i,...t.slice(1)]).length?e._fn("Delimiter",t):t.length>2?e._fn("Delimiter",sa(e,t,2)):(null!==(n=null===(r=t[1].string)||void 0===r?void 0:r.length)&&void 0!==n?n:0)>3?e._fn("Delimiter",[t[0],e.error("invalid-delimiter",t[1])]):e._fn("Delimiter",[t[0],ua(e,t[1],"Strings")])},evaluate:(e,t)=>{if(0===t.length)return e.Nothing;let n=t[0];return("Sequence"===n.head||"Delimiter"===n.head)&&(t=qi(t[0].ops)),e._fn("Tuple",t.map((e=>e.evaluate())))},N:(e,t)=>{if(0===t.length)return e.Nothing;let n=t[0];return("Sequence"===n.head||"Delimiter"===n.head)&&(t=qi(t[0].ops)),e._fn("Tuple",t.map((e=>e.N())))}}},Error:{hold:"all",complexity:500,signature:{domain:["FunctionOf","Anything",["OptArg","Anything"],"Void"],canonical:(e,t)=>e._fn("Error",t)}},ErrorCode:{complexity:500,hold:"all",signature:{domain:["FunctionOf","Strings",["VarArg","Anything"],"Anything"],canonical:(e,t)=>{let n=ua(e,t[0],e.Strings).string;return"incompatible-domain"===n?e._fn("ErrorCode",[e.string(n),t[1],t[2]]):e._fn("ErrorCode",t)}}},Hold:{hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],result:(e,t)=>{let n=t[0];return n.symbol?e.domain("Symbols"):n.string?e.domain("Strings"):"Numbers"===n.head?e.domain("Numbers"):n.domain},canonical:(e,t)=>1!==t.length?null:e.hold(t[0]),evaluate:(e,t)=>t[0]}},HorizontalSpacing:{signature:{domain:"Functions",canonical:(e,t)=>2===t.length?t[0].canonical:e.box(["Sequence"])}},Style:{complexity:9e3,inert:!0,signature:{domain:["FunctionOf","Anything",["OptArg","Dictionaries"],"Anything"]}}},{About:{signature:{domain:"Functions"}},Head:{hold:"all",signature:{domain:"Functions",canonical:(e,t)=>{if(1!==t.length)return null;let n=t[0];return n.head?e.box(n.head):e._fn("Head",oa(t))},evaluate:(e,t)=>{var n;let r=t[0];return"string"==typeof(null===r||void 0===r?void 0:r.head)?e.symbol(r.head):null!==(n=null===r||void 0===r?void 0:r.head)&&void 0!==n?n:e.Nothing}}},Tail:{hold:"all",signature:{domain:"Functions",canonical:(e,t)=>{if(1!==t.length)return null;let n=t[0];return n.ops?e._fn("Sequence",n.ops):e._fn("Tail",oa(t))},evaluate:(e,t)=>{let n=t[0];return null!==n&&void 0!==n&&n.ops?e.fn("Sequence",n.ops):e.box(["Sequence"])}}},Identity:{signature:{domain:["FunctionOf","Anything","Anything"],result:(e,t)=>t[0].domain,evaluate:(e,t)=>t[0]}}},{Apply:{signature:{domain:"Functions",canonical:(e,t)=>t[0].symbol?e.box([t[0].symbol,...t.slice(1)]):e._fn("Apply",t),evaluate:(e,t)=>yo(t[0],t.slice(1))}},Assign:{hold:"all",pure:!1,signature:{domain:["FunctionOf","Anything","Anything","Anything"],canonical:(e,t)=>{if(2!==t.length)return null;let n=t[0];if(!n.symbol)return null;let r=t[1];return e._fn("Assign",[n,r])},evaluate:(e,t)=>{let n=t[0],r=t[1];if(!n.symbol)return e.Nothing;let i=r.evaluate();return e.assign(n.symbol,i),i}}},Assume:{hold:"all",pure:!1,signature:{domain:["FunctionOf","Anything","Anything"],evaluate:(e,t)=>e.string(e.assume(t[0]))}},Declare:{hold:"all",pure:!1,signature:{domain:["FunctionOf","Symbols","Anything"],canonical:(e,t)=>{if(2!==t.length)return null;let n=t[0],r=t[1];return n.symbol?r.symbol?e._fn("Declare",t):e._fn("Declare",[n,e._fn("Hold",[r])]):null},evaluate:(e,t)=>{let n=t[0],r=t[1];if(!n.symbol)return e.Nothing;let i=r.evaluate();return wa(i)?(e.declare(n.symbol,i),i):void 0}}},Domain:{signature:{domain:["FunctionOf","Anything","Domains"],evaluate:(e,t)=>t[0].domain}},Evaluate:{hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],result:(e,t)=>t[0].domain,canonical:(e,t)=>e._fn("Evaluate",sa(e,t,1)),evaluate:(e,t)=>t[0].evaluate()}},Function:{complexity:9876,hold:"all",signature:{domain:["FunctionOf","Anything",["VarArg","Symbols"],"Functions"],canonical:(e,t)=>{var n;return 0===t.length?e.box(["Sequence"]):null!==(n=1===t.length?go(t[0]):e._fn("Function",t))&&void 0!==n?n:null},evaluate:(e,t)=>{}}},Simplify:{hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],result:(e,t)=>t[0].domain,canonical:(e,t)=>e._fn("Simplify",sa(e,t,1)),evaluate:(e,t)=>t[0].simplify()}},CanonicalForm:{complexity:8200,hold:"all",signature:{domain:["FunctionOf","Anything",["VarArg","Symbols"],"Anything"],canonical:(e,t)=>{if(1===t.length)return t[0].canonical;let n=t.slice(1).map((e=>{var t;return null!==(t=e.symbol)&&void 0!==t?t:e.string})).filter((e=>null!=e));return cs(t[0],n)}}},N:{hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],result:(e,t)=>t[0].domain,canonical:(e,t)=>{if(1!==t.length)return e._fn("N",sa(e,t,1));let n=t[0].head;if("N"===n)return t[0].canonical;if("Integrate"===n){let[n,r,i]=pa(t[0].op2);if(!n||void 0===r||void 0===i)return null;let a=t[0].op1;return e._fn("NIntegrate",[e.box(["Function",a,n]),e.number(r),e.number(i)])}return"Limit"===n?e._fn("NLimit",t[0].ops):e._fn("N",t)},evaluate:(e,t)=>t[0].N()}},Signatures:{signature:{domain:["FunctionOf","Symbols",["ListOf","Domains"]],canonical:(e,t)=>(t=sa(e,t,1))[0].symbol?e._fn("Signatures",t):e._fn("Signatures",[e.domainError("Symbols",t[0].domain,t[0])]),evaluate:(e,t)=>{var n;let r=t[0].symbol;if(!r)return e.Nothing;let i=e.lookupFunction(r);if(!i)return e.fn("List",[]);let a=i.signature,o=[...a.params];return a.optParams.length>0&&o.push(e._fn("OptArg",a.optParams)),a.restParam&&o.push(e._fn("VarArg",[a.restParam])),"function"==typeof a.result?o.push(null!==(n=a.result(e,[]))&&void 0!==n?n:e.symbol("Undefined")):o.push(a.result),e.fn("List",o)}}},Subscript:{hold:"last",signature:{domain:["FunctionOf","Anything","Anything","Anything"],result:(e,t)=>{let n=t[0],r=t[1];if(n.string&&null!==zr(r))return e.domain("Integers");if(n.symbol){var i,a;let t=null===(i=n.evaluate())||void 0===i?void 0:i.head;if(t)return null!==(a=e.lookupFunction(t))&&void 0!==a&&a.at?void 0:e.domain("Symbols")}},canonical:(e,t)=>{let n=t[0],r=t[1];if(n.string){let t=zr(r);if(null!==t&&t>1&&t<=36){let[r,i]=Rr(n.string,t);return i?e.error(["unexpected-digit",{str:i[0]}],["LatexString",e.string(n.string)]):e.number(r)}}if(n.symbol){var i,a,o,s,l;let t=null===(i=n.evaluate())||void 0===i?void 0:i.head;if(t&&null!==(a=e.lookupFunction(t))&&void 0!==a&&a.at)return e._fn("At",[n.canonical,r.canonical]);let u=null!==(o=null!==(s=r.string)&&void 0!==s?s:r.symbol)&&void 0!==o?o:null===(l=zr(r))||void 0===l?void 0:l.toString();if(u)return e.symbol(n.symbol+"_"+u)}return"Sequence"===r.head&&e._fn("Subscript",[n,e._fn("List",r.ops)]),e._fn("Subscript",t)}}},Symbol:{complexity:500,description:"Construct a new symbol with a name formed by concatenating the arguments",threadable:!0,hold:"all",signature:{domain:["FunctionOf",["VarArg","Anything"],"Anything"],canonical:(e,t)=>{if(0===t.length)return e.Nothing;let n=t.map((e=>{var t,n,r,i;return null!==(t=null!==(n=null!==(r=e.symbol)&&void 0!==r?r:e.string)&&void 0!==n?n:null===(i=zr(e))||void 0===i?void 0:i.toString())&&void 0!==t?t:""})).join("");return n.length>0?e.symbol(n):e.Nothing}}},Timing:{description:"`Timing(expr)` evaluates `expr` and return a `Pair` of the number of second elapsed for the evaluation, and the value of the evaluation",signature:{domain:["FunctionOf","Values",["OptArg","Integers"],["TupleOf","Values","Numbers"]],evaluate:(e,t)=>{var n;if("Nothing"===t[1].symbol){let n=globalThis.performance.now(),r=t[0].evaluate(),i=1e3*(globalThis.performance.now()-n);return e.pair(e.number(i),r)}let r,i=Math.max(3,Math.round(null!==(n=zr(t[1]))&&void 0!==n?n:3)),a=[];for(;i>0;){let e=globalThis.performance.now();r=t[0].evaluate(),a.push(1e3*(globalThis.performance.now()-e)),i-=1}let o=Math.max(...a),s=Math.min(...a);a=a.filter((e=>e>s&&e<o));let l=a.reduce(((e,t)=>e+t),0);return 0===l?e.pair(e.number(o),r):e.pair(e.number(l/a.length),r)}}}},{LatexString:{inert:!0,signature:{domain:["FunctionOf","Strings","Strings"]}},Latex:{signature:{domain:["FunctionOf",["VarArg","Anything"],"Strings"],evaluate:(e,t)=>e.fn("LatexString",[e.string(yt(t.map((e=>e.latex))))])}},Parse:{description:"Parse a LaTeX string and evaluate to a corresponding expression",signature:{domain:["FunctionOf","Anything","Anything"],evaluate:(e,t)=>{var n,r;if(0===t.length)return e.box(["Sequence"]);let i=t[0],a=(null!==(n=i.string)&&void 0!==n?n:"LatexString"===i.head)?i.op1.string:"";return null!==(r=e.parse(a))&&void 0!==r?r:e.box(["Sequence"])}}}},{RandomExpression:{signature:{domain:"Functions",evaluate:(e,t)=>e.box(ss())}}}];function us(e,t){if(0===t.length)return null;let n=t[0];if(1===t.length)return us(e,[n.canonical]);if(2===t.length){let r=Lr(n);if(null!==r&&Number.isInteger(r)){let r=t[1];if("Divide"===r.head||"Rational"===r.head){let[t,i]=[Lr(r.op1),Lr(r.op2)];if(null!==t&&null!==i&&t>0&&t<=1e3&&i>1&&i<=1e3&&Number.isInteger(t)&&Number.isInteger(i))return e.add([n.canonical,r.canonical])}}let i=t[1];if(n.symbol&&"Delimiter"===i.head&&!e.lookupSymbol(n.symbol))return e.lookupFunction(n.symbol)||e.declare(n.symbol,"Functions"),0===i.nops?e.box([n.symbol]):(i=i.op1,"Sequence"===i.head?e.box([n.symbol,...e.canonical(i.ops)]):e.box([n.symbol,i.canonical]))}return(t=oa(qi(t))).every((e=>e.isValid&&(!e.domain||e.domain.isNumeric||Vi(e)&&!e.string)))?e._fn("Multiply",Pi(t,"Multiply")):e._fn("Tuple",t)}function cs(e,t){if(!1===t)return e;if(!0===t)return e.canonical;"string"==typeof t&&(t=[t]);for(let n of t)switch(n){case"InvisibleOperator":e=ps(e);break;case"Number":e=hs(e);break;case"Multiply":e=fs(e);break;case"Add":e=ms(e);break;case"Power":e=gs(e);break;case"Divide":e=vs(e);break;case"Flatten":e=ds(e);break;case"Order":e=zi(e,{recursive:!0});break;default:throw Error("Invalid canonical form")}return e}function ds(e){var t;if(!e.ops)return e;let n=e.ops.map(ds);"Delimiter"===e.head&&(n=[Ri(e.engine,e.op1)]);let r=e.engine,i="Add"===e.head||"Multiply"===e.head;return i||null!==(t=r.lookupFunction(e.head))&&void 0!==t&&t.commutative&&(i=!0),i&&"string"==typeof e.head&&(e=r._fn(e.head,Pi(n,e.head))),e}function ps(e){var t;return e.ops?"InvisibleOperator"===e.head?null!==(t=us(e.engine,e.ops.map(ps)))&&void 0!==t?t:e:e.engine._fn(e.head,e.ops.map(ps)):e}function hs(e){return e.numericValue?e.canonical:e.ops?e.engine._fn(e.head,e.ops.map(hs)):e}function fs(e){if(!e.ops)return e;let t=e.ops.map(fs);return"Multiply"===e.head?ts(e.engine,t):"Negate"===e.head?ts(e.engine,[e.op1,e.engine.NegativeOne]):e}function ms(e){if(!e.ops)return e;let t=e.ops.map(ms);return"Add"===e.head?ka(e.engine,t):"Subtract"===e.head?e.engine._fn("Add",[ms(e.op1),ms(e.engine.neg(e.op2))]):e.engine._fn(e.head,t)}function gs(e){return e.ops?"Power"===e.head?Jo(e.engine,gs(e.op1),gs(e.op2)):e.ops?e.engine._fn(e.head,e.ops.map(gs)):e:e}function vs(e){return"Divide"===e.head?Wo(e.engine,gs(e.op1),gs(e.op2)):e.ops?e.engine._fn(e.head,e.ops.map(vs)):e}function ys(e,t,n){if("number"==typeof t||t instanceof lt)return new Ao(e,t,n);if("canonical"in(n=n?l({},n):{})||(n.canonical=!0),Array.isArray(t)&&2===t.length&&t[0]instanceof lt&&t[1]instanceof lt){if(!t[0].isInteger()||!t[1].isInteger())throw new Error("Array argument to `boxNumber()` should be two integers");t=[jr(t[0].toString()),jr(t[1].toString())]}if(Ur(t)){if(2!==t.length)throw new Error("Array argument to `boxNumber()` should be two integers or two bignums");let[r,i]=t;if("bigint"==typeof r&&"bigint"==typeof i)return r===i?i===BigInt(0)?e.NaN:e.One:r===BigInt(0)?e.Zero:i===BigInt(1)?e.number(r,n):i===BigInt(-1)?e.number(-r,n):r===BigInt(1)&&i===BigInt(2)?e.Half:new Ao(e,[r,i],n);if("number"!=typeof r||"number"!=typeof i)throw new Error("Array argument to `boxNumber()` should be two integers or two bignums");if(!Number.isInteger(r)||!Number.isInteger(i))throw new Error("Array argument to `boxNumber()` should be two integers");return i===r?0===i?e.NaN:e.One:0===r?e.Zero:1===i?e.number(r,n):-1===i?e.number(-r,n):1===r&&2===i?e.Half:new Ao(e,[r,i],n)}if(t instanceof Ga.Complex)return t.isNaN()?e.NaN:t.isZero()?e.Zero:t.isInfinite()?e.ComplexInfinity:0===e.chop(t.im)?e.number(t.re,n):new Ao(e,t,n);let r="";if("string"==typeof t)r=t;else if("object"==typeof t&&"num"in t){if("number"==typeof t.num)return e.number(t.num,n);if("string"!=typeof t.num)throw new Error("MathJSON `num` property should be a string of digits");r=t.num}if(r){if(r=r.toLowerCase(),/[0-9][nd]$/.test(r)&&(r=r.slice(0,-1)),r=r.replace(/[\u0009-\u000d\u0020\u00a0]/g,""),"nan"===r)return e.NaN;if("infinity"===r||"+infinity"===r)return e.PositiveInfinity;if("-infinity"===r)return e.NegativeInfinity;if("0"===r)return e.Zero;if("1"===r)return e.One;if("-1"===r)return e.NegativeOne;if(/\([0-9]+\)/.test(r)){var i;let[t,n,a,o]=null!==(i=r.match(/(.+)\(([0-9]+)\)(.+)?$/))&&void 0!==i?i:[];r=n+a.repeat(Math.ceil(e.precision/a.length))+(null!==o&&void 0!==o?o:"")}return ys(e,e.bignum(r),n)}return null}function bs(e,t,n){if(null===t)return e.error("missing");if("object"==typeof t&&t instanceof xa)return t;if("string"==typeof(t=Qt(t)))return Ds(e,t,n);if(Array.isArray(t)){let r=t.map((t=>bs(e,t,n)));return new wo(e,r[0],r.slice(1))}if("object"==typeof t){if("dict"in t)return new ho(e,t.dict);if("fn"in t)return bs(e,t.fn,n);if("str"in t)return new Mo(e,t.str);if("sym"in t)return Ds(e,t.sym,n);if("num"in t)return Ds(e,t.num,n)}return Ds(e,t,n)}function xs(e,t,n,r){if("Hold"===t)return new wo(e,"Hold",[bs(e,n[0],r)],l(l({},r),{},{canonical:!0}));if("Error"===t||"ErrorCode"===t)return e._fn(t,n.map((t=>e.box(t,{canonical:!1}))),r.metadata);if("Domain"===t)return e.domain(n[0],r.metadata);if("Number"===t&&1===n.length)return Ds(e,n[0],r);if("String"===t)return 0===n.length?new Mo(e,"",r.metadata):new Mo(e,n.map((e=>{var t;return null!==(t=ws(e))&&void 0!==t?t:""})).join(""),r.metadata);if("Symbol"===t&&n.length>0)return e.symbol(n.map((e=>{var t;return null!==(t=ws(e))&&void 0!==t?t:""})).join(""),r);if(r.canonical&&("Divide"===t||"Rational"===t)&&2===n.length){if(n[0]instanceof xa&&n[1]instanceof xa){if("machine"===e.numericMode){let[t,i]=[Lr(n[0]),Lr(n[1])];if(null!==t&&Number.isInteger(t)&&null!==i&&Number.isInteger(i))return e.number([t,i],r)}let[t,i]=[Si(n[0]),Si(n[1])];if(null!==t&&null!==i)return e.number([t,i],r)}else{let[t,i]=[_i(e,n[0]),_i(e,n[1])];if(null!==t&&null!==i)return e.number([t,i],r)}t="Divide"}if(r.canonical&&"Complex"===t){if(1===n.length){let t=Ds(e,n[0],r),i=Lr(t);return null!==i&&0!==i?e.number(e.complex(0,i),r):e.mul([t,e.I])}if(2===n.length){let t=Ds(e,n[0],r),i=Ds(e,n[1],r),a=Lr(t),o=Lr(i);return null!==o&&null!==a?0===o&&0===a?e.Zero:null!==o&&0!==o?e.number(e.complex(a,o),r):t:e.add([t,e.mul([i,e.I])],r.metadata)}}if(r.canonical&&"Negate"===t&&1===n.length){let t=n[0];if("number"==typeof t)return e.number(-t,r);if(t instanceof lt)return e.number(t.neg(),r);let i=e.box(t,r).numericValue;if(null!==i){if("number"==typeof i)return e.number(-i,r);if(i instanceof lt)return e.number(i.neg(),r);if(i instanceof Ga.Complex)return e.number(i.neg());if(Ur(i))return e.number(Qr(i))}}if("Dictionary"===t){let t={};for(let a of n){let n=e.box(a,{canonical:r.canonical}),o=n.head;if("KeyValuePair"===o||"Pair"===o||"Tuple"===o&&2===n.nops){let e=n.op1;if(e.isValid&&!e.isNothing){var i;let r=n.op2,a=null!==(i=e.symbol)&&void 0!==i?i:e.string;if(!a&&(null!==e.numericValue||e.string)){let t="number"==typeof e.numericValue?e.numericValue:zr(e);t&&Number.isFinite(t)&&Number.isInteger(t)&&(a=t.toString())}a&&(t[a]=r)}}}return new ho(e,t,r)}if("List"===t&&r.canonical){var a;let r=n.map((t=>Ds(e,t))),{shape:i,dtype:o}=null!==(a=Ho("List",r))&&void 0!==a?a:{};return o&&i?new Uo(e,{head:t,ops:r}):e._fn(t,r)}return r.canonical?_o(e,t,n,r.metadata):new wo(e,t,n.map((t=>Ds(e,t,{canonical:!1}))),r)}function Ds(e,t,n){var r,i;if(null==t)return e._fn("Sequence",[]);if(t instanceof xa)return cs(t,null===(r=null===(i=n)||void 0===i?void 0:i.canonical)||void 0===r||r);"canonical"in(n=n?l({},n):{})||(n.canonical=!0);let a=!0===n.canonical;if(Array.isArray(t)){if($r(t))return Number.isInteger(t[0])&&Number.isInteger(t[1])?e.number(t):cs(xs(e,"Divide",t,{canonical:a}),n.canonical);if(Hr(t))return e.number(t);if("string"==typeof t[0])return cs(xs(e,t[0],t.slice(1),{canonical:a}),n.canonical);Array.isArray(t[0]);let r=t.slice(1).map((t=>Ds(e,t,n))),i=Ds(e,t[0],{canonical:!1});return cs(new wo(e,i,r),n.canonical)}if("number"==typeof t||t instanceof Ga.Complex||t instanceof lt)return e.number(t);if("string"==typeof t)return t.startsWith("'")&&t.endsWith("'")?new Mo(e,t.slice(1,-1)):/^[+-]?[0-9]/.test(t)?e.number(t):Yi(t)?e.domain(t):kt(t)?e.symbol(t,{canonical:a}):e.error("invalid-identifier",{str:t});if("object"==typeof t){let r={latex:t.latex,wikidata:t.wikidata};if("dict"in t)return cs(new ho(e,t.dict,{canonical:!0,metadata:r}),n.canonical);if("fn"in t)return"string"==typeof t.fn[0]?cs(xs(e,t.fn[0],t.fn.slice(1),{canonical:a}),n.canonical):cs(new wo(e,Ds(e,t.fn[0],n),t.fn.slice(1).map((t=>Ds(e,t,n))),{metadata:r}),n.canonical);if("str"in t)return new Mo(e,t.str,r);if("sym"in t)return e.symbol(t.sym,{canonical:a});if("num"in t)return e.number(t,{canonical:a})}return e.symbol("Undefined")}function ws(e){var t,n;if("string"==typeof e)return e;if(e instanceof xa)return null!==(t=null!==(n=e.string)&&void 0!==n?n:e.symbol)&&void 0!==t?t:e.toString();if("object"==typeof e){if("str"in e)return e.str;if("fn"in e&&"String"===e.fn[0]&&"string"==typeof e.fn[1])return e.fn[1]}return Array.isArray(e)&&"String"===e[0]&&"string"==typeof e[1]?e[1]:null}var _s=m(g(),1),Ss=[{Abs:{wikidata:"Q3317982",threadable:!0,idempotent:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","NonNegativeNumbers"],simplify:(e,t)=>Cs(e,t[0],"simplify"),evaluate:(e,t)=>Cs(e,t[0],"evaluate"),N:(e,t)=>Cs(e,t[0],"N")}},Add:{wikidata:"Q32043",associative:!0,commutative:!0,threadable:!0,idempotent:!0,complexity:1300,hold:"all",signature:{domain:"NumericFunctions",result:(e,t)=>function(e,t){let n=null;for(let r of t){if(null===r||void 0===r||!r.isNumeric)return null;n=Ca(n,r)}return n}(0,t.map((e=>e.domain))),simplify:(e,t)=>Aa(e,t),evaluate:(e,t)=>Na(e,t),N:(e,t)=>Na(e,t,"N")}},Ceil:{description:"Rounds a number up to the next largest integer",complexity:1250,threadable:!0,signature:{domain:["FunctionOf","Numbers","Integers"],evaluate:(e,t)=>ra(t[0],Math.ceil,(e=>e.ceil()),(e=>e.ceil(0)))}},Chop:{associative:!0,threadable:!0,idempotent:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>ra(t[0],(t=>e.chop(t)),(t=>e.chop(t)),(t=>e.chop(t)))}},Divide:{wikidata:"Q1226939",complexity:2500,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],canonical:(e,t)=>{if(2!==(t=la(e,t,2)).length)return e._fn("Divide",t);let[n,r]=t;return e.div(n,r)},simplify:(e,t)=>Go(e,t[0],t[1]),evaluate:(e,t)=>ia(t[0],t[1],((e,t)=>e/t),((e,t)=>e.div(t)),((e,t)=>e.div(t)))}},Exp:{wikidata:"Q168698",threadable:!0,complexity:3500,signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(e,t)=>1!==(t=la(e,t,1)).length?e._fn("Power",[e.E,...t]):e.pow(e.E,t[0])}},Factorial:{description:"Factorial Function",wikidata:"Q120976",threadable:!0,complexity:9e3,signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(e,t)=>{let n=t[0];return n instanceof Ao&&n.isNegative?e.neg(e._fn("Factorial",[e.neg(n)])):e._fn("Factorial",[n])},evaluate:(e,t)=>{let n=zr(t[0]);if(null!==n&&n>=0)return xi(e)?e.number(Ya(e,e.bignum(n))):e.number(Mr(n));let r=t[0].numericValue;if(null!==r&&r instanceof _s.Complex)return e.number(r.add(1));let i=Lr(t[0]);return null!==i?e.number(Br(1+i)):void 0}}},Factorial2:{description:"Double Factorial Function",complexity:9e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>{let n=zr(t[0]);if(null!==n)return xi(e)?e.number(function(e,t){if(!t.isInteger()||t.isNegative())return e._BIGNUM_NAN;if(t.lessThan(1))return e._BIGNUM_ONE;let n=t;for(;t.greaterThan(2);)t=t.minus(2),n=n.mul(t);return n}(e,e.bignum(n))):e.number(function(e){if(!Number.isInteger(e)||e<0)return NaN;if(e<0)return NaN;if(e<=1)return 1;let t=e;for(;e>2;)t*=e-=2;return t}(n))}}},Floor:{wikidata:"Q56860783",complexity:1250,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],evaluate:(e,t)=>ra(t[0],Math.floor,(e=>e.floor()),(e=>e.floor(0)))}},Gamma:{wikidata:"Q190573",complexity:8e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],N:(e,t)=>ra(t[0],(e=>Br(e)),(t=>eo(e,t)),(e=>e))}},GammaLn:{complexity:8e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],N:(e,t)=>ra(t[0],(e=>Tr(e)),(t=>Qa(e,t)),(e=>e))}},Ln:{description:"Natural Logarithm",wikidata:"Q204037",complexity:4e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],N:(e,t)=>ra(t[0],(t=>t>=0?Math.log(t):e.complex(t).log()),(t=>t.isNeg()?e.complex(t.toNumber()).log():t.ln()),(e=>e.log()))}},Log:{description:"Log(z, b = 10) = Logarithm of base b",wikidata:"Q11197",complexity:4100,threadable:!0,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers"],"Numbers"],canonical:(e,t)=>{if(1===t.length)return e._fn("Log",[ua(e,t[0],"Numbers")]);if(2!==(t=la(e,t,2)).length)return e._fn("Log",t);let[n,r]=t;return 10===r.numericValue?e._fn("Log",[n]):e._fn("Log",[n,r])},N:(e,t)=>void 0===t[1]?ra(t[0],(t=>t>=0?Math.log10(t):e.complex(t).log().div(Math.LN10)),(t=>t.isNeg()?e.complex(t.toNumber()).log().div(Math.LN10):lt.log10(t)),(e=>e.log().div(Math.LN10))):ia(t[0],t[1],((e,t)=>Math.log(e)/Math.log(t)),((e,t)=>e.log(t)),((e,t)=>e.log().div("number"==typeof t?Math.log(t):t.log())))}},Lb:{description:"Base-2 Logarithm",wikidata:"Q581168",complexity:4100,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],N:(e,t)=>ra(t[0],(t=>t>=0?Math.log2(t):e.complex(t).log().div(Math.LN2)),(t=>t.isNeg()?lt.log10(t):e.complex(t.toNumber()).log().div(Math.LN2)),(e=>e.log().div(Math.LN2)))}},Lg:{description:"Base-10 Logarithm",wikidata:"Q966582",complexity:4100,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],N:(e,t)=>ra(t[0],(t=>t>=0?Math.log10(t):e.complex(t).log().div(Math.LN10)),(t=>t.isNeg()?e.complex(t.toNumber()).log().div(Math.LN10):lt.log10(t)),(e=>e.log().div(Math.LN10)))}},Mod:{description:"Modulo",wikidata:"Q1799665",complexity:2500,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],evaluate:(e,t)=>{if(2!==t.length)return;let[n,r]=t,i=n.value,a=r.value;return"number"==typeof i&&"number"==typeof a?e.number((i%a+a)%a):void 0}}},Multiply:{wikidata:"Q40276",associative:!0,commutative:!0,idempotent:!0,complexity:2100,hold:"all",threadable:!0,signature:{domain:"NumericFunctions",simplify:(e,t)=>function(e,t){t.every((e=>"Multiply"!==e.head));let n=new ro(e);for(let r of t){if(r=r.simplify(),r.isNaN||"Undefined"===r.symbol)return e.NaN;n.addTerm(r)}return n.asExpression()}(e,t),evaluate:(e,t)=>ns(e,t),N:(e,t)=>ns(e,t,"N")}},Negate:{description:"Additive Inverse",wikidata:"Q715358",complexity:2e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],result:(e,t)=>{let n=t[0].domain;if(null===n||void 0===n||!n.base)return n;let r={PositiveNumbers:"NegativeNumbers",NonNegativeNumbers:"NonPositiveNumbers",NonPositiveNumbers:"NonNegativeNumbers",NegativeNumbers:"PositiveNumbers",PositiveIntegers:"NegativeIntegers",NonNegativeIntegers:"NonPositiveIntegers",NonPositiveIntegers:"NonNegativeIntegers",NegativeIntegers:"PositiveIntegers"}[n.base];return r?e.domain(r):n},canonical:(e,t)=>1!==(t=la(e,t)).length?e._fn("Negate",t):e.neg(t[0]),simplify:(e,t)=>Ba(e,t[0],"simplify"),evaluate:(e,t)=>Ba(e,t[0],"evaluate"),N:(e,t)=>Ba(e,t[0],"N"),sgn:(e,t)=>{let n=t[0].sgn;if(null!=n){if(0===n)return 0;if(n>0)return-1;if(n<0)return 1}}}},PlusMinus:{description:"Plus or Minus",wikidata:"Q120812",complexity:1200,involution:!0,signature:{domain:["FunctionOf","Values","Tuples"],evaluate:(e,t)=>{if(1===t.length)return e.fn("Pair",[t[0],e.neg(t[0])])}}},Power:{wikidata:"Q33456",commutative:!1,threadable:!0,complexity:3500,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],canonical:(e,t)=>{if(2!==(t=la(e,t,2)).length)return e._fn("Power",t);let[n,r]=t;return n instanceof Ao&&n.isNegative?e.neg(e.pow(n,r)):e.pow(n,r)},simplify:(e,t)=>Qo(e,t[0],t[1],"simplify"),evaluate:(e,t)=>Qo(e,t[0],t[1],"evaluate"),N:(e,t)=>"machine"===e.numericMode&&"number"==typeof t[0].numericValue&&"number"==typeof t[1].numericValue?e.number(Math.pow(t[0].numericValue,t[1].numericValue)):Qo(e,t[0],t[1],"N")}},Rational:{complexity:2400,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers"],"RationalNumbers"],canonical:(e,t)=>0===(t=oa(qi(t))).length?e._fn("Rational",[e.error("missing")]):1===t.length?e._fn("Rational",[ua(e,t[0],"ExtendedRealNumbers")]):2===(t=ca(e,t,["Integers","Integers"])).length&&t[0].isValid&&t[1].isValid?e.div(t[0],t[1]):e._fn("Rational",t),simplify:(e,t)=>{if(2===t.length)return Go(e,t[0],t[1])},evaluate:(e,t)=>{if(2===t.length){let[n,r]=[zr(t[0]),zr(t[1])];return null!==n&&null!==r?e.number([n,r]):void 0}let n=Lr(t[0].N());if(null!==n)return e.number(function(e){if(!Number.isFinite(e)||e%1===0)return e;let t=Math.floor(e),n=1,r=0,i=t,a=1;for(;e-t>1e-15*a*a;){e=1/(e-t),t=Math.floor(e);let o=n;n=i;let s=r;r=a,i=o+t*n,a=s+t*r}return[i,a]}(n))},N:(e,t)=>1===t.length?t[0]:ia(t[0],t[1],((e,t)=>e/t),((e,t)=>e.div(t)),((e,t)=>e.div(t)))}},Root:{complexity:3200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],canonical:(e,t)=>{t=la(e,t,2);let[n,r]=t;return 2===t.length&&n.isValid&&r.isValid?e.pow(n,e.inv(r)):e._fn("Root",t)}}},Round:{complexity:1250,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>ra(t[0],Math.round,(e=>e.round()),(e=>e.round(0)))}},Sign:{complexity:1200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Integers"],simplify:(e,t)=>{let n=t[0].sgn;return 0===n?e.Zero:1===n?e.One:-1===n?e.NegativeOne:void 0},evaluate:(e,t)=>{let n=t[0].sgn;return 0===n?e.Zero:1===n?e.One:-1===n?e.NegativeOne:void 0},N:(e,t)=>{let n=t[0].sgn;return 0===n?e.Zero:1===n?e.One:-1===n?e.NegativeOne:void 0}}},Sqrt:{description:"Square Root",wikidata:"Q134237",complexity:3e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(e,t)=>1!==(t=oa(qi(t))).length?e._fn("Sqrt",t):e.pow(t[0],e.Half),simplify:(e,t)=>es(e,t[0],"simplify"),evaluate:(e,t)=>es(e,t[0],"evaluate"),N:(e,t)=>es(e,t[0],"N")}},Square:{wikidata:"Q3075175",complexity:3100,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(e,t)=>1!==(t=oa(qi(t))).length?e._fn("Square",t):e.pow(t[0],e.number(2))}},Subtract:{wikidata:"Q40754",complexity:1350,threadable:!0,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers"],"Numbers"],canonical:(e,t)=>{if(1===t.length){let n=ua(e,t[0],"Numbers");if(n.isValid)return e.neg(n)}t=la(e,t,2);let[n,r]=t;return 2===t.length&&n.isValid&&r.isValid?e.add([n,e.neg(r)]):e._fn("Subtract",t)}}}},{e:{domain:"TranscendentalNumbers",constant:!0,holdUntil:"never",value:"ExponentialE"},i:{domain:"ImaginaryNumbers",constant:!0,holdUntil:"never",flags:{imaginary:!0},value:"ImaginaryUnit"},MachineEpsilon:{domain:"RealNumbers",holdUntil:"N",constant:!0,flags:{real:!0},value:{num:Number.EPSILON.toString()}},Half:{domain:"RationalNumbers",constant:!0,holdUntil:"evaluate",value:["Rational",1,2]},ImaginaryUnit:{domain:"ImaginaryNumbers",constant:!0,holdUntil:"evaluate",wikidata:"Q193796",flags:{imaginary:!0},value:["Complex",0,1]},ExponentialE:{domain:"TranscendentalNumbers",flags:{algebraic:!1,real:!0},wikidata:"Q82435",constant:!0,holdUntil:"N",value:e=>xi(e)?e._BIGNUM_ONE.exp():Math.exp(1)},GoldenRatio:{domain:"AlgebraicNumbers",wikidata:"Q41690",constant:!0,flags:{algebraic:!0},holdUntil:"simplify",value:["Divide",["Add",1,["Sqrt",5]],2]},CatalanConstant:{domain:"RealNumbers",flags:{algebraic:void 0},wikidata:"Q855282",constant:!0,holdUntil:"N",value:{num:"0.91596559417721901505460351493238411077414937428167\n                  21342664981196217630197762547694793565129261151062\n                  48574422619196199579035898803325859059431594737481\n                  15840699533202877331946051903872747816408786590902\n                  47064841521630002287276409423882599577415088163974\n                  70252482011560707644883807873370489900864775113225\n                  99713434074854075532307685653357680958352602193823\n                  23950800720680355761048235733942319149829836189977\n                  06903640418086217941101917532743149978233976105512\n                  24779530324875371878665828082360570225594194818097\n                  53509711315712615804242723636439850017382875977976\n                  53068370092980873887495610893659771940968726844441\n                  66804621624339864838916280448281506273022742073884\n                  31172218272190472255870531908685735423498539498309\n                  91911596738846450861515249962423704374517773723517\n                  75440708538464401321748392999947572446199754961975\n                  87064007474870701490937678873045869979860644874974\n                  64387206238513712392736304998503539223928787979063\n                  36440323547845358519277777872709060830319943013323\n                  16712476158709792455479119092126201854803963934243\n                  "}},EulerGamma:{domain:"RealNumbers",flags:{algebraic:void 0},wikidata:"Q273023",holdUntil:"N",constant:!0,value:{num:"0.57721566490153286060651209008240243104215933593992359880576723488486772677766\n          467093694706329174674951463144724980708248096050401448654283622417399764492353\n          625350033374293733773767394279259525824709491600873520394816567085323315177661\n          152862119950150798479374508570574002992135478614669402960432542151905877553526\n          733139925401296742051375413954911168510280798423487758720503843109399736137255\n          306088933126760017247953783675927135157722610273492913940798430103417771778088\n          154957066107501016191663340152278935867965497252036212879226555953669628176388\n          792726801324310104765059637039473949576389065729679296010090151251959509222435\n          014093498712282479497471956469763185066761290638110518241974448678363808617494\n          551698927923018773910729457815543160050021828440960537724342032854783670151773\n          943987003023703395183286900015581939880427074115422278197165230110735658339673"}}},{PreIncrement:{signature:{domain:["FunctionOf","Numbers","Numbers"]}},PreDecrement:{signature:{domain:["FunctionOf","Numbers","Numbers"]}}},{GCD:{description:"Greatest Common Divisor",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Anything"],"Numbers"],evaluate:(e,t)=>As(e,t,"GCD")}},LCM:{description:"Least Common Multiple",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Anything"],"Numbers"],evaluate:(e,t)=>As(e,t,"LCM")}},Numerator:{description:"Numerator of an expression",complexity:1200,threadable:!0,hold:"all",signature:{domain:["FunctionOf","Anything","Numbers"],canonical:(e,t)=>{if(0===t.length)return e.box(["Sequence"]);let n=t[0];if("Rational"===n.head||"Divide"===n.head)return n.op1;let r=ti(n);return void 0!==r?e.number(r[0]):e._fn("Numerator",oa(t))},evaluate:(e,t)=>{if(0===t.length)return e.box(["Sequence"]);let n=t[0];if("Rational"===n.head||"Divide"===n.head)return n.op1;let r=ti(n);return void 0!==r?e.number(r[0]):e._fn("Numerator",oa(t))}}},Denominator:{description:"Denominator of an expression",complexity:1200,threadable:!0,hold:"all",signature:{domain:["FunctionOf","Anything","Numbers"],canonical:(e,t)=>{if(0===t.length)return e.box(["Sequence"]);let n=t[0];if("Rational"===n.head||"Divide"===n.head)return n.op2;let r=ti(n);return void 0!==r?e.number(r[1]):e._fn("Denominator",oa(t))},evaluate:(e,t)=>{if(0===t.length)return e.box(["Sequence"]);let n=t[0];if("Rational"===n.head||"Divide"===n.head)return n.op2;let r=ti(n);return void 0!==r?e.number(r[1]):e._fn("Denominator",oa(t))}}},NumeratorDenominator:{description:"Sequence of Numerator and Denominator of an expression",complexity:1200,threadable:!0,hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],canonical:(e,t)=>{if(0===t.length)return e.box(["Sequence"]);let n=t[0];if("Rational"===n.head||"Divide"===n.head)return e._fn("Sequence",n.ops);let r=ti(n);return void 0!==r?e._fn("Sequence",[e.number(r[0]),e.number(r[1])]):e._fn("NumeratorDenominator",oa(t))},evaluate:(e,t)=>{if(0===t.length)return e.box(["Sequence"]);let n=t[0];if("Rational"===n.head||"Divide"===n.head)return e._fn("Sequence",n.ops);let r=ti(n);return void 0!==r?e._fn("Sequence",[e.number(r[0]),e.number(r[1])]):e._fn("NumeratorDenominator",oa(t))}}}},{Max:{description:"Maximum of two or more numbers",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Values"],"Numbers"],simplify:(e,t)=>0===t.length?e.NegativeInfinity:1===t.length?t[0]:e.fn("Max",t),evaluate:(e,t)=>ks(e,t,"Max")}},Min:{description:"Minimum of two or more numbers",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Values"],"Numbers"],simplify:(e,t)=>0===t.length?e.PositiveInfinity:1===t.length?t[0]:e.fn("Min",t),evaluate:(e,t)=>ks(e,t,"Min")}},Supremum:{description:"Like Max, but defined for open sets",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Values"],"Numbers"],simplify:(e,t)=>0===t.length?e.NegativeInfinity:1===t.length?t[0]:e.fn("Min",t),evaluate:(e,t)=>ks(e,t,"Supremum")}},Infimum:{description:"Like Min, but defined for open sets",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Values"],"Numbers"],simplify:(e,t)=>0===t.length?e.PositiveInfinity:1===t.length?t[0]:e.fn("Min",t),evaluate:(e,t)=>ks(e,t,"Infimum")}},Product:{wikidata:"Q901718",complexity:1e3,hold:"all",threadable:!1,signature:{domain:["FunctionOf","Anything",["OptArg","Tuples"],"Numbers"],canonical:(e,t)=>function(e,t,n){var r;e.pushScope(),null!==(r=t)&&void 0!==r||(t=e.error("missing"));let i=(n=da(n))?e._fn("Product",[t.canonical,n]):e._fn("Product",[t.canonical]);return e.popScope(),i}(e,t[0],t[1]),simplify:(e,t)=>is(e,t[0],t[1],"simplify"),evaluate:(e,t)=>is(e,t[0],t[1],"evaluate"),N:(e,t)=>is(e,t[0],t[1],"N")}},Sum:{wikidata:"Q218005",complexity:1e3,hold:"all",threadable:!1,signature:{domain:["FunctionOf",["Union","Collections","Functions"],["OptArg","Tuples"],"Numbers"],canonical:(e,t)=>function(e,t,n){var r;e.pushScope(),null!==(r=t)&&void 0!==r||(t=e.error("missing"));let i=(n=da(n))?e._fn("Sum",[t.canonical,n]):e._fn("Sum",[t.canonical]);return e.popScope(),i}(e,t[0],t[1]),simplify:(e,t)=>Ma(e,t[0],t[1],"simplify"),evaluate:(e,t)=>Ma(e,t[0],t[1],"evaluate"),N:(e,t)=>Ma(e,t[0],t[1],"N")}}},{BaseForm:{description:"`BaseForm(expr, base=10)`",complexity:9e3,inert:!0,signature:{domain:["FunctionOf","Values",["OptArg","Integers"],"Values"],result:(e,t)=>t[0].domain}},FromDigits:{description:"`FromDigits(s, base=10)`       return an integer representation of the string `s` in base `base`.",signature:{domain:["FunctionOf","Strings",["OptArg","Anything"],"Integers"],evaluate:(e,t)=>{var n,r,i,a,o;let s=null===(n=t[0])||void 0===n?void 0:n.string;if(!s)return e.domainError("Strings",null===(r=t[0])||void 0===r?void 0:r.domain,t[0]);if(s=s.trim(),s.startsWith("0x"))return e.number(parseInt(s.slice(2),16));if(s.startsWith("0b"))return e.number(parseInt(s.slice(2),2));let l=null!==(i=t[1])&&void 0!==i?i:e.Nothing;if(l.isNothing)return e.number(Number.parseInt(s,10));let u=Lr(l);if(u&&(!Number.isInteger(u)||u<2||u>36))return e.error(["unexpected-base",u],l);let[c,d]=Rr(s,null!==(a=null!==(o=l.string)&&void 0!==o?o:l.symbol)&&void 0!==a?a:10);return d?e.error(["unexpected-digit",{str:d[0]}],{str:d}):e.number(c)}}},IntegerString:{description:"`IntegerString(n, base=10)`       return a string representation of the integer `n` in base `base`.",threadable:!0,signature:{domain:["FunctionOf","Integers",["OptArg","Integers"],"Strings"],evaluate:(e,t)=>{var n,r;let i=t[0],a=null!==(n=Lr(i))&&void 0!==n?n:NaN;if(Number.isNaN(a)||!Number.isInteger(a))return e.domainError("Integers",i.domain,i);let o=null!==(r=t[1])&&void 0!==r?r:e.Nothing;if(o.isNothing){var s;let t=i.numericValue;return"number"==typeof t?e.string(Math.abs(t).toString()):t instanceof lt?e.string(t.abs().toString()):e.string(Math.abs(Math.round(null!==(s=Lr(i))&&void 0!==s?s:NaN)).toString())}if(null===zr(o))return e.domainError("Integers",o.domain,o);let l=zr(o);return l<2||l>36?e.error(["out-of-range",2,36,l],o):e.string(Math.abs(a).toString(l))}}}}];function Cs(e,t,n){if("simplify"!==n){let r=t.numericValue;if(null!==r){if("number"==typeof r)return e.number(Math.abs(r));if(r instanceof lt||r instanceof _s.Complex)return e.number(r.abs());if($r(r))return e.number("N"===n?Math.abs(r[0]/r[1]):[Math.abs(r[0]),r[1]]);if(Hr(r)){let[t,i]=r;return e.number("N"===n?e.bignum(t).div(e.bignum(i)).abs():[t>0?t:-t,i])}}}return t.isNonNegative?t:t.isNegative?e.neg(t):void 0}function Es(e,t){let n=e.engine,r="Max"===t||"Supremum"===t;if("Interval"===e.head){let t=r?e.op2:e.op1;return t.isNumber&&void 0!==t.numericValue?[t,[]]:[void 0,[e]]}if("Range"===e.head){if(1===e.nops)e=r?e.op1:n.One;else if(r){let t=2===e.nops?1:Lr(e.op3);if(null===t||!isFinite(t))return[void 0,[e]];let[r,i]=[Lr(e.op1),Lr(e.op2)];if(null===r||null===i)return[void 0,[e]];let a=Math.floor((i-r)/t);e=n.number(r+t*a)}else e=e.op1;return[e,[]]}if("Linspace"===e.head)return[e=1===e.nops?r?e.op1:n.One:r?e.op2:e.op1,[]];if(Ki(e)){let n,i=[];for(let a of $i(e)){let[e,o]=Es(a,t);e&&(n?(r&&e.isGreater(n)||!r&&e.isLess(n))&&(n=e):n=e),i.push(...o)}return[n,i]}return e.isNumber&&void 0!==e.numericValue?[e,[]]:[void 0,[e]]}function ks(e,t,n){var r;let i="Max"===n||"Supremum"===n;if(0===t.length)return i?e.NegativeInfinity:e.PositiveInfinity;let a,o=[];for(let s of t){let[e,t]=Es(s,n);e&&(a?(i&&e.isGreater(a)||!i&&e.isLess(a))&&(a=e):a=e),o.push(...t)}return o.length>0?e.box(a?[n,a,...o]:[n,...o]):null!==(r=a)&&void 0!==r?r:i?e.NegativeInfinity:e.PositiveInfinity}function As(e,t,n){let r="LCM"===n?Nr:Ar,i="LCM"===n?Xa:Ja,a=[];if(xi(e)){let r=null;for(let e of t)if(null===r)r=Or(e),(null===r||!r.isInteger())&&a.push(e);else{let t=Or(e);t&&t.isInteger()?r=i(r,t):a.push(e)}return 0===a.length?null===r?e.One:e.number(r):null===r?e._fn(n,a):e._fn(n,[e.number(r),...a])}let o=null;for(let s of t)if(null===o)o=Lr(s),(null===o||!Number.isInteger(o))&&a.push(s);else{let e=Lr(s);e&&Number.isInteger(e)?o=r(o,e):a.push(s)}return 0===a.length?null===o?e.One:e.number(o):null===o?e._fn(n,a):e._fn(n,[e.number(o),...a])}var Ns={Sin:["Cos","_"],Cos:["Negate",["Sin","_"]],Tan:["Power",["Sec","_"],2],Sec:["Multiply",["Tan","_"],["Sec","_"]],Csc:["Multiply",["Negate",["Cot","_"]],["Csc","_"]],Cot:["Negate",["Power",["Csc","_"],2]],Arcsin:["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],Arccos:["Negate",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]]],Arctan:["Power",["Add",1,["Power","_",2]],-1],Arcsec:["Multiply",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],["Negate",["Power","_",2]]],Arccsc:["Multiply",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],["Negate",["Power","_",2]]],Arccot:["Negate",["Power",["Add",1,["Power","_",2]],-1]],Sinh:["Cosh","_"],Cosh:["Sinh","_"],Tanh:["Power",["Sech","_"],2],Sech:["Multiply",["Tanh","_"],"Sech"],Csch:["Multiply",["Coth","_"],"Csch"],Coth:["Negate",["Power",["Csch","_"],2]],Arcsinh:["Power",["Add",["Power","_",2],1],["Negate","Half"]],Arccosh:["Power",["Subtract",["Power","_",2],1],["Negate","Half"]],Arctanh:["Power",["Subtract",1,["Power","_",2]],-1],Arcsech:["Negate",["Power",["Multiply","2","Subtract",["Power","_",2]],["Negate","Half"]]],Arccsch:["Negate",["Power",["Multiply","2","Add",["Power","_",2]],["Negate","Half"]]],Arccoth:["Negate",["Power",["Subtract",1,["Power","_",2]],-1]],Exp:["Exp","_"],Ln:["Power","_",-1],Log:["Power",["Multiply","_",["Ln","10"]],-1],Sqrt:["Multiply",["Power","_",["Negate","Half"]],"Half"],Abs:["Piecewise",["Tuple",["Multiply","_",["Power","_",-1]],["Greater","_",0]]],Erf:["Multiply",["Divide","2",["Sqrt","Pi"]],["Exp",["Negate",["Square","_"]]]],Gamma:["Multiply",["Gamma","_"],["Digamma","_"]],Digamma:["Add",["Multiply",["Digamma","_"],["Gamma","_"]],["Multiply",["Power","_",-1],["Gamma","_"]]],Zeta:["Multiply",["Multiply",-1,["Zeta","_"]],["Digamma","_"]],PolyGamma:["Add",["Multiply",["PolyGamma","_"],["Gamma","_"]],["Multiply",["Power","_",-1],["Gamma","_"]]],Beta:["Multiply",["Add",["Multiply",["Beta","_"],["Digamma","_"]],["Multiply",["Power","_",-1],["Beta","_"]]],["Beta","_"]],Erfc:["Multiply",["Negate",["Erfc","_"]],["Exp",["Negate",["Power","_",2]]],["Power","_",-1]],LambertW:["Multiply",["Power","_",-1],["Multiply",["Add","_",["LambertW","_"]],["Add",["LambertW","_"],1]]],AiryAi:["Multiply",["AiryAi","_"],["AiryBi","_"]],AiryBi:["Multiply",["AiryAi","_"],["AiryBi","_"]],BesselJ:["Multiply",["BesselJ","_"],["BesselY","_"]],BesselY:["Multiply",["BesselJ","_"],["BesselY","_"]],BesselI:["Multiply",["BesselI","_"],["BesselK","_"]],BesselK:["Multiply",["BesselI","_"],["BesselK","_"]],FresnelS:["Multiply",["FresnelS","_"],["FresnelC","_"]],FresnelC:["Multiply",["FresnelS","_"],["FresnelC","_"]],Erfi:["Multiply",["Erfi","_"],["Erf","_"]]};function Ms(e,t){let n=e.engine;if(!e.string&&!e.keys){if(null!==e.numericValue)return e.engine.Zero;if(e.symbol===t)return e.engine.One;if(e.symbol)return e.engine.Zero;if(e.head&&"string"==typeof e.head){var r;if("Negate"===e.head){let r=Ms(e.op1,t);return r?n.neg(r):n.neg(n._fn("D",[e.op1,n.symbol(t)]))}if("Add"===e.head){let r=e.ops.map((e=>Ms(e,t)));return r.some((e=>void 0===e))?void 0:n.add(r)}if("Multiply"===e.head){let r=e.ops.map(((r,i)=>{var a;let o=e.ops.slice();o.splice(i,1);let s=n.mul(o),l=null!==(a=Ms(r,t))&&void 0!==a?a:n._fn("D",[r,n.symbol(t)]);return n.mul([l,s])}));return r.some((e=>void 0===e))?void 0:n.add(r)}if("Power"===e.head){let[r,i]=e.ops;if(r.symbol===t)return n.mul([i,n.pow(r,n.add([i,n.NegativeOne]))])}if("Divide"===e.head){var i,a;let[r,o]=e.ops,s=null!==(i=Ms(r,t))&&void 0!==i?i:n._fn("D",[r,n.symbol(t)]),l=null!==(a=Ms(o,t))&&void 0!==a?a:n._fn("D",[o,n.symbol(t)]);return n.div(n.add([n.mul([s,o]),n.neg(n.mul([l,r]))]),n.pow(o,2))}let s=Ns[e.head];if(!s){var o;let r=n._fn("Derivative",[n.symbol(e.head),n.number(1)]),i=e.ops[0],a=null!==(o=Ms(i,t))&&void 0!==o?o:n._fn("D",[i,n.symbol(t)]);return n.mul([n._fn("Apply",[r,i]),a])}if(e.nops>1)return n._fn("D",[e,n.symbol(t)]);let l=e.ops[0],u=null!==(r=Ms(l,t))&&void 0!==r?r:n._fn("D",[l,n.symbol(t)]);return n.mul([yo(n.box(s),[l]),u])}}}var Fs=[{Derivative:{hold:"all",threadable:!1,signature:{domain:["FunctionOf","Functions",["OptArg","Numbers"],"Functions"],canonical:(e,t)=>{var n,r;return t[0].functionDefinition&&null!==(n=null===(r=Ms(e._fn(t[0].canonical,[e.symbol("_")]),"_"))||void 0===r?void 0:r.canonical)&&void 0!==n?n:e._fn("Derivative",t)},simplify:(e,t)=>{let n=t[0].simplify();return t[1]?e._fn("Derivative",[n,t[1]]):e._fn("Derivative",[n])},evaluate:(e,t)=>{var n,r;let i=t[0].evaluate();if(i.functionDefinition)return null!==(n=null===(r=Ms(e._fn(i,[e.symbol("_")]),"_"))||void 0===r?void 0:r.canonical)&&void 0!==n?n:void 0;let a=Ms(i,"_");return a?a.canonical:void 0}}},D:{hold:"all",threadable:!1,signature:{domain:["FunctionOf","Anything","Symbols",["VarArg","Symbols"],"Anything"],canonical:(e,t)=>{let n=t[0];if(!n)return null;e.pushScope();let r=t.slice(1);n.bind(),n=n.canonical;let i=e._fn("D",[n,...r]);return e.popScope(),i},evaluate:(e,t)=>{var n,r,i;let a=t[0].canonical,o=e.swapScope(a.scope);a=a.evaluate();let s=t.slice(1);0===s.length&&(a=void 0);for(let l of s){if(!l.symbol){a=void 0;break}if(a=Ms(a,l.symbol),void 0===a)break}return e.swapScope(o),a=null===(n=a)||void 0===n?void 0:n.canonical,"D"===(null===(r=a)||void 0===r?void 0:r.head)?a:null===(i=a)||void 0===i?void 0:i.evaluate()}}},ND:{hold:"first",threadable:!1,signature:{domain:["FunctionOf","Anything","Numbers","Functions"],N:(e,t)=>{var n;let r=null===(n=t[1])||void 0===n?void 0:n.value;if("number"!=typeof r)return;let i=xo(e.box(t[0]));return e.number(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;return(e(t-4*n)/280-4*e(t-3*n)/105+e(t-2*n)/5-4*e(t-n)/5+4*e(t+n)/5-e(t+2*n)/5+4*e(t+3*n)/105-e(t+4*n)/280)/n}(i,r))}}},Integrate:{wikidata:"Q80091",hold:"all",threadable:!1,signature:{domain:["FunctionOf","Functions",["OptArg",["Union","Tuples","Symbols"]],"Numbers"],canonical:(e,t)=>{var n,r,i,a,o,s,l,u;let c=t[1],d=null,p=null,h=null;c&&"Tuple"!==c.head&&"Triple"!==c.head&&"Pair"!==c.head&&"Single"!==c.head?d=c:c&&(d=null!==(n=null===(r=c.ops)||void 0===r?void 0:r[0])&&void 0!==n?n:null,p=null!==(i=null===(a=c.ops)||void 0===a||null===(a=a[1])||void 0===a?void 0:a.canonical)&&void 0!==i?i:null,h=null!==(o=null===(s=c.ops)||void 0===s||null===(s=s[2])||void 0===s?void 0:s.canonical)&&void 0!==o?o:null),d&&"Hold"===d.head&&(d=d.op1),d&&"ReleaseHold"===d.head&&(d=d.op1.evaluate()),null!==(l=d)&&void 0!==l||(d=e.Nothing),d.symbol||(d=e.domainError("Symbols",d.domain,d)),p&&(p=ua(e,p,e.Numbers)),h&&(h=ua(e,h,e.Numbers)),c=p&&h?e.tuple([d,p,h]):h?e.tuple([d,e.NegativeInfinity,h]):p?e.tuple([d,p]):d;let f=null!==(u=t[0])&&void 0!==u?u:e.error("missing");return f=f.canonical,"Delimiter"===f.head&&"Sequence"===f.op1.head&&(f=f.op1.op1),e._fn("Integrate",[f,c])}}},NIntegrate:{hold:"first",threadable:!1,signature:{domain:["FunctionOf","Functions","Numbers","Numbers","Numbers"],evaluate:(e,t)=>{let n=e.numericMode,r=e.precision;e.numericMode="machine";let i,a=xo(t[0]),[o,s]=t.slice(1).map((e=>e.value));return"number"==typeof o&&"number"==typeof s&&(i=e.number(function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e5,i=0;if(t===-1/0&&n===1/0)for(let a=0;a<r;a++){let t=Math.random(),n=Math.tan(Math.PI*(t-.5)),r=Math.PI*(1+n*n);i+=e(n)/r}else if(t===-1/0)for(let a=0;a<r;a++){let t=Math.random(),r=1/(1-t);i+=e(n-Math.log(1-t))/r}else if(n===1/0)for(let a=0;a<r;a++){let n=Math.random(),r=1/n;i+=e(t+Math.log(n))/r}else for(let a=0;a<r;a++)i+=e(t+Math.random()*(n-t));return i/r*(n-t)}(a,o,s))),e.numericMode=n,e.precision=r,i}}}},{Limit:{description:"Limit of a function",complexity:5e3,hold:"all",threadable:!1,signature:{domain:["FunctionOf","Anything","Numbers",["OptArg","Numbers"],"Numbers"],N:(e,t)=>{var n;let[r,i,a]=t,o=Lr(i.N());if(null===o)return;let s=bo(r);return e.number(qr((t=>{var n;let r=null===(n=s([e.number(t)]))||void 0===n?void 0:n.value;return"number"==typeof r?r:Number.NaN}),o,a&&null!==(n=Lr(a))&&void 0!==n?n:1))}}},NLimit:{description:"Numerical approximation of the limit of a function",complexity:5e3,hold:"all",threadable:!1,signature:{domain:["FunctionOf","Anything","Numbers",["OptArg","Numbers"],"Numbers"],evaluate:(e,t)=>{var n;let[r,i,a]=t,o=Lr(i.N());if(null===o)return;let s=bo(r);return e.number(qr((t=>{var n;let r=null===(n=s([e.number(t)]))||void 0===n?void 0:n.value;return"number"==typeof r?r:Number.NaN}),o,a&&null!==(n=Lr(a))&&void 0!==n?n:1))}}}}],Ts={List:{complexity:8200,hold:"all",signature:{domain:["FunctionOf",["VarArg","Anything"],"Lists"],canonical:function(e,t){let n=t[0];if(1===t.length&&"Matrix"===n.head){let[t,r,i]=n.ops;if(!r||".."===r.string)return i?e._fn("Matrix",[t,e.string("[]"),i]):e._fn("Matrix",[t,r])}return t=t.map((t=>{var n,r;return"Delimiter"===t.head?"Sequence"===t.op1.head?e.box(["List",...oa(t.op1.ops)]):e.box(["List",null!==(n=null===(r=t.op1)||void 0===r?void 0:r.canonical)&&void 0!==n?n:e.Nothing]):t.canonical})),e.box(["List",...t])}},size:e=>e.nops,iterator:(e,t,n)=>{var r;let i=null!==t&&void 0!==t?t:1;return(n=Math.min(null!==(r=n)&&void 0!==r?r:e.nops,e.nops))<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>n>0?(n--,{value:e.ops[i++-1],done:!1}):{value:void 0,done:!0}}},at:(e,t)=>{if("number"==typeof t&&!(t<1||t>e.nops))return e.ops[t-1]},indexOf:(e,t,n)=>{var r;if(null!==(r=n)&&void 0!==r||(n=1),n<0){if(n<-e.nops)return;for(let r=n=e.nops+n+1;r>=1;r--)if(e.ops[r-1].isEqual(t))return r;return}for(let i=n;i<=e.nops;i++)if(e.ops[i-1].isEqual(t))return i}},Range:{complexity:8200,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers","Numbers"],"Values"]},size:e=>{let[t,n,r]=Bs(e);return isFinite(t)&&isFinite(n)?1+Math.max(0,Math.floor((n-t)/r)):1/0},at:(e,t)=>{if("number"!=typeof t)return;let[n,r,i]=Bs(e);return t<1||t>1+(r-n)/i?void 0:e.engine.number(n+i*(t-1))},iterator:(e,t,n)=>{var r;let[i,a,o]=Bs(e),s=null!==t&&void 0!==t?t:1;return(n=Math.min(null!==(r=n)&&void 0!==r?r:a,a))<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>n>0?(n--,{value:e.engine.number(i+o*(s++-1)),done:!1}):{value:void 0,done:!0}}}},Linspace:{complexity:8200,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers","Numbers"],"Values"]},size:e=>{var t;let n=null!==(t=Lr(e.op3))&&void 0!==t?t:50;return Math.max(0,Math.floor(n))},at:(e,t)=>{var n;if("number"!=typeof t)return;let r=Lr(e.op1),i=Lr(e.op2),a=null!==(n=Lr(e.op3))&&void 0!==n?n:50;return void 0===r||void 0===i||t<1||t>a?void 0:e.engine.number(r+(i-r)*(t-1)/a)},iterator:(e,t,n)=>{var r,i;let a,o=Lr(e.op1),s=Lr(e.op2);void 0===s?(s=o,o=1,a=50):a=Math.max(0,null!==(r=Lr(e.op3))&&void 0!==r?r:50);let l=null!==t&&void 0!==t?t:1;return(n=Math.min(null!==(i=n)&&void 0!==i?i:a,a))<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>n>0?(n--,{value:e.engine.number(o+(s-o)*(l++-1)/a),done:!1}):{value:void 0,done:!0}}}},KeyValuePair:{description:"A key/value pair",complexity:8200,signature:{domain:["FunctionOf","Strings","Anything","Tuples"],canonical:(e,t)=>{let[n,r]=ca(e,t,[e.Strings,"Values"]);return n.isValid&&r.isValid?e.tuple([n,r]):e._fn("KeyValuePair",[n,r])}},size:e=>1},Single:{description:"A tuple with a single element",complexity:8200,signature:{domain:["FunctionOf","Anything","Tuples"],canonical:(e,t)=>e.tuple(sa(e,t,1))},size:e=>e.nops,at:(e,t)=>{if("number"==typeof t&&1===t)return e.ops[0]}},Pair:{description:"A tuple of two elements",complexity:8200,signature:{domain:["FunctionOf","Anything","Anything","Tuples"],canonical:(e,t)=>e.tuple(sa(e,t,2))},size:e=>e.nops,at:(e,t)=>"number"==typeof t?e.ops[t-1]:void 0},Triple:{description:"A tuple of three elements",complexity:8200,signature:{domain:["FunctionOf","Anything","Anything","Anything","Tuples"],canonical:(e,t)=>e.tuple(sa(e,t,3))},size:e=>e.nops,at:(e,t)=>"number"==typeof t?e.ops[t-1]:void 0},Tuple:{description:"A fixed number of heterogeneous elements",complexity:8200,signature:{domain:["FunctionOf","Anything",["VarArg","Anything"],"Tuples"],canonical:(e,t)=>e.tuple(oa(t))},size:e=>e.nops,at:(e,t)=>"number"==typeof t?e.ops[t-1]:void 0},String:{threadable:!0,signature:{domain:["FunctionOf",["OptArg","Anything"],"Strings"],evaluate:(e,t)=>0===t.length?e.string(""):e.string(t.map((e=>{var t;return null!==(t=e.string)&&void 0!==t?t:e.toString()})).join(""))}},Length:{complexity:8200,signature:{domain:["FunctionOf","Values","Numbers"],evaluate:(e,t)=>{let n=t[0].functionDefinition;if(null!==n&&void 0!==n&&n.size)return e.number(n.size(t[0]));let r=t[0].string;return null!==r?e.number(r.length):e.Zero}}},IsEmpty:{complexity:8200,signature:{domain:["FunctionOf","Values","Numbers"],evaluate:(e,t)=>{let n,r=t[0].functionDefinition;if(null!==r&&void 0!==r&&r.size)n=r.size(t[0]);else{let e=t[0].string;null!==e&&(n=e.length)}if(void 0!==n)return 0===n?e.True:e.False}}},Take:{complexity:8200,signature:{domain:["FunctionOf","Values",["VarArg","Values"],"Values"],evaluate:(e,t)=>{var n,r;if(t.length<2)return;let i=t[0].string;if(null!==i){let n=t.slice(1).map((e=>Ls(e,i.length)));return e.string(function(e,t){let n="";for(let r of t){let[t,i,a]=r;if(1===a)n+=e.slice(t-1,i);else if(a<0)for(let r=t;r>=i;r+=a)n+=e[r-1];else for(let r=t;r<=i;r+=a)n+=e[r-1]}return n}(i,n))}let a=null===(n=t[0].functionDefinition)||void 0===n||null===(r=n.size)||void 0===r?void 0:r.call(n,t[0]);return Os(t[0],t.slice(1).map((e=>Ls(e,a))))}}},Drop:{complexity:8200,signature:{domain:["FunctionOf","Values",["VarArg","Values"],"Values"],evaluate:(e,t)=>{var n;if(t.length<2)return;let r=t[0].string;if(null!==r){let n=zs(t.slice(1).map((e=>Ls(e,r.length))));return e.string(r.split("").filter(((e,t)=>!n.includes(t+1))).join(""))}let i=t[0].functionDefinition,a=null===i||void 0===i||null===(n=i.size)||void 0===n?void 0:n.call(i,t[0]);if(!a||null===i||void 0===i||!i.at)return e.Nothing;let o=zs(t.slice(1).map((e=>Ls(e,a)))),s=[];for(let l=1;l<=a;l++)if(!o.includes(l)){let e=i.at(t[0],l);e&&s.push(e)}return e.fn("List",s)}}},At:{complexity:8200,signature:{domain:["FunctionOf","Values","Values","Values"],evaluate:(e,t)=>{var n,r;let i=t[0],a=i.functionDefinition;if(null===a||void 0===a||!a.at)return;if(null!==t[1].string)return null!==(n=a.at(i,1))&&void 0!==n?n:e.Nothing;let o=Lr(t[1]);return null!==o&&Number.isInteger(o)?null!==(r=a.at(i,o))&&void 0!==r?r:e.Nothing:void 0}}},First:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{var n;let r=t[0],i=r.functionDefinition;return null!==i&&void 0!==i&&i.at&&null!==(n=i.at(r,1))&&void 0!==n?n:e.Nothing}}},Second:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{var n;let r=t[0],i=r.functionDefinition;return null!==i&&void 0!==i&&i.at&&null!==(n=i.at(r,2))&&void 0!==n?n:e.Nothing}}},Last:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{var n;let r=t[0],i=r.functionDefinition;return null!==i&&void 0!==i&&i.at&&null!==(n=i.at(r,-1))&&void 0!==n?n:e.Nothing}}},Rest:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>Os(t[0],[[2,-1,1]])}},Most:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>Os(t[0],[[1,-2,1]])}},Reverse:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>Os(t[0],[[-1,2,1]])}},Ordering:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Functions"],"Values"],evaluate:(e,t)=>{}}},Sort:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Functions"],"Values"],evaluate:(e,t)=>{}}},Shuffle:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{}}},Map:{complexity:8200,signature:{domain:["FunctionOf","Collections","Functions","Collections"],evaluate:(e,t)=>{}}},Filter:{complexity:8200,signature:{domain:["FunctionOf","Values","Functions","Values"],evaluate:(e,t)=>{}}},Reduce:{complexity:8200,signature:{domain:["FunctionOf","Values","Functions",["OptArg","Values"],"Values"],evaluate:(e,t)=>{}}},Tabulate:{complexity:8200,signature:{domain:["FunctionOf","Functions","Integers",["VarArg","Integers"],"Values"],evaluate:(e,t)=>{}}},Tally:{complexity:8200,signature:{domain:["FunctionOf","Values","Tuples"],evaluate:(e,t)=>{}}},Unique:{complexity:8200,signature:{domain:["FunctionOf","Values","Tuples"],evaluate:(e,t)=>{}}},Zip:{complexity:8200,signature:{domain:["FunctionOf","Values",["VarArg","Values"],"Values"],evaluate:(e,t)=>{}}},RotateLeft:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Integers"],"Values"],evaluate:(e,t)=>{}}},RotateRight:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Integers"],"Values"],evaluate:(e,t)=>{}}},Join:{complexity:8200,signature:{domain:["FunctionOf",["VarArg","Values"],"Values"],evaluate:(e,t)=>{}}},Iterate:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Values"],"Values"],evaluate:(e,t)=>{}}},Repeat:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{}}},Cycle:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{}}},Fill:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{}}}};function Bs(e){var t,n;let r=null!==(t=Lr(e.op1))&&void 0!==t?t:1,i=Lr(e.op2);return void 0===i?[1,r,1]:[r,i,null!==(n=Lr(e.op3))&&void 0!==n?n:1]}function Ls(e,t){if(!e)return[0,0,0];let n=Lr(e);if(null!==n){if(n=Math.round(n),n<0){if(void 0===t)return[0,0,0];n=t+n+1}return[n,n,1]}let r=e.head;if(!r||"string"!=typeof r||!/^(Single|Pair|Triple|Tuple|)$/.test(r))return[0,0,0];let[i,a,o]=Bs(e);return(i<0||a<0)&&void 0===t?[0,0,0]:(i<0&&(i=t+i+1),a<0&&(a=t+a+1),o=Math.abs(Math.round(o)),0===o?[0,0,0]:(i>a&&(o=-o),[i,a,o]))}function Os(e,t){let n=e.engine,r=e.functionDefinition;if(null===r||void 0===r||!r.at)return n.Nothing;let i=[];for(let a of t){let[t,n,o]=a;if(0!==o)if(o<0)for(let a=t;a>=n;a+=o){let t=r.at(e,a);t&&i.push(t)}else for(let a=t;a<=n;a+=o){let t=r.at(e,a);t&&i.push(t)}}return n.fn("List",i)}function zs(e){let t=[];for(let n of e){let[e,r,i]=n;if(0!==i)if(i<0)for(let n=e;n>=r;n+=i)t.push(n);else for(let n=e;n<=r;n+=i)t.push(n)}return t}var Is=[{Block:{hold:"all",signature:{domain:"Functions",canonical:function(e,t){if(0===t.length)return null;e.pushScope();let n=[],r=[];for(let a of t)"Declare"===a.head?n.push(a):r.push(Ps(a));let i=e._fn("Block",[...n,...r]);return e.popScope(),i},evaluate:function(e,t){var n;if(0===t.length)return e.Nothing;let r;e.resetContext();for(let i of t){let t=i.head;if("Return"===t){r=i.op1.evaluate();break}if("Break"===t||"Continue"===t){r=e.fn(t,[i.op1.evaluate()]);break}r=i.evaluate()}return null!==(n=r)&&void 0!==n?n:e.Nothing}}},If:{hold:"rest",signature:{domain:"Functions",result:(e,t)=>Ca(t[0],t[1]),evaluate:(e,t)=>{let n=t[0];return n&&"True"===n.symbol?t[1]?t[1].evaluate():e.Nothing:t[2]?t[2].evaluate():e.Nothing}}},Loop:{hold:"all",signature:{domain:"Functions",evaluate:(e,t)=>{var n;let r=null!==(n=t[0])&&void 0!==n?n:e.Nothing;if(r.isNothing)return r;let i=t[1];if(i&&Ki(i)){let t,n=bo(r),o=0;for(let r of $i(i)){var a;if(t=null!==(a=n([r]))&&void 0!==a?a:e.Nothing,"Break"===t.head)return t.op1;if("Return"===t.head)return t;if(o++>e.iterationLimit)return e.error("iteration-limit-exceeded")}}let o=0;for(;;){let t=r.evaluate();if("Break"===t.head)return t.op1;if("Return"===t.head)return t;if(o++>e.iterationLimit)return e.error("iteration-limit-exceeded")}}}},Which:{hold:"all",signature:{domain:"Functions",result:(e,t)=>function(e,t){var n;let r=null;for(let i=1;i<=t.length-1;i+=2)r=Ca(r,t[i].domain);return null!==(n=r)&&void 0!==n?n:e.domain("NothingDomain")}(e,t),evaluate:(e,t)=>function(e,t,n){let r=0;for(;r<t.length-1;){if("True"===t[r].evaluate().symbol)return t[r+1]?"N"===n?t[r+1].N():t[r+1].evaluate():e.symbol("Undefined");r+=2}return e.symbol("Undefined")}(e,t,"evaluate")}},FixedPoint:{hold:"all",signature:{domain:"Functions"}}}];function Ps(e){return"Declare"===e.head&&e.engine.error("unexpected-declare"),e.ops?e.engine._fn(e.head,e.ops.map(Ps)):e}var qs=[{Real:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>{let n=t[0].numericValue;if(null!==n)return e.isComplex(n)?e.number(n.re):t[0]}}},Imaginary:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>{let n=t[0].numericValue;if(null!==n)return e.isComplex(n)?e.number(n.im):e.Zero}}},Argument:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>{let n=t[0].numericValue;if(null===n)return;if(e.isComplex(n))return e.number(n.arg());let r=Lr(t[0]);return null!==r?r>=0?e.Zero:e.number(Math.PI):void 0}}},AbsArg:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Tuples"],evaluate:(e,t)=>{let n=t[0].numericValue;if(null===n)return;if(e.isComplex(n))return e.tuple([e.number(n.abs()),e.number(n.arg())]);let r=Lr(t[0]);return null!==r?e.tuple([e.number(Math.abs(r)),e.number(r>=0?0:Math.PI)]):void 0}}},Conjugate:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>{let n=t[0].numericValue;if(null!==n&&e.isComplex(n))return e.number(n.conjugate())}}},ComplexRoots:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers","Lists"],evaluate:(e,t)=>{let n=Lr(t[0]),r=Lr(t[1]);if(null===n||null===r||!Number.isInteger(r)||r<=0)return;let i=[],[a,o]=e.isComplex(n)?[n.re,n.im]:[n,0],s=Math.atan2(o,a),l=Math.sqrt(a*a+o*o);for(let u=0;u<r;u++){let e=(s+2*Math.PI*u)/r,t=Math.pow(l,1/r);i.push([t*Math.cos(e),t*Math.sin(e)])}return e.box(["List",...i.map((t=>e.number(0!==t[1]?e.complex(t[0],t[1]):t[0])))])}}}}],Rs=[{Matrix:{complexity:9e3,hold:"all",signature:{params:["Lists"],optParams:["Strings","Strings"],result:"Lists",canonical:function(e,t){var n,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Matrix";if(0===t.length)return e._fn(i,[]);let a="Vector"===t[0].head?t[0].canonical.ops[0]:t[0].canonical,o=null===(n=t[1])||void 0===n?void 0:n.canonical,s=null===(r=t[2])||void 0===r?void 0:r.canonical;return t.length>3?e._fn(i,sa(e,t,3)):s?e._fn(i,[a,o,s]):o?e._fn(i,[a,o]):e._fn(i,[a])},evaluate:(e,t)=>t[0].evaluate(),N:(e,t)=>t[0].N()}},Vector:{complexity:9e3,hold:"all",signature:{restParam:"Anything",result:"Lists",canonical:(e,t)=>e._fn("Matrix",[e.box(["List",...e.canonical(t).map((t=>e.box(["List",t])))])])}}},{Shape:{complexity:8200,signature:{domain:["FunctionOf","Values","Tuples"],evaluate:(e,t)=>{let n=t[0];return $o(n)?e.tuple(n.tensor.shape):e.tuple([])}}},Rank:{complexity:8200,signature:{domain:["FunctionOf","Values","Numbers"],evaluate:(e,t)=>{let n=t[0];return $o(n)?e.number(n.tensor.rank):e.number(0)}}},Reshape:{complexity:8200,signature:{domain:["FunctionOf","Values","Tuples","Values"],evaluate:(e,t)=>{var n,r;let i=t[0],a=null!==(n=null===(r=t[1].ops)||void 0===r?void 0:r.map((e=>e.value)))&&void 0!==n?n:[];if(!$o(i)&&Ui(i)&&(i=e.box(["List",...$i(i)])),$o(i))return i.tensor.reshape(...a).expression}}},Flatten:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{let n=t[0];return $o(n)?e.box(["List",...n.tensor.flatten().map((t=>e.box(t)))]):Ui(n)?e.box(["List",...$i(n)]):void 0}}},Transpose:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Numbers","Numbers"],"Values"],evaluate:(e,t)=>{var n,r;let i=t[0],a=1,o=2;if(3===t.length&&(a=t[1].value,o=t[2].value),a!==o&&(!$o(i)&&Ui(i)&&(i=e.box(["List",...$i(i)])),$o(i)))return 1===a&&2===o?null===(n=i.tensor.transpose())||void 0===n?void 0:n.expression:null===(r=i.tensor.transpose(a,o))||void 0===r?void 0:r.expression}}},ConjugateTranspose:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{var n;let r=t[0],i=1,a=2;if(3===t.length&&(i=t[1].value,a=t[2].value),i!==a&&$o(r))return null===(n=r.tensor.conjugateTranspose(i,a))||void 0===n?void 0:n.expression}}},Determinant:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{let n=t[0];if($o(n))return n.tensor.determinant()}}},Inverse:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{var n;let r=t[0];if($o(r))return null===(n=r.tensor.inverse())||void 0===n?void 0:n.expression}}},PseudoInverse:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{var n;let r=t[0];if($o(r))return null===(n=r.tensor.pseudoInverse())||void 0===n?void 0:n.expression}}},AdjugateMatrix:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{var n;let r=t[0];if($o(r))return null===(n=r.tensor.adjugateMatrix())||void 0===n?void 0:n.expression}}},Trace:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{let n=t[0];if($o(n))return n.tensor.trace()}}}}];var js={True:{wikidata:"Q16751793",domain:"Booleans",constant:!0},False:{wikidata:"Q5432619",domain:"Booleans",constant:!0},And:{wikidata:"Q191081",threadable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,signature:{domain:"LogicOperators",simplify:Ks,evaluate:Ks}},Or:{wikidata:"Q1651704",threadable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,signature:{domain:"LogicOperators",simplify:Vs,evaluate:Vs}},Not:{wikidata:"Q190558",threadable:!0,involution:!0,complexity:10100,signature:{domain:"LogicOperators",simplify:Us,evaluate:Us}},Equivalent:{wikidata:"Q220433",threadable:!0,complexity:10200,signature:{domain:"LogicOperators",canonical:(e,t)=>{let n=t[0].symbol,r=t[1].symbol;return"True"===n&&"True"===r||"False"===n&&"False"===r?e.True:"True"===n&&"False"===r||"False"===n&&"True"===r?e.False:e._fn("Equivalent",t)},simplify:$s,evaluate:$s}},Implies:{wikidata:"Q7881229",threadable:!0,complexity:10200,signature:{domain:"LogicOperators",simplify:Hs,evaluate:Hs}},Exists:{signature:{domain:"Functions"}}};function Ks(e,t){if(0===t.length)return e.True;let n=[];for(let r of t){if("False"===r.symbol)return e.False;if("True"!==r.symbol){let t=!1;for(let i of n)if(i.isSame(r))t=!0;else if("Not"===r.head&&r.op1.isSame(i)||"Not"===i.head&&i.op1.isSame(r))return e.False;t||n.push(r)}}return 0===n.length?e.True:1===n.length?n[0]:e._fn("And",n)}function Vs(e,t){if(0===t.length)return e.True;let n=[];for(let r of t){if("True"===r.symbol)return e.True;if("False"!==r.symbol){let t=!1;for(let i of n)if(i.isSame(r))t=!0;else if("Not"===r.head&&r.op1.isSame(i)||"Not"===i.head&&i.op1.isSame(r))return e.True;t||n.push(r)}}return 0===n.length?e.True:1===n.length?n[0]:e._fn("Or",n)}function Us(e,t){var n;let r=null===(n=t[0])||void 0===n?void 0:n.symbol;return"True"===r?e.False:"False"===r?e.True:void 0}function $s(e,t){let n=t[0].symbol,r=t[1].symbol;return"True"===n&&"True"===r||"False"===n&&"False"===r?e.True:"True"===n&&"False"===r||"False"===n&&"True"===r?e.False:void 0}function Hs(e,t){let n=t[0].symbol,r=t[1].symbol;return"True"===n&&"True"===r||"False"===n&&"False"===r||"False"===n&&"True"===r?e.True:"True"===n&&"False"===r?e.False:void 0}var Ws=[{Expand:{description:"Expand out products and positive integer powers",signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{var n;return null!==(n=ja(t[0]))&&void 0!==n?n:t[0]}}},Distribute:{description:"Distribute multiplication over addition",signature:{domain:["FunctionOf","Values","Values"],evaluate:(e,t)=>{var n,r;let i=t[0].head;if("Multiply"===i)return null!==(n=Oa(t[0].ops))&&void 0!==n?n:t[0];if("Negate"===i)return null!==(r=Oa([e.NegativeOne,...t[0].ops]))&&void 0!==r?r:t[0];if("Divide"===i&&"Multiply"===t[0].ops[0].head){let n=Oa(t[0].ops),r=t[0].ops[1];if(n)return"Add"===n.head?e.add(n.ops.map((t=>e.div(t,r)))).evaluate():e.div(n,r).evaluate()}return t[0]}}}}],Gs={Congruent:{commutative:!1,complexity:11e3,numeric:!0,signature:{simplify:(e,t)=>{if(!(t.length<3))return e._fn("Equal",[e.box(["Mod",t[0],t[2]]).simplify(),e.box(["Mod",t[1],t[2]]).simplify()]).simplify()},evaluate:(e,t)=>{if(t.length<3)return;let[n,r,i]=t,a=n.value,o=r.value,s=i.value;return"number"==typeof a&&"number"==typeof o&&"number"==typeof s?a%s===o%s?e.True:e.False:void 0}}},IsSame:{description:"Compare two expressions for structural equality",hold:"all",signature:{domain:"RelationalOperators",evaluate:(e,t)=>{if(2!==t.length)return;let[n,r]=t;return!0===n.isSame(r)?e.True:e.False}}},Equal:{commutative:!0,complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"Equal",t),evaluate:(e,t)=>{if(t.length<2)return e.True;let n;for(let r of t)if(n){if(!0!==n.isEqual(r))return e.False}else n=r;return e.True}}},NotEqual:{wikidata:"Q28113351",commutative:!0,complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"NotEqual",t),evaluate:(e,t)=>{if(t.length<2)return e.False;let n;for(let r of t)if(n){if(!0===n.isEqual(r))return e.False}else n=r;return e.True}}},Less:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"Less",t),evaluate:(e,t)=>{if(t.length<2)return e.True;let n;for(let r of t){if(!r.isNumber)return;if(n){let t=e.fn("Subtract",[r,n]).N().sgn;if(null==t)return;if(t<=0)return e.False;n=r}else n=r}return e.True}}},NotLess:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"Less",t)])}},Greater:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"Less",t.reverse()),evaluate:(e,t)=>{if(t.length<2)return e.True;let n;for(let r of t){if(!r.isNumber)return;if(n){let t=e.fn("Subtract",[r,n]).N().sgn;if(null==t)return;if(t>=0)return e.False;n=r}else n=r}return e.True}}},NotGreater:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[e._fn("Greater",t)])}},LessEqual:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"LessEqual",t),evaluate:(e,t)=>{if(t.length<2)return e.True;let n;for(let r of t){if(!r.isNumber)return;if(n){let t=e.fn("Subtract",[r,n]).N().sgn;if(null==t)return;if(t<0)return e.False;n=r}else n=r}return e.True}}},NotLessNotEqual:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"LessEqual",t)])}},GreaterEqual:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"LessEqual",t.reverse()),evaluate:(e,t)=>{if(t.length<2)return e.True;let n;for(let r of t){if(!r.isNumber)return;if(n){let t=e.fn("Subtract",[r,n]).N().sgn;if(null==t)return;if(t>0)return e.False;n=r}else n=r}return e.True}}},NotGreaterNotEqual:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"GreaterEqual",t)])}},TildeFullEqual:{description:"Indicate isomorphism, congruence and homotopic equivalence",signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"TildeFullEqual",t)}},NotTildeFullEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"TildeFullEqual",t)])}},TildeEqual:{description:"Approximately or asymptotically equal",complexity:11e3,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"TildeEqual",t)}},NotTildeEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"TildeEqual",t)])}},Approx:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"Approx",t)}},NotApprox:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"Approx",t)])}},ApproxEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"ApproxEqual",t)}},NotApproxEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"ApproxEqual",t)])}},ApproxNotEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"ApproxNotEqual",t)}},NotApproxNotEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"ApproxNotEqual",t)])}},Precedes:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"Precedes",t)}},NotPrecedes:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"Precedes",t)])}},Succeeds:{signature:{domain:"RelationalOperators",canonical:(e,t)=>Zs(e,"Succeeds",t)}},NotSucceeds:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(e,t)=>e._fn("Not",[Zs(e,"Succeeds",t)])}}};function Zs(e,t,n){n=Pi(qi(oa(n)),t);let r=[],i=[];for(let a of n)Js(a)?(r.push(a),i.push(a.ops[a.ops.length-1])):i.push(a);return i=i.map((t=>function(e,t){return null==t?e.error("missing"):!(t=t.canonical).isValid||t.isPure?t:e.error("expected-pure-expression",t)}(e,t))),0===r.length?e._fn(t,i):e._fn("And",[e._fn(t,i),...r])}function Js(e){return"string"==typeof e.head&&/Equal|NotEqual|Less|NotLess|Greater|NotGreater|LessEqual|NotLessNotEqual|GreaterEqual|NotGreater|NotEqual|TildeFullEqual|NotTildeFullEqual|TildeEqual|NotTildeEqual|Approx|NotApprox|ApproxEqual|NotApproxEqual|ApproxNotEqual|NotApproxNotEqual|Precedes|NotPrecedes|Succeeds|NotSucceeds/.test(e.head)}var Xs={EmptySet:{domain:"Sets",constant:!0,wikidata:"Q226183"},Element:{complexity:11200,hold:"all",signature:{domain:"Predicates",canonical:(e,t)=>2===(t=sa(e,t,2)).length&&t[0].isValid&&wa(t[1])?e._fn("Element",[t[0],e.domain(t[1])]):e._fn("Element",t),evaluate:(e,t)=>function(e,t){t.length;let[n,r]=t;if(r.string)return n.string&&r.string.includes(n.string)?e.True:e.False;if(r.keys){if(n.string)for(let t of r.keys)if(t===n.string)return e.True;return e.False}if("List"===r.head){if("List"===n.head){let t=!1;for(let i=0;i<r.nops-n.nops+1;++i){t=!0;for(let e=0;e<n.nops;++e)if(!r.ops[i+e].isEqual(n.ops[e])){t=!1;break}if(t)return e.True}return e.False}let t="Hold"===n.head?n.op1:n;for(let n of r.ops)if(t.isEqual(n))return e.True;return e.False}return wa(r)&&n.domain?n.domain.isCompatible(e.domain(r))?e.True:e.False:e._fn("Element",[n,r])}(e,t)}},NotElement:{complexity:11200,hold:"all",signature:{domain:"Predicates",canonical:(e,t)=>e.fn("Not",[e.fn("Element",t)])}},Subset:{complexity:11200,signature:{domain:"Predicates"}},NotSubset:{complexity:11200,signature:{domain:"Predicates",canonical:(e,t)=>e.fn("Not",[e.fn("Subset",t)])}},Superset:{complexity:11200,signature:{domain:"Predicates"}},SupersetEqual:{complexity:11200,signature:{domain:"Predicates"}},NotSuperset:{complexity:11200,signature:{domain:"Predicates",canonical:(e,t)=>e.fn("Not",[e.fn("Superset",t)])}},NotSupersetEqual:{complexity:11200,signature:{domain:"Predicates",canonical:(e,t)=>e.fn("Not",[e.fn("SupersetEqual",t)])}},SubsetEqual:{complexity:11200,signature:{domain:"Predicates"}},NotSubsetNotEqual:{complexity:11200,signature:{domain:"Predicates",canonical:(e,t)=>e.fn("Not",[e.fn("SubsetEqual",t)])}},CartesianProduct:{wikidata:"Q173740",signature:{domain:["FunctionOf","Sets",["VarArg","Sets"],"Sets"]}},Complement:{wikidata:"Q242767",signature:{domain:["FunctionOf","Sets","Sets"]}},Intersection:{wikidata:"Q185837",associative:!0,commutative:!0,involution:!0,signature:{domain:["FunctionOf","Collections",["VarArg","Collections"],"Sets"],canonical:(e,t)=>0===t.length||1===t.length?e.symbol("EmptySet"):e._fn("Intersection",t),evaluate:function(e,t){var n;let r=null!==(n=t[0].ops)&&void 0!==n?n:[];for(let i of t.slice(1))r=Ui(i)?r.filter((e=>[...$i(i)].some((t=>e.isEqual(t))))):r.filter((e=>e.isEqual(i)));return 0===r.length?e.symbol("EmptySet"):e._fn("Set",r)}}},Union:{wikidata:"Q185359",associative:!0,commutative:!0,involution:!0,signature:{domain:["FunctionOf","Collections",["VarArg","Collections"],"Sets"],canonical:(e,t)=>0===t.length?e.symbol("EmptySet"):e._fn("Union",t),evaluate:function(e,t){let n=[];for(let r of t)if(Ui(r))for(let e of $i(r))n.every((t=>!t.isEqual(e)))&&n.push(e);else n.every((e=>!e.isEqual(r)))&&n.push(r);return 0===n.length?e.symbol("EmptySet"):e._fn("Set",n)}}},SetMinus:{wikidata:"Q18192442",signature:{domain:["FunctionOf","Sets","Values","Sets"],evaluate:function(e,t){return e.symbol("EmptySet")}}},SymmetricDifference:{wikidata:"Q1147242",signature:{domain:["FunctionOf","Sets",["VarArg","Sets"],"Sets"]}}};var Ys=[{Mean:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(e,t)=>{let n=0,r=0;for(let i of $i(t[0])){let e=Lr(i);if(null===e)return;n+=e,r++}return 0===r?e.NaN:e.number(n/r)}}},Median:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(e,t)=>{let n=[];for(let i of $i(t[0])){let e=Lr(i);if(null===e)return;n.push(e)}if(0===n.length)return e.NaN;n.sort(((e,t)=>e-t));let r=Math.floor(n.length/2);return n.length%2===0?e.number((n[r-1]+n[r])/2):e.number(n[r])}}},Variance:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(e,t)=>{let n=0,r=0,i=0;for(let a of $i(t[0])){let e=Lr(a);if(null===e)return;n+=e,r+=e*e,i++}return 0===i?e.NaN:e.number((r-n*n/i)/(i-1))}}},StandardDeviation:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(e,t)=>{let n=0,r=0,i=0;for(let a of $i(t[0])){let e=Lr(a);if(null===e)return;n+=e,r+=e*e,i++}return 0===i?e.NaN:e.number(Math.sqrt((r-n*n/i)/(i-1)))}}},Kurtosis:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(e,t)=>{let n=0,r=0,i=0,a=0;for(let l of $i(t[0])){let e=Lr(l);if(null===e)return;n+=e,r+=e*e,i+=e*e*e*e,a++}if(0===a)return e.NaN;let o=(r-n*n/a)/(a-1),s=(i-r*r/a)/(a-1);return e.number(a*(a+1)*(s/(o*o)-3)/6)}}},Skewness:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(e,t)=>{let n=0,r=0,i=0,a=0;for(let l of $i(t[0])){let e=Lr(l);if(null===e)return;n+=e,r+=e*e,i+=e*e*e,a++}if(0===a)return e.NaN;let o=(r-n*n/a)/(a-1),s=(i-r*n/a)/(a-1);return e.number(s/Math.pow(o,1.5)*Math.sqrt(1*a))}}},Mode:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(e,t)=>{let n=[];for(let s of $i(t[0])){let e=Lr(s);if(null===e)return;n.push(e)}if(0===n.length)return e.NaN;n.sort(((e,t)=>e-t));let r={};for(let s of n){var i;r[s]=(null!==(i=r[s])&&void 0!==i?i:0)+1}let a=0,o=n[0];for(let s of n){let e=r[s];e>a&&(a=e,o=s)}return e.number(o)}}},Quartiles:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Lists"],evaluate:(e,t)=>{let n=[];for(let o of $i(t[0])){let e=Lr(o);if(null===e)return;n.push(e)}if(0===n.length)return e.NaN;n.sort(((e,t)=>e-t));let r=Math.floor(n.length/2),i=n.slice(0,r),a=n.slice(r+1);return e.box(["List",e.number(n[r]),e.number(i[Math.floor(i.length/2)]),e.number(a[Math.floor(a.length/2)])])}}},InterquartileRange:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(e,t)=>{let n=[];for(let o of $i(t[0])){let e=Lr(o);if(null===e)return;n.push(e)}if(0===n.length)return e.NaN;n.sort(((e,t)=>e-t));let r=Math.floor(n.length/2),i=n.slice(0,r),a=n.slice(r+1);return e.number(a[Math.floor(a.length/2)]-i[Math.floor(i.length/2)])}}},Erf:{complexity:7500,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>{let n=Lr(t[0]);if(null!==n)return e.number(Pr(n))}}},Erfc:{complexity:7500,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>{let n=Lr(t[0]);if(null!==n)return e.number(1-Pr(n))}}},ErfInv:{complexity:7500,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(e,t)=>{let n=Lr(t[0]);if(null!==n)return e.number(function(e){let t=Math.PI,n=t*t,r=n*t,i=e*e,a=e*i,o=a*i,s=o*i;return Math.sqrt(t)/2*(e+t/12*a+7*n/480*o+127*r/40320*s+4369*n*n/5806080*s*i+34807*r*n/182476800*s*i*i)}(n))}}}}],Qs=[{Pi:{domain:"TranscendentalNumbers",flags:{algebraic:!1},constant:!0,holdUntil:"N",wikidata:"Q167",value:e=>xi(e)?e._BIGNUM_PI:Math.PI}},{Degrees:{signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(e,t)=>{if(1!==(t=la(e,t,1)).length)return e._fn("Degrees",t);let n=t[0];if(null===n.numericValue||!n.isValid)return e._fn("Degrees",t);let r=Lr(n);if(null!==r){if(r%=360,r<0&&(r+=360),Number.isInteger(r)){let t=oi([r,180]);return 0===t[0]?e.number(0):1===t[0]&&1===t[1]?e.Pi:1===t[0]?e.div(e.Pi,e.number(t[1])):e.mul([e.number(t),e.Pi])}return e.mul([e.div(e.number(r),e.number(180)),e.Pi])}return e.div(e.mul([n,e.Pi]),e.number(180))},evaluate:(e,t)=>e.mul([t[0],e.div(e.Pi,e.number(180))]).evaluate()}},Hypot:{threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","NonNegativeNumbers"],simplify:(e,t)=>e.box(["Sqrt",["Add",["Square",t[0]],["Square",t[1]]]]).simplify(),evaluate:["Function",["Sqrt",["Add",["Square","_1"],["Square","_2"]]]]}},Sin:{complexity:5e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Sin",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:Di(e)?e.box(["Divide",["Subtract",["Exp",["Multiply","ImaginaryUnit",t[0]]],["Exp",["Multiply","ImaginaryUnit",["Negate",t[0]]]]],["Complex",0,2]]).simplify():void 0},evaluate:(e,t)=>ll(e,"evaluate","Sin",t[0]),N:(e,t)=>ll(e,"N","Sin",t[0])}}},{Arctan:{wikidata:"Q2257242",complexity:5200,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],simplify:(e,t)=>{var n;return null===(n=ol(e,"Arctan",t[0]))||void 0===n?void 0:n.simplify()},evaluate:(e,t)=>ll(e,"evaluate","Arctan",t[0]),N:(e,t)=>ll(e,"N","Arctan",t[0])}},Arctan2:{wikidata:"Q776598",complexity:5200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],N:(e,t)=>ia(t[0],t[1],Math.atan2,((e,t)=>lt.atan2(e,t)))}},Cos:{complexity:5050,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Cos",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Sin",["Add",t[0],["Multiply","Half","Pi"]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Cos",t[0]),N:(e,t)=>ll(e,"N","Cos",t[0])}},Tan:{complexity:5100,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Tan",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Divide",["Sin",t[0]],["Cos",t[0]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Tan",t[0]),N:(e,t)=>ll(e,"N","Tan",t[0])}}},{Arcosh:{complexity:6200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Arcosh",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Ln",["Add",t[0],["Sqrt",["Subtract",["Square",t[0]],1]]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Arcosh",t[0]),N:(e,t)=>ll(e,"N","Arcosh",t[0])}},Arcsin:{complexity:5500,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Arcsin",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Multiply",2,["Arctan2",t[0],["Add",1,["Sqrt",["Subtract",1,["Square",t[0]]]]]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Arcsin",t[0]),N:(e,t)=>ll(e,"N","Arcsin",t[0])}},Arsinh:{complexity:6100,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Arsinh",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Ln",["Add",t[0],["Sqrt",["Add",["Square",t[0]],1]]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Arsinh",t[0]),N:(e,t)=>ll(e,"N","Arsinh",t[0])}},Artanh:{complexity:6300,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Artanh",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Multiply","Half",["Ln",["Divide",["Add",1,t[0]],["Subtract",1,t[0]]]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Artanh",t[0]),N:(e,t)=>ll(e,"N","Artanh",t[0])}},Cosh:{complexity:6050,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Cosh",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Multiply","Half",["Add",["Exp",t[0]],["Exp",["Negate",t[0]]]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Cosh",t[0]),N:(e,t)=>ll(e,"N","Cosh",t[0])}},Cot:{complexity:5600,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Cot",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Divide",["Cos",t[0]],["Sin",t[0]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Cot",t[0]),N:(e,t)=>ll(e,"N","Cot",t[0])}},Csc:{description:"Cosecant",complexity:5600,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Csc",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Divide",1,["Sin",t[0]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Csc",t[0]),N:(e,t)=>ll(e,"N","Csc",t[0])}},Haversine:{wikidata:"Q2528380",threadable:!0,signature:{domain:["FunctionOf","ExtendedRealNumbers","Numbers"],evaluate:["Divide",["Subtract",1,["Cos","_1"]],2]}},InverseHaversine:{threadable:!0,signature:{domain:["FunctionOf","ExtendedRealNumbers","RealNumbers"],evaluate:["Multiply",2,["Arcsin",["Sqrt","_1"]]]}},Sec:{description:"Secant, inverse of cosine",complexity:5500,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Sec",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Divide",1,["Cos",t[0]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Sec",t[0]),N:(e,t)=>ll(e,"N","Sec",t[0])}},Sinh:{complexity:6e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Sinh",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Multiply","Half",["Subtract",["Exp",t[0]],["Exp",["Negate",t[0]]]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Sinh",t[0]),N:(e,t)=>ll(e,"N","Sinh",t[0])}}},{Csch:{complexity:6200,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Csch",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Divide",1,["Sinh",t[0]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Csch",t[0]),N:(e,t)=>ll(e,"N","Csch",t[0])}},Sech:{complexity:6200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Sech",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Divide",1,["Cosh",t[0]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Sech",t[0]),N:(e,t)=>ll(e,"N","Sech",t[0])}},Tanh:{complexity:6200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Tanh",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Divide",["Sinh",t[0]],["Cosh",t[0]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Tanh",t[0]),N:(e,t)=>ll(e,"N","Tanh",t[0])}}},{Arccos:{complexity:5550,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Arccos",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Subtract",["Divide","Pi",2],["Arcsin",t[0]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Arccos",t[0]),N:(e,t)=>ll(e,"N","Arccos",t[0])}},Arccot:{numeric:!0,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],evaluate:(e,t)=>ll(e,"evaluate","Arccot",t[0]),N:(e,t)=>ll(e,"N","Arccot",t[0])}},Arcoth:{numeric:!0,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],evaluate:(e,t)=>ll(e,"evaluate","Arcoth",t[0]),N:(e,t)=>ll(e,"N","Arcoth",t[0])}},Arcsch:{numeric:!0,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],evaluate:(e,t)=>ll(e,"evaluate","Arcsch",t[0]),N:(e,t)=>ll(e,"N","Arcsch",t[0])}},Arcsec:{numeric:!0,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],evaluate:(e,t)=>ll(e,"evaluate","Arcsec",t[0]),N:(e,t)=>ll(e,"N","Arcsec",t[0])}},Arsech:{numeric:!0,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],evaluate:(e,t)=>ll(e,"evaluate","Arsech",t[0]),N:(e,t)=>ll(e,"N","Arsech",t[0])}},Arccsc:{numeric:!0,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],evaluate:(e,t)=>ll(e,"evaluate","Arccsc",t[0]),N:(e,t)=>ll(e,"N","Arccsc",t[0])}},Coth:{complexity:6300,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(e,t)=>{var n,r;return null!==(n=null===(r=ol(e,"Coth",t[0]))||void 0===r?void 0:r.simplify())&&void 0!==n?n:e.box(["Divide",1,["Tanh",t[0]]]).simplify()},evaluate:(e,t)=>ll(e,"evaluate","Coth",t[0]),N:(e,t)=>ll(e,"N","Coth",t[0])}},InverseFunction:{signature:{domain:["FunctionOf","Functions","Functions"],canonical:(e,t)=>{var n;return null!==(n=sl(e,t=sa(e,t,1)))&&void 0!==n?n:e._fn("InverseFunction",t)},simplify:(e,t)=>sl(e,t),evaluate:(e,t)=>sl(e,t)}}}],el=["Sqrt",2],tl=["Sqrt",3],nl=["Sqrt",5],rl=["Sqrt",6],il=[[[0,1],{Sin:0,Cos:1,Tan:0,Cot:"ComplexInfinity",Sec:1,Csc:"ComplexInfinity"}],[[1,12],{Sin:["Divide",["Subtract",rl,el],4],Cos:["Divide",["Add",rl,el],4],Tan:["Subtract",2,tl],Cot:["Add",2,tl],Sec:["Subtract",rl,el],Csc:["Add",rl,el]}],[[1,10],{Sin:["Divide",["Subtract",nl,1],4],Cos:["Divide",["Sqrt",["Add",10,["Multiply",2,nl]]],4],Tan:["Divide",["Sqrt",["Subtract",25,["Multiply",10,nl]]],5],Cot:["Sqrt",["Add",5,["Multiply",2,nl]]],Sec:["Divide",["Sqrt",["Subtract",50,["Multiply",10,nl]]],5],Csc:["Add",1,nl]}],[[1,8],{Sin:"$\\frac{\\sqrt{2-\\sqrt2}}{2}$",Cos:"$\\frac{\\sqrt {2+{\\sqrt {2}}}}{2}$",Tan:"$\\sqrt{2} - 1$",Cot:"$\\sqrt{2} + 1$",Sec:"$\\sqrt{ 4 - 2\\sqrt{2}}$",Csc:"$\\sqrt{ 4 + 2\\sqrt{2}}$"}],[[1,6],{Sin:"$\\frac{1}{2}$",Cos:"$\\frac{\\sqrt{3}}{2}$",Tan:"$\\frac{\\sqrt{3}}{3}$",Cot:"$\\sqrt{3}$",Sec:"$\\frac{2\\sqrt{3}}{3}$",Csc:2}],[[1,5],{Sin:"$\\frac{\\sqrt{10- 2\\sqrt{5}}} {4}$",Cos:"$\\frac{1+ \\sqrt{5}} {4}$",Tan:"$\\sqrt{5-2\\sqrt5}$",Cot:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Sec:"$\\sqrt{5} - 1$",Csc:"$\\frac{\\sqrt{50+10\\sqrt{5}}} {5}$"}],[[1,4],{Sin:["Divide",el,2],Cos:["Divide",el,2],Tan:1,Cot:1,Sec:el,Csc:el}],[[3,10],{Sin:"$\\frac{1+ \\sqrt5} {4}$",Cos:"$\\frac{\\sqrt{10- 2\\sqrt5}} {4}$",Tan:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Cot:"$\\sqrt{5-2\\sqrt5}$",Sec:"$\\frac{\\sqrt{50+10\\sqrt5}} {5}$",Csc:"$\\sqrt5-1$"}],[[1,3],{Sin:["Divide",tl,2],Cos:"Half",Tan:tl,Cot:["Divide",tl,3],Sec:2,Csc:["Divide",["Multiply",2,tl],3]}],[[3,8],{Sin:"$\\frac{ \\sqrt{2 + \\sqrt{2}} } {2}$",Cos:"$\\frac{ \\sqrt{2 - \\sqrt{2}} } {2}$",Tan:"$\\sqrt{2} + 1$",Cot:"$\\sqrt{2} - 1$",Sec:"$\\sqrt{ 4 + 2 \\sqrt{2} }$",Csc:"$\\sqrt{ 4 - 2 \\sqrt{2} }$"}],[[2,5],{Sin:"$\\frac{\\sqrt{10+ 2\\sqrt{5}}} {4}$",Cos:"$\\frac{\\sqrt{5}-1} {4}$",Tan:"$\\sqrt{5+2\\sqrt{5}}$",Cot:"$\\frac{\\sqrt{25-10\\sqrt{5}}} {5}$",Sec:"$1 + \\sqrt{5}$",Csc:"$\\frac{\\sqrt{50-10\\sqrt{5}}} {5}$"}],[[5,12],{Sin:"$\\frac{\\sqrt{6} + \\sqrt{2}} {4}$",Cos:"$\\frac{ \\sqrt{6} - \\sqrt{2}} {4}$",Tan:"$2+\\sqrt{3}$",Cot:"$2-\\sqrt{3}$",Sec:"$\\sqrt{6}+\\sqrt{2}$",Csc:"$\\sqrt{6} - \\sqrt{2}$"}],[[1,2],{Sin:1,Cos:0,Tan:"ComplexInfinity",Cot:0,Sec:"ComplexInfinity",Csc:1}]],al={Sin:[[1,"Sin"],[1,"Cos"],[-1,"Sin"],[-1,"Cos"]],Cos:[[1,"Cos"],[-1,"Sin"],[-1,"Cos"],[1,"Sin"]],Sec:[[1,"Sec"],[-1,"Csc"],[-1,"Sec"],[1,"Csc"]],Csc:[[1,"Csc"],[1,"Sec"],[-1,"Csc"],[-1,"Sec"]],Tan:[[1,"Tan"],[-1,"Cot"],[1,"Tan"],[-1,"Cot"]],Cot:[[1,"Cot"],[-1,"Tan"],[1,"Cot"],[-1,"Tan"]]};function ol(e,t,n){var r,i;if(!n)return;let a=e.cache("constructible-trigonometric-values",(()=>il.map((t=>{let[n,r]=t;return[n,Object.fromEntries(Object.entries(r).map((t=>{var n;let[r,i]=t;return[r,null!==(n=e.parse(fi(i)))&&void 0!==n?n:e.box(i)]})))]}))),(e=>{for(let[t,n]of e)for(let e of Object.values(n))e.reset();return e})),o=Lr(n.N());if(null===o)return;let s="Cos"!==t&&"Sec"!==t?Math.sign(o):1;o=Math.abs(o%(2*Math.PI));let l,u=Math.floor(2*o/Math.PI);o%=Math.PI/2,[l,t]=null!==(r=null===(i=al[t])||void 0===i?void 0:i[u])&&void 0!==r?r:[1,t];for(let[[c,d],p]of a){let n=p[t];if(n&&0===e.chop(o-Math.PI*c/d))return"ComplexInfinity"===n.symbol?n:s*l<0?Ta(n):n}}function sl(e,t){if(1!==t.length||!t[0].isValid)return;let n=t[0],r=n.symbol;if("string"!=typeof r)return;if("InverseFunction"===r)return n.op1;let i={Sin:"Arcsin",Cos:"Arccos",Tan:"Arctan",Sec:"Arcsec",Csc:" Arccsc",Sinh:"Arsinh",Cosh:"Arcosh",Tanh:"Artanh",Sech:"Arcsech",Csch:"Arcsch",Arcosh:"Cosh",Arccos:"Cos",Arccsc:"Csc",Arcsch:"Csch",Arcsec:"Sec",Arcsin:"Sin",Arsinh:"Sinh",Arctan:"Tan",Artanh:"Tanh"}[r];return i?e.symbol(i):void 0}function ll(e,t,n,r){var i;if(!r)return;let a=null===(i=ol(e,n,r))||void 0===i?void 0:i.evaluate({numericMode:"N"===t});if(a)return a;if("evaluate"!==t||!r.isExact)switch(n){case"Arccos":return ra(r,Math.acos,(e=>e.acos()),(e=>e.acos()));case"Arccot":return ra(r,(e=>Math.atan2(1,e)),(t=>lt.atan2(e._BIGNUM_ONE,t)),(e=>e.inverse().atan()));case"Arccsc":return ra(r,(e=>Math.asin(1/e)),(t=>e._BIGNUM_ONE.div(t).asin()),(e=>e.inverse().asin()));case"Arcosh":return ra(r,Math.acosh,(e=>e.acosh()),(e=>e.acosh()));case"Arcoth":return ra(r,(e=>e),(e=>e.acosh()),(e=>e.acosh()));case"Arcsch":return ra(r,(e=>Math.log(1/e+Math.sqrt(1/(e*e)+1))),(t=>e._BIGNUM_ONE.div(t.mul(t)).add(e._BIGNUM_ONE).sqrt().add(e._BIGNUM_ONE.div(t)).log()),(e=>e.mul(e).inverse().add(1).sqrt().add(e.inverse()).log()));case"Arcsec":return ra(r,(e=>Math.acos(1/e)),(t=>e._BIGNUM_ONE.div(t).acos()),(e=>e.inverse().acos()));case"Arcsin":return ra(r,Math.asin,(e=>e.asin()),(e=>e.asin()));case"Arsech":return ra(r,(e=>Math.log((1+Math.sqrt(1-e*e))/e)),(t=>e._BIGNUM_ONE.sub(t.mul(t).add(e._BIGNUM_ONE).div(t)).log()),(t=>e.complex(1).sub(t.mul(t)).add(1).div(t).log()));case"Arsinh":return ra(r,Math.asinh,(e=>e.asinh()),(e=>e.asinh()));case"Arctan":return ra(r,Math.atan,(e=>e.atan()),(e=>e.atan()));case"Artanh":return ra(r,Math.atanh,(e=>e.atanh()),(e=>e.atanh()));case"Cos":return ra(r,Math.cos,(t=>t.toSignificantDigits(e.precision+4).cos().toSignificantDigits(e.precision)),(e=>e.cos()));case"Cosh":return ra(r,Math.cosh,(e=>e.cosh()),(e=>e.cosh()));case"Cot":return ra(r,(e=>1/Math.tan(e)),(t=>e._BIGNUM_ONE.div(t.tan())),(e=>e.tan().inverse()));case"Coth":return ra(r,(e=>1/Math.tanh(e)),(t=>e._BIGNUM_ONE.div(t.tanh())),(e=>e.tanh().inverse()));case"Csc":return ra(r,(e=>1/Math.sin(e)),(t=>e._BIGNUM_ONE.div(t.sin())),(e=>e.sin().inverse()));case"Csch":return ra(r,(e=>1/Math.sinh(e)),(t=>e._BIGNUM_ONE.div(t.sinh())),(e=>e.sinh().inverse()));case"Sec":return ra(r,(e=>1/Math.cos(e)),(t=>e._BIGNUM_ONE.div(t.cos())),(e=>e.cos().inverse()));case"Sech":return ra(r,(e=>1/Math.cosh(e)),(t=>e._BIGNUM_ONE.div(t.cosh())),(e=>e.cosh().inverse()));case"Sin":return ra(r,Math.sin,(t=>t.toSignificantDigits(e.precision+4).sin().toSignificantDigits(e.precision)),(e=>e.sin()));case"Sinh":return ra(r,Math.sinh,(e=>e.sinh()),(e=>e.sinh()));case"Tan":return ra(r,Math.tan,(t=>t.toSignificantDigits(e.precision+4).tan().toSignificantDigits(e.precision)),(e=>e.tan()));case"Tanh":return ra(r,Math.tanh,(e=>e.tanh()),(e=>e.tanh()))}}var ul=m(g(),1),cl=class{constructor(e,t,n){var r,i,a,o,s;if(!e.context)throw Error("No context available");this.name=t,this.wikidata=n.wikidata,this.description=n.description,this.url=n.url,this._engine=e,this.scope=e.context,this.name=t,this._flags=n.flags?dl(n.flags):void 0,this._domain=n.domain?e.domain(n.domain):void 0,this.inferredDomain=null!==(r=n.inferred)&&void 0!==r&&r,this.constant=null!==(i=n.constant)&&void 0!==i&&i,this.holdUntil=null!==(a=n.holdUntil)&&void 0!==a?a:"evaluate",this.constant?(this._defValue=n.value,this._value=null):(n.value?hi(n.value)?this._value=null!==(o=e.parse(n.value))&&void 0!==o?o:e.symbol("Undefined"):"function"==typeof n.value?this._value=e.box(null!==(s=n.value(e))&&void 0!==s?s:"Undefined"):n.value instanceof xa?this._value=n.value:this._value=e.box(n.value):this._value=void 0,!this._value&&this._domain&&!n.flags&&(this._flags=pl(this._domain))),this._value&&!this._domain&&(this._domain=this._value.domain,this.inferredDomain=!0)}update(e){var t,n,r;e.wikidata&&(this.wikidata=e.wikidata),e.description&&(this.description=e.description),e.url&&(this.url=e.url);let i=null===e||void 0===e?void 0:e.flags,a=null!==e&&void 0!==e&&e.domain?this._engine.domain(e.domain):void 0;a&&(i=l(l({},pl(a)),null!==(t=i)&&void 0!==t?t:{})),i&&(this._flags=dl(i)),a&&(this._domain=a,this.inferredDomain=!1),e.holdUntil&&(this.holdUntil=e.holdUntil),e.constant?(this.constant=e.constant,this._defValue=e.value,this._value=null):e.value&&(hi(e.value)?this._value=null!==(n=this._engine.parse(e.value))&&void 0!==n?n:this._engine.symbol("Undefined"):"function"==typeof e.value?this._value=this._engine.box(null!==(r=e.value(this._engine))&&void 0!==r?r:"Undefined"):e.value instanceof xa?this._value=e.value:this._value=this._engine.box(e.value)),this._value&&!this._domain&&(this._domain=this._value.domain,this.inferredDomain=!0)}reset(){this.constant&&(this._value=null)}get value(){var e;if(null===this._value){var t,n,r;let e=this._engine;if(hi(this._defValue)?this._value=null!==(t=e.parse(this._defValue))&&void 0!==t?t:e.symbol("Undefined"):"function"==typeof this._defValue?this._value=e.box(null!==(n=this._defValue(e))&&void 0!==n?n:"Undefined"):this._defValue?this._value=e.box(this._defValue):this._value=void 0,null!==(r=this._value)&&void 0!==r&&r.numericValue){let t=this._value.numericValue;!xi(e)&&t instanceof lt?this._value=e.number(t.toNumber()):!Di(e)&&t instanceof ul.Complex&&(this._value=e.NaN)}}return null!==(e=this._value)&&void 0!==e?e:void 0}set value(e){if(this.constant)throw new Error('The value of the constant "'.concat(this.name,'" cannot be changed'));if(this._defValue,"number"==typeof e)this._value=this._engine.number(e);else if(e){var t;let n=this._engine.box(e);this.inferredDomain?(this._value=n,this._domain=Ca(this._domain,n.domain)):!this._domain||!n.domain||null!==(t=n.domain)&&void 0!==t&&t.isCompatible(this._domain)?this._value=n:this._value=void 0}else this._value=void 0;void 0!==this._value?this._flags=void 0:this._flags=pl(this._domain)}get domain(){var e;return null!==(e=this._domain)&&void 0!==e?e:void 0}set domain(e){var t;if(this.constant)throw new Error('The domain of the constant "'.concat(this.name,'" cannot be changed'));if(!this.inferredDomain)throw Error('The domain of "'.concat(this.name,'" cannot be changed because it has already been declared'));if(!e)return this._defValue=void 0,this._value=void 0,this._flags=void 0,void(this._domain=void 0);if(e=this._engine.domain(e),this._domain&&!e.isCompatible(this._domain))throw Error('The domain of "'.concat(this.name,'" cannot be widened from "').concat(this._domain.base,'" to "').concat(e.base,'"'));if(null!==(t=this._value)&&void 0!==t&&t.domain&&!this._value.domain.isCompatible(e))throw Error('The domain of "'.concat(this.name,'" cannot be changed to "').concat(e.base,'" because its value has a domain of "').concat(this._value.domain.base,'"'));this._domain=e,this._flags=void 0,void 0===this._value&&e.isNumeric&&(this._flags=pl(e))}get number(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isNumber)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.number}set number(e){this.updateFlags({number:e})}get integer(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isInteger)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.integer}set integer(e){this.updateFlags({integer:e})}get rational(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isRational)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.rational}set rational(e){this.updateFlags({rational:e})}get algebraic(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isAlgebraic)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.algebraic}set algebraic(e){this.updateFlags({algebraic:e})}get real(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isReal)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.real}set real(e){this.updateFlags({real:e})}get extendedReal(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isExtendedReal)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.extendedReal}set extendedReal(e){this.updateFlags({extendedReal:e})}get complex(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isComplex)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.complex}set complex(e){this.updateFlags({complex:e})}get extendedComplex(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isExtendedComplex)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.extendedComplex}set extendedComplex(e){this.updateFlags({extendedComplex:e})}get imaginary(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isImaginary)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.imaginary}set imaginary(e){this.updateFlags({imaginary:e})}get positive(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isPositive)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.positive}set positive(e){this.updateFlags({positive:e})}get nonPositive(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isNonPositive)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.nonPositive}set nonPositive(e){this.updateFlags({nonPositive:e})}get negative(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isNegative)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.negative}set negative(e){this.updateFlags({negative:e})}get nonNegative(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isNonNegative)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.nonNegative}set nonNegative(e){this.updateFlags({nonNegative:e})}get zero(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isZero)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.zero}set zero(e){this.updateFlags({zero:e})}get notZero(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isNotZero)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.notZero}set notZero(e){this.updateFlags({notZero:e})}get one(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isOne)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.one}set one(e){this.updateFlags({one:e})}get negativeOne(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isNegativeOne)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.negativeOne}set negativeOne(e){this.updateFlags({negativeOne:e})}get infinity(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isInfinity)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.infinity}set infinity(e){this.updateFlags({infinity:e})}get finite(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isFinite)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.finite}set finite(e){this.updateFlags({finite:e})}get NaN(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isNaN)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.NaN}set NaN(e){this.updateFlags({NaN:e})}get even(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isEven)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.even}set even(e){this.updateFlags({even:e})}get odd(){var e,t,n;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.isOdd)&&void 0!==e?e:null===(n=this._flags)||void 0===n?void 0:n.odd}set odd(e){this.updateFlags({odd:e})}get prime(){var e,t;let n=this._value;return n?!(!n.isInteger||n.isNonPositive)&&ko(null!==(e=Lr(n))&&void 0!==e?e:NaN):null===(t=this._flags)||void 0===t?void 0:t.prime}set prime(e){this.updateFlags({prime:e})}get composite(){var e,t;let n=this._value;return n?!(!n.isInteger||n.isNonPositive)&&!ko(null!==(e=Lr(n))&&void 0!==e?e:NaN):null===(t=this._flags)||void 0===t?void 0:t.composite}set composite(e){this.updateFlags({composite:e})}updateFlags(e){var t;if(this.constant)throw Error("The flags of constant cannot be changed");if(!1===(null===(t=this.domain)||void 0===t?void 0:t.isNumeric))throw Error("Flags only apply to numeric domains");let n=0,r=!0;for(let i in Object.keys(e))if(n+=1,this._value&&void 0!==e[i])switch(i){case"number":r=this._value.isNumber===e.number;break;case"integer":r=this._value.isInteger===e.integer;break;case"rational":r=this._value.isRational===e.rational;break;case"algebraic":r=this._value.isAlgebraic===e.algebraic;break;case"real":r=this._value.isReal===e.real;break;case"extendedReal":r=this._value.isExtendedReal===e.extendedReal;break;case"complex":r=this._value.isComplex===e.complex;break;case"extendedComplex":r=this._value.isExtendedComplex===e.extendedComplex;break;case"imaginary":r=this._value.isImaginary===e.imaginary;break;case"positive":r=this._value.isPositive===e.positive;break;case"nonPositive":r=this._value.isNonPositive===e.nonPositive;break;case"negative":r=this._value.isNegative===e.negative;break;case"nonNegative":r=this._value.isNonNegative===e.nonNegative;break;case"zero":r=this._value.isZero===e.zero;break;case"notZero":r=this._value.isNotZero===e.notZero;break;case"one":r=this._value.isOne===e.one;break;case"negativeOne":r=this._value.isNegativeOne===e.negativeOne;break;case"infinity":r=this._value.isInfinity===e.infinity;break;case"NaN":r=this._value.isNaN===e.NaN;break;case"finite":r=this._value.isFinite===e.finite;break;case"even":r=this._value.isEven===e.even;break;case"odd":r=this._value.isOdd===e.odd;break;case"prime":r=this._value.isPrime===e.prime;break;case"composite":r=this._value.isComposite===e.composite}n>0&&(r||(this._defValue=void 0,this._value=void 0),this._domain=this._engine.Numbers,this._flags?this._flags=l(l({},this._flags),dl(e)):this._flags=dl(e))}};function dl(e){let t=l({},e);return(e.zero||e.one||e.negativeOne)&&(t.zero=e.zero&&!e.one&&!e.negativeOne,t.notZero=!e.zero||e.one||e.negativeOne,t.one=e.one&&!e.zero&&!e.negativeOne,t.negativeOne=e.negativeOne&&!e.zero&&!e.one,t.infinity=!1,t.NaN=!1,t.finite=!0,t.integer=!0,t.finite=!0,t.infinity=!1,t.NaN=!1,t.even=e.one,t.odd=!e.one,t.prime=!1,t.composite=!1),t.zero&&(t.positive=!1,t.negative=!1,t.nonPositive=!0,t.nonNegative=!0),!0===t.notZero&&(t.imaginary||(t.real=!0),t.zero=!1),t.one&&(t.positive=!0),t.negativeOne&&(t.nonPositive=!0),(t.positive||t.nonNegative)&&(t.negativeOne=!1),t.positive?(t.nonPositive=!1,t.negative=!1,t.nonNegative=!0):t.nonPositive?(t.positive=!1,t.negative=t.notZero,t.nonNegative=!t.zero):t.negative?(t.positive=!1,t.nonPositive=t.notZero,t.nonNegative=!1):t.nonNegative&&(t.positive=t.notZero,t.nonPositive=!t.zero,t.negative=!1),(t.positive||t.negative||t.nonPositive||t.nonNegative)&&(t.number=!0,t.finite?t.real=!0:t.finite||(t.complex=!0),t.imaginary=!1),t.finite&&(t.number=!0,t.complex=!0,t.infinity=!1,t.NaN=!1),t.infinity&&(t.finite=!1,t.NaN=!1),!1===t.infinity&&(t.extendedComplex=!1,t.extendedReal=!1),e.even&&(t.odd=!1),e.odd&&(t.even=!1),t.integer&&(t.rational=!0),t.rational&&(t.algebraic=!0),t.algebraic&&(t.real=!0),t.real&&(t.complex=!0),t.imaginary&&(t.complex=!0),t.complex&&(t.number=!0),t.real&&!1!==t.infinity&&(t.extendedReal=!0),t.complex&&!1!==t.infinity&&(t.extendedComplex=!0),(t.even||t.infinity||t.NaN||t.negative||t.imaginary||!1===t.integer)&&(t.prime=!1),t.number&&t.prime&&(t.composite=!1),t}function pl(e){if(!e)return{};let t={};if(!e.isNumeric)return t.number=!1,t.integer=!1,t.rational=!1,t.algebraic=!1,t.real=!1,t.extendedReal=!1,t.complex=!1,t.extendedComplex=!1,t.imaginary=!1,t.positive=!1,t.nonPositive=!1,t.negative=!1,t.nonNegative=!1,t.zero=!1,t.notZero=!1,t.one=!1,t.negativeOne=!1,t.infinity=!1,t.NaN=!1,t.odd=!1,t.even=!1,t.prime=!1,t.composite=!1,t;let n=e.base;return t.number=!0,"Integers"===n&&(t.integer=!0),"RationalNumbers"===n&&(t.rational=!0),"AlgebraicNumbers"===n&&(t.algebraic=!0),"TranscendentalNumbers"===n&&(t.algebraic=!1,t.real=!0),"ExtendedRealNumbers"===n&&(t.extendedReal=!0),"RealNumbers"===n&&(t.real=!0),"ImaginaryNumbers"===n&&(t.imaginary=!0),"ExtendedComplexNumbers"===n&&(t.extendedComplex=!0),"ComplexNumbers"===n&&(t.complex=!0),"PositiveNumbers"===n&&(t.notZero=!0,t.real=!0,t.positive=!0),"NegativeNumbers"===n&&(t.notZero=!0,t.real=!0,t.negative=!0),"NonNegativeNumbers"===n&&(t.real=!0,t.positive=!0),"NonPositiveNumbers"===n&&(t.real=!0,t.negative=!0),"PositiveIntegers"===n&&(t.notZero=!0,t.integer=!0,t.positive=!0),"NegativeNumbers"===n&&(t.notZero=!0,t.integer=!0,t.negative=!0),"NonNegativeNumbers"===n&&(t.integer=!0,t.positive=!0),"NonPositiveNumbers"===n&&(t.integer=!0,t.negative=!0),function(e){return Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return void 0!==n})))}(dl(t))}var hl=class{constructor(e,t,n){var r,i,a,o,s,l,u,c,d,p;if(!e.context)throw Error("No context available");this.engine=e,this.scope=e.context;let h=null!==(r=n.idempotent)&&void 0!==r&&r,f=null!==(i=n.involution)&&void 0!==i&&i;if(h&&f)throw new Error('Function Definition "'.concat(t,"\": the 'idempotent' and 'involution' flags are mutually exclusive"));if(this.name=t,this.description=n.description,this.wikidata=n.wikidata,this.threadable=null!==(a=n.threadable)&&void 0!==a&&a,this.associative=null!==(o=n.associative)&&void 0!==o&&o,this.commutative=null!==(s=n.commutative)&&void 0!==s&&s,this.idempotent=h,this.involution=f,this.inert=null!==(l=n.inert)&&void 0!==l&&l,this.numeric=null!==(u=n.numeric)&&void 0!==u&&u,this.pure=null===(c=n.pure)||void 0===c||c,this.complexity=null!==(d=n.complexity)&&void 0!==d?d:Bi,this.hold=null!==(p=n.hold)&&void 0!==p?p:"none",n.at&&(this.at=n.at),n.iterator&&(this.iterator=n.iterator),n.size&&(this.size=n.size),n.keys&&(this.keys=n.keys),n.indexOf&&(this.indexOf=n.indexOf),n.at&&!n.size&&(this.size=e=>{let t=n.at,r=0;for(;void 0!==t(e,r);)r++;return r}),n.at&&!n.iterator&&(this.iterator=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=n.at,a=t;return{next(){if(r>=0&&a>=t+r)return{done:!0,value:void 0};let n=i(e,a);return void 0===n?{done:!0,value:void 0}:(a++,{done:!1,value:n})}}}),this.iterator&&!n.indexOf&&(this.indexOf=(e,t)=>{let n=1,r=this.iterator(e),i=r.next();for(;!i.done;){if(t.isEqual(i.value))return n;n++,i=r.next()}}),this.inert){if(n.hold)throw Error('Function Definition "'.concat(t,'": an inert function should not have a hold'));if(this.hold="rest",n.signature){let e=n.signature;if("simplify"in e||"evaluate"in e||"N"in e||"evalDimension"in e||"sgn"in e||"compile"in e)throw Error('Function Definition "'.concat(t,"\": an inert function should only have 'canonical' or 'codomain' handlers"))}if(this.threadable)throw Error('Function Definition "'.concat(t,'": an inert function should not be threadable'));if(this.associative)throw Error('Function Definition "'.concat(t,'": an inert function should not be associative'));if(this.commutative)throw Error('Function Definition "'.concat(t,'": an inert function should not be commutative'));if(this.idempotent)throw Error('Function Definition "'.concat(t,'": an inert function should not be idempotent'));if(this.involution)throw Error('Function Definition "'.concat(t,'": an inert function should not be involution'));if(!this.pure)throw Error('Function Definition "'.concat(t,'": an inert function should be pure'))}if(n.signature){var m,g,v,y;let r,i,a,o,s,l=n.signature,u=!1;if(l.domain){let n=e.domain(l.domain);if(!n.isValid)throw Error('Function Definition "'.concat(t,'": invalid domain ').concat(JSON.stringify(l.domain)));[r,i,a,o]=ui(e.domain(n))}else l.params||l.result?(r=null!==(m=null===(g=l.params)||void 0===g?void 0:g.map((t=>e.domain(t))))&&void 0!==m?m:[],i=null!==(v=null===(y=l.optParams)||void 0===y?void 0:y.map((t=>e.domain(t))))&&void 0!==v?v:[],a=l.restParam?e.domain(l.restParam):void 0,o="function"==typeof l.result?l.result:l.result?e.domain(l.result):n.numeric?e.Numbers:e.Anything):n.numeric?(u=!0,r=[],i=[],a=e.Numbers,o=e.Numbers):(u=!0,r=[],i=[],a=e.Anything,o=e.Anything);if(l.evaluate&&"function"!=typeof l.evaluate){let t=e.box(l.evaluate,{canonical:!1});if(!t.isValid)throw Error("Invalid function ".concat(t.toString()));let n=bo(t);s=(e,t)=>n(t),s.toString=()=>t.toString()}else s=l.evaluate;this.signature={inferredSignature:u,params:r,optParams:i,restParam:a||void 0,result:o,canonical:l.canonical,simplify:l.simplify,evaluate:s,N:l.N,evalDimension:l.evalDimension,sgn:l.sgn,compile:l.compile}}else n.numeric?this.signature={inferredSignature:!0,params:[],optParams:[],restParam:e.Numbers,result:e.Numbers}:this.signature={inferredSignature:!0,params:[],optParams:[],restParam:e.Anything,result:e.Anything}}reset(){}};function fl(e,t,n){return n instanceof hl?n:new hl(e,t,n)}function ml(e){if("all"===e)return ml(["core","control-structures","logic","collections","relop","numeric","arithmetic","trigonometry","algebra","calculus","polynomials","combinatorics","linear-algebra","statistics","dimensions","units","physics","other"]);"string"==typeof e&&(e=[e]);let t=[];for(let n of e){let e=gl[n];if(!e)throw Error("Unknown library category ".concat(n));Array.isArray(e)?t.push(...e):t.push(e)}return Object.freeze(t)}var gl={algebra:[],arithmetic:[...Ss,...qs],calculus:Fs,collections:[Xs,Ts,function(){let e={};for(let t of Object.keys(Xi))e[t]={domain:"Domains",value:["Domain",t]};e.InvalidDomain={signature:{domain:["FunctionOf","Domains","Domains"],canonical:(e,t)=>e.domain(["InvalidDomain",t[0]])}};for(let t of["DictionaryOf","FunctionOf","ListOf","TupleOf"])e[t]={signature:{domain:["FunctionOf",["VarArg","Domains"],"Domains"],canonical:(e,n)=>e.domain([t,...n])}};for(let t of["OptArg","VarArg"])e[t]={signature:{domain:["FunctionOf","Domains","Domains"],canonical:(e,n)=>e.domain([t,n[0]])}};return e}()],combinatorics:[],"control-structures":Is,core:ls,dimensions:[],domains:[],"linear-algebra":Rs,logic:js,numeric:[],other:[],relop:Gs,polynomials:Ws,physics:{Mu0:{description:"Vaccum permeability",constant:!0,wikidata:"Q1515261",domain:"RealNumbers",value:125663706212e-17}},statistics:Ys,trigonometry:Qs,units:[]};function vl(e){if(kt(e=e.normalize()))return e;throw new Error('Invalid definition name "'.concat(e,'": ').concat(Bt(e)))}function yl(e,t){var n,r;if(!e.context)throw Error("No context available");null!==(n=(r=e.context).ids)&&void 0!==n||(r.ids=new Map);let i=e.context.ids;e.strict;for(let[a,o]of Object.entries(t))if(a=vl(a),xl(o)){let t=fl(e,a,o);if(i.has(a))throw new Error("Duplicate function definition ".concat(a,":\n").concat(JSON.stringify(i.get(a)),"\n").concat(JSON.stringify(o)));i.set(a,t)}else if(bl(o)){let t=new cl(e,a,o);if(e.strict&&o.wikidata)for(let[e,n]of i)if(n.wikidata===o.wikidata)throw new Error('Duplicate entries with wikidata "'.concat(o.wikidata,'": "').concat(a,'" and "').concat(n.name,'"'));if(i.has(a))throw new Error('Duplicate symbol definition "'.concat(a,'"'));i.set(a,t)}else{let t=new cl(e,a,{value:e.box(o)});i.set(a,t)}}function bl(e){return!(null==e||"object"!=typeof e||e instanceof xa)&&("domain"in e||"value"in e||"constant"in e)}function xl(e){return!(null==e||"object"!=typeof e||e instanceof xa)&&("signature"in e||"complexity"in e)}var Dl=m(g(),1);function wl(e){return Number.isInteger(e)&&0!==e?Math.floor(Math.log2(Math.abs(e))/Math.log2(10))+(e>0?1:2):2}var _l=function e(t){var n,r;if(t.symbol)return 1;let i=t.numericValue;if(null!==i){if(t.isZero)return 1;if(t.isInteger)return wl(Lr(t));if(Ur(i))return $r(i)?wl(i[0])+wl(i[1])+1:wl(Number(i[0]))+wl(Number(i[1]))+1;if(i instanceof Dl.Complex)return wl(i.re)+wl(i.im)+1;if(t.isNumber)return 2}let a=t.head,o=2;return o="string"==typeof a?["Add","Divide"].includes(a)?3:["Subtract","Negate"].includes(a)?4:["Square","Sqrt","Multiply","Root"].includes(a)?5:["Power"].includes(a)?6:["Ln","Exp","Log"].includes(a)?7:["Arcsin","Arccos","Arctan","Arcsec"," Arccsc","Arsinh","Arcosh","Artanh","Arcsech","Arcsch","Cosh","Cos","Csc","Csch","Sec","Sin","Sinh","Tan","Tanh"].includes(a)?9:10:e(a),o+(null!==(n=null===(r=t.ops)||void 0===r?void 0:r.reduce(((t,n)=>t+e(n)),0))&&void 0!==n?n:0)},Sl=class e{constructor(t){this._items=t?t instanceof e?new Map(t._items):new Map(t):new Map}has(e){for(let t of this._items.keys())if(t.isSame(e))return!0;return!1}get(e){for(let[t,n]of this._items)if(t.isSame(e))return n}clear(){this._items.clear()}set(e,t){for(let n of this._items.keys())if(n.isSame(e))return void this._items.set(n,t);this._items.set(e,t)}delete(e){this._items.delete(e)}[Symbol.iterator](){return this._items.entries()}entries(){return this._items.entries()}};var Cl=class e extends xa{constructor(e,t,n){super(e,n),this._pattern=hi(t)?e.parse(t,{canonical:!1}):e.box(t,{canonical:!1})}get hash(){return wi("Pattern")^this._pattern.hash}reset(){this._pattern.reset()}get json(){return lo(this.engine,"Pattern",[this._pattern])}get head(){return"Pattern"}get domain(){return this.engine.domain("Values")}get isCanonical(){return!0}set isCanonical(e){}isSame(t){return this===t||t instanceof e&&this._pattern.isSame(t._pattern)}isEqual(t){return t instanceof e&&this._pattern.isEqual(t._pattern)}match(e,t){var n,r,i,a;return Ml(e,this._pattern,{recursive:null!==(n=null===t||void 0===t?void 0:t.recursive)&&void 0!==n&&n,numericTolerance:null!==(r=null===t||void 0===t?void 0:t.numericTolerance)&&void 0!==r?r:0,substitution:null!==(i=null===t||void 0===t?void 0:t.substitution)&&void 0!==i?i:{},exact:null!==(a=null===t||void 0===t?void 0:t.exact)&&void 0!==a&&a})}test(e,t){return null!==this.match(e,t)}count(e,t){let n=0;for(let r of e)null!==this.match(r,t)&&(n+=1);return n}subs(e,t){return this._pattern.subs(e,t)}};function El(e){var t;if("string"==typeof e)return e.startsWith("_");if(null!==(t=e.symbol)&&void 0!==t&&t.startsWith("_"))return!0;if(e.ops)return El(e.head)||e.ops.some(El);if(e.keys)for(let n of e.keys)if(El(e.getKey(n)))return!0;return!1}function kl(e,t,n){return e.startsWith("_"),"_"===e||"__"===e||"___"===e?n:e in n?t.isSame(n[e])?n:null:El(t)?null:l(l({},n),{},{[e]:t})}function Al(e,t,n,r){var i;let a=null!==(i=r.exact)&&void 0!==i&&i,o=e.engine;if("Pattern"===t.head)return t.match(e,l(l({},r),n));if(t instanceof Ao)return e instanceof Ao?0===r.numericTolerance?t.isSame(e)?n:null:t.isEqualWithTolerance(e,r.numericTolerance)?n:null:null;let s=t.string;if(null!==s)return e.string===s?n:null;let u=t.symbol;if(null!==u)return u.startsWith("_")?kl(u,e,n):u===e.symbol?n:null;let c=t.keys;if(null!==c){let t=e.keys;if(null===t)return null;for(let e of c){let i=Al(t[e],c[e],n,r);if(null===i)return null;n=i}return n}if(t.ops){var d;let i,s=t.head;if("string"==typeof s&&s.startsWith("_"))return kl(s,o.box(e.head),n);if("string"==typeof s&&"string"==typeof e.head){if(s!==e.head){if(a)return null;if("Add"===s){let i=Al(o.box(["Add",0,e],{canonical:!1}),t,n,r);if(null!==i||("Subtract"===e.head&&(i=Al(o.box(["Add",e.op1,["Negate",e.op2]],{canonical:!1}),t,n,r)),null!==i))return i}if("Subtract"===s){let i=Al(o.box(["Subtract",e,0],{canonical:!1}),t,n,r);if(null!==i||("Negate"===e.head&&(i=Al(o.box(["Subtract",0,e.op1],{canonical:!1}),t,n,r)),null!==i))return i}if("Multiply"===s){let i=Al(o.box(["Multiply",1,e],{canonical:!1}),t,n,r);if(null!==i||"Negate"===e.head&&(i=Al(o.box(["Multiply",-1,e.op1],{canonical:!1}),t,n,r),null!==i)||"Divide"===e.head&&(i=Al(o.box(["Multiply",e.op1,["Divide",1,e.op2]],{canonical:!1}),t,n,r),null!==i))return i}if("Divide"===s){let i=Al(o.box(["Divide",e,1],{canonical:!1}),t,n,r);if(null!==i)return i}return null}i=o.lookupFunction(s)}else{let t=Al(o.box(e.head,{canonical:!1}),o.box(s,{canonical:!1}),n,r);if(null===t)return null;n=t}return null!==(d=i)&&void 0!==d&&d.commutative?function(e,t,n,r){let i=function(e){let t=[],n=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===e.length)t.push(r);else for(let t=0;t<e.length;t++){let i=e.slice(),a=i.splice(t,1);n(i.slice(),r.concat(a))}};return n(e),t}(t.ops);for(let a of i){let t=Nl(e,a,n,r);if(null!==t)return t}return null}(e,t,n,r):Nl(e,t.ops,n,r)}return null}function Nl(e,t,n,r){if(0===t.length)return null;let i=t[0].engine,a=l({},n),o=[...e.ops],s=0;for(;s<t.length;){let n=t[s],l=n.symbol;if(null!==l){if(l.startsWith("__")){let n,u=0;if(void 0===t[s+1])u=o.length+1;else{let e=!1;for(;!e&&u<o.length;)e=null!==Al(o[u],t[s+1],a,r),u+=1;if(!e&&l.startsWith("___"))return null}if(!l.startsWith("___")&&u<=1)return null;n=u<=1?"Add"===e.head?i.number(0):"Multiply"===e.head?i.number(1):i.box(["Sequence"]):i.fn(e.head,o.splice(0,u-1)),a=kl(l,n,a)}else if(l.startsWith("_"))a=kl(l,o.shift(),a);else if(a=Al(o.shift(),n,a,r),null===a)return null}else{let e=o.shift();if(!e||(a=Al(e,n,a,r),null===a))return null}if(null===a)return null;s+=1}return o.length>0?null:a}function Ml(e,t,n){var r,i;let a=Al(e,t,null!==(r=n.substitution)&&void 0!==r?r:{},{numericTolerance:null!==(i=null===n||void 0===n?void 0:n.numericTolerance)&&void 0!==i?i:wr});if(a)return a;if(!n.recursive)return null;if(e.ops){let r=e.ops,i={};for(let e=0;e<r.length;e++){let i=Ml(r[e],t,n);if(null!==i)return i}return i}return null}var Fl=class e extends xa{constructor(e,t,n){var r,i;super(e,null===n||void 0===n?void 0:n.metadata),kt(t),"".concat(t).concat(Bt(t)),this._id=t,this._def=null!==(r=null===n||void 0===n?void 0:n.def)&&void 0!==r?r:void 0,null===(i=null===n||void 0===n?void 0:n.canonical)||void 0===i||i?this._def?this._scope=e.context:this.bind():this._scope=null}get hash(){return void 0===this._hash&&(this._hash=wi(this._id)),this._hash}get isPure(){return!0}get json(){let e=this._scope?this.wikidata:void 0;return uo(this.engine,this._id,{latex:this._latex,wikidata:e})}get scope(){return this._scope}get isConstant(){var e;let t=null!==(e=this._def)&&void 0!==e?e:this.engine.lookupSymbol(this._id,this.wikidata);return!(t instanceof cl)||t.constant}bind(){var e;this._scope=this.engine.context;let t=null!==(e=this.engine.lookupSymbol(this._id))&&void 0!==e?e:this.engine.lookupFunction(this._id);t?this._def=t:(this._def=this.engine.defineSymbol(this._id,{domain:void 0,inferred:!0}),this._id=this._def.name)}reset(){var e;null!==(e=this._def)&&void 0!==e&&e.reset(),this._def=void 0}get isCanonical(){return null!==this._scope}set isCanonical(e){this._scope=e?this.engine.context:null,this._def=void 0}get canonical(){return this._scope?this:this.engine.box(this._id)}solve(e){return 1!==e.length?null:e.includes(this.symbol)?[this.engine.Zero]:null}get complexity(){return 7}get head(){return"Symbol"}get symbol(){return this._id}get isNothing(){return"Nothing"===this._id}get baseDefinition(){var e;return void 0===this._def&&this.bind(),null!==(e=this._def)&&void 0!==e?e:void 0}get symbolDefinition(){return void 0===this._def&&this.bind(),this._def instanceof cl?this._def:void 0}get functionDefinition(){return void 0===this._def&&this.bind(),this._def instanceof hl?this._def:void 0}infer(e){var t;let n=null!==(t=this.engine.lookupSymbol(this._id))&&void 0!==t?t:this.engine.lookupFunction(this._id);if(!n){var r;let t=this.engine.swapScope(null!==(r=this._scope)&&void 0!==r?r:this.engine.context);return this._def=this.engine.defineSymbol(this._id,{domain:e,inferred:!0}),this.engine.swapScope(t),!0}return!!(n instanceof cl&&n.inferredDomain)&&(n.domain=Ea(n.domain,e),!0)}get value(){var e;let t=this._def;if(t&&t instanceof cl)return null===(e=t.value)||void 0===e?void 0:e.value}set value(e){var t;let n,r=this.engine;if(r.forget(this._id),"boolean"==typeof e&&(e=e?r.True:r.False),"string"==typeof e&&(e=r.string(e)),"object"==typeof e)if("re"in e&&"im"in e)e=r.complex(e.re,e.im);else if("num"in e&&"denom"in e)e=r.number([e.num,e.denom]);else{if(!Array.isArray(e))throw new Error("Invalid value for symbol ".concat(this._id,": ").concat(e));e=r._fn("List",e.map((e=>r.box(e))))}if(void 0!==e&&(n=r.box(e).evaluate()),null!==(t=n)&&void 0!==t&&null!==(t=t.domain)&&void 0!==t&&t.isFunction)return this.engine.lookupSymbol(this._id),void(this._def=r.defineFunction(this._id,{signature:l(l({},ci(n.domain)),{},{evaluate:n})}));let i=this.engine.lookupSymbol(this._id);if(i&&i instanceof cl)i.value=n;else{var a,o;let e=null===(a=n)||void 0===a?void 0:a.domain;null!==(o=e)&&void 0!==o&&o.isNumeric&&(e=r.Numbers),this._def=r.defineSymbol(this._id,{value:n,domain:e})}}get domain(){let e=this._def;if(e){var t;if(e instanceof hl)return di(this.engine,e.signature);if(e instanceof cl)return null!==(t=e.domain)&&void 0!==t?t:void 0}}set domain(e){if(!this._def)return;if("_"===this._id[0])throw new Error('The domain of the wildcard "'.concat(this._id,'" cannot be changed'));let t=this.engine.domain(e);t.isFunction?(this.engine.forget(this._id),this._def=this.engine.defineFunction(this._id,{signature:ci(t)})):this._def instanceof cl?this._def.domain=t:(this.engine.forget(this._id),this._def=this.engine.defineSymbol(this._id,{domain:t}))}get sgn(){let e=this._def;if(!e||!(e instanceof cl))return null;let t=e.value;if(t&&t!==this){let e=t.sgn;if(void 0!==e)return e}return!0===e.zero?0:!0===e.positive?1:!0===e.negative?-1:void 0}has(e){return"string"==typeof e?this._id===e:e.includes(this._id)}isSame(t){return this===t||t instanceof e&&this._id===t._id}match(t,n){return t instanceof e&&this._id===t._id?{}:null}isEqual(e){var t;if(!this.isCanonical)return this.canonical.isEqual(e);if(this===(e=e.canonical))return!0;if(null!==e.symbol)return e.symbol===this._id;let n=null===(t=this.symbolDefinition)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.N();if(n)return n.isEqual(e.N());if(e.isZero){if(this.isZero)return!0;if(this.isNotZero)return!1}return(!this.isZero||!e.isNotZero)&&(this.engine.ask(["Equal",this,e]).length>0||(this.engine.ask(["NotEqual",this,e]).length,!1))}isLess(e){var t;if(null!==e.symbol&&e.symbol===this._id)return!1;let n=null===(t=this.symbolDefinition)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.N();if(n)return n.isLess(e.N());if(e.isZero){let e=this.sgn;if(null===e)return!1;if(void 0!==e)return e<0}}isLessEqual(e){var t;if(null!==e.symbol&&e.symbol===this._id)return!0;let n=null===(t=this.symbolDefinition)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.N();if(n)return n.isLessEqual(e.N());if(e.isZero){let e=this.sgn;if(null===e)return!1;if(void 0!==e)return e<=0}return this.isLess(e)||this.isEqual(e)}isGreater(e){var t;if(null!==e.symbol&&e.symbol===this._id)return!1;let n=null===(t=this.symbolDefinition)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.N();if(n)return n.isGreater(e.N());if(e.isZero){let e=this.sgn;if(null===e)return!1;if(void 0!==e)return e>0}}isGreaterEqual(e){var t;if(null!==e.symbol&&e.symbol===this._id)return!0;let n=null===(t=this.symbolDefinition)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.N();if(n)return n.isGreaterEqual(e.N());if(e.isZero){let e=this.sgn;if(null===e)return!1;if(void 0!==e)return e>=0}return this.isGreater(e)||this.isEqual(e)}get isFunction(){return!!this.functionDefinition}get isZero(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.zero}get isNotZero(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.notZero}get isOne(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.one}get isNegativeOne(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.negativeOne}get isOdd(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.odd}get isEven(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.even}get isPrime(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.prime}get isComposite(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.composite}get isInfinity(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.infinity}get isNaN(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.NaN}get isPositive(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.positive}get isNonPositive(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.nonPositive}get isNegative(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.negative}get isNonNegative(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.nonNegative}get isNumber(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.number}get isInteger(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.integer}get isRational(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.rational}get isAlgebraic(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.rational}get isReal(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.real}get isExtendedReal(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.extendedReal}get isComplex(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.complex}get isImaginary(){var e;return null===(e=this.symbolDefinition)||void 0===e?void 0:e.imaginary}simplify(e){var t;let n=this.symbolDefinition;return"simplify"===(null===n||void 0===n?void 0:n.holdUntil)&&n.value?n.value.simplify(e):null!==e&&void 0!==e&&e.rules&&null!==(t=this.replace(e.rules))&&void 0!==t?t:this}evaluate(e){let t=this.symbolDefinition;if(t){var n,r,i,a;if(null!==e&&void 0!==e&&e.numericMode)return"never"===t.holdUntil?this:null!==(n=null===(r=t.value)||void 0===r?void 0:r.N(e))&&void 0!==n?n:this;if("simplify"===t.holdUntil||"evaluate"===t.holdUntil)return null!==(i=null===(a=t.value)||void 0===a?void 0:a.evaluate(e))&&void 0!==i?i:this}return this}N(e){var t,n;let r=this.symbolDefinition;return r&&"never"===r.holdUntil?this:null!==(t=null===r||void 0===r||null===(n=r.value)||void 0===n?void 0:n.N(e))&&void 0!==t?t:this}replace(e,t){return Ai(this,e,t)}subs(e,t){return void 0===e[this._id]?null!==t&&void 0!==t&&t.canonical?this.canonical:this:this.engine.box(e[this._id],t)}};function Tl(e,t){let n=e.lookupSymbol(t);return"never"===(null===n||void 0===n?void 0:n.holdUntil)&&n.value?n.value:new Fl(e,t,{canonical:!0,def:n})}var Bl="\x1b[0m",Ll="\x1b[101;97m",Ol=class e{constructor(t){var n,r,i,a;if(this._cache={},this._commonSymbols={True:null,False:null,All:null,Nothing:null,None:null,Undefined:null,Pi:null,ImaginaryUnit:null,ExponentialE:null},this._commonNumbers={"-5":null,"-4":null,"-3":null,"-2":null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,12:null,36:null},this._commonDomains={Anything:null,Void:null,NothingDomain:null,Booleans:null,Strings:null,Domains:null,Symbols:null,Integers:null,RationalNumbers:null,AlgebraicNumbers:null,RealNumbers:null,ExtendedRealNumbers:null,ImaginaryNumbers:null,ComplexNumbers:null,ExtendedComplexNumbers:null,Numbers:null,PositiveIntegers:null,TranscendentalNumbers:null,PositiveNumbers:null,Functions:null,NumericFunctions:null,RealFunctions:null,LogicOperators:null,Predicates:null},void 0!==t&&"object"!=typeof t)throw Error("Unexpected argument");this.strict=!0,this._jsonSerializationOptions={exclude:[],shorthands:["function","symbol","string","dictionary","number"],metadata:[],precision:"max",repeatingDecimals:!0},this._useRawJsonSerializationOptions=!1,this._rawJsonSerializationOptions={exclude:[],shorthands:["function","symbol","string","dictionary","number"],metadata:[],precision:"max",repeatingDecimals:!1},this._stats={highwaterMark:0,symbols:new Set,expressions:new Set},this._numericMode=null!==(n=null===t||void 0===t?void 0:t.numericMode)&&void 0!==n?n:"auto",this._precision=Math.max(null!==(r=null===t||void 0===t?void 0:t.numericPrecision)&&void 0!==r?r:100,Math.floor(Dr)),this._bignum=lt.clone({precision:this._precision}),this.tolerance=null!==(i=null===t||void 0===t?void 0:t.tolerance)&&void 0!==i?i:wr,this.Zero=new Ao(this,0),this.One=new Ao(this,1),this.Half=new Ao(this,[1,2]),this.NegativeOne=new Ao(this,-1),this.NaN=new Ao(this,Number.NaN),this.PositiveInfinity=new Ao(this,Number.POSITIVE_INFINITY),this.NegativeInfinity=new Ao(this,Number.NEGATIVE_INFINITY),this.I=new Ao(this,N.Complex.I),this.ComplexInfinity=new Ao(this,N.Complex.INFINITY),this.reset(),this.context={assumptions:new Sl,timeLimit:2,memoryLimit:1,recursionLimit:1024,iterationLimit:Number.POSITIVE_INFINITY};for(let l of e.getStandardLibrary("domains"))yl(this,l);for(let e of Object.keys(this._commonDomains)){var o;this._commonDomains[e]&&!this._commonDomains[e].symbolDefinition?this._commonDomains[e].bind():this._commonDomains[e]=new Da(this,null!==(o=Ji[e])&&void 0!==o?o:e)}this.Anything=this._commonDomains.Anything,this.Void=this._commonDomains.Void,this.Strings=this._commonDomains.Strings,this.Booleans=this._commonDomains.Booleans,this.Numbers=this._commonDomains.Numbers;let s=null!==(a=null===t||void 0===t?void 0:t.ids)&&void 0!==a?a:e.getStandardLibrary();for(let e of s)yl(this,e);for(let e of Object.keys(this._commonSymbols)){let t=new Fl(this,e,{canonical:!0});t.bind(),this._commonSymbols[e]=t}this.True=this._commonSymbols.True,this.False=this._commonSymbols.False,this.Pi=this._commonSymbols.Pi,this.E=this._commonSymbols.ExponentialE,this.Nothing=this._commonSymbols.Nothing,this.pushScope()}static getStandardLibrary(){return ml(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all")}get latexDictionary(){return this.latexSyntax.dictionary}set latexDictionary(e){this.latexSyntax.dictionary=e}reset(){this._bignum,this._BIGNUM_NEGATIVE_ONE=this.bignum(-1),this._BIGNUM_NAN=this.bignum(NaN),this._BIGNUM_ZERO=this.bignum(0),this._BIGNUM_ONE=this.bignum(1),this._BIGNUM_TWO=this.bignum(2),this._BIGNUM_HALF=this._BIGNUM_ONE.div(this._BIGNUM_TWO),this._BIGNUM_PI=this._BIGNUM_NEGATIVE_ONE.acos();let e=this._stats.symbols.values(),t=this._stats.expressions.values();this._stats.symbols=new Set,this._stats.expressions=new Set;for(let i of e)i.reset();for(let i of t)i.reset();for(let i of Object.values(this._commonDomains))null===i||void 0===i||i.reset();for(let i of Object.values(this._commonSymbols))null===i||void 0===i||i.reset();let n=this.context;for(;n;){var r;if(n.ids)for(let[e,t]of n.ids)t.reset();n=null!==(r=n.parentScope)&&void 0!==r?r:null}for(let i of Object.keys(this._cache))this._cache[i].value&&(this._cache[i].purge?this._cache[i].value=this._cache[i].purge(this._cache[i].value):delete this._cache[i])}_register(e){this._stats.highwaterMark+=1}_unregister(e){}get stats(){let e=this._stats.expressions;return this._stats.expressions=null,this._stats.expressions=e,l({},this._stats)}get precision(){return"machine"===this._numericMode||"complex"===this._numericMode?Math.floor(Dr):this._precision}set precision(e){if("machine"===e&&(e=Math.floor(Dr)),e!==this._precision){var t;if("number"!=typeof e||e<=0)throw Error('Expected "machine" or a positive number');null!==(t=this._latexSyntax)&&void 0!==t&&t.updateOptions({precision:e,avoidExponentsInRange:[-6,e]}),this._precision=Math.max(e,Math.floor(Dr)),this.jsonSerializationOptions.precision>this._precision&&(this.jsonSerializationOptions={precision:this._precision}),"auto"!==this._numericMode&&"bignum"!==this._numericMode&&this._precision>Math.floor(Dr)&&(this._numericMode="auto"),this._bignum=this._bignum.config({precision:this._precision}),this.reset()}}get numericMode(){return this._numericMode}set numericMode(e){if(e!==this._numericMode){if("string"!=typeof e)throw Error("Expected a string");this._numericMode=e,("complex"===e||"machine"===e)&&(this._precision=Math.floor(Dr)),this._latexSyntax&&this.latexSyntax.options.precision>this._precision&&this.latexSyntax.updateOptions({precision:this._precision}),this.jsonSerializationOptions.precision>this._precision&&(this.jsonSerializationOptions={precision:this._precision}),this.reset()}}get timeLimit(){let e=this.context;for(;e;){var t;if(void 0!==e.timeLimit)return e.timeLimit;e=null!==(t=e.parentScope)&&void 0!==t?t:null}return 2}get iterationLimit(){let e=this.context;for(;e;){var t;if(void 0!==e.iterationLimit)return e.iterationLimit;e=null!==(t=e.parentScope)&&void 0!==t?t:null}return 1024}get recursionLimit(){let e=this.context;for(;e;){var t;if(void 0!==e.recursionLimit)return e.recursionLimit;e=null!==(t=e.parentScope)&&void 0!==t?t:null}return 1024}get tolerance(){return this._tolerance}set tolerance(e){"number"==typeof e&&Number.isFinite(e)?this._tolerance=Math.max(e,0):this._tolerance=wr,this._bignumTolerance=this.bignum(this._tolerance)}chop(e){return"number"==typeof e&&Math.abs(e)<=this._tolerance||e instanceof lt&&e.abs().lte(this._bignumTolerance)||e instanceof N.Complex&&Math.abs(e.re)<=this._tolerance&&Math.abs(e.im)<=this._tolerance?0:e}bignum(e){if("bigint"==typeof e)return new this._bignum(e.toString());try{return new this._bignum(e)}catch(t){console.error(t)}return this._BIGNUM_NAN}complex(e,t){return e instanceof lt&&(e=e.toNumber()),t instanceof lt&&(t=t.toNumber()),new N.Complex(e,t)}isBignum(e){return e instanceof lt}isComplex(e){return e instanceof N.Complex}get latexSyntax(){if(!this._latexSyntax){let e=this.precision;this._latexSyntax=new gr({computeEngine:this,precision:e,avoidExponentsInRange:[-6,e],onError:e=>{throw new Error(JSON.stringify(e[0].message))}})}return this._latexSyntax}static getLatexDictionary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return gr.getDictionary(e)}set costFunction(e){"function"!=typeof e&&(this._cost=_l),this._cost=e}get costFunction(){var e;return null!==(e=this._cost)&&void 0!==e?e:_l}lookupSymbol(e,t,n){var r;if(!this.strict){for(null!==(i=n)&&void 0!==i||(n=null!==(a=this.context)&&void 0!==a?a:void 0);n;){var i,a,o;let t=null===(o=n.ids)||void 0===o?void 0:o.get(e);if(t&&t instanceof cl)return t;n=n.parentScope}return}if("string"!=typeof e)throw Error("Expected a string");if(0===e.length||!this.context)return;let s=null!==(r=n)&&void 0!==r?r:this.context;if(t)for(n=s;n;){if(n.ids)for(let[e,r]of n.ids)if(r instanceof cl&&r.wikidata===t)return r;n=n.parentScope}for(n=s;n;){var l;let t=null===(l=n.ids)||void 0===l?void 0:l.get(e);if(t instanceof cl)return t;n=n.parentScope}}lookupFunction(e,t){if("string"==typeof e&&this.context)for(null!==(n=t)&&void 0!==n||(t=this.context);t;){var n,r;let i=null===(r=t.ids)||void 0===r?void 0:r.get(e);if(i instanceof hl)return i;t=t.parentScope}}defineSymbol(e,t){if(!this.context)throw Error("Symbol cannot be defined: no scope available");if(0===e.length||!kt(e))throw Error('Invalid identifier "'.concat(e,'": ').concat(Bt(e),"}"));return this._defineSymbol(e,t)}_defineSymbol(e,t){var n,r;null!==(n=(r=this.context).ids)&&void 0!==n||(r.ids=new Map);let i=new cl(this,e,t);return i.name&&this.context.ids.set(i.name,i),i}defineFunction(e,t){if(!this.context)throw Error("Function cannot be defined: no scope available");if(0===e.length||!kt(e))throw Error('Invalid identifier "'.concat(e,'": ').concat(Bt(e),"}"));return this._defineFunction(e,t)}_defineFunction(e,t){var n,r;null!==(n=(r=this.context).ids)&&void 0!==n||(r.ids=new Map);let i=fl(this,e,t);return i.name&&this.context.ids.set(i.name,i),i}pushScope(e){if(null===this.context)throw Error("No parent scope available");return this.context=l(l({timeLimit:this.context.timeLimit,memoryLimit:this.context.memoryLimit,recursionLimit:this.context.recursionLimit,iterationLimit:this.context.iterationLimit},null!==e&&void 0!==e?e:{}),{},{parentScope:this.context,assumptions:new Sl(this.context.assumptions)}),this}popScope(){var e;if(!this.context)throw Error("No scope available");return this.context=null!==(e=this.context.parentScope)&&void 0!==e?e:null,this.context,this}swapScope(e){let t=this.context;return this.context=e,this.context,t}resetContext(){if(this.context)for(let[t,n]of null!==(e=this.context.ids)&&void 0!==e?e:[]){var e;if(n instanceof cl)n.constant||(n.value=void 0);else if(n instanceof hl){let e=n.signature;n.signature=l(l({},e),{},{evaluate:void 0,N:void 0,simplify:void 0,canonical:void 0})}}}_printScope(e,t){var n,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==(n=e)&&void 0!==n||(e={details:!1,maxDepth:1}),null!==(r=t)&&void 0!==r||(t=this.context),!t||e.maxDepth&&i>e.maxDepth)return null;let a="".concat("\x1b[33m","[undefined]").concat(Bl);if(0===i?console.group("current scope - level 0"):console.groupCollapsed(t.parentScope?"scope - level ".concat(i):"root scope - level ".concat(i)),t.ids){let n=0;for(let[r,i]of t.ids){let c="".concat("\x1b[36;1m").concat(r).concat(Bl);try{if(i instanceof cl){var o,s,l;let e=null!==(o=i.value)&&void 0!==o&&o.isValid?i.value.toString():i.value?"".concat(Ll).concat(i.value.toString()).concat(Bl):a;console.info("".concat(c,": ").concat(null!==(s=null===(l=i.domain)||void 0===l?void 0:l.toString())&&void 0!==s?s:a," = ").concat(e))}else i instanceof hl&&("function"==typeof i.signature.evaluate?console.info("".concat(c,"(): ").concat(e.details?i.signature.evaluate.toString():"[native-code]")):void 0===i.signature.evaluate?console.info("".concat(c,"(): ").concat(a)):console.info("".concat(c,"(): ").concat(i.toString())));11===n&&console.groupCollapsed("... and ".concat(t.ids.size-n," more")),n+=1}catch(u){console.info("".concat(c,": ").concat(Ll).concat(u.message).concat(Bl))}}n>=11&&console.groupEnd()}if(t.assumptions){let e=[...t.assumptions.entries()].map((e=>{let[t,n]=e;return"".concat(t,": ").concat(n)}));if(e.length>0){console.groupCollapsed("".concat(e.length," assumptions)"));for(let t of e)console.info(t);console.groupEnd()}}return t.parentScope&&this._printScope(e,t.parentScope,i+1),console.groupEnd(),this.context}declare(e,t){var n;if("string"!=typeof e||void 0===t){for(let[t,n]of Object.entries(e))this.declare(t,n);return this}let[r,i]=Do(e);if(void 0!==i)throw Error("Unexpected arguments with ".concat(e,". Use 'ce.assign()' instead to assign a value, or a use a function definition with 'ce.declare()'."));if("Nothing"===r)return this;if(null!==(n=this.context)&&void 0!==n&&null!==(n=n.ids)&&void 0!==n&&n.get(r)){let e=this.context.ids.get(r);if(e instanceof cl&&e.inferredDomain)return bl(t)?e.update(t):(e.domain=this.domain(t),e.inferredDomain=!1),this;throw Error('Symbol "'.concat(r,'" has already been declared in the current scope'))}let a=t;if(!a)throw Error("Expected a definition for ".concat(r));if(bl(a))return this.defineSymbol(r,a),this;if(xl(a))return this.defineFunction(r,a),this;{let e=this.domain(a);if(!e.isValid)throw Error('Invalid argument for "'.concat(r,'": use a domain, a FunctionDefinition or a SymbolDefinition'));if(e.isFunction)this.defineFunction(r,{signature:ci(e)});else{if(i)throw Error('Unexpected arguments with domain for "'.concat(r,'"'));this.defineSymbol(r,{domain:e})}}return this}assign(e,t){var n;if("object"==typeof e){for(let[t,n]of Object.entries(e))this.assign(t,n);return this}let[r,i]=Do(e);if("Nothing"===r)return this;let a=t;if("boolean"==typeof a&&(a=a?this.True:this.False),"string"==typeof a){let e=a.trim();a=e.startsWith("$")&&e.endsWith("$")?this.parse(e.slice(1,-1),{canonical:!1}):e.startsWith("$$")&&e.endsWith("$$")?this.parse(e.slice(2,-2),{canonical:!1}):this.string(a)}let o=this.lookupSymbol(r);if(o){var s,l;if(o.constant)throw Error('Cannot assign a value to the constant "'.concat(r,'"'));if(!o.inferredDomain&&zl(a))throw Error('Cannot assign a function to symbol "'.concat(r,'"'));let e=o.scope;if(null!==e&&void 0!==e&&null!==(s=e.ids)&&void 0!==s&&s.delete(o.name),!i&&!zl(a))return o.value=null==a?void 0:this.box(a),null!==e&&void 0!==e&&null!==(l=e.ids)&&void 0!==l&&l.set(o.name,o),this}let u=this.lookupFunction(r);if(u){var c;let e=u.scope;if(null!==e&&void 0!==e&&null!==(c=e.ids)&&void 0!==c&&c.delete(u.name),null==a)return this;if("function"==typeof a){let t=this.swapScope(e);return this.defineFunction(r,{signature:{evaluate:a}}),this.swapScope(t),this}if(i&&zl(a))throw Error('Unexpected arguments for "'.concat(r,'"'));let t=i?this.box(["Function",a,...i]):this.box(a),n=this.swapScope(e);return this.defineFunction(r,{signature:{evaluate:t}}),this.swapScope(n),this}if(null==a)return this.declare(r,{inferred:!0,domain:this.Anything}),this;if("function"==typeof a)return this.defineFunction(r,{signature:{evaluate:a}}),this;if(a instanceof xa&&"Functions"===(null===(n=a.domain)||void 0===n?void 0:n.base))return this.defineFunction(r,{signature:{evaluate:a}}),this;if(Array.isArray(a)||a instanceof xa||i){let e=this.box(a,{canonical:!1});if("Function"===e.head)return e=this.box(["Function",...e.ops,...(null!==i&&void 0!==i?i:[]).map((e=>this.symbol(e)))]),this.defineFunction(r,{signature:{evaluate:e}}),this;let t=[...e.unknowns].sort();if(0===t.length){let t=e.evaluate();return this.defineSymbol(r,{value:t}),this}if(t.some((e=>/\_[\d]+/.test(e))))return e=this.box(["Function",e]),this.defineFunction(r,{signature:{evaluate:e}}),this;if(i&&i.length>0)return this.pushScope(),e=this.box(["Function",e,...i]),this.popScope(),this.defineFunction(r,{signature:{evaluate:e}}),this;this.pushScope(),a=e.evaluate(),this.popScope()}return this.defineSymbol(r,{value:a}),this}_assign(e,t){let n=this.lookupSymbol(e);if(n)return n.value=this.box(t).evaluate(),this;let r=this.lookupFunction(e);if(r){let e=r.signature;return r.signature=l(l({},e),{},{N:void 0,simplify:void 0,canonical:void 0,evaluate:t}),this}return"".concat(e),this}get assumptions(){if(!this.context)throw Error("No scope available");return this.context.assumptions||(this.context.assumptions=new Sl),this.context.assumptions}shouldContinueExecution(){return void 0===this.deadline||this.deadline>=Date.now()}checkContinueExecution(){if(!this.shouldContinueExecution())throw new Error("timeout")}cache(e,t,n){var r;if(void 0===this._cache[e])try{this._cache[e]={build:t,purge:n,value:t()}}catch(i){console.error('Fatal error building cache "'.concat(e,'":\n\t ').concat(i.toString()))}return null===(r=this._cache[e])||void 0===r?void 0:r.value}box(e,t){return Ds(this,e,t)}canonical(e){if(!e.every((e=>e instanceof xa)))return e.map((e=>this.box(e)));let t=e;return t.every((e=>e.isCanonical))?t:t.map((e=>e.canonical))}fn(e,t,n){return xs(this,e,t,null!==n&&void 0!==n?n:{canonical:!0})}_fn(e,t,n){return new wo(this,e,t,{metadata:n,canonical:!0})}error(e,t){let n;return t instanceof xa?t=this.rawJson(t):t&&Array.isArray(t)&&"LatexString"===t[0]&&((void 0===t[1]||!t[1])&&(t=""),"object"==typeof t[1]&&"str"in t[1]&&!t[1].str&&(t="")),"string"==typeof e&&(n=this.string(e)),!n&&"string"!=typeof e&&(n=new wo(this,"ErrorCode",[this.string(e[0]),...e.slice(1).map((e=>this.box(e,{canonical:!1})))])),new wo(this,"Error",t?[n,this.box(t,{canonical:!1})]:[n],{canonical:!1})}domainError(e,t,n){let r=wa(e)?this.domain(e):this.symbol(e),i=t||this.symbol("Undefined");return this.error(["incompatible-domain",r,i],n)}hold(e){return this._fn("Hold",[this.box(e,{canonical:!1})])}add(e,t){let n=ka(this,Pi(qi(e),"Add"));return void 0!==(null===t||void 0===t?void 0:t.latex)&&(n.latex=t.latex),n}neg(e,t){return Ta(e,t)}mul(e,t){let n=ts(this,Pi(qi(e)," Multiply"));return void 0!==(null===t||void 0===t?void 0:t.latex)&&(n.latex=t.latex),n}div(e,t,n){let r=Wo(this,e,t);return void 0!==(null===n||void 0===n?void 0:n.latex)&&(r.latex=n.latex),r}sqrt(e,t){return Jo(this,e,this.Half,t)}pow(e,t,n){if("ExponentialE"===e.symbol&&t instanceof N.Complex){let e=t.im,n=t.re;if(0===n)return this.number(this.complex(Math.cos(e),Math.sin(e)));if(0===e)return this.number(Math.exp(n));let r=Math.exp(n);return this.number(this.complex(r*Math.cos(e),r*Math.sin(e)))}if(t instanceof xa){let e=t.numericValue;null!==e&&("number"==typeof e&&(t=e),Ur(e)&&(t=e))}let r=null;if("number"==typeof t)r=t;else if(Ur(t)){if(Wr(t))return this.One;if(Gr(t))return e;$r(t)&&1===t[1]?r=t[0]:Hr(t)&&t[1]===BigInt(1)&&(r=Number(t[0]))}if(0===r)return this.One;if(1===r)return e;let i=e.numericValue;if(-1===r&&null!==i){if("number"==typeof i&&Number.isInteger(i))return this.number([1,i]);if(i instanceof lt&&i.isInteger())return this.number([BigInt(1),jr(i)]);if(Ur(i))return this.number([i[1],i[0]])}return("number"==typeof t||Ur(t))&&(t=this.number(t)),Jo(this,e,t,n)}inv(e,t){if(e.isOne)return this.One;if(e.isNegativeOne)return this.NegativeOne;if(e.isInfinity)return this.Zero;let n=e.numericValue;if(null!==n)return Ur(n)?this.number(ei(n),{metadata:t}):"number"==typeof n&&Number.isInteger(n)?this.number([1,n],{metadata:t}):n instanceof lt&&n.isInteger()?this.number([BigInt(1),jr(n)],{metadata:t}):this._fn("Divide",[this.One,e],t);if("Sqrt"===e.head)return this._fn("Sqrt",[this.inv(e.op1)],t);if("Divide"===e.head)return this._fn("Divide",[e.op1,e.op2],t);let r=this.NegativeOne;if("Power"===e.head){if(e.op2.isNegativeOne)return e.op1;r=Ta(e.op2),e=e.op1}return r.isNegativeOne?this._fn("Divide",[this.One,e],t):this._fn("Power",[e,r],t)}pair(e,t,n){return new wo(this,"Tuple",[e,t],{metadata:n,canonical:!0})}tuple(e,t){return"number"==typeof e[0]?new wo(this,"Tuple",e.map((e=>this.number(e))),{metadata:t,canonical:!0}):new wo(this,"Tuple",oa(e),{metadata:t,canonical:!0})}array(e,t){return this.Nothing}string(e,t){return new Mo(this,e,t)}symbol(e,t){var n,r;if("canonical"in(t=t?l({},t):{})||(t.canonical=!0),"NaN"===(e=e.normalize()))return this.NaN;if("Infinity"===e)return this.PositiveInfinity;if("+Infinity"===e)return this.PositiveInfinity;if("-Infinity"===e)return this.NegativeInfinity;if("Half"===e)return this.Half;if(this.strict&&!kt(e)){var i;let n=null===(i=t)||void 0===i||null===(i=i.metadata)||void 0===i?void 0:i.latex,r="'".concat(e,"'");return this.error(["invalid-identifier",{str:Bt(e)}],n?["LatexString","'".concat(n,"'")]:r)}if(void 0!==(null===(n=t)||void 0===n||null===(n=n.metadata)||void 0===n?void 0:n.latex)&&!t.canonical)return new Fl(this,e,t);let a=this._commonSymbols[e];return a?null!==(r=t)&&void 0!==r&&null!==(r=r.metadata)&&void 0!==r&&r.wikidata&&a.wikidata&&a.wikidata!==t.metadata.wikidata?t.canonical?Tl(this,e):new Fl(this,e,t):a:t.canonical?Tl(this,e):new Fl(this,e,t)}domain(e,t){if(e instanceof Da)return e;if("string"==typeof e){let t=this._commonDomains[e];if(t)return t}if(!this.strict){if("string"==typeof e){let t=Ji[e];if(t)return this.domain(t)}return new Da(this,e,t)}if(Array.isArray(e)&&"Domain"===e[0]&&(e=e[1]),"string"==typeof e){let n=Ji[e];if(n)return this.domain(n);if(!Yi(e))throw Error("Expected a domain literal, got "+e);return new Da(this,e,t)}if(!Array.isArray(e)||0===e.length)throw Error("Expected a valid domain");let n=e[0];if(!Zi.includes(n))throw Error("Expected a domain constructor, got "+n);return new Da(this,e,t)}number(e,t){var n;if("canonical"in(t=t?l({},t):{})||(t.canonical=!0),void 0===t.metadata){if("bigint"==typeof e){if(e===BigInt(1))return this.One;if(e===BigInt(0))return this.Zero;if(e===BigInt(-1))return this.NegativeOne}if("number"==typeof e){var r;let t=e;if(1===t)return this.One;if(0===t)return this.Zero;if(-1===t)return this.NegativeOne;if(Number.isInteger(t)&&void 0!==this._commonNumbers[t])return null===this._commonNumbers[t]&&(this._commonNumbers[t]=null!==(r=ys(this,e))&&void 0!==r?r:this.NaN),this._commonNumbers[t];if(Number.isNaN(t))return this.NaN;if(!Number.isFinite(t))return t<0?this.NegativeInfinity:this.PositiveInfinity}}return"bigint"==typeof e&&(e=this.bignum(e)),null!==(n=ys(this,e,t))&&void 0!==n?n:this.NaN}rules(e){return Ei(this,e)}pattern(e){return new Cl(this,e)}parse(e,t){var n;if("string"!=typeof e)return null;let r=this.latexSyntax.parse(null!==(n=fi(e))&&void 0!==n?n:e);return this.box(r,t)}serialize(e,t){if("object"==typeof e&&"json"in e){let n="engine"in e?e.engine:this;return this.latexSyntax.serialize(this.rawJson(n.box(e,{canonical:!1})),t)}return this.latexSyntax.serialize(e,t)}get latexOptions(){let e=this.latexSyntax;return new Proxy(l(l({},this.latexSyntax.options),this.latexSyntax.serializer.options),{set:(t,n,r)=>n in t&&(e.updateOptions({[n]:r}),!0)})}set latexOptions(e){this.latexSyntax.updateOptions(e)}get jsonSerializationOptions(){if(this._useRawJsonSerializationOptions)return new Proxy(this._rawJsonSerializationOptions,{get(e,t){if(t in e)return e[t]}});let e=this;return new Proxy(this._jsonSerializationOptions,{get(e,t){if(t in e)return e[t]},set:(t,n,r)=>n in t&&(e.jsonSerializationOptions={[n]:r},!0)})}set jsonSerializationOptions(e){e.exclude&&(this._jsonSerializationOptions.exclude=[...e.exclude]),e.shorthands&&("all"===e.shorthands||e.shorthands.includes("all")?this._jsonSerializationOptions.shorthands=["function","symbol","string","dictionary","number"]:this._jsonSerializationOptions.shorthands=[...e.shorthands]),e.metadata&&("all"===e.metadata||e.metadata.includes("all")?this._jsonSerializationOptions.metadata=["latex","wikidata"]:this._jsonSerializationOptions.metadata=[...e.metadata]),"number"==typeof e.precision&&e.precision>0&&(this._jsonSerializationOptions.precision=e.precision),"boolean"==typeof e.repeatingDecimals&&(this._jsonSerializationOptions.repeatingDecimals=e.repeatingDecimals)}rawJson(e){let t=this._useRawJsonSerializationOptions;this._useRawJsonSerializationOptions=!0;let n=e.json;return this._useRawJsonSerializationOptions=t,n}ask(e){let t=this.pattern(e),n=[];for(let[r,i]of this.assumptions){let e=t.match(r,{numericTolerance:this._tolerance});null!==e&&!0===i&&n.push(e)}return n}verify(e){return!1}assume(e){try{return Ha(this.box(e,{canonical:!1}))}catch(t){return console.error(t.toString()),"internal-error"}}forget(e){if(!this.context)throw Error("No scope available");if(void 0!==e){if(Array.isArray(e))for(let t of e)this.forget(t);else if("string"==typeof e){if(this.context.ids){let t=this.context.ids.get(e);if(t instanceof cl)t.value=void 0;else if(t instanceof hl){let e=t.signature;t.signature=l(l({},e),{},{evaluate:void 0,N:void 0,simplify:void 0,canonical:void 0})}}for(let[t,n]of this.assumptions)t.symbols.includes(e)&&this.assumptions.delete(t)}}else{if(this.context.ids)for(let e of this.context.ids.keys())this.forget(e);this.assumptions.clear()}}};function zl(e){var t;return"function"==typeof e||e instanceof xa&&"Functions"===(null===(t=e.domain)||void 0===t?void 0:t.base)}function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Il.apply(null,arguments)}globalThis[Symbol.for("io.cortexjs.compute-engine")]={ComputeEngine:Ol.prototype.constructor,version:"0.22.0"};var Pl=n(422);function ql(e){return"number"===typeof e}function Rl(e){return!(!e||"object"!==typeof e||"function"!==typeof e.constructor)&&(!0===e.isBigNumber&&"object"===typeof e.constructor.prototype&&!0===e.constructor.prototype.isBigNumber||"function"===typeof e.constructor.isDecimal&&!0===e.constructor.isDecimal(e))}function jl(e){return e&&"object"===typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function Kl(e){return e&&"object"===typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function Vl(e){return e&&!0===e.constructor.prototype.isUnit||!1}function Ul(e){return"string"===typeof e}var $l=Array.isArray;function Hl(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function Wl(e){return Array.isArray(e)||Hl(e)}function Gl(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function Zl(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function Jl(e){return e&&!0===e.constructor.prototype.isRange||!1}function Xl(e){return e&&!0===e.constructor.prototype.isIndex||!1}function Yl(e){return"boolean"===typeof e}function Ql(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function eu(e){return e&&!0===e.constructor.prototype.isHelp||!1}function tu(e){return"function"===typeof e}function nu(e){return e instanceof Date}function ru(e){return e instanceof RegExp}function iu(e){return!(!e||"object"!==typeof e||e.constructor!==Object||jl(e)||Kl(e))}function au(e){return null===e}function ou(e){return void 0===e}function su(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function lu(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function uu(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function cu(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function du(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function pu(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function hu(e){return pu(e)||bu(e)&&1===e.args.length&&pu(e.args[0])&&"-+~".includes(e.op)}function fu(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function mu(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function gu(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function vu(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function yu(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function bu(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function xu(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function Du(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function wu(e){return e&&!0===e.isRelationalNode&&!0===e.constructor.prototype.isNode||!1}function _u(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function Su(e){return e&&!0===e.constructor.prototype.isChain||!1}function Cu(e){var t=typeof e;return"object"===t?null===e?"null":Rl(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Eu(e){var t=typeof e;if("number"===t||"string"===t||"boolean"===t||null===e||void 0===e)return e;if("function"===typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return Eu(e)}));if(e instanceof Date)return new Date(e.valueOf());if(Rl(e))return e;if(iu(e))return ku(e,Eu);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function ku(e,t){var n={};for(var r in e)Lu(e,r)&&(n[r]=t(e[r]));return n}function Au(e,t){for(var n in t)Lu(t,n)&&(e[n]=t[n]);return e}function Nu(e,t){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n in t)if(Lu(t,n)&&!(n in Object.prototype)&&!(n in Function.prototype))if(t[n]&&t[n].constructor===Object)void 0===e[n]&&(e[n]={}),e[n]&&e[n].constructor===Object?Nu(e[n],t[n]):e[n]=t[n];else{if(Array.isArray(t[n]))throw new TypeError("Arrays are not supported by deepExtend");e[n]=t[n]}return e}function Mu(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!Mu(e[r],t[r]))return!1;return!0}if("function"===typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!Mu(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}return e===t}function Fu(e){var t={};return Tu(e,t),t}function Tu(e,t){for(var n in e)if(Lu(e,n)){var r=e[n];"object"===typeof r&&null!==r?Tu(r,t):t[n]=r}}function Bu(e,t,n){var r,i=!0;Object.defineProperty(e,t,{get:function(){return i&&(r=n(),i=!1),r},set:function(e){r=e,i=!1},configurable:!0,enumerable:!0})}function Lu(e,t){return e&&Object.hasOwnProperty.call(e,t)}var Ou=n(841);function zu(e,t,n,r){function i(r){var i=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],a=e[i];void 0!==a&&(n[i]=a)}return n}(r,t.map(Pu));return function(e,t,n){var r=t.filter((e=>!function(e){return e&&"?"===e[0]}(e))).every((e=>void 0!==n[e]));if(!r){var i=t.filter((e=>void 0===n[e]));throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map((e=>'"'.concat(e,'"'))).join(", "),"."))}}(e,t,r),n(i)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function Iu(e){return"function"===typeof e&&"string"===typeof e.fn&&Array.isArray(e.dependencies)}function Pu(e){return e&&"?"===e[0]?e.slice(1):e}function qu(e,t,n,r){if(!(this instanceof qu))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(void 0!==r&&null!==r?"-"+r:"")+" expected)",this.stack=(new Error).stack}function Ru(e,t,n,r){function i(t,i,o){if(o.wrap&&"function"===typeof i&&(i=function(e){var t=function(){for(var t=[],r=0,i=arguments.length;r<i;r++){var a=arguments[r];t[r]=a&&a.valueOf()}return e.apply(n,t)};e.transform&&(t.transform=e.transform);return t}(i)),function(e){return"function"===typeof e&&"string"===typeof e.signature}(i)&&(i=e(t,{[i.signature]:i})),e.isTypedFunction(n[t])&&e.isTypedFunction(i))return i=o.override?e(t,i.signatures):e(n[t],i),n[t]=i,delete r[t],a(t,i),void n.emit("import",t,(function(){return i}));if(void 0===n[t]||o.override)return n[t]=i,delete r[t],a(t,i),void n.emit("import",t,(function(){return i}));if(!o.silent)throw new Error('Cannot import "'+t+'": already exists')}function a(e,t){t&&"function"===typeof t.transform?(n.expression.transform[e]=t.transform,l(e)&&(n.expression.mathWithTransform[e]=t.transform)):(delete n.expression.transform[e],l(e)&&(n.expression.mathWithTransform[e]=t))}function o(e){delete n.expression.transform[e],l(e)?n.expression.mathWithTransform[e]=n[e]:delete n.expression.mathWithTransform[e]}function s(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.fn;if(a.includes("."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(a));var s=c(t)?n.expression.transform:n,l=a in n.expression.transform,d=Lu(s,a)?s[a]:void 0,p=function(){var r={};t.dependencies.map(Pu).forEach((e=>{if(e.includes("."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(e));"math"===e?r.math=n:"mathWithTransform"===e?r.mathWithTransform=n.expression.mathWithTransform:"classes"===e?r.classes=n:r[e]=n[e]}));var o=t(r);if(o&&"function"===typeof o.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(void 0===d||i.override)return o;if(e.isTypedFunction(d)&&e.isTypedFunction(o))return e(d,o);if(i.silent)return d;throw new Error('Cannot import "'+a+'": already exists')};t.meta&&!1===t.meta.lazy?(s[a]=p(),d&&l?o(a):(c(t)||u(t))&&Bu(n.expression.mathWithTransform,a,(()=>s[a]))):(Bu(s,a,p),d&&l?o(a):(c(t)||u(t))&&Bu(n.expression.mathWithTransform,a,(()=>s[a]))),r[a]=t,n.emit("import",a,p)}function l(e){return!Lu(d,e)}function u(e){return!e.fn.includes(".")&&!Lu(d,e.fn)&&(!e.meta||!e.meta.isClass)}function c(e){return void 0!==e&&void 0!==e.meta&&!0===e.meta.isTransformFunction||!1}var d={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function(e,t){var n=arguments.length;if(1!==n&&2!==n)throw new qu("import",n,1,2);t||(t={});var r,a={};for(var o in function e(n,r,i){if(Array.isArray(r))r.forEach((t=>e(n,t)));else if("object"===typeof r)for(var a in r)Lu(r,a)&&e(n,r[a],a);else if(Iu(r)||void 0!==i){var o=Iu(r)?c(r)?r.fn+".transform":r.fn:i;if(Lu(n,o)&&n[o]!==r&&!t.silent)throw new Error('Cannot import "'+o+'" twice');n[o]=r}else if(!t.silent)throw new TypeError("Factory, Object, or Array expected")}(a,e),a)if(Lu(a,o)){var l=a[o];if(Iu(l))s(l,t);else if("function"===typeof(r=l)||"number"===typeof r||"string"===typeof r||"boolean"===typeof r||null===r||Vl(r)||jl(r)||Rl(r)||Kl(r)||Hl(r)||Array.isArray(r))i(o,l,t);else if(!t.silent)throw new TypeError("Factory, Object, or Array expected")}}}qu.prototype=new Error,qu.prototype.constructor=Error,qu.prototype.name="ArgumentsError",qu.prototype.isArgumentsError=!0;var ju={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},Ku=["Matrix","Array"],Vu=["number","BigNumber","Fraction"];function Uu(e,t){function n(n){if(n){var r=ku(e,Eu);$u(n,"matrix",Ku),$u(n,"number",Vu),Nu(e,n);var i=ku(e,Eu),a=ku(n,Eu);return t("config",i,r,a),i}return ku(e,Eu)}return n.MATRIX_OPTIONS=Ku,n.NUMBER_OPTIONS=Vu,Object.keys(ju).forEach((t=>{Object.defineProperty(n,t,{get:()=>e[t],enumerable:!0,configurable:!0})})),n}function $u(e,t,n){void 0===e[t]||n.includes(e[t])||console.warn('Warning: Unknown value "'+e[t]+'" for configuration option "'+t+'". Available options: '+n.map((e=>JSON.stringify(e))).join(", ")+".")}function Hu(e,t,n){if(!(this instanceof Hu))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function Wu(e,t,n){if(!(this instanceof Wu))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function Gu(e,t){var n=Il({},ju,t);if("function"!==typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r=function(e){var t=new Ou;return e.on=t.on.bind(t),e.off=t.off.bind(t),e.once=t.once.bind(t),e.emit=t.emit.bind(t),e}({isNumber:ql,isComplex:jl,isBigNumber:Rl,isFraction:Kl,isUnit:Vl,isString:Ul,isArray:$l,isMatrix:Hl,isCollection:Wl,isDenseMatrix:Gl,isSparseMatrix:Zl,isRange:Jl,isIndex:Xl,isBoolean:Yl,isResultSet:Ql,isHelp:eu,isFunction:tu,isDate:nu,isRegExp:ru,isObject:iu,isNull:au,isUndefined:ou,isAccessorNode:su,isArrayNode:lu,isAssignmentNode:uu,isBlockNode:cu,isConditionalNode:du,isConstantNode:pu,isFunctionAssignmentNode:fu,isFunctionNode:mu,isIndexNode:gu,isNode:vu,isObjectNode:yu,isOperatorNode:bu,isParenthesisNode:xu,isRangeNode:Du,isRelationalNode:wu,isSymbolNode:_u,isChain:Su});r.config=Uu(n,r.emit),r.expression={transform:{},mathWithTransform:{config:r.config}};var i={};function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.typed.apply(r.typed,t)}a.isTypedFunction=Pl.isTypedFunction;var o=Ru(a,0,r,i);return r.import=o,r.on("config",(()=>{Object.values(i).forEach((e=>{e&&e.meta&&e.meta.recreateOnConfigChange&&o(e,{override:!0})}))})),r.create=Gu.bind(null,e),r.factory=zu,r.import(Object.values(Fu(e))),r.ArgumentsError=qu,r.DimensionError=Hu,r.IndexError=Wu,r}function Zu(e){return"boolean"===typeof e||!!isFinite(e)&&e===Math.round(e)}Hu.prototype=new RangeError,Hu.prototype.constructor=RangeError,Hu.prototype.name="DimensionError",Hu.prototype.isDimensionError=!0,Wu.prototype=new RangeError,Wu.prototype.constructor=RangeError,Wu.prototype.name="IndexError",Wu.prototype.isIndexError=!0;var Ju=Math.sign||function(e){return e>0?1:e<0?-1:0},Xu=Math.log2||function(e){return Math.log(e)/Math.LN2},Yu=Math.log10||function(e){return Math.log(e)/Math.LN10},Qu=Math.log1p||function(e){return Math.log(e+1)},ec=Math.cbrt||function(e){if(0===e)return e;var t,n=e<0;return n&&(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,n?-t:t},tc=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function nc(e,t,n){var r={2:"0b",8:"0o",16:"0x"}[t],i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Zu(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Zu(e))throw new Error("Value must be an integer");e<0&&(e+=2**n),i="i".concat(n)}var a="";return e<0&&(e=-e,a="-"),"".concat(a).concat(r).concat(e.toString(t)).concat(i)}function rc(e,t){if("function"===typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=ic(t);switch(n){case"fixed":return oc(e,r);case"exponential":return sc(e,r);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ac(e),r=lc(n,t),i=r.exponent,a=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(ql(t))for(;t>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);var u=Math.abs(i-o),c=1;for(;u>0;)c++,u--;var d=a.slice(c).join(""),p=ql(t)&&d.length||d.match(/[1-9]/)?"."+d:"",h=a.slice(0,c).join("")+p+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}(e,r);case"bin":return nc(e,2,i);case"oct":return nc(e,8,i);case"hex":return nc(e,16,i);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=bc(null===n||void 0===n?void 0:n.lowerExp,-3),i=bc(null===n||void 0===n?void 0:n.upperExp,5),a=ac(e),o=t?lc(a,t):a;if(o.exponent<r||o.exponent>=i)return sc(e,t);var s=o.coefficients,l=o.exponent;s.length<t&&(s=s.concat(uc(t-s.length))),s=s.concat(uc(l-s.length+1+(s.length<t?t-s.length:0)));var u=l>0?l:0;return u<(s=uc(-l).concat(s)).length-1&&s.splice(u+1,0,"."),o.sign+s.join("")}(e,r,t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ic(e){var t,n,r="auto";if(void 0!==e)if(ql(e))t=e;else if(Rl(e))t=e.toNumber();else{if(!iu(e))throw new Error("Unsupported type of options, number, BigNumber, or object expected");void 0!==e.precision&&(t=yc(e.precision,(()=>{throw new Error('Option "precision" must be a number or BigNumber')}))),void 0!==e.wordSize&&(n=yc(e.wordSize,(()=>{throw new Error('Option "wordSize" must be a number or BigNumber')}))),e.notation&&(r=e.notation)}return{notation:r,precision:t,wordSize:n}}function ac(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),a=r.indexOf(".");i+=-1!==a?a-1:r.length-1;var o=r.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===o.length&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function oc(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ac(e),r="number"===typeof t?lc(n,n.exponent+1+t):n,i=r.coefficients,a=r.exponent+1,o=a+(t||0);return i.length<o&&(i=i.concat(uc(o-i.length))),a<0&&(i=uc(1-a).concat(i),a=1),a<i.length&&i.splice(a,0,0===a?"0.":"."),r.sign+i.join("")}function sc(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ac(e),r=t?lc(n,t):n,i=r.coefficients,a=r.exponent;i.length<t&&(i=i.concat(uc(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function lc(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function uc(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}var cc=Number.EPSILON||2220446049250313e-31;function dc(e,t,n){if(null===n||void 0===n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var r=Math.abs(e-t);return r<=cc||r<=Math.max(Math.abs(e),Math.abs(t))*n}return!1}var pc=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},hc=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},fc=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},mc=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2},gc=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2},vc=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1)};function yc(e,t){return ql(e)?e:Rl(e)?e.toNumber():void t()}function bc(e,t){return ql(e)?e:Rl(e)?e.toNumber():t}function xc(e,t){if(Sc(e)&&wc(e,t))return e[t];if("function"===typeof e[t]&&_c(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')}function Dc(e,t,n){if(Sc(e)&&wc(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function wc(e,t){return!(!e||"object"!==typeof e)&&(!!Lu(Cc,t)||!(t in Object.prototype)&&!(t in Function.prototype))}function _c(e,t){return null!==e&&void 0!==e&&"function"===typeof e[t]&&(!(Lu(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e))&&(!!Lu(Ec,t)||!(t in Object.prototype)&&!(t in Function.prototype)))}function Sc(e){return"object"===typeof e&&e&&e.constructor===Object}var Cc={length:!0,name:!0},Ec={toString:!0,valueOf:!0,toLocaleString:!0};class kc{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(e){return xc(this.wrappedObject,e)}set(e,t){return Dc(this.wrappedObject,e,t),this}has(e){return t=this.wrappedObject,e in t;var t}entries(){return Nc(this.keys(),(e=>[e,this.get(e)]))}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class Ac{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return Nc(this.keys(),(e=>[e,this.get(e)]))}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function Nc(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function Mc(){return new Map}function Fc(e){if(!e)return Mc();if(Tc(e))return e;if(iu(e))return new kc(e);throw new Error("createMap can create maps from objects or Maps")}function Tc(e){return!!e&&(e instanceof Map||e instanceof kc||"function"===typeof e.set&&"function"===typeof e.get&&"function"===typeof e.keys&&"function"===typeof e.has)}var Bc=function(){return Bc=Pl.create,Pl},Lc=zu("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(e){var{BigNumber:t,Complex:n,DenseMatrix:r,Fraction:i}=e,a=Bc();return a.clear(),a.addTypes([{name:"number",test:ql},{name:"Complex",test:jl},{name:"BigNumber",test:Rl},{name:"Fraction",test:Kl},{name:"Unit",test:Vl},{name:"identifier",test:e=>Ul&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(e)},{name:"string",test:Ul},{name:"Chain",test:Su},{name:"Array",test:$l},{name:"Matrix",test:Hl},{name:"DenseMatrix",test:Gl},{name:"SparseMatrix",test:Zl},{name:"Range",test:Jl},{name:"Index",test:Xl},{name:"boolean",test:Yl},{name:"ResultSet",test:Ql},{name:"Help",test:eu},{name:"function",test:tu},{name:"Date",test:nu},{name:"RegExp",test:ru},{name:"null",test:au},{name:"undefined",test:ou},{name:"AccessorNode",test:su},{name:"ArrayNode",test:lu},{name:"AssignmentNode",test:uu},{name:"BlockNode",test:cu},{name:"ConditionalNode",test:du},{name:"ConstantNode",test:pu},{name:"FunctionNode",test:mu},{name:"FunctionAssignmentNode",test:fu},{name:"IndexNode",test:gu},{name:"Node",test:vu},{name:"ObjectNode",test:yu},{name:"OperatorNode",test:bu},{name:"ParenthesisNode",test:xu},{name:"RangeNode",test:Du},{name:"RelationalNode",test:wu},{name:"SymbolNode",test:_u},{name:"Map",test:Tc},{name:"Object",test:iu}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(e){if(t||Oc(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||zc(e),new n(e,0)}},{from:"BigNumber",to:"Complex",convert:function(e){return n||zc(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||zc(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||Ic(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||Oc(e);try{return new t(e)}catch(n){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){i||Ic(e);try{return new i(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||zc(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||Oc(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||Ic(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}]),a.onMismatch=(e,t,n)=>{var r=a.createError(e,t,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===t.length&&Wl(t[0])&&n.some((e=>!e.params.includes(",")))){var i=new TypeError("Function '".concat(e,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(e,")'."));throw i.data=r.data,i}throw r},a.onMismatch=(e,t,n)=>{var r=a.createError(e,t,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===t.length&&Wl(t[0])&&n.some((e=>!e.params.includes(",")))){var i=new TypeError("Function '".concat(e,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(e,")'."));throw i.data=r.data,i}throw r},a}));function Oc(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function zc(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function Ic(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var Pc,qc,Rc=zu("ResultSet",[],(()=>{function e(t){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},e.fromJSON=function(t){return new e(t.entries)},e}),{isClass:!0}),jc=9e15,Kc=1e9,Vc="0123456789abcdef",Uc="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",$c="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Hc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-jc,maxE:jc,crypto:!1},Wc=!0,Gc="[DecimalError] ",Zc=Gc+"Invalid argument: ",Jc=Gc+"Precision limit exceeded",Xc=Gc+"crypto unavailable",Yc="[object Decimal]",Qc=Math.floor,ed=Math.pow,td=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,nd=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,rd=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,id=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ad=1e7,od=Uc.length-1,sd=$c.length-1,ld={toStringTag:Yc};function ud(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=xd(n)),a+=r;(n=7-(r=(o=e[t])+"").length)&&(a+=xd(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return a+o}function cd(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Zc+e)}function dd(e,t,n,r){var i,a,o,s;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),a=ed(10,7-t),s=e[i]%a|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),o=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):o=(n<4&&s+1==a||n>3&&s+1==a/2)&&(e[i+1]/a/100|0)==ed(10,t-2)-1||(s==a/2||0==s)&&0==(e[i+1]/a/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),o=(r||n<4)&&9999==s||!r&&n>3&&4999==s):o=((r||n<4)&&s+1==a||!r&&n>3&&s+1==a/2)&&(e[i+1]/a/1e3|0)==ed(10,t-3)-1,o}function pd(e,t,n){for(var r,i,a=[0],o=0,s=e.length;o<s;){for(i=a.length;i--;)a[i]*=t;for(a[0]+=Vc.indexOf(e.charAt(o++)),r=0;r<a.length;r++)a[r]>n-1&&(void 0===a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}ld.absoluteValue=ld.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),fd(e)},ld.ceil=function(){return fd(new this.constructor(this),this.e+1,2)},ld.clampedTo=ld.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(Zc+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},ld.comparedTo=ld.cmp=function(e){var t,n,r,i,a=this,o=a.d,s=(e=new a.constructor(e)).d,l=a.s,u=e.s;if(!o||!s)return l&&u?l!==u?l:o===s?0:!o^l<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?l:s[0]?-u:0;if(l!==u)return l;if(a.e!==e.e)return a.e>e.e^l<0?1:-1;for(t=0,n=(r=o.length)<(i=s.length)?r:i;t<n;++t)if(o[t]!==s[t])return o[t]>s[t]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},ld.cosine=ld.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?i=(1/Md(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");e.precision+=n,t=Nd(e,1,t.times(i),new e(1));for(var a=n;a--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,Fd(r,n)),r.precision=e,r.rounding=t,fd(2==qc||3==qc?n.neg():n,e,t,!0)):new r(1):new r(NaN)},ld.cubeRoot=ld.cbrt=function(){var e,t,n,r,i,a,o,s,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(Wc=!1,(a=c.s*ed(c.s*c,1/3))&&Math.abs(a)!=1/0?r=new d(a.toString()):(n=ud(c.d),(a=((e=c.e)-n.length+1)%3)&&(n+=1==a||-2==a?"0":"00"),a=ed(n,1/3),e=Qc((e+1)/3)-(e%3==(e<0?-1:2)),(r=new d(n=a==1/0?"5e"+e:(n=a.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),o=(e=d.precision)+3;;)if(u=(l=(s=r).times(s).times(s)).plus(c),r=hd(u.plus(c).times(s),u.plus(l),o+2,1),ud(s.d).slice(0,o)===(n=ud(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(fd(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!i&&(fd(s,e+1,0),s.times(s).times(s).eq(c))){r=s;break}o+=4,i=1}return Wc=!0,fd(r,e,d.rounding,t)},ld.decimalPlaces=ld.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-Qc(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},ld.dividedBy=ld.div=function(e){return hd(this,new this.constructor(e))},ld.dividedToIntegerBy=ld.divToInt=function(e){var t=this.constructor;return fd(hd(this,new t(e),0,1,1),t.precision,t.rounding)},ld.equals=ld.eq=function(e){return 0===this.cmp(e)},ld.floor=function(){return fd(new this.constructor(this),this.e+1,3)},ld.greaterThan=ld.gt=function(e){return this.cmp(e)>0},ld.greaterThanOrEqualTo=ld.gte=function(e){var t=this.cmp(e);return 1==t||0===t},ld.hyperbolicCosine=ld.cosh=function(){var e,t,n,r,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,(i=a.d.length)<32?t=(1/Md(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=Nd(o,1,a.times(t),new o(1),!0);for(var l,u=e,c=new o(8);u--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return fd(a,o.precision=n,o.rounding=r,!0)},ld.hyperbolicSine=ld.sinh=function(){var e,t,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,n=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,(r=i.d.length)<3)i=Nd(a,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=Nd(a,2,i=i.times(1/Md(5,e)),i,!0);for(var o,s=new a(5),l=new a(16),u=new a(20);e--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(u))))}return a.precision=t,a.rounding=n,fd(i,t,n,!0)},ld.hyperbolicTangent=ld.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,hd(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},ld.inverseCosine=ld.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,a=n.rounding;return-1!==r?0===r?t.isNeg()?yd(n,i,a):new n(0):new n(NaN):t.isZero()?yd(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=yd(n,i+4,a).times(.5),n.precision=i,n.rounding=a,e.minus(t))},ld.inverseHyperbolicCosine=ld.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Wc=!1,n=n.times(n).minus(1).sqrt().plus(n),Wc=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},ld.inverseHyperbolicSine=ld.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Wc=!1,n=n.times(n).plus(1).sqrt().plus(n),Wc=!0,r.precision=e,r.rounding=t,n.ln())},ld.inverseHyperbolicTangent=ld.atanh=function(){var e,t,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?fd(new a(i),e,t,!0):(a.precision=n=r-i.e,i=hd(i.plus(1),new a(1).minus(i),n+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)},ld.inverseSine=ld.asin=function(){var e,t,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),n=a.precision,r=a.rounding,-1!==t?0===t?((e=yd(a,n+4,r).times(.5)).s=i.s,e):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))},ld.inverseTangent=ld.atan=function(){var e,t,n,r,i,a,o,s,l,u=this,c=u.constructor,d=c.precision,p=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=sd)return(o=yd(c,d+4,p).times(.25)).s=u.s,o}else{if(!u.s)return new c(NaN);if(d+4<=sd)return(o=yd(c,d+4,p).times(.5)).s=u.s,o}for(c.precision=s=d+10,c.rounding=1,e=n=Math.min(28,s/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Wc=!1,t=Math.ceil(s/7),r=1,l=u.times(u),o=new c(u),i=u;-1!==e;)if(i=i.times(l),a=o.minus(i.div(r+=2)),i=i.times(l),void 0!==(o=a.plus(i.div(r+=2))).d[t])for(e=t;o.d[e]===a.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Wc=!0,fd(o,c.precision=d,c.rounding=p,!0)},ld.isFinite=function(){return!!this.d},ld.isInteger=ld.isInt=function(){return!!this.d&&Qc(this.e/7)>this.d.length-2},ld.isNaN=function(){return!this.s},ld.isNegative=ld.isNeg=function(){return this.s<0},ld.isPositive=ld.isPos=function(){return this.s>0},ld.isZero=function(){return!!this.d&&0===this.d[0]},ld.lessThan=ld.lt=function(e){return this.cmp(e)<0},ld.lessThanOrEqualTo=ld.lte=function(e){return this.cmp(e)<1},ld.logarithm=ld.log=function(e){var t,n,r,i,a,o,s,l,u=this,c=u.constructor,d=c.precision,p=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(t)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=1!==i}if(Wc=!1,o=Cd(u,s=d+5),r=t?vd(c,s+10):Cd(e,s),dd((l=hd(o,r,s,1)).d,i=d,p))do{if(o=Cd(u,s+=10),r=t?vd(c,s+10):Cd(e,s),l=hd(o,r,s,1),!a){+ud(l.d).slice(i+1,i+15)+1==1e14&&(l=fd(l,d+1,0));break}}while(dd(l.d,i+=10,p));return Wc=!0,fd(l,d,p)},ld.minus=ld.sub=function(e){var t,n,r,i,a,o,s,l,u,c,d,p,h=this,f=h.constructor;if(e=new f(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new f(e.d||h.s!==e.s?h:NaN):e=new f(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(u=h.d,p=e.d,s=f.precision,l=f.rounding,!u[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!u[0])return new f(3===l?-0:0);e=new f(h)}return Wc?fd(e,s,l):e}if(n=Qc(e.e/7),c=Qc(h.e/7),u=u.slice(),a=c-n){for((d=a<0)?(t=u,a=-a,o=p.length):(t=p,n=c,o=u.length),a>(r=Math.max(Math.ceil(s/7),o)+2)&&(a=r,t.length=1),t.reverse(),r=a;r--;)t.push(0);t.reverse()}else{for((d=(r=u.length)<(o=p.length))&&(o=r),r=0;r<o;r++)if(u[r]!=p[r]){d=u[r]<p[r];break}a=0}for(d&&(t=u,u=p,p=t,e.s=-e.s),o=u.length,r=p.length-o;r>0;--r)u[o++]=0;for(r=p.length;r>a;){if(u[--r]<p[r]){for(i=r;i&&0===u[--i];)u[i]=ad-1;--u[i],u[r]+=ad}u[r]-=p[r]}for(;0===u[--o];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=gd(u,n),Wc?fd(e,s,l):e):new f(3===l?-0:0)},ld.modulo=ld.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?fd(new r(n),r.precision,r.rounding):(Wc=!1,9==r.modulo?(t=hd(n,e.abs(),0,3,1)).s*=e.s:t=hd(n,e,0,r.modulo,1),t=t.times(e),Wc=!0,n.minus(t))},ld.naturalExponential=ld.exp=function(){return Sd(this)},ld.naturalLogarithm=ld.ln=function(){return Cd(this)},ld.negated=ld.neg=function(){var e=new this.constructor(this);return e.s=-e.s,fd(e)},ld.plus=ld.add=function(e){var t,n,r,i,a,o,s,l,u,c,d=this,p=d.constructor;if(e=new p(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new p(e.d||d.s===e.s?d:NaN)):e=new p(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(u=d.d,c=e.d,s=p.precision,l=p.rounding,!u[0]||!c[0])return c[0]||(e=new p(d)),Wc?fd(e,s,l):e;if(a=Qc(d.e/7),r=Qc(e.e/7),u=u.slice(),i=a-r){for(i<0?(n=u,i=-i,o=c.length):(n=c,r=a,o=u.length),i>(o=(a=Math.ceil(s/7))>o?a+1:o+1)&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((o=u.length)-(i=c.length)<0&&(i=o,n=c,c=u,u=n),t=0;i;)t=(u[--i]=u[i]+c[i]+t)/ad|0,u[i]%=ad;for(t&&(u.unshift(t),++r),o=u.length;0==u[--o];)u.pop();return e.d=u,e.e=gd(u,r),Wc?fd(e,s,l):e},ld.precision=ld.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Zc+e);return n.d?(t=bd(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},ld.round=function(){var e=this,t=e.constructor;return fd(new t(e),e.e+1,t.rounding)},ld.sine=ld.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:Nd(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/Md(5,n)),t=Nd(e,2,t,t);for(var i,a=new e(5),o=new e(16),s=new e(20);n--;)i=t.times(t),t=t.times(a.plus(i.times(o.times(i).minus(s))));return t}(r,Fd(r,n)),r.precision=e,r.rounding=t,fd(qc>2?n.neg():n,e,t,!0)):new r(NaN)},ld.squareRoot=ld.sqrt=function(){var e,t,n,r,i,a,o=this,s=o.d,l=o.e,u=o.s,c=o.constructor;if(1!==u||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?o:1/0);for(Wc=!1,0==(u=Math.sqrt(+o))||u==1/0?(((t=ud(s)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=Qc((l+1)/2)-(l<0||l%2),r=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(r=(a=r).plus(hd(o,a,n+2,1)).times(.5),ud(a.d).slice(0,n)===(t=ud(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(fd(r,l+1,1),e=!r.times(r).eq(o));break}if(!i&&(fd(a,l+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}return Wc=!0,fd(r,l,c.rounding,e)},ld.tangent=ld.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=hd(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,fd(2==qc||4==qc?n.neg():n,e,t,!0)):new r(NaN)},ld.times=ld.mul=function(e){var t,n,r,i,a,o,s,l,u,c=this,d=c.constructor,p=c.d,h=(e=new d(e)).d;if(e.s*=c.s,!p||!p[0]||!h||!h[0])return new d(!e.s||p&&!p[0]&&!h||h&&!h[0]&&!p?NaN:p&&h?0*e.s:e.s/0);for(n=Qc(c.e/7)+Qc(e.e/7),(l=p.length)<(u=h.length)&&(a=p,p=h,h=a,o=l,l=u,u=o),a=[],r=o=l+u;r--;)a.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)s=a[i]+h[r]*p[i-r-1]+t,a[i--]=s%ad|0,t=s/ad|0;a[i]=(a[i]+t)%ad|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=gd(a,n),Wc?fd(e,d.precision,d.rounding):e},ld.toBinary=function(e,t){return Td(this,2,e,t)},ld.toDecimalPlaces=ld.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(cd(e,0,Kc),void 0===t?t=r.rounding:cd(t,0,8),fd(n,e+n.e+1,t))},ld.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=md(r,!0):(cd(e,0,Kc),void 0===t?t=i.rounding:cd(t,0,8),n=md(r=fd(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},ld.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?n=md(i):(cd(e,0,Kc),void 0===t?t=a.rounding:cd(t,0,8),n=md(r=fd(new a(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},ld.toFraction=function(e){var t,n,r,i,a,o,s,l,u,c,d,p,h=this,f=h.d,m=h.constructor;if(!f)return new m(h);if(u=n=new m(1),r=l=new m(0),o=(a=(t=new m(r)).e=bd(f)-h.e-1)%7,t.d[0]=ed(10,o<0?7+o:o),null==e)e=a>0?t:u;else{if(!(s=new m(e)).isInt()||s.lt(u))throw Error(Zc+s);e=s.gt(t)?a>0?t:u:s}for(Wc=!1,s=new m(ud(f)),c=m.precision,m.precision=a=7*f.length*2;d=hd(s,t,0,1,1),1!=(i=n.plus(d.times(r))).cmp(e);)n=r,r=i,i=u,u=l.plus(d.times(i)),l=i,i=t,t=s.minus(d.times(i)),s=i;return i=hd(e.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=h.s,p=hd(u,r,a,1).minus(h).abs().cmp(hd(l,n,a,1).minus(h).abs())<1?[u,r]:[l,n],m.precision=c,Wc=!0,p},ld.toHexadecimal=ld.toHex=function(e,t){return Td(this,16,e,t)},ld.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:cd(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Wc=!1,n=hd(n,e,0,t,1).times(e),Wc=!0,fd(n)):(e.s=n.s,n=e),n},ld.toNumber=function(){return+this},ld.toOctal=function(e,t){return Td(this,8,e,t)},ld.toPower=ld.pow=function(e){var t,n,r,i,a,o,s=this,l=s.constructor,u=+(e=new l(e));if(!s.d||!e.d||!s.d[0]||!e.d[0])return new l(ed(+s,u));if((s=new l(s)).eq(1))return s;if(r=l.precision,a=l.rounding,e.eq(1))return fd(s,r,a);if((t=Qc(e.e/7))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=Dd(l,s,n,r),e.s<0?new l(1).div(i):fd(i,r,a);if((o=s.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(o=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=o,s}return(t=0!=(n=ed(+s,u))&&isFinite(n)?new l(n+"").e:Qc(u*(Math.log("0."+ud(s.d))/Math.LN10+s.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(Wc=!1,l.rounding=s.s=1,n=Math.min(12,(t+"").length),(i=Sd(e.times(Cd(s,r+n)),r)).d&&dd((i=fd(i,r+5,1)).d,r,a)&&(t=r+10,+ud((i=fd(Sd(e.times(Cd(s,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=fd(i,r+1,0))),i.s=o,Wc=!0,l.rounding=a,fd(i,r,a))},ld.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=md(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(cd(e,1,Kc),void 0===t?t=i.rounding:cd(t,0,8),n=md(r=fd(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},ld.toSignificantDigits=ld.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(cd(e,1,Kc),void 0===t?t=n.rounding:cd(t,0,8)),fd(new n(this),e,t)},ld.toString=function(){var e=this,t=e.constructor,n=md(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},ld.truncated=ld.trunc=function(){return fd(new this.constructor(this),this.e+1,1)},ld.valueOf=ld.toJSON=function(){var e=this,t=e.constructor,n=md(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var hd=function(){function e(e,t,n){var r,i=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+i,e[a]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,o,s,l){var u,c,d,p,h,f,m,g,v,y,b,x,D,w,_,S,C,E,k,A,N=r.constructor,M=r.s==i.s?1:-1,F=r.d,T=i.d;if(!F||!F[0]||!T||!T[0])return new N(r.s&&i.s&&(F?!T||F[0]!=T[0]:T)?F&&0==F[0]||!T?0*M:M/0:NaN);for(l?(h=1,c=r.e-i.e):(l=ad,h=7,c=Qc(r.e/h)-Qc(i.e/h)),k=T.length,C=F.length,y=(v=new N(M)).d=[],d=0;T[d]==(F[d]||0);d++);if(T[d]>(F[d]||0)&&c--,null==a?(w=a=N.precision,o=N.rounding):w=s?a+(r.e-i.e)+1:a,w<0)y.push(1),f=!0;else{if(w=w/h+2|0,d=0,1==k){for(p=0,T=T[0],w++;(d<C||p)&&w--;d++)_=p*l+(F[d]||0),y[d]=_/T|0,p=_%T|0;f=p||d<C}else{for((p=l/(T[0]+1)|0)>1&&(T=e(T,p,l),F=e(F,p,l),k=T.length,C=F.length),S=k,x=(b=F.slice(0,k)).length;x<k;)b[x++]=0;(A=T.slice()).unshift(0),E=T[0],T[1]>=l/2&&++E;do{p=0,(u=t(T,b,k,x))<0?(D=b[0],k!=x&&(D=D*l+(b[1]||0)),(p=D/E|0)>1?(p>=l&&(p=l-1),1==(u=t(m=e(T,p,l),b,g=m.length,x=b.length))&&(p--,n(m,k<g?A:T,g,l))):(0==p&&(u=p=1),m=T.slice()),(g=m.length)<x&&m.unshift(0),n(b,m,x,l),-1==u&&(u=t(T,b,k,x=b.length))<1&&(p++,n(b,k<x?A:T,x,l)),x=b.length):0===u&&(p++,b=[0]),y[d++]=p,u&&b[0]?b[x++]=F[S]||0:(b=[F[S]],x=1)}while((S++<C||void 0!==b[0])&&w--);f=void 0!==b[0]}y[0]||y.shift()}if(1==h)v.e=c,Pc=f;else{for(d=1,p=y[0];p>=10;p/=10)d++;v.e=d+c*h-1,fd(v,s?a+v.e+1:a,o,f)}return v}}();function fd(e,t,n,r){var i,a,o,s,l,u,c,d,p,h=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(i=1,s=d[0];s>=10;s/=10)i++;if((a=t-i)<0)a+=7,o=t,l=(c=d[p=0])/ed(10,i-o-1)%10|0;else if((p=Math.ceil((a+1)/7))>=(s=d.length)){if(!r)break e;for(;s++<=p;)d.push(0);c=l=0,i=1,o=(a%=7)-7+1}else{for(c=s=d[p],i=1;s>=10;s/=10)i++;l=(o=(a%=7)-7+i)<0?0:c/ed(10,i-o-1)%10|0}if(r=r||t<0||void 0!==d[p+1]||(o<0?c:c%ed(10,i-o-1)),u=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(a>0?o>0?c/ed(10,i-o):0:d[p-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=ed(10,(7-t%7)%7),e.e=-t||0):d[0]=e.e=0,e;if(0==a?(d.length=p,s=1,p--):(d.length=p+1,s=ed(10,7-a),d[p]=o>0?(c/ed(10,i-o)%ed(10,o)|0)*s:0),u)for(;;){if(0==p){for(a=1,o=d[0];o>=10;o/=10)a++;for(o=d[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(e.e++,d[0]==ad&&(d[0]=1));break}if(d[p]+=s,d[p]!=ad)break;d[p--]=0,s=1}for(a=d.length;0===d[--a];)d.pop()}return Wc&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function md(e,t,n){if(!e.isFinite())return Ed(e);var r,i=e.e,a=ud(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+xd(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+xd(-i-1)+a,n&&(r=n-o)>0&&(a+=xd(r))):i>=o?(a+=xd(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+xd(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=xd(r))),a}function gd(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function vd(e,t,n){if(t>od)throw Wc=!0,n&&(e.precision=n),Error(Jc);return fd(new e(Uc),t,1,!0)}function yd(e,t,n){if(t>sd)throw Error(Jc);return fd(new e($c),t,n,!0)}function bd(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function xd(e){for(var t="";e--;)t+="0";return t}function Dd(e,t,n,r){var i,a=new e(1),o=Math.ceil(r/7+4);for(Wc=!1;;){if(n%2&&Bd((a=a.times(t)).d,o)&&(i=!0),0===(n=Qc(n/2))){n=a.d.length-1,i&&0===a.d[n]&&++a.d[n];break}Bd((t=t.times(t)).d,o)}return Wc=!0,a}function wd(e){return 1&e.d[e.d.length-1]}function _d(e,t,n){for(var r,i=new e(t[0]),a=0;++a<t.length;){if(!(r=new e(t[a])).s){i=r;break}i[n](r)&&(i=r)}return i}function Sd(e,t){var n,r,i,a,o,s,l,u=0,c=0,d=0,p=e.constructor,h=p.rounding,f=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(Wc=!1,l=f):l=t,s=new p(.03125);e.e>-2;)e=e.times(s),d+=5;for(l+=r=Math.log(ed(2,d))/Math.LN10*2+5|0,n=a=o=new p(1),p.precision=l;;){if(a=fd(a.times(e),l,1),n=n.times(++c),ud((s=o.plus(hd(a,n,l,1))).d).slice(0,l)===ud(o.d).slice(0,l)){for(i=d;i--;)o=fd(o.times(o),l,1);if(null!=t)return p.precision=f,o;if(!(u<3&&dd(o.d,l-r,h,u)))return fd(o,p.precision=f,h,Wc=!0);p.precision=l+=10,n=a=s=new p(1),c=0,u++}o=s}}function Cd(e,t){var n,r,i,a,o,s,l,u,c,d,p,h=1,f=e,m=f.d,g=f.constructor,v=g.rounding,y=g.precision;if(f.s<0||!m||!m[0]||!f.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=f.s?NaN:m?0:f);if(null==t?(Wc=!1,c=y):c=t,g.precision=c+=10,r=(n=ud(m)).charAt(0),!(Math.abs(a=f.e)<15e14))return u=vd(g,c+2,y).times(a+""),f=Cd(new g(r+"."+n.slice(1)),c-10).plus(u),g.precision=y,null==t?fd(f,y,v,Wc=!0):f;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=ud((f=f.times(e)).d)).charAt(0),h++;for(a=f.e,r>1?(f=new g("0."+n),a++):f=new g(r+"."+n.slice(1)),d=f,l=o=f=hd(f.minus(1),f.plus(1),c,1),p=fd(f.times(f),c,1),i=3;;){if(o=fd(o.times(p),c,1),ud((u=l.plus(hd(o,new g(i),c,1))).d).slice(0,c)===ud(l.d).slice(0,c)){if(l=l.times(2),0!==a&&(l=l.plus(vd(g,c+2,y).times(a+""))),l=hd(l,new g(h),c,1),null!=t)return g.precision=y,l;if(!dd(l.d,c-10,v,s))return fd(l,g.precision=y,v,Wc=!0);g.precision=c+=10,u=o=f=hd(d.minus(1),d.plus(1),c,1),p=fd(f.times(f),c,1),i=s=1}l=u,i+=2}}function Ed(e){return String(e.s*e.s/0)}function kd(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Wc&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Ad(e,t){var n,r,i,a,o,s,l,u,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),id.test(t))return kd(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(nd.test(t))n=16,t=t.toLowerCase();else if(td.test(t))n=2;else{if(!rd.test(t))throw Error(Zc+t);n=8}for((a=t.search(/p/i))>0?(l=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),o=(a=t.indexOf("."))>=0,r=e.constructor,o&&(a=(s=(t=t.replace(".","")).length)-a,i=Dd(r,new r(n),a,2*a)),a=c=(u=pd(t,n,ad)).length-1;0===u[a];--a)u.pop();return a<0?new r(0*e.s):(e.e=gd(u,c),e.d=u,Wc=!1,o&&(e=hd(e,i,4*s)),l&&(e=e.times(Math.abs(l)<54?ed(2,l):xp.pow(2,l))),Wc=!0,e)}function Nd(e,t,n,r,i){var a,o,s,l,u=e.precision,c=Math.ceil(u/7);for(Wc=!1,l=n.times(n),s=new e(r);;){if(o=hd(s.times(l),new e(t++*t++),u,1),s=i?r.plus(o):r.minus(o),r=hd(o.times(l),new e(t++*t++),u,1),void 0!==(o=s.plus(r)).d[c]){for(a=c;o.d[a]===s.d[a]&&a--;);if(-1==a)break}a=s,s=r,r=o,o=a}return Wc=!0,o.d.length=c+1,o}function Md(e,t){for(var n=e;--t;)n*=e;return n}function Fd(e,t){var n,r=t.s<0,i=yd(e,e.precision,1),a=i.times(.5);if((t=t.abs()).lte(a))return qc=r?4:1,t;if((n=t.divToInt(i)).isZero())qc=r?3:2;else{if((t=t.minus(n.times(i))).lte(a))return qc=wd(n)?r?2:3:r?4:1,t;qc=wd(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Td(e,t,n,r){var i,a,o,s,l,u,c,d,p,h=e.constructor,f=void 0!==n;if(f?(cd(n,1,Kc),void 0===r?r=h.rounding:cd(r,0,8)):(n=h.precision,r=h.rounding),e.isFinite()){for(f?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(c=md(e)).indexOf("."))>=0&&(c=c.replace(".",""),(p=new h(1)).e=c.length-o,p.d=pd(md(p),10,i),p.e=p.d.length),a=l=(d=pd(c,10,i)).length;0==d[--l];)d.pop();if(d[0]){if(o<0?a--:((e=new h(e)).d=d,e.e=a,d=(e=hd(e,p,n,r,0,i)).d,a=e.e,u=Pc),o=d[n],s=i/2,u=u||void 0!==d[n+1],u=r<4?(void 0!==o||u)&&(0===r||r===(e.s<0?3:2)):o>s||o===s&&(4===r||u||6===r&&1&d[n-1]||r===(e.s<0?8:7)),d.length=n,u)for(;++d[--n]>i-1;)d[n]=0,n||(++a,d.unshift(1));for(l=d.length;!d[l-1];--l);for(o=0,c="";o<l;o++)c+=Vc.charAt(d[o]);if(f){if(l>1)if(16==t||8==t){for(o=16==t?4:3,--l;l%o;l++)c+="0";for(l=(d=pd(c,i,t)).length;!d[l-1];--l);for(o=1,c="1.";o<l;o++)c+=Vc.charAt(d[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}else c=f?"0p+0":"0";c=(16==t?"0x":2==t?"0b":8==t?"0o":"")+c}else c=Ed(e);return e.s<0?"-"+c:c}function Bd(e,t){if(e.length>t)return e.length=t,!0}function Ld(e){return new this(e).abs()}function Od(e){return new this(e).acos()}function zd(e){return new this(e).acosh()}function Id(e,t){return new this(e).plus(t)}function Pd(e){return new this(e).asin()}function qd(e){return new this(e).asinh()}function Rd(e){return new this(e).atan()}function jd(e){return new this(e).atanh()}function Kd(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,a=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?yd(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=yd(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,n=this.atan(hd(e,t,a,1)),t=yd(this,a,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(hd(e,t,a,1)):(n=yd(this,a,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function Vd(e){return new this(e).cbrt()}function Ud(e){return fd(e=new this(e),e.e+1,2)}function $d(e,t,n){return new this(e).clamp(t,n)}function Hd(e){if(!e||"object"!==typeof e)throw Error(Gc+"Object expected");var t,n,r,i=!0===e.defaults,a=["precision",1,Kc,"rounding",0,8,"toExpNeg",-jc,0,"toExpPos",0,jc,"maxE",0,jc,"minE",-jc,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(n=a[t],i&&(this[n]=Hc[n]),void 0!==(r=e[n])){if(!(Qc(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(Zc+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=Hc[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(Zc+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Xc);this[n]=!0}else this[n]=!1}return this}function Wd(e){return new this(e).cos()}function Gd(e){return new this(e).cosh()}function Zd(e,t){return new this(e).div(t)}function Jd(e){return new this(e).exp()}function Xd(e){return fd(e=new this(e),e.e+1,3)}function Yd(){var e,t,n=new this(0);for(Wc=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Wc=!0,new this(1/0);n=t}return Wc=!0,n.sqrt()}function Qd(e){return e instanceof xp||e&&e.toStringTag===Yc||!1}function ep(e){return new this(e).ln()}function tp(e,t){return new this(e).log(t)}function np(e){return new this(e).log(2)}function rp(e){return new this(e).log(10)}function ip(){return _d(this,arguments,"lt")}function ap(){return _d(this,arguments,"gt")}function op(e,t){return new this(e).mod(t)}function sp(e,t){return new this(e).mul(t)}function lp(e,t){return new this(e).pow(t)}function up(e){var t,n,r,i,a=0,o=new this(1),s=[];if(void 0===e?e=this.precision:cd(e,1,Kc),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));a<r;)(i=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else{if(!crypto.randomBytes)throw Error(Xc);for(t=crypto.randomBytes(r*=4);a<r;)(i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(s.push(i%1e7),a+=4);a=r/4}else for(;a<r;)s[a++]=1e7*Math.random()|0;for(e%=7,(r=s[--a])&&e&&(i=ed(10,7-e),s[a]=(r/i|0)*i);0===s[a];a--)s.pop();if(a<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=s,o}function cp(e){return fd(e=new this(e),e.e+1,this.rounding)}function dp(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function pp(e){return new this(e).sin()}function hp(e){return new this(e).sinh()}function fp(e){return new this(e).sqrt()}function mp(e,t){return new this(e).sub(t)}function gp(){var e=0,t=arguments,n=new this(t[e]);for(Wc=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Wc=!0,fd(n,this.precision,this.rounding)}function vp(e){return new this(e).tan()}function yp(e){return new this(e).tanh()}function bp(e){return fd(e=new this(e),e.e+1,1)}ld[Symbol.for("nodejs.util.inspect.custom")]=ld.toString,ld[Symbol.toStringTag]="Decimal";var xp=ld.constructor=function e(t){var n,r,i;function a(e){var t,n,r,i=this;if(!(i instanceof a))return new a(e);if(i.constructor=a,Qd(e))return i.s=e.s,void(Wc?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(Wc?t>a.maxE?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!==0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):kd(i,e.toString())}if("string"!==r)throw Error(Zc+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),id.test(e)?kd(i,e):Ad(i,e)}if(a.prototype=ld,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=Hd,a.clone=e,a.isDecimal=Qd,a.abs=Ld,a.acos=Od,a.acosh=zd,a.add=Id,a.asin=Pd,a.asinh=qd,a.atan=Rd,a.atanh=jd,a.atan2=Kd,a.cbrt=Vd,a.ceil=Ud,a.clamp=$d,a.cos=Wd,a.cosh=Gd,a.div=Zd,a.exp=Jd,a.floor=Xd,a.hypot=Yd,a.ln=ep,a.log=tp,a.log10=rp,a.log2=np,a.max=ip,a.min=ap,a.mod=op,a.mul=sp,a.pow=lp,a.random=up,a.round=cp,a.sign=dp,a.sin=pp,a.sinh=hp,a.sqrt=fp,a.sub=mp,a.sum=gp,a.tan=vp,a.tanh=yp,a.trunc=bp,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(Hc);Uc=new xp(Uc),$c=new xp($c);const Dp=xp;var wp=zu("BigNumber",["?on","config"],(e=>{var{on:t,config:n}=e,r=Dp.clone({precision:n.precision,modulo:Dp.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(e){return new r(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&r.config({precision:e.precision})})),r}),{isClass:!0});const _p=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:.5*(Math.exp(e)+Math.exp(-e))},Sp=Math.sinh||function(e){return Math.abs(e)<1e-9?e:.5*(Math.exp(e)-Math.exp(-e))},Cp=function(e,t){return(e=Math.abs(e))<(t=Math.abs(t))&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},Ep=function(){throw SyntaxError("Invalid Param")};function kp(e,t){const n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):(e*=.5,t*=.5,.5*Math.log(e*e+t*t)+Math.LN2)}const Ap={re:0,im:0},Np=function(e,t){const n=Ap;if(void 0===e||null===e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return Mp.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return Mp.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):Ep();break;case"string":n.im=n.re=0;const t=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let r=1,i=0;null===t&&Ep();for(let e=0;e<t.length;e++){const a=t[e];" "===a||"\t"===a||"\n"===a||("+"===a?r++:"-"===a?i++:"i"===a||"I"===a?(r+i===0&&Ep()," "===t[e+1]||isNaN(t[e+1])?n.im+=parseFloat((i%2?"-":"")+"1"):(n.im+=parseFloat((i%2?"-":"")+t[e+1]),e++),r=i=0):((r+i===0||isNaN(a))&&Ep(),"i"===t[e+1]||"I"===t[e+1]?(n.im+=parseFloat((i%2?"-":"")+a),e++):n.re+=parseFloat((i%2?"-":"")+a),r=i=0))}r+i>0&&Ep();break;case"number":n.im=0,n.re=e;break;default:Ep()}return isNaN(n.re)||isNaN(n.im),n};function Mp(e,t){if(!(this instanceof Mp))return new Mp(e,t);const n=Np(e,t);this.re=n.re,this.im=n.im}Mp.prototype={re:0,im:0,sign:function(){const e=Cp(this.re,this.im);return new Mp(this.re/e,this.im/e)},add:function(e,t){const n=Np(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Mp.NAN:Mp.INFINITY:new Mp(this.re+n.re,this.im+n.im)},sub:function(e,t){const n=Np(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Mp.NAN:Mp.INFINITY:new Mp(this.re-n.re,this.im-n.im)},mul:function(e,t){const n=Np(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=0===this.re&&0===this.im,o=0===n.re&&0===n.im;return r&&o||i&&a?Mp.NAN:r||i?Mp.INFINITY:0===n.im&&0===this.im?new Mp(this.re*n.re,0):new Mp(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){const n=Np(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=0===this.re&&0===this.im,o=0===n.re&&0===n.im;if(a&&o||r&&i)return Mp.NAN;if(o||r)return Mp.INFINITY;if(a||i)return Mp.ZERO;if(0===n.im)return new Mp(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const e=n.re/n.im,t=n.re*e+n.im;return new Mp((this.re*e+this.im)/t,(this.im*e-this.re)/t)}{const e=n.im/n.re,t=n.im*e+n.re;return new Mp((this.re+this.im*e)/t,(this.im-this.re*e)/t)}},pow:function(e,t){const n=Np(e,t),r=0===this.re&&0===this.im;if(0===n.re&&0===n.im)return Mp.ONE;if(0===n.im){if(0===this.im&&this.re>0)return new Mp(Math.pow(this.re,n.re),0);if(0===this.re)switch((n.re%4+4)%4){case 0:return new Mp(Math.pow(this.im,n.re),0);case 1:return new Mp(0,Math.pow(this.im,n.re));case 2:return new Mp(-Math.pow(this.im,n.re),0);case 3:return new Mp(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return Mp.ZERO;const i=Math.atan2(this.im,this.re),a=kp(this.re,this.im);let o=Math.exp(n.re*a-n.im*i),s=n.im*a+n.re*i;return new Mp(o*Math.cos(s),o*Math.sin(s))},sqrt:function(){const e=this.re,t=this.im;if(0===t)return e>=0?new Mp(Math.sqrt(e),0):new Mp(0,Math.sqrt(-e));const n=Cp(e,t);let r=Math.sqrt(.5*(n+Math.abs(e))),i=Math.abs(t)/(2*r);return e>=0?new Mp(r,t<0?-i:i):new Mp(i,t<0?-r:r)},exp:function(){const e=Math.exp(this.re);return 0===this.im?new Mp(e,0):new Mp(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new Mp(Math.expm1(e)*Math.cos(t)+function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return 0===t&&e>0?new Mp(Math.log(e),0):new Mp(kp(e,t),Math.atan2(t,e))},abs:function(){return Cp(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new Mp(Math.sin(e)*_p(t),Math.cos(e)*Sp(t))},cos:function(){const e=this.re,t=this.im;return new Mp(Math.cos(e)*_p(t),-Math.sin(e)*Sp(t))},tan:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)+_p(t);return new Mp(Math.sin(e)/n,Sp(t)/n)},cot:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)-_p(t);return new Mp(-Math.sin(e)/n,Sp(t)/n)},sec:function(){const e=this.re,t=this.im,n=.5*_p(2*t)+.5*Math.cos(2*e);return new Mp(Math.cos(e)*_p(t)/n,Math.sin(e)*Sp(t)/n)},csc:function(){const e=this.re,t=this.im,n=.5*_p(2*t)-.5*Math.cos(2*e);return new Mp(Math.sin(e)*_p(t)/n,-Math.cos(e)*Sp(t)/n)},asin:function(){const e=this.re,t=this.im,n=new Mp(t*t-e*e+1,-2*e*t).sqrt(),r=new Mp(n.re-t,n.im+e).log();return new Mp(r.im,-r.re)},acos:function(){const e=this.re,t=this.im,n=new Mp(t*t-e*e+1,-2*e*t).sqrt(),r=new Mp(n.re-t,n.im+e).log();return new Mp(Math.PI/2-r.im,r.re)},atan:function(){const e=this.re,t=this.im;if(0===e){if(1===t)return new Mp(0,1/0);if(-1===t)return new Mp(0,-1/0)}const n=e*e+(1-t)*(1-t),r=new Mp((1-t*t-e*e)/n,-2*e/n).log();return new Mp(-.5*r.im,.5*r.re)},acot:function(){const e=this.re,t=this.im;if(0===t)return new Mp(Math.atan2(1,e),0);const n=e*e+t*t;return 0!==n?new Mp(e/n,-t/n).atan():new Mp(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(0===e&&0===t)return new Mp(0,1/0);const n=e*e+t*t;return 0!==n?new Mp(e/n,-t/n).acos():new Mp(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(0===e&&0===t)return new Mp(Math.PI/2,1/0);const n=e*e+t*t;return 0!==n?new Mp(e/n,-t/n).asin():new Mp(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new Mp(Sp(e)*Math.cos(t),_p(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new Mp(_p(e)*Math.cos(t),Sp(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,n=_p(e)+Math.cos(t);return new Mp(Sp(e)/n,Math.sin(t)/n)},coth:function(){const e=2*this.re,t=2*this.im,n=_p(e)-Math.cos(t);return new Mp(Sp(e)/n,-Math.sin(t)/n)},csch:function(){const e=this.re,t=this.im,n=Math.cos(2*t)-_p(2*e);return new Mp(-2*Sp(e)*Math.cos(t)/n,2*_p(e)*Math.sin(t)/n)},sech:function(){const e=this.re,t=this.im,n=Math.cos(2*t)+_p(2*e);return new Mp(2*_p(e)*Math.cos(t)/n,-2*Sp(e)*Math.sin(t)/n)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,n=e>1&&0===t,r=1-e,i=1+e,a=r*r+t*t,o=0!==a?new Mp((i*r-t*t)/a,(t*r+i*t)/a):new Mp(-1!==e?e/0:0,0!==t?t/0:0),s=o.re;return o.re=kp(o.re,o.im)/2,o.im=Math.atan2(o.im,s)/2,n&&(o.im=-o.im),o},acoth:function(){const e=this.re,t=this.im;if(0===e&&0===t)return new Mp(0,Math.PI/2);const n=e*e+t*t;return 0!==n?new Mp(e/n,-t/n).atanh():new Mp(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(0===t)return new Mp(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const n=e*e+t*t;return 0!==n?new Mp(e/n,-t/n).asinh():new Mp(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return Mp.INFINITY;const n=e*e+t*t;return 0!==n?new Mp(e/n,-t/n).acosh():new Mp(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return Mp.INFINITY;if(this.isInfinite())return Mp.ZERO;const e=this.re,t=this.im,n=e*e+t*t;return new Mp(e/n,-t/n)},conjugate:function(){return new Mp(this.re,-this.im)},neg:function(){return new Mp(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new Mp(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new Mp(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new Mp(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const n=Np(e,t);return Math.abs(n.re-this.re)<=Mp.EPSILON&&Math.abs(n.im-this.im)<=Mp.EPSILON},clone:function(){return new Mp(this.re,this.im)},toString:function(){let e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<Mp.EPSILON&&(e=0),Math.abs(t)<Mp.EPSILON&&(t=0),0===t?n+e:(0!==e?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),1!==t&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}},Mp.ZERO=new Mp(0,0),Mp.ONE=new Mp(1,0),Mp.I=new Mp(0,1),Mp.PI=new Mp(Math.PI,0),Mp.E=new Mp(Math.E,0),Mp.INFINITY=new Mp(1/0,1/0),Mp.NAN=new Mp(NaN,NaN),Mp.EPSILON=1e-15;var Fp=zu("Complex",[],(()=>(Object.defineProperty(Mp,"name",{value:"Complex"}),Mp.prototype.constructor=Mp,Mp.prototype.type="Complex",Mp.prototype.isComplex=!0,Mp.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Mp.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Mp.prototype.format=function(e){var t=this.im,n=this.re,r=rc(this.re,e),i=rc(this.im,e),a=ql(e)?e:e?e.precision:null;if(null!==a){var o=Math.pow(10,-a);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return 0===t?r:0===n?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?r+" - i":r+" - "+i.substring(1)+"i":1===t?r+" + i":r+" + "+i+"i"},Mp.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"===typeof t)return Mp(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(ql(n)){if(Vl(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),ql(r))return new Mp({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Mp.prototype.valueOf=Mp.prototype.toString,Mp.fromJSON=function(e){return new Mp(e)},Mp.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Mp)),{isClass:!0}),Tp=n(937),Bp=zu("Fraction",[],(()=>(Object.defineProperty(Tp,"name",{value:"Fraction"}),Tp.prototype.constructor=Tp,Tp.prototype.type="Fraction",Tp.prototype.isFraction=!0,Tp.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Tp.fromJSON=function(e){return new Tp(e)},Tp)),{isClass:!0}),Lp=zu("Range",[],(()=>{function e(t,n,r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");var i=null!==t&&void 0!==t,a=null!==n&&void 0!==n,o=null!==r&&void 0!==r;if(i)if(Rl(t))t=t.toNumber();else if("number"!==typeof t)throw new TypeError("Parameter start must be a number");if(a)if(Rl(n))n=n.toNumber();else if("number"!==typeof n)throw new TypeError("Parameter end must be a number");if(o)if(Rl(r))r=r.toNumber();else if("number"!==typeof r)throw new TypeError("Parameter step must be a number");this.start=i?parseFloat(t):0,this.end=a?parseFloat(n):0,this.step=o?parseFloat(r):1}return e.prototype.type="Range",e.prototype.isRange=!0,e.parse=function(t){if("string"!==typeof t)return null;var n=t.split(":").map((function(e){return parseFloat(e)}));if(n.some((function(e){return isNaN(e)})))return null;switch(n.length){case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[2],n[1]);default:return null}},e.prototype.clone=function(){return new e(this.start,this.end,this.step)},e.prototype.size=function(){var e=0,t=this.start,n=this.step,r=this.end-t;return Ju(n)===Ju(r)?e=Math.ceil(r/n):0===r&&(e=0),isNaN(e)&&(e=0),[e]},e.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},e.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},e.prototype.forEach=function(e){var t=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;t<r;)e(t,[i],this),t+=n,i++;else if(n<0)for(;t>r;)e(t,[i],this),t+=n,i++},e.prototype.map=function(e){var t=[];return this.forEach((function(n,r,i){t[r[0]]=e(n,r,i)})),t},e.prototype.toArray=function(){var e=[];return this.forEach((function(t,n){e[n[0]]=t})),e},e.prototype.valueOf=function(){return this.toArray()},e.prototype.format=function(e){var t=rc(this.start,e);return 1!==this.step&&(t+=":"+rc(this.step,e)),t+=":"+rc(this.end,e)},e.prototype.toString=function(){return this.format()},e.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},e.fromJSON=function(t){return new e(t.start,t.end,t.step)},e}),{isClass:!0}),Op=zu("Matrix",[],(()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e}),{isClass:!0});function zp(e,t,n){var r=new(0,e.constructor)(2),i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Zu(n))throw new Error("size must be an integer");if(e.greaterThan(r.pow(n-1).sub(1))||e.lessThan(r.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(r.pow(n))),i="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(i);case 8:return"".concat(e.toOctal()).concat(i);case 16:return"".concat(e.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(t," not supported "))}}function Ip(e,t){if("function"===typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=ic(t);switch(n){case"fixed":return function(e,t){return e.toFixed(t)}(e,r);case"exponential":return Pp(e,r);case"engineering":return function(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),a=i.toPrecision(t);if(a.includes("e")){a=new(0,e.constructor)(a).toFixed()}return a+"e"+(n>=0?"+":"")+r.toString()}(e,r);case"bin":return zp(e,2,i);case"oct":return zp(e,8,i);case"hex":return zp(e,16,i);case"auto":var a=qp(null===t||void 0===t?void 0:t.lowerExp,-3),o=qp(null===t||void 0===t?void 0:t.upperExp,5);if(e.isZero())return"0";var s=e.toSignificantDigits(r),l=s.e;return(l>=a&&l<o?s.toFixed():Pp(e,r)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Pp(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function qp(e,t){return ql(e)?e:Rl(e)?e.toNumber():t}function Rp(e,t){var n=e.length-t.length,r=e.length;return e.substring(n,r)===t}function jp(e,t){var n=function(e,t){if("number"===typeof e)return rc(e,t);if(Rl(e))return Ip(e,t);if(function(e){return e&&"object"===typeof e&&"number"===typeof e.s&&"number"===typeof e.n&&"number"===typeof e.d||!1}(e))return t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d;if(Array.isArray(e))return $p(e,t);if(Ul(e))return Kp(e);if("function"===typeof e)return e.syntax?String(e.syntax):"function";if(e&&"object"===typeof e){return"function"===typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map((n=>Kp(n)+": "+jp(e[n],t))).join(", ")+"}"}return String(e)}(e,t);return t&&"object"===typeof t&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function Kp(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in Vp?Vp[i]:i,r++}return'"'+n+'"'}var Vp={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function Up(e){var t=String(e);return t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $p(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)0!==i&&(n+=", "),n+=$p(e[i],t);return n+="]"}return jp(e,t)}function Hp(e,t){if(!Ul(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Cu(e)+", index: 0)");if(!Ul(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Cu(t)+", index: 1)");return e===t?0:e>t?1:-1}function Wp(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function Gp(e,t,n){var r,i=e.length;if(i!==t[n])throw new Hu(i,t[n]);if(n<t.length-1){var a=n+1;for(r=0;r<i;r++){var o=e[r];if(!Array.isArray(o))throw new Hu(t.length-1,t.length,"<");Gp(e[r],t,a)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new Hu(t.length+1,t.length,">")}function Zp(e,t){if(0===t.length){if(Array.isArray(e))throw new Hu(e.length,0)}else Gp(e,t,0)}function Jp(e,t){var n=e.isMatrix?e._size:Wp(e);t._sourceSize.forEach(((e,t)=>{if(null!==e&&e!==n[t])throw new Hu(e,n[t])}))}function Xp(e,t){if(void 0!==e){if(!ql(e)||!Zu(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"===typeof t&&e>=t)throw new Wu(e,t)}}function Yp(e){for(var t=0;t<e._dimensions.length;++t){var n=e._dimensions[t];if(n._data&&$l(n._data)){if(0===n._size[0])return!0}else if(n.isRange){if(n.start===n.end)return!0}else if(Ul(n)&&0===n.length)return!0}return!1}function Qp(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!ql(e)||!Zu(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+jp(t)+")")})),(ql(e)||Rl(e))&&(e=[e]),eh(e,t,0,void 0!==n?n:0),e}function eh(e,t,n,r){var i,a,o=e.length,s=t[n],l=Math.min(o,s);if(e.length=s,n<t.length-1){var u=n+1;for(i=0;i<l;i++)a=e[i],Array.isArray(a)||(a=[a],e[i]=a),eh(a,t,u,r);for(i=l;i<s;i++)a=[],e[i]=a,eh(a,t,u,r)}else{for(i=0;i<l;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=l;i<s;i++)e[i]=r}}function th(e,t){var n=lh(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Hu(0,r,"!=");var i=rh(t=nh(t,r));if(r!==i)throw new Hu(i,r,"!=");try{return function(e,t){for(var n,r=e,i=t.length-1;i>0;i--){var a=t[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}(n,t)}catch(kC){if(kC instanceof Hu)throw new Hu(i,r,"!=");throw kC}}function nh(e,t){var n=rh(e),r=e.slice(),i=e.indexOf(-1);if(e.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(!(t%n===0))throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);r[i]=-t/n}return r}function rh(e){return e.reduce(((e,t)=>e*t),1)}function ih(e,t){for(var n=t||Wp(e);Array.isArray(e)&&1===e.length;)e=e[0],n.shift();for(var r=n.length;1===n[r-1];)r--;return r<n.length&&(e=ah(e,r,0),n.length=r),e}function ah(e,t,n){var r,i;if(n<t){var a=n+1;for(r=0,i=e.length;r<i;r++)e[r]=ah(e[r],t,a)}else for(;Array.isArray(e);)e=e[0];return e}function oh(e,t,n,r){var i=r||Wp(e);if(n)for(var a=0;a<n;a++)e=[e],i.unshift(1);for(e=sh(e,t,0);i.length<t;)i.push(1);return e}function sh(e,t,n){var r,i;if(Array.isArray(e)){var a=n+1;for(r=0,i=e.length;r<i;r++)e[r]=sh(e[r],t,a)}else for(var o=n;o<t;o++)e=[e];return e}function lh(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t}function uh(e,t){return Array.prototype.map.call(e,t)}function ch(e,t){Array.prototype.forEach.call(e,t)}function dh(e,t){if(1!==Wp(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,t)}function ph(e,t){if(1!==Wp(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,(e=>t.test(e)))}function hh(e,t){return Array.prototype.join.call(e,t)}function fh(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;var t=[],n=0;t[0]={value:e[0],identifier:0};for(var r=1;r<e.length;r++)e[r]===e[r-1]?n++:n=0,t.push({value:e[r],identifier:n});return t}function mh(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;for(var t=[],n=0;n<e.length;n++)t.push(e[n].value);return t}function gh(e,t){for(var n,r=0,i=0;i<e.length;i++){var a=e[i],o=Array.isArray(a);if(0===i&&o&&(r=a.length),o&&a.length!==r)return;var s=o?gh(a,t):t(a);if(void 0===n)n=s;else if(n!==s)return"mixed"}return n}function vh(e,t,n,r){if(r<n){if(e.length!==t.length)throw new Hu(e.length,t.length);for(var i=[],a=0;a<e.length;a++)i[a]=vh(e[a],t[a],n,r+1);return i}return e.concat(t)}function yh(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(1===e.length)return e[0];if(e.length>1)return e.slice(1).reduce((function(e,n){return vh(e,n,t,0)}),e[0]);throw new Error("Wrong number of arguments in function concat")}function bh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map((e=>e.length)),i=Math.max(...r),a=new Array(i).fill(null),o=0;o<t.length;o++)for(var s=t[o],l=r[o],u=0;u<l;u++){var c=i-l+u;s[u]>a[c]&&(a[c]=s[u])}for(var d=0;d<t.length;d++)xh(t[d],a);return a}function xh(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var a=n-r+i;if(e[i]<t[a]&&e[i]>1||e[i]>t[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[a]))}}function Dh(e,t){var n=Wp(e);if(Mu(n,t))return e;xh(n,t);var r,i,a,o=bh(n,t),s=o.length,l=[...Array(s-n.length).fill(1),...n],u=function(e){return Il([],e)}(e);n.length<s&&(n=Wp(u=th(u,l)));for(var c=0;c<s;c++)n[c]<o[c]&&(r=u,i=o[c],a=c,n=Wp(u=yh(...Array(i).fill(r),a)));return u}function wh(e){var t=0,n=1,r=Object.create(null),i=Object.create(null),a=0,o=function(e){var o=i[e];if(o&&(delete r[o],delete i[e],--t,n===o)){if(!t)return a=0,void(n=1);for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return e=Math.abs(e),{hit:function(s){var l=i[s],u=++a;if(r[u]=s,i[s]=u,!l){if(++t<=e)return;return s=r[n],o(s),s}if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:o,clear:function(){t=a=0,n=1,r=Object.create(null),i=Object.create(null)}}}function _h(e){var{hasher:t,limit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=null==n?Number.POSITIVE_INFINITY:n,t=null==t?JSON.stringify:t,function r(){"object"!==typeof r.cache&&(r.cache={values:new Map,lru:wh(n||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=t(i);if(r.cache.values.has(o))return r.cache.lru.hit(o),r.cache.values.get(o);var s=e.apply(e,i);return r.cache.values.set(o,s),r.cache.values.delete(r.cache.lru.hit(o)),s}}function Sh(e){return Object.keys(e.signatures||{}).reduce((function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)}),-1)}var Ch=zu("DenseMatrix",["Matrix"],(e=>{var{Matrix:t}=e;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Ul(t))throw new Error("Invalid datatype: "+t);if(Hl(e))"DenseMatrix"===e.type?(this._data=Eu(e._data),this._size=Eu(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&$l(e.data)&&$l(e.size))this._data=e.data,this._size=e.size,Zp(this._data,this._size),this._datatype=t||e.datatype;else if($l(e))this._data=s(e),this._size=Wp(this._data),Zp(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+Cu(e)+")");this._data=[],this._size=[0],this._datatype=t}}function r(e,t,n,i){var a=i===n-1,o=t.dimension(i);return a?o.map((function(t){return Xp(t,e.length),e[t]})).valueOf():o.map((function(a){return Xp(a,e.length),r(e[a],t,n,i+1)})).valueOf()}function i(e,t,n,r,a){var o=a===r-1,s=t.dimension(a);o?s.forEach((function(t,r){Xp(t),e[t]=n[r[0]]})):s.forEach((function(o,s){Xp(o),i(e[o],t,n[s[0]],r,a+1)}))}function a(e,t,n){if(0===t.length){for(var r=e._data;$l(r);)r=r[0];return r}return e._size=t.slice(0),e._data=Qp(e._data,e._size,n),e}function o(e,t,n){for(var r=e._size.slice(0),i=!1;r.length<t.length;)r.push(0),i=!0;for(var o=0,s=t.length;o<s;o++)t[o]>r[o]&&(r[o]=t[o],i=!0);i&&a(e,r,n)}function s(e){return Hl(e)?s(e.valueOf()):$l(e)?e.map(s):e}return n.prototype=new t,n.prototype.createDenseMatrix=function(e,t){return new n(e,t)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return gh(this._data,Cu)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,a){switch(arguments.length){case 1:return function(e,t){if(!Xl(t))throw new TypeError("Invalid index");var i=t.isScalar();if(i)return e.get(t.min());var a=t.size();if(a.length!==e._size.length)throw new Hu(a.length,e._size.length);for(var o=t.min(),s=t.max(),l=0,u=e._size.length;l<u;l++)Xp(o[l],e._size[l]),Xp(s[l],e._size[l]);return new n(r(e._data,t,a.length,0),e._datatype)}(this,e);case 2:case 3:return function(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var a,s=t.size(),l=t.isScalar();Hl(n)?(a=n.size(),n=n.valueOf()):a=Wp(n);if(l){if(0!==a.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(!Mu(a,s))try{a=Wp(n=0===a.length?Dh([n],s):Dh(n,s))}catch(f){}if(s.length<e._size.length)throw new Hu(s.length,e._size.length,"<");if(a.length<s.length){for(var u=0,c=0;1===s[u]&&1===a[u];)u++;for(;1===s[u];)c++,u++;n=oh(n,s.length,c,a)}if(!Mu(s,a))throw new Hu(s,a,">");var d=t.max().map((function(e){return e+1}));o(e,d,r);var p=s.length,h=0;i(e._data,t,n,p,h)}return e}(this,e,t,a);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){if(!$l(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Hu(e.length,this._size.length);for(var t=0;t<e.length;t++)Xp(e[t],this._size[t]);for(var n=this._data,r=0,i=e.length;r<i;r++){var a=e[r];Xp(a,n.length),n=n[a]}return n},n.prototype.set=function(e,t,n){if(!$l(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new Hu(e.length,this._size.length,"<");var r,i,a,s=e.map((function(e){return e+1}));o(this,s,n);var l=this._data;for(r=0,i=e.length-1;r<i;r++)Xp(a=e[r],l.length),l=l[a];return Xp(a=e[e.length-1],l.length),l[a]=t,this},n.prototype.resize=function(e,t,n){if(!Wl(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));return a(n?this.clone():this,r,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;n._data=th(n._data,e);var r=n._size.reduce(((e,t)=>e*t));return n._size=nh(e,r),n},n.prototype.clone=function(){return new n({data:Eu(this._data),size:Eu(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(e){var t=this,r=Sh(e),i=function n(i,a){return $l(i)?i.map((function(e,t){return n(e,a.concat(t))})):1===r?e(i):2===r?e(i,a):e(i,a,t)}(this._data,[]);return new n(i,void 0!==this._datatype?gh(i,Cu):void 0)},n.prototype.forEach=function(e){var t=this;!function n(r,i){$l(r)?r.forEach((function(e,t){n(e,i.concat(t))})):e(r,i,t)}(this._data,[])},n.prototype[Symbol.iterator]=function*(){yield*function*e(t,n){if($l(t))for(var r=0;r<t.length;r++)yield*e(t[r],n.concat(r));else yield{value:t,index:n}}(this._data,[])},n.prototype.rows=function(){var e=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var t=this._data;for(var r of t)e.push(new n([r],this._datatype));return e},n.prototype.columns=function(){var e=this,t=[],r=this.size();if(2!==r.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var i=this._data,a=function(r){var a=i.map((e=>[e[r]]));t.push(new n(a,e._datatype))},o=0;o<r[1];o++)a(o);return t},n.prototype.toArray=function(){return Eu(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return jp(this._data,e)},n.prototype.toString=function(){return jp(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if(Rl(e)&&(e=e.toNumber()),!ql(e)||!Zu(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,r=e<0?-e:0,i=this._size[0],a=this._size[1],o=Math.min(i-r,a-t),s=[],l=0;l<o;l++)s[l]=this._data[l+r][l+t];return new n({data:s,size:[o],datatype:this._datatype})},n.diagonal=function(e,t,r,i){if(!$l(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(Rl(e)&&(e=e.toNumber()),!ql(e)||!Zu(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(Rl(r)&&(r=r.toNumber()),!ql(r)||!Zu(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var a,o=r>0?r:0,s=r<0?-r:0,l=e[0],u=e[1],c=Math.min(l-s,u-o);if($l(t)){if(t.length!==c)throw new Error("Invalid value array length");a=function(e){return t[e]}}else if(Hl(t)){var d=t.size();if(1!==d.length||d[0]!==c)throw new Error("Invalid matrix length");a=function(e){return t.get([e])}}else a=function(){return t};i||(i=Rl(a(0))?a(0).mul(0):0);var p=[];if(e.length>0){p=Qp(p,e,i);for(var h=0;h<c;h++)p[h+s][h+o]=a(h)}return new n({data:p,size:[l,u]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!ql(e)||!Zu(e)||!ql(t)||!Zu(t))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Xp(e,this._size[0]),Xp(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},n}),{isClass:!0}),Eh="clone",kh=zu(Eh,["typed"],(e=>{var{typed:t}=e;return t(Eh,{any:Eu})}));function Ah(e){var t,n,r=e.length,i=e[0].length,a=[];for(n=0;n<i;n++){var o=[];for(t=0;t<r;t++)o.push(e[t][n]);a.push(o)}return a}function Nh(e){for(var t=0;t<e.length;t++)if(Wl(e[t]))return!0;return!1}function Mh(e,t){Hl(e)&&(e=e.valueOf());for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?Mh(i,t):t(i)}}function Fh(e,t,n){return e&&"function"===typeof e.map?e.map((function(e){return Fh(e,t,n)})):t(e)}function Th(e,t,n){var r=Array.isArray(e)?Wp(e):e.size();if(t<0||t>=r.length)throw new Wu(t,r.length);return Hl(e)?e.create(Bh(e.valueOf(),t,n)):Bh(e,t,n)}function Bh(e,t,n){var r,i,a,o;if(t<=0){if(Array.isArray(e[0])){for(o=Ah(e),i=[],r=0;r<o.length;r++)i[r]=Bh(o[r],t-1,n);return i}for(a=e[0],r=1;r<e.length;r++)a=n(a,e[r]);return a}for(i=[],r=0;r<e.length;r++)i[r]=Bh(e[r],t-1,n);return i}function Lh(e,t,n,r,i,a,o,s,l,u,c){var d,p,h,f,m=e._values,g=e._index,v=e._ptr;if(r)for(p=v[t],h=v[t+1],d=p;d<h;d++)n[f=g[d]]!==a?(n[f]=a,o.push(f),u?(r[f]=l?s(m[d],c):s(c,m[d]),i[f]=a):r[f]=m[d]):(r[f]=l?s(m[d],r[f]):s(r[f],m[d]),i[f]=a);else for(p=v[t],h=v[t+1],d=p;d<h;d++)n[f=g[d]]!==a?(n[f]=a,o.push(f)):i[f]=a}var Oh="isInteger",zh=zu(Oh,["typed"],(e=>{var{typed:t}=e;return t(Oh,{number:Zu,BigNumber:function(e){return e.isInt()},Fraction:function(e){return 1===e.d&&isFinite(e.n)},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Ih="number";function Ph(e){return e<0}function qh(e){return e>0}function Rh(e){return 0===e}function jh(e){return Number.isNaN(e)}Ph.signature=Ih,qh.signature=Ih,Rh.signature=Ih,jh.signature=Ih;var Kh="isNegative",Vh=zu(Kh,["typed"],(e=>{var{typed:t}=e;return t(Kh,{number:Ph,BigNumber:function(e){return e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s<0},Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Uh="isNumeric",$h=zu(Uh,["typed"],(e=>{var{typed:t}=e;return t(Uh,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Hh="hasNumericValue",Wh=zu(Hh,["typed","isNumeric"],(e=>{var{typed:t,isNumeric:n}=e;return t(Hh,{boolean:()=>!0,string:function(e){return e.trim().length>0&&!isNaN(Number(e))},any:function(e){return n(e)}})})),Gh="isPositive",Zh=zu(Gh,["typed"],(e=>{var{typed:t}=e;return t(Gh,{number:qh,BigNumber:function(e){return!e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s>0&&e.n>0},Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Jh="isZero",Xh=zu(Jh,["typed"],(e=>{var{typed:t}=e;return t(Jh,{number:Rh,BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&&0===e.im},Fraction:function(e){return 1===e.d&&0===e.n},Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Yh="isNaN",Qh=zu(Yh,["typed"],(e=>{var{typed:t}=e;return t(Yh,{number:jh,BigNumber:function(e){return e.isNaN()},Fraction:function(e){return!1},Complex:function(e){return e.isNaN()},Unit:function(e){return Number.isNaN(e.value)},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),ef="typeOf",tf=zu(ef,["typed"],(e=>{var{typed:t}=e;return t(ef,{any:Cu})}));function nf(e,t,n){if(null===n||void 0===n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return r.lte(i.times(n))}return!1}var rf=zu("compareUnits",["typed"],(e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf((e=>(n,r)=>{if(!n.equalBase(r))throw new Error("Cannot compare units with different base");return t.find(e,[n.valueType(),r.valueType()])(n.value,r.value)}))}})),af="equalScalar",of=zu(af,["typed","config"],(e=>{var{typed:t,config:n}=e,r=rf({typed:t});return t(af,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return dc(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||nf(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n){return dc(e.re,t.re,n)&&dc(e.im,t.im,n)}(e,t,n.epsilon)}},r)})),sf=(zu(af,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(af,{"number, number":function(e,t){return dc(e,t,n.epsilon)}})})),zu("SparseMatrix",["typed","equalScalar","Matrix"],(e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Ul(t))throw new Error("Invalid datatype: "+t);if(Hl(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?Eu(t._values):void 0,e._index=Eu(t._index),e._ptr=Eu(t._ptr),e._size=Eu(t._size),e._datatype=n||t._datatype):a(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&$l(e.index)&&$l(e.ptr)&&$l(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if($l(e))a(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+Cu(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function a(e,r,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var a=r.length,o=0,s=n,l=0;if(Ul(i)&&(s=t.find(n,[i,i])||n,l=t.convert(0,i)),a>0){var u=0;do{e._ptr.push(e._index.length);for(var c=0;c<a;c++){var d=r[c];if($l(d)){if(0===u&&o<d.length&&(o=d.length),u<d.length){var p=d[u];s(p,l)||(e._values.push(p),e._index.push(c))}}else 0===u&&o<1&&(o=1),s(d,l)||(e._values.push(d),e._index.push(c))}u++}while(u<o)}e._ptr.push(e._index.length),e._size=[a,o]}function o(e,t,n,r){if(n-t===0)return n;for(var i=t;i<n;i++)if(r[i]===e)return i;return t}function s(e,t,n,r,i,a,o){i.splice(e,0,r),a.splice(e,0,t);for(var s=n+1;s<o.length;s++)o[s]++}function l(e,r,i,a){var o=a||0,s=n,l=0;Ul(e._datatype)&&(s=t.find(n,[e._datatype,e._datatype])||n,l=t.convert(0,e._datatype),o=t.convert(o,e._datatype));var u,c,d,p=!s(o,l),h=e._size[0],f=e._size[1];if(i>f){for(c=f;c<i;c++)if(e._ptr[c]=e._values.length,p)for(u=0;u<h;u++)e._values.push(o),e._index.push(u);e._ptr[i]=e._values.length}else i<f&&(e._ptr.splice(i+1,f-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(f=i,r>h){if(p){var m=0;for(c=0;c<f;c++){e._ptr[c]=e._ptr[c]+m,d=e._ptr[c+1]+m;var g=0;for(u=h;u<r;u++,g++)e._values.splice(d+g,0,o),e._index.splice(d+g,0,u),m++}e._ptr[f]=e._values.length}}else if(r<h){var v=0;for(c=0;c<f;c++){e._ptr[c]=e._ptr[c]-v;var y=e._ptr[c],b=e._ptr[c+1]-v;for(d=y;d<b;d++)(u=e._index[d])>r-1&&(e._values.splice(d,1),e._index.splice(d,1),v++)}e._ptr[c]=e._values.length}return e._size[0]=r,e._size[1]=i,e}function u(e,t,n,r,i){var a,o,s=r[0],l=r[1],u=[];for(a=0;a<s;a++)for(u[a]=[],o=0;o<l;o++)u[a][o]=0;for(o=0;o<l;o++)for(var c=n[o],d=n[o+1],p=c;p<d;p++)u[a=t[p]][o]=e?i?Eu(e[p]):e[p]:1;return u}return i.prototype=new r,i.prototype.createSparseMatrix=function(e,t){return new i(e,t)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return gh(this._values,Cu)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(e,t){return new i(e,t)},i.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},i.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(e,t){if(!Xl(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,r,a,o,s=t.size();if(s.length!==e._size.length)throw new Hu(s.length,e._size.length);var l=t.min(),u=t.max();for(n=0,r=e._size.length;n<r;n++)Xp(l[n],e._size[n]),Xp(u[n],e._size[n]);var c=e._values,d=e._index,p=e._ptr,h=t.dimension(0),f=t.dimension(1),m=[],g=[];h.forEach((function(e,t){g[e]=t[0],m[e]=!0}));var v=c?[]:void 0,y=[],b=[];return f.forEach((function(e){for(b.push(y.length),a=p[e],o=p[e+1];a<o;a++)n=d[a],!0===m[n]&&(y.push(g[n]),v&&v.push(c[a]))})),b.push(y.length),new i({values:v,index:y,ptr:b,size:s,datatype:e._datatype})}(this,e);case 2:case 3:return function(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,a=t.size(),o=t.isScalar();Hl(n)?(i=n.size(),n=n.toArray()):i=Wp(n);if(o){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(1!==a.length&&2!==a.length)throw new Hu(a.length,e._size.length,"<");if(i.length<a.length){for(var s=0,l=0;1===a[s]&&1===i[s];)s++;for(;1===a[s];)l++,s++;n=oh(n,a.length,l,i)}if(!Mu(a,i))throw new Hu(a,i,">");if(1===a.length){t.dimension(0).forEach((function(t,i){Xp(t),e.set([t,0],n[i[0]],r)}))}else{var u=t.dimension(0),c=t.dimension(1);u.forEach((function(t,i){Xp(t),c.forEach((function(a,o){Xp(a),e.set([t,a],n[i[0]][o[0]],r)}))}))}}return e}(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(e){if(!$l(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Hu(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];Xp(t,this._size[0]),Xp(n,this._size[1]);var r=o(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0},i.prototype.set=function(e,r,i){if(!$l(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Hu(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var a=e[0],u=e[1],c=this._size[0],d=this._size[1],p=n,h=0;Ul(this._datatype)&&(p=t.find(n,[this._datatype,this._datatype])||n,h=t.convert(0,this._datatype)),(a>c-1||u>d-1)&&(l(this,Math.max(a+1,c),Math.max(u+1,d),i),c=this._size[0],d=this._size[1]),Xp(a,c),Xp(u,d);var f=o(a,this._ptr[u],this._ptr[u+1],this._index);return f<this._ptr[u+1]&&this._index[f]===a?p(r,h)?function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var a=t+1;a<i.length;a++)i[a]--}(f,u,this._values,this._index,this._ptr):this._values[f]=r:p(r,h)||s(f,a,u,r,this._values,this._index,this._ptr),this},i.prototype.resize=function(e,t,n){if(!Wl(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));if(2!==r.length)throw new Error("Only two dimensions matrix are supported");return r.forEach((function(e){if(!ql(e)||!Zu(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+jp(r)+")")})),l(n?this.clone():this,r[0],r[1],t)},i.prototype.reshape=function(e,t){if(!$l(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");e.forEach((function(t){if(!ql(t)||!Zu(t)||t<=-2||0===t)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+jp(e)+")")}));var n=this._size[0]*this._size[1];if(n!==(e=nh(e,n))[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var r=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return r;for(var i=[],a=0;a<r._ptr.length;a++)for(var l=0;l<r._ptr[a+1]-r._ptr[a];l++)i.push(a);for(var u=r._values.slice(),c=r._index.slice(),d=0;d<r._index.length;d++){var p=c[d],h=i[d],f=p*r._size[1]+h;i[d]=f%e[1],c[d]=Math.floor(f/e[1])}r._values.length=0,r._index.length=0,r._ptr.length=e[1]+1,r._size=e.slice();for(var m=0;m<r._ptr.length;m++)r._ptr[m]=0;for(var g=0;g<u.length;g++){var v=c[g],y=i[g],b=u[g];s(o(v,r._ptr[y],r._ptr[y+1],r._index),v,y,b,r._values,r._index,r._ptr)}return r},i.prototype.clone=function(){return new i({values:this._values?Eu(this._values):void 0,index:Eu(this._index),ptr:Eu(this._ptr),size:Eu(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(e,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var a=this,o=this._size[0],s=this._size[1],l=Sh(e);return function(e,r,a,o,s,l,u){var c=[],d=[],p=[],h=n,f=0;Ul(e._datatype)&&(h=t.find(n,[e._datatype,e._datatype])||n,f=t.convert(0,e._datatype));for(var m=function(e,t,n){e=l(e,t,n),h(e,f)||(c.push(e),d.push(t))},g=o;g<=s;g++){p.push(c.length);var v=e._ptr[g],y=e._ptr[g+1];if(u)for(var b=v;b<y;b++){var x=e._index[b];x>=r&&x<=a&&m(e._values[b],x-r,g-o)}else{for(var D={},w=v;w<y;w++){D[e._index[w]]=e._values[w]}for(var _=r;_<=a;_++){m(_ in D?D[_]:0,_-r,g-o)}}}return p.push(c.length),new i({values:c,index:d,ptr:p,size:[a-r+1,s-o+1]})}(this,0,o-1,0,s-1,(function(t,n,r){return 1===l?e(t):2===l?e(t,[n,r]):e(t,[n,r],a)}),r)},i.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){var a=this._ptr[i],o=this._ptr[i+1];if(t)for(var s=a;s<o;s++){var l=this._index[s];e(this._values[s],[l,i],this)}else{for(var u={},c=a;c<o;c++){u[this._index[c]]=this._values[c]}for(var d=0;d<n;d++){e(d in u?u[d]:0,[d,i],this)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var e=this._size[1],t=0;t<e;t++)for(var n=this._ptr[t],r=this._ptr[t+1],i=n;i<r;i++){var a=this._index[i];yield{value:this._values[i],index:[a,t]}}},i.prototype.toArray=function(){return u(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return u(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+jp(t,e)+" x "+jp(n,e)+"] density: "+jp(r,e)+"\n",a=0;a<n;a++)for(var o=this._ptr[a],s=this._ptr[a+1],l=o;l<s;l++){i+="\n    ("+jp(this._index[l],e)+", "+jp(a,e)+") ==> "+(this._values?jp(this._values[l],e):"X")}return i},i.prototype.toString=function(){return jp(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(e){if(e){if(Rl(e)&&(e=e.toNumber()),!ql(e)||!Zu(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,r=this._size[0],a=this._size[1],o=Math.min(r-n,a-t),s=[],l=[],u=[];u[0]=0;for(var c=t;c<a&&s.length<o;c++)for(var d=this._ptr[c],p=this._ptr[c+1],h=d;h<p;h++){var f=this._index[h];if(f===c-t+n){s.push(this._values[h]),l[s.length-1]=f-n;break}}return u.push(s.length),new i({values:s,index:l,ptr:u,size:[o,1]})},i.fromJSON=function(e){return new i(e)},i.diagonal=function(e,r,a,o,s){if(!$l(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(Rl(e)&&(e=e.toNumber()),!ql(e)||!Zu(e)||e<1)throw new Error("Size values must be positive integers");return e})),a){if(Rl(a)&&(a=a.toNumber()),!ql(a)||!Zu(a))throw new TypeError("The parameter k must be an integer number")}else a=0;var l=n,u=0;Ul(s)&&(l=t.find(n,[s,s])||n,u=t.convert(0,s));var c,d=a>0?a:0,p=a<0?-a:0,h=e[0],f=e[1],m=Math.min(h-p,f-d);if($l(r)){if(r.length!==m)throw new Error("Invalid value array length");c=function(e){return r[e]}}else if(Hl(r)){var g=r.size();if(1!==g.length||g[0]!==m)throw new Error("Invalid matrix length");c=function(e){return r.get([e])}}else c=function(){return r};for(var v=[],y=[],b=[],x=0;x<f;x++){b.push(v.length);var D=x-d;if(D>=0&&D<m){var w=c(D);l(w,u)||(y.push(D+p),v.push(w))}}return b.push(v.length),new i({values:v,index:y,ptr:b,size:[h,f]})},i.prototype.swapRows=function(e,t){if(!ql(e)||!Zu(e)||!ql(t)||!Zu(t))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Xp(e,this._size[0]),Xp(t,this._size[0]),i._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(e,t,n,r,i){for(var a=r[e],o=r[e+1],s=a;s<o;s++)i(n[s],t[s])},i._swapRows=function(e,t,n,r,i,a){for(var s=0;s<n;s++){var l=a[s],u=a[s+1],c=o(e,l,u,i),d=o(t,l,u,i);if(c<u&&d<u&&i[c]===e&&i[d]===t){if(r){var p=r[c];r[c]=r[d],r[d]=p}}else if(c<u&&i[c]===e&&(d>=u||i[d]!==t)){var h=r?r[c]:void 0;i.splice(d,0,t),r&&r.splice(d,0,h),i.splice(d<=c?c+1:c,1),r&&r.splice(d<=c?c+1:c,1)}else if(d<u&&i[d]===t&&(c>=u||i[c]!==e)){var f=r?r[d]:void 0;i.splice(c,0,e),r&&r.splice(c,0,f),i.splice(c<=d?d+1:d,1),r&&r.splice(c<=d?d+1:d,1)}}},i}),{isClass:!0}));var lf=zu("number",["typed"],(e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=function(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return t?{input:e,radix:{"0b":2,"0o":8,"0x":16}[t[1]],integerPart:t[2],fractionalPart:t[3]}:null}(e);if(t)return function(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++)n+=parseInt(e.fractionalPart[r],e.radix)/Math.pow(e.radix,r+1);var i=t+n;if(isNaN(i))throw new SyntaxError('String "'+e.input+'" is not a valid number');return i}(t);var n=0,r=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);r&&(n=Number(r[2]),e=r[1]);var i=Number(e);if(isNaN(i))throw new SyntaxError('String "'+e+'" is not a valid number');if(r){if(i>2**n-1)throw new SyntaxError('String "'.concat(e,'" is out of range'));i>=2**(n-1)&&(i-=2**n)}return i},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:t.referToSelf((e=>t=>{var n=t.clone();return n.value=e(t.value),n})),null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))});return n.fromJSON=function(e){return parseFloat(e.value)},n})),uf="string",cf=zu(uf,["typed"],(e=>{var{typed:t}=e;return t(uf,{"":function(){return""},number:rc,null:function(e){return"null"},boolean:function(e){return e+""},string:function(e){return e},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e))),any:function(e){return String(e)}})})),df="boolean",pf=zu(df,["typed"],(e=>{var{typed:t}=e;return t(df,{"":function(){return!1},boolean:function(e){return e},number:function(e){return!!e},null:function(e){return!1},BigNumber:function(e){return!e.isZero()},string:function(e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;var n=Number(e);if(""!==e&&!isNaN(n))return!!n;throw new Error('Cannot convert "'+e+'" to a boolean')},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),hf=zu("bignumber",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var r=t[2],i=n(t[1]),a=new n(2).pow(Number(r));if(i.gt(a.sub(1)))throw new SyntaxError('String "'.concat(e,'" is out of range'));var o=new n(2).pow(Number(r)-1);return i.gte(o)?i.sub(a):i}return new n(e)},BigNumber:function(e){return e},Unit:t.referToSelf((e=>t=>{var n=t.clone();return n.value=e(t.value),n})),Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(e){return new n(0)},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),ff=zu("complex",["typed","Complex"],(e=>{var{typed:t,Complex:n}=e;return t("complex",{"":function(){return n.ZERO},number:function(e){return new n(e,0)},"number, number":function(e,t){return new n(e,t)},"BigNumber, BigNumber":function(e,t){return new n(e.toNumber(),t.toNumber())},Fraction:function(e){return new n(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return n(e)},null:function(e){return n(0)},Object:function(e){if("re"in e&&"im"in e)return new n(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new n(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),mf=zu("fraction",["typed","Fraction"],(e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},Fraction:function(e){return e},Unit:t.referToSelf((e=>t=>{var n=t.clone();return n.value=e(t.value),n})),Object:function(e){return new n(e)},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),gf="matrix",vf=zu(gf,["typed","Matrix","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(gf,{"":function(){return a([])},string:function(e){return a([],e)},"string, string":function(e,t){return a([],e,t)},Array:function(e){return a(e)},Matrix:function(e){return a(e,e.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(e,t,n){if("dense"===t||"default"===t||void 0===t)return new r(e,n);if("sparse"===t)return new i(e,n);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}})),yf="matrixFromFunction",bf=zu(yf,["typed","matrix","isZero"],(e=>{var{typed:t,matrix:n,isZero:r}=e;return t(yf,{"Array | Matrix, function, string, string":function(e,t,n,r){return i(e,t,n,r)},"Array | Matrix, function, string":function(e,t,n){return i(e,t,n)},"Matrix, function":function(e,t){return i(e,t,"dense")},"Array, function":function(e,t){return i(e,t,"dense").toArray()},"Array | Matrix, string, function":function(e,t,n){return i(e,n,t)},"Array | Matrix, string, string, function":function(e,t,n,r){return i(e,r,t,n)}});function i(e,t,i,a){var o;return(o=void 0!==a?n(i,a):n(i)).resize(e),o.forEach((function(e,n){var i=t(n);r(i)||o.set(n,i)})),o}})),xf="matrixFromRows",Df=zu(xf,["typed","matrix","flatten","size"],(e=>{var{typed:t,matrix:n,flatten:r,size:i}=e;return t(xf,{"...Array":function(e){return a(e)},"...Matrix":function(e){return n(a(e.map((e=>e.toArray()))))}});function a(e){if(0===e.length)throw new TypeError("At least one row is needed to construct a matrix.");var t=o(e[0]),n=[];for(var i of e){var a=o(i);if(a!==t)throw new TypeError("The vectors had different length: "+(0|t)+" \u2260 "+(0|a));n.push(r(i))}return n}function o(e){var t=i(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}})),wf="matrixFromColumns",_f=zu(wf,["typed","matrix","flatten","size"],(e=>{var{typed:t,matrix:n,flatten:r,size:i}=e;return t(wf,{"...Array":function(e){return a(e)},"...Matrix":function(e){return n(a(e.map((e=>e.toArray()))))}});function a(e){if(0===e.length)throw new TypeError("At least one column is needed to construct a matrix.");for(var t=o(e[0]),n=[],i=0;i<t;i++)n[i]=[];for(var a of e){var s=o(a);if(s!==t)throw new TypeError("The vectors had different length: "+(0|t)+" \u2260 "+(0|s));for(var l=r(a),u=0;u<t;u++)n[u].push(l[u])}return n}function o(e){var t=i(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}})),Sf="splitUnit",Cf=zu(Sf,["typed"],(e=>{var{typed:t}=e;return t(Sf,{"Unit, Array":function(e,t){return e.splitUnit(t)}})})),Ef="number",kf="number, number";function Af(e){return Math.abs(e)}function Nf(e,t){return e+t}function Mf(e,t){return e-t}function Ff(e,t){return e*t}function Tf(e){return-e}function Bf(e){return e}function Lf(e){return ec(e)}function Of(e){return e*e*e}function zf(e){return Math.exp(e)}function If(e){return tc(e)}function Pf(e,t){if(!Zu(e)||!Zu(t))throw new Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var n,r=e*t;0!==t;)t=e%(n=t),e=n;return Math.abs(r/e)}function qf(e){return Yu(e)}function Rf(e){return Xu(e)}function jf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t<0;if(n&&(t=-t),0===t)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!==1)throw new Error("Root must be odd when a is negative.");if(0===e)return n?1/0:0;if(!isFinite(e))return n?0:e;var r=Math.pow(Math.abs(e),1/t);return r=e<0?-r:r,n?1/r:r}function Kf(e){return Ju(e)}function Vf(e){return e*e}function Uf(e,t){var n,r,i,a=0,o=1,s=1,l=0;if(!Zu(e)||!Zu(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)i=e-(r=Math.floor(e/t))*t,n=a,a=o-r*a,o=n,n=s,s=l-r*s,l=n,e=t,t=i;return e<0?[-e,-o,-l]:[e,e?o:0,l]}function $f(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}function Hf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Zu(t)||t<0||t>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(oc(e,t))}Af.signature=Ef,Nf.signature=kf,Mf.signature=kf,Ff.signature=kf,Tf.signature=Ef,Bf.signature=Ef,Lf.signature=Ef,Of.signature=Ef,zf.signature=Ef,If.signature=Ef,Pf.signature=kf,qf.signature=Ef,Rf.signature=Ef,Kf.signature=Ef,Vf.signature=Ef,Uf.signature=kf,$f.signature=kf;var Wf="unaryMinus",Gf=zu(Wf,["typed"],(e=>{var{typed:t}=e;return t(Wf,{number:Tf,"Complex | BigNumber | Fraction":e=>e.neg(),Unit:t.referToSelf((e=>n=>{var r=n.clone();return r.value=t.find(e,r.valueType())(n.value),r})),"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e,!0)))})})),Zf="unaryPlus",Jf=zu(Zf,["typed","config","BigNumber"],(e=>{var{typed:t,config:n,BigNumber:r}=e;return t(Zf,{number:Bf,Complex:function(e){return e},BigNumber:function(e){return e},Fraction:function(e){return e},Unit:function(e){return e.clone()},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e,!0))),"boolean | string":function(e){return"BigNumber"===n.number?new r(+e):+e}})})),Xf=zu("abs",["typed"],(e=>{var{typed:t}=e;return t("abs",{number:Af,"Complex | BigNumber | Fraction | Unit":e=>e.abs(),"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e,!0)))})})),Yf="apply",Qf=zu(Yf,["typed","isInteger"],(e=>{var{typed:t,isInteger:n}=e;return t(Yf,{"Array | Matrix, number | BigNumber, function":function(e,t,r){if(!n(t))throw new TypeError("Integer number expected for dimension");var i=Array.isArray(e)?Wp(e):e.size();if(t<0||t>=i.length)throw new Wu(t,i.length);return Hl(e)?e.create(em(e.valueOf(),t,r)):em(e,t,r)}})}));function em(e,t,n){var r,i,a;if(t<=0){if(Array.isArray(e[0])){for(a=function(e){var t,n,r=e.length,i=e[0].length,a=[];for(n=0;n<i;n++){var o=[];for(t=0;t<r;t++)o.push(e[t][n]);a.push(o)}return a}(e),i=[],r=0;r<a.length;r++)i[r]=em(a[r],t-1,n);return i}return n(e)}for(i=[],r=0;r<e.length;r++)i[r]=em(e[r],t-1,n);return i}var tm="addScalar",nm=zu(tm,["typed"],(e=>{var{typed:t}=e;return t(tm,{"number, number":Nf,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":t.referToSelf((e=>(n,r)=>{if(null===n.value||void 0===n.value)throw new Error("Parameter x contains a unit with undefined value");if(null===r.value||void 0===r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var i=n.clone();return i.value=t.find(e,[i.valueType(),r.valueType()])(i.value,r.value),i.fixPrefix=!1,i}))})})),rm="subtractScalar",im=zu(rm,["typed"],(e=>{var{typed:t}=e;return t(rm,{"number, number":Mf,"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":t.referToSelf((e=>(n,r)=>{if(null===n.value||void 0===n.value)throw new Error("Parameter x contains a unit with undefined value");if(null===r.value||void 0===r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var i=n.clone();return i.value=t.find(e,[i.valueType(),r.valueType()])(i.value,r.value),i.fixPrefix=!1,i}))})})),am="cbrt",om=zu(am,["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],(e=>{var{config:t,typed:n,isNegative:r,unaryMinus:i,matrix:a,Complex:o,BigNumber:s,Fraction:l}=e;return n(am,{number:Lf,Complex:u,"Complex, boolean":u,BigNumber:function(e){return e.cbrt()},Unit:function(e){if(e.value&&jl(e.value)){var t=e.clone();return t.value=1,(t=t.pow(1/3)).value=u(e.value),t}var n,a=r(e.value);a&&(e.value=i(e.value)),n=Rl(e.value)?new s(1).div(3):Kl(e.value)?new l(1,3):1/3;var o=e.pow(n);return a&&(o.value=i(o.value)),o}});function u(e,n){var r=e.arg()/3,i=e.abs(),s=new o(Lf(i),0).mul(new o(0,r).exp());if(n){var l=[s,new o(Lf(i),0).mul(new o(0,r+2*Math.PI/3).exp()),new o(Lf(i),0).mul(new o(0,r-2*Math.PI/3).exp())];return"Array"===t.matrix?l:a(l)}return s}})),sm=zu("matAlgo11xS0s",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i,a){var o=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,p=u[0],h=u[1],f=n,m=0,g=i;"string"===typeof c&&(d=c,f=t.find(n,[d,d]),m=t.convert(0,d),r=t.convert(r,d),g=t.find(i,[d,d]));for(var v=[],y=[],b=[],x=0;x<h;x++){b[x]=y.length;for(var D=l[x],w=l[x+1],_=D;_<w;_++){var S=s[_],C=a?g(r,o[_]):g(o[_],r);f(C,m)||(y.push(S),v.push(C))}}return b[h]=y.length,e.createSparseMatrix({values:v,index:y,ptr:b,size:[p,h],datatype:d})}})),lm=zu("matAlgo12xSfs",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,a){var o=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,p=u[0],h=u[1],f=i;"string"===typeof c&&(d=c,r=t.convert(r,d),f=t.find(i,[d,d]));for(var m=[],g=[],v=[],y=0;y<h;y++){for(var b=y+1,x=l[y],D=l[y+1],w=x;w<D;w++){var _=s[w];g[_]=o[w],v[_]=b}for(var S=0;S<p;S++)0===y&&(m[S]=[]),v[S]===b?m[S][y]=a?f(r,g[S]):f(g[S],r):m[S][y]=a?f(r,0):f(0,r)}return new n({data:m,size:[p,h],datatype:d})}})),um=zu("matAlgo14xDs",["typed"],(e=>{var{typed:t}=e;return function(e,r,i,a){var o,s=e._data,l=e._size,u=e._datatype,c=i;"string"===typeof u&&(o=u,r=t.convert(r,o),c=t.find(i,[o,o]));var d=l.length>0?n(c,0,l,l[0],s,r,a):[];return e.createDenseMatrix({data:d,size:Eu(l),datatype:o})};function n(e,t,r,i,a,o,s){var l=[];if(t===r.length-1)for(var u=0;u<i;u++)l[u]=s?e(o,a[u]):e(a[u],o);else for(var c=0;c<i;c++)l[c]=n(e,t+1,r,r[t+1],a[c],o,s);return l}})),cm="ceil",dm=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],pm=zu(cm,["typed","config","round"],(e=>{var{typed:t,config:n,round:r}=e;return t(cm,{number:function(e){return dc(e,r(e),n.epsilon)?r(e):Math.ceil(e)},"number, number":function(e,t){if(dc(e,r(e,t),n.epsilon))return r(e,t);var[i,a]="".concat(e,"e").split("e"),o=Math.ceil(Number("".concat(i,"e").concat(Number(a)+t)));return[i,a]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(a)-t))}})})),hm=zu(cm,dm,(e=>{var{typed:t,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=e,l=sm({typed:t,equalScalar:a}),u=lm({typed:t,DenseMatrix:s}),c=um({typed:t}),d=pm({typed:t,config:n,round:r});return t("ceil",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(e){return e.ceil()},"Complex, number":function(e,t){return e.ceil(t)},"Complex, BigNumber":function(e,t){return e.ceil(t.toNumber())},BigNumber:function(e){return nf(e,r(e),n.epsilon)?r(e):e.ceil()},"BigNumber, BigNumber":function(e,t){return nf(e,r(e,t),n.epsilon)?r(e,t):e.toDecimalPlaces(t.toNumber(),Dp.ROUND_CEIL)},Fraction:function(e){return e.ceil()},"Fraction, number":function(e,t){return e.ceil(t)},"Fraction, BigNumber":function(e,t){return e.ceil(t.toNumber())},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e,!0))),"Array, number | BigNumber":t.referToSelf((e=>(t,n)=>Fh(t,(t=>e(t,n)),!0))),"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>l(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>c(t,n,e,!1))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf((e=>(t,n)=>c(i(n),t,e,!0).valueOf())),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf((e=>(t,n)=>a(t,0)?o(n.size(),n.storage()):"dense"===n.storage()?c(n,t,e,!0):u(n,t,e,!0)))})})),fm="cube",mm=zu(fm,["typed"],(e=>{var{typed:t}=e;return t(fm,{number:Of,Complex:function(e){return e.mul(e).mul(e)},BigNumber:function(e){return e.times(e).times(e)},Fraction:function(e){return e.pow(3)},Unit:function(e){return e.pow(3)}})})),gm=zu("exp",["typed"],(e=>{var{typed:t}=e;return t("exp",{number:zf,Complex:function(e){return e.exp()},BigNumber:function(e){return e.exp()}})})),vm="expm1",ym=zu(vm,["typed","Complex"],(e=>{var{typed:t,Complex:n}=e;return t(vm,{number:If,Complex:function(e){var t=Math.exp(e.re);return new n(t*Math.cos(e.im)-1,t*Math.sin(e.im))},BigNumber:function(e){return e.exp().minus(1)}})})),bm="fix",xm=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],Dm=zu(bm,["typed","ceil","floor"],(e=>{var{typed:t,ceil:n,floor:r}=e;return t(bm,{number:function(e){return e>0?r(e):n(e)},"number, number":function(e,t){return e>0?r(e,t):n(e,t)}})})),wm=zu(bm,xm,(e=>{var{typed:t,Complex:n,matrix:r,ceil:i,floor:a,equalScalar:o,zeros:s,DenseMatrix:l}=e,u=lm({typed:t,DenseMatrix:l}),c=um({typed:t}),d=Dm({typed:t,ceil:i,floor:a});return t("fix",{number:d.signatures.number,"number, number | BigNumber":d.signatures["number,number"],Complex:function(e){return new n(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im))},"Complex, number":function(e,t){return new n(e.re>0?a(e.re,t):i(e.re,t),e.im>0?a(e.im,t):i(e.im,t))},"Complex, BigNumber":function(e,t){var r=t.toNumber();return new n(e.re>0?a(e.re,r):i(e.re,r),e.im>0?a(e.im,r):i(e.im,r))},BigNumber:function(e){return e.isNegative()?i(e):a(e)},"BigNumber, number | BigNumber":function(e,t){return e.isNegative()?i(e,t):a(e,t)},Fraction:function(e){return e.s<0?e.ceil():e.floor()},"Fraction, number | BigNumber":function(e,t){return e.s<0?i(e,t):a(e,t)},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e,!0))),"Array | Matrix, number | BigNumber":t.referToSelf((e=>(t,n)=>Fh(t,(t=>e(t,n)),!0))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf((e=>(t,n)=>c(r(n),t,e,!0).valueOf())),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf((e=>(t,n)=>o(t,0)?s(n.size(),n.storage()):"dense"===n.storage()?c(n,t,e,!0):u(n,t,e,!0)))})})),_m="floor",Sm=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Cm=zu(_m,["typed","config","round"],(e=>{var{typed:t,config:n,round:r}=e;return t(_m,{number:function(e){return dc(e,r(e),n.epsilon)?r(e):Math.floor(e)},"number, number":function(e,t){if(dc(e,r(e,t),n.epsilon))return r(e,t);var[i,a]="".concat(e,"e").split("e"),o=Math.floor(Number("".concat(i,"e").concat(Number(a)+t)));return[i,a]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(a)-t))}})})),Em=zu(_m,Sm,(e=>{var{typed:t,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=e,l=sm({typed:t,equalScalar:a}),u=lm({typed:t,DenseMatrix:s}),c=um({typed:t}),d=Cm({typed:t,config:n,round:r});return t("floor",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(e){return e.floor()},"Complex, number":function(e,t){return e.floor(t)},"Complex, BigNumber":function(e,t){return e.floor(t.toNumber())},BigNumber:function(e){return nf(e,r(e),n.epsilon)?r(e):e.floor()},"BigNumber, BigNumber":function(e,t){return nf(e,r(e,t),n.epsilon)?r(e,t):e.toDecimalPlaces(t.toNumber(),Dp.ROUND_FLOOR)},Fraction:function(e){return e.floor()},"Fraction, number":function(e,t){return e.floor(t)},"Fraction, BigNumber":function(e,t){return e.floor(t.toNumber())},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e,!0))),"Array, number | BigNumber":t.referToSelf((e=>(t,n)=>Fh(t,(t=>e(t,n)),!0))),"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>l(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>c(t,n,e,!1))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf((e=>(t,n)=>c(i(n),t,e,!0).valueOf())),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf((e=>(t,n)=>a(t,0)?o(n.size(),n.storage()):"dense"===n.storage()?c(n,t,e,!0):u(n,t,e,!0)))})})),km=zu("matAlgo02xDS0",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i,a){var o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=r._values,c=r._index,d=r._ptr,p=r._size,h=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(s.length!==p.length)throw new Hu(s.length,p.length);if(s[0]!==p[0]||s[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+p+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,m=s[0],g=s[1],v=n,y=0,b=i;"string"===typeof l&&l===h&&"mixed"!==l&&(f=l,v=t.find(n,[f,f]),y=t.convert(0,f),b=t.find(i,[f,f]));for(var x=[],D=[],w=[],_=0;_<g;_++){w[_]=D.length;for(var S=d[_],C=d[_+1],E=S;E<C;E++){var k=c[E],A=a?b(u[E],o[k][_]):b(o[k][_],u[E]);v(A,y)||(D.push(k),x.push(A))}}return w[g]=D.length,r.createSparseMatrix({values:x,index:D,ptr:w,size:[m,g],datatype:l===e._datatype&&h===r._datatype?f:void 0})}})),Am=zu("matAlgo03xDSf",["typed"],(e=>{var{typed:t}=e;return function(e,n,r,i){var a=e._data,o=e._size,s=e._datatype||e.getDataType(),l=n._values,u=n._index,c=n._ptr,d=n._size,p=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(o.length!==d.length)throw new Hu(o.length,d.length);if(o[0]!==d[0]||o[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,f=o[0],m=o[1],g=0,v=r;"string"===typeof s&&s===p&&"mixed"!==s&&(h=s,g=t.convert(0,h),v=t.find(r,[h,h]));for(var y=[],b=0;b<f;b++)y[b]=[];for(var x=[],D=[],w=0;w<m;w++){for(var _=w+1,S=c[w],C=c[w+1],E=S;E<C;E++){var k=u[E];x[k]=i?v(l[E],a[k][w]):v(a[k][w],l[E]),D[k]=_}for(var A=0;A<f;A++)D[A]===_?y[A][w]=x[A]:y[A][w]=i?v(g,a[A][w]):v(a[A][w],g)}return e.createDenseMatrix({data:y,size:[f,m],datatype:s===e._datatype&&p===n._datatype?h:void 0})}})),Nm=zu("matAlgo05xSfSf",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,l=e._size,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=r._values,d=r._index,p=r._ptr,h=r._size,f=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(l.length!==h.length)throw new Hu(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var m,g=l[0],v=l[1],y=n,b=0,x=i;"string"===typeof u&&u===f&&"mixed"!==u&&(m=u,y=t.find(n,[m,m]),b=t.convert(0,m),x=t.find(i,[m,m]));var D,w,_,S,C=a&&c?[]:void 0,E=[],k=[],A=C?[]:void 0,N=C?[]:void 0,M=[],F=[];for(w=0;w<v;w++){k[w]=E.length;var T=w+1;for(_=s[w],S=s[w+1];_<S;_++)D=o[_],E.push(D),M[D]=T,A&&(A[D]=a[_]);for(_=p[w],S=p[w+1];_<S;_++)M[D=d[_]]!==T&&E.push(D),F[D]=T,N&&(N[D]=c[_]);if(C)for(_=k[w];_<E.length;){var B=M[D=E[_]],L=F[D];if(B===T||L===T){var O=x(B===T?A[D]:b,L===T?N[D]:b);y(O,b)?E.splice(_,1):(C.push(O),_++)}}}return k[v]=E.length,e.createSparseMatrix({values:C,index:E,ptr:k,size:[g,v],datatype:u===e._datatype&&f===r._datatype?m:void 0})}})),Mm=zu("matAlgo13xDD",["typed"],(e=>{var{typed:t}=e;return function(e,r,i){var a,o=e._data,s=e._size,l=e._datatype,u=r._data,c=r._size,d=r._datatype,p=[];if(s.length!==c.length)throw new Hu(s.length,c.length);for(var h=0;h<s.length;h++){if(s[h]!==c[h])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");p[h]=s[h]}var f=i;"string"===typeof l&&l===d&&(a=l,f=t.find(i,[a,a]));var m=p.length>0?n(f,0,p,p[0],o,u):[];return e.createDenseMatrix({data:m,size:p,datatype:a})};function n(e,t,r,i,a,o){var s=[];if(t===r.length-1)for(var l=0;l<i;l++)s[l]=e(a[l],o[l]);else for(var u=0;u<i;u++)s[u]=n(e,t+1,r,r[t+1],a[u],o[u]);return s}})),Fm=zu("broadcast",["concat"],(e=>{var{concat:t}=e;return function(e,t){var i=Math.max(e._size.length,t._size.length);if(e._size.length===t._size.length&&e._size.every(((e,n)=>e===t._size[n])))return[e,t];for(var a=n(e._size,i,0),o=n(t._size,i,0),s=[],l=0;l<i;l++)s[l]=Math.max(a[l],o[l]);xh(a,s),xh(o,s);var u=e.clone(),c=t.clone();u._size.length<i?u.reshape(n(u._size,i,1)):c._size.length<i&&c.reshape(n(c._size,i,1));for(var d=0;d<i;d++)u._size[d]<s[d]&&(u=r(u,s[d],d)),c._size[d]<s[d]&&(c=r(c,s[d],d));return[u,c]};function n(e,t,n){return[...Array(t-e.length).fill(n),...e]}function r(e,n,r){return t(...Array(n).fill(e),r)}})),Tm=zu("matrixAlgorithmSuite",["typed","matrix","concat"],(e=>{var{typed:t,matrix:n,concat:r}=e,i=Mm({typed:t}),a=um({typed:t}),o=Fm({concat:r});return function(e){var r,s=e.elop,l=e.SD||e.DS;s?(r={"DenseMatrix, DenseMatrix":(e,t)=>i(...o(e,t),s),"Array, Array":(e,t)=>i(...o(n(e),n(t)),s).valueOf(),"Array, DenseMatrix":(e,t)=>i(...o(n(e),t),s),"DenseMatrix, Array":(e,t)=>i(...o(e,n(t)),s)},e.SS&&(r["SparseMatrix, SparseMatrix"]=(t,n)=>e.SS(...o(t,n),s,!1)),e.DS&&(r["DenseMatrix, SparseMatrix"]=(t,n)=>e.DS(...o(t,n),s,!1),r["Array, SparseMatrix"]=(t,r)=>e.DS(...o(n(t),r),s,!1)),l&&(r["SparseMatrix, DenseMatrix"]=(e,t)=>l(...o(t,e),s,!0),r["SparseMatrix, Array"]=(e,t)=>l(...o(n(t),e),s,!0))):(r={"DenseMatrix, DenseMatrix":t.referToSelf((e=>(t,n)=>i(...o(t,n),e))),"Array, Array":t.referToSelf((e=>(t,r)=>i(...o(n(t),n(r)),e).valueOf())),"Array, DenseMatrix":t.referToSelf((e=>(t,r)=>i(...o(n(t),r),e))),"DenseMatrix, Array":t.referToSelf((e=>(t,r)=>i(...o(t,n(r)),e)))},e.SS&&(r["SparseMatrix, SparseMatrix"]=t.referToSelf((t=>(n,r)=>e.SS(...o(n,r),t,!1)))),e.DS&&(r["DenseMatrix, SparseMatrix"]=t.referToSelf((t=>(n,r)=>e.DS(...o(n,r),t,!1))),r["Array, SparseMatrix"]=t.referToSelf((t=>(r,i)=>e.DS(...o(n(r),i),t,!1)))),l&&(r["SparseMatrix, DenseMatrix"]=t.referToSelf((e=>(t,n)=>l(...o(n,t),e,!0))),r["SparseMatrix, Array"]=t.referToSelf((e=>(t,r)=>l(...o(n(r),t),e,!0)))));var u=e.scalar||"any";(e.Ds||e.Ss)&&(s?(r["DenseMatrix,"+u]=(e,t)=>a(e,t,s,!1),r[u+", DenseMatrix"]=(e,t)=>a(t,e,s,!0),r["Array,"+u]=(e,t)=>a(n(e),t,s,!1).valueOf(),r[u+", Array"]=(e,t)=>a(n(t),e,s,!0).valueOf()):(r["DenseMatrix,"+u]=t.referToSelf((e=>(t,n)=>a(t,n,e,!1))),r[u+", DenseMatrix"]=t.referToSelf((e=>(t,n)=>a(n,t,e,!0))),r["Array,"+u]=t.referToSelf((e=>(t,r)=>a(n(t),r,e,!1).valueOf())),r[u+", Array"]=t.referToSelf((e=>(t,r)=>a(n(r),t,e,!0).valueOf()))));var c=void 0!==e.sS?e.sS:e.Ss;return s?(e.Ss&&(r["SparseMatrix,"+u]=(t,n)=>e.Ss(t,n,s,!1)),c&&(r[u+", SparseMatrix"]=(e,t)=>c(t,e,s,!0))):(e.Ss&&(r["SparseMatrix,"+u]=t.referToSelf((t=>(n,r)=>e.Ss(n,r,t,!1)))),c&&(r[u+", SparseMatrix"]=t.referToSelf((e=>(t,n)=>c(n,t,e,!0))))),s&&s.signatures&&Au(r,s.signatures),r}})),Bm=zu("mod",["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],(e=>{var{typed:t,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s,concat:l}=e,u=Em({typed:t,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}),c=km({typed:t,equalScalar:a}),d=Am({typed:t}),p=Nm({typed:t,equalScalar:a}),h=sm({typed:t,equalScalar:a}),f=lm({typed:t,DenseMatrix:s});return t("mod",{"number, number":function(e,t){return 0===t?e:e-t*u(e/t)},"BigNumber, BigNumber":function(e,t){return t.isZero()?e:e.sub(t.mul(u(e.div(t))))},"Fraction, Fraction":function(e,t){return t.equals(0)?e:e.sub(t.mul(u(e.div(t))))}},Tm({typed:t,matrix:i,concat:l})({SS:p,DS:d,SD:c,Ss:h,sS:f}))})),Lm=zu("matAlgo01xDSid",["typed"],(e=>{var{typed:t}=e;return function(e,n,r,i){var a=e._data,o=e._size,s=e._datatype||e.getDataType(),l=n._values,u=n._index,c=n._ptr,d=n._size,p=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(o.length!==d.length)throw new Hu(o.length,d.length);if(o[0]!==d[0]||o[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,f,m=o[0],g=o[1],v="string"===typeof s&&"mixed"!==s&&s===p?s:void 0,y=v?t.find(r,[v,v]):r,b=[];for(h=0;h<m;h++)b[h]=[];var x=[],D=[];for(f=0;f<g;f++){for(var w=f+1,_=c[f],S=c[f+1],C=_;C<S;C++)x[h=u[C]]=i?y(l[C],a[h][f]):y(a[h][f],l[C]),D[h]=w;for(h=0;h<m;h++)D[h]===w?b[h][f]=x[h]:b[h][f]=a[h][f]}return e.createDenseMatrix({data:b,size:[m,g],datatype:s===e._datatype&&p===n._datatype?v:void 0})}})),Om=zu("matAlgo04xSidSid",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,l=e._size,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=r._values,d=r._index,p=r._ptr,h=r._size,f=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(l.length!==h.length)throw new Hu(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var m,g=l[0],v=l[1],y=n,b=0,x=i;"string"===typeof u&&u===f&&"mixed"!==u&&(m=u,y=t.find(n,[m,m]),b=t.convert(0,m),x=t.find(i,[m,m]));var D,w,_,S,C,E=a&&c?[]:void 0,k=[],A=[],N=a&&c?[]:void 0,M=a&&c?[]:void 0,F=[],T=[];for(w=0;w<v;w++){A[w]=k.length;var B=w+1;for(S=s[w],C=s[w+1],_=S;_<C;_++)D=o[_],k.push(D),F[D]=B,N&&(N[D]=a[_]);for(S=p[w],C=p[w+1],_=S;_<C;_++)if(F[D=d[_]]===B){if(N){var L=x(N[D],c[_]);y(L,b)?F[D]=null:N[D]=L}}else k.push(D),T[D]=B,M&&(M[D]=c[_]);if(N&&M)for(_=A[w];_<k.length;)F[D=k[_]]===B?(E[_]=N[D],_++):T[D]===B?(E[_]=M[D],_++):k.splice(_,1)}return A[v]=k.length,e.createSparseMatrix({values:E,index:k,ptr:A,size:[g,v],datatype:u===e._datatype&&f===r._datatype?m:void 0})}})),zm=zu("matAlgo10xSids",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,a){var o=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,p=u[0],h=u[1],f=i;"string"===typeof c&&(d=c,r=t.convert(r,d),f=t.find(i,[d,d]));for(var m=[],g=[],v=[],y=0;y<h;y++){for(var b=y+1,x=l[y],D=l[y+1],w=x;w<D;w++){var _=s[w];g[_]=o[w],v[_]=b}for(var S=0;S<p;S++)0===y&&(m[S]=[]),v[S]===b?m[S][y]=a?f(r,g[S]):f(g[S],r):m[S][y]=r}return new n({data:m,size:[p,h],datatype:d})}})),Im=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],Pm="number | BigNumber | Fraction | Matrix | Array",qm="".concat(Pm,", ").concat(Pm,", ...").concat(Pm);function Rm(e){return!e.some((e=>Array.isArray(e)))}var jm=zu("gcd",Im,(e=>{var{typed:t,matrix:n,config:r,round:i,equalScalar:a,zeros:o,BigNumber:s,DenseMatrix:l,concat:u}=e,c=Bm({typed:t,config:r,round:i,matrix:n,equalScalar:a,zeros:o,DenseMatrix:l,concat:u}),d=Lm({typed:t}),p=Om({typed:t,equalScalar:a}),h=zm({typed:t,DenseMatrix:l});return t("gcd",{"number, number":function(e,t){if(!Zu(e)||!Zu(t))throw new Error("Parameters in function gcd must be integer numbers");var n;for(;0!==t;)n=c(e,t),e=t,t=n;return e<0?-e:e},"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function gcd must be integer numbers");var n=new s(0);for(;!t.isZero();){var r=c(e,t);e=t,t=r}return e.lt(n)?e.neg():e},"Fraction, Fraction":(e,t)=>e.gcd(t)},Tm({typed:t,matrix:n,concat:u})({SS:p,DS:d,Ss:h}),{[qm]:t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),a=0;a<r.length;a++)i=e(i,r[a]);return i})),Array:t.referToSelf((e=>t=>{if(1===t.length&&Array.isArray(t[0])&&Rm(t[0]))return e(...t[0]);if(Rm(t))return e(...t);throw new qu("gcd() supports only 1d matrices!")})),Matrix:t.referToSelf((e=>t=>e(t.toArray())))})})),Km=zu("matAlgo06xS0S0",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._size,s=e._datatype||void 0===e._data?e._datatype:e.getDataType(),l=r._values,u=r._size,c=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(o.length!==u.length)throw new Hu(o.length,u.length);if(o[0]!==u[0]||o[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+u+")");var d,p=o[0],h=o[1],f=n,m=0,g=i;"string"===typeof s&&s===c&&"mixed"!==s&&(d=s,f=t.find(n,[d,d]),m=t.convert(0,d),g=t.find(i,[d,d]));for(var v=a&&l?[]:void 0,y=[],b=[],x=v?[]:void 0,D=[],w=[],_=0;_<h;_++){b[_]=y.length;var S=_+1;if(Lh(e,_,D,x,w,S,y,g),Lh(r,_,D,x,w,S,y,g),x)for(var C=b[_];C<y.length;){var E=y[C];if(w[E]===S){var k=x[E];f(k,m)?y.splice(C,1):(v.push(k),C++)}else y.splice(C,1)}else for(var A=b[_];A<y.length;){w[y[A]]!==S?y.splice(A,1):A++}}return b[h]=y.length,e.createSparseMatrix({values:v,index:y,ptr:b,size:[p,h],datatype:s===e._datatype&&c===r._datatype?d:void 0})}})),Vm=zu("lcm",["typed","matrix","equalScalar","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,concat:i}=e,a=km({typed:t,equalScalar:r}),o=Km({typed:t,equalScalar:r}),s=sm({typed:t,equalScalar:r}),l=Tm({typed:t,matrix:n,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),a=0;a<r.length;a++)i=e(i,r[a]);return i})),t("lcm",{"number, number":Pf,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(e.isZero())return e;if(t.isZero())return t;var n=e.times(t);for(;!t.isZero();){var r=t;t=e.mod(r),e=r}return n.div(e).abs()},"Fraction, Fraction":(e,t)=>e.lcm(t)},l({SS:o,DS:a,Ss:s}),c)})),Um="log10",$m=zu(Um,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(Um,{number:function(e){return e>=0||n.predictable?qf(e):new r(e,0).log().div(Math.LN10)},Complex:function(e){return new r(e).log().div(Math.LN10)},BigNumber:function(e){return!e.isNegative()||n.predictable?e.log():new r(e.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Hm="log2",Wm=zu(Hm,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(Hm,{number:function(e){return e>=0||n.predictable?Rf(e):i(new r(e,0))},Complex:i,BigNumber:function(e){return!e.isNegative()||n.predictable?e.log(2):i(new r(e.toNumber(),0))},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))});function i(e){var t=Math.sqrt(e.re*e.re+e.im*e.im);return new r(Math.log2?Math.log2(t):Math.log(t)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2)}})),Gm=zu("multiplyScalar",["typed"],(e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":Ff,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":(e,t)=>t.multiply(e),"Unit, number | Fraction | BigNumber | Complex | Unit":(e,t)=>e.multiply(t)})})),Zm="multiply",Jm=zu(Zm,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:a,dot:o}=e,s=sm({typed:t,equalScalar:a}),l=um({typed:t});function u(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}function c(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var a,o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=n._data,c=n._size,d=n._datatype||n.getDataType(),p=s[0],h=c[1],f=r,m=i;l&&d&&l===d&&"string"===typeof l&&"mixed"!==l&&(a=l,f=t.find(r,[a,a]),m=t.find(i,[a,a]));for(var g=[],v=0;v<h;v++){for(var y=m(o[0],u[0][v]),b=1;b<p;b++)y=f(y,m(o[b],u[b][v]));g[v]=y}return e.createDenseMatrix({data:g,size:[h],datatype:l===e._datatype&&d===n._datatype?a:void 0})}(e,n)}var d=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var a,o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=n._data,c=n._datatype||n.getDataType(),d=s[0],p=s[1],h=r,f=i;l&&c&&l===c&&"string"===typeof l&&"mixed"!==l&&(a=l,h=t.find(r,[a,a]),f=t.find(i,[a,a]));for(var m=[],g=0;g<d;g++){for(var v=o[g],y=f(v[0],u[0]),b=1;b<p;b++)y=h(y,f(v[b],u[b]));m[g]=y}return e.createDenseMatrix({data:m,size:[d],datatype:l===e._datatype&&c===n._datatype?a:void 0})},"SparseMatrix, any":function(e,n){var o=e._values,s=e._index,l=e._ptr,u=e._datatype||void 0===e._data?e._datatype:e.getDataType();if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,d=n._data,p=n._datatype||n.getDataType(),h=e._size[0],f=n._size[0],m=[],g=[],v=[],y=r,b=i,x=a,D=0;u&&p&&u===p&&"string"===typeof u&&"mixed"!==u&&(c=u,y=t.find(r,[c,c]),b=t.find(i,[c,c]),x=t.find(a,[c,c]),D=t.convert(0,c));var w=[],_=[];v[0]=0;for(var S=0;S<f;S++){var C=d[S];if(!x(C,D))for(var E=l[S],k=l[S+1],A=E;A<k;A++){var N=s[A];_[N]?w[N]=y(w[N],b(C,o[A])):(_[N]=!0,g.push(N),w[N]=b(C,o[A]))}}for(var M=g.length,F=0;F<M;F++){var T=g[F];m[F]=w[T]}return v[1]=g.length,e.createSparseMatrix({values:m,index:g,ptr:v,size:[h,1],datatype:u===e._datatype&&p===n._datatype?c:void 0})}}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var a,o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=n._data,c=n._size,d=n._datatype||n.getDataType(),p=s[0],h=s[1],f=c[1],m=r,g=i;l&&d&&l===d&&"string"===typeof l&&"mixed"!==l&&"mixed"!==l&&(a=l,m=t.find(r,[a,a]),g=t.find(i,[a,a]));for(var v=[],y=0;y<p;y++){var b=o[y];v[y]=[];for(var x=0;x<f;x++){for(var D=g(b[0],u[0][x]),w=1;w<h;w++)D=m(D,g(b[w],u[w][x]));v[y][x]=D}}return e.createDenseMatrix({data:v,size:[p,f],datatype:l===e._datatype&&d===n._datatype?a:void 0})},"DenseMatrix, SparseMatrix":function(e,n){var o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=n._values,c=n._index,d=n._ptr,p=n._size,h=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(!u)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var f,m=s[0],g=p[1],v=r,y=i,b=a,x=0;l&&h&&l===h&&"string"===typeof l&&"mixed"!==l&&(f=l,v=t.find(r,[f,f]),y=t.find(i,[f,f]),b=t.find(a,[f,f]),x=t.convert(0,f));for(var D=[],w=[],_=[],S=n.createSparseMatrix({values:D,index:w,ptr:_,size:[m,g],datatype:l===e._datatype&&h===n._datatype?f:void 0}),C=0;C<g;C++){_[C]=w.length;var E=d[C],k=d[C+1];if(k>E)for(var A=0,N=0;N<m;N++){for(var M=N+1,F=void 0,T=E;T<k;T++){var B=c[T];A!==M?(F=y(o[N][B],u[T]),A=M):F=v(F,y(o[N][B],u[T]))}A!==M||b(F,x)||(w.push(N),D.push(F))}}return _[g]=w.length,S},"SparseMatrix, DenseMatrix":function(e,n){var o=e._values,s=e._index,l=e._ptr,u=e._datatype||void 0===e._data?e._datatype:e.getDataType();if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,d=n._data,p=n._datatype||n.getDataType(),h=e._size[0],f=n._size[0],m=n._size[1],g=r,v=i,y=a,b=0;u&&p&&u===p&&"string"===typeof u&&"mixed"!==u&&(c=u,g=t.find(r,[c,c]),v=t.find(i,[c,c]),y=t.find(a,[c,c]),b=t.convert(0,c));for(var x=[],D=[],w=[],_=e.createSparseMatrix({values:x,index:D,ptr:w,size:[h,m],datatype:u===e._datatype&&p===n._datatype?c:void 0}),S=[],C=[],E=0;E<m;E++){w[E]=D.length;for(var k=E+1,A=0;A<f;A++){var N=d[A][E];if(!y(N,b))for(var M=l[A],F=l[A+1],T=M;T<F;T++){var B=s[T];C[B]!==k?(C[B]=k,D.push(B),S[B]=v(N,o[T])):S[B]=g(S[B],v(N,o[T]))}}for(var L=w[E],O=D.length,z=L;z<O;z++){var I=D[z];x[z]=S[I]}}return w[m]=D.length,_},"SparseMatrix, SparseMatrix":function(e,n){var a,o=e._values,s=e._index,l=e._ptr,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=n._values,d=n._index,p=n._ptr,h=n._datatype||void 0===n._data?n._datatype:n.getDataType(),f=e._size[0],m=n._size[1],g=o&&c,v=r,y=i;u&&h&&u===h&&"string"===typeof u&&"mixed"!==u&&(a=u,v=t.find(r,[a,a]),y=t.find(i,[a,a]));for(var b,x,D,w,_,S,C,E,k=g?[]:void 0,A=[],N=[],M=e.createSparseMatrix({values:k,index:A,ptr:N,size:[f,m],datatype:u===e._datatype&&h===n._datatype?a:void 0}),F=g?[]:void 0,T=[],B=0;B<m;B++){N[B]=A.length;var L=B+1;for(_=p[B],S=p[B+1],w=_;w<S;w++)if(E=d[w],g)for(x=l[E],D=l[E+1],b=x;b<D;b++)T[C=s[b]]!==L?(T[C]=L,A.push(C),F[C]=y(c[w],o[b])):F[C]=v(F[C],y(c[w],o[b]));else for(x=l[E],D=l[E+1],b=x;b<D;b++)T[C=s[b]]!==L&&(T[C]=L,A.push(C));if(g)for(var O=N[B],z=A.length,I=O;I<z;I++){var P=A[I];k[I]=F[P]}}return N[m]=A.length,M}});return t(Zm,i,{"Array, Array":t.referTo("Matrix, Matrix",(e=>(t,r)=>{u(Wp(t),Wp(r));var i=e(n(t),n(r));return Hl(i)?i.valueOf():i})),"Matrix, Matrix":function(e,t){var n=e.size(),r=t.size();return u(n,r),1===n.length?1===r.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return o(e,t)}(e,t,n[0]):c(e,t):1===r.length?d(e,t):p(e,t)},"Matrix, Array":t.referTo("Matrix,Matrix",(e=>(t,r)=>e(t,n(r)))),"Array, Matrix":t.referToSelf((e=>(t,r)=>e(n(t,r.storage()),r))),"SparseMatrix, any":function(e,t){return s(e,t,i,!1)},"DenseMatrix, any":function(e,t){return l(e,t,i,!1)},"any, SparseMatrix":function(e,t){return s(t,e,i,!0)},"any, DenseMatrix":function(e,t){return l(t,e,i,!0)},"Array, any":function(e,t){return l(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),a=0;a<r.length;a++)i=e(i,r[a]);return i}))})})),Xm="nthRoot",Ym=zu(Xm,["typed","matrix","equalScalar","BigNumber","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,BigNumber:i,concat:a}=e,o=Lm({typed:t}),s=km({typed:t,equalScalar:r}),l=Km({typed:t,equalScalar:r}),u=sm({typed:t,equalScalar:r}),c=Tm({typed:t,matrix:n,concat:a});function d(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return t(Xm,{number:jf,"number, number":jf,BigNumber:e=>p(e,new i(2)),"BigNumber, BigNumber":p,Complex:d,"Complex, number":d,Array:t.referTo("DenseMatrix,number",(e=>t=>e(n(t),2).valueOf())),DenseMatrix:t.referTo("DenseMatrix,number",(e=>t=>e(t,2))),SparseMatrix:t.referTo("SparseMatrix,number",(e=>t=>e(t,2))),"SparseMatrix, SparseMatrix":t.referToSelf((e=>(t,n)=>{if(1===n.density())return l(t,n,e);throw new Error("Root must be non-zero")})),"DenseMatrix, SparseMatrix":t.referToSelf((e=>(t,n)=>{if(1===n.density())return o(t,n,e,!1);throw new Error("Root must be non-zero")})),"Array, SparseMatrix":t.referTo("DenseMatrix,SparseMatrix",(e=>(t,r)=>e(n(t),r))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>{if(1===n.density())return u(n,t,e,!0);throw new Error("Root must be non-zero")}))},c({scalar:"number | BigNumber",SD:s,Ss:u,sS:!1}));function p(e,t){var n=i.precision,r=i.clone({precision:n+2}),a=new i(0),o=new r(1),s=t.isNegative();if(s&&(t=t.neg()),t.isZero())throw new Error("Root must be non-zero");if(e.isNegative()&&!t.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(e.isZero())return s?new r(1/0):0;if(!e.isFinite())return s?a:e;var l=e.abs().pow(o.div(t));return l=e.isNeg()?l.neg():l,new i((s?o.div(l):l).toPrecision(n))}})),Qm="sign",eg=zu(Qm,["typed","BigNumber","Fraction","complex"],(e=>{var{typed:t,BigNumber:n,complex:r,Fraction:i}=e;return t(Qm,{number:Kf,Complex:function(e){return 0===e.im?r(Kf(e.re)):e.sign()},BigNumber:function(e){return new n(e.cmp(0))},Fraction:function(e){return new i(e.s,1)},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e,!0))),Unit:t.referToSelf((e=>n=>{if(!n._isDerived()&&0!==n.units[0].unit.offset)throw new TypeError("sign is ambiguous for units with offset");return t.find(e,n.valueType())(n.value)}))})})),tg=zu("sqrt",["config","typed","Complex"],(e=>{var{config:t,typed:n,Complex:r}=e;return n("sqrt",{number:i,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():i(e.toNumber())},Unit:function(e){return e.pow(.5)}});function i(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new r(e,0).sqrt()}})),ng="square",rg=zu(ng,["typed"],(e=>{var{typed:t}=e;return t(ng,{number:Vf,Complex:function(e){return e.mul(e)},BigNumber:function(e){return e.times(e)},Fraction:function(e){return e.mul(e)},Unit:function(e){return e.pow(2)}})})),ig="subtract",ag=zu(ig,["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=e,l=Lm({typed:t}),u=Am({typed:t}),c=Nm({typed:t,equalScalar:r}),d=zm({typed:t,DenseMatrix:o}),p=lm({typed:t,DenseMatrix:o}),h=Tm({typed:t,matrix:n,concat:s});return t(ig,{"any, any":i},h({elop:i,SS:c,DS:l,SD:u,Ss:p,sS:d}))})),og="xgcd",sg=zu(og,["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i}=e;return t(og,{"number, number":function(e,t){var i=Uf(e,t);return"Array"===n.matrix?i:r(i)},"BigNumber, BigNumber":function(e,t){var a,o,s,l,u=new i(0),c=new i(1),d=u,p=c,h=c,f=u;if(!e.isInt()||!t.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!t.isZero();)o=e.div(t).floor(),s=e.mod(t),a=d,d=p.minus(o.times(d)),p=a,a=h,h=f.minus(o.times(h)),f=a,e=t,t=s;l=e.lt(u)?[e.neg(),p.neg(),f.neg()]:[e,e.isZero()?0:p,f];return"Array"===n.matrix?l:r(l)}})})),lg="invmod",ug=zu(lg,["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],(e=>{var{typed:t,config:n,BigNumber:r,xgcd:i,equal:a,smaller:o,mod:s,add:l,isInteger:u}=e;return t(lg,{"number, number":c,"BigNumber, BigNumber":c});function c(e,t){if(!u(e)||!u(t))throw new Error("Parameters in function invmod must be integer numbers");if(e=s(e,t),a(t,0))throw new Error("Divisor must be non zero");var n=i(e,t);n=n.valueOf();var[c,d]=n;return a(c,r(1))?(d=s(d,t),o(d,r(0))&&(d=l(d,t)),d):NaN}})),cg=zu("matAlgo09xS0Sf",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,l=e._size,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=r._values,d=r._index,p=r._ptr,h=r._size,f=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(l.length!==h.length)throw new Hu(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var m,g=l[0],v=l[1],y=n,b=0,x=i;"string"===typeof u&&u===f&&"mixed"!==u&&(m=u,y=t.find(n,[m,m]),b=t.convert(0,m),x=t.find(i,[m,m]));var D,w,_,S,C,E=a&&c?[]:void 0,k=[],A=[],N=E?[]:void 0,M=[];for(w=0;w<v;w++){A[w]=k.length;var F=w+1;if(N)for(S=p[w],C=p[w+1],_=S;_<C;_++)M[D=d[_]]=F,N[D]=c[_];for(S=s[w],C=s[w+1],_=S;_<C;_++)if(D=o[_],N){var T=M[D]===F?N[D]:b,B=x(a[_],T);y(B,b)||(k.push(D),E.push(B))}else k.push(D)}return A[v]=k.length,e.createSparseMatrix({values:E,index:k,ptr:A,size:[g,v],datatype:u===e._datatype&&f===r._datatype?m:void 0})}})),dg="dotMultiply",pg=zu(dg,["typed","matrix","equalScalar","multiplyScalar","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,multiplyScalar:i,concat:a}=e,o=km({typed:t,equalScalar:r}),s=cg({typed:t,equalScalar:r}),l=sm({typed:t,equalScalar:r}),u=Tm({typed:t,matrix:n,concat:a});return t(dg,u({elop:i,SS:s,DS:o,Ss:l}))}));function hg(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitAnd");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&&!t.isFinite())return e.isNegative()===t.isNegative()?e:new n(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e}return gg(e,t,(function(e,t){return e&t}))}function fg(e){if(e.isFinite()&&!e.isInteger())throw new Error("Integer expected in function bitNot");var t=e.constructor,n=t.precision;t.config({precision:1e9});var r=e.plus(new t(1));return r.s=-r.s||null,t.config({precision:n}),r}function mg(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitOr");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);var r=new n(-1);return e.isZero()||t.eq(r)||e.eq(t)?t:t.isZero()||e.eq(r)?e:e.isFinite()&&t.isFinite()?gg(e,t,(function(e,t){return e|t})):!e.isFinite()&&!e.isNegative()&&t.isNegative()||e.isNegative()&&!t.isNegative()&&!t.isFinite()?r:e.isNegative()&&t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e}function gg(e,t,n){var r,i,a,o,s,l=e.constructor,u=+(e.s<0),c=+(t.s<0);if(u){r=vg(fg(e));for(var d=0;d<r.length;++d)r[d]^=1}else r=vg(e);if(c){i=vg(fg(t));for(var p=0;p<i.length;++p)i[p]^=1}else i=vg(t);r.length<=i.length?(a=r,o=i,s=u):(a=i,o=r,s=c);var h=a.length,f=o.length,m=1^n(u,c),g=new l(1^m),v=new l(1),y=new l(2),b=l.precision;for(l.config({precision:1e9});h>0;)n(a[--h],o[--f])===m&&(g=g.plus(v)),v=v.times(y);for(;f>0;)n(s,o[--f])===m&&(g=g.plus(v)),v=v.times(y);return l.config({precision:b}),0===m&&(g.s=-g.s),g}function vg(e){for(var t=e.d,n=t[0]+"",r=1;r<t.length;++r){for(var i=t[r]+"",a=7-i.length;a--;)i="0"+i;n+=i}for(var o=n.length;"0"===n.charAt(o);)o--;var s=e.e,l=n.slice(0,o+1||1),u=l.length;if(s>0)if(++s>u)for(s-=u;s--;)l+="0";else s<u&&(l=l.slice(0,s)+"."+l.slice(s));for(var c=[0],d=0;d<l.length;){for(var p=c.length;p--;)c[p]*=10;c[0]+=parseInt(l.charAt(d++));for(var h=0;h<c.length;++h)c[h]>1&&(null!==c[h+1]&&void 0!==c[h+1]||(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function yg(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitXor");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new n(0);var r=new n(-1);return e.eq(r)?fg(t):t.eq(r)?fg(e):e.isFinite()&&t.isFinite()?gg(e,t,(function(e,t){return e^t})):e.isFinite()||t.isFinite()?new n(e.isNegative()===t.isNegative()?1/0:-1/0):r}function bg(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function leftShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:e.isFinite()||t.isFinite()?t.lt(55)?e.times(Math.pow(2,t.toNumber())+""):e.times(new n(2).pow(t)):new n(NaN)}function xg(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function rightArithShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+"").floor():e.div(new n(2).pow(t)).floor():e.isNegative()?new n(-1):e.isFinite()?new n(0):new n(NaN)}var Dg="number, number";function wg(e,t){if(!Zu(e)||!Zu(t))throw new Error("Integers expected in function bitAnd");return e&t}function _g(e){if(!Zu(e))throw new Error("Integer expected in function bitNot");return~e}function Sg(e,t){if(!Zu(e)||!Zu(t))throw new Error("Integers expected in function bitOr");return e|t}function Cg(e,t){if(!Zu(e)||!Zu(t))throw new Error("Integers expected in function bitXor");return e^t}function Eg(e,t){if(!Zu(e)||!Zu(t))throw new Error("Integers expected in function leftShift");return e<<t}function kg(e,t){if(!Zu(e)||!Zu(t))throw new Error("Integers expected in function rightArithShift");return e>>t}function Ag(e,t){if(!Zu(e)||!Zu(t))throw new Error("Integers expected in function rightLogShift");return e>>>t}wg.signature=Dg,_g.signature="number",Sg.signature=Dg,Cg.signature=Dg,Eg.signature=Dg,kg.signature=Dg,Ag.signature=Dg;var Ng="bitAnd",Mg=zu(Ng,["typed","matrix","equalScalar","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,concat:i}=e,a=km({typed:t,equalScalar:r}),o=Km({typed:t,equalScalar:r}),s=sm({typed:t,equalScalar:r}),l=Tm({typed:t,matrix:n,concat:i});return t(Ng,{"number, number":wg,"BigNumber, BigNumber":hg},l({SS:o,DS:a,Ss:s}))})),Fg="bitNot",Tg=zu(Fg,["typed"],(e=>{var{typed:t}=e;return t(Fg,{number:_g,BigNumber:fg,"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Bg="bitOr",Lg=zu(Bg,["typed","matrix","equalScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=e,o=Lm({typed:t}),s=Om({typed:t,equalScalar:r}),l=zm({typed:t,DenseMatrix:i}),u=Tm({typed:t,matrix:n,concat:a});return t(Bg,{"number, number":Sg,"BigNumber, BigNumber":mg},u({SS:s,DS:o,Ss:l}))})),Og=zu("matAlgo07xSSf",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,i,a){var o=e._size,s=e._datatype||void 0===e._data?e._datatype:e.getDataType(),l=i._size,u=i._datatype||void 0===i._data?i._datatype:i.getDataType();if(o.length!==l.length)throw new Hu(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");var c,d,p,h=o[0],f=o[1],m=0,g=a;"string"===typeof s&&s===u&&"mixed"!==s&&(c=s,m=t.convert(0,c),g=t.find(a,[c,c]));var v=[];for(d=0;d<h;d++)v[d]=[];var y=[],b=[],x=[],D=[];for(p=0;p<f;p++){var w=p+1;for(r(e,p,x,y,w),r(i,p,D,b,w),d=0;d<h;d++){var _=x[d]===w?y[d]:m,S=D[d]===w?b[d]:m;v[d][p]=g(_,S)}}return new n({data:v,size:[h,f],datatype:s===e._datatype&&u===i._datatype?c:void 0})};function r(e,t,n,r,i){for(var a=e._values,o=e._index,s=e._ptr,l=s[t],u=s[t+1];l<u;l++){var c=o[l];n[c]=i,r[c]=a[l]}}})),zg="bitXor",Ig=zu(zg,["typed","matrix","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,DenseMatrix:r,concat:i}=e,a=Am({typed:t}),o=Og({typed:t,DenseMatrix:r}),s=lm({typed:t,DenseMatrix:r}),l=Tm({typed:t,matrix:n,concat:i});return t(zg,{"number, number":Cg,"BigNumber, BigNumber":yg},l({SS:o,DS:a,Ss:s}))})),Pg=zu("arg",["typed"],(e=>{var{typed:t}=e;return t("arg",{number:function(e){return Math.atan2(0,e)},BigNumber:function(e){return e.constructor.atan2(0,e)},Complex:function(e){return e.arg()},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),qg="conj",Rg=zu(qg,["typed"],(e=>{var{typed:t}=e;return t(qg,{"number | BigNumber | Fraction":e=>e,Complex:e=>e.conjugate(),"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),jg=zu("im",["typed"],(e=>{var{typed:t}=e;return t("im",{number:()=>0,"BigNumber | Fraction":e=>e.mul(0),Complex:e=>e.im,"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Kg=zu("re",["typed"],(e=>{var{typed:t}=e;return t("re",{"number | BigNumber | Fraction":e=>e,Complex:e=>e.re,"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Vg="number, number";function Ug(e){return!e}function $g(e,t){return!(!e&&!t)}function Hg(e,t){return!!e!==!!t}function Wg(e,t){return!(!e||!t)}Ug.signature="number",$g.signature=Vg,Hg.signature=Vg,Wg.signature=Vg;var Gg=zu("not",["typed"],(e=>{var{typed:t}=e;return t("not",{"null | undefined":()=>!0,number:Ug,Complex:function(e){return 0===e.re&&0===e.im},BigNumber:function(e){return e.isZero()||e.isNaN()},Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Zg=zu("or",["typed","matrix","equalScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=e,o=Am({typed:t}),s=Nm({typed:t,equalScalar:r}),l=lm({typed:t,DenseMatrix:i}),u=Tm({typed:t,matrix:n,concat:a});return t("or",{"number, number":$g,"Complex, Complex":function(e,t){return 0!==e.re||0!==e.im||0!==t.re||0!==t.im},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!e.isNaN()||!t.isZero()&&!t.isNaN()},"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t.value||0,n.value||0)))},u({SS:s,DS:o,Ss:l}))})),Jg=zu("xor",["typed","matrix","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,DenseMatrix:r,concat:i}=e,a=Am({typed:t}),o=Og({typed:t,DenseMatrix:r}),s=lm({typed:t,DenseMatrix:r}),l=Tm({typed:t,matrix:n,concat:i});return t("xor",{"number, number":Hg,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)!==(0!==t.re||0!==t.im)},"BigNumber, BigNumber":function(e,t){return(!e.isZero()&&!e.isNaN())!==(!t.isZero()&&!t.isNaN())},"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t.value||0,n.value||0)))},l({SS:o,DS:a,Ss:s}))})),Xg="concat",Yg=zu(Xg,["typed","matrix","isInteger"],(e=>{var{typed:t,matrix:n,isInteger:r}=e;return t(Xg,{"...Array | Matrix | number | BigNumber":function(e){var t,i,a=e.length,o=-1,s=!1,l=[];for(t=0;t<a;t++){var u=e[t];if(Hl(u)&&(s=!0),ql(u)||Rl(u)){if(t!==a-1)throw new Error("Dimension must be specified as last argument");if(i=o,o=u.valueOf(),!r(o))throw new TypeError("Integer number expected for dimension");if(o<0||t>0&&o>i)throw new Wu(o,i+1)}else{var c=Eu(u).valueOf(),d=Wp(c);if(l[t]=c,i=o,o=d.length-1,t>0&&o!==i)throw new Hu(i+1,o+1)}}if(0===l.length)throw new SyntaxError("At least one matrix expected");for(var p=l.shift();l.length;)p=yh(p,l.shift(),o);return s?n(p):p},"...string":function(e){return e.join("")}})})),Qg="column",ev=zu(Qg,["typed","Index","matrix","range"],(e=>{var{typed:t,Index:n,matrix:r,range:i}=e;return t(Qg,{"Matrix, number":a,"Array, number":function(e,t){return a(r(Eu(e)),t).valueOf()}});function a(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");Xp(t,e.size()[1]);var a=i(0,e.size()[0]),o=new n(a,t),s=e.subset(o);return Hl(s)?s:r([[s]])}})),tv="count",nv=zu(tv,["typed","size","prod"],(e=>{var{typed:t,size:n,prod:r}=e;return t(tv,{string:function(e){return e.length},"Matrix | Array":function(e){return r(n(e))}})})),rv="cross",iv=zu(rv,["typed","matrix","subtract","multiply"],(e=>{var{typed:t,matrix:n,subtract:r,multiply:i}=e;return t(rv,{"Matrix, Matrix":function(e,t){return n(a(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return n(a(e.toArray(),t))},"Array, Matrix":function(e,t){return n(a(e,t.toArray()))},"Array, Array":a});function a(e,t){var n=Math.max(Wp(e).length,Wp(t).length);e=ih(e),t=ih(t);var a=Wp(e),o=Wp(t);if(1!==a.length||1!==o.length||3!==a[0]||3!==o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+a.join(", ")+"], B = ["+o.join(", ")+"])");var s=[r(i(e[1],t[2]),i(e[2],t[1])),r(i(e[2],t[0]),i(e[0],t[2])),r(i(e[0],t[1]),i(e[1],t[0]))];return n>1?[s]:s}})),av="diag",ov=zu(av,["typed","matrix","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(av,{Array:function(e){return a(e,0,Wp(e),null)},"Array, number":function(e,t){return a(e,t,Wp(e),null)},"Array, BigNumber":function(e,t){return a(e,t.toNumber(),Wp(e),null)},"Array, string":function(e,t){return a(e,0,Wp(e),t)},"Array, number, string":function(e,t,n){return a(e,t,Wp(e),n)},"Array, BigNumber, string":function(e,t,n){return a(e,t.toNumber(),Wp(e),n)},Matrix:function(e){return a(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return a(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return a(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return a(e,0,e.size(),t)},"Matrix, number, string":function(e,t,n){return a(e,t,e.size(),n)},"Matrix, BigNumber, string":function(e,t,n){return a(e,t.toNumber(),e.size(),n)}});function a(e,t,a,o){if(!Zu(t))throw new TypeError("Second parameter in function diag must be an integer");var s=t>0?t:0,l=t<0?-t:0;switch(a.length){case 1:return function(e,t,n,a,o,s){var l=[a+o,a+s];if(n&&"sparse"!==n&&"dense"!==n)throw new TypeError("Unknown matrix type ".concat(n,'"'));var u="sparse"===n?i.diagonal(l,e,t):r.diagonal(l,e,t);return null!==n?u:u.valueOf()}(e,t,o,a[0],l,s);case 2:return function(e,t,r,i,a,o){if(Hl(e)){var s=e.diagonal(t);return null!==r?r!==s.storage()?n(s,r):s:s.valueOf()}for(var l=Math.min(i[0]-a,i[1]-o),u=[],c=0;c<l;c++)u[c]=e[c+a][c+o];return null!==r?n(u):u}(e,t,o,a,l,s)}throw new RangeError("Matrix for function diag must be 2 dimensional")}}));function sv(e,t,n,r,i){if(Pl.isTypedFunction(e)){var a=[t,n,r],o=Pl.resolve(e,a);if(o)return d(o.implementation,a);var s=[t,n],l=Pl.resolve(e,s);if(l)return d(l.implementation,s);var u=[t],c=Pl.resolve(e,u);return c?d(c.implementation,u):d(e,a)}return e(t,n,r);function d(a,o){try{return a.apply(a,o)}catch(u){var s;if(u instanceof TypeError&&"wrongType"===(null===(s=u.data)||void 0===s?void 0:s.category)){var l=[];throw l.push("value: ".concat(Cu(t))),o.length>=2&&l.push("index: ".concat(Cu(n))),o.length>=3&&l.push("array: ".concat(Cu(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(e.name,"(").concat(l.join(", "),") at index ").concat(JSON.stringify(n)))}throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(e.name,": ").concat(u.message))}}}var lv=zu("filter",["typed"],(e=>{var{typed:t}=e;return t("filter",{"Array, function":uv,"Matrix, function":function(e,t){return e.create(uv(e.toArray(),t))},"Array, RegExp":ph,"Matrix, RegExp":function(e,t){return e.create(ph(e.toArray(),t))}})}));function uv(e,t){return dh(e,(function(e,n,r){return sv(t,e,[n],r,"filter")}))}var cv="flatten",dv=zu(cv,["typed","matrix"],(e=>{var{typed:t,matrix:n}=e;return t(cv,{Array:function(e){return lh(e)},Matrix:function(e){var t=lh(e.toArray());return n(t)}})})),pv="forEach",hv=zu(pv,["typed"],(e=>{var{typed:t}=e;return t(pv,{"Array, function":fv,"Matrix, function":function(e,t){e.forEach(t)}})}));function fv(e,t){!function n(r,i){if(!Array.isArray(r))return sv(t,r,i,e,"forEach");ch(r,(function(e,t){n(e,i.concat(t))}))}(e,[])}var mv="getMatrixDataType",gv=zu(mv,["typed"],(e=>{var{typed:t}=e;return t(mv,{Array:function(e){return gh(e,Cu)},Matrix:function(e){return e.getDataType()}})})),vv="identity",yv=zu(vv,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:a,SparseMatrix:o}=e;return t(vv,{"":function(){return"Matrix"===n.matrix?r([]):[]},string:function(e){return r(e)},"number | BigNumber":function(e){return l(e,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return l(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return l(e,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return l(e,t,n)},Array:function(e){return s(e)},"Array, string":function(e,t){return s(e,t)},Matrix:function(e){return s(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return s(e.valueOf(),t)}});function s(e,t){switch(e.length){case 0:return t?r(t):[];case 1:return l(e[0],e[0],t);case 2:return l(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function l(e,t,n){var r=Rl(e)||Rl(t)?i:null;if(Rl(e)&&(e=e.toNumber()),Rl(t)&&(t=t.toNumber()),!Zu(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!Zu(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var s=r?new i(1):1,l=r?new r(0):0,u=[e,t];if(n){if("sparse"===n)return o.diagonal(u,s,0,l);if("dense"===n)return a.diagonal(u,s,0,l);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var c=Qp([],u,l),d=e<t?e:t,p=0;p<d;p++)c[p][p]=s;return c}})),bv="kron",xv=zu(bv,["typed","matrix","multiplyScalar"],(e=>{var{typed:t,matrix:n,multiplyScalar:r}=e;return t(bv,{"Matrix, Matrix":function(e,t){return n(i(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return n(i(e.toArray(),t))},"Array, Matrix":function(e,t){return n(i(e,t.toArray()))},"Array, Array":i});function i(e,t){if(1===Wp(e).length&&(e=[e]),1===Wp(t).length&&(t=[t]),Wp(e).length>2||Wp(t).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(e.length)+", y = "+JSON.stringify(t.length)+")");var n=[],i=[];return e.map((function(e){return t.map((function(t){return i=[],n.push(i),e.map((function(e){return t.map((function(t){return i.push(r(e,t))}))}))}))}))&&n}})),Dv=zu("map",["typed"],(e=>{var{typed:t}=e;return t("map",{"Array, function":wv,"Matrix, function":function(e,t){return e.map(t)}})}));function wv(e,t){return function n(r,i){return Array.isArray(r)?r.map((function(e,t){return n(e,i.concat(t))})):sv(t,r,i,e,"map")}(e,[])}var _v="diff",Sv=zu(_v,["typed","matrix","subtract","number"],(e=>{var{typed:t,matrix:n,subtract:r,number:i}=e;return t(_v,{"Array | Matrix":function(e){return Hl(e)?n(o(e.toArray())):o(e)},"Array | Matrix, number":function(e,t){if(!Zu(t))throw new RangeError("Dimension must be a whole number");return Hl(e)?n(a(e.toArray(),t)):a(e,t)},"Array, BigNumber":t.referTo("Array,number",(e=>(t,n)=>e(t,i(n)))),"Matrix, BigNumber":t.referTo("Matrix,number",(e=>(t,n)=>e(t,i(n))))});function a(e,t){if(Hl(e)&&(e=e.toArray()),!Array.isArray(e))throw RangeError("Array/Matrix does not have that many dimensions");if(t>0){var n=[];return e.forEach((e=>{n.push(a(e,t-1))})),n}if(0===t)return o(e);throw RangeError("Cannot have negative dimension")}function o(e){for(var t=[],n=e.length,r=1;r<n;r++)t.push(s(e[r-1],e[r]));return t}function s(e,t){Hl(e)&&(e=e.toArray()),Hl(t)&&(t=t.toArray());var n=Array.isArray(e),i=Array.isArray(t);if(n&&i)return function(e,t){if(e.length!==t.length)throw RangeError("Not all sub-arrays have the same length");for(var n=[],r=e.length,i=0;i<r;i++)n.push(s(e[i],t[i]));return n}(e,t);if(!n&&!i)return r(t,e);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}})),Cv=zu("ones",["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i}=e;return t("ones",{"":function(){return"Array"===n.matrix?a([]):a([],"default")},"...number | BigNumber | string":function(e){if("string"===typeof e[e.length-1]){var t=e.pop();return a(e,t)}return"Array"===n.matrix?a(e):a(e,"default")},Array:a,Matrix:function(e){var t=e.storage();return a(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return a(e.valueOf(),t)}});function a(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,r){Rl(e)&&(t=!0,r[n]=e.toNumber())})),t}(e),a=n?new i(1):1;if(function(e){e.forEach((function(e){if("number"!==typeof e||!Zu(e)||e<0)throw new Error("Parameters in function ones must be positive integers")}))}(e),t){var o=r(t);return e.length>0?o.resize(e,a):o}var s=[];return e.length>0?Qp(s,e,a):s}}));function Ev(){throw new Error('No "bignumber" implementation available')}function kv(){throw new Error('No "fraction" implementation available')}function Av(){throw new Error('No "matrix" implementation available')}var Nv="range",Mv=zu(Nv,["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],(e=>{var{typed:t,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c}=e;return t(Nv,{string:p,"string, boolean":p,"number, number":function(e,t){return d(h(e,t,1,!1))},"number, number, number":function(e,t,n){return d(h(e,t,n,!1))},"number, number, boolean":function(e,t,n){return d(h(e,t,1,n))},"number, number, number, boolean":function(e,t,n,r){return d(h(e,t,n,r))},"BigNumber, BigNumber":function(e,t){return d(h(e,t,new(0,e.constructor)(1),!1))},"BigNumber, BigNumber, BigNumber":function(e,t,n){return d(h(e,t,n,!1))},"BigNumber, BigNumber, boolean":function(e,t,n){return d(h(e,t,new(0,e.constructor)(1),n))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,n,r){return d(h(e,t,n,r))},"Unit, Unit, Unit":function(e,t,n){return d(h(e,t,n,!1))},"Unit, Unit, Unit, boolean":function(e,t,n,r){return d(h(e,t,n,r))}});function d(e){return"Matrix"===n.matrix?r?r(e):Av():e}function p(e,t){var r=function(e){var t=e.split(":"),n=t.map((function(e){return Number(e)}));if(n.some((function(e){return isNaN(e)})))return null;switch(n.length){case 2:return{start:n[0],end:n[1],step:1};case 3:return{start:n[0],end:n[2],step:n[1]};default:return null}}(e);if(!r)throw new SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===n.number?(void 0===i&&Ev(),d(h(i(r.start),i(r.end),i(r.step)))):d(h(r.start,r.end,r.step,t))}function h(e,t,n,r){for(var i=[],d=c(n)?r?o:a:r?l:s,p=e;d(p,t);)i.push(p),p=u(p,n);return i}})),Fv="reshape",Tv=zu(Fv,["typed","isInteger","matrix"],(e=>{var{typed:t,isInteger:n}=e;return t(Fv,{"Matrix, Array":function(e,t){return e.reshape(t,!0)},"Array, Array":function(e,t){return t.forEach((function(e){if(!n(e))throw new TypeError("Invalid size for dimension: "+e)})),th(e,t)}})})),Bv=zu("resize",["config","matrix"],(e=>{var{config:t,matrix:n}=e;return function(e,r,i){if(2!==arguments.length&&3!==arguments.length)throw new qu("resize",arguments.length,2,3);if(Hl(r)&&(r=r.valueOf()),Rl(r[0])&&(r=r.map((function(e){return Rl(e)?e.toNumber():e}))),Hl(e))return e.resize(r,i,!0);if("string"===typeof e)return function(e,t,n){if(void 0!==n){if("string"!==typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";if(1!==t.length)throw new Hu(t.length,1);var r=t[0];if("number"!==typeof r||!Zu(r))throw new TypeError("Invalid size, must contain positive integers (size: "+jp(t)+")");if(e.length>r)return e.substring(0,r);if(e.length<r){for(var i=e,a=0,o=r-e.length;a<o;a++)i+=n;return i}return e}(e,r,i);var a=!Array.isArray(e)&&"Array"!==t.matrix;if(0===r.length){for(;Array.isArray(e);)e=e[0];return Eu(e)}Array.isArray(e)||(e=[e]);var o=Qp(e=Eu(e),r,i);return a?n(o):o}})),Lv="rotate",Ov=zu(Lv,["typed","multiply","rotationMatrix"],(e=>{var{typed:t,multiply:n,rotationMatrix:r}=e;return t(Lv,{"Array , number | BigNumber | Complex | Unit":function(e,t){return i(e,2),n(r(t),e).toArray()},"Matrix , number | BigNumber | Complex | Unit":function(e,t){return i(e,2),n(r(t),e)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,a){return i(e,3),n(r(t,a),e)},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,a){return i(e,3),n(r(t,a),e)}});function i(e,t){var n=Array.isArray(e)?Wp(e):e.size();if(n.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(t));if(2===n.length&&1!==n[1])throw new RangeError("Vector must be of dimensions 1x".concat(t));if(n[0]!==t)throw new RangeError("Vector must be of dimensions 1x".concat(t))}})),zv="rotationMatrix",Iv=zu(zv,["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],(e=>{var{typed:t,config:n,multiplyScalar:r,addScalar:i,unaryMinus:a,norm:o,BigNumber:s,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:d,sin:p}=e;return t(zv,{"":function(){return"Matrix"===n.matrix?l([]):[]},string:function(e){return l(e)},"number | BigNumber | Complex | Unit":function(e){return h(e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(e,t){return h(e,t)},"number | BigNumber | Complex | Unit, Array":function(e,t){var n=l(t);return f(n),v(e,n,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(e,t){f(t);var r=t.storage()||("Matrix"===n.matrix?"dense":void 0);return v(e,t,r)},"number | BigNumber | Complex | Unit, Array, string":function(e,t,n){var r=l(t);return f(r),v(e,r,n)},"number | BigNumber | Complex | Unit, Matrix, string":function(e,t,n){return f(t),v(e,t,n)}});function h(e,t){var n=Rl(e)?new s(-1):-1,i=d(e),a=p(e);return g([[i,r(n,a)],[a,i]],t)}function f(e){var t=e.size();if(t.length<1||3!==t[0])throw new RangeError("Vector must be of dimensions 1x3")}function m(e){return e.reduce(((e,t)=>r(e,t)))}function g(e,t){if(t){if("sparse"===t)return new c(e);if("dense"===t)return new u(e);throw new TypeError('Unknown matrix type "'.concat(t,'"'))}return e}function v(e,t,n){var r=o(t);if(0===r)throw new RangeError("Rotation around zero vector");var l=Rl(e)?s:null,u=l?new l(1):1,c=l?new l(-1):-1,h=l?new l(t.get([0])/r):t.get([0])/r,f=l?new l(t.get([1])/r):t.get([1])/r,v=l?new l(t.get([2])/r):t.get([2])/r,y=d(e),b=i(u,a(y)),x=p(e);return g([[i(y,m([h,h,b])),i(m([h,f,b]),m([c,v,x])),i(m([h,v,b]),m([f,x]))],[i(m([h,f,b]),m([v,x])),i(y,m([f,f,b])),i(m([f,v,b]),m([c,h,x]))],[i(m([h,v,b]),m([c,f,x])),i(m([f,v,b]),m([h,x])),i(y,m([v,v,b]))]],n)}})),Pv=zu("row",["typed","Index","matrix","range"],(e=>{var{typed:t,Index:n,matrix:r,range:i}=e;return t("row",{"Matrix, number":a,"Array, number":function(e,t){return a(r(Eu(e)),t).valueOf()}});function a(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");Xp(t,e.size()[0]);var a=i(0,e.size()[1]),o=new n(t,a),s=e.subset(o);return Hl(s)?s:r([[s]])}})),qv="size",Rv=zu(qv,["typed","config","?matrix"],(e=>{var{typed:t,config:n,matrix:r}=e;return t(qv,{Matrix:function(e){return e.create(e.size())},Array:Wp,string:function(e){return"Array"===n.matrix?[e.length]:r([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===n.matrix?[]:r?r([]):Av()}})})),jv="squeeze",Kv=zu(jv,["typed","matrix"],(e=>{var{typed:t,matrix:n}=e;return t(jv,{Array:function(e){return ih(Eu(e))},Matrix:function(e){var t=ih(e.toArray());return Array.isArray(t)?n(t):t},any:function(e){return Eu(e)}})})),Vv="subset",Uv=zu(Vv,["typed","matrix","zeros","add"],(e=>{var{typed:t,matrix:n,zeros:r,add:i}=e;return t(Vv,{"Matrix, Index":function(e,t){return Yp(t)?n():(Jp(e,t),e.subset(t))},"Array, Index":t.referTo("Matrix, Index",(function(e){return function(t,r){var i=e(n(t),r);return r.isScalar()?i:i.valueOf()}})),"Object, Index":Wv,"string, Index":$v,"Matrix, Index, any, any":function(e,t,n,a){return Yp(t)?e:(Jp(e,t),e.clone().subset(t,function(e,t){if("string"===typeof e)throw new Error("can't boradcast a string");if(t._isScalar)return e;var n=t.size();if(!n.every((e=>e>0)))return e;try{return i(e,r(n))}catch(a){return e}}(n,t),a))},"Array, Index, any, any":t.referTo("Matrix, Index, any, any",(function(e){return function(t,r,i,a){var o=e(n(t),r,i,a);return o.isMatrix?o.valueOf():o}})),"Array, Index, any":t.referTo("Matrix, Index, any, any",(function(e){return function(t,r,i){return e(n(t),r,i,void 0).valueOf()}})),"Matrix, Index, any":t.referTo("Matrix, Index, any, any",(function(e){return function(t,n,r){return e(t,n,r,void 0)}})),"string, Index, string":Hv,"string, Index, string, string":Hv,"Object, Index, any":Gv})}));function $v(e,t){if(!Xl(t))throw new TypeError("Index expected");if(Yp(t))return"";if(Jp(Array.from(e),t),1!==t.size().length)throw new Hu(t.size().length,1);var n=e.length;Xp(t.min()[0],n),Xp(t.max()[0],n);var r=t.dimension(0),i="";return r.forEach((function(t){i+=e.charAt(t)})),i}function Hv(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Index expected");if(Yp(t))return e;if(Jp(Array.from(e),t),1!==t.size().length)throw new Hu(t.size().length,1);if(void 0!==r){if("string"!==typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=t.dimension(0);if(i.size()[0]!==n.length)throw new Hu(i.size()[0],n.length);var a=e.length;Xp(t.min()[0]),Xp(t.max()[0]);for(var o=[],s=0;s<a;s++)o[s]=e.charAt(s);if(i.forEach((function(e,t){o[e]=n.charAt(t[0])})),o.length>a)for(var l=a-1,u=o.length;l<u;l++)o[l]||(o[l]=r);return o.join("")}function Wv(e,t){if(!Yp(t)){if(1!==t.size().length)throw new Hu(t.size(),1);var n=t.dimension(0);if("string"!==typeof n)throw new TypeError("String expected as index to retrieve an object property");return xc(e,n)}}function Gv(e,t,n){if(Yp(t))return e;if(1!==t.size().length)throw new Hu(t.size(),1);var r=t.dimension(0);if("string"!==typeof r)throw new TypeError("String expected as index to retrieve an object property");var i=Eu(e);return Dc(i,r,n),i}var Zv="transpose",Jv=zu(Zv,["typed","matrix"],(e=>{var{typed:t,matrix:n}=e;return t(Zv,{Array:e=>r(n(e)).valueOf(),Matrix:r,any:Eu});function r(e){var t,n=e.size();switch(n.length){case 1:t=e.clone();break;case 2:var r=n[0],i=n[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+jp(n)+")");switch(e.storage()){case"dense":t=function(e,t,n){for(var r,i=e._data,a=[],o=0;o<n;o++){r=a[o]=[];for(var s=0;s<t;s++)r[s]=Eu(i[s][o])}return e.createDenseMatrix({data:a,size:[n,t],datatype:e._datatype})}(e,r,i);break;case"sparse":t=function(e,t,n){for(var r,i,a,o=e._values,s=e._index,l=e._ptr,u=o?[]:void 0,c=[],d=[],p=[],h=0;h<t;h++)p[h]=0;for(r=0,i=s.length;r<i;r++)p[s[r]]++;for(var f=0,m=0;m<t;m++)d.push(f),f+=p[m],p[m]=d[m];for(d.push(f),a=0;a<n;a++)for(var g=l[a],v=l[a+1],y=g;y<v;y++){var b=p[s[y]]++;c[b]=a,o&&(u[b]=Eu(o[y]))}return e.createSparseMatrix({values:u,index:c,ptr:d,size:[n,t],datatype:e._datatype})}(e,r,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+jp(n)+")")}return t}})),Xv="ctranspose",Yv=zu(Xv,["typed","transpose","conj"],(e=>{var{typed:t,transpose:n,conj:r}=e;return t(Xv,{any:function(e){return r(n(e))}})})),Qv="zeros",ey=zu(Qv,["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i}=e;return t(Qv,{"":function(){return"Array"===n.matrix?a([]):a([],"default")},"...number | BigNumber | string":function(e){if("string"===typeof e[e.length-1]){var t=e.pop();return a(e,t)}return"Array"===n.matrix?a(e):a(e,"default")},Array:a,Matrix:function(e){var t=e.storage();return a(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return a(e.valueOf(),t)}});function a(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,r){Rl(e)&&(t=!0,r[n]=e.toNumber())})),t}(e),a=n?new i(0):0;if(function(e){e.forEach((function(e){if("number"!==typeof e||!Zu(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),t){var o=r(t);return e.length>0?o.resize(e,a):o}var s=[];return e.length>0?Qp(s,e,a):s}})),ty=zu("fft",["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],(e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,divideScalar:a,exp:o,tau:s,i:l,dotDivide:u,conj:c,pow:d,ceil:p,log2:h}=e;return t("fft",{Array:f,Matrix:function(e){return e.create(f(e.toArray()))}});function f(e){var t=Wp(e);return 1===t.length?g(e,t[0]):m(e.map((e=>f(e,t.slice(1)))),0)}function m(e,t){var n=Wp(e);if(0!==t)return new Array(n[0]).fill(0).map(((n,r)=>m(e[r],t-1)));if(1===n.length)return g(e);function r(e){var t=Wp(e);return new Array(t[1]).fill(0).map(((n,r)=>new Array(t[0]).fill(0).map(((t,n)=>e[n][r]))))}return r(m(r(e),1))}function g(e){var t=e.length;if(1===t)return[e[0]];if(t%2===0){for(var n=[...g(e.filter(((e,t)=>t%2===0))),...g(e.filter(((e,t)=>t%2===1)))],m=0;m<t/2;m++){var v=n[m],y=i(n[m+t/2],o(i(i(s,l),a(-m,t))));n[m]=r(v,y),n[m+t/2]=r(v,i(-1,y))}return n}return function(e){for(var t=e.length,n=o(a(i(-1,i(l,s)),t)),r=[],m=1-t;m<t;m++)r.push(d(n,a(d(m,2),2)));for(var v=d(2,p(h(t+t-1))),y=[...new Array(t).fill(0).map(((n,a)=>i(e[a],r[t-1+a]))),...new Array(v-t).fill(0)],b=[...new Array(t+t-1).fill(0).map(((e,t)=>a(1,r[t]))),...new Array(v-(t+t-1)).fill(0)],x=g(y),D=g(b),w=new Array(v).fill(0).map(((e,t)=>i(x[t],D[t]))),_=u(c(f(c(w))),v),S=[],C=t-1;C<t+t-1;C++)S.push(i(_[C],r[C]));return S}(e)}})),ny="ifft",ry=zu(ny,["typed","fft","dotDivide","conj"],(e=>{var{typed:t,fft:n,dotDivide:r,conj:i}=e;return t(ny,{"Array | Matrix":function(e){var t=Hl(e)?e.size():Wp(e);return r(i(n(i(e))),t.reduce(((e,t)=>e*t),1))}})}));function iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ay=zu("solveODE",["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],(e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:a,max:s,map:l,abs:u,isPositive:c,isNegative:d,larger:p,smaller:h,matrix:f,bignumber:m,unaryMinus:g}=e;function v(e){return function(t,o,f,v){if(!(2===o.length&&(o.every(D)||o.every(Vl))))throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var y=o[0],b=o[1],x=p(b,y),w=v.firstStep;if(void 0!==w&&!c(w))throw new Error('"firstStep" must be positive');var _=v.maxStep;if(void 0!==_&&!c(_))throw new Error('"maxStep" must be positive');var S=v.minStep;if(S&&d(S))throw new Error('"minStep" must be positive or zero');var C=[y,b,w,S,_].filter((e=>void 0!==e));if(!C.every(D)&&!C.every(Vl))throw new Error('Inconsistent type of "t" dependant variables');for(var E=v.tol?v.tol:1e-4,k=v.minDelta?v.minDelta:.2,A=v.maxDelta?v.maxDelta:5,N=v.maxIter?v.maxIter:1e4,M=[y,b,...f,_,S].some(Rl),[F,T,B,L]=M?[m(e.a),m(e.c),m(e.b),m(e.bp)]:[e.a,e.c,e.b,e.bp],O=w?x?w:g(w):a(r(b,y),1),z=[y],I=[f],P=r(B,L),q=0,R=0,j=function(e){return e?h:p}(x),K=function(e){var t=e?p:h;return function(e,i,a){var o=n(e,a);return t(o,i)?r(i,e):a}}(x);j(z[q],b);){var V=[];O=K(z[q],b,O),V.push(t(z[q],I[q]));for(var U=1;U<T.length;++U)V.push(t(n(z[q],i(T[U],O)),n(I[q],i(O,F[U],V))));var $=s(u(l(i(P,V),(e=>Vl(e)?e.value:e))));$<E&&E/$>1/4&&(z.push(n(z[q],O)),I.push(n(I[q],i(O,B,V))),q++);var H=.84*(E/$)**.2;if(h(H,k)?H=k:p(H,A)&&(H=A),H=M?m(H):H,O=i(O,H),_&&p(u(O),_)?O=x?_:g(_):S&&h(u(O),S)&&(O=x?S:g(S)),++R>N)throw new Error("Maximum number of iterations reached, try changing options")}return{t:z,y:I}}}function y(e,t,n,r){return v({a:[[],[.5],[0,3/4],[2/9,1/3,4/9]],c:[null,.5,3/4,1],b:[2/9,1/3,4/9,0],bp:[7/24,1/4,1/3,1/8]})(e,t,n,r)}function b(e,t,n,r){return v({a:[[],[.2],[3/40,9/40],[44/45,-56/15,32/9],[19372/6561,-25360/2187,64448/6561,-212/729],[9017/3168,-355/33,46732/5247,49/176,-5103/18656],[35/384,0,500/1113,125/192,-2187/6784,11/84]],c:[null,.2,.3,.8,8/9,1,1],b:[35/384,0,500/1113,125/192,-2187/6784,11/84,0],bp:[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40]})(e,t,n,r)}function x(e,t,n,r){var i=r.method?r.method:"RK45",a={RK23:y,RK45:b};if(i.toUpperCase()in a){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iy(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r);return delete s.method,a[i.toUpperCase()](e,t,n,s)}var l=Object.keys(a).map((e=>'"'.concat(e,'"'))),u="".concat(l.slice(0,-1).join(", ")," and ").concat(l.slice(-1));throw new Error('Unavailable method "'.concat(i,'". Available methods are ').concat(u))}function D(e){return Rl(e)||ql(e)}function w(e,t,n,r){var i=x(e,t.toArray(),n.toArray(),r);return{t:f(i.t),y:f(i.y)}}return t("solveODE",{"function, Array, Array, Object":x,"function, Matrix, Matrix, Object":w,"function, Array, Array":(e,t,n)=>x(e,t,n,{}),"function, Matrix, Matrix":(e,t,n)=>w(e,t,n,{}),"function, Array, number | BigNumber | Unit":(e,t,n)=>{var r=x(e,t,[n],{});return{t:r.t,y:r.y.map((e=>e[0]))}},"function, Matrix, number | BigNumber | Unit":(e,t,n)=>{var r=x(e,t.toArray(),[n],{});return{t:f(r.t),y:f(r.y.map((e=>e[0])))}},"function, Array, number | BigNumber | Unit, Object":(e,t,n,r)=>{var i=x(e,t,[n],r);return{t:i.t,y:i.y.map((e=>e[0]))}},"function, Matrix, number | BigNumber | Unit, Object":(e,t,n,r)=>{var i=x(e,t.toArray(),[n],r);return{t:f(i.t),y:f(i.y.map((e=>e[0])))}}})})),oy=zu("erf",["typed"],(e=>{var{typed:t}=e;return t("name",{number:function(e){var t=Math.abs(e);return t>=dy?Ju(e):t<=sy?Ju(e)*function(e){var t,n=e*e,r=uy[0][4]*n,i=n;for(t=0;t<3;t+=1)r=(r+uy[0][t])*n,i=(i+cy[0][t])*n;return e*(r+uy[0][3])/(i+cy[0][3])}(t):t<=4?Ju(e)*(1-function(e){var t,n=uy[1][8]*e,r=e;for(t=0;t<7;t+=1)n=(n+uy[1][t])*e,r=(r+cy[1][t])*e;var i=(n+uy[1][7])/(r+cy[1][7]),a=parseInt(16*e)/16,o=(e-a)*(e+a);return Math.exp(-a*a)*Math.exp(-o)*i}(t)):Ju(e)*(1-function(e){var t,n=1/(e*e),r=uy[2][5]*n,i=n;for(t=0;t<4;t+=1)r=(r+uy[2][t])*n,i=(i+cy[2][t])*n;var a=n*(r+uy[2][4])/(i+cy[2][4]);a=(ly-a)/e,n=parseInt(16*e)/16;var o=(e-n)*(e+n);return Math.exp(-n*n)*Math.exp(-o)*a}(t))},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),sy=.46875,ly=.5641895835477563,uy=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],cy=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],dy=Math.pow(2,53),py="zeta",hy=zu(py,["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],(e=>{var{typed:t,config:n,multiply:r,pow:i,divide:a,factorial:o,equal:s,smallerEq:l,isNegative:u,gamma:c,sin:d,subtract:p,add:h,Complex:f,BigNumber:m,pi:g}=e;return t(py,{number:e=>v(e,(e=>e),(()=>20)),BigNumber:e=>v(e,(e=>new m(e)),(()=>Math.abs(Math.log10(n.epsilon)))),Complex:function(e){if(0===e.re&&0===e.im)return new f(-.5);if(1===e.re)return new f(NaN,NaN);if(e.re===1/0&&0===e.im)return new f(1);if(e.im===1/0||e.re===-1/0)return new f(NaN,NaN);return y(e,(e=>e),(e=>Math.round(19.5+.9*Math.abs(e.im))),(e=>e.re))}});function v(e,t,n){return s(e,0)?t(-.5):s(e,1)?t(NaN):isFinite(e)?y(e,t,n,(e=>e)):u(e)?t(NaN):t(1)}function y(e,t,n,o){var s=n(e);if(o(e)>-(s-1)/2)return function(e,t,n){for(var o=a(1,r(b(n(0),t),p(1,i(2,p(1,e))))),s=n(0),u=n(1);l(u,t);u=h(u,1))s=h(s,a(r((-1)**(u-1),b(u,t)),i(u,e)));return r(o,s)}(e,t(s),t);var u=r(i(2,e),i(t(g),p(e,1)));return u=r(u,d(r(a(t(g),2),e))),u=r(u,c(p(1,e))),r(u,y(p(1,e),t,n,o))}function b(e,t){for(var n=e,s=e;l(s,t);s=h(s,1)){var u=a(r(o(h(t,p(s,1))),i(4,s)),r(o(p(t,s)),o(r(2,s))));n=h(n,u)}return r(t,n)}})),fy="mode",my=zu(fy,["typed","isNaN","isNumeric"],(e=>{var{typed:t,isNaN:n,isNumeric:r}=e;return t(fy,{"Array | Matrix":i,"...":function(e){return i(e)}});function i(e){if(0===(e=lh(e.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var t={},i=[],a=0,o=0;o<e.length;o++){var s=e[o];if(r(s)&&n(s))throw new Error("Cannot calculate mode of an array containing NaN values");s in t||(t[s]=0),t[s]++,t[s]===a?i.push(s):t[s]>a&&(a=t[s],i=[s])}return i}}));function gy(e,t,n){var r;return String(e).includes("Unexpected type")?(r=arguments.length>2?" (type: "+Cu(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+r)):String(e).includes("complex numbers")?(r=arguments.length>2?" (type: "+Cu(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+r)):e}var vy="prod",yy=zu(vy,["typed","config","multiplyScalar","numeric"],(e=>{var{typed:t,config:n,multiplyScalar:r,numeric:i}=e;return t(vy,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("prod(A, dim) is not yet supported")},"...":function(e){return a(e)}});function a(e){var t;if(Mh(e,(function(e){try{t=void 0===t?e:r(t,e)}catch(n){throw gy(n,"prod",e)}})),"string"===typeof t&&(t=i(t,n.number)),void 0===t)throw new Error("Cannot calculate prod of an empty array");return t}})),by="format",xy=zu(by,["typed"],(e=>{var{typed:t}=e;return t(by,{any:jp,"any, Object | function | number | BigNumber":jp})})),Dy=zu("bin",["typed","format"],(e=>{var{typed:t,format:n}=e;return t("bin",{"number | BigNumber":function(e){return n(e,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(e,t){return n(e,{notation:"bin",wordSize:t})}})})),wy=zu("oct",["typed","format"],(e=>{var{typed:t,format:n}=e;return t("oct",{"number | BigNumber":function(e){return n(e,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(e,t){return n(e,{notation:"oct",wordSize:t})}})})),_y=zu("hex",["typed","format"],(e=>{var{typed:t,format:n}=e;return t("hex",{"number | BigNumber":function(e){return n(e,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(e,t){return n(e,{notation:"hex",wordSize:t})}})})),Sy=/\$([\w.]+)/g,Cy="print",Ey=zu(Cy,["typed"],(e=>{var{typed:t}=e;return t(Cy,{"string, Object | Array":ky,"string, Object | Array, number | Object":ky})}));function ky(e,t,n){return e.replace(Sy,(function(e,r){var i=r.split("."),a=t[i.shift()];for(void 0!==a&&a.isMatrix&&(a=a.toArray());i.length&&void 0!==a;){var o=i.shift();a=o?a[o]:a+"."}return void 0!==a?Ul(a)?a:jp(a,n):e}))}var Ay=zu("to",["typed","matrix","concat"],(e=>{var{typed:t,matrix:n,concat:r}=e;return t("to",{"Unit, Unit | string":(e,t)=>e.to(t)},Tm({typed:t,matrix:n,concat:r})({Ds:!0}))})),Ny="isPrime",My=zu(Ny,["typed"],(e=>{var{typed:t}=e;return t(Ny,{number:function(e){if(0*e!==0)return!1;if(e<=3)return e>1;if(e%2===0||e%3===0)return!1;for(var t=5;t*t<=e;t+=6)if(e%t===0||e%(t+2)===0)return!1;return!0},BigNumber:function(e){if(0*e.toNumber()!==0)return!1;if(e.lte(3))return e.gt(1);if(e.mod(2).eq(0)||e.mod(3).eq(0))return!1;if(e.lt(Math.pow(2,32))){for(var t=e.toNumber(),n=5;n*n<=t;n+=6)if(t%n===0||t%(n+2)===0)return!1;return!0}function r(e,t,n){for(var r=1;!t.eq(0);)t.mod(2).eq(0)?(t=t.div(2),e=e.mul(e).mod(n)):(t=t.sub(1),r=e.mul(r).mod(n));return r}for(var i=e.constructor.clone({precision:2*e.toFixed(0).length}),a=0,o=(e=new i(e)).sub(1);o.mod(2).eq(0);)o=o.div(2),a+=1;var s=null;if(e.lt("3317044064679887385961981"))s=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter((t=>t<e));else{var l=Math.min(e.toNumber()-2,Math.floor(2*Math.pow(e.toFixed(0).length*Math.log(10),2)));s=[];for(var u=2;u<=l;u+=1)s.push(l)}for(var c=0;c<s.length;c+=1){var d=s[c],p=r(e.sub(e).add(d),o,e);if(!p.eq(1))for(var h=0,f=p;!f.eq(e.sub(1));h+=1,f=f.mul(f).mod(e))if(h===a-1)return!1}return!0},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),Fy=zu("numeric",["number","?bignumber","?fraction"],(e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:e=>t(e),BigNumber:n?e=>n(e):Ev,Fraction:r?e=>r(e):kv};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";if(void 0!==(arguments.length>2?arguments[2]:void 0))throw new SyntaxError("numeric() takes one or two arguments");var n=Cu(e);if(!(n in i))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in a))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(a).join(", "));return t===n?e:a[t](e)}})),Ty="divideScalar",By=zu(Ty,["typed","numeric"],(e=>{var{typed:t,numeric:n}=e;return t(Ty,{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Complex | Fraction | BigNumber | Unit":(e,t)=>e.divide(t),"number | Fraction | Complex | BigNumber, Unit":(e,t)=>t.divideInto(e)})})),Ly=zu("pow",["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],(e=>{var{typed:t,config:n,identity:r,multiply:i,matrix:a,inv:o,number:s,fraction:l,Complex:u}=e;return t("pow",{"number, number":c,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,t){return t.isInteger()||e>=0||n.predictable?e.pow(t):new u(e.toNumber(),0).pow(t.toNumber(),0)},"Fraction, Fraction":function(e,t){var r=e.pow(t);if(null!=r)return r;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(e.valueOf(),t.valueOf())},"Array, number":d,"Array, BigNumber":function(e,t){return d(e,t.toNumber())},"Matrix, number":p,"Matrix, BigNumber":function(e,t){return p(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function c(e,t){if(n.predictable&&!Zu(t)&&e<0)try{var r=l(t),i=s(r);if((t===i||Math.abs((t-i)/t)<1e-14)&&r.d%2===1)return(r.n%2===0?1:-1)*Math.pow(-e,t)}catch(a){}return n.predictable&&(e<-1&&t===1/0||e>-1&&e<0&&t===-1/0)?NaN:Zu(t)||e>=0||n.predictable?$f(e,t):e*e<1&&t===1/0||e*e>1&&t===-1/0?0:new u(e,0).pow(t,0)}function d(e,t){if(!Zu(t))throw new TypeError("For A^b, b must be an integer (value is "+t+")");var n=Wp(e);if(2!==n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!==n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");if(t<0)try{return d(o(e),-t)}catch(l){if("Cannot calculate inverse, determinant is zero"===l.message)throw new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+t+")");throw l}for(var a=r(n[0]).valueOf(),s=e;t>=1;)1===(1&t)&&(a=i(s,a)),t>>=1,s=i(s,s);return a}function p(e,t){return a(d(e.valueOf(),t))}})),Oy="Number of decimals in function round must be an integer",zy="round",Iy=zu(zy,["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],(e=>{var{typed:t,config:n,matrix:r,equalScalar:i,zeros:a,BigNumber:o,DenseMatrix:s}=e,l=sm({typed:t,equalScalar:i}),u=lm({typed:t,DenseMatrix:s}),c=um({typed:t});function d(e){return Math.abs(ac(e).exponent)}return t(zy,{number:function(e){var t=Hf(e,d(n.epsilon));return Hf(dc(e,t,n.epsilon)?t:e)},"number, number":function(e,t){var r=d(n.epsilon);if(t>=r)return Hf(e,t);var i=Hf(e,r);return Hf(dc(e,i,n.epsilon)?i:e,t)},"number, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Oy);return new o(e).toDecimalPlaces(t.toNumber())},Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(Oy);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Oy);var n=t.toNumber();return e.round(n)},BigNumber:function(e){var t=new o(e).toDecimalPlaces(d(n.epsilon));return(nf(e,t,n.epsilon)?t:e).toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Oy);var r=d(n.epsilon);if(t>=r)return e.toDecimalPlaces(t.toNumber());var i=e.toDecimalPlaces(r);return(nf(e,i,n.epsilon)?i:e).toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(Oy);return e.round(t)},"Fraction, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Oy);return e.round(t.toNumber())},"Unit, number, Unit":t.referToSelf((e=>function(t,n,r){var i=t.toNumeric(r);return r.multiply(e(i,n))})),"Unit, BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>e(t,n.toNumber(),r))),"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t,0,n))),"Array | Matrix, number, Unit":t.referToSelf((e=>(t,n,r)=>Fh(t,(t=>e(t,n,r)),!0))),"Array | Matrix, BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>e(t,n.toNumber(),r))),"Array | Matrix, Unit":t.referToSelf((e=>(t,n)=>e(t,0,n))),"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e,!0))),"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>l(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>c(t,n,e,!1))),"Array, number | BigNumber":t.referToSelf((e=>(t,n)=>c(r(t),n,e,!1).valueOf())),"number | Complex | BigNumber | Fraction, SparseMatrix":t.referToSelf((e=>(t,n)=>i(t,0)?a(n.size(),n.storage()):u(n,t,e,!0))),"number | Complex | BigNumber | Fraction, DenseMatrix":t.referToSelf((e=>(t,n)=>i(t,0)?a(n.size(),n.storage()):c(n,t,e,!0))),"number | Complex | BigNumber | Fraction, Array":t.referToSelf((e=>(t,n)=>c(r(n),t,e,!0).valueOf()))})})),Py=zu("log",["config","typed","divideScalar","Complex"],(e=>{var{typed:t,config:n,divideScalar:r,Complex:i}=e;return t("log",{number:function(e){return e>=0||n.predictable?function(e,t){return t?Math.log(e)/Math.log(t):Math.log(e)}(e):new i(e,0).log()},Complex:function(e){return e.log()},BigNumber:function(e){return!e.isNegative()||n.predictable?e.ln():new i(e.toNumber(),0).log()},"any, any":t.referToSelf((e=>(t,n)=>r(e(t),e(n))))})})),qy="log1p",Ry=zu(qy,["typed","config","divideScalar","log","Complex"],(e=>{var{typed:t,config:n,divideScalar:r,log:i,Complex:a}=e;return t(qy,{number:function(e){return e>=-1||n.predictable?Qu(e):o(new a(e,0))},Complex:o,BigNumber:function(e){var t=e.plus(1);return!t.isNegative()||n.predictable?t.ln():o(new a(e.toNumber(),0))},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e))),"any, any":t.referToSelf((e=>(t,n)=>r(e(t),i(n))))});function o(e){var t=e.re+1;return new a(Math.log(Math.sqrt(t*t+e.im*e.im)),Math.atan2(e.im,t))}})),jy="nthRoots",Ky=zu(jy,["config","typed","divideScalar","Complex"],(e=>{var{typed:t,config:n,divideScalar:r,Complex:i}=e,a=[function(e){return new i(e,0)},function(e){return new i(0,e)},function(e){return new i(-e,0)},function(e){return new i(0,-e)}];function o(e,t){if(t<0)throw new Error("Root must be greater than zero");if(0===t)throw new Error("Root must be non-zero");if(t%1!==0)throw new Error("Root must be an integer");if(0===e||0===e.abs())return[new i(0,0)];var n,r="number"===typeof e;(r||0===e.re||0===e.im)&&(n=r?2*+(e<0):0===e.im?2*+(e.re<0):2*+(e.im<0)+1);for(var o=e.arg(),s=e.abs(),l=[],u=Math.pow(s,1/t),c=0;c<t;c++){var d=(n+4*c)/t;d!==Math.round(d)?l.push(new i({r:u,phi:(o+2*Math.PI*c)/t})):l.push(a[d%4](u))}return l}return t(jy,{Complex:function(e){return o(e,2)},"Complex, number":o})})),Vy="dotPow",Uy=zu(Vy,["typed","equalScalar","matrix","pow","DenseMatrix","concat"],(e=>{var{typed:t,equalScalar:n,matrix:r,pow:i,DenseMatrix:a,concat:o}=e,s=Am({typed:t}),l=Og({typed:t,DenseMatrix:a}),u=sm({typed:t,equalScalar:n}),c=lm({typed:t,DenseMatrix:a}),d=Tm({typed:t,matrix:r,concat:o}),p={};for(var h in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,h)&&(h.includes("Matrix")||h.includes("Array")||(p[h]=i.signatures[h]));var f=t(p);return t(Vy,d({elop:f,SS:l,DS:s,Ss:u,sS:c}))})),$y="dotDivide",Hy=zu($y,["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,divideScalar:i,DenseMatrix:a,concat:o}=e,s=km({typed:t,equalScalar:r}),l=Am({typed:t}),u=Og({typed:t,DenseMatrix:a}),c=sm({typed:t,equalScalar:r}),d=lm({typed:t,DenseMatrix:a}),p=Tm({typed:t,matrix:n,concat:o});return t($y,p({elop:i,SS:u,DS:l,SD:s,Ss:c,sS:d}))}));function Wy(e){var{DenseMatrix:t}=e;return function(e,n,r){var i=e.size();if(2!==i.length)throw new RangeError("Matrix must be two dimensional (size: "+jp(i)+")");var a=i[0];if(a!==i[1])throw new RangeError("Matrix must be square (size: "+jp(i)+")");var o=[];if(Hl(n)){var s=n.size(),l=n._data;if(1===s.length){if(s[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var u=0;u<a;u++)o[u]=[l[u]];return new t({data:o,size:[a,1],datatype:n._datatype})}if(2===s.length){if(s[0]!==a||1!==s[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Gl(n)){if(r){o=[];for(var c=0;c<a;c++)o[c]=[l[c][0]];return new t({data:o,size:[a,1],datatype:n._datatype})}return n}if(Zl(n)){for(var d=0;d<a;d++)o[d]=[0];for(var p=n._values,h=n._index,f=n._ptr,m=f[1],g=f[0];g<m;g++){o[h[g]][0]=p[g]}return new t({data:o,size:[a,1],datatype:n._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if($l(n)){var v=Wp(n);if(1===v.length){if(v[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var y=0;y<a;y++)o[y]=[n[y]];return new t({data:o,size:[a,1]})}if(2===v.length){if(v[0]!==a||1!==v[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var b=0;b<a;b++)o[b]=[n[b][0]];return new t({data:o,size:[a,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var Gy="lsolve",Zy=zu(Gy,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=e,l=Wy({DenseMatrix:s});return t(Gy,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],d=e._values,p=e._index,h=e._ptr,f=[],m=0;m<c;m++){var g=n[m][0]||0;if(o(g,0))f[m]=[0];else{for(var v=0,y=[],b=[],x=h[m],D=h[m+1],w=x;w<D;w++){var _=p[w];_===m?v=d[w]:_>m&&(y.push(d[w]),b.push(_))}if(o(v,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var S=r(g,v),C=0,E=b.length;C<E;C++){var k=b[C];n[k]=[a(n[k][0]||0,i(S,y[C]))]}f[m]=[S]}}return new s({data:f,size:[u,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(n(e),t).valueOf()}});function u(e,t){for(var n=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],d=[],p=e._data,h=0;h<c;h++){var f=n[h][0]||0,m=void 0;if(o(f,0))m=0;else{var g=p[h][h];if(o(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(f,g);for(var v=h+1;v<u;v++)n[v]=[a(n[v][0]||0,i(m,p[v][h]))]}d[h]=[m]}return new s({data:d,size:[u,1]})}})),Jy="usolve",Xy=zu(Jy,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=e,l=Wy({DenseMatrix:s});return t(Jy,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],d=e._values,p=e._index,h=e._ptr,f=[],m=c-1;m>=0;m--){var g=n[m][0]||0;if(o(g,0))f[m]=[0];else{for(var v=0,y=[],b=[],x=h[m],D=h[m+1]-1;D>=x;D--){var w=p[D];w===m?v=d[D]:w<m&&(y.push(d[D]),b.push(w))}if(o(v,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var _=r(g,v),S=0,C=b.length;S<C;S++){var E=b[S];n[E]=[a(n[E][0],i(_,y[S]))]}f[m]=[_]}}return new s({data:f,size:[u,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(n(e),t).valueOf()}});function u(e,t){for(var n=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],d=[],p=e._data,h=c-1;h>=0;h--){var f=n[h][0]||0,m=void 0;if(o(f,0))m=0;else{var g=p[h][h];if(o(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(f,g);for(var v=h-1;v>=0;v--)n[v]=[a(n[v][0]||0,i(m,p[v][h]))]}d[h]=[m]}return new s({data:d,size:[u,1]})}})),Yy="lsolveAll",Qy=zu(Yy,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=e,l=Wy({DenseMatrix:s});return t(Yy,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],u=e._size[0],c=e._size[1],d=e._values,p=e._index,h=e._ptr,f=0;f<c;f++)for(var m=n.length,g=0;g<m;g++){for(var v=n[g],y=[],b=[],x=h[f],D=h[f+1],w=0,_=x;_<D;_++){var S=p[_];S===f?w=d[_]:S>f&&(y.push(d[_]),b.push(S))}if(o(w,0))if(o(v[f],0)){if(0===g){var C=[...v];C[f]=1;for(var E=0,k=b.length;E<k;E++){var A=b[E];C[A]=a(C[A],y[E])}n.push(C)}}else{if(0===g)return[];n.splice(g,1),g-=1,m-=1}else{v[f]=r(v[f],w);for(var N=0,M=b.length;N<M;N++){var F=b[N];v[F]=a(v[F],i(v[f],y[N]))}}}return n.map((e=>new s({data:e.map((e=>[e])),size:[u,1]})))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(n(e),t).map((e=>e.valueOf()))}});function u(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],u=e._data,c=e._size[0],d=e._size[1],p=0;p<d;p++)for(var h=n.length,f=0;f<h;f++){var m=n[f];if(o(u[p][p],0))if(o(m[p],0)){if(0===f){var g=[...m];g[p]=1;for(var v=p+1;v<d;v++)g[v]=a(g[v],u[v][p]);n.push(g)}}else{if(0===f)return[];n.splice(f,1),f-=1,h-=1}else{m[p]=r(m[p],u[p][p]);for(var y=p+1;y<d;y++)m[y]=a(m[y],i(m[p],u[y][p]))}}return n.map((e=>new s({data:e.map((e=>[e])),size:[c,1]})))}})),eb="usolveAll",tb=zu(eb,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=e,l=Wy({DenseMatrix:s});return t(eb,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],u=e._size[0],c=e._size[1],d=e._values,p=e._index,h=e._ptr,f=c-1;f>=0;f--)for(var m=n.length,g=0;g<m;g++){for(var v=n[g],y=[],b=[],x=h[f],D=0,w=h[f+1]-1;w>=x;w--){var _=p[w];_===f?D=d[w]:_<f&&(y.push(d[w]),b.push(_))}if(o(D,0))if(o(v[f],0)){if(0===g){var S=[...v];S[f]=1;for(var C=0,E=b.length;C<E;C++){var k=b[C];S[k]=a(S[k],y[C])}n.push(S)}}else{if(0===g)return[];n.splice(g,1),g-=1,m-=1}else{v[f]=r(v[f],D);for(var A=0,N=b.length;A<N;A++){var M=b[A];v[M]=a(v[M],i(v[f],y[A]))}}}return n.map((e=>new s({data:e.map((e=>[e])),size:[u,1]})))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(n(e),t).map((e=>e.valueOf()))}});function u(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],u=e._data,c=e._size[0],d=e._size[1]-1;d>=0;d--)for(var p=n.length,h=0;h<p;h++){var f=n[h];if(o(u[d][d],0))if(o(f[d],0)){if(0===h){var m=[...f];m[d]=1;for(var g=d-1;g>=0;g--)m[g]=a(m[g],u[g][d]);n.push(m)}}else{if(0===h)return[];n.splice(h,1),h-=1,p-=1}else{f[d]=r(f[d],u[d][d]);for(var v=d-1;v>=0;v--)f[v]=a(f[v],i(f[d],u[v][d]))}}return n.map((e=>new s({data:e.map((e=>[e])),size:[c,1]})))}})),nb=zu("matAlgo08xS0Sid",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,l=e._size,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=r._values,d=r._index,p=r._ptr,h=r._size,f=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(l.length!==h.length)throw new Hu(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!a||!c)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var m,g=l[0],v=l[1],y=n,b=0,x=i;"string"===typeof u&&u===f&&"mixed"!==u&&(m=u,y=t.find(n,[m,m]),b=t.convert(0,m),x=t.find(i,[m,m]));for(var D,w,_,S,C=[],E=[],k=[],A=[],N=[],M=0;M<v;M++){k[M]=E.length;var F=M+1;for(w=s[M],_=s[M+1],D=w;D<_;D++)N[S=o[D]]=F,A[S]=a[D],E.push(S);for(w=p[M],_=p[M+1],D=w;D<_;D++)N[S=d[D]]===F&&(A[S]=x(A[S],c[D]));for(D=k[M];D<E.length;){var T=A[S=E[D]];y(T,b)?E.splice(D,1):(C.push(T),D++)}}return k[v]=E.length,e.createSparseMatrix({values:C,index:E,ptr:k,size:[g,v],datatype:u===e._datatype&&f===r._datatype?m:void 0})}})),rb=zu("useMatrixForArrayScalar",["typed","matrix"],(e=>{var{typed:t,matrix:n}=e;return{"Array, number":t.referTo("DenseMatrix, number",(e=>(t,r)=>e(n(t),r).valueOf())),"Array, BigNumber":t.referTo("DenseMatrix, BigNumber",(e=>(t,r)=>e(n(t),r).valueOf())),"number, Array":t.referTo("number, DenseMatrix",(e=>(t,r)=>e(t,n(r)).valueOf())),"BigNumber, Array":t.referTo("BigNumber, DenseMatrix",(e=>(t,r)=>e(t,n(r)).valueOf()))}})),ib="leftShift",ab=zu(ib,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=e,s=Lm({typed:t}),l=km({typed:t,equalScalar:r}),u=nb({typed:t,equalScalar:r}),c=zm({typed:t,DenseMatrix:a}),d=sm({typed:t,equalScalar:r}),p=um({typed:t}),h=Tm({typed:t,matrix:n,concat:o}),f=rb({typed:t,matrix:n});return t(ib,{"number, number":Eg,"BigNumber, BigNumber":bg,"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():d(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():p(t,n,e,!1))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):c(n,t,e,!0))),"number | BigNumber, DenseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):p(n,t,e,!0)))},f,h({SS:u,DS:s,SD:l}))})),ob="rightArithShift",sb=zu(ob,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=e,s=Lm({typed:t}),l=km({typed:t,equalScalar:r}),u=nb({typed:t,equalScalar:r}),c=zm({typed:t,DenseMatrix:a}),d=sm({typed:t,equalScalar:r}),p=um({typed:t}),h=Tm({typed:t,matrix:n,concat:o}),f=rb({typed:t,matrix:n});return t(ob,{"number, number":kg,"BigNumber, BigNumber":xg,"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():d(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():p(t,n,e,!1))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):c(n,t,e,!0))),"number | BigNumber, DenseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):p(n,t,e,!0)))},f,h({SS:u,DS:s,SD:l}))})),lb="rightLogShift",ub=zu(lb,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=e,s=Lm({typed:t}),l=km({typed:t,equalScalar:r}),u=nb({typed:t,equalScalar:r}),c=zm({typed:t,DenseMatrix:a}),d=sm({typed:t,equalScalar:r}),p=um({typed:t}),h=Tm({typed:t,matrix:n,concat:o}),f=rb({typed:t,matrix:n});return t(lb,{"number, number":Ag,"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():d(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():p(t,n,e,!1))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):c(n,t,e,!0))),"number | BigNumber, DenseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):p(n,t,e,!0)))},f,h({SS:u,DS:s,SD:l}))})),cb=zu("and",["typed","matrix","equalScalar","zeros","not","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=e,s=km({typed:t,equalScalar:r}),l=Km({typed:t,equalScalar:r}),u=sm({typed:t,equalScalar:r}),c=um({typed:t}),d=Tm({typed:t,matrix:n,concat:o});return t("and",{"number, number":Wg,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)&&(0!==t.re||0!==t.im)},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!t.isZero()&&!e.isNaN()&&!t.isNaN()},"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t.value||0,n.value||0))),"SparseMatrix, any":t.referToSelf((e=>(t,n)=>a(n)?i(t.size(),t.storage()):u(t,n,e,!1))),"DenseMatrix, any":t.referToSelf((e=>(t,n)=>a(n)?i(t.size(),t.storage()):c(t,n,e,!1))),"any, SparseMatrix":t.referToSelf((e=>(t,n)=>a(t)?i(t.size(),t.storage()):u(n,t,e,!0))),"any, DenseMatrix":t.referToSelf((e=>(t,n)=>a(t)?i(t.size(),t.storage()):c(n,t,e,!0))),"Array, any":t.referToSelf((e=>(t,r)=>e(n(t),r).valueOf())),"any, Array":t.referToSelf((e=>(t,r)=>e(t,n(r)).valueOf()))},d({SS:l,DS:s}))})),db="compare",pb=zu(db,["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],(e=>{var{typed:t,config:n,equalScalar:r,matrix:i,BigNumber:a,Fraction:o,DenseMatrix:s,concat:l}=e,u=Am({typed:t}),c=Nm({typed:t,equalScalar:r}),d=lm({typed:t,DenseMatrix:s}),p=Tm({typed:t,matrix:i,concat:l}),h=rf({typed:t});return t(db,hb({typed:t,config:n}),{"boolean, boolean":function(e,t){return e===t?0:e>t?1:-1},"BigNumber, BigNumber":function(e,t){return nf(e,t,n.epsilon)?new a(0):new a(e.cmp(t))},"Fraction, Fraction":function(e,t){return new o(e.compare(t))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,p({SS:c,DS:u,Ss:d}))})),hb=zu(db,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(db,{"number, number":function(e,t){return dc(e,t,n.epsilon)?0:e>t?1:-1}})})),fb=n(939),mb="compareNatural",gb=zu(mb,["typed","compare"],(e=>{var{typed:t,compare:n}=e,r=n.signatures["boolean,boolean"];return t(mb,{"any, any":function e(t,o){var s,l=Cu(t),u=Cu(o);if(("number"===l||"BigNumber"===l||"Fraction"===l)&&("number"===u||"BigNumber"===u||"Fraction"===u))return"0"!==(s=n(t,o)).toString()?s>0?1:-1:fb(l,u);var c=["Array","DenseMatrix","SparseMatrix"];if(c.includes(l)||c.includes(u))return 0!==(s=i(e,t,o))?s:fb(l,u);if(l!==u)return fb(l,u);if("Complex"===l)return function(e,t){if(e.re>t.re)return 1;if(e.re<t.re)return-1;if(e.im>t.im)return 1;if(e.im<t.im)return-1;return 0}(t,o);if("Unit"===l)return t.equalBase(o)?e(t.value,o.value):a(e,t.formatUnits(),o.formatUnits());if("boolean"===l)return r(t,o);if("string"===l)return fb(t,o);if("Object"===l)return function(e,t,n){var r=Object.keys(t),i=Object.keys(n);r.sort(fb),i.sort(fb);var o=a(e,r,i);if(0!==o)return o;for(var s=0;s<r.length;s++){var l=e(t[r[s]],n[i[s]]);if(0!==l)return l}return 0}(e,t,o);if("null"===l)return 0;if("undefined"===l)return 0;throw new TypeError('Unsupported type of value "'+l+'"')}});function i(e,t,n){return Zl(t)&&Zl(n)?a(e,t.toJSON().values,n.toJSON().values):Zl(t)?i(e,t.toArray(),n):Zl(n)?i(e,t,n.toArray()):Gl(t)?i(e,t.toJSON().data,n):Gl(n)?i(e,t,n.toJSON().data):Array.isArray(t)?Array.isArray(n)?a(e,t,n):i(e,t,[n]):i(e,[t],n)}function a(e,t,n){for(var r=0,i=Math.min(t.length,n.length);r<i;r++){var a=e(t[r],n[r]);if(0!==a)return a}return t.length>n.length?1:t.length<n.length?-1:0}}));var vb="compareText",yb=["typed","matrix","concat"];Hp.signature="any, any";var bb=zu(vb,yb,(e=>{var{typed:t,matrix:n,concat:r}=e,i=Tm({typed:t,matrix:n,concat:r});return t(vb,Hp,i({elop:Hp,Ds:!0}))})),xb="equal",Db=zu(xb,["typed","matrix","equalScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=e,o=Am({typed:t}),s=Og({typed:t,DenseMatrix:i}),l=lm({typed:t,DenseMatrix:i}),u=Tm({typed:t,matrix:n,concat:a});return t(xb,wb({typed:t,equalScalar:r}),u({elop:r,SS:s,DS:o,Ss:l}))})),wb=zu(xb,["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return t(xb,{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})})),_b="equalText",Sb=zu(_b,["typed","compareText","isZero"],(e=>{var{typed:t,compareText:n,isZero:r}=e;return t(_b,{"any, any":function(e,t){return r(n(e,t))}})})),Cb="smaller",Eb=zu(Cb,["typed","config","matrix","DenseMatrix","concat"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i,concat:a}=e,o=Am({typed:t}),s=Og({typed:t,DenseMatrix:i}),l=lm({typed:t,DenseMatrix:i}),u=Tm({typed:t,matrix:r,concat:a}),c=rf({typed:t});return t(Cb,kb({typed:t,config:n}),{"boolean, boolean":(e,t)=>e<t,"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!nf(e,t,n.epsilon)},"Fraction, Fraction":(e,t)=>-1===e.compare(t),"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))})),kb=zu(Cb,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(Cb,{"number, number":function(e,t){return e<t&&!dc(e,t,n.epsilon)}})})),Ab="smallerEq",Nb=zu(Ab,["typed","config","matrix","DenseMatrix","concat"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i,concat:a}=e,o=Am({typed:t}),s=Og({typed:t,DenseMatrix:i}),l=lm({typed:t,DenseMatrix:i}),u=Tm({typed:t,matrix:r,concat:a}),c=rf({typed:t});return t(Ab,Mb({typed:t,config:n}),{"boolean, boolean":(e,t)=>e<=t,"BigNumber, BigNumber":function(e,t){return e.lte(t)||nf(e,t,n.epsilon)},"Fraction, Fraction":(e,t)=>1!==e.compare(t),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))})),Mb=zu(Ab,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(Ab,{"number, number":function(e,t){return e<=t||dc(e,t,n.epsilon)}})})),Fb="larger",Tb=zu(Fb,["typed","config","matrix","DenseMatrix","concat"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i,concat:a}=e,o=Am({typed:t}),s=Og({typed:t,DenseMatrix:i}),l=lm({typed:t,DenseMatrix:i}),u=Tm({typed:t,matrix:r,concat:a}),c=rf({typed:t});return t(Fb,Bb({typed:t,config:n}),{"boolean, boolean":(e,t)=>e>t,"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!nf(e,t,n.epsilon)},"Fraction, Fraction":(e,t)=>1===e.compare(t),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))})),Bb=zu(Fb,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(Fb,{"number, number":function(e,t){return e>t&&!dc(e,t,n.epsilon)}})})),Lb="largerEq",Ob=zu(Lb,["typed","config","matrix","DenseMatrix","concat"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i,concat:a}=e,o=Am({typed:t}),s=Og({typed:t,DenseMatrix:i}),l=lm({typed:t,DenseMatrix:i}),u=Tm({typed:t,matrix:r,concat:a}),c=rf({typed:t});return t(Lb,zb({typed:t,config:n}),{"boolean, boolean":(e,t)=>e>=t,"BigNumber, BigNumber":function(e,t){return e.gte(t)||nf(e,t,n.epsilon)},"Fraction, Fraction":(e,t)=>-1!==e.compare(t),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:o,Ss:l}))})),zb=zu(Lb,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(Lb,{"number, number":function(e,t){return e>=t||dc(e,t,n.epsilon)}})})),Ib="deepEqual",Pb=zu(Ib,["typed","equal"],(e=>{var{typed:t,equal:n}=e;return t(Ib,{"any, any":function(e,t){return r(e.valueOf(),t.valueOf())}});function r(e,t){if(Array.isArray(e)){if(Array.isArray(t)){var i=e.length;if(i!==t.length)return!1;for(var a=0;a<i;a++)if(!r(e[a],t[a]))return!1;return!0}return!1}return!Array.isArray(t)&&n(e,t)}})),qb="unequal",Rb=zu(qb,["typed","config","equalScalar","matrix","DenseMatrix","concat"],(e=>{var{typed:t,config:n,equalScalar:r,matrix:i,DenseMatrix:a,concat:o}=e,s=Am({typed:t}),l=Og({typed:t,DenseMatrix:a}),u=lm({typed:t,DenseMatrix:a}),c=Tm({typed:t,matrix:i,concat:o});return t(qb,jb({typed:t,equalScalar:r}),c({elop:function(e,t){return!r(e,t)},SS:l,DS:s,Ss:u}))})),jb=zu(qb,["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return t(qb,{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t)}})})),Kb="partitionSelect",Vb=zu(Kb,["typed","isNumeric","isNaN","compare"],(e=>{var{typed:t,isNumeric:n,isNaN:r,compare:i}=e,a=i,o=(e,t)=>-i(e,t);return t(Kb,{"Array | Matrix, number":function(e,t){return s(e,t,a)},"Array | Matrix, number, string":function(e,t,n){if("asc"===n)return s(e,t,a);if("desc"===n)return s(e,t,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(e,t,n){if(!Zu(t)||t<0)throw new Error("k must be a non-negative integer");if(Hl(e)){if(e.size().length>1)throw new Error("Only one dimensional matrices supported");return l(e.valueOf(),t,n)}if(Array.isArray(e))return l(e,t,n)}function l(e,t,i){if(t>=e.length)throw new Error("k out of bounds");for(var a=0;a<e.length;a++)if(n(e[a])&&r(e[a]))return e[a];for(var o=0,s=e.length-1;o<s;){for(var l=o,u=s,c=e[Math.floor(Math.random()*(s-o+1))+o];l<u;)if(i(e[l],c)>=0){var d=e[u];e[u]=e[l],e[l]=d,--u}else++l;i(e[l],c)>0&&--l,t<=l?s=l:o=l+1}return e[t]}})),Ub="sort",$b=zu(Ub,["typed","matrix","compare","compareNatural"],(e=>{var{typed:t,matrix:n,compare:r,compareNatural:i}=e,a=r,o=(e,t)=>-r(e,t);return t(Ub,{Array:function(e){return l(e),e.sort(a)},Matrix:function(e){return u(e),n(e.toArray().sort(a),e.storage())},"Array, function":function(e,t){return l(e),e.sort(t)},"Matrix, function":function(e,t){return u(e),n(e.toArray().sort(t),e.storage())},"Array, string":function(e,t){return l(e),e.sort(s(t))},"Matrix, string":function(e,t){return u(e),n(e.toArray().sort(s(t)),e.storage())}});function s(e){if("asc"===e)return a;if("desc"===e)return o;if("natural"===e)return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(e){if(1!==Wp(e).length)throw new Error("One dimensional array expected")}function u(e){if(1!==e.size().length)throw new Error("One dimensional matrix expected")}})),Hb=zu("max",["typed","config","numeric","larger"],(e=>{var{typed:t,config:n,numeric:r,larger:i}=e;return t("max",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){return Th(e,t.valueOf(),a)},"...":function(e){if(Nh(e))throw new TypeError("Scalar values expected in function max");return o(e)}});function a(e,t){try{return i(e,t)?e:t}catch(n){throw gy(n,"max",t)}}function o(e){var t;if(Mh(e,(function(e){try{isNaN(e)&&"number"===typeof e?t=NaN:(void 0===t||i(e,t))&&(t=e)}catch(n){throw gy(n,"max",e)}})),void 0===t)throw new Error("Cannot calculate max of an empty array");return"string"===typeof t&&(t=r(t,n.number)),t}})),Wb=zu("min",["typed","config","numeric","smaller"],(e=>{var{typed:t,config:n,numeric:r,smaller:i}=e;return t("min",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){return Th(e,t.valueOf(),a)},"...":function(e){if(Nh(e))throw new TypeError("Scalar values expected in function min");return o(e)}});function a(e,t){try{return i(e,t)?e:t}catch(n){throw gy(n,"min",t)}}function o(e){var t;if(Mh(e,(function(e){try{isNaN(e)&&"number"===typeof e?t=NaN:(void 0===t||i(e,t))&&(t=e)}catch(n){throw gy(n,"min",e)}})),void 0===t)throw new Error("Cannot calculate min of an empty array");return"string"===typeof t&&(t=r(t,n.number)),t}})),Gb=zu("ImmutableDenseMatrix",["smaller","DenseMatrix"],(e=>{var{smaller:t,DenseMatrix:n}=e;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Ul(t))throw new Error("Invalid datatype: "+t);if(Hl(e)||$l(e)){var i=new n(e,t);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&$l(e.data)&&$l(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min="undefined"!==typeof e.min?e.min:null,this._max="undefined"!==typeof e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+Cu(e)+")");this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(e){switch(arguments.length){case 1:var t=n.prototype.subset.call(this,e);return Hl(t)?new r({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Eu(this._data),size:Eu(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(e){return new r(e)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(null===this._min){var e=null;this.forEach((function(n){(null===e||t(n,e))&&(e=n)})),this._min=null!==e?e:void 0}return this._min},r.prototype.max=function(){if(null===this._max){var e=null;this.forEach((function(n){(null===e||t(e,n))&&(e=n)})),this._max=null!==e?e:void 0}return this._max},r}),{isClass:!0}),Zb=zu("Index",["ImmutableDenseMatrix","getMatrixDataType"],(e=>{var{ImmutableDenseMatrix:t,getMatrixDataType:n}=e;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var t=0,a=arguments.length;t<a;t++){var o=arguments[t],s=$l(o),l=Hl(o),u=null;if(Jl(o))this._dimensions.push(o),this._isScalar=!1;else if(s||l){var c=void 0;"boolean"===n(o)?(s&&(c=i(Jb(o).valueOf())),l&&(c=i(Jb(o._data).valueOf())),u=o.valueOf().length):c=i(o.valueOf()),this._dimensions.push(c);var d=c.size();1===d.length&&1===d[0]&&null===u||(this._isScalar=!1)}else if("number"===typeof o)this._dimensions.push(i([o]));else{if("string"!==typeof o)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(o)}this._sourceSize.push(u)}}function i(e){for(var n=0,r=e.length;n<r;n++)if("number"!==typeof e[n]||!Zu(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t(e)}return r.prototype.type="Index",r.prototype.isIndex=!0,r.prototype.clone=function(){var e=new r;return e._dimensions=Eu(this._dimensions),e._isScalar=this._isScalar,e._sourceSize=this._sourceSize,e},r.create=function(e){var t=new r;return r.apply(t,e),t},r.prototype.size=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"===typeof r?1:r.size()[0]}return e},r.prototype.max=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"===typeof r?r:r.max()}return e},r.prototype.min=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"===typeof r?r:r.min()}return e},r.prototype.forEach=function(e){for(var t=0,n=this._dimensions.length;t<n;t++)e(this._dimensions[t],t,this)},r.prototype.dimension=function(e){return this._dimensions[e]||null},r.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"===typeof this._dimensions[0]},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"===typeof r?r:r.toArray())}return e},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];"string"===typeof r?e.push(JSON.stringify(r)):e.push(r.toString())}return"["+e.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(e){return r.create(e.dimensions)},r}),{isClass:!0});function Jb(e){var t=[];return e.forEach(((e,n)=>{e&&t.push(n)})),t}var Xb=zu("FibonacciHeap",["smaller","larger"],(e=>{var{smaller:t,larger:n}=e,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function a(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}function o(e,t){var n=t.parent;n&&(t.mark?(a(e,t,n),o(n)):t.mark=!0)}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,n){var r={key:e,value:n,degree:0};if(this._minimum){var i=this._minimum;r.left=i,r.right=i.right,i.right=r,r.right.left=r,t(e,i.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,a=e.degree,o=e.child;a>0;){var l=o.right;o.left.right=o.right,o.right.left=o.left,o.left=i,o.right=i.right,i.right=o,o.right.left=o,o.parent=null,o=l,a--}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var a,o=Math.floor(Math.log(i)*r)+1,l=new Array(o),u=0,c=e;if(c)for(u++,c=c.right;c!==e;)u++,c=c.right;for(;u>0;){for(var d=c.degree,p=c.right;a=l[d];){if(n(c.key,a.key)){var h=a;a=c,c=h}s(a,c),l[d]=null,d++}l[d]=c,c=p,u--}e=null;for(var f=0;f<o;f++)(a=l[f])&&(e?(a.left.right=a.right,a.right.left=a.left,a.left=e,a.right=e.right,e.right=a,a.right.left=a,t(a.key,e.key)&&(e=a)):e=a);return e}(i=e.right,this._size),this._size--,this._minimum=i,e},i.prototype.remove=function(e){this._minimum=function(e,n,r){n.key=r;var i=n.parent;i&&t(n.key,i.key)&&(a(e,n,i),o(e,i));t(n.key,e.key)&&(e=n);return e}(this._minimum,e,-1),this.extractMinimum()};var s=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return i}),{isClass:!0}),Yb=zu("Spa",["addScalar","equalScalar","FibonacciHeap"],(e=>{var{addScalar:t,equalScalar:n,FibonacciHeap:r}=e;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0},i.prototype.accumulate=function(e,n){var r=this._values[e];r?r.value=t(r.value,n):(r=this._heap.insert(e,n),this._values[e]=r)},i.prototype.forEach=function(e,t,r){var i=this._heap,a=this._values,o=[],s=i.extractMinimum();for(s&&o.push(s);s&&s.key<=t;)s.key>=e&&(n(s.value,0)||r(s.key,s.value,this)),(s=i.extractMinimum())&&o.push(s);for(var l=0;l<o.length;l++){var u=o[l];a[(s=i.insert(u.key,u.value)).key]=s}},i.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},i}),{isClass:!0}),Qb=_h((function(e){return new e(1).exp()}),{hasher:rx}),ex=_h((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),{hasher:rx}),tx=_h((function(e){return e.acos(-1)}),{hasher:rx}),nx=_h((function(e){return tx(e).times(2)}),{hasher:rx});function rx(e){return e[0].precision}function ix(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ax(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ix(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ix(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ox=zu("Unit",["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],(e=>{var t,n,r,{on:i,config:a,addScalar:o,subtractScalar:s,multiplyScalar:l,divideScalar:u,pow:c,abs:d,fix:p,round:h,equal:f,isNumeric:m,format:g,number:v,Complex:y,BigNumber:b,Fraction:x}=e,D=v;function w(e,t){if(!(this instanceof w))throw new Error("Constructor must be called with the new operator");if(null!==e&&void 0!==e&&!m(e)&&!jl(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,void 0===t)this.units=[],this.dimensions=B.map((e=>0));else if("string"===typeof t){var n=w.parse(t);this.units=n.units,this.dimensions=n.dimensions}else{if(!Vl(t)||null!==t.value)throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.fixPrefix=t.fixPrefix,this.skipAutomaticSimplification=t.skipAutomaticSimplification,this.dimensions=t.dimensions.slice(0),this.units=t.units.map((e=>Il({},e)))}this.value=this._normalize(e)}function _(){for(;" "===r||"\t"===r;)C()}function S(e){return e>="0"&&e<="9"}function C(){n++,r=t.charAt(n)}function E(e){n=e,r=t.charAt(n)}function k(){var e="",t=n;if("+"===r?C():"-"===r&&(e+=r,C()),!function(e){return e>="0"&&e<="9"||"."===e}(r))return E(t),null;if("."===r){if(e+=r,C(),!S(r))return E(t),null}else{for(;S(r);)e+=r,C();"."===r&&(e+=r,C())}for(;S(r);)e+=r,C();if("E"===r||"e"===r){var i="",a=n;if(i+=r,C(),"+"!==r&&"-"!==r||(i+=r,C()),!S(r))return E(a),e;for(e+=i;S(r);)e+=r,C()}return e}function A(){for(var e="";S(r)||w.isValidAlpha(r);)e+=r,C();var t=e.charAt(0);return w.isValidAlpha(t)?e:null}function N(e){return r===e?(C(),e):null}Object.defineProperty(w,"name",{value:"Unit"}),w.prototype.constructor=w,w.prototype.type="Unit",w.prototype.isUnit=!0,w.parse=function(e,i){if(i=i||{},n=-1,r="","string"!==typeof(t=e))throw new TypeError("Invalid argument in Unit.parse, string expected");var o=new w;o.units=[];var s=1,l=!1;C(),_();var u=k(),c=null;if(u){if("BigNumber"===a.number)c=new b(u);else if("Fraction"===a.number)try{c=new x(u)}catch(S){c=parseFloat(u)}else c=parseFloat(u);_(),N("*")?(s=1,l=!0):N("/")&&(s=-1,l=!0)}for(var d=[],p=1;;){for(_();"("===r;)d.push(s),p*=s,s=1,C(),_();var h=void 0;if(!r)break;var f=r;if(null===(h=A()))throw new SyntaxError('Unexpected "'+f+'" in "'+t+'" at index '+n.toString());var m=M(h);if(null===m)throw new SyntaxError('Unit "'+h+'" not found.');var g=s*p;if(_(),N("^")){_();var v=k();if(null===v)throw new SyntaxError('In "'+e+'", "^" must be followed by a floating-point number');g*=v}o.units.push({unit:m.unit,prefix:m.prefix,power:g});for(var y=0;y<B.length;y++)o.dimensions[y]+=(m.unit.dimensions[y]||0)*g;for(_();")"===r;){if(0===d.length)throw new SyntaxError('Unmatched ")" in "'+t+'" at index '+n.toString());p/=d.pop(),C(),_()}if(l=!1,N("*")?(s=1,l=!0):N("/")?(s=-1,l=!0):s=1,m.unit.base){var D=m.unit.base.key;R.auto[D]={unit:m.unit,prefix:m.prefix}}}if(_(),r)throw new SyntaxError('Could not parse: "'+e+'"');if(l)throw new SyntaxError('Trailing characters: "'+e+'"');if(0!==d.length)throw new SyntaxError('Unmatched "(" in "'+t+'"');if(0===o.units.length&&!i.allowNoUnits)throw new SyntaxError('"'+e+'" contains no units');return o.value=void 0!==c?o._normalize(c):null,o},w.prototype.clone=function(){var e=new w;e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=Eu(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++)for(var n in e.units[t]={},this.units[t])Lu(this.units[t],n)&&(e.units[t][n]=this.units[t][n]);return e},w.prototype.valueType=function(){return Cu(this.value)},w.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},w.prototype._normalize=function(e){if(null===e||void 0===e||0===this.units.length)return e;for(var t=e,n=w._getNumberConverter(Cu(e)),r=0;r<this.units.length;r++){var i=n(this.units[r].unit.value),a=n(this.units[r].prefix.value),o=n(this.units[r].power);t=l(t,c(l(i,a),o))}return t},w.prototype._denormalize=function(e,t){if(null===e||void 0===e||0===this.units.length)return e;for(var n=e,r=w._getNumberConverter(Cu(e)),i=0;i<this.units.length;i++){var a=r(this.units[i].unit.value),o=r(this.units[i].prefix.value),s=r(this.units[i].power);n=u(n,c(l(a,o),s))}return n};var M=_h((e=>{if(Lu(I,e)){var t=I[e];return{unit:t,prefix:t.prefixes[""]}}for(var n in I)if(Lu(I,n)&&Rp(e,n)){var r=I[n],i=e.length-n.length,a=e.substring(0,i),o=Lu(r.prefixes,a)?r.prefixes[a]:void 0;if(void 0!==o)return{unit:r,prefix:o}}return null}),{hasher:e=>e[0],limit:100});function F(e){return e.equalBase(L.NONE)&&null!==e.value&&!a.predictable?e.value:e}w.isValuelessUnit=function(e){return null!==M(e)},w.prototype.hasBase=function(e){if("string"===typeof e&&(e=L[e]),!e)return!1;for(var t=0;t<B.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},w.prototype.equalBase=function(e){for(var t=0;t<B.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},w.prototype.equals=function(e){return this.equalBase(e)&&f(this.value,e.value)},w.prototype.multiply=function(e){for(var t=this.clone(),n=Vl(e)?e:new w(e),r=0;r<B.length;r++)t.dimensions[r]=(this.dimensions[r]||0)+(n.dimensions[r]||0);for(var i=0;i<n.units.length;i++){var a=ax({},n.units[i]);t.units.push(a)}if(null!==this.value||null!==n.value){var o=null===this.value?this._normalize(1):this.value,s=null===n.value?n._normalize(1):n.value;t.value=l(o,s)}else t.value=null;return Vl(e)&&(t.skipAutomaticSimplification=!1),F(t)},w.prototype.divideInto=function(e){return new w(e).divide(this)},w.prototype.divide=function(e){for(var t=this.clone(),n=Vl(e)?e:new w(e),r=0;r<B.length;r++)t.dimensions[r]=(this.dimensions[r]||0)-(n.dimensions[r]||0);for(var i=0;i<n.units.length;i++){var a=ax(ax({},n.units[i]),{},{power:-n.units[i].power});t.units.push(a)}if(null!==this.value||null!==n.value){var o=null===this.value?this._normalize(1):this.value,s=null===n.value?n._normalize(1):n.value;t.value=u(o,s)}else t.value=null;return Vl(e)&&(t.skipAutomaticSimplification=!1),F(t)},w.prototype.pow=function(e){for(var t=this.clone(),n=0;n<B.length;n++)t.dimensions[n]=(this.dimensions[n]||0)*e;for(var r=0;r<t.units.length;r++)t.units[r].power*=e;return null!==t.value?t.value=c(t.value,e):t.value=null,t.skipAutomaticSimplification=!1,F(t)},w.prototype.abs=function(){var e=this.clone();if(null!==e.value)if(e._isDerived()||0===e.units.length||0===e.units[0].unit.offset)e.value=d(e.value);else{var t=e._numberConverter(),n=t(e.units[0].unit.value),r=t(e.units[0].unit.offset),i=l(n,r);e.value=s(d(o(e.value,i)),i)}for(var a in e.units)"VA"!==e.units[a].unit.name&&"VAR"!==e.units[a].unit.name||(e.units[a].unit=I.W);return e},w.prototype.to=function(e){var t,n=null===this.value?this._normalize(1):this.value;if("string"===typeof e)t=w.parse(e);else{if(!Vl(e))throw new Error("String or Unit expected as parameter");t=e.clone()}if(!this.equalBase(t))throw new Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw new Error("Cannot convert to a unit with a value");if(null===this.value||this._isDerived()||0===this.units.length||0===t.units.length||this.units[0].unit.offset===t.units[0].unit.offset)t.value=Eu(n);else{var r=w._getNumberConverter(Cu(n)),i=this.units[0].unit.value,a=this.units[0].unit.offset,u=l(i,a),c=t.units[0].unit.value,d=t.units[0].unit.offset,p=l(c,d);t.value=o(n,r(s(u,p)))}return t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t},w.prototype.toNumber=function(e){return D(this.toNumeric(e))},w.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()||0===t.units.length?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},w.prototype.toString=function(){return this.format()},w.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},w.fromJSON=function(e){var t,n=new w(e.value,null!==(t=e.unit)&&void 0!==t?t:void 0);return n.fixPrefix=e.fixPrefix||!1,n},w.prototype.valueOf=w.prototype.toString,w.prototype.simplify=function(){var e,t,n=this.clone(),r=[];for(var i in j)if(Lu(j,i)&&n.hasBase(L[i])){e=i;break}if("NONE"===e)n.units=[];else if(e&&Lu(j,e)&&(t=j[e]),t)n.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var a=!1,o=0;o<B.length;o++){var s=B[o];Math.abs(n.dimensions[o]||0)>1e-12&&(Lu(j,s)?r.push({unit:j[s].unit,prefix:j[s].prefix,power:n.dimensions[o]||0}):a=!0)}r.length<n.units.length&&!a&&(n.units=r)}return n},w.prototype.toSI=function(){for(var e=this.clone(),t=[],n=0;n<B.length;n++){var r=B[n];if(Math.abs(e.dimensions[n]||0)>1e-12){if(!Lu(R.si,r))throw new Error("Cannot express custom unit "+r+" in SI units");t.push({unit:R.si[r].unit,prefix:R.si[r].prefix,power:e.dimensions[n]||0})}}return e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,null!==this.value?(e.value=null,this.to(e)):e},w.prototype.formatUnits=function(){for(var e="",t="",n=0,r=0,i=0;i<this.units.length;i++)this.units[i].power>0?(n++,e+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(e+="^"+this.units[i].power)):this.units[i].power<0&&r++;if(r>0)for(var a=0;a<this.units.length;a++)this.units[a].power<0&&(n>0?(t+=" "+this.units[a].prefix.name+this.units[a].unit.name,Math.abs(this.units[a].power+1)>1e-15&&(t+="^"+-this.units[a].power)):(t+=" "+this.units[a].prefix.name+this.units[a].unit.name,t+="^"+this.units[a].power));e=e.substr(1),t=t.substr(1),n>1&&r>0&&(e="("+e+")"),r>1&&n>0&&(t="("+t+")");var o=e;return n>0&&r>0&&(o+=" / "),o+=t},w.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),n=!1;for(var r in"undefined"!==typeof t.value&&null!==t.value&&jl(t.value)&&(n=Math.abs(t.value.re)<1e-14),t.units)Lu(t.units,r)&&t.units[r].unit&&("VA"===t.units[r].unit.name&&n?t.units[r].unit=I.VAR:"VAR"!==t.units[r].unit.name||n||(t.units[r].unit=I.VA));1!==t.units.length||t.fixPrefix||Math.abs(t.units[0].power-Math.round(t.units[0].power))<1e-14&&(t.units[0].prefix=t._bestPrefix());var i=t._denormalize(t.value),a=null!==t.value?g(i,e||{}):"",o=t.formatUnits();return t.value&&jl(t.value)&&(a="("+a+")"),o.length>0&&a.length>0&&(a+=" "),a+=o},w.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=null!==this.value?d(this.value):0,t=d(this.units[0].unit.value),n=this.units[0].prefix;if(0===e)return n;var r=this.units[0].power,i=Math.log(e/Math.pow(n.value*t,r))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return n;i=Math.abs(i);var a=this.units[0].unit.prefixes;for(var o in a)if(Lu(a,o)){var s=a[o];if(s.scientific){var l=Math.abs(Math.log(e/Math.pow(s.value*t,r))/Math.LN10-1.2);(l<i||l===i&&s.name.length<n.name.length)&&(n=s,i=l)}}return n},w.prototype.splitUnit=function(e){for(var t=this.clone(),n=[],r=0;r<e.length&&(t=t.to(e[r]),r!==e.length-1);r++){var i=t.toNumeric(),a=h(i),l=new w(f(a,i)?a:p(t.toNumeric()),e[r].toString());n.push(l),t=s(t,l)}for(var u=0,c=0;c<n.length;c++)u=o(u,n[c].value);return f(u,this.value)&&(t.value=0),n.push(t),n};var T={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};T.SHORTLONG=Il({},T.SHORT,T.LONG),T.BINARY_SHORT=Il({},T.BINARY_SHORT_SI,T.BINARY_SHORT_IEC),T.BINARY_LONG=Il({},T.BINARY_LONG_SI,T.BINARY_LONG_IEC);var B=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],L={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var O in L)Lu(L,O)&&(L[O].key=O);var z={name:"",base:{},value:1,offset:0,dimensions:B.map((e=>0))},I={meter:{name:"meter",base:L.LENGTH,prefixes:T.LONG,value:1,offset:0},inch:{name:"inch",base:L.LENGTH,prefixes:T.NONE,value:.0254,offset:0},foot:{name:"foot",base:L.LENGTH,prefixes:T.NONE,value:.3048,offset:0},yard:{name:"yard",base:L.LENGTH,prefixes:T.NONE,value:.9144,offset:0},mile:{name:"mile",base:L.LENGTH,prefixes:T.NONE,value:1609.344,offset:0},link:{name:"link",base:L.LENGTH,prefixes:T.NONE,value:.201168,offset:0},rod:{name:"rod",base:L.LENGTH,prefixes:T.NONE,value:5.0292,offset:0},chain:{name:"chain",base:L.LENGTH,prefixes:T.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:L.LENGTH,prefixes:T.NONE,value:1e-10,offset:0},m:{name:"m",base:L.LENGTH,prefixes:T.SHORT,value:1,offset:0},in:{name:"in",base:L.LENGTH,prefixes:T.NONE,value:.0254,offset:0},ft:{name:"ft",base:L.LENGTH,prefixes:T.NONE,value:.3048,offset:0},yd:{name:"yd",base:L.LENGTH,prefixes:T.NONE,value:.9144,offset:0},mi:{name:"mi",base:L.LENGTH,prefixes:T.NONE,value:1609.344,offset:0},li:{name:"li",base:L.LENGTH,prefixes:T.NONE,value:.201168,offset:0},rd:{name:"rd",base:L.LENGTH,prefixes:T.NONE,value:5.02921,offset:0},ch:{name:"ch",base:L.LENGTH,prefixes:T.NONE,value:20.1168,offset:0},mil:{name:"mil",base:L.LENGTH,prefixes:T.NONE,value:254e-7,offset:0},m2:{name:"m2",base:L.SURFACE,prefixes:T.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:L.SURFACE,prefixes:T.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:L.SURFACE,prefixes:T.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:L.SURFACE,prefixes:T.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:L.SURFACE,prefixes:T.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:L.SURFACE,prefixes:T.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:L.SURFACE,prefixes:T.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:L.SURFACE,prefixes:T.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:L.SURFACE,prefixes:T.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:L.SURFACE,prefixes:T.NONE,value:1e4,offset:0},m3:{name:"m3",base:L.VOLUME,prefixes:T.CUBIC,value:1,offset:0},L:{name:"L",base:L.VOLUME,prefixes:T.SHORT,value:.001,offset:0},l:{name:"l",base:L.VOLUME,prefixes:T.SHORT,value:.001,offset:0},litre:{name:"litre",base:L.VOLUME,prefixes:T.LONG,value:.001,offset:0},cuin:{name:"cuin",base:L.VOLUME,prefixes:T.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:L.VOLUME,prefixes:T.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:L.VOLUME,prefixes:T.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:L.VOLUME,prefixes:T.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:L.VOLUME,prefixes:T.NONE,value:15e-6,offset:0},drop:{name:"drop",base:L.VOLUME,prefixes:T.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:L.VOLUME,prefixes:T.NONE,value:5e-8,offset:0},minim:{name:"minim",base:L.VOLUME,prefixes:T.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:L.VOLUME,prefixes:T.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:L.VOLUME,prefixes:T.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:L.VOLUME,prefixes:T.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:L.VOLUME,prefixes:T.NONE,value:1e-6,offset:0},cup:{name:"cup",base:L.VOLUME,prefixes:T.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:L.VOLUME,prefixes:T.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:L.VOLUME,prefixes:T.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:L.VOLUME,prefixes:T.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:L.VOLUME,prefixes:T.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:L.VOLUME,prefixes:T.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:L.VOLUME,prefixes:T.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:L.VOLUME,prefixes:T.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:L.VOLUME,prefixes:T.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:L.VOLUME,prefixes:T.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:L.VOLUME,prefixes:T.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:L.VOLUME,prefixes:T.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:L.VOLUME,prefixes:T.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:L.VOLUME,prefixes:T.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:L.VOLUME,prefixes:T.NONE,value:.1173478,offset:0},obl:{name:"obl",base:L.VOLUME,prefixes:T.NONE,value:.1589873,offset:0},g:{name:"g",base:L.MASS,prefixes:T.SHORT,value:.001,offset:0},gram:{name:"gram",base:L.MASS,prefixes:T.LONG,value:.001,offset:0},ton:{name:"ton",base:L.MASS,prefixes:T.SHORT,value:907.18474,offset:0},t:{name:"t",base:L.MASS,prefixes:T.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:L.MASS,prefixes:T.LONG,value:1e3,offset:0},grain:{name:"grain",base:L.MASS,prefixes:T.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:L.MASS,prefixes:T.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:L.MASS,prefixes:T.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:L.MASS,prefixes:T.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:L.MASS,prefixes:T.NONE,value:45.359237,offset:0},stick:{name:"stick",base:L.MASS,prefixes:T.NONE,value:.115,offset:0},stone:{name:"stone",base:L.MASS,prefixes:T.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:L.MASS,prefixes:T.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:L.MASS,prefixes:T.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:L.MASS,prefixes:T.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:L.MASS,prefixes:T.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:L.MASS,prefixes:T.NONE,value:45.359237,offset:0},s:{name:"s",base:L.TIME,prefixes:T.SHORT,value:1,offset:0},min:{name:"min",base:L.TIME,prefixes:T.NONE,value:60,offset:0},h:{name:"h",base:L.TIME,prefixes:T.NONE,value:3600,offset:0},second:{name:"second",base:L.TIME,prefixes:T.LONG,value:1,offset:0},sec:{name:"sec",base:L.TIME,prefixes:T.LONG,value:1,offset:0},minute:{name:"minute",base:L.TIME,prefixes:T.NONE,value:60,offset:0},hour:{name:"hour",base:L.TIME,prefixes:T.NONE,value:3600,offset:0},day:{name:"day",base:L.TIME,prefixes:T.NONE,value:86400,offset:0},week:{name:"week",base:L.TIME,prefixes:T.NONE,value:604800,offset:0},month:{name:"month",base:L.TIME,prefixes:T.NONE,value:2629800,offset:0},year:{name:"year",base:L.TIME,prefixes:T.NONE,value:31557600,offset:0},decade:{name:"decade",base:L.TIME,prefixes:T.NONE,value:315576e3,offset:0},century:{name:"century",base:L.TIME,prefixes:T.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:L.TIME,prefixes:T.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:L.FREQUENCY,prefixes:T.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:L.FREQUENCY,prefixes:T.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:L.ANGLE,prefixes:T.SHORT,value:1,offset:0},radian:{name:"radian",base:L.ANGLE,prefixes:T.LONG,value:1,offset:0},deg:{name:"deg",base:L.ANGLE,prefixes:T.SHORT,value:null,offset:0},degree:{name:"degree",base:L.ANGLE,prefixes:T.LONG,value:null,offset:0},grad:{name:"grad",base:L.ANGLE,prefixes:T.SHORT,value:null,offset:0},gradian:{name:"gradian",base:L.ANGLE,prefixes:T.LONG,value:null,offset:0},cycle:{name:"cycle",base:L.ANGLE,prefixes:T.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:L.ANGLE,prefixes:T.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:L.ANGLE,prefixes:T.NONE,value:null,offset:0},A:{name:"A",base:L.CURRENT,prefixes:T.SHORT,value:1,offset:0},ampere:{name:"ampere",base:L.CURRENT,prefixes:T.LONG,value:1,offset:0},K:{name:"K",base:L.TEMPERATURE,prefixes:T.SHORT,value:1,offset:0},degC:{name:"degC",base:L.TEMPERATURE,prefixes:T.SHORT,value:1,offset:273.15},degF:{name:"degF",base:L.TEMPERATURE,prefixes:T.SHORT,value:new x(5,9),offset:459.67},degR:{name:"degR",base:L.TEMPERATURE,prefixes:T.SHORT,value:new x(5,9),offset:0},kelvin:{name:"kelvin",base:L.TEMPERATURE,prefixes:T.LONG,value:1,offset:0},celsius:{name:"celsius",base:L.TEMPERATURE,prefixes:T.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:L.TEMPERATURE,prefixes:T.LONG,value:new x(5,9),offset:459.67},rankine:{name:"rankine",base:L.TEMPERATURE,prefixes:T.LONG,value:new x(5,9),offset:0},mol:{name:"mol",base:L.AMOUNT_OF_SUBSTANCE,prefixes:T.SHORT,value:1,offset:0},mole:{name:"mole",base:L.AMOUNT_OF_SUBSTANCE,prefixes:T.LONG,value:1,offset:0},cd:{name:"cd",base:L.LUMINOUS_INTENSITY,prefixes:T.SHORT,value:1,offset:0},candela:{name:"candela",base:L.LUMINOUS_INTENSITY,prefixes:T.LONG,value:1,offset:0},N:{name:"N",base:L.FORCE,prefixes:T.SHORT,value:1,offset:0},newton:{name:"newton",base:L.FORCE,prefixes:T.LONG,value:1,offset:0},dyn:{name:"dyn",base:L.FORCE,prefixes:T.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:L.FORCE,prefixes:T.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:L.FORCE,prefixes:T.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:L.FORCE,prefixes:T.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:L.FORCE,prefixes:T.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:L.FORCE,prefixes:T.NONE,value:9.80665,offset:0},J:{name:"J",base:L.ENERGY,prefixes:T.SHORT,value:1,offset:0},joule:{name:"joule",base:L.ENERGY,prefixes:T.LONG,value:1,offset:0},erg:{name:"erg",base:L.ENERGY,prefixes:T.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:L.ENERGY,prefixes:T.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:L.ENERGY,prefixes:T.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:L.ENERGY,prefixes:T.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:L.ENERGY,prefixes:T.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:L.POWER,prefixes:T.SHORT,value:1,offset:0},watt:{name:"watt",base:L.POWER,prefixes:T.LONG,value:1,offset:0},hp:{name:"hp",base:L.POWER,prefixes:T.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:L.POWER,prefixes:T.SHORT,value:y.I,offset:0},VA:{name:"VA",base:L.POWER,prefixes:T.SHORT,value:1,offset:0},Pa:{name:"Pa",base:L.PRESSURE,prefixes:T.SHORT,value:1,offset:0},psi:{name:"psi",base:L.PRESSURE,prefixes:T.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:L.PRESSURE,prefixes:T.NONE,value:101325,offset:0},bar:{name:"bar",base:L.PRESSURE,prefixes:T.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:L.PRESSURE,prefixes:T.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:L.PRESSURE,prefixes:T.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:L.PRESSURE,prefixes:T.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:L.PRESSURE,prefixes:T.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:L.ELECTRIC_CHARGE,prefixes:T.LONG,value:1,offset:0},C:{name:"C",base:L.ELECTRIC_CHARGE,prefixes:T.SHORT,value:1,offset:0},farad:{name:"farad",base:L.ELECTRIC_CAPACITANCE,prefixes:T.LONG,value:1,offset:0},F:{name:"F",base:L.ELECTRIC_CAPACITANCE,prefixes:T.SHORT,value:1,offset:0},volt:{name:"volt",base:L.ELECTRIC_POTENTIAL,prefixes:T.LONG,value:1,offset:0},V:{name:"V",base:L.ELECTRIC_POTENTIAL,prefixes:T.SHORT,value:1,offset:0},ohm:{name:"ohm",base:L.ELECTRIC_RESISTANCE,prefixes:T.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:L.ELECTRIC_INDUCTANCE,prefixes:T.LONG,value:1,offset:0},H:{name:"H",base:L.ELECTRIC_INDUCTANCE,prefixes:T.SHORT,value:1,offset:0},siemens:{name:"siemens",base:L.ELECTRIC_CONDUCTANCE,prefixes:T.LONG,value:1,offset:0},S:{name:"S",base:L.ELECTRIC_CONDUCTANCE,prefixes:T.SHORT,value:1,offset:0},weber:{name:"weber",base:L.MAGNETIC_FLUX,prefixes:T.LONG,value:1,offset:0},Wb:{name:"Wb",base:L.MAGNETIC_FLUX,prefixes:T.SHORT,value:1,offset:0},tesla:{name:"tesla",base:L.MAGNETIC_FLUX_DENSITY,prefixes:T.LONG,value:1,offset:0},T:{name:"T",base:L.MAGNETIC_FLUX_DENSITY,prefixes:T.SHORT,value:1,offset:0},b:{name:"b",base:L.BIT,prefixes:T.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:L.BIT,prefixes:T.BINARY_LONG,value:1,offset:0},B:{name:"B",base:L.BIT,prefixes:T.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:L.BIT,prefixes:T.BINARY_LONG,value:8,offset:0}},P={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function q(e){if("BigNumber"===e.number){var t=tx(b);I.rad.value=new b(1),I.deg.value=t.div(180),I.grad.value=t.div(200),I.cycle.value=t.times(2),I.arcsec.value=t.div(648e3),I.arcmin.value=t.div(10800)}else I.rad.value=1,I.deg.value=Math.PI/180,I.grad.value=Math.PI/200,I.cycle.value=2*Math.PI,I.arcsec.value=Math.PI/648e3,I.arcmin.value=Math.PI/10800;I.radian.value=I.rad.value,I.degree.value=I.deg.value,I.gradian.value=I.grad.value}q(a),i&&i("config",(function(e,t){e.number!==t.number&&q(e)}));var R={si:{NONE:{unit:z,prefix:T.NONE[""]},LENGTH:{unit:I.m,prefix:T.SHORT[""]},MASS:{unit:I.g,prefix:T.SHORT.k},TIME:{unit:I.s,prefix:T.SHORT[""]},CURRENT:{unit:I.A,prefix:T.SHORT[""]},TEMPERATURE:{unit:I.K,prefix:T.SHORT[""]},LUMINOUS_INTENSITY:{unit:I.cd,prefix:T.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:I.mol,prefix:T.SHORT[""]},ANGLE:{unit:I.rad,prefix:T.SHORT[""]},BIT:{unit:I.bits,prefix:T.SHORT[""]},FORCE:{unit:I.N,prefix:T.SHORT[""]},ENERGY:{unit:I.J,prefix:T.SHORT[""]},POWER:{unit:I.W,prefix:T.SHORT[""]},PRESSURE:{unit:I.Pa,prefix:T.SHORT[""]},ELECTRIC_CHARGE:{unit:I.C,prefix:T.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:I.F,prefix:T.SHORT[""]},ELECTRIC_POTENTIAL:{unit:I.V,prefix:T.SHORT[""]},ELECTRIC_RESISTANCE:{unit:I.ohm,prefix:T.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:I.H,prefix:T.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:I.S,prefix:T.SHORT[""]},MAGNETIC_FLUX:{unit:I.Wb,prefix:T.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:I.T,prefix:T.SHORT[""]},FREQUENCY:{unit:I.Hz,prefix:T.SHORT[""]}}};R.cgs=JSON.parse(JSON.stringify(R.si)),R.cgs.LENGTH={unit:I.m,prefix:T.SHORT.c},R.cgs.MASS={unit:I.g,prefix:T.SHORT[""]},R.cgs.FORCE={unit:I.dyn,prefix:T.SHORT[""]},R.cgs.ENERGY={unit:I.erg,prefix:T.NONE[""]},R.us=JSON.parse(JSON.stringify(R.si)),R.us.LENGTH={unit:I.ft,prefix:T.NONE[""]},R.us.MASS={unit:I.lbm,prefix:T.NONE[""]},R.us.TEMPERATURE={unit:I.degF,prefix:T.NONE[""]},R.us.FORCE={unit:I.lbf,prefix:T.NONE[""]},R.us.ENERGY={unit:I.BTU,prefix:T.BTU[""]},R.us.POWER={unit:I.hp,prefix:T.NONE[""]},R.us.PRESSURE={unit:I.psi,prefix:T.NONE[""]},R.auto=JSON.parse(JSON.stringify(R.si));var j=R.auto;for(var K in w.setUnitSystem=function(e){if(!Lu(R,e))throw new Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(R).join(", "));j=R[e]},w.getUnitSystem=function(){for(var e in R)if(Lu(R,e)&&R[e]===j)return e},w.typeConverters={BigNumber:function(e){return null!==e&&void 0!==e&&e.isFraction?new b(e.n).div(e.d).times(e.s):new b(e+"")},Fraction:function(e){return new x(e)},Complex:function(e){return e},number:function(e){return null!==e&&void 0!==e&&e.isFraction?v(e):e}},w.prototype._numberConverter=function(){var e=w.typeConverters[this.valueType()];if(e)return e;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},w._getNumberConverter=function(e){if(!w.typeConverters[e])throw new TypeError('Unsupported type "'+e+'"');return w.typeConverters[e]},I)if(Lu(I,K)){var V=I[K];V.dimensions=V.base.dimensions}for(var U in P)if(Lu(P,U)){var $=I[P[U]],H={};for(var W in $)Lu($,W)&&(H[W]=$[W]);H.name=U,I[U]=H}return w.isValidAlpha=function(e){return/^[a-zA-Z]$/.test(e)},w.createUnit=function(e,t){if("object"!==typeof e)throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override)for(var n in e)if(Lu(e,n)&&w.deleteUnit(n),e[n].aliases)for(var r=0;r<e[n].aliases.length;r++)w.deleteUnit(e[n].aliases[r]);var i;for(var a in e)Lu(e,a)&&(i=w.createUnitSingle(a,e[a]));return i},w.createUnitSingle=function(e,t){if("undefined"!==typeof t&&null!==t||(t={}),"string"!==typeof e)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Lu(I,e))throw new Error('Cannot create unit "'+e+'": a unit with that name already exists');!function(e){for(var t=0;t<e.length;t++){if(r=e.charAt(t),0===t&&!w.isValidAlpha(r))throw new Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(t>0&&!w.isValidAlpha(r)&&!S(r))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"')}}(e);var n,i,a,o=null,s=[],l=0;if(t&&"Unit"===t.type)o=t.clone();else if("string"===typeof t)""!==t&&(n=t);else{if("object"!==typeof t)throw new TypeError('Cannot create unit "'+e+'" from "'+t.toString()+'": expecting "string" or "Unit" or "Object"');n=t.definition,i=t.prefixes,l=t.offset,a=t.baseName,t.aliases&&(s=t.aliases.valueOf())}if(s)for(var u=0;u<s.length;u++)if(Lu(I,s[u]))throw new Error('Cannot create alias "'+s[u]+'": a unit with that name already exists');if(n&&"string"===typeof n&&!o)try{o=w.parse(n,{allowNoUnits:!0})}catch(C){throw C.message='Could not create unit "'+e+'" from "'+n+'": '+C.message,C}else n&&"Unit"===n.type&&(o=n.clone());s=s||[],l=l||0,i=i&&i.toUpperCase&&T[i.toUpperCase()]||T.NONE;var c={};if(o){c={name:e,value:o.value,dimensions:o.dimensions.slice(0),prefixes:i,offset:l};var d=!1;for(var p in L)if(Lu(L,p)){for(var h=!0,f=0;f<B.length;f++)if(Math.abs((c.dimensions[f]||0)-(L[p].dimensions[f]||0))>1e-12){h=!1;break}if(h){d=!0,c.base=L[p];break}}if(!d){a=a||e+"_STUFF";var m={dimensions:o.dimensions.slice(0)};m.key=a,L[a]=m,j[a]={unit:c,prefix:T.NONE[""]},c.base=L[a]}}else{if(a=a||e+"_STUFF",B.indexOf(a)>=0)throw new Error('Cannot create new base unit "'+e+'": a base unit with that name already exists (and cannot be overridden)');for(var g in B.push(a),L)Lu(L,g)&&(L[g].dimensions[B.length-1]=0);for(var v={dimensions:[]},y=0;y<B.length;y++)v.dimensions[y]=0;v.dimensions[B.length-1]=1,v.key=a,L[a]=v,c={name:e,value:1,dimensions:L[a].dimensions.slice(0),prefixes:i,offset:l,base:L[a]},j[a]={unit:c,prefix:T.NONE[""]}}w.UNITS[e]=c;for(var b=0;b<s.length;b++){var x=s[b],D={};for(var _ in c)Lu(c,_)&&(D[_]=c[_]);D.name=x,w.UNITS[x]=D}return delete M.cache,new w(null,e)},w.deleteUnit=function(e){delete w.UNITS[e],delete M.cache},w.PREFIXES=T,w.BASE_DIMENSIONS=B,w.BASE_UNITS=L,w.UNIT_SYSTEMS=R,w.UNITS=I,w}),{isClass:!0}),sx="unit",lx=zu(sx,["typed","Unit"],(e=>{var{typed:t,Unit:n}=e;return t(sx,{Unit:function(e){return e.clone()},string:function(e){return n.isValuelessUnit(e)?new n(null,e):n.parse(e,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(e,t){return new n(e,t)},"number | BigNumber | Fraction":function(e){return new n(e)},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),ux="sparse",cx=zu(ux,["typed","SparseMatrix"],(e=>{var{typed:t,SparseMatrix:n}=e;return t(ux,{"":function(){return new n([])},string:function(e){return new n([],e)},"Array | Matrix":function(e){return new n(e)},"Array | Matrix, string":function(e,t){return new n(e,t)}})})),dx="createUnit",px=zu(dx,["typed","Unit"],(e=>{var{typed:t,Unit:n}=e;return t(dx,{"Object, Object":function(e,t){return n.createUnit(e,t)},Object:function(e){return n.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,t,r){var i={};return i[e]=t,n.createUnit(i,r)},"string, Unit | string | Object":function(e,t){var r={};return r[e]=t,n.createUnit(r,{})},string:function(e){var t={};return t[e]={},n.createUnit(t,{})}})})),hx="acos",fx=zu(hx,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(hx,{number:function(e){return e>=-1&&e<=1||n.predictable?Math.acos(e):new r(e,0).acos()},Complex:function(e){return e.acos()},BigNumber:function(e){return e.acos()}})})),mx="number";function gx(e){return pc(e)}function vx(e){return Math.atan(1/e)}function yx(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function bx(e){return Math.asin(1/e)}function xx(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function Dx(e){return Math.acos(1/e)}function wx(e){var t=1/e,n=Math.sqrt(t*t-1);return Math.log(n+t)}function _x(e){return hc(e)}function Sx(e){return fc(e)}function Cx(e){return 1/Math.tan(e)}function Ex(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function kx(e){return 1/Math.sin(e)}function Ax(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*Ju(e)}function Nx(e){return 1/Math.cos(e)}function Mx(e){return 2/(Math.exp(e)+Math.exp(-e))}function Fx(e){return gc(e)}gx.signature=mx,vx.signature=mx,yx.signature=mx,bx.signature=mx,xx.signature=mx,Dx.signature=mx,wx.signature=mx,_x.signature=mx,Sx.signature=mx,Cx.signature=mx,Ex.signature=mx,kx.signature=mx,Ax.signature=mx,Nx.signature=mx,Mx.signature=mx,Fx.signature=mx;var Tx="acosh",Bx=zu(Tx,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(Tx,{number:function(e){return e>=1||n.predictable?gx(e):e<=-1?new r(Math.log(Math.sqrt(e*e-1)-e),Math.PI):new r(e,0).acosh()},Complex:function(e){return e.acosh()},BigNumber:function(e){return e.acosh()}})})),Lx="acot",Ox=zu(Lx,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t(Lx,{number:vx,Complex:function(e){return e.acot()},BigNumber:function(e){return new n(1).div(e).atan()}})})),zx="acoth",Ix=zu(zx,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:n,Complex:r,BigNumber:i}=e;return t(zx,{number:function(e){return e>=1||e<=-1||n.predictable?yx(e):new r(e,0).acoth()},Complex:function(e){return e.acoth()},BigNumber:function(e){return new i(1).div(e).atanh()}})})),Px="acsc",qx=zu(Px,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:n,Complex:r,BigNumber:i}=e;return t(Px,{number:function(e){return e<=-1||e>=1||n.predictable?bx(e):new r(e,0).acsc()},Complex:function(e){return e.acsc()},BigNumber:function(e){return new i(1).div(e).asin()}})})),Rx="acsch",jx=zu(Rx,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t(Rx,{number:xx,Complex:function(e){return e.acsch()},BigNumber:function(e){return new n(1).div(e).asinh()}})})),Kx="asec",Vx=zu(Kx,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:n,Complex:r,BigNumber:i}=e;return t(Kx,{number:function(e){return e<=-1||e>=1||n.predictable?Dx(e):new r(e,0).asec()},Complex:function(e){return e.asec()},BigNumber:function(e){return new i(1).div(e).acos()}})})),Ux="asech",$x=zu(Ux,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:n,Complex:r,BigNumber:i}=e;return t(Ux,{number:function(e){if(e<=1&&e>=-1||n.predictable){var t=1/e;if(t>0||n.predictable)return wx(e);var i=Math.sqrt(t*t-1);return new r(Math.log(i-t),Math.PI)}return new r(e,0).asech()},Complex:function(e){return e.asech()},BigNumber:function(e){return new i(1).div(e).acosh()}})})),Hx="asin",Wx=zu(Hx,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(Hx,{number:function(e){return e>=-1&&e<=1||n.predictable?Math.asin(e):new r(e,0).asin()},Complex:function(e){return e.asin()},BigNumber:function(e){return e.asin()}})})),Gx=zu("asinh",["typed"],(e=>{var{typed:t}=e;return t("asinh",{number:_x,Complex:function(e){return e.asinh()},BigNumber:function(e){return e.asinh()}})})),Zx=zu("atan",["typed"],(e=>{var{typed:t}=e;return t("atan",{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()}})})),Jx="atan2",Xx=zu(Jx,["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:a,concat:o}=e,s=km({typed:t,equalScalar:r}),l=Am({typed:t}),u=cg({typed:t,equalScalar:r}),c=sm({typed:t,equalScalar:r}),d=lm({typed:t,DenseMatrix:a}),p=Tm({typed:t,matrix:n,concat:o});return t(Jx,{"number, number":Math.atan2,"BigNumber, BigNumber":(e,t)=>i.atan2(e,t)},p({scalar:"number | BigNumber",SS:u,DS:l,SD:s,Ss:c,sS:d}))})),Yx="atanh",Qx=zu(Yx,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(Yx,{number:function(e){return e<=1&&e>=-1||n.predictable?Sx(e):new r(e,0).atanh()},Complex:function(e){return e.atanh()},BigNumber:function(e){return e.atanh()}})})),eD=zu("trigUnit",["typed"],(e=>{var{typed:t}=e;return{Unit:t.referToSelf((e=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return t.find(e,n.valueType())(n.value)}))}})),tD=zu("cos",["typed"],(e=>{var{typed:t}=e,n=eD({typed:t});return t("cos",{number:Math.cos,"Complex | BigNumber":e=>e.cos()},n)})),nD="cosh",rD=zu(nD,["typed"],(e=>{var{typed:t}=e;return t(nD,{number:mc,"Complex | BigNumber":e=>e.cosh()})})),iD=zu("cot",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t("cot",{number:Cx,Complex:e=>e.cot(),BigNumber:e=>new n(1).div(e.tan())},eD({typed:t}))})),aD="coth",oD=zu(aD,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t(aD,{number:Ex,Complex:e=>e.coth(),BigNumber:e=>new n(1).div(e.tanh())})})),sD=zu("csc",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t("csc",{number:kx,Complex:e=>e.csc(),BigNumber:e=>new n(1).div(e.sin())},eD({typed:t}))})),lD="csch",uD=zu(lD,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t(lD,{number:Ax,Complex:e=>e.csch(),BigNumber:e=>new n(1).div(e.sinh())})})),cD=zu("sec",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t("sec",{number:Nx,Complex:e=>e.sec(),BigNumber:e=>new n(1).div(e.cos())},eD({typed:t}))})),dD="sech",pD=zu(dD,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t(dD,{number:Mx,Complex:e=>e.sech(),BigNumber:e=>new n(1).div(e.cosh())})})),hD=zu("sin",["typed"],(e=>{var{typed:t}=e,n=eD({typed:t});return t("sin",{number:Math.sin,"Complex | BigNumber":e=>e.sin()},n)})),fD="sinh",mD=zu(fD,["typed"],(e=>{var{typed:t}=e;return t(fD,{number:Fx,"Complex | BigNumber":e=>e.sinh()})})),gD=zu("tan",["typed"],(e=>{var{typed:t}=e,n=eD({typed:t});return t("tan",{number:Math.tan,"Complex | BigNumber":e=>e.tan()},n)})),vD=zu("tanh",["typed"],(e=>{var{typed:t}=e;return t("tanh",{number:vc,"Complex | BigNumber":e=>e.tanh()})})),yD="setCartesian",bD=zu(yD,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=e;return t(yD,{"Array | Matrix, Array | Matrix":function(e,t){var s=[];if(0!==r(n(e),new a(0))&&0!==r(n(t),new a(0))){var l=lh(Array.isArray(e)?e:e.toArray()).sort(i),u=lh(Array.isArray(t)?t:t.toArray()).sort(i);s=[];for(var c=0;c<l.length;c++)for(var d=0;d<u.length;d++)s.push([l[c],u[d]])}return Array.isArray(e)&&Array.isArray(t)?s:new o(s)}})})),xD="setDifference",DD=zu(xD,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=e;return t(xD,{"Array | Matrix, Array | Matrix":function(e,t){var s;if(0===r(n(e),new a(0)))s=[];else{if(0===r(n(t),new a(0)))return lh(e.toArray());var l,u=fh(lh(Array.isArray(e)?e:e.toArray()).sort(i)),c=fh(lh(Array.isArray(t)?t:t.toArray()).sort(i));s=[];for(var d=0;d<u.length;d++){l=!1;for(var p=0;p<c.length;p++)if(0===i(u[d].value,c[p].value)&&u[d].identifier===c[p].identifier){l=!0;break}l||s.push(u[d])}}return Array.isArray(e)&&Array.isArray(t)?mh(s):new o(mh(s))}})})),wD="setDistinct",_D=zu(wD,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=e;return t(wD,{"Array | Matrix":function(e){var t;if(0===r(n(e),new a(0)))t=[];else{var s=lh(Array.isArray(e)?e:e.toArray()).sort(i);(t=[]).push(s[0]);for(var l=1;l<s.length;l++)0!==i(s[l],s[l-1])&&t.push(s[l])}return Array.isArray(e)?t:new o(t)}})})),SD="setIntersect",CD=zu(SD,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=e;return t(SD,{"Array | Matrix, Array | Matrix":function(e,t){var s;if(0===r(n(e),new a(0))||0===r(n(t),new a(0)))s=[];else{var l=fh(lh(Array.isArray(e)?e:e.toArray()).sort(i)),u=fh(lh(Array.isArray(t)?t:t.toArray()).sort(i));s=[];for(var c=0;c<l.length;c++)for(var d=0;d<u.length;d++)if(0===i(l[c].value,u[d].value)&&l[c].identifier===u[d].identifier){s.push(l[c]);break}}return Array.isArray(e)&&Array.isArray(t)?mh(s):new o(mh(s))}})})),ED="setIsSubset",kD=zu(ED,["typed","size","subset","compareNatural","Index"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a}=e;return t(ED,{"Array | Matrix, Array | Matrix":function(e,t){if(0===r(n(e),new a(0)))return!0;if(0===r(n(t),new a(0)))return!1;for(var o,s=fh(lh(Array.isArray(e)?e:e.toArray()).sort(i)),l=fh(lh(Array.isArray(t)?t:t.toArray()).sort(i)),u=0;u<s.length;u++){o=!1;for(var c=0;c<l.length;c++)if(0===i(s[u].value,l[c].value)&&s[u].identifier===l[c].identifier){o=!0;break}if(!1===o)return!1}return!0}})})),AD="setMultiplicity",ND=zu(AD,["typed","size","subset","compareNatural","Index"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a}=e;return t(AD,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(e,t){if(0===r(n(t),new a(0)))return 0;for(var o=lh(Array.isArray(t)?t:t.toArray()),s=0,l=0;l<o.length;l++)0===i(o[l],e)&&s++;return s}})})),MD="setPowerset",FD=zu(MD,["typed","size","subset","compareNatural","Index"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a}=e;return t(MD,{"Array | Matrix":function(e){if(0===r(n(e),new a(0)))return[];for(var t=lh(Array.isArray(e)?e:e.toArray()).sort(i),s=[],l=0;l.toString(2).length<=t.length;)s.push(o(t,l.toString(2).split("").reverse())),l++;return function(e){for(var t=[],n=e.length-1;n>0;n--)for(var r=0;r<n;r++)e[r].length>e[r+1].length&&(t=e[r],e[r]=e[r+1],e[r+1]=t);return e}(s)}});function o(e,t){for(var n=[],r=0;r<t.length;r++)"1"===t[r]&&n.push(e[r]);return n}})),TD="setSize",BD=zu(TD,["typed","compareNatural"],(e=>{var{typed:t,compareNatural:n}=e;return t(TD,{"Array | Matrix":function(e){return Array.isArray(e)?lh(e).length:lh(e.toArray()).length},"Array | Matrix, boolean":function(e,t){if(!1===t||0===e.length)return Array.isArray(e)?lh(e).length:lh(e.toArray()).length;for(var r=lh(Array.isArray(e)?e:e.toArray()).sort(n),i=1,a=1;a<r.length;a++)0!==n(r[a],r[a-1])&&i++;return i}})})),LD="setSymDifference",OD=zu(LD,["typed","size","concat","subset","setDifference","Index"],(e=>{var{typed:t,size:n,concat:r,subset:i,setDifference:a,Index:o}=e;return t(LD,{"Array | Matrix, Array | Matrix":function(e,t){if(0===i(n(e),new o(0)))return lh(t);if(0===i(n(t),new o(0)))return lh(e);var s=lh(e),l=lh(t);return r(a(s,l),a(l,s))}})})),zD="setUnion",ID=zu(zD,["typed","size","concat","subset","setIntersect","setSymDifference","Index"],(e=>{var{typed:t,size:n,concat:r,subset:i,setIntersect:a,setSymDifference:o,Index:s}=e;return t(zD,{"Array | Matrix, Array | Matrix":function(e,t){if(0===i(n(e),new s(0)))return lh(t);if(0===i(n(t),new s(0)))return lh(e);var l=lh(e),u=lh(t);return r(o(l,u),a(l,u))}})})),PD=zu("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],(e=>{var{typed:t,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=e,l=Lm({typed:t}),u=Om({typed:t,equalScalar:i}),c=zm({typed:t,DenseMatrix:a}),d=Tm({typed:t,matrix:n,concat:s});return t("add",{"any, any":r,"any, any, ...any":t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),a=0;a<r.length;a++)i=e(i,r[a]);return i}))},d({elop:r,DS:l,SS:u,Ss:c}))})),qD="hypot",RD=zu(qD,["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],(e=>{var{typed:t,abs:n,addScalar:r,divideScalar:i,multiplyScalar:a,sqrt:o,smaller:s,isPositive:l}=e;return t(qD,{"... number | BigNumber":u,Array:u,Matrix:e=>u(lh(e.toArray()))});function u(e){for(var t=0,u=0,c=0;c<e.length;c++){if(jl(e[c]))throw new TypeError("Unexpected type of argument to hypot");var d=n(e[c]);s(u,d)?(t=a(t,a(i(u,d),i(u,d))),t=r(t,1),u=d):t=r(t,l(d)?a(i(d,u),i(d,u)):d)}return a(u,o(t))}})),jD="norm",KD=zu(jD,["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],(e=>{var{typed:t,abs:n,add:r,pow:i,conj:a,sqrt:o,multiply:s,equalScalar:l,larger:u,smaller:c,matrix:d,ctranspose:p,eigs:h}=e;return t(jD,{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return g(d(e),2)},Matrix:function(e){return g(e,2)},"Array, number | BigNumber | string":function(e,t){return g(d(e),t)},"Matrix, number | BigNumber | string":function(e,t){return g(e,t)}});function f(e,t){if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=0;return e.forEach((function(e){var r=n(e);u(r,t)&&(t=r)}),!0),t}(e);if(t===Number.NEGATIVE_INFINITY||"-inf"===t)return function(e){var t;return e.forEach((function(e){var r=n(e);t&&!c(r,t)||(t=r)}),!0),t||0}(e);if("fro"===t)return g(e,2);if("number"===typeof t&&!isNaN(t)){if(!l(t,0)){var a=0;return e.forEach((function(e){a=r(i(n(e),t),a)}),!0),i(a,1/t)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function m(e,t){if(1===t)return function(e){var t=[],i=0;return e.forEach((function(e,a){var o=a[1],s=r(t[o]||0,n(e));u(s,i)&&(i=s),t[o]=s}),!0),i}(e);if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=[],i=0;return e.forEach((function(e,a){var o=a[0],s=r(t[o]||0,n(e));u(s,i)&&(i=s),t[o]=s}),!0),i}(e);if("fro"===t)return function(e){var t=0;return e.forEach((function(e,n){t=r(t,s(e,a(e)))})),n(o(t))}(e);if(2===t)return function(e){var t=e.size();if(t[0]!==t[1])throw new RangeError("Invalid matrix dimensions");var r=p(e),i=s(r,e),a=h(i).values.toArray(),l=a[a.length-1];return n(o(l))}(e);throw new Error("Unsupported parameter value "+t)}function g(e,t){var n=e.size();if(1===n.length)return f(e,t);if(2===n.length){if(n[0]&&n[1])return m(e,t);throw new RangeError("Invalid matrix dimensions")}}})),VD=zu("dot",["typed","addScalar","multiplyScalar","conj","size"],(e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:a}=e;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,a){var l=o(e,a),u=Hl(e)?e._data:e,c=Hl(e)?e._datatype||e.getDataType():void 0,d=Hl(a)?a._data:a,p=Hl(a)?a._datatype||a.getDataType():void 0,h=2===s(e).length,f=2===s(a).length,m=n,g=r;if(c&&p&&c===p&&"string"===typeof c&&"mixed"!==c){var v=c;m=t.find(n,[v,v]),g=t.find(r,[v,v])}if(!h&&!f){for(var y=g(i(u[0]),d[0]),b=1;b<l;b++)y=m(y,g(i(u[b]),d[b]));return y}if(!h&&f){for(var x=g(i(u[0]),d[0][0]),D=1;D<l;D++)x=m(x,g(i(u[D]),d[D][0]));return x}if(h&&!f){for(var w=g(i(u[0][0]),d[0]),_=1;_<l;_++)w=m(w,g(i(u[_][0]),d[_]));return w}if(h&&f){for(var S=g(i(u[0][0]),d[0][0]),C=1;C<l;C++)S=m(S,g(i(u[C][0]),d[C][0]));return S}},"SparseMatrix, SparseMatrix":function(e,t){o(e,t);var i=e._index,a=e._values,s=t._index,l=t._values,u=0,c=n,d=r,p=0,h=0;for(;p<i.length&&h<s.length;){var f=i[p],m=s[h];f<m?p++:f>m?h++:f===m&&(u=c(u,d(a[p],l[h])),p++,h++)}return u}});function o(e,t){var n,r,i=s(e),a=s(t);if(1===i.length)n=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");n=i[0]}if(1===a.length)r=a[0];else{if(2!==a.length||1!==a[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+a.join(", ")+")");r=a[0]}if(n!==r)throw new RangeError("Vectors must have equal length ("+n+" != "+r+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function s(e){return Hl(e)?e.size():a(e)}})),UD=zu("trace",["typed","matrix","add"],(e=>{var{typed:t,matrix:n,add:r}=e;return t("trace",{Array:function(e){return i(n(e))},SparseMatrix:function(e){var t=e._values,n=e._index,i=e._ptr,a=e._size,o=a[0],s=a[1];if(o===s){var l=0;if(t.length>0)for(var u=0;u<s;u++)for(var c=i[u],d=i[u+1],p=c;p<d;p++){var h=n[p];if(h===u){l=r(l,t[p]);break}if(h>u)break}return l}throw new RangeError("Matrix must be square (size: "+jp(a)+")")},DenseMatrix:i,any:Eu});function i(e){var t=e._size,n=e._data;switch(t.length){case 1:if(1===t[0])return Eu(n[0]);throw new RangeError("Matrix must be square (size: "+jp(t)+")");case 2:var i=t[0];if(i===t[1]){for(var a=0,o=0;o<i;o++)a=r(a,n[o][o]);return a}throw new RangeError("Matrix must be square (size: "+jp(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+jp(t)+")")}}})),$D="index",HD=zu($D,["typed","Index"],(e=>{var{typed:t,Index:n}=e;return t($D,{"...number | string | BigNumber | Range | Array | Matrix":function(e){var t=e.map((function(e){return Rl(e)?e.toNumber():$l(e)||Hl(e)?e.map((function(e){return Rl(e)?e.toNumber():e})):e})),r=new n;return n.apply(r,t),r}})})),WD=new Set(["end"]),GD=zu("Node",["mathWithTransform"],(e=>{var{mathWithTransform:t}=e;return class{get type(){return"Node"}get isNode(){return!0}evaluate(e){return this.compile().evaluate(e)}compile(){var e=this._compile(t,{}),n={};return{evaluate:function(t){var r=Fc(t);return function(e){for(var t of[...WD])if(e.has(t))throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}(r),e(r,n,null)}}}_compile(e,t){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(e){throw new Error("Cannot run forEach on a Node interface")}map(e){throw new Error("Cannot run map on a Node interface")}_ifNode(e){if(!vu(e))throw new TypeError("Callback function must return a Node");return e}traverse(e){e(this,null,null),function e(t,n){t.forEach((function(t,r,i){n(t,r,i),e(t,n)}))}(this,e)}transform(e){return function t(n,r,i){var a=e(n,r,i);return a!==n?a:n.map(t)}(this,null,null)}filter(e){var t=[];return this.traverse((function(n,r,i){e(n,r,i)&&t.push(n)})),t}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map((function(e){return e.cloneDeep()}))}equals(e){return!!e&&(this.type===e.type&&Mu(this,e))}toString(e){var t=this._getCustomString(e);return"undefined"!==typeof t?t:this._toString(e)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(e){var t=this._getCustomString(e);return"undefined"!==typeof t?t:this._toHTML(e)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(e){var t=this._getCustomString(e);return"undefined"!==typeof t?t:this._toTex(e)}_toTex(e){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(e){if(e&&"object"===typeof e)switch(typeof e.handler){case"object":case"undefined":return;case"function":return e.handler(this,e);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}}),{isClass:!0,isNode:!0});function ZD(e){return e&&e.isIndexError?new Wu(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}function JD(e){var{subset:t}=e;return function(e,n){try{if(Array.isArray(e))return t(e,n);if(e&&"function"===typeof e.subset)return e.subset(n);if("string"===typeof e)return t(e,n);if("object"===typeof e){if(!n.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return xc(e,n.getObjectProperty())}throw new TypeError("Cannot apply index: unsupported type of object")}catch(r){throw ZD(r)}}}var XD="AccessorNode",YD=zu(XD,["subset","Node"],(e=>{var{subset:t,Node:n}=e,r=JD({subset:t});function i(e){return!(su(e)||lu(e)||pu(e)||mu(e)||yu(e)||xu(e)||_u(e))}class a extends n{constructor(e,t){if(super(),!vu(e))throw new TypeError('Node expected for parameter "object"');if(!gu(t))throw new TypeError('IndexNode expected for parameter "index"');this.object=e,this.index=t}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return XD}get isAccessorNode(){return!0}_compile(e,t){var n=this.object._compile(e,t),i=this.index._compile(e,t);if(this.index.isObjectProperty()){var a=this.index.getObjectProperty();return function(e,t,r){return xc(n(e,t,r),a)}}return function(e,t,a){var o=n(e,t,a),s=i(e,t,o);return r(o,s)}}forEach(e){e(this.object,"object",this),e(this.index,"index",this)}map(e){return new a(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(e){var t=this.object.toString(e);return i(this.object)&&(t="("+t+")"),t+this.index.toString(e)}_toHTML(e){var t=this.object.toHTML(e);return i(this.object)&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+this.index.toHTML(e)}_toTex(e){var t=this.object.toTex(e);return i(this.object)&&(t="\\left(' + object + '\\right)"),t+this.index.toTex(e)}toJSON(){return{mathjs:XD,object:this.object,index:this.index}}static fromJSON(e){return new a(e.object,e.index)}}return o(a,"name",XD),a}),{isClass:!0,isNode:!0}),QD="ArrayNode",ew=zu(QD,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e){if(super(),this.items=e||[],!Array.isArray(this.items)||!this.items.every(vu))throw new TypeError("Array containing Nodes expected")}get type(){return QD}get isArrayNode(){return!0}_compile(e,t){var n=uh(this.items,(function(n){return n._compile(e,t)}));if("Array"!==e.config.matrix){var r=e.matrix;return function(e,t,i){return r(uh(n,(function(n){return n(e,t,i)})))}}return function(e,t,r){return uh(n,(function(n){return n(e,t,r)}))}}forEach(e){for(var t=0;t<this.items.length;t++){e(this.items[t],"items["+t+"]",this)}}map(e){for(var t=[],r=0;r<this.items.length;r++)t[r]=this._ifNode(e(this.items[r],"items["+r+"]",this));return new n(t)}clone(){return new n(this.items.slice(0))}_toString(e){return"["+this.items.map((function(t){return t.toString(e)})).join(", ")+"]"}toJSON(){return{mathjs:QD,items:this.items}}static fromJSON(e){return new n(e.items)}_toHTML(e){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map((function(t){return t.toHTML(e)})).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(e){return function t(n,r){var i=n.some(lu)&&!n.every(lu),a=r||i,o=a?"&":"\\\\",s=n.map((function(n){return n.items?t(n.items,!r):n.toTex(e)})).join(o);return i||!a||a&&!r?"\\begin{bmatrix}"+s+"\\end{bmatrix}":s}(this.items,!1)}}return o(n,"name",QD),n}),{isClass:!0,isNode:!0});var tw=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function nw(e,t){if(!t||"auto"!==t)return e;for(var n=e;xu(n);)n=n.content;return n}function rw(e,t,n,r){var i=e;"keep"!==t&&(i=e.getContent());for(var a=i.getIdentifier(),o=null,s=0;s<tw.length;s++)if(a in tw[s]){o=s;break}if("OperatorNode:multiply"===a&&i.implicit&&"show"!==n){var l=nw(i.args[0],t);pu(l)&&r&&"OperatorNode:divide"===r.getIdentifier()&&hu(nw(r.args[0],t))||"OperatorNode:divide"===l.getIdentifier()&&hu(nw(l.args[0],t))&&pu(nw(l.args[1]))||(o+=1)}return o}function iw(e,t){var n=e;"keep"!==t&&(n=e.getContent());var r=n.getIdentifier(),i=rw(n,t);if(null===i)return null;var a=tw[i][r];if(Lu(a,"associativity")){if("left"===a.associativity)return"left";if("right"===a.associativity)return"right";throw Error("'"+r+"' has the invalid associativity '"+a.associativity+"'.")}return null}function aw(e,t,n){var r="keep"!==n?e.getContent():e,i="keep"!==n?e.getContent():t,a=r.getIdentifier(),o=i.getIdentifier(),s=rw(r,n);if(null===s)return null;var l=tw[s][a];if(Lu(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===o)return!0;return!1}return null}var ow="AssignmentNode",sw=zu(ow,["subset","?matrix","Node"],(e=>{var{subset:t,matrix:n,Node:r}=e,i=JD({subset:t}),a=function(e){var{subset:t,matrix:n}=e;return function(e,r,i){try{if(Array.isArray(e))return n(e).subset(r,i).valueOf().forEach(((t,n)=>{e[n]=t})),e;if(e&&"function"===typeof e.subset)return e.subset(r,i);if("string"===typeof e)return t(e,r,i);if("object"===typeof e){if(!r.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Dc(e,r.getObjectProperty(),i),e}throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw ZD(a)}}}({subset:t,matrix:n});function s(e,t,n){t||(t="keep");var r=rw(e,t,n),i=rw(e.value,t,n);return"all"===t||null!==i&&i<=r}class l extends r{constructor(e,t,n){if(super(),this.object=e,this.index=n?t:null,this.value=n||t,!_u(e)&&!su(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(_u(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!gu(this.index))throw new TypeError('IndexNode expected as "index"');if(!vu(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return ow}get isAssignmentNode(){return!0}_compile(e,t){var n=this.object._compile(e,t),r=this.index?this.index._compile(e,t):null,o=this.value._compile(e,t),s=this.object.name;if(this.index){if(this.index.isObjectProperty()){var l=this.index.getObjectProperty();return function(e,t,r){var i=n(e,t,r),a=o(e,t,r);return Dc(i,l,a),a}}if(_u(this.object))return function(e,t,i){var l=n(e,t,i),u=o(e,t,i),c=r(e,t,l);return e.set(s,a(l,c,u)),u};var u=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var c=this.object.index.getObjectProperty();return function(e,t,n){var i=u(e,t,n),s=xc(i,c),l=r(e,t,s),d=o(e,t,n);return Dc(i,c,a(s,l,d)),d}}var d=this.object.index._compile(e,t);return function(e,t,n){var s=u(e,t,n),l=d(e,t,s),c=i(s,l),p=r(e,t,c),h=o(e,t,n);return a(s,l,a(c,p,h)),h}}if(!_u(this.object))throw new TypeError("SymbolNode expected as object");return function(e,t,n){var r=o(e,t,n);return e.set(s,r),r}}forEach(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this)}map(e){var t=this._ifNode(e(this.object,"object",this)),n=this.index?this._ifNode(e(this.index,"index",this)):null,r=this._ifNode(e(this.value,"value",this));return new l(t,n,r)}clone(){return new l(this.object,this.index,this.value)}_toString(e){var t=this.object.toString(e),n=this.index?this.index.toString(e):"",r=this.value.toString(e);return s(this,e&&e.parenthesis,e&&e.implicit)&&(r="("+r+")"),t+n+" = "+r}toJSON(){return{mathjs:ow,object:this.object,index:this.index,value:this.value}}static fromJSON(e){return new l(e.object,e.index,e.value)}_toHTML(e){var t=this.object.toHTML(e),n=this.index?this.index.toHTML(e):"",r=this.value.toHTML(e);return s(this,e&&e.parenthesis,e&&e.implicit)&&(r='<span class="math-paranthesis math-round-parenthesis">(</span>'+r+'<span class="math-paranthesis math-round-parenthesis">)</span>'),t+n+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+r}_toTex(e){var t=this.object.toTex(e),n=this.index?this.index.toTex(e):"",r=this.value.toTex(e);return s(this,e&&e.parenthesis,e&&e.implicit)&&(r="\\left(".concat(r,"\\right)")),t+n+"="+r}}return o(l,"name",ow),l}),{isClass:!0,isNode:!0}),lw="BlockNode",uw=zu(lw,["ResultSet","Node"],(e=>{var{ResultSet:t,Node:n}=e;class r extends n{constructor(e){if(super(),!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map((function(e){var t=e&&e.node,n=!e||void 0===e.visible||e.visible;if(!vu(t))throw new TypeError('Property "node" must be a Node');if("boolean"!==typeof n)throw new TypeError('Property "visible" must be a boolean');return{node:t,visible:n}}))}get type(){return lw}get isBlockNode(){return!0}_compile(e,n){var r=uh(this.blocks,(function(t){return{evaluate:t.node._compile(e,n),visible:t.visible}}));return function(e,n,i){var a=[];return ch(r,(function(t){var r=t.evaluate(e,n,i);t.visible&&a.push(r)})),new t(a)}}forEach(e){for(var t=0;t<this.blocks.length;t++)e(this.blocks[t].node,"blocks["+t+"].node",this)}map(e){for(var t=[],n=0;n<this.blocks.length;n++){var i=this.blocks[n],a=this._ifNode(e(i.node,"blocks["+n+"].node",this));t[n]={node:a,visible:i.visible}}return new r(t)}clone(){var e=this.blocks.map((function(e){return{node:e.node,visible:e.visible}}));return new r(e)}_toString(e){return this.blocks.map((function(t){return t.node.toString(e)+(t.visible?"":";")})).join("\n")}toJSON(){return{mathjs:lw,blocks:this.blocks}}static fromJSON(e){return new r(e.blocks)}_toHTML(e){return this.blocks.map((function(t){return t.node.toHTML(e)+(t.visible?"":'<span class="math-separator">;</span>')})).join('<span class="math-separator"><br /></span>')}_toTex(e){return this.blocks.map((function(t){return t.node.toTex(e)+(t.visible?"":";")})).join("\\;\\;\n")}}return o(r,"name",lw),r}),{isClass:!0,isNode:!0}),cw="ConditionalNode",dw=zu(cw,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e,t,n){if(super(),!vu(e))throw new TypeError("Parameter condition must be a Node");if(!vu(t))throw new TypeError("Parameter trueExpr must be a Node");if(!vu(n))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=t,this.falseExpr=n}get type(){return cw}get isConditionalNode(){return!0}_compile(e,t){var n=this.condition._compile(e,t),r=this.trueExpr._compile(e,t),i=this.falseExpr._compile(e,t);return function(e,t,a){return function(e){if("number"===typeof e||"boolean"===typeof e||"string"===typeof e)return!!e;if(e){if(Rl(e))return!e.isZero();if(jl(e))return!(!e.re&&!e.im);if(Vl(e))return!!e.value}if(null===e||void 0===e)return!1;throw new TypeError('Unsupported type of condition "'+Cu(e)+'"')}(n(e,t,a))?r(e,t,a):i(e,t,a)}}forEach(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this)}map(e){return new n(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=rw(this,t,e&&e.implicit),r=this.condition.toString(e),i=rw(this.condition,t,e&&e.implicit);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r="("+r+")");var a=this.trueExpr.toString(e),o=rw(this.trueExpr,t,e&&e.implicit);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(a="("+a+")");var s=this.falseExpr.toString(e),l=rw(this.falseExpr,t,e&&e.implicit);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==l&&l<=n)&&(s="("+s+")"),r+" ? "+a+" : "+s}toJSON(){return{mathjs:cw,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(e){return new n(e.condition,e.trueExpr,e.falseExpr)}_toHTML(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=rw(this,t,e&&e.implicit),r=this.condition.toHTML(e),i=rw(this.condition,t,e&&e.implicit);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r='<span class="math-parenthesis math-round-parenthesis">(</span>'+r+'<span class="math-parenthesis math-round-parenthesis">)</span>');var a=this.trueExpr.toHTML(e),o=rw(this.trueExpr,t,e&&e.implicit);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.falseExpr.toHTML(e),l=rw(this.falseExpr,t,e&&e.implicit);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==l&&l<=n)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),r+'<span class="math-operator math-conditional-operator">?</span>'+a+'<span class="math-operator math-conditional-operator">:</span>'+s}_toTex(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return o(n,"name",cw),n}),{isClass:!0,isNode:!0}),pw=n(147),hw={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},fw={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},mw={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(fw.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(fw.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(fw.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(fw.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(fw.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(fw.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(fw.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(fw.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(fw.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(fw.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(fw.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(fw.bitAnd,"${args[1]}\\right)")},bitNot:{1:fw.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(fw.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(fw.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(fw.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(fw.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(fw.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(fw.and,"${args[1]}\\right)")},not:{1:fw.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(fw.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(fw.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(fw.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(fw.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(fw.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(fw.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(fw.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(fw.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(fw.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(fw.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(fw.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(fw.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(fw.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(hw.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},gw={deg:"^\\circ"};function vw(e){return pw(e,{preserveFormatting:!0})}function yw(e,t){return(t="undefined"!==typeof t&&t)?Lu(gw,e)?gw[e]:"\\mathrm{"+vw(e)+"}":Lu(hw,e)?hw[e]:vw(e)}var bw="ConstantNode",xw=zu(bw,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e){super(),this.value=e}get type(){return bw}get isConstantNode(){return!0}_compile(e,t){var n=this.value;return function(){return n}}forEach(e){}map(e){return this.clone()}clone(){return new n(this.value)}_toString(e){return jp(this.value,e)}_toHTML(e){var t=this._toString(e);switch(Cu(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>"}}toJSON(){return{mathjs:bw,value:this.value}}static fromJSON(e){return new n(e.value)}_toTex(e){var t=this._toString(e),n=Cu(this.value);switch(n){case"string":return"\\mathtt{"+vw(t)+"}";case"number":case"BigNumber":if(!("BigNumber"===n?this.value.isFinite():isFinite(this.value)))return this.value.valueOf()<0?"-\\infty":"\\infty";var r=t.toLowerCase().indexOf("e");return-1!==r?t.substring(0,r)+"\\cdot10^{"+t.substring(r+1)+"}":t;case"Fraction":return this.value.toLatex();default:return t}}}return o(n,"name",bw),n}),{isClass:!0,isNode:!0}),Dw="FunctionAssignmentNode",ww=zu(Dw,["typed","Node"],(e=>{var{typed:t,Node:n}=e;function r(e,t,n){var r=rw(e,t,n),i=rw(e.expr,t,n);return"all"===t||null!==i&&i<=r}class i extends n{constructor(e,t,n){if(super(),"string"!==typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!vu(n))throw new TypeError('Node expected for parameter "expr"');if(WD.has(e))throw new Error('Illegal function name, "'+e+'" is a reserved keyword');var r=new Set;for(var i of t){var a="string"===typeof i?i:i.name;if(r.has(a))throw new Error('Duplicate parameter name "'.concat(a,'"'));r.add(a)}this.name=e,this.params=t.map((function(e){return e&&e.name||e})),this.types=t.map((function(e){return e&&e.type||"any"})),this.expr=n}get type(){return Dw}get isFunctionAssignmentNode(){return!0}_compile(e,n){var r=Object.create(n);ch(this.params,(function(e){r[e]=!0}));var i=this.expr._compile(e,r),a=this.name,o=this.params,s=hh(this.types,","),l=a+"("+hh(this.params,", ")+")";return function(e,n,r){var u={};u[s]=function(){for(var t=Object.create(n),a=0;a<o.length;a++)t[o[a]]=arguments[a];return i(e,t,r)};var c=t(a,u);return c.syntax=l,e.set(a,c),c}}forEach(e){e(this.expr,"expr",this)}map(e){var t=this._ifNode(e(this.expr,"expr",this));return new i(this.name,this.params.slice(0),t)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toString(e);return r(this,t,e&&e.implicit)&&(n="("+n+")"),this.name+"("+this.params.join(", ")+") = "+n}toJSON(){var e=this.types;return{mathjs:Dw,name:this.name,params:this.params.map((function(t,n){return{name:t,type:e[n]}})),expr:this.expr}}static fromJSON(e){return new i(e.name,e.params,e.expr)}_toHTML(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=[],i=0;i<this.params.length;i++)n.push('<span class="math-symbol math-parameter">'+Up(this.params[i])+"</span>");var a=this.expr.toHTML(e);return r(this,t,e&&e.implicit)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Up(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+n.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+a}_toTex(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toTex(e);return r(this,t,e&&e.implicit)&&(n="\\left(".concat(n,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(yw).join(",")+"\\right)="+n}}return o(i,"name",Dw),i}),{isClass:!0,isNode:!0}),_w="IndexNode",Sw=zu(_w,["Node","size"],(e=>{var{Node:t,size:n}=e;class r extends t{constructor(e,t){if(super(),this.dimensions=e,this.dotNotation=t||!1,!Array.isArray(e)||!e.every(vu))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return _w}get isIndexNode(){return!0}_compile(e,t){var r=uh(this.dimensions,(function(r,i){if(r.filter((e=>e.isSymbolNode&&"end"===e.name)).length>0){var a=Object.create(t);a.end=!0;var o=r._compile(e,a);return function(e,t,r){if(!Hl(r)&&!$l(r)&&!Ul(r))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Cu(r));var a=n(r).valueOf(),s=Object.create(t);return s.end=a[i],o(e,s,r)}}return r._compile(e,t)})),i=xc(e,"index");return function(e,t,n){var a=uh(r,(function(r){return r(e,t,n)}));return i(...a)}}forEach(e){for(var t=0;t<this.dimensions.length;t++)e(this.dimensions[t],"dimensions["+t+"]",this)}map(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this._ifNode(e(this.dimensions[n],"dimensions["+n+"]",this));return new r(t,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return 1===this.dimensions.length&&pu(this.dimensions[0])&&"string"===typeof this.dimensions[0].value}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:_w,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(e){return new r(e.dimensions,e.dotNotation)}_toHTML(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this.dimensions[n].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Up(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(e){var t=this.dimensions.map((function(t){return t.toTex(e)}));return this.dotNotation?"."+this.getObjectProperty():"_{"+t.join(",")+"}"}}return o(r,"name",_w),r}),{isClass:!0,isNode:!0}),Cw="ObjectNode",Ew=zu(Cw,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e){if(super(),this.properties=e||{},e&&("object"!==typeof e||!Object.keys(e).every((function(t){return vu(e[t])}))))throw new TypeError("Object containing Nodes expected")}get type(){return Cw}get isObjectNode(){return!0}_compile(e,t){var n={};for(var r in this.properties)if(Lu(this.properties,r)){var i=Kp(r),a=JSON.parse(i),o=xc(this.properties,r);n[a]=o._compile(e,t)}return function(e,t,r){var i={};for(var a in n)Lu(n,a)&&(i[a]=n[a](e,t,r));return i}}forEach(e){for(var t in this.properties)Lu(this.properties,t)&&e(this.properties[t],"properties["+Kp(t)+"]",this)}map(e){var t={};for(var r in this.properties)Lu(this.properties,r)&&(t[r]=this._ifNode(e(this.properties[r],"properties["+Kp(r)+"]",this)));return new n(t)}clone(){var e={};for(var t in this.properties)Lu(this.properties,t)&&(e[t]=this.properties[t]);return new n(e)}_toString(e){var t=[];for(var n in this.properties)Lu(this.properties,n)&&t.push(Kp(n)+": "+this.properties[n].toString(e));return"{"+t.join(", ")+"}"}toJSON(){return{mathjs:Cw,properties:this.properties}}static fromJSON(e){return new n(e.properties)}_toHTML(e){var t=[];for(var n in this.properties)Lu(this.properties,n)&&t.push('<span class="math-symbol math-property">'+Up(n)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[n].toHTML(e));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(e){var t=[];for(var n in this.properties)Lu(this.properties,n)&&t.push("\\mathbf{"+n+":} & "+this.properties[n].toTex(e)+"\\\\");return"\\left\\{\\begin{array}{ll}"+t.join("\n")+"\\end{array}\\right\\}"}}return o(n,"name",Cw),n}),{isClass:!0,isNode:!0});function kw(e,t){return new Ac(e,new kc(t),new Set(Object.keys(t)))}var Aw="OperatorNode",Nw=zu(Aw,["Node"],(e=>{var{Node:t}=e;function n(e,t){var r=e;if("auto"===t)for(;xu(r);)r=r.content;return!!pu(r)||!!bu(r)&&n(r.args[0],t)}function r(e,t,r,i,a){var o,s=rw(e,t,r),l=iw(e,t);if("all"===t||i.length>2&&"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier())return i.map((function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}}));switch(i.length){case 0:o=[];break;case 1:var u=rw(i[0],t,r,e);if(a&&null!==u){var c,d;if("keep"===t?(c=i[0].getIdentifier(),d=e.getIdentifier()):(c=i[0].getContent().getIdentifier(),d=e.getContent().getIdentifier()),!1===tw[s][d].latexLeftParens){o=[!1];break}if(!1===tw[u][c].latexParens){o=[!1];break}}if(null===u){o=[!1];break}if(u<=s){o=[!0];break}o=[!1];break;case 2:var p,h,f=rw(i[0],t,r,e),m=aw(e,i[0],t);p=null!==f&&(f===s&&"right"===l&&!m||f<s);var g,v,y,b=rw(i[1],t,r,e),x=aw(e,i[1],t);if(h=null!==b&&(b===s&&"left"===l&&!x||b<s),a)"keep"===t?(g=e.getIdentifier(),v=e.args[0].getIdentifier(),y=e.args[1].getIdentifier()):(g=e.getContent().getIdentifier(),v=e.args[0].getContent().getIdentifier(),y=e.args[1].getContent().getIdentifier()),null!==f&&(!1===tw[s][g].latexLeftParens&&(p=!1),!1===tw[f][v].latexParens&&(p=!1)),null!==b&&(!1===tw[s][g].latexRightParens&&(h=!1),!1===tw[b][y].latexParens&&(h=!1));o=[p,h];break;default:"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier()||(o=i.map((function(n){var i=rw(n,t,r,e),a=aw(e,n,t),o=iw(n,t);return null!==i&&(s===i&&l===o&&!a||i<s)})))}if(i.length>=2&&"OperatorNode:multiply"===e.getIdentifier()&&e.implicit&&"all"!==t&&"hide"===r)for(var D=1;D<o.length;++D)!n(i[D],t)||o[D-1]||"keep"===t&&xu(i[D-1])||(o[D]=!0);return o}class i extends t{constructor(e,t,n,r,i){if(super(),"string"!==typeof e)throw new TypeError('string expected for parameter "op"');if("string"!==typeof t)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(n)||!n.every(vu))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===r,this.isPercentage=!0===i,this.op=e,this.fn=t,this.args=n||[]}get type(){return Aw}get isOperatorNode(){return!0}_compile(e,t){if("string"!==typeof this.fn||!_c(e,this.fn))throw e[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var n=xc(e,this.fn),r=uh(this.args,(function(n){return n._compile(e,t)}));if("function"===typeof n&&!0===n.rawArgs){var i=this.args;return function(t,r,a){return n(i,e,kw(t,r))}}if(1===r.length){var a=r[0];return function(e,t,r){return n(a(e,t,r))}}if(2===r.length){var o=r[0],s=r[1];return function(e,t,r){return n(o(e,t,r),s(e,t,r))}}return function(e,t,i){return n.apply(null,uh(r,(function(n){return n(e,t,i)})))}}forEach(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)}map(e){for(var t=[],n=0;n<this.args.length;n++)t[n]=this._ifNode(e(this.args[n],"args["+n+"]",this));return new i(this.op,this.fn,t,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return 1===this.args.length}isBinary(){return 2===this.args.length}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,a=r(this,t,n,i,!1);if(1===i.length){var o=iw(this,t),s=i[0].toString(e);a[0]&&(s="("+s+")");var l=/[a-zA-Z]+/.test(this.op);return"right"===o?this.op+(l?" ":"")+s:"left"===o?s+(l?" ":"")+this.op:s+this.op}if(2===i.length){var u=i[0].toString(e),c=i[1].toString(e);return a[0]&&(u="("+u+")"),a[1]&&(c="("+c+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?u+" "+c:u+" "+this.op+" "+c}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var d=i.map((function(t,n){return t=t.toString(e),a[n]&&(t="("+t+")"),t}));return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?d.join(" "):d.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:Aw,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(e){return new i(e.op,e.fn,e.args,e.implicit,e.isPercentage)}_toHTML(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,a=r(this,t,n,i,!1);if(1===i.length){var o=iw(this,t),s=i[0].toHTML(e);return a[0]&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===o?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Up(this.op)+"</span>"+s:s+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Up(this.op)+"</span>"}if(2===i.length){var l=i[0].toHTML(e),u=i[1].toHTML(e);return a[0]&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),a[1]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?l+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+u:l+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Up(this.op)+"</span>"+u}var c=i.map((function(t,n){return t=t.toHTML(e),a[n]&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t}));return i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?c.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):c.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Up(this.op)+"</span>"):'<span class="math-function">'+Up(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}_toTex(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,a=r(this,t,n,i,!0),o=fw[this.fn];if(o="undefined"===typeof o?this.op:o,1===i.length){var s=iw(this,t),l=i[0].toTex(e);return a[0]&&(l="\\left(".concat(l,"\\right)")),"right"===s?o+l:l+o}if(2===i.length){var u=i[0],c=u.toTex(e);a[0]&&(c="\\left(".concat(c,"\\right)"));var d,p=i[1].toTex(e);switch(a[1]&&(p="\\left(".concat(p,"\\right)")),d="keep"===t?u.getIdentifier():u.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return o+"{"+c+"}{"+p+"}";case"OperatorNode:pow":switch(c="{"+c+"}",p="{"+p+"}",d){case"ConditionalNode":case"OperatorNode:divide":c="\\left(".concat(c,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===n)return c+"~"+p}return c+o+p}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var h=i.map((function(t,n){return t=t.toTex(e),a[n]&&(t="\\left(".concat(t,"\\right)")),t}));return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit&&"hide"===n?h.join("~"):h.join(o)}return"\\mathrm{"+this.fn+"}\\left("+i.map((function(t){return t.toTex(e)})).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return o(i,"name",Aw),i}),{isClass:!0,isNode:!0}),Mw="ParenthesisNode",Fw=zu(Mw,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e){if(super(),!vu(e))throw new TypeError('Node expected for parameter "content"');this.content=e}get type(){return Mw}get isParenthesisNode(){return!0}_compile(e,t){return this.content._compile(e,t)}getContent(){return this.content.getContent()}forEach(e){e(this.content,"content",this)}map(e){var t=e(this.content,"content",this);return new n(t)}clone(){return new n(this.content)}_toString(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e)}toJSON(){return{mathjs:Mw,content:this.content}}static fromJSON(e){return new n(e.content)}_toHTML(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(e)}_toTex(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left(".concat(this.content.toTex(e),"\\right)"):this.content.toTex(e)}}return o(n,"name",Mw),n}),{isClass:!0,isNode:!0}),Tw="RangeNode",Bw=zu(Tw,["Node"],(e=>{var{Node:t}=e;function n(e,t,n){var r=rw(e,t,n),i={},a=rw(e.start,t,n);if(i.start=null!==a&&a<=r||"all"===t,e.step){var o=rw(e.step,t,n);i.step=null!==o&&o<=r||"all"===t}var s=rw(e.end,t,n);return i.end=null!==s&&s<=r||"all"===t,i}class r extends t{constructor(e,t,n){if(super(),!vu(e))throw new TypeError("Node expected");if(!vu(t))throw new TypeError("Node expected");if(n&&!vu(n))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=t,this.step=n||null}get type(){return Tw}get isRangeNode(){return!0}needsEnd(){return this.filter((function(e){return _u(e)&&"end"===e.name})).length>0}_compile(e,t){var n=e.range,r=this.start._compile(e,t),i=this.end._compile(e,t);if(this.step){var a=this.step._compile(e,t);return function(e,t,o){return n(r(e,t,o),i(e,t,o),a(e,t,o))}}return function(e,t,a){return n(r(e,t,a),i(e,t,a))}}forEach(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this)}map(e){return new r(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),i=this.start.toString(e);if(r.start&&(i="("+i+")"),t=i,this.step){var a=this.step.toString(e);r.step&&(a="("+a+")"),t+=":"+a}var o=this.end.toString(e);return r.end&&(o="("+o+")"),t+=":"+o}toJSON(){return{mathjs:Tw,start:this.start,end:this.end,step:this.step}}static fromJSON(e){return new r(e.start,e.end,e.step)}_toHTML(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),i=this.start.toHTML(e);if(r.start&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t=i,this.step){var a=this.step.toHTML(e);r.step&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+a}var o=this.end.toHTML(e);return r.end&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+o}_toTex(e){var t=n(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),r=this.start.toTex(e);if(t.start&&(r="\\left(".concat(r,"\\right)")),this.step){var i=this.step.toTex(e);t.step&&(i="\\left(".concat(i,"\\right)")),r+=":"+i}var a=this.end.toTex(e);return t.end&&(a="\\left(".concat(a,"\\right)")),r+=":"+a}}return o(r,"name",Tw),r}),{isClass:!0,isNode:!0}),Lw="RelationalNode",Ow=zu(Lw,["Node"],(e=>{var{Node:t}=e,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends t{constructor(e,t){if(super(),!Array.isArray(e))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(t))throw new TypeError("Parameter params must be an array");if(e.length!==t.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=e,this.params=t}get type(){return Lw}get isRelationalNode(){return!0}_compile(e,t){var n=this,r=this.params.map((n=>n._compile(e,t)));return function(t,i,a){for(var o,s=r[0](t,i,a),l=0;l<n.conditionals.length;l++){if(o=s,s=r[l+1](t,i,a),!xc(e,n.conditionals[l])(o,s))return!1}return!0}}forEach(e){this.params.forEach(((t,n)=>e(t,"params["+n+"]",this)),this)}map(e){return new r(this.conditionals.slice(),this.params.map(((t,n)=>this._ifNode(e(t,"params["+n+"]",this))),this))}clone(){return new r(this.conditionals,this.params)}_toString(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=rw(this,t,e&&e.implicit),i=this.params.map((function(n,i){var a=rw(n,t,e&&e.implicit);return"all"===t||null!==a&&a<=r?"("+n.toString(e)+")":n.toString(e)})),a=i[0],o=0;o<this.conditionals.length;o++)a+=" "+n[this.conditionals[o]],a+=" "+i[o+1];return a}toJSON(){return{mathjs:Lw,conditionals:this.conditionals,params:this.params}}static fromJSON(e){return new r(e.conditionals,e.params)}_toHTML(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=rw(this,t,e&&e.implicit),i=this.params.map((function(n,i){var a=rw(n,t,e&&e.implicit);return"all"===t||null!==a&&a<=r?'<span class="math-parenthesis math-round-parenthesis">(</span>'+n.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':n.toHTML(e)})),a=i[0],o=0;o<this.conditionals.length;o++)a+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Up(n[this.conditionals[o]])+"</span>"+i[o+1];return a}_toTex(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=rw(this,t,e&&e.implicit),r=this.params.map((function(r,i){var a=rw(r,t,e&&e.implicit);return"all"===t||null!==a&&a<=n?"\\left("+r.toTex(e)+"\right)":r.toTex(e)})),i=r[0],a=0;a<this.conditionals.length;a++)i+=fw[this.conditionals[a]]+r[a+1];return i}}return o(r,"name",Lw),r}),{isClass:!0,isNode:!0}),zw=zu("SymbolNode",["math","?Unit","Node"],(e=>{var{math:t,Unit:n,Node:r}=e;function i(e){return!!n&&n.isValuelessUnit(e)}class a extends r{constructor(e){if(super(),"string"!==typeof e)throw new TypeError('String expected for parameter "name"');this.name=e}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(e,t){var r=this.name;if(!0===t[r])return function(e,t,n){return xc(t,r)};if(r in e)return function(t,n,i){return t.has(r)?t.get(r):xc(e,r)};var o=i(r);return function(e,t,i){return e.has(r)?e.get(r):o?new n(null,r):a.onUndefinedSymbol(r)}}forEach(e){}map(e){return this.clone()}static onUndefinedSymbol(e){throw new Error("Undefined symbol "+e)}clone(){return new a(this.name)}_toString(e){return this.name}_toHTML(e){var t=Up(this.name);return"true"===t||"false"===t?'<span class="math-symbol math-boolean">'+t+"</span>":"i"===t?'<span class="math-symbol math-imaginary-symbol">'+t+"</span>":"Infinity"===t?'<span class="math-symbol math-infinity-symbol">'+t+"</span>":"NaN"===t?'<span class="math-symbol math-nan-symbol">'+t+"</span>":"null"===t?'<span class="math-symbol math-null-symbol">'+t+"</span>":"undefined"===t?'<span class="math-symbol math-undefined-symbol">'+t+"</span>":'<span class="math-symbol">'+t+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(e){return new a(e.name)}_toTex(e){var n=!1;"undefined"===typeof t[this.name]&&i(this.name)&&(n=!0);var r=yw(this.name,n);return"\\"===r[0]?r:" "+r}}return a}),{isClass:!0,isNode:!0}),Iw="FunctionNode",Pw=zu(Iw,["math","Node","SymbolNode"],(e=>{var t,{math:n,Node:r,SymbolNode:i}=e,a=e=>jp(e,{truncate:78});function s(e,t,n){for(var r,i="",a=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,o=0;null!==(r=a.exec(e));)if(i+=e.substring(o,r.index),o=r.index,"$$"===r[0])i+="$",o++;else{o+=r[0].length;var s=t[r[1]];if(!s)throw new ReferenceError("Template: Property "+r[1]+" does not exist.");if(void 0===r[2])switch(typeof s){case"string":i+=s;break;case"object":if(vu(s))i+=s.toTex(n);else{if(!Array.isArray(s))throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes");i+=s.map((function(e,t){if(vu(e))return e.toTex(n);throw new TypeError("Template: "+r[1]+"["+t+"] is not a Node.")})).join(",")}break;default:throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes")}else{if(!vu(s[r[2]]&&s[r[2]]))throw new TypeError("Template: "+r[1]+"["+r[2]+"] is not a Node.");i+=s[r[2]].toTex(n)}}return i+=e.slice(o)}class l extends r{constructor(e,t){if(super(),"string"===typeof e&&(e=new i(e)),!vu(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(vu))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[]}get name(){return this.fn.name||""}get type(){return Iw}get isFunctionNode(){return!0}_compile(e,t){var n=this.args.map((n=>n._compile(e,t)));if(!_u(this.fn)){if(su(this.fn)&&gu(this.fn.index)&&this.fn.index.isObjectProperty()){var r=this.fn.object._compile(e,t),i=this.fn.index.getObjectProperty(),o=this.args;return function(t,a,s){var l=r(t,a,s),u=function(e,t){if(!_c(e,t))throw new Error('No access to method "'+t+'"');return e[t]}(l,i);if(null!==u&&void 0!==u&&u.rawArgs)return u(o,e,kw(t,a));var c=n.map((e=>e(t,a,s)));return u.apply(l,c)}}var s=this.fn.toString(),u=this.fn._compile(e,t),c=this.args;return function(t,r,i){var o=u(t,r,i);if("function"!==typeof o)throw new TypeError("Expression '".concat(s,"' did not evaluate to a function; value is:")+"\n  ".concat(a(o)));if(o.rawArgs)return o(c,e,kw(t,r));var l=n.map((e=>e(t,r,i)));return o.apply(o,l)}}var d=this.fn.name;if(t[d]){var p=this.args;return function(t,r,i){var o=xc(r,d);if("function"!==typeof o)throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(a(o)));if(o.rawArgs)return o(p,e,kw(t,r));var s=n.map((e=>e(t,r,i)));return o.apply(o,s)}}var h=d in e?xc(e,d):void 0,f="function"===typeof h&&!0===h.rawArgs,m=t=>{var n;if(t.has(d))n=t.get(d);else{if(!(d in e))return l.onUndefinedFunction(d);n=xc(e,d)}if("function"===typeof n)return n;throw new TypeError("'".concat(d,"' is not a function; its value is:\n  ").concat(a(n)))};if(f){var g=this.args;return function(t,n,r){return m(t)(g,e,kw(t,n))}}switch(n.length){case 0:return function(e,t,n){return m(e)()};case 1:return function(e,t,r){return m(e)((0,n[0])(e,t,r))};case 2:return function(e,t,r){var i=m(e),a=n[0],o=n[1];return i(a(e,t,r),o(e,t,r))};default:return function(e,t,r){return m(e)(...n.map((n=>n(e,t,r))))}}}forEach(e){e(this.fn,"fn",this);for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)}map(e){for(var t=this._ifNode(e(this.fn,"fn",this)),n=[],r=0;r<this.args.length;r++)n[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));return new l(t,n)}clone(){return new l(this.fn,this.args.slice(0))}toString(e){var t,n=this.fn.toString(e);return e&&"object"===typeof e.handler&&Lu(e.handler,n)&&(t=e.handler[n](this,e)),"undefined"!==typeof t?t:super.toString(e)}_toString(e){var t=this.args.map((function(t){return t.toString(e)}));return(fu(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+t.join(", ")+")"}toJSON(){return{mathjs:Iw,fn:this.fn,args:this.args}}_toHTML(e){var t=this.args.map((function(t){return t.toHTML(e)}));return'<span class="math-function">'+Up(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(e){var t;return e&&"object"===typeof e.handler&&Lu(e.handler,this.name)&&(t=e.handler[this.name](this,e)),"undefined"!==typeof t?t:super.toTex(e)}_toTex(e){var t,r,i=this.args.map((function(t){return t.toTex(e)}));switch(mw[this.name]&&(t=mw[this.name]),!n[this.name]||"function"!==typeof n[this.name].toTex&&"object"!==typeof n[this.name].toTex&&"string"!==typeof n[this.name].toTex||(t=n[this.name].toTex),typeof t){case"function":r=t(this,e);break;case"string":r=s(t,this,e);break;case"object":switch(typeof t[i.length]){case"function":r=t[i.length](this,e);break;case"string":r=s(t[i.length],this,e)}}return"undefined"!==typeof r?r:s("\\mathrm{${name}}\\left(${args}\\right)",this,e)}getIdentifier(){return this.type+":"+this.name}}return t=l,o(l,"name",Iw),o(l,"onUndefinedFunction",(function(e){throw new Error("Undefined function "+e)})),o(l,"fromJSON",(function(e){return new t(e.fn,e.args)})),l}),{isClass:!0,isNode:!0}),qw="parse",Rw=zu(qw,["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],(e=>{var{typed:t,numeric:n,config:r,AccessorNode:i,ArrayNode:a,AssignmentNode:o,BlockNode:s,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:d,IndexNode:p,ObjectNode:h,OperatorNode:f,ParenthesisNode:m,RangeNode:g,RelationalNode:v,SymbolNode:y}=e,b=t(qw,{string:function(e){return z(e,{})},"Array | Matrix":function(e){return x(e,{})},"string, Object":function(e,t){return z(e,void 0!==t.nodes?t.nodes:{})},"Array | Matrix, Object":x});function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0!==t.nodes?t.nodes:{};return Fh(e,(function(e){if("string"!==typeof e)throw new TypeError("String expected");return z(e,n)}))}var D={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},w={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},_={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},S={true:!0,false:!1,null:null,undefined:void 0},C=["NaN","Infinity"],E={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function k(e,t){return e.expression.substr(e.index,t)}function A(e){return k(e,1)}function N(e){e.index++}function M(e){return e.expression.charAt(e.index-1)}function F(e){return e.expression.charAt(e.index+1)}function T(e){for(e.tokenType=D.NULL,e.token="",e.comment="";;){if("#"===A(e))for(;"\n"!==A(e)&&""!==A(e);)e.comment+=A(e),N(e);if(!b.isWhitespace(A(e),e.nestingLevel))break;N(e)}if(""!==A(e)){if("\n"===A(e)&&!e.nestingLevel)return e.tokenType=D.DELIMITER,e.token=A(e),void N(e);var t=A(e),n=k(e,2),r=k(e,3);if(3===r.length&&w[r])return e.tokenType=D.DELIMITER,e.token=r,N(e),N(e),void N(e);if(2===n.length&&w[n])return e.tokenType=D.DELIMITER,e.token=n,N(e),void N(e);if(w[t])return e.tokenType=D.DELIMITER,e.token=t,void N(e);if(b.isDigitDot(t)){e.tokenType=D.NUMBER;var i=k(e,2);if("0b"===i||"0o"===i||"0x"===i){for(e.token+=A(e),N(e),e.token+=A(e),N(e);b.isHexDigit(A(e));)e.token+=A(e),N(e);if("."===A(e))for(e.token+=".",N(e);b.isHexDigit(A(e));)e.token+=A(e),N(e);else if("i"===A(e))for(e.token+="i",N(e);b.isDigit(A(e));)e.token+=A(e),N(e);return}if("."===A(e)){if(e.token+=A(e),N(e),!b.isDigit(A(e)))return void(e.tokenType=D.DELIMITER)}else{for(;b.isDigit(A(e));)e.token+=A(e),N(e);b.isDecimalMark(A(e),F(e))&&(e.token+=A(e),N(e))}for(;b.isDigit(A(e));)e.token+=A(e),N(e);if("E"===A(e)||"e"===A(e))if(b.isDigit(F(e))||"-"===F(e)||"+"===F(e)){if(e.token+=A(e),N(e),"+"!==A(e)&&"-"!==A(e)||(e.token+=A(e),N(e)),!b.isDigit(A(e)))throw re(e,'Digit expected, got "'+A(e)+'"');for(;b.isDigit(A(e));)e.token+=A(e),N(e);if(b.isDecimalMark(A(e),F(e)))throw re(e,'Digit expected, got "'+A(e)+'"')}else if("."===F(e))throw N(e),re(e,'Digit expected, got "'+A(e)+'"')}else{if(!b.isAlpha(A(e),M(e),F(e))){for(e.tokenType=D.UNKNOWN;""!==A(e);)e.token+=A(e),N(e);throw re(e,'Syntax error in part "'+e.token+'"')}for(;b.isAlpha(A(e),M(e),F(e))||b.isDigit(A(e));)e.token+=A(e),N(e);Lu(_,e.token)?e.tokenType=D.DELIMITER:e.tokenType=D.SYMBOL}}else e.tokenType=D.DELIMITER}function B(e){do{T(e)}while("\n"===e.token)}function L(e){e.nestingLevel++}function O(e){e.nestingLevel--}function z(e,t){var n={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:D.NULL,nestingLevel:0,conditionalLevel:null};Il(n,{expression:e,extraNodes:t}),T(n);var r=function(e){var t,n,r=[];""!==e.token&&"\n"!==e.token&&";"!==e.token&&(t=I(e),e.comment&&(t.comment=e.comment));for(;"\n"===e.token||";"===e.token;)0===r.length&&t&&(n=";"!==e.token,r.push({node:t,visible:n})),T(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&(t=I(e),e.comment&&(t.comment=e.comment),n=";"!==e.token,r.push({node:t,visible:n}));return r.length>0?new s(r):(t||(t=new u(void 0),e.comment&&(t.comment=e.comment)),t)}(n);if(""!==n.token)throw n.tokenType===D.DELIMITER?ie(n,"Unexpected operator "+n.token):re(n,'Unexpected part "'+n.token+'"');return r}function I(e){var t,n,r,i,a=function(e){var t=function(e){var t=P(e);for(;"or"===e.token;)B(e),t=new f("or","or",[t,P(e)]);return t}(e);for(;"?"===e.token;){var n=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,B(e);var r=t,i=I(e);if(":"!==e.token)throw re(e,"False part of conditional expression expected");e.conditionalLevel=null,B(e);var a=I(e);t=new l(r,i,a),e.conditionalLevel=n}return t}(e);if("="===e.token){if(_u(a))return t=a.name,B(e),r=I(e),new o(new y(t),r);if(su(a))return B(e),r=I(e),new o(a.object,a.index,r);if(mu(a)&&_u(a.fn)&&(i=!0,n=[],t=a.name,a.args.forEach((function(e,t){_u(e)?n[t]=e.name:i=!1})),i))return B(e),r=I(e),new c(t,n,r);throw re(e,"Invalid left hand side of assignment operator =")}return a}function P(e){for(var t=q(e);"xor"===e.token;)B(e),t=new f("xor","xor",[t,q(e)]);return t}function q(e){for(var t=R(e);"and"===e.token;)B(e),t=new f("and","and",[t,R(e)]);return t}function R(e){for(var t=j(e);"|"===e.token;)B(e),t=new f("|","bitOr",[t,j(e)]);return t}function j(e){for(var t=K(e);"^|"===e.token;)B(e),t=new f("^|","bitXor",[t,K(e)]);return t}function K(e){for(var t=V(e);"&"===e.token;)B(e),t=new f("&","bitAnd",[t,V(e)]);return t}function V(e){for(var t=[U(e)],n=[],r={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Lu(r,e.token);){var i={name:e.token,fn:r[e.token]};n.push(i),B(e),t.push(U(e))}return 1===t.length?t[0]:2===t.length?new f(n[0].name,n[0].fn,t):new v(n.map((e=>e.fn)),t)}function U(e){var t,n,r,i;t=$(e);for(var a={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Lu(a,e.token);)r=a[n=e.token],B(e),i=[t,$(e)],t=new f(n,r,i);return t}function $(e){var t,n,r,i;t=H(e);for(var a={to:"to",in:"to"};Lu(a,e.token);)r=a[n=e.token],B(e),"in"===n&&""===e.token?t=new f("*","multiply",[t,new y("in")],!0):(i=[t,H(e)],t=new f(n,r,i));return t}function H(e){var t,n=[];if(t=":"===e.token?new u(1):W(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(n.push(t);":"===e.token&&n.length<3;)B(e),")"===e.token||"]"===e.token||","===e.token||""===e.token?n.push(new y("end")):n.push(W(e));t=3===n.length?new g(n[0],n[2],n[1]):new g(n[0],n[1])}return t}function W(e){var t,n,r,i;t=G(e);for(var a={"+":"add","-":"subtract"};Lu(a,e.token);){r=a[n=e.token],B(e);var o=G(e);i=o.isPercentage?[t,new f("*","multiply",[t,o])]:[t,o],t=new f(n,r,i)}return t}function G(e){var t,n,r,i;n=t=Z(e);for(var a={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};Lu(a,e.token);)i=a[r=e.token],B(e),n=Z(e),t=new f(r,i,[t,n]);return t}function Z(e){var t,n;for(n=t=J(e);e.tokenType===D.SYMBOL||"in"===e.token&&pu(t)||!(e.tokenType!==D.NUMBER||pu(n)||bu(n)&&"!"!==n.op)||"("===e.token;)n=J(e),t=new f("*","multiply",[t,n],!0);return t}function J(e){for(var t=X(e),n=t,r=[];"/"===e.token&&hu(n);){if(r.push(Il({},e)),B(e),e.tokenType!==D.NUMBER){Il(e,r.pop());break}if(r.push(Il({},e)),B(e),e.tokenType!==D.SYMBOL&&"("!==e.token){r.pop(),Il(e,r.pop());break}Il(e,r.pop()),r.pop(),n=X(e),t=new f("/","divide",[t,n])}return t}function X(e){var t,n,r,i;t=Y(e);for(var a={"%":"mod",mod:"mod"};Lu(a,e.token);)r=a[n=e.token],B(e),"%"===n&&e.tokenType===D.DELIMITER&&"("!==e.token?t=new f("/","divide",[t,new u(100)],!1,!0):(i=[t,Y(e)],t=new f(n,r,i));return t}function Y(e){var t,i,o,s={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Lu(s,e.token)?(o=s[e.token],t=e.token,B(e),i=[Y(e)],new f(t,o,i)):function(e){var t,i,o,s;t=function(e){var t,i,o;t=function(e){var t=[];if(e.tokenType===D.SYMBOL&&Lu(e.extraNodes,e.token)){var i=e.extraNodes[e.token];if(T(e),"("===e.token){if(t=[],L(e),T(e),")"!==e.token)for(t.push(I(e));","===e.token;)T(e),t.push(I(e));if(")"!==e.token)throw re(e,"Parenthesis ) expected");O(e),T(e)}return new i(t)}return function(e){var t;if(e.tokenType===D.SYMBOL||e.tokenType===D.DELIMITER&&e.token in _)return t=e.token,T(e),Q(e,Lu(S,t)?new u(S[t]):C.includes(t)?new u(n(t,"number")):new y(t));return function(e){var t;if('"'===e.token||"'"===e.token)return t=ee(e,e.token),Q(e,new u(t));return function(e){var t,i,o,s;if("["===e.token){if(L(e),T(e),"]"!==e.token){var l=te(e);if(";"===e.token){for(o=1,i=[l];";"===e.token;)T(e),"]"!==e.token&&(i[o]=te(e),o++);if("]"!==e.token)throw re(e,"End of matrix ] expected");O(e),T(e),s=i[0].items.length;for(var c=1;c<o;c++)if(i[c].items.length!==s)throw ie(e,"Column dimensions mismatch ("+i[c].items.length+" !== "+s+")");t=new a(i)}else{if("]"!==e.token)throw re(e,"End of matrix ] expected");O(e),T(e),t=l}}else O(e),T(e),t=new a([]);return Q(e,t)}return function(e){if("{"===e.token){var t;L(e);var i={};do{if(T(e),"}"!==e.token){if('"'===e.token||"'"===e.token)t=ee(e,e.token);else{if(!(e.tokenType===D.SYMBOL||e.tokenType===D.DELIMITER&&e.token in _))throw re(e,"Symbol or string expected as object key");t=e.token,T(e)}if(":"!==e.token)throw re(e,"Colon : expected after object key");T(e),i[t]=I(e)}}while(","===e.token);if("}"!==e.token)throw re(e,"Comma , or bracket } expected after object value");O(e),T(e);var a=new h(i);return a=Q(e,a)}return function(e){var t;if(e.tokenType===D.NUMBER)return t=e.token,T(e),new u(n(t,r.number));return function(e){var t;if("("===e.token){if(L(e),T(e),t=I(e),")"!==e.token)throw re(e,"Parenthesis ) expected");return O(e),T(e),t=Q(e,t=new m(t))}return function(e){throw""===e.token?re(e,"Unexpected end of expression"):re(e,"Value expected")}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e);var s={"!":"factorial","'":"ctranspose"};for(;Lu(s,e.token);)o=s[i=e.token],T(e),t=Q(e,t=new f(i,o,[t]));return t}(e),("^"===e.token||".^"===e.token)&&(o="^"===(i=e.token)?"pow":"dotPow",B(e),s=[t,Y(e)],t=new f(i,o,s));return t}(e)}function Q(e,t,n){for(var r;("("===e.token||"["===e.token||"."===e.token)&&(!n||n.includes(e.token));)if(r=[],"("===e.token){if(!_u(t)&&!su(t))return t;if(L(e),T(e),")"!==e.token)for(r.push(I(e));","===e.token;)T(e),r.push(I(e));if(")"!==e.token)throw re(e,"Parenthesis ) expected");O(e),T(e),t=new d(t,r)}else if("["===e.token){if(L(e),T(e),"]"!==e.token)for(r.push(I(e));","===e.token;)T(e),r.push(I(e));if("]"!==e.token)throw re(e,"Parenthesis ] expected");O(e),T(e),t=new i(t,new p(r))}else{if(T(e),!(e.tokenType===D.SYMBOL||e.tokenType===D.DELIMITER&&e.token in _))throw re(e,"Property name expected after dot");r.push(new u(e.token)),T(e);t=new i(t,new p(r,!0))}return t}function ee(e,t){for(var n="";""!==A(e)&&A(e)!==t;)if("\\"===A(e)){N(e);var r=A(e),i=E[r];if(void 0!==i)n+=i,e.index+=1;else{if("u"!==r)throw re(e,"Bad escape character \\".concat(r));var a=e.expression.slice(e.index+1,e.index+5);if(!/^[0-9A-Fa-f]{4}$/.test(a))throw re(e,"Invalid unicode character \\u".concat(a));n+=String.fromCharCode(parseInt(a,16)),e.index+=5}}else n+=A(e),N(e);if(T(e),e.token!==t)throw re(e,"End of string ".concat(t," expected"));return T(e),n}function te(e){for(var t=[I(e)],n=1;","===e.token;)T(e),"]"!==e.token&&";"!==e.token&&(t[n]=I(e),n++);return new a(t)}function ne(e){return e.index-e.token.length+1}function re(e,t){var n=ne(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}function ie(e,t){var n=ne(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}return b.isAlpha=function(e,t,n){return b.isValidLatinOrGreek(e)||b.isValidMathSymbol(e,n)||b.isValidMathSymbol(t,e)},b.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)},b.isValidMathSymbol=function(e,t){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)},b.isWhitespace=function(e,t){return" "===e||"\t"===e||"\n"===e&&t>0},b.isDecimalMark=function(e,t){return"."===e&&"/"!==t&&"*"!==t&&"^"!==t},b.isDigitDot=function(e){return e>="0"&&e<="9"||"."===e},b.isDigit=function(e){return e>="0"&&e<="9"},b.isHexDigit=function(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"},t.addConversion({from:"string",to:"Node",convert:b}),b})),jw="compile",Kw=zu(jw,["typed","parse"],(e=>{var{typed:t,parse:n}=e;return t(jw,{string:function(e){return n(e).compile()},"Array | Matrix":function(e){return Fh(e,(function(e){return n(e).compile()}))}})})),Vw="evaluate",Uw=zu(Vw,["typed","parse"],(e=>{var{typed:t,parse:n}=e;return t(Vw,{string:function(e){var t=Mc();return n(e).compile().evaluate(t)},"string, Map | Object":function(e,t){return n(e).compile().evaluate(t)},"Array | Matrix":function(e){var t=Mc();return Fh(e,(function(e){return n(e).compile().evaluate(t)}))},"Array | Matrix, Map | Object":function(e,t){return Fh(e,(function(e){return n(e).compile().evaluate(t)}))}})})),$w=zu("Parser",["evaluate"],(e=>{var{evaluate:t}=e;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Mc(),writable:!1})}return n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(e){return t(e,this.scope)},n.prototype.get=function(e){if(this.scope.has(e))return this.scope.get(e)},n.prototype.getAll=function(){return function(e){if(e instanceof kc)return e.wrappedObject;var t={};for(var n of e.keys())Dc(t,n,e.get(n));return t}(this.scope)},n.prototype.getAllAsMap=function(){return this.scope},n.prototype.set=function(e,t){return this.scope.set(e,t),t},n.prototype.remove=function(e){this.scope.delete(e)},n.prototype.clear=function(){this.scope.clear()},n}),{isClass:!0}),Hw="parser",Ww=zu(Hw,["typed","Parser"],(e=>{var{typed:t,Parser:n}=e;return t(Hw,{"":function(){return new n}})})),Gw=zu("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(e=>{var{typed:t,matrix:n,abs:r,addScalar:i,divideScalar:a,multiplyScalar:o,subtractScalar:s,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:d,SparseMatrix:p,Spa:h}=e;return t("lup",{DenseMatrix:function(e){return f(e)},SparseMatrix:function(e){return m(e)},Array:function(e){var t=f(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function f(e){var t,n,c,p=e._size[0],h=e._size[1],f=Math.min(p,h),m=Eu(e._data),g=[],v=[p,f],y=[],b=[f,h],x=[];for(t=0;t<p;t++)x[t]=t;for(n=0;n<h;n++){if(n>0)for(t=0;t<p;t++){var D=Math.min(t,n),w=0;for(c=0;c<D;c++)w=i(w,o(m[t][c],m[c][n]));m[t][n]=s(m[t][n],w)}var _=n,S=0,C=0;for(t=n;t<p;t++){var E=m[t][n],k=r(E);l(k,S)&&(_=t,S=k,C=E)}if(n!==_&&(x[n]=[x[_],x[_]=x[n]][0],d._swapRows(n,_,m)),n<p)for(t=n+1;t<p;t++){var A=m[t][n];u(A,0)||(m[t][n]=a(m[t][n],C))}}for(n=0;n<h;n++)for(t=0;t<p;t++)0===n&&(t<h&&(y[t]=[]),g[t]=[]),t<n?(t<h&&(y[t][n]=m[t][n]),n<p&&(g[t][n]=0)):t!==n?(t<h&&(y[t][n]=0),n<p&&(g[t][n]=m[t][n])):(t<h&&(y[t][n]=m[t][n]),n<p&&(g[t][n]=1));var N=new d({data:g,size:v}),M=new d({data:y,size:b}),F=[];for(t=0,f=x.length;t<f;t++)F[x[t]]=t;return{L:N,U:M,p:F,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}function m(e){var t,n,i,s=e._size[0],d=e._size[1],f=Math.min(s,d),m=e._values,g=e._index,v=e._ptr,y=[],b=[],x=[],D=[s,f],w=[],_=[],S=[],C=[f,d],E=[],k=[];for(t=0;t<s;t++)E[t]=t,k[t]=t;var A=function(){var e=new h;n<s&&(x.push(y.length),y.push(1),b.push(n)),S.push(w.length);var d=v[n],f=v[n+1];for(i=d;i<f;i++)t=g[i],e.set(E[t],m[i]);n>0&&e.forEach(0,n-1,(function(t,n){p._forEachRow(t,y,b,x,(function(r,i){r>t&&e.accumulate(r,c(o(i,n)))}))}));var A=n,N=e.get(n),M=r(N);e.forEach(n+1,s-1,(function(e,t){var n=r(t);l(n,M)&&(A=e,M=n,N=t)})),n!==A&&(p._swapRows(n,A,D[1],y,b,x),p._swapRows(n,A,C[1],w,_,S),e.swap(n,A),function(e,t){var n=k[e],r=k[t];E[n]=t,E[r]=e,k[e]=r,k[t]=n}(n,A)),e.forEach(0,s-1,(function(e,t){e<=n?(w.push(t),_.push(e)):(t=a(t,N),u(t,0)||(y.push(t),b.push(e)))}))};for(n=0;n<d;n++)A();return S.push(w.length),x.push(y.length),{L:new p({values:y,index:b,ptr:x,size:D}),U:new p({values:w,index:_,ptr:S,size:C}),p:E,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}})),Zw=zu("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],(e=>{var{typed:t,matrix:n,zeros:r,identity:i,isZero:a,equal:o,sign:s,sqrt:l,conj:u,unaryMinus:c,addScalar:d,divideScalar:p,multiplyScalar:h,subtractScalar:f,complex:m}=e;return Il(t("qr",{DenseMatrix:function(e){return v(e)},SparseMatrix:function(e){return function(){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(e){var t=v(n(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}}),{_denseQRimpl:g});function g(e){var t,n,m,g=e._size[0],v=e._size[1],y=i([g],"dense"),b=y._data,x=e.clone(),D=x._data,w=r([g],"");for(m=0;m<Math.min(v,g);++m){var _=D[m][m],S=c(o(_,0)?1:s(_)),C=u(S),E=0;for(t=m;t<g;t++)E=d(E,h(D[t][m],u(D[t][m])));var k=h(S,l(E));if(!a(k)){var A=f(_,k);for(w[m]=1,t=m+1;t<g;t++)w[t]=p(D[t][m],A);var N=c(u(p(A,k))),M=void 0;for(n=m;n<v;n++){for(M=0,t=m;t<g;t++)M=d(M,h(u(w[t]),D[t][n]));for(M=h(M,N),t=m;t<g;t++)D[t][n]=h(f(D[t][n],h(w[t],M)),C)}for(t=0;t<g;t++){for(M=0,n=m;n<g;n++)M=d(M,h(b[t][n],w[n]));for(M=h(M,N),n=m;n<g;++n)b[t][n]=p(f(b[t][n],h(M,u(w[n]))),C)}}}return{Q:y,R:x,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function v(e){var t=g(e),n=t.R._data;if(e._data.length>0)for(var r="Complex"===n[0][0].type?m(0):0,i=0;i<n.length;++i)for(var a=0;a<i&&a<(n[0]||[]).length;++a)n[i][a]=r;return t}}));function Jw(e,t,n,r,i,a,o){var s=0;for(n[o]=e;s>=0;){var l=n[o+s],u=n[r+l];-1===u?(s--,a[t++]=l):(n[r+l]=n[i+u],n[o+ ++s]=u)}return t}function Xw(e){return-e-2}var Yw=zu("csAmd",["add","multiply","transpose"],(e=>{var{add:t,multiply:n,transpose:r}=e;return function(e,o){if(!o||e<=0||e>3)return null;var s=o._size,l=s[0],u=s[1],c=0,d=Math.max(16,10*Math.sqrt(u)),p=function(e,i,a,o,s){var l=r(i);if(1===e&&o===a)return t(i,l);if(2===e){for(var u=l._index,c=l._ptr,d=0,p=0;p<a;p++){var h=c[p];if(c[p]=d,!(c[p+1]-h>s))for(var f=c[p+1];h<f;h++)u[d++]=u[h]}return c[a]=d,i=r(l),n(l,i)}return n(l,i)}(e,o,l,u,d=Math.min(u-2,d));!function(e,t,n){for(var r=e._values,i=e._index,a=e._ptr,o=e._size[1],s=0,l=0;l<o;l++){var u=a[l];for(a[l]=s;u<a[l+1];u++)t(i[u],l,r?r[u]:1,n)&&(i[s]=i[u],r&&(r[s]=r[u]),s++)}a[o]=s,i.splice(s,i.length-s),r&&r.splice(s,r.length-s)}(p,a,null);for(var h,f,m,g,v,y,b,x,D,w,_,S,C,E,k,A,N=p._index,M=p._ptr,F=M[u],T=[],B=[],L=u+1,O=2*(u+1),z=3*(u+1),I=4*(u+1),P=5*(u+1),q=6*(u+1),R=7*(u+1),j=T,K=function(e,t,n,r,a,o,s,l,u,c,d,p){for(var h=0;h<e;h++)n[r+h]=t[h+1]-t[h];n[r+e]=0;for(var f=0;f<=e;f++)n[a+f]=-1,o[f]=-1,n[s+f]=-1,n[l+f]=-1,n[u+f]=1,n[c+f]=1,n[d+f]=0,n[p+f]=n[r+f];var m=i(0,0,n,c,e);return n[d+e]=-2,t[e]=-1,n[c+e]=0,m}(u,M,B,0,z,j,O,R,L,q,I,P),V=function(e,t,n,r,i,a,o,s,l,u,c){for(var d=0,p=0;p<e;p++){var h=n[r+p];if(0===h)n[i+p]=-2,d++,t[p]=-1,n[a+p]=0;else if(h>o)n[s+p]=0,n[i+p]=-1,d++,t[p]=Xw(e),n[s+e]++;else{var f=n[l+h];-1!==f&&(u[f]=p),n[c+p]=n[l+h],n[l+h]=p}}return d}(u,M,B,P,I,q,d,L,z,j,O),U=0;V<u;){for(m=-1;U<u&&-1===(m=B[z+U]);U++);-1!==B[O+m]&&(j[B[O+m]]=-1),B[z+U]=B[O+m];var $=B[I+m],H=B[L+m];V+=H;var W=0;B[L+m]=-H;var G=M[m],Z=0===$?G:F,J=Z;for(g=1;g<=$+1;g++){for(g>$?(y=m,b=G,x=B[0+m]-$):(b=M[y=N[G++]],x=B[0+y]),v=1;v<=x;v++)(D=B[L+(h=N[b++])])<=0||(W+=D,B[L+h]=-D,N[J++]=h,-1!==B[O+h]&&(j[B[O+h]]=j[h]),-1!==j[h]?B[O+j[h]]=B[O+h]:B[z+B[P+h]]=B[O+h]);y!==m&&(M[y]=Xw(m),B[q+y]=0)}for(0!==$&&(F=J),B[P+m]=W,M[m]=Z,B[0+m]=J-Z,B[I+m]=-2,K=i(K,c,B,q,u),w=Z;w<J;w++)if(!((_=B[I+(h=N[w])])<=0)){var X=K-(D=-B[L+h]);for(G=M[h],S=M[h]+_-1;G<=S;G++)B[q+(y=N[G])]>=K?B[q+y]-=D:0!==B[q+y]&&(B[q+y]=B[P+y]+X)}for(w=Z;w<J;w++){for(C=(S=M[h=N[w]])+B[I+h]-1,E=S,k=0,A=0,G=S;G<=C;G++)if(0!==B[q+(y=N[G])]){var Y=B[q+y]-K;Y>0?(A+=Y,N[E++]=y,k+=y):(M[y]=Xw(m),B[q+y]=0)}B[I+h]=E-S+1;var Q=E,ee=S+B[0+h];for(G=C+1;G<ee;G++){var te=B[L+(f=N[G])];te<=0||(A+=te,N[E++]=f,k+=f)}0===A?(M[h]=Xw(m),W-=D=-B[L+h],H+=D,V+=D,B[L+h]=0,B[I+h]=-1):(B[P+h]=Math.min(B[P+h],A),N[E]=N[Q],N[Q]=N[S],N[S]=m,B[0+h]=E-S+1,k=(k<0?-k:k)%u,B[O+h]=B[R+k],B[R+k]=h,j[h]=k)}for(B[P+m]=W,K=i(K+(c=Math.max(c,W)),c,B,q,u),w=Z;w<J;w++)if(!(B[L+(h=N[w])]>=0))for(h=B[R+(k=j[h])],B[R+k]=-1;-1!==h&&-1!==B[O+h];h=B[O+h],K++){for(x=B[0+h],_=B[I+h],G=M[h]+1;G<=M[h]+x-1;G++)B[q+N[G]]=K;var ne=h;for(f=B[O+h];-1!==f;){var re=B[0+f]===x&&B[I+f]===_;for(G=M[f]+1;re&&G<=M[f]+x-1;G++)B[q+N[G]]!==K&&(re=0);re?(M[f]=Xw(h),B[L+h]+=B[L+f],B[L+f]=0,B[I+f]=-1,f=B[O+f],B[O+ne]=f):(ne=f,f=B[O+f])}}for(G=Z,w=Z;w<J;w++)(D=-B[L+(h=N[w])])<=0||(B[L+h]=D,A=B[P+h]+W-D,-1!==B[z+(A=Math.min(A,u-V-D))]&&(j[B[z+A]]=h),B[O+h]=B[z+A],j[h]=-1,B[z+A]=h,U=Math.min(U,A),B[P+h]=A,N[G++]=h);B[L+m]=H,0===(B[0+m]=G-Z)&&(M[m]=-1,B[q+m]=0),0!==$&&(F=G)}for(h=0;h<u;h++)M[h]=Xw(M[h]);for(f=0;f<=u;f++)B[z+f]=-1;for(f=u;f>=0;f--)B[L+f]>0||(B[O+f]=B[z+M[f]],B[z+M[f]]=f);for(y=u;y>=0;y--)B[L+y]<=0||-1!==M[y]&&(B[O+y]=B[z+M[y]],B[z+M[y]]=y);for(m=0,h=0;h<=u;h++)-1===M[h]&&(m=Jw(h,m,B,z,O,T,q));return T.splice(T.length-1,1),T};function i(e,t,n,r,i){if(e<2||e+t<0){for(var a=0;a<i;a++)0!==n[r+a]&&(n[r+a]=1);e=2}return e}function a(e,t){return e!==t}}));function Qw(e,t,n,r,i,a,o){var s,l,u,c=0;if(e<=t||n[r+t]<=n[i+e])return-1;n[i+e]=n[r+t];var d=n[a+e];if(n[a+e]=t,-1===d)c=1,u=e;else{for(c=2,u=d;u!==n[o+u];u=n[o+u]);for(s=d;s!==u;s=l)l=n[o+s],n[o+s]=u}return{jleaf:c,q:u}}var e_=zu("csCounts",["transpose"],(e=>{var{transpose:t}=e;return function(e,n,r,i){if(!e||!n||!r)return null;var a,o,s,l,u,c,d,p=e._size,h=p[0],f=p[1],m=4*f+(i?f+h+1:0),g=[],v=f,y=2*f,b=3*f,x=4*f,D=5*f+1;for(s=0;s<m;s++)g[s]=-1;var w=[],_=t(e),S=_._index,C=_._ptr;for(s=0;s<f;s++)for(w[o=r[s]]=-1===g[b+o]?1:0;-1!==o&&-1===g[b+o];o=n[o])g[b+o]=s;if(i){for(s=0;s<f;s++)g[r[s]]=s;for(a=0;a<h;a++){for(s=f,c=C[a],d=C[a+1],u=c;u<d;u++)s=Math.min(s,g[S[u]]);g[D+a]=g[x+s],g[x+s]=a}}for(a=0;a<f;a++)g[0+a]=a;for(s=0;s<f;s++){for(-1!==n[o=r[s]]&&w[n[o]]--,l=i?g[x+s]:o;-1!==l;l=i?g[D+l]:-1)for(u=C[l];u<C[l+1];u++){var E=Qw(a=S[u],o,g,b,v,y,0);E.jleaf>=1&&w[o]++,2===E.jleaf&&w[E.q]--}-1!==n[o]&&(g[0+o]=n[o])}for(o=0;o<f;o++)-1!==n[o]&&(w[n[o]]+=w[o]);return w}})),t_=zu("csSqr",["add","multiply","transpose"],(e=>{var{add:t,multiply:n,transpose:r}=e,i=Yw({add:t,multiply:n,transpose:r}),a=e_({transpose:r});return function(e,t,n){var r,o=t._ptr,s=t._size[1],l={};if(l.q=i(e,t),e&&!l.q)return null;if(n){var u=e?function(e,t,n,r){for(var i=e._values,a=e._index,o=e._ptr,s=e._size,l=e._datatype,u=s[0],c=s[1],d=r&&e._values?[]:null,p=[],h=[],f=0,m=0;m<c;m++){h[m]=f;for(var g=n?n[m]:m,v=o[g],y=o[g+1],b=v;b<y;b++){var x=t?t[a[b]]:a[b];p[f]=x,d&&(d[f]=i[b]),f++}}return h[c]=f,e.createSparseMatrix({values:d,index:p,ptr:h,size:[u,c],datatype:l})}(t,null,l.q,0):t;l.parent=function(e,t){if(!e)return null;var n,r,i=e._index,a=e._ptr,o=e._size,s=o[0],l=o[1],u=[],c=[],d=l;if(t)for(n=0;n<s;n++)c[d+n]=-1;for(var p=0;p<l;p++){u[p]=-1,c[0+p]=-1;for(var h=a[p],f=a[p+1],m=h;m<f;m++){var g=i[m];for(n=t?c[d+g]:g;-1!==n&&n<p;n=r)r=c[0+n],c[0+n]=p,-1===r&&(u[n]=p);t&&(c[d+g]=p)}}return u}(u,1);var c=function(e,t){if(!e)return null;var n,r=0,i=[],a=[],o=t,s=2*t;for(n=0;n<t;n++)a[0+n]=-1;for(n=t-1;n>=0;n--)-1!==e[n]&&(a[o+n]=a[0+e[n]],a[0+e[n]]=n);for(n=0;n<t;n++)-1===e[n]&&(r=Jw(n,r,a,0,o,i,s));return i}(l.parent,s);if(l.cp=a(u,l.parent,c,1),u&&l.parent&&l.cp&&function(e,t){var n=e._ptr,r=e._index,i=e._size,a=i[0],o=i[1];t.pinv=[],t.leftmost=[];var s,l,u,c,d,p=t.parent,h=t.pinv,f=t.leftmost,m=[],g=0,v=a,y=a+o,b=a+2*o;for(l=0;l<o;l++)m[v+l]=-1,m[y+l]=-1,m[b+l]=0;for(s=0;s<a;s++)f[s]=-1;for(l=o-1;l>=0;l--)for(c=n[l],d=n[l+1],u=c;u<d;u++)f[r[u]]=l;for(s=a-1;s>=0;s--)h[s]=-1,-1!==(l=f[s])&&(0===m[b+l]++&&(m[y+l]=s),m[g+s]=m[v+l],m[v+l]=s);for(t.lnz=0,t.m2=a,l=0;l<o;l++)if(s=m[v+l],t.lnz++,s<0&&(s=t.m2++),h[s]=l,!(--b[l]<=0)){t.lnz+=m[b+l];var x=p[l];-1!==x&&(0===m[b+x]&&(m[y+x]=m[y+l]),m[g+m[y+l]]=m[v+x],m[v+x]=m[g+s],m[b+x]+=m[b+l])}for(s=0;s<a;s++)h[s]<0&&(h[s]=l++);return!0}(u,l))for(l.unz=0,r=0;r<s;r++)l.unz+=l.cp[r]}else l.unz=4*o[s]+s,l.lnz=l.unz;return l}}));function n_(e,t){return e[t]<0}function r_(e,t){e[t]=Xw(e[t])}function i_(e){return e<0?Xw(e):e}function a_(e,t,n,r,i){var a,o,s,l=t._index,u=t._ptr,c=t._size[1],d=0;for(r[0]=e;d>=0;){e=r[d];var p=i?i[e]:e;n_(u,e)||(r_(u,e),r[c+d]=p<0?0:i_(u[p]));var h=1;for(o=r[c+d],s=p<0?0:i_(u[p+1]);o<s;o++)if(!n_(u,a=l[o])){r[c+d]=o,r[++d]=a,h=0;break}h&&(d--,r[--n]=e)}return n}var o_=zu("csSpsolve",["divideScalar","multiply","subtract"],(e=>{var{divideScalar:t,multiply:n,subtract:r}=e;return function(e,i,a,o,s,l,u){var c,d,p,h,f=e._values,m=e._index,g=e._ptr,v=e._size[1],y=i._values,b=i._index,x=i._ptr,D=function(e,t,n,r,i){var a,o,s,l=e._ptr,u=e._size,c=t._index,d=t._ptr,p=u[1],h=p;for(o=d[n],s=d[n+1],a=o;a<s;a++){var f=c[a];n_(l,f)||(h=a_(f,e,h,r,i))}for(a=h;a<p;a++)r_(l,r[a]);return h}(e,i,a,o,l);for(c=D;c<v;c++)s[o[c]]=0;for(d=x[a],p=x[a+1],c=d;c<p;c++)s[b[c]]=y[c];for(var w=D;w<v;w++){var _=o[w],S=l?l[_]:_;if(!(S<0))for(d=g[S],p=g[S+1],s[_]=t(s[_],f[u?d:p-1]),c=u?d+1:d,h=u?p:p-1;c<h;c++){var C=m[c];s[C]=r(s[C],n(f[c],s[_]))}}return D}})),s_=zu("csLu",["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],(e=>{var{abs:t,divideScalar:n,multiply:r,subtract:i,larger:a,largerEq:o,SparseMatrix:s}=e,l=o_({divideScalar:n,multiply:r,subtract:i});return function(e,i,u){if(!e)return null;var c,d=e._size[1],p=100,h=100;i&&(c=i.q,p=i.lnz||p,h=i.unz||h);var f,m,g=[],v=[],y=[],b=new s({values:g,index:v,ptr:y,size:[d,d]}),x=[],D=[],w=[],_=new s({values:x,index:D,ptr:w,size:[d,d]}),S=[],C=[],E=[];for(f=0;f<d;f++)C[f]=0,S[f]=-1,y[f+1]=0;p=0,h=0;for(var k=0;k<d;k++){y[k]=p,w[k]=h;var A=c?c[k]:k,N=l(b,e,A,E,C,S,1),M=-1,F=-1;for(m=N;m<d;m++)if(S[f=E[m]]<0){var T=t(C[f]);a(T,F)&&(F=T,M=f)}else D[h]=S[f],x[h++]=C[f];if(-1===M||F<=0)return null;S[A]<0&&o(t(C[A]),r(F,u))&&(M=A);var B=C[M];for(D[h]=k,x[h++]=B,S[M]=k,v[p]=M,g[p++]=1,m=N;m<d;m++)S[f=E[m]]<0&&(v[p]=f,g[p++]=n(C[f],B)),C[f]=0}for(y[d]=p,w[d]=h,m=0;m<p;m++)v[m]=S[v[m]];return g.splice(p,g.length-p),v.splice(p,v.length-p),x.splice(h,x.length-h),D.splice(h,D.length-h),{L:b,U:_,pinv:S}}})),l_=zu("slu",["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],(e=>{var{typed:t,abs:n,add:r,multiply:i,transpose:a,divideScalar:o,subtract:s,larger:l,largerEq:u,SparseMatrix:c}=e,d=t_({add:r,multiply:i,transpose:a}),p=s_({abs:n,divideScalar:o,multiply:i,subtract:s,larger:l,largerEq:u,SparseMatrix:c});return t("slu",{"SparseMatrix, number, number":function(e,t,n){if(!Zu(t)||t<0||t>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(n<0||n>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var r=d(t,e,!1),i=p(e,r,n);return{L:i.L,U:i.U,p:i.pinv,q:r.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})}));function u_(e,t){var n,r=t.length,i=[];if(e)for(n=0;n<r;n++)i[e[n]]=t[n];else for(n=0;n<r;n++)i[n]=t[n];return i}var c_="lusolve",d_=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],p_=zu(c_,d_,(e=>{var{typed:t,matrix:n,lup:r,slu:i,usolve:a,lsolve:o,DenseMatrix:s}=e,l=Wy({DenseMatrix:s});return t(c_,{"Array, Array | Matrix":function(e,t){e=n(e);var i=r(e);return c(i.L,i.U,i.p,null,t).valueOf()},"DenseMatrix, Array | Matrix":function(e,t){var n=r(e);return c(n.L,n.U,n.p,null,t)},"SparseMatrix, Array | Matrix":function(e,t){var n=r(e);return c(n.L,n.U,n.p,null,t)},"SparseMatrix, Array | Matrix, number, number":function(e,t,n,r){var a=i(e,n,r);return c(a.L,a.U,a.p,a.q,t)},"Object, Array | Matrix":function(e,t){return c(e.L,e.U,e.p,e.q,t)}});function u(e){if(Hl(e))return e;if($l(e))return n(e);throw new TypeError("Invalid Matrix LU decomposition")}function c(e,t,n,r,i){e=u(e),t=u(t),n&&((i=l(e,i,!0))._data=u_(n,i._data));var s=o(e,i),c=a(t,s);return r&&(c._data=u_(r,c._data)),c}})),h_="polynomialRoot",f_=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],m_=zu(h_,f_,(e=>{var{typed:t,isZero:n,equalScalar:r,add:i,subtract:a,multiply:o,divide:s,sqrt:l,unaryMinus:u,cbrt:c,typeOf:d,im:p,re:h}=e;return t(h_,{"number|Complex, ...number|Complex":(e,t)=>{for(var f=[e,...t];f.length>0&&n(f[f.length-1]);)f.pop();if(f.length<2)throw new RangeError("Polynomial [".concat(e,", ").concat(t,"] must have a non-zero non-constant coefficient"));switch(f.length){case 2:return[u(s(f[0],f[1]))];case 3:var[m,g,v]=f,y=o(2,v),b=o(g,g),x=o(4,v,m);if(r(b,x))return[s(u(g),y)];var D=l(a(b,x));return[s(a(D,g),y),s(a(u(D),g),y)];case 4:var[w,_,S,C]=f,E=u(o(3,C)),k=o(S,S),A=o(3,C,_),N=i(o(2,S,S,S),o(27,C,C,w)),M=o(9,C,S,_);if(r(k,A)&&r(N,M))return[s(S,E)];var F,T=a(k,A),B=a(N,M),L=i(o(18,C,S,_,w),o(S,S,_,_)),O=i(o(4,S,S,S,w),o(4,C,_,_,_),o(27,C,C,w,w));if(r(L,O))return[s(a(o(4,C,S,_),i(o(9,C,C,w),o(S,S,S))),o(C,T)),s(a(o(9,C,w),o(S,_)),o(2,T))];F=r(k,A)?B:s(i(B,l(a(o(B,B),o(4,T,T,T)))),2);var z=c(F,!0).toArray().map((e=>s(i(S,e,s(T,e)),E)));return z.map((e=>"Complex"===d(e)&&r(h(e),h(e)+p(e))?h(e):e));default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(f))}}})})),g_=["evaluate"],v_=zu("Help",g_,(e=>{var{evaluate:t}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!e)throw new Error('Argument "doc" missing');this.doc=e}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var e=this.doc||{},n="\n";if(e.name&&(n+="Name: "+e.name+"\n\n"),e.category&&(n+="Category: "+e.category+"\n\n"),e.description&&(n+="Description:\n    "+e.description+"\n\n"),e.syntax&&(n+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){n+="Examples:\n";for(var r=!1,i=t("config()"),a={config:e=>(r=!0,t("config(newConfig)",{newConfig:e}))},o=0;o<e.examples.length;o++){var s=e.examples[o];n+="    "+s+"\n";var l=void 0;try{l=t(s,a)}catch(kC){l=kC}void 0===l||eu(l)||(n+="        "+jp(l,{precision:14})+"\n")}n+="\n",r&&t("config(originalConfig)",{originalConfig:i})}return e.mayThrow&&e.mayThrow.length&&(n+="Throws: "+e.mayThrow.join(", ")+"\n\n"),e.seealso&&e.seealso.length&&(n+="See also: "+e.seealso.join(", ")+"\n"),n},n.prototype.toJSON=function(){var e=Eu(this.doc);return e.mathjs="Help",e},n.fromJSON=function(e){var t={};return Object.keys(e).filter((e=>"mathjs"!==e)).forEach((n=>{t[n]=e[n]})),new n(t)},n.prototype.valueOf=n.prototype.toString,n}),{isClass:!0}),y_=["?on","math","typed"],b_=zu("Chain",y_,(e=>{var{on:t,math:n,typed:r}=e;function i(e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");Su(e)?this.value=e.value:this.value=e}function a(e,t){Bu(i.prototype,e,(function(){var e=t();if("function"===typeof e)return o(e)}))}function o(e){return function(){if(0===arguments.length)return new i(e(this.value));for(var t=[this.value],n=0;n<arguments.length;n++)t[n+1]=arguments[n];if(r.isTypedFunction(e)){var a=r.resolve(e,t);if(1===a.params.length)throw new Error("chain function "+e.name+" cannot match rest parameter between chain value and additional arguments.");return new i(a.implementation.apply(e,t))}return new i(e.apply(e,t))}}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return jp(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(e){return new i(e.value)},i.createProxy=function(e,t){if("string"===typeof e)!function(e,t){"function"===typeof t&&(i.prototype[e]=o(t))}(e,t);else{var n=function(t){Lu(e,t)&&void 0===s[t]&&a(t,(()=>e[t]))};for(var r in e)n(r)}};var s={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(n),t&&t("import",(function(e,t,n){n||a(e,t)})),i}),{isClass:!0}),x_={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},D_={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},w_={bignumber:{name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},boolean:{name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complex:{name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnit:{name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fraction:{name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},index:{name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},matrix:{name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},number:{name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},sparse:{name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnit:{name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},string:{name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unit:{name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},e:x_,E:x_,false:{name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},i:{name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Infinity:{name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN2:{name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LN10:{name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LOG2E:{name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},LOG10E:{name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},NaN:{name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},null:{name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},pi:D_,PI:D_,phi:{name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},SQRT1_2:{name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2:{name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tau:{name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},true:{name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},version:{name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:{name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},lsolve:{name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},lsolveAll:{name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},lup:{name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolve:{name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},leafCount:{name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},polynomialRoot:{name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},resolve:{name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},simplify:{name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},simplifyConstant:{name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},simplifyCore:{name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},symbolicEqual:{name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},rationalize:{name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},slu:{name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},usolve:{name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},usolveAll:{name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},qr:{name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},abs:{name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},add:{name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrt:{name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceil:{name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},cube:{name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divide:{name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivide:{name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiply:{name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPow:{name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},exp:{name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expm:{name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1:{name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fix:{name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},floor:{name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},gcd:{name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypot:{name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lcm:{name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},log:{name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log2:{name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},log1p:{name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log10:{name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},mod:{name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiply:{name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},norm:{name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRoot:{name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRoots:{name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pow:{name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},round:{name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},sign:{name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrt:{name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtm:{name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},square:{name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtract:{name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinus:{name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlus:{name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcd:{name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},invmod:{name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax \u2263 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},bitAnd:{name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNot:{name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOr:{name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXor:{name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShift:{name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShift:{name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShift:{name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbers:{name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalan:{name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},composition:{name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2:{name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},config:{name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},import:{name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typed:{name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},arg:{name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conj:{name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},re:{name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},im:{name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},evaluate:{name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},help:{name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distance:{name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersect:{name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},and:{name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},not:{name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},or:{name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xor:{name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},concat:{name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},count:{name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},cross:{name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},column:{name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},ctranspose:{name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},det:{name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diag:{name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diff:{name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},dot:{name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},getMatrixDataType:{name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identity:{name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},filter:{name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flatten:{name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEach:{name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},inv:{name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},pinv:{name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore\u2013Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},eigs:{name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},kron:{name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},matrixFromFunction:{name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},matrixFromRows:{name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},matrixFromColumns:{name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},map:{name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},ones:{name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelect:{name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},range:{name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},resize:{name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},reshape:{name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},rotate:{name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},rotationMatrix:{name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},row:{name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},size:{name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sort:{name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeeze:{name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subset:{name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},trace:{name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transpose:{name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zeros:{name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},fft:{name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},ifft:{name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},sylvester:{name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},schur:{name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},lyap:{name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},solveODE:{name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},combinations:{name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRep:{name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorial:{name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gamma:{name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},kldivergence:{name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},lgamma:{name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},multinomial:{name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutations:{name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandom:{name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},random:{name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomInt:{name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compare:{name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNatural:{name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareText:{name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqual:{name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equal:{name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalText:{name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},larger:{name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEq:{name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smaller:{name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEq:{name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequal:{name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesian:{name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifference:{name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinct:{name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersect:{name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubset:{name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicity:{name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowerset:{name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSize:{name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifference:{name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnion:{name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},zpk2tf:{name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},freqz:{name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},erf:{name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},zeta:{name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},cumsum:{name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},mad:{name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},max:{name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mean:{name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},median:{name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},min:{name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},mode:{name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prod:{name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeq:{name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},std:{name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},sum:{name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},variance:{name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},corr:{name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},acos:{name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acosh:{name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acot:{name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acoth:{name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acsc:{name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acsch:{name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asec:{name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asech:{name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asin:{name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinh:{name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atan:{name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atanh:{name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},atan2:{name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},cos:{name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},cosh:{name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cot:{name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},coth:{name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},csc:{name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},csch:{name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},sec:{name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sech:{name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sin:{name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinh:{name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tan:{name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanh:{name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},to:{name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},clone:{name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},format:{name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},bin:{name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},oct:{name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},hex:{name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},isNaN:{name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isInteger:{name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNegative:{name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumeric:{name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},hasNumericValue:{name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},isPositive:{name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrime:{name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZero:{name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},print:{name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},typeOf:{name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},numeric:{name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]}},__="help",S_=zu(__,["typed","mathWithTransform","Help"],(e=>{var{typed:t,mathWithTransform:n,Help:r}=e;return t(__,{any:function(e){var t,i=e;if("string"!==typeof e)for(t in n)if(Lu(n,t)&&e===n[t]){i=t;break}var a=xc(w_,i);if(!a){var o="function"===typeof i?i.name:i;throw new Error('No documentation found on "'+o+'"')}return new r(a)}})})),C_="chain",E_=zu(C_,["typed","Chain"],(e=>{var{typed:t,Chain:n}=e;return t(C_,{"":function(){return new n},any:function(e){return new n(e)}})})),k_=zu("det",["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],(e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:a,isZero:o,unaryMinus:s}=e;return t("det",{any:function(e){return Eu(e)},"Array | Matrix":function(e){var t;switch((t=Hl(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return Eu(e);case 1:if(1===t[0])return Eu(e.valueOf()[0]);if(0===t[0])return 1;throw new RangeError("Matrix must be square (size: "+jp(t)+")");case 2:var l=t[0],u=t[1];if(l===u)return function(e,t){if(1===t)return Eu(e[0][0]);if(2===t)return r(i(e[0][0],e[1][1]),i(e[1][0],e[0][1]));for(var n=!1,l=new Array(t).fill(0).map(((e,t)=>t)),u=0;u<t;u++){var c=l[u];if(o(e[c][u])){var d=void 0;for(d=u+1;d<t;d++)if(!o(e[l[d]][u])){c=l[d],l[d]=l[u],l[u]=c,n=!n;break}if(d===t)return e[c][u]}for(var p=e[c][u],h=0===u?1:e[l[u-1]][u-1],f=u+1;f<t;f++)for(var m=l[f],g=u+1;g<t;g++)e[m][g]=a(r(i(e[m][g],p),i(e[m][u],e[c][g])),h)}var v=e[l[t-1]][t-1];return n?s(v):v}(e.clone().valueOf(),l);if(0===u)return 1;throw new RangeError("Matrix must be square (size: "+jp(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+jp(t)+")")}}})})),A_=zu("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:a,unaryMinus:o,det:s,identity:l,abs:u}=e;return t("inv",{"Array | Matrix":function(e){var t=Hl(e)?e.size():Wp(e);switch(t.length){case 1:if(1===t[0])return Hl(e)?n([r(1,e.valueOf()[0])]):[r(1,e[0])];throw new RangeError("Matrix must be square (size: "+jp(t)+")");case 2:var i=t[0],a=t[1];if(i===a)return Hl(e)?n(c(e.valueOf(),i,a),e.storage()):c(e,i,a);throw new RangeError("Matrix must be square (size: "+jp(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+jp(t)+")")}},any:function(e){return r(1,e)}});function c(e,t,n){var c,d,p,h,f;if(1===t){if(0===(h=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,h)]]}if(2===t){var m=s(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[r(e[1][1],m),r(o(e[0][1]),m)],[r(o(e[1][0]),m),r(e[0][0],m)]]}var g=e.concat();for(c=0;c<t;c++)g[c]=g[c].concat();for(var v=l(t).valueOf(),y=0;y<n;y++){var b=u(g[y][y]),x=y;for(c=y+1;c<t;)u(g[c][y])>b&&(b=u(g[c][y]),x=c),c++;if(0===b)throw Error("Cannot calculate inverse, determinant is zero");(c=x)!==y&&(f=g[y],g[y]=g[c],g[c]=f,f=v[y],v[y]=v[c],v[c]=f);var D=g[y],w=v[y];for(c=0;c<t;c++){var _=g[c],S=v[c];if(c!==y){if(0!==_[y]){for(p=r(o(_[y]),D[y]),d=y;d<n;d++)_[d]=i(_[d],a(p,D[d]));for(d=0;d<n;d++)S[d]=i(S[d],a(p,w[d]))}}else{for(p=D[y],d=y;d<n;d++)_[d]=r(_[d],p);for(d=0;d<n;d++)S[d]=r(S[d],p)}}}return v}})),N_="pinv",M_=zu(N_,["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],(e=>{var{typed:t,matrix:n,inv:r,deepEqual:i,equal:a,dotDivide:o,dot:s,ctranspose:l,divideScalar:u,multiply:c,add:d,Complex:p}=e;return t(N_,{"Array | Matrix":function(e){var t=Hl(e)?e.size():Wp(e);switch(t.length){case 1:return m(e)?l(e):1===t[0]?r(e):o(l(e),s(e,e));case 2:if(m(e))return l(e);var i=t[0],a=t[1];if(i===a)try{return r(e)}catch(u){if(!(u instanceof Error&&u.message.match(/Cannot calculate inverse, determinant is zero/)))throw u}return Hl(e)?n(h(e.valueOf(),i,a),e.storage()):h(e,i,a);default:throw new RangeError("Matrix must be two dimensional (size: "+jp(t)+")")}},any:function(e){return a(e,0)?Eu(e):u(1,e)}});function h(e,t,n){var{C:i,F:a}=function(e,t,n){var r=function(e,t,n){for(var r=Eu(e),i=0,a=0;a<t;a++){if(n<=i)return r;for(var s=a;f(r[s][i]);)if(t===++s&&(s=a,n===++i))return r;[r[s],r[a]]=[r[a],r[s]];for(var l=r[a][i],u=0;u<n;u++)r[a][u]=o(r[a][u],l);for(var p=0;p<t;p++)if(p!==a){l=r[p][i];for(var h=0;h<n;h++)r[p][h]=d(r[p][h],c(-1,c(l,r[a][h])))}i++}return r}(e,t,n),i=e.map(((e,n)=>e.filter(((e,n)=>n<t&&!f(s(r[n],r[n])))))),a=r.filter(((e,t)=>!f(s(r[t],r[t]))));return{C:i,F:a}}(e,t,n),u=c(r(c(l(i),i)),l(i)),p=c(l(a),r(c(a,l(a))));return c(p,u)}function f(e){return a(d(e,p(1,1)),d(0,p(1,1)))}function m(e){return i(d(e,p(1,1)),d(c(e,0),p(1,1)))}}));function F_(e){var{addScalar:t,subtract:n,flatten:r,multiply:i,multiplyScalar:a,divideScalar:o,sqrt:s,abs:l,bignumber:u,diag:c,size:d,reshape:p,inv:h,qr:f,usolve:m,usolveAll:g,equal:v,complex:y,larger:b,smaller:x,matrixFromColumns:D,dot:w}=e;function _(e,r,i,o){var l=t(e,o),u=n(a(e,o),a(r,i)),c=a(l,.5),d=a(s(n(a(l,l),a(4,u))),.5);return[t(c,d),n(c,d)]}function S(e,t,r,i,a,o,s,c){var d="BigNumber"===c,p="Complex"===c,h=d?u(0):p?y(0):0,f=d?u(1):p?y(1):1;if(x(l(r),s))return[[f,h],[h,f]];if(b(l(n(a,o)),s))return[[n(a,i),n(o,i)],[r,r]];var m=n(e,a),g=n(i,a);return x(l(t),s)&&x(l(g),s)?[[m,f],[r,h]]:[[t,h],[g,f]]}function C(e,t){for(var n=0;n<e.length;n++)e[n].push(...Array(t-e[n].length).fill(0));for(var r=e.length;r<t;r++)e.push(Array(t).fill(0)),e[r][r]=1;return e}function E(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return r;return-1}function k(e,t,n,r,i){for(var a,o="BigNumber"===i?u(1e3):1e3,s=0;s<5;++s){a=A(t,n,i);try{a=m(e,a)}catch(c){continue}if(b(M(a),o))break}if(s>=5)return null;for(s=0;;){var l=m(e,a);if(x(M(N(a,[l])),r))break;if(++s>=10)return null;a=F(l)}return a}function A(e,t,n){var r="BigNumber"===n,i="Complex"===n,a=Array(e).fill(0).map((e=>2*Math.random()-1));return r&&(a=a.map((e=>u(e)))),i&&(a=a.map((e=>y(e)))),F(a=N(a,t),n)}function N(e,t){var r=d(e);for(var a of t)a=p(a,r),e=n(e,i(o(w(a,e),w(a,a)),a));return e}function M(e){return l(s(w(e,e)))}function F(e,t){var n="Complex"===t,r="BigNumber"===t?u(1):n?y(1):1;return i(o(r,M(e)),e)}return function(e,s,d,p){var m=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],D=function(e,n,r,i,s){var d,p="BigNumber"===i,h="Complex"===i,f=p?u(0):0,m=p?u(1):h?y(1):1,g=p?u(1):1,D=p?u(10):2,w=a(D,D);s&&(d=Array(n).fill(m));var _=!1;for(;!_;){_=!0;for(var S=0;S<n;S++){for(var C=f,E=f,k=0;k<n;k++)S!==k&&(C=t(C,l(e[k][S])),E=t(E,l(e[S][k])));if(!v(C,0)&&!v(E,0)){for(var A=g,N=C,M=o(E,D),F=a(E,D);x(N,M);)N=a(N,w),A=a(A,D);for(;b(N,F);)N=o(N,w),A=o(A,D);if(x(o(t(N,E),A),a(t(C,E),.95))){_=!1;for(var T=o(1,A),B=0;B<n;B++)S!==B&&(e[S][B]=a(e[S][B],T),e[B][S]=a(e[B][S],A));s&&(d[S]=a(d[S],T))}}}}return s?c(d):null}(e,s,0,p,m);!function(e,r,i,s,c,d){var p="BigNumber"===s,h="Complex"===s,f=p?u(0):h?y(0):0;p&&(i=u(i));for(var m=0;m<r-2;m++){for(var g=0,v=f,b=m+1;b<r;b++){var D=e[b][m];x(l(v),l(D))&&(v=D,g=b)}if(!x(l(v),i)){if(g!==m+1){var w=e[g];e[g]=e[m+1],e[m+1]=w;for(var _=0;_<r;_++){var S=e[_][g];e[_][g]=e[_][m+1],e[_][m+1]=S}if(c){var C=d[g];d[g]=d[m+1],d[m+1]=C}}for(var E=m+2;E<r;E++){var k=o(e[E][m],v);if(0!==k){for(var A=0;A<r;A++)e[E][A]=n(e[E][A],a(k,e[m+1][A]));for(var N=0;N<r;N++)e[N][m+1]=t(e[N][m+1],a(k,e[N][E]));if(c)for(var M=0;M<r;M++)d[E][M]=n(d[E][M],a(k,d[m+1][M]))}}}}}(e,s,d,p,m,D);var{values:w,C:A}=function(e,r,a,o,s){var d="BigNumber"===o,p="Complex"===o,h=d?u(1):p?y(1):1;d&&(a=u(a));var m=Eu(e),g=[],v=r,b=[],D=s?c(Array(r).fill(h)):void 0,w=s?c(Array(v).fill(h)):void 0,E=0;for(;E<=100;){E+=1;for(var k=m[v-1][v-1],A=0;A<v;A++)m[A][A]=n(m[A][A],k);var{Q:N,R:M}=f(m);m=i(M,N);for(var F=0;F<v;F++)m[F][F]=t(m[F][F],k);if(s&&(w=i(w,N)),1===v||x(l(m[v-1][v-2]),a)){E=0,g.push(m[v-1][v-1]),s&&(b.unshift([[1]]),C(w,r),D=i(D,w),v>1&&(w=c(Array(v-1).fill(h)))),v-=1,m.pop();for(var T=0;T<v;T++)m[T].pop()}else if(2===v||x(l(m[v-2][v-3]),a)){E=0;var B=_(m[v-2][v-2],m[v-2][v-1],m[v-1][v-2],m[v-1][v-1]);g.push(...B),s&&(b.unshift(S(m[v-2][v-2],m[v-2][v-1],m[v-1][v-2],m[v-1][v-1],B[0],B[1],a,o)),C(w,r),D=i(D,w),v>2&&(w=c(Array(v-2).fill(h)))),v-=2,m.pop(),m.pop();for(var L=0;L<v;L++)m[L].pop(),m[L].pop()}if(0===v)break}if(g.sort(((e,t)=>+n(l(e),l(t)))),E>100){var O=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+g.join(", "));throw O.values=g,O.vectors=[],O}var z=s?i(D,function(e,t){for(var n=[],r=0;r<t;r++)n[r]=Array(t).fill(0);var i=0;for(var a of e){for(var o=a.length,s=0;s<o;s++)for(var l=0;l<o;l++)n[i+s][i+l]=a[s][l];i+=o}return n}(b,r)):void 0;return{values:g,C:z}}(e,s,d,p,m);if(m){var N=function(e,t,a,o,s,l,d){var p=h(a),f=i(p,e,a),m="BigNumber"===d,b="Complex"===d,x=m?u(0):b?y(0):0,D=m?u(1):b?y(1):1,w=[],_=[];for(var S of s){var C=E(w,S,v);-1===C?(w.push(S),_.push(1)):_[C]+=1}for(var A=[],N=w.length,M=Array(t).fill(x),F=c(Array(t).fill(D)),T=function(){var e=w[B],s=n(f,i(e,F)),u=g(s,M);for(u.shift();u.length<_[B];){var c=k(s,t,u,l,d);if(null===c)break;u.push(c)}var p=i(h(o),a);u=u.map((e=>i(p,e))),A.push(...u.map((t=>({value:e,vector:r(t)}))))},B=0;B<N;B++)T();return A}(e,s,A,D,w,d,p);return{values:w,eigenvectors:N}}return{values:w}}}function T_(e){var{config:t,addScalar:n,subtract:r,abs:i,atan:a,cos:o,sin:s,multiplyScalar:l,inv:u,bignumber:c,multiply:d,add:p}=e;function h(e,n,r){var i=n-e;return Math.abs(i)<=t.epsilon?Math.PI/4:.5*Math.atan(2*r/(n-e))}function f(e,n,o){var s=r(n,e);return i(s)<=t.epsilon?c(-1).acos().div(4):l(.5,a(d(2,o,u(s))))}function m(e,t,n,r){for(var i=e.length,a=Math.cos(t),o=Math.sin(t),s=Array(i).fill(0),l=Array(i).fill(0),u=0;u<i;u++)s[u]=a*e[u][n]-o*e[u][r],l[u]=o*e[u][n]+a*e[u][r];for(var c=0;c<i;c++)e[c][n]=s[c],e[c][r]=l[c];return e}function g(e,t,i,a){for(var u=e.length,d=o(t),p=s(t),h=Array(u).fill(c(0)),f=Array(u).fill(c(0)),m=0;m<u;m++)h[m]=r(l(d,e[m][i]),l(p,e[m][a])),f[m]=n(l(p,e[m][i]),l(d,e[m][a]));for(var g=0;g<u;g++)e[g][i]=h[g],e[g][a]=f[g];return e}function v(e,t,i,a){for(var u=e.length,h=c(o(t)),f=c(s(t)),m=l(h,h),g=l(f,f),v=Array(u).fill(c(0)),y=Array(u).fill(c(0)),b=d(c(2),h,f,e[i][a]),x=n(r(l(m,e[i][i]),b),l(g,e[a][a])),D=p(l(g,e[i][i]),b,l(m,e[a][a])),w=0;w<u;w++)v[w]=r(l(h,e[i][w]),l(f,e[a][w])),y[w]=n(l(f,e[i][w]),l(h,e[a][w]));e[i][i]=x,e[a][a]=D,e[i][a]=c(0),e[a][i]=c(0);for(var _=0;_<u;_++)_!==i&&_!==a&&(e[i][_]=v[_],e[_][i]=v[_],e[a][_]=y[_],e[_][a]=y[_]);return e}function y(e,t,n,r){for(var i=e.length,a=Math.cos(t),o=Math.sin(t),s=a*a,l=o*o,u=Array(i).fill(0),c=Array(i).fill(0),d=s*e[n][n]-2*a*o*e[n][r]+l*e[r][r],p=l*e[n][n]+2*a*o*e[n][r]+s*e[r][r],h=0;h<i;h++)u[h]=a*e[n][h]-o*e[r][h],c[h]=o*e[n][h]+a*e[r][h];e[n][n]=d,e[r][r]=p,e[n][r]=0,e[r][n]=0;for(var f=0;f<i;f++)f!==n&&f!==r&&(e[n][f]=u[f],e[f][n]=u[f],e[r][f]=c[f],e[f][r]=c[f]);return e}function b(e){for(var t=e.length,n=0,r=[0,1],i=0;i<t;i++)for(var a=i+1;a<t;a++)Math.abs(n)<Math.abs(e[i][a])&&(n=Math.abs(e[i][a]),r=[i,a]);return[r,n]}function x(e){for(var t=e.length,n=0,r=[0,1],a=0;a<t;a++)for(var o=a+1;o<t;o++)i(n)<i(e[a][o])&&(n=i(e[a][o]),r=[a,o]);return[r,n]}function D(e,t,n){var r,a=e.length,o=Array(a);if(n){r=Array(a);for(var s=0;s<a;s++)r[s]=Array(a)}for(var l=0;l<a;l++){for(var u=0,c=e[0],d=0;d<e.length;d++)i(e[d])<i(c)&&(c=e[u=d]);if(o[l]=e.splice(u,1)[0],n)for(var p=0;p<a;p++)r[l][p]=t[p][u],t[p].splice(u,1)}if(!n)return{values:o};var h=r.map(((e,t)=>({value:o[t],vector:e})));return{values:o,eigenvectors:h}}return function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.epsilon,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if("number"===a)return function(e,t,n){var r,i,a=e.length,o=Math.abs(t/a);if(n){i=new Array(a);for(var s=0;s<a;s++)i[s]=Array(a).fill(0),i[s][s]=1}var l=b(e);for(;Math.abs(l[1])>=Math.abs(o);){var u=l[0][0],c=l[0][1];e=y(e,r=h(e[u][u],e[c][c],e[u][c]),u,c),n&&(i=m(i,r,u,c)),l=b(e)}for(var d=Array(a).fill(0),p=0;p<a;p++)d[p]=e[p][p];return D(Eu(d),i,n)}(e,r,o);if("BigNumber"===a)return function(e,t,n){var r,a,o=e.length,s=i(t/o);if(n){a=new Array(o);for(var l=0;l<o;l++)a[l]=Array(o).fill(0),a[l][l]=1}var u=x(e);for(;i(u[1])>=i(s);){var c=u[0][0],d=u[0][1];e=v(e,r=f(e[c][c],e[d][d],e[c][d]),c,d),n&&(a=g(a,r,c,d)),u=x(e)}for(var p=Array(o).fill(0),h=0;h<o;h++)p[h]=e[h][h];return D(Eu(p),a,n)}(e,r,o);throw TypeError("Unsupported data type: "+a)}}var B_=zu("eigs",["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],(e=>{var{config:t,typed:n,matrix:r,addScalar:i,subtract:a,equal:o,abs:s,atan:l,cos:u,sin:c,multiplyScalar:d,divideScalar:p,inv:h,bignumber:f,multiply:m,add:g,larger:v,column:y,flatten:b,number:x,complex:D,sqrt:w,diag:_,size:S,reshape:C,qr:E,usolve:k,usolveAll:A,im:N,re:M,smaller:F,matrixFromColumns:T,dot:B}=e,L=T_({config:t,addScalar:i,subtract:a,column:y,flatten:b,equal:o,abs:s,atan:l,cos:u,sin:c,multiplyScalar:d,inv:h,bignumber:f,complex:D,multiply:m,add:g}),O=F_({config:t,addScalar:i,subtract:a,multiply:m,multiplyScalar:d,flatten:b,divideScalar:p,sqrt:w,abs:s,bignumber:f,diag:_,size:S,reshape:C,qr:E,inv:h,usolve:k,usolveAll:A,equal:o,complex:D,larger:v,smaller:F,matrixFromColumns:T,dot:B});return n("eigs",{Array:function(e){return z(r(e))},"Array, number|BigNumber":function(e,t){return z(r(e),{precision:t})},"Array, Object":(e,t)=>z(r(e),t),Matrix:function(e){return z(e,{matricize:!0})},"Matrix, number|BigNumber":function(e,t){return z(e,{precision:t,matricize:!0})},"Matrix, Object":function(e,t){var n={matricize:!0};return Il(n,t),z(e,n)}});function z(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!("eigenvectors"in i)||i.eigenvectors,l=function(e,t,n){var r=e.toArray(),i=e.size();if(2!==i.length||i[0]!==i[1])throw new RangeError("Matrix must be square (size: ".concat(jp(i),")"));var o=i[0];if(function(e,t,n){for(var r=0;r<t;r++)for(var i=0;i<t;i++)if(v(f(s(N(e[r][i]))),n))return!1;return!0}(r,o,t)&&(function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)e[n][r]=M(e[n][r])}(r,o),function(e,t,n){for(var r=0;r<t;r++)for(var i=r;i<t;i++)if(v(f(s(a(e[r][i],e[i][r]))),n))return!1;return!0}(r,o,t))){var l=I(e,r,o);return L(r,o,t,l,n)}var u=I(e,r,o);return O(r,o,t,u,n)}(e,null!==(n=i.precision)&&void 0!==n?n:t.epsilon,o);return i.matricize&&(l.values=r(l.values),o&&(l.eigenvectors=l.eigenvectors.map((e=>{var{value:t,vector:n}=e;return{value:t,vector:r(n)}})))),o&&Object.defineProperty(l,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),l}function I(e,t,n){var r=e.datatype();if("number"===r||"BigNumber"===r||"Complex"===r)return r;for(var i=!1,a=!1,o=!1,s=0;s<n;s++)for(var l=0;l<n;l++){var u=t[s][l];if(ql(u)||Kl(u))i=!0;else if(Rl(u))a=!0;else{if(!jl(u))throw TypeError("Unsupported type in Matrix: "+Cu(u));o=!0}}if(a&&o&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),o){for(var c=0;c<n;c++)for(var d=0;d<n;d++)t[c][d]=D(t[c][d]);return"Complex"}if(a){for(var p=0;p<n;p++)for(var h=0;h<n;h++)t[p][h]=f(t[p][h]);return"BigNumber"}if(i){for(var m=0;m<n;m++)for(var g=0;g<n;g++)t[m][g]=x(t[m][g]);return"number"}throw TypeError("Matrix contains unsupported types only.")}})),L_="expm",O_=zu(L_,["typed","abs","add","identity","inv","multiply"],(e=>{var{typed:t,abs:n,add:r,identity:i,inv:a,multiply:o}=e;return t(L_,{Matrix:function(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw new RangeError("Matrix must be square (size: "+jp(t)+")");for(var l=t[0],u=function(e){for(var t=e.size()[0],r=0,i=0;i<t;i++){for(var a=0,o=0;o<t;o++)a+=n(e.get([i,o]));r=Math.max(a,r)}return r}(e),c=function(e,t){for(var n=30,r=0;r<n;r++)for(var i=0;i<=r;i++){var a=r-i;if(s(e,i,a)<t)return{q:i,j:a}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(u,1e-15),d=c.q,p=c.j,h=o(e,Math.pow(2,-p)),f=i(l),m=i(l),g=1,v=h,y=-1,b=1;b<=d;b++)b>1&&(v=o(v,h),y=-y),f=r(f,o(g=g*(d-b+1)/((2*d-b+1)*b),v)),m=r(m,o(g*y,v));for(var x=o(a(m),f),D=0;D<p;D++)x=o(x,x);return Zl(e)?e.createSparseMatrix(x):x}});function s(e,t,n){for(var r=1,i=2;i<=t;i++)r*=i;for(var a=r,o=t+1;o<=2*t;o++)a*=o;var s=a*(2*t+1);return 8*Math.pow(e/Math.pow(2,n),2*t)*r*r/(a*s)}})),z_="sqrtm",I_=zu(z_,["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],(e=>{var{typed:t,abs:n,add:r,multiply:i,map:a,sqrt:o,subtract:s,inv:l,size:u,max:c,identity:d}=e,p=1e-6;function h(e){var t,a=0,o=e,h=d(u(e));do{var f=o;if(o=i(.5,r(f,l(h))),h=i(.5,r(h,l(f))),(t=c(n(s(o,f))))>p&&++a>1e3)throw new Error("computing square root of matrix: iterative method could not converge")}while(t>p);return o}return t(z_,{"Array | Matrix":function(e){var t=Hl(e)?e.size():Wp(e);switch(t.length){case 1:if(1===t[0])return a(e,o);throw new RangeError("Matrix must be square (size: "+jp(t)+")");case 2:if(t[0]===t[1])return h(e);throw new RangeError("Matrix must be square (size: "+jp(t)+")");default:throw new RangeError("Matrix must be at most two dimensional (size: "+jp(t)+")")}}})})),P_="sylvester",q_=zu(P_,["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],(e=>{var{typed:t,schur:n,matrixFromColumns:r,matrix:i,multiply:a,range:o,concat:s,transpose:l,index:u,subset:c,add:d,subtract:p,identity:h,lusolve:f,abs:m}=e;return t(P_,{"Matrix, Matrix, Matrix":g,"Array, Matrix, Matrix":function(e,t,n){return g(i(e),t,n)},"Array, Array, Matrix":function(e,t,n){return g(i(e),i(t),n)},"Array, Matrix, Array":function(e,t,n){return g(i(e),t,i(n))},"Matrix, Array, Matrix":function(e,t,n){return g(e,i(t),n)},"Matrix, Array, Array":function(e,t,n){return g(e,i(t),i(n))},"Matrix, Matrix, Array":function(e,t,n){return g(e,t,i(n))},"Array, Array, Array":function(e,t,n){return g(i(e),i(t),i(n)).toArray()}});function g(e,t,g){for(var v=t.size()[0],y=e.size()[0],b=n(e),x=b.T,D=b.U,w=n(a(-1,t)),_=w.T,S=w.U,C=a(a(l(D),g),S),E=o(0,y),k=[],A=(e,t)=>s(e,t,1),N=(e,t)=>s(e,t,0),M=0;M<v;M++)if(M<v-1&&m(c(_,u(M+1,M)))>1e-5){for(var F=N(c(C,u(E,M)),c(C,u(E,M+1))),T=0;T<M;T++)F=d(F,N(a(k[T],c(_,u(T,M))),a(k[T],c(_,u(T,M+1)))));var B=a(h(y),a(-1,c(_,u(M,M)))),L=a(h(y),a(-1,c(_,u(M+1,M)))),O=a(h(y),a(-1,c(_,u(M,M+1)))),z=a(h(y),a(-1,c(_,u(M+1,M+1)))),I=N(A(d(x,B),L),A(O,d(x,z))),P=f(I,F);k[M]=P.subset(u(o(0,y),0)),k[M+1]=P.subset(u(o(y,2*y),0)),M++}else{for(var q=c(C,u(E,M)),R=0;R<M;R++)q=d(q,a(k[R],c(_,u(R,M))));var j=c(_,u(M,M)),K=p(x,a(j,h(y)));k[M]=f(K,q)}var V=i(r(...k));return a(D,a(V,l(S)))}})),R_="schur",j_=zu(R_,["typed","matrix","identity","multiply","qr","norm","subtract"],(e=>{var{typed:t,matrix:n,identity:r,multiply:i,qr:a,norm:o,subtract:s}=e;return t(R_,{Array:function(e){var t=l(n(e));return{U:t.U.valueOf(),T:t.T.valueOf()}},Matrix:function(e){return l(e)}});function l(e){var t,n=e.size()[0],l=e,u=r(n),c=0;do{t=l;var d=a(l),p=d.Q,h=d.R;if(l=i(h,p),u=i(u,p),c++>100)break}while(o(s(l,t))>1e-4);return{U:u,T:l}}})),K_="lyap",V_=zu(K_,["typed","matrix","sylvester","multiply","transpose"],(e=>{var{typed:t,matrix:n,sylvester:r,multiply:i,transpose:a}=e;return t(K_,{"Matrix, Matrix":function(e,t){return r(e,a(e),i(-1,t))},"Array, Matrix":function(e,t){return r(n(e),a(n(e)),i(-1,t))},"Matrix, Array":function(e,t){return r(e,a(n(e)),n(i(-1,t)))},"Array, Array":function(e,t){return r(n(e),a(n(e)),n(i(-1,t))).toArray()}})})),U_=zu("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],(e=>{var{typed:t,matrix:n,multiply:r,equalScalar:i,divideScalar:a,inv:o}=e,s=sm({typed:t,equalScalar:i}),l=um({typed:t});return t("divide",Au({"Array | Matrix, Array | Matrix":function(e,t){return r(e,o(t))},"DenseMatrix, any":function(e,t){return l(e,t,a,!1)},"SparseMatrix, any":function(e,t){return s(e,t,a,!1)},"Array, any":function(e,t){return l(n(e),t,a,!1).valueOf()},"any, Array | Matrix":function(e,t){return r(e,o(t))}},a.signatures))})),$_="distance",H_=zu($_,["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],(e=>{var{typed:t,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,deepEqual:o,sqrt:s,abs:l}=e;return t($_,{"Array, Array, Array":function(e,t,n){if(2===e.length&&2===t.length&&2===n.length){if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(o(t,n))throw new TypeError("LinePoint1 should not be same with LinePoint2");var a=r(n[1],t[1]),s=r(t[0],n[0]),l=r(i(n[0],t[1]),i(t[0],n[1]));return m(e[0],e[1],a,s,l)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(e,t,n){if(2===Object.keys(e).length&&2===Object.keys(t).length&&2===Object.keys(n).length){if(!c(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(t))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(n))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(o(f(t),f(n)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in e&&"pointY"in e&&"lineOnePtX"in t&&"lineOnePtY"in t&&"lineTwoPtX"in n&&"lineTwoPtY"in n){var a=r(n.lineTwoPtY,t.lineOnePtY),s=r(t.lineOnePtX,n.lineTwoPtX),l=r(i(n.lineTwoPtX,t.lineOnePtY),i(t.lineOnePtX,n.lineTwoPtY));return m(e.pointX,e.pointY,a,s,l)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(e,t){if(2===e.length&&3===t.length){if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return m(e[0],e[1],t[0],t[1],t[2])}if(3===e.length&&6===t.length){if(!d(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(t))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(e[0],e[1],e[2],t[0],t[1],t[2],t[3],t[4],t[5])}if(e.length===t.length&&e.length>0){if(!p(e))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!p(t))throw new TypeError("All values of an array should be numbers or BigNumbers");return v(e,t)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(e,t){if(2===Object.keys(e).length&&3===Object.keys(t).length){if(!c(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!d(t))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"xCoeffLine"in t&&"yCoeffLine"in t&&"constant"in t)return m(e.pointX,e.pointY,t.xCoeffLine,t.yCoeffLine,t.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&6===Object.keys(t).length){if(!d(e))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(t))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"x0"in t&&"y0"in t&&"z0"in t&&"a"in t&&"b"in t&&"c"in t)return g(e.pointX,e.pointY,e.pointZ,t.x0,t.y0,t.z0,t.a,t.b,t.c);throw new TypeError("Key names do not match")}if(2===Object.keys(e).length&&2===Object.keys(t).length){if(!c(e))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(t))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointTwoX"in t&&"pointTwoY"in t)return v([e.pointOneX,e.pointOneY],[t.pointTwoX,t.pointTwoY]);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&3===Object.keys(t).length){if(!d(e))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!d(t))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointOneZ"in e&&"pointTwoX"in t&&"pointTwoY"in t&&"pointTwoZ"in t)return v([e.pointOneX,e.pointOneY,e.pointOneZ],[t.pointTwoX,t.pointTwoY,t.pointTwoZ]);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(e){if(!function(e){if(2===e[0].length&&u(e[0][0])&&u(e[0][1])){if(e.some((e=>2!==e.length||!u(e[0])||!u(e[1]))))return!1}else{if(!(3===e[0].length&&u(e[0][0])&&u(e[0][1])&&u(e[0][2])))return!1;if(e.some((e=>3!==e.length||!u(e[0])||!u(e[1])||!u(e[2]))))return!1}return!0}(e))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(e){for(var t=[],n=[],r=[],i=0;i<e.length-1;i++)for(var a=i+1;a<e.length;a++)2===e[0].length?(n=[e[i][0],e[i][1]],r=[e[a][0],e[a][1]]):3===e[0].length&&(n=[e[i][0],e[i][1],e[i][2]],r=[e[a][0],e[a][1],e[a][2]]),t.push(v(n,r));return t}(e)}});function u(e){return"number"===typeof e||Rl(e)}function c(e){return e.constructor!==Array&&(e=f(e)),u(e[0])&&u(e[1])}function d(e){return e.constructor!==Array&&(e=f(e)),u(e[0])&&u(e[1])&&u(e[2])}function p(e){return Array.isArray(e)||(e=f(e)),e.every(u)}function h(e){return e.constructor!==Array&&(e=f(e)),u(e[0])&&u(e[1])&&u(e[2])&&u(e[3])&&u(e[4])&&u(e[5])}function f(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}function m(e,t,r,o,u){var c=l(n(n(i(r,e),i(o,t)),u)),d=s(n(i(r,r),i(o,o)));return a(c,d)}function g(e,t,o,l,u,c,d,p,h){var f=[r(i(r(u,t),h),i(r(c,o),p)),r(i(r(c,o),d),i(r(l,e),h)),r(i(r(l,e),p),i(r(u,t),d))];f=s(n(n(i(f[0],f[0]),i(f[1],f[1])),i(f[2],f[2])));var m=s(n(n(i(d,d),i(p,p)),i(h,h)));return a(f,m)}function v(e,t){for(var a=e.length,o=0,l=0,u=0;u<a;u++)l=r(e[u],t[u]),o=n(i(l,l),o);return s(o)}})),W_=zu("intersect",["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],(e=>{var{typed:t,config:n,abs:r,add:i,addScalar:a,matrix:o,multiply:s,multiplyScalar:l,divideScalar:u,subtract:c,smaller:d,equalScalar:p,flatten:h,isZero:f,isNumeric:m}=e;return t("intersect",{"Array, Array, Array":g,"Array, Array, Array, Array":v,"Matrix, Matrix, Matrix":function(e,t,n){var r=g(e.valueOf(),t.valueOf(),n.valueOf());return null===r?null:o(r)},"Matrix, Matrix, Matrix, Matrix":function(e,t,n,r){var i=v(e.valueOf(),t.valueOf(),n.valueOf(),r.valueOf());return null===i?null:o(i)}});function g(e,t,n){if(e=y(e),t=y(t),n=y(n),!x(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!x(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(e){return 4===e.length&&m(e[0])&&m(e[1])&&m(e[2])&&m(e[3])}(n))throw new TypeError("Array with 4 numbers expected as third argument");return function(e,t,n,r,i,o,s,d,p,h){var f=l(e,s),m=l(r,s),g=l(t,d),v=l(i,d),y=l(n,p),b=l(o,p),x=c(c(c(h,f),g),y),D=c(c(c(a(a(m,v),b),f),g),y),w=u(x,D),_=a(e,l(w,c(r,e))),S=a(t,l(w,c(i,t))),C=a(n,l(w,c(o,n)));return[_,S,C]}(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],n[3])}function v(e,t,o,h){if(e=y(e),t=y(t),o=y(o),h=y(h),2===e.length){if(!b(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(o))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b(h))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(e,t,o,p){var h=e,m=o,g=c(h,t),v=c(m,p),y=c(l(g[0],v[1]),l(v[0],g[1]));if(f(y))return null;if(d(r(y),n.epsilon))return null;var b=l(v[0],h[1]),x=l(v[1],h[0]),D=l(v[0],m[1]),w=l(v[1],m[0]),_=u(a(c(c(b,x),D),w),y);return i(s(g,_),h)}(e,t,o,h)}if(3===e.length){if(!x(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!x(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(o))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!x(h))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return function(e,t,n,r,i,o,s,d,h,m,g,v){var y=D(e,s,m,s,t,d,g,d,n,h,v,h),b=D(m,s,r,e,g,d,i,t,v,h,o,n),x=D(e,s,r,e,t,d,i,t,n,h,o,n),w=D(m,s,m,s,g,d,g,d,v,h,v,h),_=D(r,e,r,e,i,t,i,t,o,n,o,n),S=c(l(y,b),l(x,w)),C=c(l(_,w),l(b,b));if(f(C))return null;var E=u(S,C),k=u(a(y,l(E,b)),w),A=a(e,l(E,c(r,e))),N=a(t,l(E,c(i,t))),M=a(n,l(E,c(o,n))),F=a(s,l(k,c(m,s))),T=a(d,l(k,c(g,d))),B=a(h,l(k,c(v,h)));return p(A,F)&&p(N,T)&&p(M,B)?[A,N,M]:null}(e[0],e[1],e[2],t[0],t[1],t[2],o[0],o[1],o[2],h[0],h[1],h[2])}throw new TypeError("Arrays with two or thee dimensional points expected")}function y(e){return 1===e.length?e[0]:e.length>1&&Array.isArray(e[0])&&e.every((e=>Array.isArray(e)&&1===e.length))?h(e):e}function b(e){return 2===e.length&&m(e[0])&&m(e[1])}function x(e){return 3===e.length&&m(e[0])&&m(e[1])&&m(e[2])}function D(e,t,n,r,i,o,s,u,d,p,h,f){var m=l(c(e,t),c(n,r)),g=l(c(i,o),c(s,u)),v=l(c(d,p),c(h,f));return a(a(m,g),v)}})),G_=zu("sum",["typed","config","add","numeric"],(e=>{var{typed:t,config:n,add:r,numeric:i}=e;return t("sum",{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(e,t){try{return Th(e,t,r)}catch(n){throw gy(n,"sum")}},"...":function(e){if(Nh(e))throw new TypeError("Scalar values expected in function sum");return a(e)}});function a(e){var t;return Mh(e,(function(e){try{t=void 0===t?e:r(t,e)}catch(n){throw gy(n,"sum",e)}})),void 0===t&&(t=i(0,n.number)),"string"===typeof t&&(t=i(t,n.number)),t}})),Z_="cumsum",J_=zu(Z_,["typed","add","unaryPlus"],(e=>{var{typed:t,add:n,unaryPlus:r}=e;return t(Z_,{Array:i,Matrix:function(e){return e.create(i(e.valueOf()))},"Array, number | BigNumber":o,"Matrix, number | BigNumber":function(e,t){return e.create(o(e.valueOf(),t))},"...":function(e){if(Nh(e))throw new TypeError("All values expected to be scalar in function cumsum");return i(e)}});function i(e){try{return a(e)}catch(t){throw gy(t,Z_)}}function a(e){if(0===e.length)return[];for(var t=[r(e[0])],i=1;i<e.length;++i)t.push(n(t[i-1],e[i]));return t}function o(e,t){var n=Wp(e);if(t<0||t>=n.length)throw new Wu(t,n.length);try{return s(e,t)}catch(r){throw gy(r,Z_)}}function s(e,t){var n,r,i;if(t<=0){var o=e[0][0];if(Array.isArray(o)){for(i=Ah(e),r=[],n=0;n<i.length;n++)r[n]=s(i[n],t-1);return r}return a(e)}for(r=[],n=0;n<e.length;n++)r[n]=s(e[n],t-1);return r}})),X_="mean",Y_=zu(X_,["typed","add","divide"],(e=>{var{typed:t,add:n,divide:r}=e;return t(X_,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(e,t){try{var i=Th(e,t,n),a=Array.isArray(e)?Wp(e):e.size();return r(i,a[t])}catch(o){throw gy(o,"mean")}},"...":function(e){if(Nh(e))throw new TypeError("Scalar values expected in function mean");return i(e)}});function i(e){var t,i=0;if(Mh(e,(function(e){try{t=void 0===t?e:n(t,e),i++}catch(r){throw gy(r,"mean",e)}})),0===i)throw new Error("Cannot calculate the mean of an empty array");return r(t,i)}})),Q_="median",eS=zu(Q_,["typed","add","divide","compare","partitionSelect"],(e=>{var{typed:t,add:n,divide:r,compare:i,partitionSelect:a}=e;function o(e){try{var t=(e=lh(e.valueOf())).length;if(0===t)throw new Error("Cannot calculate median of an empty array");if(t%2===0){for(var n=t/2-1,r=a(e,n+1),o=e[n],u=0;u<n;++u)i(e[u],o)>0&&(o=e[u]);return l(o,r)}var c=a(e,(t-1)/2);return s(c)}catch(d){throw gy(d,"median")}}var s=t({"number | BigNumber | Complex | Unit":function(e){return e}}),l=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(e,t){return r(n(e,t),2)}});return t(Q_,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("median(A, dim) is not yet supported")},"...":function(e){if(Nh(e))throw new TypeError("Scalar values expected in function median");return o(e)}})})),tS=zu("mad",["typed","abs","map","median","subtract"],(e=>{var{typed:t,abs:n,map:r,median:i,subtract:a}=e;return t("mad",{"Array | Matrix":o,"...":function(e){return o(e)}});function o(e){if(0===(e=lh(e.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var t=i(e);return i(r(e,(function(e){return n(a(e,t))})))}catch(o){throw o instanceof TypeError&&o.message.includes("median")?new TypeError(o.message.replace("median","mad")):gy(o,"mad")}}})),nS="unbiased",rS="variance",iS=zu(rS,["typed","add","subtract","multiply","divide","apply","isNaN"],(e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:a,apply:o,isNaN:s}=e;return t(rS,{"Array | Matrix":function(e){return l(e,nS)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(e,t){return u(e,t,nS)},"Array | Matrix, number | BigNumber, string":u,"...":function(e){return l(e,nS)}});function l(e,t){var o,l=0;if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Mh(e,(function(e){try{o=void 0===o?e:n(o,e),l++}catch(t){throw gy(t,"variance",e)}})),0===l)throw new Error("Cannot calculate variance of an empty array");var u=a(o,l);if(o=void 0,Mh(e,(function(e){var t=r(e,u);o=void 0===o?i(t,t):n(o,i(t,t))})),s(o))return o;switch(t){case"uncorrected":return a(o,l);case"biased":return a(o,l+1);case"unbiased":var c=Rl(o)?o.mul(0):0;return 1===l?c:a(o,l-1);default:throw new Error('Unknown normalization "'+t+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(e,t,n){try{if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(e,t,(e=>l(e,n)))}catch(r){throw gy(r,"variance")}}})),aS="quantileSeq",oS=zu(aS,["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],(e=>{var{typed:t,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:d,larger:p}=e,h=Qf({typed:t,isInteger:u});return t(aS,{"Array | Matrix, number | BigNumber":(e,t)=>m(e,t,!1),"Array | Matrix, number | BigNumber, number":(e,t,n)=>f(e,t,!1,n,m),"Array | Matrix, number | BigNumber, boolean":m,"Array | Matrix, number | BigNumber, boolean, number":(e,t,n,r)=>f(e,t,n,r,m),"Array | Matrix, Array | Matrix":(e,t)=>g(e,t,!1),"Array | Matrix, Array | Matrix, number":(e,t,n)=>f(e,t,!1,n,g),"Array | Matrix, Array | Matrix, boolean":g,"Array | Matrix, Array | Matrix, boolean, number":(e,t,n,r)=>f(e,t,n,r,g)});function f(e,t,n,r,i){return h(e,r,(e=>i(e,t,n)))}function m(e,t,i){var o,s=e.valueOf();if(c(t,0))throw new Error("N/prob must be non-negative");if(d(t,1))return ql(t)?v(s,t,i):n(v(s,t,i));if(p(t,1)){if(!u(t))throw new Error("N must be a positive integer");if(p(t,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var l=r(t,1);o=[];for(var h=0;c(h,t);h++){var f=a(h+1,l);o.push(v(s,f,i))}return ql(t)?o:n(o)}}function g(e,t,n){for(var r=e.valueOf(),i=t.valueOf(),a=[],o=0;o<i.length;++o)a.push(v(r,i[o],n));return a}function v(e,t,n){var a=lh(e),c=a.length;if(0===c)throw new Error("Cannot calculate quantile of an empty sequence");var d,p,h=ql(t)?t*(c-1):t.times(c-1),f=ql(t)?Math.floor(h):h.floor().toNumber(),m=ql(t)?h%1:h.minus(f);if(u(h))return n?a[h]:s(a,ql(t)?h:h.valueOf());if(n)d=a[f],p=a[f+1];else{p=s(a,f+1),d=a[f];for(var g=0;g<f;++g)l(a[g],d)>0&&(d=a[g])}return r(o(d,i(1,m)),o(p,m))}})),sS=zu("std",["typed","map","sqrt","variance"],(e=>{var{typed:t,map:n,sqrt:r,variance:i}=e;return t("std",{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(e){return a(e)}});function a(e,t){if(0===e.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var a=i.apply(null,arguments);return Wl(a)?n(a,r):r(a)}catch(o){throw o instanceof TypeError&&o.message.includes(" variance")?new TypeError(o.message.replace(" variance"," std")):o}}})),lS="corr",uS=zu(lS,["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],(e=>{var{typed:t,matrix:n,sqrt:r,sum:i,add:a,subtract:o,multiply:s,pow:l,divide:u}=e;return t(lS,{"Array, Array":function(e,t){return c(e,t)},"Matrix, Matrix":function(e,t){var r=c(e.toArray(),t.toArray());return Array.isArray(r)?n(r):r}});function c(e,t){var n=[];if(Array.isArray(e[0])&&Array.isArray(t[0])){if(e.length!==t.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var r=0;r<e.length;r++){if(e[r].length!==t[r].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");n.push(d(e[r],t[r]))}return n}if(e.length!==t.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return d(e,t)}function d(e,t){var n=e.length,c=i(e),d=i(t),p=e.reduce(((e,n,r)=>a(e,s(n,t[r]))),0),h=i(e.map((e=>l(e,2)))),f=i(t.map((e=>l(e,2)))),m=o(s(n,p),s(c,d)),g=r(s(o(s(n,h),l(c,2)),o(s(n,f),l(d,2))));return u(m,g)}}));function cS(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return cS(e,n)*cS(n+1,t)}function dS(e,t){if(!Zu(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!Zu(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(t>e)throw new TypeError("k must be less than or equal to n");for(var n=e-t,r=1,i=2,a=t<n?t:n,o=t<n?n+1:t+1;o<=e;++o)for(r*=o;i<=a&&r%i===0;)r/=i,++i;return i<=a&&(r/=cS(i,a)),r}dS.signature="number, number";var pS="combinations",hS=zu(pS,["typed"],(e=>{var{typed:t}=e;return t(pS,{"number, number":dS,"BigNumber, BigNumber":function(e,t){var n,r,i=e.constructor,a=e.minus(t),o=new i(1);if(!fS(e)||!fS(t))throw new TypeError("Positive integer value expected in function combinations");if(t.gt(e))throw new TypeError("k must be less than n in function combinations");if(n=o,t.lt(a))for(r=o;r.lte(a);r=r.plus(o))n=n.times(t.plus(r)).dividedBy(r);else for(r=o;r.lte(t);r=r.plus(o))n=n.times(a.plus(r)).dividedBy(r);return n}})}));function fS(e){return e.isInteger()&&e.gte(0)}var mS="combinationsWithRep",gS=zu(mS,["typed"],(e=>{var{typed:t}=e;return t(mS,{"number, number":function(e,t){if(!Zu(e)||e<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Zu(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e<1)throw new TypeError("k must be less than or equal to n + k - 1");return t<e-1?cS(e,e+t-1)/cS(1,t):cS(t+1,e+t-1)/cS(1,e-1)},"BigNumber, BigNumber":function(e,t){var n,r,i=new(0,e.constructor)(1),a=e.minus(i);if(!vS(e)||!vS(t))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e.lt(i))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(n=i,t.lt(a))for(r=i;r.lte(a);r=r.plus(i))n=n.times(t.plus(r)).dividedBy(r);else for(r=i;r.lte(t);r=r.plus(i))n=n.times(a.plus(r)).dividedBy(r);return n}})}));function vS(e){return e.isInteger()&&e.gte(0)}function yS(e){var t;if(Zu(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:cS(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*yS(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,r=n*e,i=r*e,a=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*e))}--e,t=xS[0];for(var o=1;o<xS.length;++o)t+=xS[o]/(e+o);var s=e+bS+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,e+.5)*Math.exp(-s)*t}yS.signature="number";var bS=4.7421875,xS=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],DS=.9189385332046728,wS=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function _S(e){if(e<0)return NaN;if(0===e)return 1/0;if(!isFinite(e))return e;if(e<.5)return Math.log(Math.PI/Math.sin(Math.PI*e))-_S(1-e);for(var t=(e-=1)+5+.5,n=wS[0],r=6;r>=1;r--)n+=wS[r]/(e+r);return DS+(e+.5)*Math.log(t)-t+Math.log(n)}_S.signature="number";var SS="gamma",CS=zu(SS,["typed","config","multiplyScalar","pow","BigNumber","Complex"],(e=>{var{typed:t,config:n,multiplyScalar:r,pow:i,BigNumber:a,Complex:o}=e;return t(SS,{number:yS,Complex:function e(t){if(0===t.im)return yS(t.re);if(t.re<.5){var n=new o(1-t.re,-t.im),r=new o(Math.PI*t.re,Math.PI*t.im);return new o(Math.PI).div(r.sin()).div(e(n))}t=new o(t.re-1,t.im);for(var i=new o(xS[0],0),a=1;a<xS.length;++a){var s=new o(xS[a],0);i=i.add(s.div(t.add(a)))}var l=new o(t.re+bS+.5,t.im),u=Math.sqrt(2*Math.PI),c=l.pow(t.add(.5)),d=l.neg().exp();return i.mul(u).mul(c).mul(d)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new a(1/0):s(e.minus(1));if(!e.isFinite())return new a(e.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function s(e){if(e<8)return new a([1,1,2,6,24,120,720,5040][e]);var t=n.precision+(0|Math.log(e.toNumber())),r=a.clone({precision:t});if(e%2===1)return e.times(s(new a(e-1)));for(var i=e,o=new r(e),l=e.toNumber();i>2;)l+=i-=2,o=o.times(l);return new a(o.toPrecision(a.precision))}})),ES="lgamma",kS=zu(ES,["Complex","typed"],(e=>{var{Complex:t,typed:n}=e,r=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(ES,{number:_S,Complex:function e(n){if(n.isNaN())return new t(NaN,NaN);if(0===n.im)return new t(_S(n.re),0);if(n.re>=7||Math.abs(n.im)>=7)return i(n);if(n.re<=.1){var r=function(e,t){return(e>0||!(e<0)&&1/e===1/0)^(t>0||!(t<0)&&1/t===1/0)?-e:e}(6.283185307179586,n.im)*Math.floor(.5*n.re+.25),o=n.mul(Math.PI).sin().log(),s=e(new t(1-n.re,-n.im));return new t(1.1447298858494002,r).sub(o).sub(s)}return n.im>=0?a(n):a(n.conjugate()).conjugate()},BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function i(e){for(var n=e.sub(.5).mul(e.log()).sub(e).add(DS),i=new t(1,0).div(e),a=i.div(e),o=r[0],s=r[1],l=2*a.re,u=a.re*a.re+a.im*a.im,c=2;c<8;c++){var d=s;s=-u*o+r[c],o=l*o+d}var p=i.mul(a.mul(o).add(s));return n.add(p)}function a(e){var n=0,r=0,a=e;for(e=e.add(1);e.re<=7;){var o=(a=a.mul(e)).im<0?1:0;0!==o&&0===r&&n++,r=o,e=e.add(1)}return i(e).sub(a.log()).sub(new t(0,2*n*Math.PI*1))}})),AS="factorial",NS=zu(AS,["typed","gamma"],(e=>{var{typed:t,gamma:n}=e;return t(AS,{number:function(e){if(e<0)throw new Error("Value must be non-negative");return n(e+1)},BigNumber:function(e){if(e.isNegative())throw new Error("Value must be non-negative");return n(e.plus(1))},"Array | Matrix":t.referToSelf((e=>t=>Fh(t,e)))})})),MS="kldivergence",FS=zu(MS,["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],(e=>{var{typed:t,matrix:n,divide:r,sum:i,multiply:a,map:o,dotDivide:s,log:l,isNumeric:u}=e;return t(MS,{"Array, Array":function(e,t){return c(n(e),n(t))},"Matrix, Array":function(e,t){return c(e,n(t))},"Array, Matrix":function(e,t){return c(n(e),t)},"Matrix, Matrix":function(e,t){return c(e,t)}});function c(e,t){var n=t.size().length,c=e.size().length;if(n>1)throw new Error("first object must be one dimensional");if(c>1)throw new Error("second object must be one dimensional");if(n!==c)throw new Error("Length of two vectors must be equal");if(0===i(e))throw new Error("Sum of elements in first object must be non zero");if(0===i(t))throw new Error("Sum of elements in second object must be non zero");var d=r(e,i(e)),p=r(t,i(t)),h=i(a(d,o(s(d,p),(e=>l(e)))));return u(h)?h:Number.NaN}})),TS="multinomial",BS=zu(TS,["typed","add","divide","multiply","factorial","isInteger","isPositive"],(e=>{var{typed:t,add:n,divide:r,multiply:i,factorial:a,isInteger:o,isPositive:s}=e;return t(TS,{"Array | Matrix":function(e){var t=0,l=1;return Mh(e,(function(e){if(!o(e)||!s(e))throw new TypeError("Positive integer value expected in function multinomial");t=n(t,e),l=i(l,a(e))})),r(a(t),l)}})})),LS="permutations",OS=zu(LS,["typed","factorial"],(e=>{var{typed:t,factorial:n}=e;return t(LS,{"number | BigNumber":n,"number, number":function(e,t){if(!Zu(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(!Zu(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(t>e)throw new TypeError("second argument k must be less than or equal to first argument n");return cS(e-t+1,e)},"BigNumber, BigNumber":function(e,t){var n,r;if(!zS(e)||!zS(t))throw new TypeError("Positive integer value expected in function permutations");if(t.gt(e))throw new TypeError("second argument k must be less than or equal to first argument n");for(n=e.mul(0).add(1),r=e.minus(t).plus(1);r.lte(e);r=r.plus(1))n=n.times(r);return n}})}));function zS(e){return e.isInteger()&&e.gte(0)}var IS=n(334),PS=IS(Date.now());function qS(e){var t,n;return t=null===(n=e)?PS:IS(String(n)),function(){return t()}}var RS="pickRandom",jS=zu(RS,["typed","config","?on"],(e=>{var{typed:t,config:n,on:r}=e,i=qS(n.randomSeed);return r&&r("config",(function(e,t){e.randomSeed!==t.randomSeed&&(i=qS(e.randomSeed))})),t(RS,{"Array | Matrix":function(e){return a(e,{})},"Array | Matrix, Object":function(e,t){return a(e,t)},"Array | Matrix, number":function(e,t){return a(e,{number:t})},"Array | Matrix, Array | Matrix":function(e,t){return a(e,{weights:t})},"Array | Matrix, Array | Matrix, number":function(e,t,n){return a(e,{number:n,weights:t})},"Array | Matrix, number, Array | Matrix":function(e,t,n){return a(e,{number:t,weights:n})}});function a(e,t){var{number:n,weights:r,elementWise:a=!0}=t,o="undefined"===typeof n;o&&(n=1);var s=Hl(e)?e.create:Hl(r)?r.create:null;e=e.valueOf(),r&&(r=r.valueOf()),!0===a&&(e=lh(e),r=lh(r));var l=0;if("undefined"!==typeof r){if(r.length!==e.length)throw new Error("Weights must have the same length as possibles");for(var u=0,c=r.length;u<c;u++){if(!ql(r[u])||r[u]<0)throw new Error("Weights must be an array of positive numbers");l+=r[u]}}for(var d,p=e.length,h=[];h.length<n;){if("undefined"===typeof r)d=e[Math.floor(i()*p)];else for(var f=i()*l,m=0,g=e.length;m<g;m++)if((f-=r[m])<0){d=e[m];break}h.push(d)}return o?h[0]:s?s(h):h}}));function KS(e,t){var n=[];if((e=e.slice(0)).length>1)for(var r=0,i=e.shift();r<i;r++)n.push(KS(e,t));else for(var a=0,o=e.shift();a<o;a++)n.push(t());return n}var VS="random",US=zu(VS,["typed","config","?on"],(e=>{var{typed:t,config:n,on:r}=e,i=qS(n.randomSeed);return r&&r("config",(function(e,t){e.randomSeed!==t.randomSeed&&(i=qS(e.randomSeed))})),t(VS,{"":()=>o(0,1),number:e=>o(0,e),"number, number":(e,t)=>o(e,t),"Array | Matrix":e=>a(e,0,1),"Array | Matrix, number":(e,t)=>a(e,0,t),"Array | Matrix, number, number":(e,t,n)=>a(e,t,n)});function a(e,t,n){var r=KS(e.valueOf(),(()=>o(t,n)));return Hl(e)?e.create(r):r}function o(e,t){return e+i()*(t-e)}})),$S="randomInt",HS=zu($S,["typed","config","?on"],(e=>{var{typed:t,config:n,on:r}=e,i=qS(n.randomSeed);return r&&r("config",(function(e,t){e.randomSeed!==t.randomSeed&&(i=qS(e.randomSeed))})),t($S,{"":()=>o(0,1),number:e=>o(0,e),"number, number":(e,t)=>o(e,t),"Array | Matrix":e=>a(e,0,1),"Array | Matrix, number":(e,t)=>a(e,0,t),"Array | Matrix, number, number":(e,t,n)=>a(e,t,n)});function a(e,t,n){var r=KS(e.valueOf(),(()=>o(t,n)));return Hl(e)?e.create(r):r}function o(e,t){return Math.floor(e+i()*(t-e))}})),WS="stirlingS2",GS=zu(WS,["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],(e=>{var{typed:t,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,pow:o,factorial:s,combinations:l,isNegative:u,isInteger:c,number:d,bignumber:p,larger:h}=e,f=[],m=[];return t(WS,{"number | BigNumber, number | BigNumber":function(e,t){if(!c(e)||u(e)||!c(t)||u(t))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(t,e))throw new TypeError("k must be less than or equal to n in function stirlingS2");var r=!(ql(e)&&ql(t)),a=r?m:f,o=r?p:d,s=d(e),l=d(t);if(a[s]&&a[s].length>l)return a[s][l];for(var g=0;g<=s;++g)if(a[g]||(a[g]=[o(0===g?1:0)]),0!==g)for(var v=a[g],y=a[g-1],b=v.length;b<=g&&b<=l;++b)v[b]=b===g?1:n(i(o(b),y[b]),y[b-1]);return a[s][l]}})})),ZS="bellNumbers",JS=zu(ZS,["typed","addScalar","isNegative","isInteger","stirlingS2"],(e=>{var{typed:t,addScalar:n,isNegative:r,isInteger:i,stirlingS2:a}=e;return t(ZS,{"number | BigNumber":function(e){if(!i(e)||r(e))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var t=0,o=0;o<=e;o++)t=n(t,a(e,o));return t}})})),XS="catalan",YS=zu(XS,["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],(e=>{var{typed:t,addScalar:n,divideScalar:r,multiplyScalar:i,combinations:a,isNegative:o,isInteger:s}=e;return t(XS,{"number | BigNumber":function(e){if(!s(e)||o(e))throw new TypeError("Non-negative integer value expected in function catalan");return r(a(i(e,2),e),n(e,1))}})})),QS="composition",eC=zu(QS,["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],(e=>{var{typed:t,addScalar:n,combinations:r,isPositive:i,isNegative:a,isInteger:o,larger:s}=e;return t(QS,{"number | BigNumber, number | BigNumber":function(e,t){if(!(o(e)&&i(e)&&o(t)&&i(t)))throw new TypeError("Positive integer value expected in function composition");if(s(t,e))throw new TypeError("k must be less than or equal to n in function composition");return r(n(e,-1),n(t,-1))}})})),tC="leafCount",nC=zu(tC,["parse","typed"],(e=>{var{parse:t,typed:n}=e;function r(e){var t=0;return e.forEach((e=>{t+=r(e)})),t||1}return n(tC,{Node:function(e){return r(e)}})}));function rC(e){return pu(e)||bu(e)&&e.isUnary()&&pu(e.args[0])}function iC(e){return!!pu(e)||(!(!mu(e)&&!bu(e)||!e.args.every(iC))||!(!xu(e)||!iC(e.content)))}function aC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aC(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sC=zu("simplifyUtil",["FunctionNode","OperatorNode","SymbolNode"],(e=>{var{FunctionNode:t,OperatorNode:n,SymbolNode:r}=e,i=!0,a=!1,o="defaultF",s={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,r=o;if("string"===typeof e?r=e:bu(e)?r=e.fn.toString():mu(e)?r=e.name:xu(e)&&(r="paren"),Lu(n,r)){var i=n[r];if(Lu(i,t))return i[t];if(Lu(s,r))return s[r][t]}if(Lu(n,o)){var a=n[o];return Lu(a,t)?a[t]:s[o][t]}if(Lu(s,r)){var l=s[r];if(Lu(l,t))return l[t]}return s[o][t]}function u(e){return l(e,"associative",arguments.length>1&&void 0!==arguments[1]?arguments[1]:s)}function c(e,t){var n,r=[];return u(e,t)?(n=e.op,function e(t){for(var i=0;i<t.args.length;i++){var a=t.args[i];bu(a)&&n===a.op?e(a):r.push(a)}}(e),r):e.args}function d(e){return bu(e)?function(t){try{return new n(e.op,e.fn,t,e.implicit)}catch(r){return console.error(r),[]}}:function(n){return new t(new r(e.name),n)}}return{createMakeNodeFunction:d,hasProperty:l,isCommutative:function(e){return l(e,"commutative",arguments.length>1&&void 0!==arguments[1]?arguments[1]:s)},isAssociative:u,mergeContext:function(e,t){var n=oC({},e);for(var r in t)Lu(e,r)?n[r]=oC(oC({},t[r]),e[r]):n[r]=t[r];return n},flatten:function e(t,n){if(!t.args||0===t.args.length)return t;t.args=c(t,n);for(var r=0;r<t.args.length;r++)e(t.args[r],n)},allChildren:c,unflattenr:function e(t,n){if(t.args&&0!==t.args.length){for(var r=d(t),i=t.args.length,a=0;a<i;a++)e(t.args[a],n);if(i>2&&u(t,n)){for(var o=t.args.pop();t.args.length>0;)o=r([t.args.pop(),o]);t.args=o.args}}},unflattenl:function e(t,n){if(t.args&&0!==t.args.length){for(var r=d(t),i=t.args.length,a=0;a<i;a++)e(t.args[a],n);if(i>2&&u(t,n)){for(var o=t.args.shift();t.args.length>0;)o=r([o,t.args.shift()]);t.args=o.args}}},defaultContext:s,realContext:{divide:{total:a},log:{total:a}},positiveContext:{subtract:{total:a},abs:{trivial:i},log:{total:i}}}})),lC=zu("simplify",["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],(e=>{var{config:t,typed:n,parse:r,add:i,subtract:a,multiply:o,divide:s,pow:l,isZero:u,equal:c,resolve:d,simplifyConstant:p,simplifyCore:h,fraction:f,bignumber:m,mathWithTransform:g,matrix:v,AccessorNode:y,ArrayNode:b,ConstantNode:x,FunctionNode:D,IndexNode:w,ObjectNode:_,OperatorNode:S,ParenthesisNode:C,SymbolNode:E}=e,{hasProperty:k,isCommutative:A,isAssociative:N,mergeContext:M,flatten:F,unflattenr:T,unflattenl:B,createMakeNodeFunction:L,defaultContext:O,realContext:z,positiveContext:I}=sC({FunctionNode:D,OperatorNode:S,SymbolNode:E});n.addConversion({from:"Object",to:"Map",convert:Fc});var P=n("simplify",{Node:U,"Node, Map":(e,t)=>U(e,!1,t),"Node, Map, Object":(e,t,n)=>U(e,!1,t,n),"Node, Array":U,"Node, Array, Map":U,"Node, Array, Map, Object":U});function q(e){return e.transform((function(e,t,n){return xu(e)?q(e.content):e}))}n.removeConversion({from:"Object",to:"Map",convert:Fc}),P.defaultContext=O,P.realContext=z,P.positiveContext=I;var R={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};function j(e,t){var n={};if(e.s){var i=e.s.split("->");if(2!==i.length)throw SyntaxError("Could not parse rule: "+e.s);n.l=i[0],n.r=i[1]}else n.l=e.l,n.r=e.r;for(var a of(n.l=q(r(n.l)),n.r=q(r(n.r)),["imposeContext","repeat","assuming"]))a in e&&(n[a]=e[a]);if(e.evaluate&&(n.evaluate=r(e.evaluate)),N(n.l,t)){var o,s=!A(n.l,t);s&&(o=V());var l=L(n.l),u=V();n.expanded={},n.expanded.l=l([n.l,u]),F(n.expanded.l,t),T(n.expanded.l,t),n.expanded.r=l([n.r,u]),s&&(n.expandedNC1={},n.expandedNC1.l=l([o,n.l]),n.expandedNC1.r=l([o,n.r]),n.expandedNC2={},n.expandedNC2.l=l([o,n.expanded.l]),n.expandedNC2.r=l([o,n.expanded.r]))}return n}P.rules=[h,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},p,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},p,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];var K=0;function V(){return new E("_p"+K++)}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mc(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.consoleDebug;t=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=void 0,o=typeof i;switch(o){case"string":i={s:i};case"object":a=j(i,t);break;case"function":a=i;break;default:throw TypeError("Unsupported type of rule: "+o)}n.push(a)}return n}(t||P.rules,r.context);for(var a=d(e,n),o={},s=(a=q(a)).toString({parenthesis:"all"});!o[s];){o[s]=!0,K=0;var l=s;i&&console.log("Working on: ",s);for(var u=0;u<t.length;u++){var c="";if("function"===typeof t[u]?(a=t[u](a,r),i&&(c=t[u].name)):(F(a,r.context),a=H(a,t[u],r.context),i&&(c="".concat(t[u].l.toString()," -> ").concat(t[u].r.toString()))),i){var p=a.toString({parenthesis:"all"});p!==l&&(console.log("Applying",c,"produced",p),l=p)}B(a,r.context)}s=a.toString({parenthesis:"all"})}return a}function $(e,t,n){var r=e;if(e)for(var i=0;i<e.length;++i){var a=H(e[i],t,n);a!==e[i]&&(r===e&&(r=e.slice()),r[i]=a)}return r}function H(e,t,n){if(t.assuming)for(var r in t.assuming)for(var i in t.assuming[r])if(k(r,i,n)!==t.assuming[r][i])return e;var a=M(t.imposeContext,n),o=e;if(o instanceof S||o instanceof D){var s=$(o.args,t,n);s!==o.args&&((o=o.clone()).args=s)}else if(o instanceof C){if(o.content){var l=H(o.content,t,n);l!==o.content&&(o=new C(l))}}else if(o instanceof b){var u=$(o.items,t,n);u!==o.items&&(o=new b(u))}else if(o instanceof y){var c=o.object;o.object&&(c=H(o.object,t,n));var d=o.index;o.index&&(d=H(o.index,t,n)),c===o.object&&d===o.index||(o=new y(c,d))}else if(o instanceof w){var p=$(o.dimensions,t,n);p!==o.dimensions&&(o=new w(p))}else if(o instanceof _){var h=!1,f={};for(var m in o.properties)f[m]=H(o.properties[m],t,n),f[m]!==o.properties[m]&&(h=!0);h&&(o=new _(f))}var g=t.r,v=Z(t.l,o,a)[0];if(!v&&t.expanded&&(g=t.expanded.r,v=Z(t.expanded.l,o,a)[0]),!v&&t.expandedNC1&&(g=t.expandedNC1.r,(v=Z(t.expandedNC1.l,o,a)[0])||(g=t.expandedNC2.r,v=Z(t.expandedNC2.l,o,a)[0])),v){var x=o.implicit;o=g.clone(),x&&"implicit"in g&&(o.implicit=!0),o=o.transform((function(e){return e.isSymbolNode&&Lu(v.placeholders,e.name)?v.placeholders[e.name].clone():e}))}return t.repeat&&o!==e&&(o=H(o,t,n)),o}function W(e,t){var n={placeholders:{}};if(!e.placeholders&&!t.placeholders)return n;if(!e.placeholders)return t;if(!t.placeholders)return e;for(var r in e.placeholders)if(Lu(e.placeholders,r)&&(n.placeholders[r]=e.placeholders[r],Lu(t.placeholders,r)&&!J(e.placeholders[r],t.placeholders[r])))return null;for(var i in t.placeholders)Lu(t.placeholders,i)&&(n.placeholders[i]=t.placeholders[i]);return n}function G(e,t){var n,r=[];if(0===e.length||0===t.length)return r;for(var i=0;i<e.length;i++)for(var a=0;a<t.length;a++)(n=W(e[i],t[a]))&&r.push(n);return r}function Z(e,t,n,r){var i=[{placeholders:{}}];if(e instanceof S&&t instanceof S||e instanceof D&&t instanceof D){if(e instanceof S){if(e.op!==t.op||e.fn!==t.fn)return[]}else if(e instanceof D&&e.name!==t.name)return[];if(!(1===t.args.length&&1===e.args.length||!N(t,n)&&t.args.length===e.args.length||r)){if(t.args.length>=2&&2===e.args.length){for(var a=function(e,t){var n,r,i=[],a=L(e);if(A(e,t))for(var o=0;o<e.args.length;o++)(r=e.args.slice(0)).splice(o,1),n=1===r.length?r[0]:a(r),i.push(a([e.args[o],n]));else for(var s=1;s<e.args.length;s++){var l=e.args[0];s>1&&(l=a(e.args.slice(0,s))),n=1===(r=e.args.slice(s)).length?r[0]:a(r),i.push(a([l,n]))}return i}(t,n),o=[],s=0;s<a.length;s++){var l=Z(e,a[s],n,!0);o=o.concat(l)}return o}if(e.args.length>2)throw Error("Unexpected non-binary associative function: "+e.toString());return[]}for(var u=[],d=0;d<e.args.length;d++){var p=Z(e.args[d],t.args[d],n);if(0===p.length)break;u.push(p)}if(u.length!==e.args.length){if(!A(t,n)||1===e.args.length)return[];if(e.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var h=Z(e.args[0],t.args[1],n);if(0===h.length)return[];var f=Z(e.args[1],t.args[0],n);if(0===f.length)return[];u=[h,f]}i=function(e){if(0===e.length)return e;for(var t=e.reduce(G),n=[],r={},i=0;i<t.length;i++){var a=JSON.stringify(t[i]);r[a]||(r[a]=!0,n.push(t[i]))}return n}(u)}else if(e instanceof E){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(R[e.name]){if(e.name!==t.name)return[]}else switch(e.name[1]>="a"&&e.name[1]<="z"?e.name.substring(0,2):e.name[0]){case"n":case"_p":i[0].placeholders[e.name]=t;break;case"c":case"cl":if(!pu(t))return[];i[0].placeholders[e.name]=t;break;case"v":if(pu(t))return[];i[0].placeholders[e.name]=t;break;case"vl":if(!_u(t))return[];i[0].placeholders[e.name]=t;break;case"cd":if(!rC(t))return[];i[0].placeholders[e.name]=t;break;case"vd":if(rC(t))return[];i[0].placeholders[e.name]=t;break;case"ce":if(!iC(t))return[];i[0].placeholders[e.name]=t;break;case"ve":if(iC(t))return[];i[0].placeholders[e.name]=t;break;default:throw new Error("Invalid symbol in rule: "+e.name)}}else{if(!(e instanceof x))return[];if(!c(e.value,t.value))return[]}return i}function J(e,t){if(e instanceof x&&t instanceof x){if(!c(e.value,t.value))return!1}else if(e instanceof E&&t instanceof E){if(e.name!==t.name)return!1}else{if(!(e instanceof S&&t instanceof S||e instanceof D&&t instanceof D))return!1;if(e instanceof S){if(e.op!==t.op||e.fn!==t.fn)return!1}else if(e instanceof D&&e.name!==t.name)return!1;if(e.args.length!==t.args.length)return!1;for(var n=0;n<e.args.length;n++)if(!J(e.args[n],t.args[n]))return!1}return!0}return P})),uC=zu("simplifyConstant",["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],(e=>{var{typed:t,config:n,mathWithTransform:r,matrix:i,fraction:a,bignumber:o,AccessorNode:s,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:d,ObjectNode:p,OperatorNode:h,SymbolNode:f}=e,{isCommutative:m,isAssociative:g,allChildren:v,createMakeNodeFunction:y}=sC({FunctionNode:c,OperatorNode:h,SymbolNode:f}),b=t("simplifyConstant",{Node:e=>_(A(e,{})),"Node, Object":function(e,t){return _(A(e,t))}});function x(e){return Kl(e)?e.valueOf():e instanceof Array?e.map(x):Hl(e)?i(x(e.valueOf())):e}function D(e,t,n){try{return r[e].apply(null,t)}catch(i){return t=t.map(x),C(r[e].apply(null,t),n)}}var w=t({Fraction:function(e){var t,n=e.s*e.n;t=n<0?new h("-","unaryMinus",[new u(-n)]):new u(n);if(1===e.d)return t;return new h("/","divide",[t,new u(e.d)])},number:function(e){return e<0?E(new u(-e)):new u(e)},BigNumber:function(e){return e<0?E(new u(-e)):new u(e)},Complex:function(e){throw new Error("Cannot convert Complex number to Node")},string:function(e){return new u(e)},Matrix:function(e){return new l(e.valueOf().map((e=>w(e))))}});function _(e){return vu(e)?e:w(e)}function S(e,t){if(t&&!1!==t.exactFractions&&isFinite(e)&&a){var n=a(e),r=t&&"number"===typeof t.fractionsLimit?t.fractionsLimit:1/0;if(n.valueOf()===e&&n.n<r&&n.d<r)return n}return e}var C=t({"string, Object":function(e,t){return"BigNumber"===n.number?(void 0===o&&Ev(),o(e)):"Fraction"===n.number?(void 0===a&&kv(),a(e)):S(parseFloat(e),t)},"Fraction, Object":function(e,t){return e},"BigNumber, Object":function(e,t){return e},"number, Object":function(e,t){return S(e,t)},"Complex, Object":function(e,t){return 0!==e.im?e:S(e.re,t)},"Matrix, Object":function(e,t){return i(S(e.valueOf()))},"Array, Object":function(e,t){return e.map(S)}});function E(e){return new h("-","unaryMinus",[e])}function k(e,t,n,r){var i=t.shift(),a=t.reduce(((t,i)=>{if(!vu(i)){var a=t.pop();if(vu(a))return[a,i];try{return t.push(D(e,[a,i],r)),t}catch(s){t.push(a)}}t.push(_(t.pop()));var o=1===t.length?t[0]:n(t);return[n([o,_(i)])]}),[i]);return 1===a.length?a[0]:n([a[0],w(a[1])])}function A(e,t){switch(e.type){case"SymbolNode":return e;case"ConstantNode":switch(typeof e.value){case"number":return C(e.value,t);case"string":return e.value;default:if(!isNaN(e.value))return C(e.value,t)}return e;case"FunctionNode":if(r[e.name]&&r[e.name].rawArgs)return e;if(!["add","multiply"].includes(e.name)){var n=e.args.map((e=>A(e,t)));if(!n.some(vu))try{return D(e.name,n,t)}catch(B){}if("size"===e.name&&1===n.length&&lu(n[0])){for(var a=[],o=n[0];lu(o);)a.push(o.items.length),o=o.items[0];return i(a)}return new c(e.name,n.map(_))}case"OperatorNode":var h,f,x=e.fn.toString(),w=y(e);if(bu(e)&&e.isUnary())f=vu((h=[A(e.args[0],t)])[0])?w(h):D(x,h,t);else if(g(e,t.context))if(h=(h=v(e,t.context)).map((e=>A(e,t))),m(x,t.context)){for(var S=[],E=[],N=0;N<h.length;N++)vu(h[N])?E.push(h[N]):S.push(h[N]);S.length>1?(f=k(x,S,w,t),E.unshift(f),f=k(x,E,w,t)):f=k(x,h,w,t)}else f=k(x,h,w,t);else f=k(x,h=e.args.map((e=>A(e,t))),w,t);return f;case"ParenthesisNode":return A(e.content,t);case"AccessorNode":return function(e,t,n){if(!gu(t))return new s(_(e),_(t));if(lu(e)||Hl(e)){for(var r=Array.from(t.dimensions);r.length>0;)if(pu(r[0])&&"string"!==typeof r[0].value){var a=C(r.shift().value,n);lu(e)?e=e.items[a-1]:(e=e.valueOf()[a-1])instanceof Array&&(e=i(e))}else{if(!(r.length>1&&pu(r[1])&&"string"!==typeof r[1].value))break;var o=C(r[1].value,n),c=[],p=lu(e)?e.items:e.valueOf();for(var h of p)if(lu(h))c.push(h.items[o-1]);else{if(!Hl(e))break;c.push(h[o-1])}if(c.length!==p.length)break;e=lu(e)?new l(c):i(c),r.splice(1,1)}return r.length===t.dimensions.length?new s(_(e),t):r.length>0?(t=new d(r),new s(_(e),t)):e}if(yu(e)&&1===t.dimensions.length&&pu(t.dimensions[0])){var f=t.dimensions[0].value;return f in e.properties?e.properties[f]:new u}return new s(_(e),t)}(A(e.object,t),A(e.index,t),t);case"ArrayNode":var M=e.items.map((e=>A(e,t)));return M.some(vu)?new l(M.map(_)):i(M);case"IndexNode":return new d(e.dimensions.map((e=>b(e,t))));case"ObjectNode":var F={};for(var T in e.properties)F[T]=b(e.properties[T],t);return new p(F);default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(e.type))}}return b})),cC="simplifyCore",dC=zu(cC,["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],(e=>{var{typed:t,parse:n,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:l,pow:u,AccessorNode:c,ArrayNode:d,ConstantNode:p,FunctionNode:h,IndexNode:f,ObjectNode:m,OperatorNode:g,ParenthesisNode:v,SymbolNode:y}=e,b=new p(0),x=new p(1),D=new p(!0),w=new p(!1);function _(e){return bu(e)&&["and","not","or"].includes(e.op)}var{hasProperty:S,isCommutative:C}=sC({FunctionNode:h,OperatorNode:g,SymbolNode:y});function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t?t.context:void 0;if(S(e,"trivial",n)){if(mu(e)&&1===e.args.length)return E(e.args[0],t);var a=!1,o=0;if(e.forEach((e=>{1===++o&&(a=E(e,t))})),1===o)return a}var s=e;if(mu(s)){var l=function(e){var t="OperatorNode:"+e;for(var n of tw)if(t in n)return n[t].op;return null}(s.name);if(!l)return new h(E(s.fn),s.args.map((e=>E(e,t))));if(s.args.length>2&&S(s,"associative",n))for(;s.args.length>2;){var u=s.args.pop(),p=s.args.pop();s.args.push(new g(l,s.name,[u,p]))}s=new g(l,s.name,s.args)}if(bu(s)&&s.isUnary()){var v=E(s.args[0],t);if("~"===s.op&&bu(v)&&v.isUnary()&&"~"===v.op)return v.args[0];if("not"===s.op&&bu(v)&&v.isUnary()&&"not"===v.op&&_(v.args[0]))return v.args[0];var y=!0;if("-"===s.op&&bu(v)&&(v.isBinary()&&"subtract"===v.fn&&(s=new g("-","subtract",[v.args[1],v.args[0]]),y=!1),v.isUnary()&&"-"===v.op))return v.args[0];if(y)return new g(s.op,s.fn,[v])}if(bu(s)&&s.isBinary()){var k=E(s.args[0],t),A=E(s.args[1],t);if("+"===s.op){if(pu(k)&&i(k.value))return A;if(pu(A)&&i(A.value))return k;bu(A)&&A.isUnary()&&"-"===A.op&&(A=A.args[0],s=new g("-","subtract",[k,A]))}if("-"===s.op)return bu(A)&&A.isUnary()&&"-"===A.op?E(new g("+","add",[k,A.args[0]]),t):pu(k)&&i(k.value)?E(new g("-","unaryMinus",[A])):pu(A)&&i(A.value)?k:new g(s.op,s.fn,[k,A]);if("*"===s.op){if(pu(k)){if(i(k.value))return b;if(r(k.value,1))return A}if(pu(A)){if(i(A.value))return b;if(r(A.value,1))return k;if(C(s,n))return new g(s.op,s.fn,[A,k],s.implicit)}return new g(s.op,s.fn,[k,A],s.implicit)}if("/"===s.op)return pu(k)&&i(k.value)?b:pu(A)&&r(A.value,1)?k:new g(s.op,s.fn,[k,A]);if("^"===s.op&&pu(A)){if(i(A.value))return x;if(r(A.value,1))return k}if("and"===s.op){if(pu(k)){if(!k.value)return w;if(_(A))return A;if(pu(A))return A.value?D:w}if(pu(A)){if(!A.value)return w;if(_(k))return k}}if("or"===s.op){if(pu(k)){if(k.value)return D;if(_(A))return A}if(pu(A)){if(A.value)return D;if(_(k))return k}}return new g(s.op,s.fn,[k,A])}if(bu(s))return new g(s.op,s.fn,s.args.map((e=>E(e,t))));if(lu(s))return new d(s.items.map((e=>E(e,t))));if(su(s))return new c(E(s.object,t),E(s.index,t));if(gu(s))return new f(s.dimensions.map((e=>E(e,t))));if(yu(s)){var N={};for(var M in s.properties)N[M]=E(s.properties[M],t);return new m(N)}return s}return t(cC,{Node:E,"Node,Object":E})})),pC=zu("resolve",["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],(e=>{var{typed:t,parse:n,ConstantNode:r,FunctionNode:i,OperatorNode:a,ParenthesisNode:o}=e;function s(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(!t)return e;if(_u(e)){if(l.has(e.name)){var u=Array.from(l).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(u,"}"))}var c=t.get(e.name);if(vu(c)){var d=new Set(l);return d.add(e.name),s(c,t,d)}return"number"===typeof c?n(String(c)):void 0!==c?new r(c):e}if(bu(e)){var p=e.args.map((function(e){return s(e,t,l)}));return new a(e.op,e.fn,p,e.implicit)}if(xu(e))return new o(s(e.content,t,l));if(mu(e)){var h=e.args.map((function(e){return s(e,t,l)}));return new i(e.name,h)}return e.map((e=>s(e,t,l)))}return t("resolve",{Node:s,"Node, Map | null | undefined":s,"Node, Object":(e,t)=>s(e,Fc(t)),"Array | Matrix":t.referToSelf((e=>t=>t.map((t=>e(t))))),"Array | Matrix, null | undefined":t.referToSelf((e=>t=>t.map((t=>e(t))))),"Array, Object":t.referTo("Array,Map",(e=>(t,n)=>e(t,Fc(n)))),"Matrix, Object":t.referTo("Matrix,Map",(e=>(t,n)=>e(t,Fc(n)))),"Array | Matrix, Map":t.referToSelf((e=>(t,n)=>t.map((t=>e(t,n)))))})})),hC="symbolicEqual",fC=zu(hC,["parse","simplify","typed","OperatorNode"],(e=>{var{parse:t,simplify:n,typed:r,OperatorNode:i}=e;function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new i("-","subtract",[e,t]),o=n(a,{},r);return pu(o)&&!o.value}return r(hC,{"Node, Node":a,"Node, Node, Object":a})})),mC="derivative",gC=zu(mC,["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],(e=>{var{typed:t,config:n,parse:r,simplify:i,equal:a,isZero:o,numeric:s,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:d,SymbolNode:p}=e;function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{simplify:!0},r={};g(r,e,t.name);var a=v(e,r);return n.simplify?i(a):a}t.addConversion({from:"identifier",to:"SymbolNode",convert:r});var f=t(mC,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h});t.removeConversion({from:"identifier",to:"SymbolNode",convert:r}),f._simplify=!0,f.toTex=function(e){return m.apply(null,e.args)};var m=t("_derivTex",{"Node, SymbolNode":function(e,t){return pu(e)&&"string"===Cu(e.value)?m(r(e.value).toString(),t.toString(),1):m(e.toTex(),t.toString(),1)},"Node, ConstantNode":function(e,t){if("string"===Cu(t.value))return m(e,r(t.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(e,t,n){return m(e.toString(),t.name,n.value)},"string, string, number":function(e,t,n){return(1===n?"{d\\over d"+t+"}":"{d^{"+n+"}\\over d"+t+"^{"+n+"}}")+"\\left[".concat(e,"\\right]")}}),g=t("constTag",{"Object, ConstantNode, string":function(e,t){return e[t]=!0,!0},"Object, SymbolNode, string":function(e,t,n){return t.name!==n&&(e[t]=!0,!0)},"Object, ParenthesisNode, string":function(e,t,n){return g(e,t.content,n)},"Object, FunctionAssignmentNode, string":function(e,t,n){return t.params.includes(n)?g(e,t.expr,n):(e[t]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(e,t,n){if(t.args.length>0){for(var r=g(e,t.args[0],n),i=1;i<t.args.length;++i)r=g(e,t.args[i],n)&&r;if(r)return e[t]=!0,!0}return!1}}),v=t("_derivative",{"ConstantNode, Object":function(e){return y(0)},"SymbolNode, Object":function(e,t){return void 0!==t[e]?y(0):y(1)},"ParenthesisNode, Object":function(e,t){return new d(v(e.content,t))},"FunctionAssignmentNode, Object":function(e,t){return void 0!==t[e]?y(0):v(e.expr,t)},"FunctionNode, Object":function(e,t){if(void 0!==t[e])return y(0);var n,r,i,a,o=e.args[0],s=!1,l=!1;switch(e.name){case"cbrt":s=!0,r=new c("*","multiply",[y(3),new c("^","pow",[o,new c("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(1===e.args.length)s=!0,r=new c("*","multiply",[y(2),new u("sqrt",[o])]);else if(2===e.args.length)return t[n=new c("/","divide",[y(1),e.args[1]])]=t[e.args[1]],v(new c("^","pow",[o,n]),t);break;case"log10":n=y(10);case"log":if(n||1!==e.args.length){if(1===e.args.length&&n||2===e.args.length&&void 0!==t[e.args[1]])r=new c("*","multiply",[o.clone(),new u("log",[n||e.args[1]])]),s=!0;else if(2===e.args.length)return v(new c("/","divide",[new u("log",[o]),new u("log",[e.args[1]])]),t)}else r=o.clone(),s=!0;break;case"pow":if(2===e.args.length)return t[n]=t[e.args[1]],v(new c("^","pow",[o,e.args[1]]),t);break;case"exp":r=new u("exp",[o.clone()]);break;case"sin":r=new u("cos",[o.clone()]);break;case"cos":r=new c("-","unaryMinus",[new u("sin",[o.clone()])]);break;case"tan":r=new c("^","pow",[new u("sec",[o.clone()]),y(2)]);break;case"sec":r=new c("*","multiply",[e,new u("tan",[o.clone()])]);break;case"csc":l=!0,r=new c("*","multiply",[e,new u("cot",[o.clone()])]);break;case"cot":l=!0,r=new c("^","pow",[new u("csc",[o.clone()]),y(2)]);break;case"asin":s=!0,r=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])])]);break;case"acos":s=!0,l=!0,r=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])])]);break;case"atan":s=!0,r=new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)]);break;case"asec":s=!0,r=new c("*","multiply",[new u("abs",[o.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),y(2)]),y(1)])])]);break;case"acsc":s=!0,l=!0,r=new c("*","multiply",[new u("abs",[o.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),y(2)]),y(1)])])]);break;case"acot":s=!0,l=!0,r=new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)]);break;case"sinh":r=new u("cosh",[o.clone()]);break;case"cosh":r=new u("sinh",[o.clone()]);break;case"tanh":r=new c("^","pow",[new u("sech",[o.clone()]),y(2)]);break;case"sech":l=!0,r=new c("*","multiply",[e,new u("tanh",[o.clone()])]);break;case"csch":l=!0,r=new c("*","multiply",[e,new u("coth",[o.clone()])]);break;case"coth":l=!0,r=new c("^","pow",[new u("csch",[o.clone()]),y(2)]);break;case"asinh":s=!0,r=new u("sqrt",[new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)])]);break;case"acosh":s=!0,r=new u("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),y(2)]),y(1)])]);break;case"atanh":s=!0,r=new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])]);break;case"asech":s=!0,l=!0,r=new c("*","multiply",[o.clone(),new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])])])]);break;case"acsch":s=!0,l=!0,r=new c("*","multiply",[new u("abs",[o.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)])])]);break;case"acoth":s=!0,l=!0,r=new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])]);break;case"abs":r=new c("/","divide",[new u(new p("abs"),[o.clone()]),o.clone()]);break;default:throw new Error('Cannot process function "'+e.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}s?(i="/",a="divide"):(i="*",a="multiply");var d=v(o,t);return l&&(d=new c("-","unaryMinus",[d])),new c(i,a,[d,r])},"OperatorNode, Object":function(e,t){if(void 0!==t[e])return y(0);if("+"===e.op)return new c(e.op,e.fn,e.args.map((function(e){return v(e,t)})));if("-"===e.op){if(e.isUnary())return new c(e.op,e.fn,[v(e.args[0],t)]);if(e.isBinary())return new c(e.op,e.fn,[v(e.args[0],t),v(e.args[1],t)])}if("*"===e.op){var n=e.args.filter((function(e){return void 0!==t[e]}));if(n.length>0){var r=e.args.filter((function(e){return void 0===t[e]})),i=1===r.length?r[0]:new c("*","multiply",r),s=n.concat(v(i,t));return new c("*","multiply",s)}return new c("+","add",e.args.map((function(n){return new c("*","multiply",e.args.map((function(e){return e===n?v(e,t):e.clone()})))})))}if("/"===e.op&&e.isBinary()){var l=e.args[0],d=e.args[1];return void 0!==t[d]?new c("/","divide",[v(l,t),d]):void 0!==t[l]?new c("*","multiply",[new c("-","unaryMinus",[l]),new c("/","divide",[v(d,t),new c("^","pow",[d.clone(),y(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[v(l,t),d.clone()]),new c("*","multiply",[l.clone(),v(d,t)])]),new c("^","pow",[d.clone(),y(2)])])}if("^"===e.op&&e.isBinary()){var p=e.args[0],h=e.args[1];if(void 0!==t[p])return pu(p)&&(o(p.value)||a(p.value,1))?y(0):new c("*","multiply",[e,new c("*","multiply",[new u("log",[p.clone()]),v(h.clone(),t)])]);if(void 0!==t[h]){if(pu(h)){if(o(h.value))return y(0);if(a(h.value,1))return v(p,t)}var f=new c("^","pow",[p.clone(),new c("-","subtract",[h,y(1)])]);return new c("*","multiply",[h.clone(),new c("*","multiply",[v(p,t),f])])}return new c("*","multiply",[new c("^","pow",[p.clone(),h.clone()]),new c("+","add",[new c("*","multiply",[v(p,t),new c("/","divide",[h.clone(),p.clone()])]),new c("*","multiply",[v(h,t),new u("log",[p.clone()])])])])}throw new Error('Cannot process operator "'+e.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function y(e,t){return new l(s(e,t||n.number))}return f})),vC="rationalize",yC=zu(vC,["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],(e=>{var{config:t,typed:n,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:l,pow:u,parse:c,simplifyConstant:d,simplifyCore:p,simplify:h,fraction:f,bignumber:m,mathWithTransform:g,matrix:v,AccessorNode:y,ArrayNode:b,ConstantNode:x,FunctionNode:D,IndexNode:w,ObjectNode:_,OperatorNode:S,SymbolNode:C,ParenthesisNode:E}=e;function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(){var e=[p,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},d,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],t=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],n=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],r=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],i={};return i.firstRules=e.concat(t,r),i.distrDivRules=n,i.sucDivRules=r,i.firstRulesAgain=e.concat(t),i.finalRules=[p,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},d,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],i}(),i=function(e,t,n,r){var i=[],a=h(e,r,t,{exactFractions:!1}),o="+-*"+((n=!!n)?"/":"");l(a);var s={};return s.expression=a,s.variables=i,s;function l(e){var t=e.type;if("FunctionNode"===t)throw new Error("There is an unsolved function call");if("OperatorNode"===t)if("^"===e.op){if("ConstantNode"!==e.args[1].type||!Zu(parseFloat(e.args[1].value)))throw new Error("There is a non-integer exponent");l(e.args[0])}else{if(!o.includes(e.op))throw new Error("Operator "+e.op+" invalid in polynomial expression");for(var n=0;n<e.args.length;n++)l(e.args[n])}else if("SymbolNode"===t){var r=e.name;-1===i.indexOf(r)&&i.push(r)}else if("ParenthesisNode"===t)l(e.content);else if("ConstantNode"!==t)throw new Error("type "+t+" is not allowed in polynomial expression")}}(e,t,!0,r.firstRules),a=i.variables.length,o={exactFractions:!1},s={exactFractions:!0};if(e=i.expression,a>=1){var l,u;e=A(e);var c,f=!0,m=!1;for(e=h(e,r.firstRules,{},o);u=f?r.distrDivRules:r.sucDivRules,f=!f,(c=(e=h(e,u,{},s)).toString())!==l;)m=!0,l=c;m&&(e=h(e,r.firstRulesAgain,{},o)),e=h(e,r.finalRules,{},o)}var g=[],v={};return"OperatorNode"===e.type&&e.isBinary()&&"/"===e.op?(1===a&&(e.args[0]=N(e.args[0],g),e.args[1]=N(e.args[1])),n&&(v.numerator=e.args[0],v.denominator=e.args[1])):(1===a&&(e=N(e,g)),n&&(v.numerator=e,v.denominator=null)),n?(v.coefficients=g,v.variables=i.variables,v.expression=e,v):e}return n(vC,{Node:k,"Node, boolean":(e,t)=>k(e,{},t),"Node, Object":k,"Node, Object, boolean":k});function A(e,t,n){var r=e.type,i=arguments.length>1;if("OperatorNode"===r&&e.isBinary()){var a,o=!1;if("^"===e.op&&("ParenthesisNode"!==e.args[0].type&&"OperatorNode"!==e.args[0].type||"ConstantNode"!==e.args[1].type||(o=(a=parseFloat(e.args[1].value))>=2&&Zu(a))),o){if(a>2){var s=e.args[0],l=new S("^","pow",[e.args[0].cloneDeep(),new x(a-1)]);e=new S("*","multiply",[s,l])}else e=new S("*","multiply",[e.args[0],e.args[0].cloneDeep()]);i&&("content"===n?t.content=e:t.args[n]=e)}}if("ParenthesisNode"===r)A(e.content,e,"content");else if("ConstantNode"!==r&&"SymbolNode"!==r)for(var u=0;u<e.args.length;u++)A(e.args[u],e,u);if(!i)return e}function N(e,t){void 0===t&&(t=[]),t[0]=0;var n={cte:1,oper:"+",fire:""},r=0,i="";!function e(n,a,o){var s=n.type;if("FunctionNode"===s)throw new Error("There is an unsolved function call");if("OperatorNode"===s){if(!"+-*^".includes(n.op))throw new Error("Operator "+n.op+" invalid");if(null!==a){if(("unaryMinus"===n.fn||"pow"===n.fn)&&"add"!==a.fn&&"subtract"!==a.fn&&"multiply"!==a.fn)throw new Error("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"multiply"===n.fn)&&"add"!==a.fn&&"subtract"!==a.fn)throw new Error("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"unaryMinus"===n.fn)&&0!==o.noFil)throw new Error("Invalid "+n.op+" placing")}"^"!==n.op&&"*"!==n.op||(o.fire=n.op);for(var l=0;l<n.args.length;l++)"unaryMinus"===n.fn&&(o.oper="-"),"+"!==n.op&&"subtract"!==n.fn||(o.fire="",o.cte=1,o.oper=0===l?"+":n.op),o.noFil=l,e(n.args[l],n,o)}else if("SymbolNode"===s){if(n.name!==i&&""!==i)throw new Error("There is more than one variable");if(i=n.name,null===a)return void(t[1]=1);if("^"===a.op&&0!==o.noFil)throw new Error("In power the variable should be the first parameter");if("*"===a.op&&1!==o.noFil)throw new Error("In multiply the variable should be the second parameter");""!==o.fire&&"*"!==o.fire||(r<1&&(t[1]=0),t[1]+=o.cte*("+"===o.oper?1:-1),r=Math.max(1,r))}else{if("ConstantNode"!==s)throw new Error("Type "+s+" is not allowed");var u=parseFloat(n.value);if(null===a)return void(t[0]=u);if("^"===a.op){if(1!==o.noFil)throw new Error("Constant cannot be powered");if(!Zu(u)||u<=0)throw new Error("Non-integer exponent is not allowed");for(var c=r+1;c<u;c++)t[c]=0;return u>r&&(t[u]=0),t[u]+=o.cte*("+"===o.oper?1:-1),void(r=Math.max(u,r))}o.cte=u,""===o.fire&&(t[0]+=o.cte*("+"===o.oper?1:-1))}}(e,null,n);for(var a,o=!0,s=r=t.length-1;s>=0;s--)if(0!==t[s]){var l=new x(o?t[s]:Math.abs(t[s])),u=t[s]<0?"-":"+";if(s>0){var c=new C(i);if(s>1){var d=new x(s);c=new S("^","pow",[c,d])}l=-1===t[s]&&o?new S("-","unaryMinus",[c]):1===Math.abs(t[s])?c:new S("*","multiply",[l,c])}a=o?l:"+"===u?new S("+","add",[a,l]):new S("-","subtract",[a,l]),o=!1}return o?new x(0):a}})),bC="zpk2tf",xC=zu(bC,["typed","add","multiply","Complex","number"],(e=>{var{typed:t,add:n,multiply:r,Complex:i,number:a}=e;return t(bC,{"Array,Array,number":function(e,t,n){return o(e,t,n)},"Array,Array":function(e,t){return o(e,t,1)},"Matrix,Matrix,number":function(e,t,n){return o(e.valueOf(),t.valueOf(),n)},"Matrix,Matrix":function(e,t){return o(e.valueOf(),t.valueOf(),1)}});function o(e,t,n){e.some((e=>"BigNumber"===e.type))&&(e=e.map((e=>a(e)))),t.some((e=>"BigNumber"===e.type))&&(t=t.map((e=>a(e))));for(var o=[i(1,0)],l=[i(1,0)],u=0;u<e.length;u++){var c=e[u];"number"===typeof c&&(c=i(c,0)),o=s(o,[i(1,0),i(-c.re,-c.im)])}for(var d=0;d<t.length;d++){var p=t[d];"number"===typeof p&&(p=i(p,0)),l=s(l,[i(1,0),i(-p.re,-p.im)])}for(var h=0;h<o.length;h++)o[h]=r(o[h],n);return[o,l]}function s(e,t){for(var a=[],o=0;o<e.length+t.length-1;o++){a[o]=i(0,0);for(var s=0;s<e.length;s++)o-s>=0&&o-s<t.length&&(a[o]=n(a[o],r(e[s],t[o-s])))}return a}})),DC="freqz",wC=zu(DC,["typed","add","multiply","Complex","divide","matrix"],(e=>{var{typed:t,add:n,multiply:r,Complex:i,divide:a,matrix:o}=e;return t(DC,{"Array, Array":function(e,t){return s(e,t,l(512))},"Array, Array, Array":function(e,t,n){return s(e,t,n)},"Array, Array, number":function(e,t,n){if(n<0)throw new Error("w must be a positive number");return s(e,t,l(n))},"Matrix, Matrix":function(e,t){var n=l(512),{w:r,h:i}=s(e.valueOf(),t.valueOf(),n);return{w:o(r),h:o(i)}},"Matrix, Matrix, Matrix":function(e,t,n){var{h:r}=s(e.valueOf(),t.valueOf(),n.valueOf());return{h:o(r),w:o(n)}},"Matrix, Matrix, number":function(e,t,n){if(n<0)throw new Error("w must be a positive number");var r=l(n),{h:i}=s(e.valueOf(),t.valueOf(),r);return{h:o(i),w:o(r)}}});function s(e,t,o){for(var s=[],l=[],u=0;u<o.length;u++){for(var c=i(0,0),d=i(0,0),p=0;p<e.length;p++)c=n(c,r(e[p],i(Math.cos(-p*o[u]),Math.sin(-p*o[u]))));for(var h=0;h<t.length;h++)d=n(d,r(t[h],i(Math.cos(-h*o[u]),Math.sin(-h*o[u]))));s.push(c),l.push(d)}for(var f=[],m=0;m<s.length;m++)f.push(a(s[m],l[m]));return{h:f,w:o}}function l(e){for(var t=[],n=0;n<e;n++)t.push(n/e*Math.PI);return t}})),_C=zu("reviver",["classes"],(e=>{var{classes:t}=e;return function(e,n){var r=t[n&&n.mathjs];return r&&"function"===typeof r.fromJSON?r.fromJSON(n):n}})),SC=zu("replacer",[],(()=>function(e,t){return"number"!==typeof t||isFinite(t)&&!isNaN(t)?t:{mathjs:"number",value:String(t)}})),CC=Math.PI,EC=2*Math.PI,kC=Math.E,AC=zu("true",[],(()=>!0)),NC=zu("false",[],(()=>!1)),MC=zu("null",[],(()=>null)),FC=WC("Infinity",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(1/0):1/0})),TC=WC("NaN",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(NaN):NaN})),BC=WC("pi",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?tx(n):CC})),LC=WC("tau",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?nx(n):EC})),OC=WC("e",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?Qb(n):kC})),zC=WC("phi",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?ex(n):1.618033988749895})),IC=WC("LN2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(2).ln():Math.LN2})),PC=WC("LN10",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(10).ln():Math.LN10})),qC=WC("LOG2E",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(1).div(new n(2).ln()):Math.LOG2E})),RC=WC("LOG10E",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(1).div(new n(10).ln()):Math.LOG10E})),jC=WC("SQRT1_2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n("0.5").sqrt():Math.SQRT1_2})),KC=WC("SQRT2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(2).sqrt():Math.SQRT2})),VC=WC("i",["Complex"],(e=>{var{Complex:t}=e;return t.I})),UC=zu("PI",["pi"],(e=>{var{pi:t}=e;return t})),$C=zu("E",["e"],(e=>{var{e:t}=e;return t})),HC=zu("version",[],(()=>"12.4.3"));function WC(e,t,n){return zu(e,t,n,{recreateOnConfigChange:!0})}var GC=UE("speedOfLight","299792458","m s^-1"),ZC=UE("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),JC=UE("planckConstant","6.62607015e-34","J s"),XC=UE("reducedPlanckConstant","1.0545718176461565e-34","J s"),YC=UE("magneticConstant","1.25663706212e-6","N A^-2"),QC=UE("electricConstant","8.8541878128e-12","F m^-1"),eE=UE("vacuumImpedance","376.730313667","ohm"),tE=UE("coulomb","8.987551792261171e9","N m^2 C^-2"),nE=UE("elementaryCharge","1.602176634e-19","C"),rE=UE("bohrMagneton","9.2740100783e-24","J T^-1"),iE=UE("conductanceQuantum","7.748091729863649e-5","S"),aE=UE("inverseConductanceQuantum","12906.403729652257","ohm"),oE=UE("magneticFluxQuantum","2.0678338484619295e-15","Wb"),sE=UE("nuclearMagneton","5.0507837461e-27","J T^-1"),lE=UE("klitzing","25812.807459304513","ohm"),uE=UE("bohrRadius","5.29177210903e-11","m"),cE=UE("classicalElectronRadius","2.8179403262e-15","m"),dE=UE("electronMass","9.1093837015e-31","kg"),pE=UE("fermiCoupling","1.1663787e-5","GeV^-2"),hE=$E("fineStructure",.0072973525693),fE=UE("hartreeEnergy","4.3597447222071e-18","J"),mE=UE("protonMass","1.67262192369e-27","kg"),gE=UE("deuteronMass","3.3435830926e-27","kg"),vE=UE("neutronMass","1.6749271613e-27","kg"),yE=UE("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),bE=UE("rydberg","10973731.568160","m^-1"),xE=UE("thomsonCrossSection","6.6524587321e-29","m^2"),DE=$E("weakMixingAngle",.2229),wE=$E("efimovFactor",22.7),_E=UE("atomicMass","1.66053906660e-27","kg"),SE=UE("avogadro","6.02214076e23","mol^-1"),CE=UE("boltzmann","1.380649e-23","J K^-1"),EE=UE("faraday","96485.33212331001","C mol^-1"),kE=UE("firstRadiation","3.7417718521927573e-16","W m^2"),AE=UE("loschmidt","2.686780111798444e25","m^-3"),NE=UE("gasConstant","8.31446261815324","J K^-1 mol^-1"),ME=UE("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),FE=UE("molarVolume","0.022413969545014137","m^3 mol^-1"),TE=$E("sackurTetrode",-1.16487052358),BE=UE("secondRadiation","0.014387768775039337","m K"),LE=UE("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),OE=UE("wienDisplacement","2.897771955e-3","m K"),zE=UE("molarMass","0.99999999965e-3","kg mol^-1"),IE=UE("molarMassC12","11.9999999958e-3","kg mol^-1"),PE=UE("gravity","9.80665","m s^-2"),qE=UE("planckLength","1.616255e-35","m"),RE=UE("planckMass","2.176435e-8","kg"),jE=UE("planckTime","5.391245e-44","s"),KE=UE("planckCharge","1.87554603778e-18","C"),VE=UE("planckTemperature","1.416785e+32","K");function UE(e,t,n){return zu(e,["config","Unit","BigNumber"],(e=>{var{config:r,Unit:i,BigNumber:a}=e,o=new i("BigNumber"===r.number?new a(t):parseFloat(t),n);return o.fixPrefix=!0,o}))}function $E(e,t){return zu(e,["config","BigNumber"],(e=>{var{config:n,BigNumber:r}=e;return"BigNumber"===n.number?new r(t):t}))}var HE=zu("apply",["typed","isInteger"],(e=>{var{typed:t,isInteger:n}=e,r=Qf({typed:t,isInteger:n});return t("apply",{"...any":function(e){var t=e[1];ql(t)?e[1]=t-1:Rl(t)&&(e[1]=t.minus(1));try{return r.apply(null,e)}catch(n){throw ZD(n)}}})}),{isTransformFunction:!0}),WE=zu("column",["typed","Index","matrix","range"],(e=>{var{typed:t,Index:n,matrix:r,range:i}=e,a=ev({typed:t,Index:n,matrix:r,range:i});return t("column",{"...any":function(e){var t=e.length-1,n=e[t];ql(n)&&(e[t]=n-1);try{return a.apply(null,e)}catch(r){throw ZD(r)}}})}),{isTransformFunction:!0});function GE(e,t,n){var r=e.filter((function(e){return _u(e)&&!(e.name in t)&&!n.has(e.name)}))[0];if(!r)throw new Error('No undefined variable found in inline expression "'+e+'"');var i=r.name,a=new Map,o=new Ac(n,a,new Set([i])),s=e.compile();return function(e){return a.set(i,e),s.evaluate(o)}}var ZE=zu("filter",["typed"],(e=>{var{typed:t}=e;function n(e,t,n){var i,a;return e[0]&&(i=e[0].compile().evaluate(n)),e[1]&&(a=_u(e[1])||fu(e[1])?e[1].compile().evaluate(n):GE(e[1],t,n)),r(i,a)}n.rawArgs=!0;var r=t("filter",{"Array, function":JE,"Matrix, function":function(e,t){return e.create(JE(e.toArray(),t))},"Array, RegExp":ph,"Matrix, RegExp":function(e,t){return e.create(ph(e.toArray(),t))}});return n}),{isTransformFunction:!0});function JE(e,t){return dh(e,(function(e,n,r){return sv(t,e,[n+1],r,"filter")}))}var XE=zu("forEach",["typed"],(e=>{var{typed:t}=e;function n(e,t,n){var i,a;return e[0]&&(i=e[0].compile().evaluate(n)),e[1]&&(a=_u(e[1])||fu(e[1])?e[1].compile().evaluate(n):GE(e[1],t,n)),r(i,a)}n.rawArgs=!0;var r=t("forEach",{"Array | Matrix, function":function(e,t){!function n(r,i){if(!Array.isArray(r))return sv(t,r,i,e,"forEach");ch(r,(function(e,t){n(e,i.concat(t+1))}))}(e.valueOf(),[])}});return n}),{isTransformFunction:!0}),YE=zu("index",["Index","getMatrixDataType"],(e=>{var{Index:t,getMatrixDataType:n}=e;return function(){for(var e=[],r=0,i=arguments.length;r<i;r++){var a=arguments[r];if(Jl(a))a.start--,a.end-=a.step>0?0:2;else if(a&&!0===a.isSet)a=a.map((function(e){return e-1}));else if($l(a)||Hl(a))"boolean"!==n(a)&&(a=a.map((function(e){return e-1})));else if(ql(a))a--;else if(Rl(a))a=a.toNumber()-1;else if("string"!==typeof a)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[r]=a}var o=new t;return t.apply(o,e),o}}),{isTransformFunction:!0}),QE=zu("map",["typed"],(e=>{var{typed:t}=e;function n(e,t,n){var i,a;return e[0]&&(i=e[0].compile().evaluate(n)),e[1]&&(a=_u(e[1])||fu(e[1])?e[1].compile().evaluate(n):GE(e[1],t,n)),r(i,a)}n.rawArgs=!0;var r=t("map",{"Array, function":function(e,t){return ek(e,t,e)},"Matrix, function":function(e,t){return e.create(ek(e.valueOf(),t,e))}});return n}),{isTransformFunction:!0});function ek(e,t,n){return function e(r,i){return Array.isArray(r)?uh(r,(function(t,n){return e(t,i.concat(n+1))})):sv(t,r,i,n,"map")}(e,[])}function tk(e){if(2===e.length&&Wl(e[0])){var t=(e=e.slice())[1];ql(t)?e[1]=t-1:Rl(t)&&(e[1]=t.minus(1))}return e}var nk,rk=zu("max",["typed","config","numeric","larger"],(e=>{var{typed:t,config:n,numeric:r,larger:i}=e,a=Hb({typed:t,config:n,numeric:r,larger:i});return t("max",{"...any":function(e){e=tk(e);try{return a.apply(null,e)}catch(t){throw ZD(t)}}})}),{isTransformFunction:!0}),ik=zu("mean",["typed","add","divide"],(e=>{var{typed:t,add:n,divide:r}=e,i=Y_({typed:t,add:n,divide:r});return t("mean",{"...any":function(e){e=tk(e);try{return i.apply(null,e)}catch(t){throw ZD(t)}}})}),{isTransformFunction:!0}),ak=zu("min",["typed","config","numeric","smaller"],(e=>{var{typed:t,config:n,numeric:r,smaller:i}=e,a=Wb({typed:t,config:n,numeric:r,smaller:i});return t("min",{"...any":function(e){e=tk(e);try{return a.apply(null,e)}catch(t){throw ZD(t)}}})}),{isTransformFunction:!0}),ok=zu("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],(e=>{var{typed:t,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c}=e,d=Mv({typed:t,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c});return t("range",{"...any":function(e){return"boolean"!==typeof e[e.length-1]&&e.push(!0),d.apply(null,e)}})}),{isTransformFunction:!0}),sk=zu("row",["typed","Index","matrix","range"],(e=>{var{typed:t,Index:n,matrix:r,range:i}=e,a=Pv({typed:t,Index:n,matrix:r,range:i});return t("row",{"...any":function(e){var t=e.length-1,n=e[t];ql(n)&&(e[t]=n-1);try{return a.apply(null,e)}catch(r){throw ZD(r)}}})}),{isTransformFunction:!0}),lk=zu("subset",["typed","matrix","zeros","add"],(e=>{var{typed:t,matrix:n,zeros:r,add:i}=e,a=Uv({typed:t,matrix:n,zeros:r,add:i});return t("subset",{"...any":function(e){try{return a.apply(null,e)}catch(t){throw ZD(t)}}})}),{isTransformFunction:!0}),uk=zu("concat",["typed","matrix","isInteger"],(e=>{var{typed:t,matrix:n,isInteger:r}=e,i=Yg({typed:t,matrix:n,isInteger:r});return t("concat",{"...any":function(e){var t=e.length-1,n=e[t];ql(n)?e[t]=n-1:Rl(n)&&(e[t]=n.minus(1));try{return i.apply(null,e)}catch(r){throw ZD(r)}}})}),{isTransformFunction:!0}),ck="diff",dk=zu(ck,["typed","matrix","subtract","number","bignumber"],(e=>{var{typed:t,matrix:n,subtract:r,number:i,bignumber:a}=e,o=Sv({typed:t,matrix:n,subtract:r,number:i,bignumber:a});return t(ck,{"...any":function(e){e=tk(e);try{return o.apply(null,e)}catch(t){throw ZD(t)}}})}),{isTransformFunction:!0}),pk=zu("std",["typed","map","sqrt","variance"],(e=>{var{typed:t,map:n,sqrt:r,variance:i}=e,a=sS({typed:t,map:n,sqrt:r,variance:i});return t("std",{"...any":function(e){e=tk(e);try{return a.apply(null,e)}catch(t){throw ZD(t)}}})}),{isTransformFunction:!0}),hk=zu("sum",["typed","config","add","numeric"],(e=>{var{typed:t,config:n,add:r,numeric:i}=e,a=G_({typed:t,config:n,add:r,numeric:i});return t("sum",{"...any":function(e){e=tk(e);try{return a.apply(null,e)}catch(t){throw ZD(t)}}})}),{isTransformFunction:!0}),fk=zu("quantileSeq",["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],(e=>{var{typed:t,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:d,larger:p}=e,h=oS({typed:t,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:d,larger:p});return t("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(e,t,n)=>h(e,t,f(n)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(e,t,n,r)=>h(e,t,n,f(r)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(e,t,n)=>h(e,t,f(n)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(e,t,n,r)=>h(e,t,n,f(r))});function f(e){return tk([[],e])[1]}}),{isTransformFunction:!0}),mk="cumsum",gk=zu(mk,["typed","add","unaryPlus"],(e=>{var{typed:t,add:n,unaryPlus:r}=e,i=J_({typed:t,add:n,unaryPlus:r});return t(mk,{"...any":function(e){if(2===e.length&&Wl(e[0])){var t=e[1];ql(t)?e[1]=t-1:Rl(t)&&(e[1]=t.minus(1))}try{return i.apply(null,e)}catch(n){throw ZD(n)}}})}),{isTransformFunction:!0}),vk="variance",yk=zu(vk,["typed","add","subtract","multiply","divide","apply","isNaN"],(e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:a,apply:o,isNaN:s}=e,l=iS({typed:t,add:n,subtract:r,multiply:i,divide:a,apply:o,isNaN:s});return t(vk,{"...any":function(e){e=tk(e);try{return l.apply(null,e)}catch(t){throw ZD(t)}}})}),{isTransformFunction:!0}),bk="print",xk=zu(bk,["typed","matrix","zeros","add"],(e=>{var{typed:t,matrix:n,zeros:r,add:i}=e,a=Ey({typed:t,matrix:n,zeros:r,add:i});return t(bk,{"string, Object | Array":function(e,t){return a(o(e),t)},"string, Object | Array, number | Object":function(e,t,n){return a(o(e),t,n)}});function o(e){return e.replace(Sy,(e=>"$"+e.slice(1).split(".").map((function(e){return!isNaN(e)&&e.length>0?parseInt(e)-1:e})).join(".")))}}),{isTransformFunction:!0}),Dk=zu("and",["typed","matrix","zeros","add","equalScalar","not","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=e,s=cb({typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o});function l(e,t,n){var r=e[0].compile().evaluate(n);if(!Wl(r)&&!s(r,!0))return!1;var i=e[1].compile().evaluate(n);return s(r,i)}return l.rawArgs=!0,l}),{isTransformFunction:!0}),wk=zu("or",["typed","matrix","equalScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=e,o=Zg({typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function s(e,t,n){var r=e[0].compile().evaluate(n);if(!Wl(r)&&o(r,!1))return!0;var i=e[1].compile().evaluate(n);return o(r,i)}return s.rawArgs=!0,s}),{isTransformFunction:!0}),_k=zu("bitAnd",["typed","matrix","zeros","add","equalScalar","not","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=e,s=Mg({typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o});function l(e,t,n){var r=e[0].compile().evaluate(n);if(!Wl(r)){if(isNaN(r))return NaN;if(0===r||!1===r)return 0}var i=e[1].compile().evaluate(n);return s(r,i)}return l.rawArgs=!0,l}),{isTransformFunction:!0}),Sk=zu("bitOr",["typed","matrix","equalScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=e,o=Lg({typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function s(e,t,n){var r=e[0].compile().evaluate(n);if(!Wl(r)){if(isNaN(r))return NaN;if(-1===r)return-1;if(!0===r)return 1}var i=e[1].compile().evaluate(n);return o(r,i)}return s.rawArgs=!0,s}),{isTransformFunction:!0}),Ck=e;class Ek{static abs(e){return e>0?e:-e}static sign(e){return e>0?1:-1}static factorial(e){if(0===e||1===e)return 1;let t=e;for(;--e>0;)t*=e;return t}static min(e,t){return e>t?t:e}static max(e,t){return e<t?t:e}static divide(e,t){return 0===t?NaN:e/t}static power(e,t){return"error"===e||"error"===t?"error":isNaN(e)||isNaN(t)?NaN:0===t?1:t<0?Number.isInteger(t)?this.divide(1,this.pow__(e,this.abs(t))):e>0?this.divide(1,this.root(e,1/this.abs(t))):10*t%4===0?-1*this.divide(1,this.root(e,1/this.abs(t))):10*t%2===0?this.divide(1,this.root(e,1/this.abs(t))):NaN:Number.isInteger(t)?this.pow__(e,t):10*t%4===0?this.root(Ek.abs(e),1/t):10*t%2===0?this.root(e,1/t):e<0?NaN:this.root(e,1/t)}static exp(e){let t,n=1,r=1;for(;Ek.abs(t=e**r/Ek.factorial(r))>=1e-18;)n+=t,r++;return n}static log(e,t){return"error"===e||"error"===t?"error":-1===t?Math.log(e):1===t||t<=0?"error":e<0?NaN:Math.log(e)/Math.log(t)}static root(e,t){if("error"===e||"error"===t)return"error";if(0===e)return 0;if(t%2===0&&e<0)return NaN;return Ek.sign(e)*Ek.exp(Math.log(Ek.abs(e))/t)}static opt_degree(e){return(e%=2*Ek.pi)>=Ek.pi&&e<2*Ek.pi&&(e-=2*Ek.pi),Ek.abs(e)>=Ek.pi/2&&Ek.abs(e)<=Ek.pi&&(e=Ek.sign(e)*(Ek.pi-Ek.abs(e))),e}static sin(e){if("error"===e)return"error";if(0===(e=Ek.opt_degree(e)))return 0;let t,n=1,r=e;for(;Ek.abs(t=(n%2===1?-1:1)*e**(2*n+1)/Ek.factorial(2*n+1))>=1e-10;)r+=t,n++;return r}static cos(e){return"error"===e?"error":Ek.sin(Ek.pi/2-e)}static tan(e){return"error"===e?"error":Ek.abs(Ek.abs(e)%Ek.pi-Ek.pi/2)<.0055?NaN:Ek.sin(e)/Ek.cos(e)}static cot(e){return"error"===e?"error":0===e||Ek.abs(Ek.abs(e)%Ek.pi-Ek.pi)<.01?NaN:Ek.cos(e)/Ek.sin(e)}static arcsin(e){return e>1||e<-1?NaN:1===e?this.pi/2:-1===e?-this.pi/2:.9678828*e+.8698691*this.pow__(e,3)-2.166373*this.pow__(e,5)+1.848968*this.pow__(e,7)}static arctan(e){return this.arcsin(e/this.root(1+this.pow__(e,2),2))}static arccos(e){return this.pi/2-this.arcsin(e)}static arccot(e){return this.pi/2-this.arctan(e)}}nk=Ek,Ek.pi=3.14159265358979,Ek.round=function(e,t){return+(e=Number(e)).toFixed(t)},Ek.toDegree=e=>180*e/nk.pi,Ek.pow__=(e,t)=>0===e?0:Array.from({length:t},(()=>e)).reduce(((e,t)=>e*t),1);const kk=Ek;var Ak=n(579);const Nk=e=>{let{data:n,settingsGrid:r,variable:i,handleVariable:a}=e;const o=(0,t.useRef)(null),[s,l]=(0,t.useState)([0,0]),[u,c]=(0,t.useState)(!1),[d,p]=(0,t.useState)([!1,-1,[]]),[h,f]=(0,t.useState)([-10,-10,10,10]),[m,g]=(0,t.useState)([800,800]),[v,y]=(0,t.useState)(r.pi?2*kk.pi:2),[b]=(0,t.useState)(100),x=[],D=[],[w,_]=(0,t.useState)(r.pi);function S(e){return(e-h[0])*m[0]/(h[2]-h[0])}function C(e){return m[1]*(1-(e-h[1])/(h[3]-h[1]))}function E(e){return(h[2]-h[0])*e/m[0]}function k(e){return e*(h[3]-h[1])/m[1]}const A=function(e,t){return+(e=Number(e)).toFixed(t)};(0,t.useEffect)((()=>{const e=o.current.getContext("2d");function t(e){-1===D.indexOf(e)&&D.push(e)}function s(e,t){var n=e%t;return n&&(e=e-n+(e>0?1:0)*t),A(e,10)}function l(e){for(let t=0;t<n.length;t++){const r=n[t];if("Equal"===r.data[0]&&r.data[1][0]===e)return r.data[2]}return"error"}function u(e){for(var t=[],n=2;n<e.length;n++)if(isNaN(e[n][1])||isNaN(e[n-1][1])||isNaN(e[n][0])||isNaN(e[n-1][0]))t.push([e[n][0],NaN]);else if(kk.abs(e[n][1])===1/0||kk.abs(e[n-1][1])===1/0)t.push([e[n][0],NaN]);else{let r=A(e[n][1]-e[n-1][1],10),i=A(e[n][0]-e[n-1][0],10);0===i&&t.push([e[n][0],NaN]),t.push([e[n][0],r/i])}return t}class c{constructor(){this.table=new Array(127),this.size=0}_hash(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n);return t}set(e,t){const n=this._hash(JSON.stringify(e));this.table[n]=[JSON.stringify(e),t],this.size++}get(e){const t=this._hash(JSON.stringify(e));let n=this.table[t];return void 0===n?void 0:n[1]}}function d(){const e=new Ol;let t=l("f");return e.box(t).latex}const p=new c;let y=new c;function _(e){if(!Array.isArray(e))return"x"===e;let t=[...e];for(;t.length>0;){const e=t.pop();if(Array.isArray(e))t.push(...e);else if("x"===e)return!0}return!1}function N(e,n){let r=p.get(n);if(void 0!==r)return r;if(n===1/0||n===-1/0||"number"===typeof n||isNaN(n)&&"number"===typeof n||"error"===n)return n;if("undefined"===typeof n)return e;if(-1!==String(n).indexOf("Error")||-1!==String(n).indexOf("Nothing"))return"error";if("x"===n)return e;if("Half"===n)return.5;if("string"===typeof n&&(n.match(/^x_\d+$/)||n.match(/^[a-zA-Z]$/))&&"s"!==n){for(var a of i)if(a.name===n)return t(a.name),a.value;return t(n),"error"}if("Delimiter"===n[0]&&2===n.length)return N(e,n[1]);if("Add"===n[0]){let t=0;for(let r=1;r<n.length;r++)t=A(t+N(e,n[r]),12);return t}if("Subtract"===n[0])return N(e,n[1])-N(e,n[2]);if("Multiply"===n[0]||"Pair"===n[0]){if(5===n.length&&"a"===n[1]&&"r"===n[2]&&"c"===n[3]&&"Cot"===n[4][0])return N(e,["Arccot",n[4][1]]);if("f"===n[1])return N(e,["f",n[2]]);let t=1;for(let r=1;r<n.length;r++)t=A(t*N(e,n[r]),12);return _(n)||p.set(n,t),t}if("Negate"===n[0])return-1*N(e,n[1]);if("Rational"===n[0]||"Divide"===n[0]){let t=A(kk.divide(N(e,n[1]),N(e,n[2])),10);return _(n)||p.set(n,t),t}if("Square"===n[0])return A(kk.power(N(e,n[1]),2),10);if("Power"===n[0])return A(Math.pow(N(e,n[1]),N(e,n[2])),10);if("Sqrt"===n[0])return A(kk.root(N(e,n[1]),2),10);if("Root"===n[0])return A(kk.root(N(e,n[1]),N(e,n[2])),10);if("Log"===n[0])return n[2]?kk.log(N(e,n[1]),N(e,n[2])):kk.log(N(e,n[1]),10);if("Ln"===n[0])return kk.log(N(e,n[1]),-1);if("Lb"===n[0])return kk.log(N(e,n[1]),2);if("Sin"===n[0])return A(kk.sin(N(e,n[1])),14);if("Cos"===n[0])return A(kk.cos(N(e,n[1])),14);if("Tan"===n[0])return A(kk.tan(N(e,n[1])),14);if("Cot"===n[0])return A(kk.cot(N(e,n[1])),14);if("Arcsin"===n[0])return A(kk.arcsin(N(e,n[1])),14);if("Arccos"===n[0])return A(kk.arccos(N(e,n[1])),14);if("Arctan"===n[0])return A(kk.arctan(N(e,n[1])),14);if("Arccot"===n[0])return A(kk.arccot(N(e,n[1])),14);if("Equal"===n[0])return N(e,n[2]);if("Factorial"===n[0]){let t=kk.factorial(N(e,n[1]));return _(n)||p.set(n,t),t}if("Derivative"===n[0]||"Prime"===n[0]){if(2===n.length)return N(e,["Derivative",n[1],1]);if(0===n[2])return N(e,n[1]);if(n[1][0]&&"f"===n[1][0])return N(e,["DerivativeFunction",n[1][1],n[2]]);let t=A((N(e+1e-5,["Derivative",n[1],n[2]-1])-N(e,["Derivative",n[1],n[2]-1]))/1e-5,10);return _(n)||p.set(n,t),t}if("DerivativeFunction"===n[0]){if(0===n[2])return N(e,["f",n[1]]);if(1===n[2]){let t=N(e,["f",["Add",n[1],1e-5]]),r=N(e,["f",n[1]]);return A((1e12*t-1e12*r)/1e7,16)}try{const t=new Ol;let r=l("f");if(isNaN(N(e,["f",n[1]])))return;let i=N(e,n[1]);const a=Gu(Ck);let o=y.get(n);if(void 0!==o){let e=a.parse(o.toString()).evaluate({x:i});return _(n)||p.set(n,e),e}let s=t.box(r).latex.replace(/[\\]/g,"");s="log_{2}(sin(x)^2)"===s?"log(sin(x)^2, 2)":s.replace(/mathrm{Pair}\(\\frac{([^}]+)}{([^}]+)},\s*([^)]+)\)/,"$1/$2 * $3").replace(/mathrm{Pair}\(\\frac{([^}]+)}{([^}]+)},\s*([^)]+)\)/,"$1/$2 * $3").replace(/frac{([^{}]+)}{([^{}]+)}/,"$1/$2").replace(/log\(([^)]+)\)/,"log($1, 10)").replace(/log_{(\d+)}\(([^)]+)\)/,"log($2, $1)").replace(/[{}]/g,"").replace(/log_(\d+)\(([^)]+)\)/,"log($2, $1)").replace(/ln\(([^}]*)\)/,"log($1)").replace(/lb\(([^}]*)\)/,"log($1, 2)").replace(/sqrt([^)]+)/,"sqrt($1)").replace(/arcsin\(([^)]+)\)/,"asin($1)").replace(/arccos\(([^)]+)\)/,"acos($1)").replace(/arctan\(([^)]+)\)/,"atan($1)").replace(/acrcot\(([^)]+)\)/,"atan(1/$1)").replace(/arccot\(([^)]+)\)/,"atan(1/$1)");let u,c=a.parse(s);for(let e=1;e<=n[2];e++){for(;void 0!==y.get(["DerivativeFunction","x_0",e]);)c=y.get(["DerivativeFunction","x_0",e]),e++;c=a.derivative(a.parse(c.toString()),"x",{simplify:!0})}return u=c.evaluate({x:i}),_(n)||p.set(n,u),u}catch(kC){return console.log("out!",kC),NaN}}if("f"===n[0]){let t=l("f");if("error"===t)return"error";let r=N(e,n[1]);return N(r,t)}if("g"===n[0]){let t=l("g");if("error"===t)return"error";let r=N(e,n[1]);return N(r,t)}if("RepeatFunction"===n[0]){let t=0;for(let r=N(e,n[2]);r<=N(e,n[3]);r++){t+=N(e,JSON.parse(JSON.stringify(n[1]).replace(/"k"/g,r)))}return t}return"error"}function M(e){if(0===e)return"0";let t=!(e>0),n=A(kk.abs(e/kk.pi),4);return(t?-1:1)*(n*kk.pi).toFixed(4)-e.toFixed(4)!==0?""+e:1===n?(t?"-":"")+"\u03c0":n%1===0||n>=1?(t?"-":"")+n+"\u03c0":n<1?(t?"-":"")+"\u03c0/"+A(1/n,4):void 0}"\\sin(4x+x^2)"===d()||"\\error{f(x)}=\\sin(4x+x^2)"===d()?(y.set(["DerivativeFunction","x_0",1],"(2 * x + 4) * cos(4 x + x ^ 2)"),y.set(["DerivativeFunction","x_0",2],"2 * cos(4 x + x ^ 2) + (-(2 * x) - 4) * (2 * x + 4) * sin(4 x + x ^ 2)"),y.set(["DerivativeFunction","x_0",3],"sin(4 x + x ^ 2) * (4 * (-(2 * x) - 4) - 2 * (2 * x + 4)) + (2 * x + 4) ^ 2 * (-(2 * x) - 4) * cos(4 x + x ^ 2)"),y.set(["DerivativeFunction","x_0",4],"cos(4 x + x ^ 2) * (8 * (2 * x + 4) * (-(2 * x) - 4) - 4 * (2 * x + 4) ^ 2) + sin(4 x + x ^ 2) * ((2 * x + 4) ^ 4 - 12)"),y.set(["DerivativeFunction","x_0",5],"cos(4 x + x ^ 2) * (16 * (-(2 * x) - 4) + (2 * x + 4) * ((2 * x + 4) ^ 4 - 12) - 16 * (4 * x + 8)) + sin(4 x + x ^ 2) * (8 * ((-(2 * x) - 4) ^ 2 * (2 * x + 4) + (2 * x + 4) ^ 3) - 4 * (-(2 * x) - 4) * (2 * x + 4) ^ 2)"),y.set(["DerivativeFunction","x_0",6],"cos(4 x + x ^ 2) * (8 * (2 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) + 2 * ((2 * x + 4) ^ 4 - 12) - 4 * (2 * x + 4) ^ 3 * (-(2 * x) - 4) - 96) + sin(4 x + x ^ 2) * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4)))"),y.set(["DerivativeFunction","x_0",7],"cos(4 x + x ^ 2) * (8 * (17 * (2 * x + 4) ^ 3 + 4 * (2 * x + 4) * (-(2 * x) - 4) ^ 2 - 4 * (2 * x + 4) ^ 2 * (-(2 * x) - 4)) + 16 * (2 * x + 4) ^ 3 + (2 * x + 4) * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4))) - 24 * (2 * x + 4) ^ 2 * (-(2 * x) - 4)) + sin(4 x + x ^ 2) * ((-(2 * x) - 4) * (2 * (2 * (2 * x + 4) ^ 4 - 40) + 8 * (3 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) - 224) + 8 * (36 * (2 * x + 4) - 8 * (-(4 * x) - 8)) - 4 * (-(2 * x) - 4) ^ 2 * (2 * x + 4) ^ 3 - 2 * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)))"),y.set(["DerivativeFunction","x_0",8],"cos(4 x + x ^ 2) * ((2 * x + 4) * ((-(2 * x) - 4) * (8 * (4 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) + 2 * (3 * (2 * x + 4) ^ 4 - 68) - 448) + 16 * (36 * (2 * x + 4) - 8 * (-(4 * x) - 8)) - 4 * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8))) + 144 * (2 * x + 4) ^ 2 + 8 * (110 * (2 * x + 4) ^ 2 + 8 * (-(2 * x) - 4) ^ 2 - 32 * (2 * x + 4) * (-(2 * x) - 4)) + 2 * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4))) - 4 * (2 * x + 4) ^ 4 * (-(2 * x) - 4) ^ 2) + sin(4 x + x ^ 2) * ((-(2 * x) - 4) * (64 * (2 * x + 4) ^ 3 + 8 * (41 * (2 * x + 4) ^ 3 + 8 * (2 * x + 4) * (-(2 * x) - 4) ^ 2 - 8 * (2 * x + 4) ^ 2 * (-(2 * x) - 4)) + (2 * x + 4) * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4)))) + 832 - 48 * (-(2 * x) - 4) ^ 2 * (2 * x + 4) ^ 2 - 2 * (8 * (4 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) + 2 * (3 * (2 * x + 4) ^ 4 - 68) - 288))"),y.set(["DerivativeFunction","x_0",9],"cos(4 x + x ^ 2) * ((2 * x + 4) * ((-(2 * x) - 4) * (112 * (2 * x + 4) ^ 3 + 8 * (12 * (2 * x + 4) * (-(2 * x) - 4) ^ 2 + 73 * (2 * x + 4) ^ 3 - 12 * (2 * x + 4) ^ 2 * (-(2 * x) - 4)) + (2 * x + 4) * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4)))) + 3072 - 2 * (2 * (6 * (2 * x + 4) ^ 4 + 8 * (4 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) - 136) - 736) - 4 * (2 * ((2 * x + 4) ^ 4 - 28) + 8 * (2 * x + 4) ^ 4 - 64)) + 2 * (24 * (36 * (2 * x + 4) - 8 * (-(4 * x) - 8)) + (-(2 * x) - 4) * (2 * (4 * (2 * x + 4) ^ 4 - 96) + 8 * (5 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) - 576) - 6 * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8))) + 8 * (504 * (2 * x + 4) - 96 * (-(2 * x) - 4)) + 16 * (2 * x + 4) ^ 4 * (-(2 * x) - 4) - 80 * (2 * x + 4) ^ 3 * (-(2 * x) - 4) ^ 2) + sin(4 x + x ^ 2) * ((-(2 * x) - 4) * (8 * (24 * (-(2 * x) - 4) ^ 2 + 372 * (2 * x + 4) ^ 2 - 96 * (2 * x + 4) * (-(2 * x) - 4)) + 720 * (2 * x + 4) ^ 2 + (2 * x + 4) * (24 * (36 * (2 * x + 4) - 8 * (-(4 * x) - 8)) + (-(2 * x) - 4) * (2 * (4 * (2 * x + 4) ^ 4 - 96) + 8 * (5 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) - 576) - 6 * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8))) + 4 * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4)))) + -(2 * (8 * (12 * (2 * x + 4) * (-(2 * x) - 4) ^ 2 + 73 * (2 * x + 4) ^ 3 - 12 * (2 * x + 4) ^ 2 * (-(2 * x) - 4)) + 112 * (2 * x + 4) ^ 3 + (2 * x + 4) * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4))))) - 192 * (-(2 * x) - 4) ^ 2 * (2 * x + 4) - 4 * (-(2 * x) - 4) ^ 3 * (2 * x + 4) ^ 4)"),y.set(["DerivativeFunction","x_0",10],"cos(4 x + x ^ 2) * ((2 * x + 4) * ((-(2 * x) - 4) * ((2 * x + 4) * (32 * (36 * (2 * x + 4) - 8 * (-(4 * x) - 8)) + (-(2 * x) - 4) * (8 * (6 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) + 2 * (5 * (2 * x + 4) ^ 4 - 124) - 704) - 8 * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8))) + 6 * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4))) + 8 * (810 * (2 * x + 4) ^ 2 + 24 * (2 * (-(2 * x) - 4) ^ 2 + (2 * x + 4) ^ 2) - 192 * (2 * x + 4) * (-(2 * x) - 4)) + 1392 * (2 * x + 4) ^ 2) - 2 * (2 * (2 * x + 4) * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4))) + 8 * (2 * (73 * (2 * x + 4) ^ 3 - 12 * (2 * x + 4) ^ 2 * (-(2 * x) - 4)) + 24 * (2 * x + 4) * (-(2 * x) - 4) ^ 2) + 224 * (2 * x + 4) ^ 3) - 4 * (128 * (2 * x + 4) ^ 3 + 8 * (32 * (2 * x + 4) ^ 3 + 4 * (2 * x + 4) * (-(2 * x) - 4) ^ 2 - 4 * (2 * x + 4) ^ 2 * (-(2 * x) - 4)))) + 448 * (2 * x + 4) ^ 3 * (-(2 * x) - 4) + 2 * ((-(2 * x) - 4) * (8 * (113 * (2 * x + 4) ^ 3 + 16 * (2 * x + 4) * (-(2 * x) - 4) ^ 2 - 16 * (2 * x + 4) ^ 2 * (-(2 * x) - 4)) + 176 * (2 * x + 4) ^ 3 + (2 * x + 4) * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4)))) + 5568 - 10 * (2 * ((2 * x + 4) ^ 4 - 28) + 8 * (2 * x + 4) ^ 4 - 64) - 2 * (2 * (10 * (2 * x + 4) ^ 4 + 8 * (4 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) - 232) + 8 * (5 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) - 1312)) + 9600 + -(672 * (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) - 4 * (2 * x + 4) ^ 5 * (-(2 * x) - 4) ^ 3 - 32 * (2 * x + 4) ^ 4) + sin(4 x + x ^ 2) * ((-(2 * x) - 4) * (8 * (2184 * (2 * x + 4) - 384 * (-(2 * x) - 4)) + 4 * ((-(2 * x) - 4) * (8 * (6 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) + 2 * (5 * (2 * x + 4) ^ 4 - 124) - 704) + 32 * (36 * (2 * x + 4) - 8 * (-(4 * x) - 8)) - 8 * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8))) + (2 * x + 4) * ((-(2 * x) - 4) * (8 * (113 * (2 * x + 4) ^ 3 + 16 * (2 * x + 4) * (-(2 * x) - 4) ^ 2 - 16 * (2 * x + 4) ^ 2 * (-(2 * x) - 4)) + 176 * (2 * x + 4) ^ 3 + (2 * x + 4) * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4)))) + 9216 - 10 * (2 * ((2 * x + 4) ^ 4 - 28) + 8 * (2 * x + 4) ^ 4 - 64) - 2 * (2 * (10 * (2 * x + 4) ^ 4 + 8 * (4 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) - 232) + 8 * (5 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) - 1312))) + (-(2 * x) - 4) ^ 2 * (40 * (2 * x + 4) ^ 4 - 384) - 112 * (-(2 * x) - 4) ^ 3 * (2 * x + 4) ^ 3 - 2 * (6 * ((-(2 * x) - 4) * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8)) + 16 * (-(2 * x) - 4) ^ 2 + 8 * (7 * (2 * x + 4) ^ 2 + 2 * (-(2 * x) - 4) ^ 2 - 4 * (-(2 * x) - 4) * (2 * x + 4))) + (2 * x + 4) * ((-(2 * x) - 4) * (8 * (6 * (2 * x + 4) ^ 4 + (2 * x + 4) ^ 2 * (-(2 * x) - 4) ^ 2) + 2 * (5 * (2 * x + 4) ^ 4 - 124) - 704) + 32 * (36 * (2 * x + 4) - 8 * (-(4 * x) - 8)) - 8 * ((2 * x + 4) * ((2 * x + 4) ^ 4 - 28) - 16 * (4 * x + 8))) + 1392 * (2 * x + 4) ^ 2 + 8 * (810 * (2 * x + 4) ^ 2 + 24 * (2 * (-(2 * x) - 4) ^ 2 + (2 * x + 4) ^ 2) - 192 * (2 * x + 4) * (-(2 * x) - 4))))")):"\\lb(\\sin(x)^2)"===d()||"\\log_{2}(\\sin(x)^2)"===d()?(y.set(["DerivativeFunction","x_0",1],"2.8853900817779268 * cos(x) / sin(x)"),y.set(["DerivativeFunction","x_0",2],"-(2.8853900817779268 * (cos(x) ^ 2 / sin(x) ^ 2 + 1))"),y.set(["DerivativeFunction","x_0",3],"5.7707801635558535 * (cos(x) + cos(x) ^ 3 / sin(x) ^ 2) / sin(x)"),y.set(["DerivativeFunction","x_0",4],"(567619800*cos(x)*sin(x)^4+1419049500*cos(x)^3*sin(x)^2+851429700*cos(x)^5)/(12295127*sin(x)^5)"),y.set(["DerivativeFunction","x_0",5],"(567619800*cos(x)*sin(x)^4+1419049500*cos(x)^3*sin(x)^2+851429700*cos(x)^5)/(12295127*sin(x)^5)"),y.set(["DerivativeFunction","x_0",6],"-(567619800*sin(x)^6+4824768300*cos(x)^2*sin(x)^4+8514297000*cos(x)^4*sin(x)^2+4257148500*cos(x)^6)/(12295127*sin(x)^6)"),y.set(["DerivativeFunction","x_0",7],"(9649536600*cos(x)*sin(x)^6+43706724600*cos(x)^3*sin(x)^4+59600079000*cos(x)^5*sin(x)^2+25542891000*cos(x)^7)/(12295127*sin(x)^7)"),y.set(["DerivativeFunction","x_0",8],"-(9649536600*sin(x)^8+140769710400*cos(x)^2*sin(x)^6+429120568800*cos(x)^4*sin(x)^4+476800632000*cos(x)^6*sin(x)^2+178800237000*cos(x)^8)/(12295127*sin(x)^8)"),y.set(["DerivativeFunction","x_0",9],"(281539420800*cos(x)*sin(x)^8+1998021696000*cos(x)^3*sin(x)^6+4577286067200*cos(x)^5*sin(x)^4+4291205688000*cos(x)^7*sin(x)^2+1430401896000*cos(x)^9)/(12295127*sin(x)^9)"),y.set(["DerivativeFunction","x_0",10],"-(281539420800*sin(x)^10+6275604508800*cos(x)^2*sin(x)^8+28880495424000*cos(x)^4*sin(x)^6+52924870152000*cos(x)^6*sin(x)^4+42912056880000*cos(x)^8*sin(x)^2+12873617064000*cos(x)^10)/(12295127*sin(x)^10)")):y=new c;const F=(e,t)=>{e.canvas.width=m[0],e.canvas.height=m[1],e.clearRect(0,0,e.canvas.width,e.canvas.height);let i=Math.floor(t[0]);!function(e,t){let n=e.canvas.height,i=r.darkTheme;const a=10;e.beginPath(),e.strokeStyle=i?"white":"black",t[0]<=0&&t[2]>=0&&(e.moveTo(S(0),C(t[1])),e.lineTo(S(0),C(t[3]))),t[1]<=0&&t[3]>=0&&(e.moveTo(S(t[0]),C(0)),e.lineTo(S(t[2]),C(0))),e.stroke(),e.beginPath(),e.fillStyle=i?"white":"black",e.moveTo(S(0),C(t[3])),e.lineTo(S(0)-5,C(t[3])+12),e.lineTo(S(0)+5,C(t[3])+12),e.fill(),e.beginPath(),e.fillStyle=i?"white":"black",e.moveTo(S(t[2]),C(0)),e.lineTo(S(t[2])-12,C(0)-5),e.lineTo(S(t[2])-12,C(0)+5),e.fill(),e.font="italic 400 13px sans-serif",e.textAlign="center",e.beginPath(),e.strokeStyle=i?"white":"black",e.fillText("x",S(t[2])-7.5,C(0)-10),e.fillText("y",S(0)+10,C(t[3])+9),e.fill(),e.beginPath();let o=w?v/4:A(2===v?v/4:v/5,10),l=s(t[0],o);for(;l<=s(t[2],o);)kk.abs(1e3*l%(1e3*v))/1e3<1e-4?(e.lineWidth=.2,e.strokeStyle=i?"rgb(150,150,150)":"rgb(20,20,20)"):(e.lineWidth=.1,e.strokeStyle=i?"rgb(100,100,100)":"rgb(150,150,150)"),e.moveTo(S(l),C(t[3])),e.lineTo(S(l),C(t[1])),e.stroke(),e.beginPath(),l=A(l+o,4);let u=s(t[1],o);for(;u<=s(t[3],o);)kk.abs(1e3*u%(1e3*v))/1e3<1e-4?(e.lineWidth=.2,e.strokeStyle=i?"rgb(150,150,150)":"rgb(20,20,20)"):(e.lineWidth=.1,e.strokeStyle=i?"rgb(100,100,100)":"rgb(150,150,150)"),e.moveTo(S(t[0]),C(u)),e.lineTo(S(t[2]),C(u)),e.stroke(),e.beginPath(),u=A(u+o,4);e.font="15px sans-serif",e.textAlign="center",l=s(t[0],v);const c=[S(Math.max(Math.min(t[2],0),t[0])),C(Math.max(Math.min(t[3],0),t[1]))];for(;l<=s(t[2],v);){kk.abs(l)<2e-4&&(l=A(l+v,4));let t=w?M(l):l.toString();e.lineWidth=2,e.strokeStyle=i?"rgb(230, 230, 230)":"rgb(20,20,20)",e.moveTo(S(l),C(0)-5),e.lineTo(S(l),C(0)+5),e.stroke(),e.beginPath(),e.strokeStyle=i?"rgb(40,40,40)":"white",e.strokeText(t,S(l),c[1]+(n-c[1]>20?2:-1)*a),e.stroke(),e.beginPath(),e.fillStyle=i?"white":"black",e.fillText(t,S(l),c[1]+(n-c[1]>20?2:-1)*a),l=A(l+v,4)}for(e.stroke(),e.beginPath(),e.font="15px sans-serif",e.textAlign=c[0]-15<a?"left":"right",u=s(t[1],v);u<=s(t[3],v);){kk.abs(u)<2e-4&&(u=A(u+v,4));let t=w?M(u):u.toString();e.lineWidth=2,e.strokeStyle=i?"rgb(230, 230, 230)":"rgb(20,20,20)",e.moveTo(S(0)-5,C(u)),e.lineTo(S(0)+5,C(u)),e.stroke(),e.beginPath(),e.strokeStyle=i?"rgb(40,40,40)":"white",e.strokeText(t,c[0]+(c[0]-15<a?1:-1)*a,C(u)+5),e.stroke(),e.beginPath(),e.fillStyle=i?"white":"black",e.fillText(t,c[0]+(c[0]-15<a?1:-1)*a,C(u)+5),u=A(u+v,4)}t[0]<=0&&t[1]<=0&&t[2]>=0&&t[3]>=0&&(e.strokeStyle=i?"rgb(40,40,40)":"white",e.strokeText("0",S(0)-20,C(0)+20),e.stroke(),e.beginPath(),e.strokeStyle=i?"white":"black",e.fillText("0",S(0)-20,C(0)+20)),e.stroke()}(e,t);for(let s=0;s<n.length;s++){let d=n.at(s);if(d.visible&&"error"!==d.data&&""!==d.data&&void 0!==d.data){i=Math.floor(t[0]);let n=[];for(;i<=Math.ceil(t[2]);){let e=N(i,d.data);e>1e3&&(e=1/0),e<-1e3&&(e=-1/0),n.push([i,e]),i=A(i+1/b,8)}x.push(n),e.beginPath(),e.moveTo(S(n[0][0]),C(n[0][1]));for(let r=1;r<n.length;r++){if(isNaN(n[r][1])&&r+1<n.length){r++;let i=C(n[r][1]);i===-1/0&&(i=C(t[3])-20),i===1/0&&(i=C(t[1])+20),e.moveTo(S(n[r][0]),i);continue}let i=C(n[r][1]);i===-1/0&&(i=C(t[3])-20),i===1/0&&(i=C(t[1])+20),e.lineTo(S(n[r][0]),i)}if(e.lineWidth=5,e.strokeStyle="#"+d.color,e.stroke(),d.angle){const t=n.findIndex((e=>{let[t,n]=e;return kk.abs(n)<=.1}));if(-1!==t&&n[t-1]&&n[t+1]){let r=N(0,d.data),i=(n[t-1][1]-n[t+1][1])/(n[t-1][0]-n[t+1][0]),a=-1*r/i,o=kk.arctan(-1*i);o=o>0?-1*(kk.pi-o):o,e.beginPath(),e.font="600 20px sans-serif",e.textAlign="left",e.fillStyle="#"+d.color,e.arc(S(a),C(0),70,0,o,!0),e.fillText(A(kk.toDegree(-o),0)+"\xb0",S(a)+80*kk.cos(-1*o/2),C(0)-80*kk.sin(-1*o/2)),e.lineWidth=5,e.strokeStyle="#"+d.color,e.stroke(),e.beginPath(),e.lineWidth=.4,e.strokeStyle="#fff",e.strokeText(A(kk.toDegree(-o),0)+"\xb0",S(a)+80*kk.cos(-1*o/2),C(0)-80*kk.sin(-1*o/2)),e.stroke()}}if(d.triangle&&d.triangle[0]&&d.triangle[1]){const t=N(0,d.triangle[0]),n=d.triangle[1];var a=N(t-n/2,d.data),o=N(t+n/2,d.data);e.beginPath(),e.font="600 25px sans-serif",e.textAlign="center",e.lineWidth=5,e.strokeStyle="#"+d.color,e.fillStyle="#"+d.color,e.lineTo(S(t-n/2)+(a<o?0:-2.5),C(kk.min(a,o))),e.lineTo(S(t+n/2)+(a>o?0:2.5),C(kk.min(a,o))),e.stroke(),e.beginPath(),a>o?(e.lineTo(S(t-n/2),C(o)),e.lineTo(S(t-n/2),C(a)),e.fillText(kk.abs(A(o-a,3)),S(t-.5)-30,C((o+a)/2)+20)):(e.lineTo(S(t+n/2),C(o)),e.lineTo(S(t+n/2),C(a)),e.fillText(kk.abs(A(o-a,3)),S(t+n/2)+30,C((o+a)/2)+35)),e.stroke()}if(d.oy){const t=N(0,d.oy);var l=N(t,d.data);e.beginPath(),e.font="600 25px sans-serif",e.textAlign="center",e.lineWidth=5,e.strokeStyle="#"+d.color,e.fillStyle="#"+d.color,e.lineTo(S(t),C(0)),e.lineTo(S(t),C(l)),e.fillText(A(l,3),S(t)+(t>0?30:-30),C(l/2)+35),e.stroke()}if(d.points&&d.points.forEach((t=>{try{let n,i;e.beginPath(),e.fillStyle="#"+d.color,e.strokeStyle=r.darkTheme?"white":"rgb(40,40,40)",e.lineWidth=2,t[0]&&(n=N(0,t[0]),i=N(n,d.data),e.arc(S(n),C(i),7,0,2*Math.PI)),t[1]&&""!==t[1]&&(e.font="400 15px sans-serif",e.textAlign="center",e.lineWidth=2,e.fillText(t[1].replace("x",kk.round(n,2)).replace("y",kk.round(i,2)),S(n),C(i)-35),e.strokeText(t[1].replace("x",kk.round(n,2)).replace("y",kk.round(i,2)),S(n),C(i)-35)),e.fill(),e.stroke()}catch(n){console.log("Error: points. Point: "+t[0]+". Line: "+d.id+"\n "+n)}})),d.directive){var c=u(n);x.push(c),e.beginPath();for(let n=1;n<c.length;n++){for(;(isNaN(c[n][1])||c[n][1]>=t[3])&&n+1<c.length;)n++,e.moveTo(S(c[n][0]),C(c[n][1]));if(n<c.length){let r=c[n][1];r===-1/0&&(r=t[1]),r===1/0&&(r=t[3]),e.lineTo(S(c[n][0]),C(r))}}e.lineWidth=5,e.strokeStyle="#"+d.directiveColor,e.stroke()}}}},T=()=>{let e=o.current;if(!e.offsetWidth||!e.offsetHeight)return;const t=[e.offsetWidth,e.offsetHeight];if(JSON.stringify(t)===JSON.stringify(m))return 0;const n=E((t[0]-m[0])/2,m[0]),r=k((t[1]-m[1])/2,m[1]);g(t),f([A(h[0]-n,5),A(h[1]-r,5),A(h[2]+n,5),A(h[3]+r,5)])};return T(),window.addEventListener("resize",T),F(e,h),a(D),()=>{window.removeEventListener("resize",T)}}),[n,x,E,k,v,S,C,b,h,m,r.darkTheme]);return w!==r.pi&&(_(r.pi),y(r.pi?2*kk.pi:2)),(0,Ak.jsxs)(Ak.Fragment,{children:[(0,Ak.jsx)("div",{className:"overValue"+(d[0]?" display":""),style:d[0]?{top:C(d[2][1])-50+"px",left:S(d[2][0])-50+"px"}:{},children:d[0]?"("+d[2][0]+"; "+A(d[2][1],2)+")":""}),(0,Ak.jsx)("canvas",{ref:o,onMouseDown:e=>{c(!0),l([e.clientX,e.clientY])},onMouseUp:()=>{c(!1),p([!1,-1,[]])},onMouseMove:e=>{if(!u&&!d[0])return;if(d[0]){let t=((e,t)=>{try{return x[t][x[0].findIndex((t=>t[0]===A(E(e)+h[0],2)))]}catch(n){return 0}})(e.clientX,d[1]);if(0!==t&&isNaN(t[1]))return;return void p([!0,d[1],t])}let[t,n]=((e,t)=>{let n=A(E(e)+h[0],2);if(!x[0])return[[],-1];let r=x[0].findIndex((e=>e[0]===n));if(-1===r)return[[],-1];let i=-1,a=x.find(((e,n)=>"error"!==e[r][1]&&kk.abs(C(e[r][1])-t)<=15&&-1!==(i=n)));return void 0===a||isNaN(a[r][1])?[[],-1]:[a[r],i]})(e.clientX,e.clientY);if(2===t.length)return void p([!0,n,t]);let r=[e.clientX,e.clientY],i=[E(r[0]-s[0],m[0]),k(r[1]-s[1],m[1])];f([A(h[0]-i[0],10),A(h[1]+i[1],10),A(h[2]-i[0],10),A(h[3]+i[1],10)]),l([e.clientX,e.clientY])},onMouseOut:()=>{c(!1)},onWheel:e=>{let t=E(e.deltaY),n=(h[3]-h[1])*(1-(h[2]-h[0]-t)/(h[2]-h[0]));if((t>0||n>0)&&(A(h[3]-h[1]+2*t,10)<=.0025||A(h[2]-h[0]+2*n,10)<=.0025))return 0;f([A(h[0]+t,5),A(h[1]+n,5),A(h[2]-t,5),A(h[3]-n,5)]),y(function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=1;if((e=Number(e))<0&&(r=-1),t=[.001,.002,.005,.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5,5e5,1e6],(e*=n)<t[0]*n)return t[0]*n;for(let a=0;a<t.length-1;a++)if(e<t[a+1]*n&&e>=t[a]*n)return r*t[a]*n;let i=0;if(1===n){for(;e>10;)e/=10,i++;return r*Math.pow(10,i)}return e/n}(E(100),w?kk.pi:1))}})]})};var Mk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Fk=t.createContext&&t.createContext(Mk),Tk=function(){return Tk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Tk.apply(this,arguments)},Bk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Lk(e){return e&&e.map((function(e,n){return t.createElement(e.tag,Tk({key:n},e.attr),Lk(e.child))}))}function Ok(e){return function(n){return t.createElement(zk,Tk({attr:Tk({},e.attr)},n),Lk(e.child))}}function zk(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,s=Bk(e,["attr","size","title"]),l=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Tk({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:Tk(Tk({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==Fk?t.createElement(Fk.Consumer,null,(function(e){return n(e)})):n(Mk)}function Ik(e){return Ok({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}}]})(e)}function Pk(e){return Ok({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 10l5 5 5-5z"}}]})(e)}function qk(e){return Ok({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 14l5-5 5 5z"}}]})(e)}function Rk(e){return Ok({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)}function jk(e){return Ok({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46a.5.5 0 00-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0014 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1a.566.566 0 00-.18-.03c-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46a.5.5 0 00.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}}]})(e)}var Kk=Object.defineProperty,Vk=Object.defineProperties,Uk=Object.getOwnPropertyDescriptors,$k=Object.getOwnPropertySymbols,Hk=Object.prototype.hasOwnProperty,Wk=Object.prototype.propertyIsEnumerable,Gk=(e,t,n)=>t in e?Kk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zk=(e,t)=>{for(var n in t||(t={}))Hk.call(t,n)&&Gk(e,n,t[n]);if($k)for(var n of $k(t))Wk.call(t,n)&&Gk(e,n,t[n]);return e},Jk=(e,t)=>Vk(e,Uk(t)),Xk=e=>"symbol"==typeof e?e:e+"",Yk=(e,t)=>{var n={};for(var r in e)Hk.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&$k)for(var r of $k(e))t.indexOf(r)<0&&Wk.call(e,r)&&(n[r]=e[r]);return n};function Qk(e){return Array.isArray(e)}function eA(){return"window"in globalThis&&"document"in globalThis}function tA(){return"function"==typeof navigator.vibrate}function nA(){var e,t;if(!eA())return"other";let n=null!=(t=null==(e=navigator.userAgentData)?void 0:e.platform)?t:navigator.platform;return/^mac/i.test(n)?5===navigator.maxTouchPoints?"ios":"macos":/^win/i.test(n)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function rA(){return HTMLElement.prototype.hasOwnProperty("popover")}var iA={strings:{en:{"keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.menu":"Menu","tooltip.undo":"Undo","menu.borders":"Borders","menu.insert matrix":"Insert Matrix","menu.array.add row above":"Add Row Before","menu.array.add row below":"Add Row After","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Blackboard","tooltip.bold":"Bold","tooltip.italic":"Italic","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligraphic","tooltip.typewriter":"Typewriter","tooltip.roman-upright":"Roman Upright","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"Font Style","menu.accent":"Accent","menu.decoration":"Decoration","menu.color":"Color","menu.background-color":"Background","menu.evaluate":"Evaluate","menu.simplify":"Simplify","menu.solve":"Solve","menu.solve-for":"Solve for %@","menu.cut":"Cut","menu.copy":"Copy","menu.copy-as-latex":"Copy as LaTeX","menu.copy-as-ascii-math":"Copy as ASCII Math","menu.copy-as-mathml":"Copy as MathML","menu.paste":"Paste","menu.select-all":"Select All","color.red":"Red","color.orange":"Orange","color.yellow":"Yellow","color.lime":"Lime","color.green":"Green","color.teal":"Teal","color.cyan":"Cyan","color.blue":"Blue","color.indigo":"Indigo","color.purple":"Purple","color.magenta":"Magenta","color.black":"Black","color.dark-grey":"Dark Grey","color.grey":"Grey","color.light-grey":"Light Grey","color.white":"White"},ar:{"keyboard.tooltip.symbols":"\u062d\u0631\u0641 \u0627\u0648 \u0631\u0645\u0632","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u064a\u0648\u0646\u0627\u0646\u064a\u0629","keyboard.tooltip.numeric":"\u0627\u0644\u0631\u0642\u0645\u064a\u0629","keyboard.tooltip.alphabetic":"\u0631\u0645\u0648\u0632 \u0627\u0644\u0627\u062d\u0631\u0641 \u0627\u0644\u0631\u0648\u0645\u0627\u0646\u064a\u0629","tooltip.copy to clipboard":"\u0646\u0633\u062e \u0625\u0644\u0649 \u0627\u0644\u062d\u0627\u0641\u0638\u0629","tooltip.cut to clipboard":"\u0642\u0635 \u0625\u0644\u0649 \u0627\u0644\u062d\u0627\u0641\u0638\u0629","tooltip.paste from clipboard":"\u0644\u0635\u0642 \u0645\u0646 \u0627\u0644\u062d\u0627\u0641\u0638\u0629","tooltip.redo":"\u0627\u0644\u0625\u0639\u0627\u062f\u0629","tooltip.toggle virtual keyboard":"\u062a\u0628\u062f\u064a\u0644 \u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u0641\u0627\u062a\u064a\u062d \u0627\u0644\u0625\u0641\u062a\u0631\u0627\u0636\u064a\u0629","tooltip.undo":"\u0625\u0644\u063a\u0627\u0621","menu.insert matrix":"\u0623\u062f\u062e\u0644 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.borders":"\u0645\u062d\u062f\u062f\u0627\u062a \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.array.add row above":"\u0623\u0636\u0641 \u0635\u0641\u064b\u0627 \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add row below":"\u0623\u0636\u0641 \u0627\u0644\u0635\u0641 \u0642\u0628\u0644","menu.array.add column after":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add column before":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0642\u0628\u0644","menu.array.delete row":"\u0627\u062d\u0630\u0641 \u0635\u0641","menu.array.delete rows":"\u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u0648\u0641 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","menu.array.delete column":"\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u0648\u062f","menu.array.delete columns":"\u062d\u0630\u0641 \u0627\u0644\u0623\u0639\u0645\u062f\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","menu.mode":"\u0648\u0636\u0639","menu.mode-math":"\u0631\u064a\u0627\u0636\u064a\u0627\u062a","menu.mode-text":"\u0646\u0635","menu.mode-latex":"\u0644\u0627\u062a\u0643\u0633","tooltip.blackboard":"\u0633\u0628\u0648\u0631\u0629","tooltip.bold":"\u0639\u0631\u064a\u0636","tooltip.italic":"\u0645\u0627\u0626\u0644","tooltip.fraktur":"\u0641\u0631\u0627\u0643\u062a\u0648\u0631","tooltip.script":"\u0633\u0643\u0631\u064a\u0628\u062a","tooltip.caligraphic":"\u0643\u0627\u0644\u064a\u062c\u0631\u0627\u0641\u064a\u0643","tooltip.typewriter":"\u0622\u0644\u0629 \u0643\u0627\u062a\u0628\u0629","tooltip.roman-upright":"\u0631\u0648\u0645\u0627\u0646\u064a \u0645\u0633\u062a\u0642\u064a\u0645","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"\u0646\u0645\u0637 \u0627\u0644\u062e\u0637","menu.accent":"\u062a\u0634\u0643\u064a\u0644","menu.decoration":"\u0632\u062e\u0631\u0641\u0629","menu.color":"\u0644\u0648\u0646","menu.background-color":"\u0627\u0644\u062e\u0644\u0641\u064a\u0629","menu.evaluate":"\u062a\u0642\u064a\u064a\u0645","menu.simplify":"\u062a\u0628\u0633\u064a\u0637","menu.solve":"\u062d\u0644","menu.solve-for":"\u062d\u0644 \u0644\u0640 %@","menu.cut":"\u0642\u0635","menu.copy":"\u0646\u0633\u062e","menu.copy-as-latex":"\u0646\u0633\u062e \u0643\u0640 LaTeX","menu.copy-as-ascii-math":"\u0646\u0633\u062e \u0643\u0640 ASCII Math","menu.copy-as-mathml":"\u0646\u0633\u062e \u0643\u0640 MathML","menu.paste":"\u0644\u0635\u0642","menu.select-all":"\u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0643\u0644","color.red":"\u0623\u062d\u0645\u0631","color.orange":"\u0628\u0631\u062a\u0642\u0627\u0644\u064a","color.yellow":"\u0623\u0635\u0641\u0631","color.lime":"\u0644\u064a\u0645\u0648\u0646\u064a","color.green":"\u0623\u062e\u0636\u0631","color.teal":"\u0633\u0645\u0627\u0648\u064a","color.cyan":"\u0633\u0645\u0627\u0648\u064a \u0641\u0627\u062a\u062d","color.blue":"\u0623\u0632\u0631\u0642","color.indigo":"\u0646\u064a\u0644\u064a","color.purple":"\u0628\u0646\u0641\u0633\u062c\u064a","color.magenta":"\u0623\u0631\u062c\u0648\u0627\u0646\u064a","color.black":"\u0623\u0633\u0648\u062f","color.dark-grey":"\u0631\u0645\u0627\u062f\u064a \u063a\u0627\u0645\u0642","color.grey":"\u0631\u0645\u0627\u062f\u064a","color.light-grey":"\u0631\u0645\u0627\u062f\u064a \u0641\u0627\u062a\u062d","color.white":"\u0623\u0628\u064a\u0636"},de:{"keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.alphabetic":"R\xf6mische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einf\xfcgen","menu.borders":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzuf\xfcgen nach","menu.array.add row below":"Zeile hinzuf\xfcgen vor","menu.array.add column after":"Spalte hinzuf\xfcgen nach","menu.array.add column before":"Spalte hinzuf\xfcgen vor","menu.array.delete row":"Zeile l\xf6schen","menu.array.delete rows":"Ausgew\xe4hlte Zeilen l\xf6schen","menu.array.delete column":"Spalte l\xf6schen","menu.array.delete columns":"Ausgew\xe4hlte Spalten l\xf6schen","menu.mode":"Modus","menu.mode-math":"Mathematik","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tafel","tooltip.bold":"Fett","tooltip.italic":"Kursiv","tooltip.fraktur":"Fraktur","tooltip.script":"Skript","tooltip.caligraphic":"Kalligraphie","tooltip.typewriter":"Schreibmaschine","tooltip.roman-upright":"R\xf6misch aufrecht","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"Schriftstil","menu.accent":"Akzent","menu.decoration":"Dekoration","menu.color":"Farbe","menu.background-color":"Hintergrund","menu.evaluate":"Auswerten","menu.simplify":"Vereinfachen","menu.solve":"L\xf6sen","menu.solve-for":"L\xf6sen f\xfcr %@","menu.cut":"Ausschneiden","menu.copy":"Kopieren","menu.copy-as-latex":"Als LaTeX kopieren","menu.copy-as-ascii-math":"Als ASCII Math kopieren","menu.copy-as-mathml":"Als MathML kopieren","menu.paste":"Einf\xfcgen","menu.select-all":"Alles ausw\xe4hlen","color.red":"Rot","color.orange":"Orange","color.yellow":"Gelb","color.lime":"Limette","color.green":"Gr\xfcn","color.teal":"Blaugr\xfcn","color.cyan":"Cyan","color.blue":"Blau","color.indigo":"Indigo","color.purple":"Lila","color.magenta":"Magenta","color.black":"Schwarz","color.dark-grey":"Dunkelgrau","color.grey":"Grau","color.light-grey":"Hellgrau","color.white":"Wei\xdf"},el:{"keyboard.tooltip.symbols":"\u03c3\u03cd\u03bc\u03b2\u03bf\u03bb\u03b1","keyboard.tooltip.greek":"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","keyboard.tooltip.numeric":"\u0391\u03c1\u03b9\u03b8\u03bc\u03b7\u03c4\u03b9\u03ba\u03cc\u03c2","keyboard.tooltip.alphabetic":"\u03a1\u03c9\u03bc\u03b1\u03ca\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","tooltip.copy to clipboard":"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03bf \u03c0\u03c1\u03cc\u03c7\u03b5\u03b9\u03c1\u03bf","tooltip.redo":"\u039e\u03b1\u03bd\u03b1\u03ba\u03ac\u03bd\u03c9","tooltip.toggle virtual keyboard":"\u0395\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae \u03b5\u03b9\u03ba\u03bf\u03bd\u03b9\u03ba\u03bf\u03cd \u03c0\u03bb\u03b7\u03ba\u03c4\u03c1\u03bf\u03bb\u03bf\u03b3\u03af\u03bf\u03c5","tooltip.undo":"\u039e\u03b5\u03ba\u03ac\u03bd\u03c9","menu.insert matrix":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03bc\u03ae\u03c4\u03c1\u03b1","menu.borders":"\u039f\u03c1\u03b9\u03bf\u03b8\u03ad\u03c4\u03b5\u03c2 \u03bc\u03ae\u03c4\u03c1\u03b1","menu.array.add row above":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add row below":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.add column after":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add column before":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.delete row":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2","menu.array.delete rows":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03b5\u03b9\u03c1\u03ce\u03bd","menu.array.delete column":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2","menu.array.delete columns":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03c4\u03b7\u03bb\u03ce\u03bd","menu.mode":"\u039b\u03b5\u03b9\u03c4\u03bf\u03c5\u03c1\u03b3\u03af\u03b1","menu.mode-math":"\u039c\u03b1\u03b8\u03b7\u03bc\u03b1\u03c4\u03b9\u03ba\u03ac","menu.mode-text":"\u039a\u03b5\u03af\u03bc\u03b5\u03bd\u03bf","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u03a0\u03af\u03bd\u03b1\u03ba\u03b1\u03c2","tooltip.bold":"\u0388\u03bd\u03c4\u03bf\u03bd\u03b7","tooltip.italic":"\u03a0\u03bb\u03ac\u03b3\u03b9\u03b1","tooltip.fraktur":"\u03a6\u03c1\u03ac\u03ba\u03c4\u03bf\u03c5\u03c1","tooltip.script":"\u03a3\u03b5\u03bd\u03ac\u03c1\u03b9\u03bf","tooltip.caligraphic":"\u039a\u03b1\u03bb\u03bb\u03b9\u03b3\u03c1\u03b1\u03c6\u03b9\u03ba\u03ae","tooltip.typewriter":"\u039c\u03b7\u03c7\u03b1\u03bd\u03ae \u03b3\u03c1\u03b1\u03c6\u03ae\u03c2","tooltip.roman-upright":"\u03a1\u03c9\u03bc\u03b1\u03ca\u03ba\u03cc \u039a\u03b1\u03c4\u03b1\u03ba\u03cc\u03c1\u03c5\u03c6\u03bf","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"\u03a3\u03c4\u03c5\u03bb \u03b3\u03c1\u03b1\u03bc\u03bc\u03b1\u03c4\u03bf\u03c3\u03b5\u03b9\u03c1\u03ac\u03c2","menu.accent":"\u03a4\u03cc\u03bd\u03bf\u03c2","menu.decoration":"\u0394\u03b9\u03b1\u03ba\u03cc\u03c3\u03bc\u03b7\u03c3\u03b7","menu.color":"\u03a7\u03c1\u03ce\u03bc\u03b1","menu.background-color":"\u03a7\u03c1\u03ce\u03bc\u03b1 \u03c6\u03cc\u03bd\u03c4\u03bf\u03c5","menu.evaluate":"\u0391\u03be\u03b9\u03bf\u03bb\u03cc\u03b3\u03b7\u03c3\u03b7","menu.simplify":"\u0391\u03c0\u03bb\u03bf\u03c0\u03bf\u03af\u03b7\u03c3\u03b7","menu.solve":"\u039b\u03cd\u03c3\u03b7","menu.solve-for":"\u039b\u03cd\u03c3\u03b7 \u03b3\u03b9\u03b1 %@","menu.cut":"\u0391\u03c0\u03bf\u03ba\u03bf\u03c0\u03ae","menu.copy":"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae","menu.copy-as-latex":"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c2 LaTeX","menu.copy-as-ascii-math":"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c2 ASCII Math","menu.copy-as-mathml":"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c2 MathML","menu.paste":"\u0395\u03c0\u03b9\u03ba\u03cc\u03bb\u03bb\u03b7\u03c3\u03b7","menu.select-all":"\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae \u03cc\u03bb\u03c9\u03bd","color.red":"\u039a\u03cc\u03ba\u03ba\u03b9\u03bd\u03bf","color.orange":"\u03a0\u03bf\u03c1\u03c4\u03bf\u03ba\u03b1\u03bb\u03af","color.yellow":"\u039a\u03af\u03c4\u03c1\u03b9\u03bd\u03bf","color.lime":"\u039b\u03b1\u03c7\u03b1\u03bd\u03af","color.green":"\u03a0\u03c1\u03ac\u03c3\u03b9\u03bd\u03bf","color.teal":"\u039a\u03c5\u03b1\u03bd\u03cc","color.cyan":"\u0393\u03b1\u03bb\u03ac\u03b6\u03b9\u03bf","color.blue":"\u039c\u03c0\u03bb\u03b5","color.indigo":"\u0399\u03bd\u03b4\u03b9\u03ba\u03cc","color.purple":"\u039c\u03c9\u03b2","color.magenta":"\u039c\u03b1\u03c4\u03b6\u03ad\u03bd\u03c4\u03b1","color.black":"\u039c\u03b1\u03cd\u03c1\u03bf","color.dark-grey":"\u03a3\u03ba\u03bf\u03cd\u03c1\u03bf \u0393\u03ba\u03c1\u03b9","color.grey":"\u0393\u03ba\u03c1\u03b9","color.light-grey":"\u0391\u03bd\u03bf\u03b9\u03c7\u03c4\u03cc \u0393\u03ba\u03c1\u03b9","color.white":"\u039b\u03b5\u03c5\u03ba\u03cc"},es:{"keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"A\xf1adir Matriz","menu.borders":"Delimitadores de Matriz","menu.array.add row above":"A\xf1adir L\xednea Antes","menu.array.add row below":"A\xf1adir L\xednea Despues","menu.array.add column after":"A\xf1adir Columna Despues","menu.array.add column before":"A\xf1adir Columna Antes","menu.array.delete row":"Borrar L\xednea","menu.array.delete rows":"Borrar L\xedneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","menu.mode":"Modo","menu.mode-math":"Matem\xe1ticas","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Pizarra","tooltip.bold":"Negrita","tooltip.italic":"Cursiva","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligr\xe1fico","tooltip.typewriter":"M\xe1quina de escribir","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"Estilo de fuente","menu.accent":"Acento","menu.decoration":"Decoraci\xf3n","menu.color":"Color","menu.background-color":"Fondo","menu.evaluate":"Evaluar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Cortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Pegar","menu.select-all":"Seleccionar todo","color.red":"Rojo","color.orange":"Naranja","color.yellow":"Amarillo","color.lime":"Lima","color.green":"Verde","color.teal":"Verde azulado","color.cyan":"Cian","color.blue":"Azul","color.indigo":"\xcdndigo","color.purple":"Morado","color.magenta":"Magenta","color.black":"Negro","color.dark-grey":"Gris oscuro","color.grey":"Gris","color.light-grey":"Gris claro","color.white":"Blanco"},fr:{"keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.numeric":"Num\xe9rique","keyboard.tooltip.alphabetic":"Lettres romaines","tooltip.menu":"Menu","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"R\xe9tablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Ins\xe9rer une Matrice","menu.borders":"Bords","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Apr\xe8s","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Apr\xe8s","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes S\xe9lection\xe9es","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes S\xe9lection\xe9es","menu.mode":"Mode","menu.mode-math":"Math","menu.mode-text":"Text","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tableau noir","tooltip.bold":"Gras","tooltip.italic":"Italique","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Calligraphique","tooltip.typewriter":"Machine \xe0 \xe9crire","tooltip.roman-upright":"Romain droit","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"Style de police","menu.accent":"Accent","menu.decoration":"D\xe9coration","menu.color":"Couleur","menu.background-color":"Arri\xe8re-plan","menu.evaluate":"\xc9valuer","menu.simplify":"Simplifier","menu.solve":"R\xe9soudre","menu.solve-for":"R\xe9soudre pour %@","menu.cut":"Couper","menu.copy":"Copier","menu.copy-as-latex":"Copier en LaTeX","menu.copy-as-ascii-math":"Copier en ASCII Math","menu.copy-as-mathml":"Copier en MathML","menu.paste":"Coller","menu.select-all":"S\xe9lectionner tout","color.red":"Rouge","color.orange":"Orange","color.yellow":"Jaune","color.lime":"Citron vert","color.green":"Vert","color.teal":"Turquoise","color.cyan":"Cyan","color.blue":"Bleu","color.indigo":"Indigo","color.purple":"Violet","color.magenta":"Magenta","color.black":"Noir","color.dark-grey":"Gris fonc\xe9","color.grey":"Gris","color.light-grey":"Gris clair","color.white":"Blanc"},he:{"keyboard.tooltip.symbols":"\u05e1\u05de\u05dc\u05d9\u05dd","keyboard.tooltip.greek":"\u05d0\u05d5\u05ea\u05d9\u05d5\u05ea \u05d9\u05d5\u05d5\u05e0\u05d9\u05d5\u05ea","keyboard.tooltip.numeric":"\u05de\u05e1\u05e4\u05e8\u05d9","keyboard.tooltip.alphabetic":"\u05de\u05db\u05ea\u05d1\u05d9\u05dd \u05e8\u05d5\u05de\u05d9\u05d9\u05dd","tooltip.copy to clipboard":"\u05d4\u05e2\u05ea\u05e7 \u05dc\u05dc\u05d5\u05d7","tooltip.redo":"\u05dc\u05b7\u05e2\u05b2\u05e9\u05c2\u05d5\u05b9\u05ea \u05e9\u05c1\u05d5\u05bc\u05d1","tooltip.toggle virtual keyboard":"\u05d4\u05d7\u05dc\u05e3 \u05d0\u05ea \u05d4\u05de\u05e7\u05dc\u05d3\u05ea \u05d4\u05d5\u05d5\u05d9\u05e8\u05d8\u05d5\u05d0\u05dc\u05d9\u05ea","tooltip.undo":"\u05dc\u05d1\u05d8\u05dc","menu.insert matrix":"\u05d4\u05db\u05e0\u05e1 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.borders":"\u05de\u05e4\u05e8\u05d9\u05d3\u05d9 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.array.add row above":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add row below":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.add column after":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add column before":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.delete row":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d4","menu.array.delete rows":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","menu.array.delete column":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d4","menu.array.delete columns":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","menu.mode":"\u05de\u05e6\u05d1","menu.mode-math":"\u05de\u05ea\u05de\u05d8\u05d9\u05e7\u05d4","menu.mode-text":"\u05d8\u05e7\u05e1\u05d8","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u05dc\u05d5\u05d7 \u05e9\u05d7\u05d5\u05e8","tooltip.bold":"\u05de\u05d5\u05d3\u05d2\u05e9","tooltip.italic":"\u05e0\u05d8\u05d5\u05d9","tooltip.fraktur":"\u05e4\u05e8\u05e7\u05d8\u05d5\u05e8","tooltip.script":"\u05db\u05ea\u05d1","tooltip.caligraphic":"\u05e7\u05dc\u05d9\u05d2\u05e8\u05e4\u05d9","tooltip.typewriter":"\u05de\u05db\u05d5\u05e0\u05ea \u05db\u05ea\u05d9\u05d1\u05d4","tooltip.roman-upright":"\u05e8\u05d5\u05de\u05d9 \u05d9\u05e9\u05e8","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"\u05e1\u05d2\u05e0\u05d5\u05df \u05d2\u05d5\u05e4\u05df","menu.accent":"\u05e6\u05dc\u05d9\u05dc","menu.decoration":"\u05e7\u05d9\u05e9\u05d5\u05d8","menu.color":"\u05e6\u05d1\u05e2","menu.background-color":"\u05e8\u05e7\u05e2","menu.evaluate":"\u05d7\u05e9\u05d1","menu.simplify":"\u05e4\u05e9\u05d8","menu.solve":"\u05e4\u05ea\u05d5\u05e8","menu.solve-for":"\u05e4\u05ea\u05d5\u05e8 \u05e2\u05d1\u05d5\u05e8 %@","menu.cut":"\u05d2\u05d6\u05d5\u05e8","menu.copy":"\u05d4\u05e2\u05ea\u05e7","menu.copy-as-latex":"\u05d4\u05e2\u05ea\u05e7 \u05db\u05beLaTeX","menu.copy-as-ascii-math":"\u05d4\u05e2\u05ea\u05e7 \u05db\u05beASCII Math","menu.copy-as-mathml":"\u05d4\u05e2\u05ea\u05e7 \u05db\u05beMathML","menu.paste":"\u05d4\u05d3\u05d1\u05e7","menu.select-all":"\u05d1\u05d7\u05e8 \u05d4\u05db\u05dc","color.red":"\u05d0\u05d3\u05d5\u05dd","color.orange":"\u05db\u05ea\u05d5\u05dd","color.yellow":"\u05e6\u05d4\u05d5\u05d1","color.lime":"\u05d9\u05e8\u05d5\u05e7 \u05dc\u05d9\u05d9\u05dd","color.green":"\u05d9\u05e8\u05d5\u05e7","color.teal":"\u05d8\u05d9\u05dc","color.cyan":"\u05e6\u05d9\u05d0\u05df","color.blue":"\u05db\u05d7\u05d5\u05dc","color.indigo":"\u05d0\u05d9\u05e0\u05d3\u05d9\u05d2\u05d5","color.purple":"\u05e1\u05d2\u05d5\u05dc","color.magenta":"\u05de\u05d2\u05e0\u05d8\u05d4","color.black":"\u05e9\u05d7\u05d5\u05e8","color.dark-grey":"\u05d0\u05e4\u05d5\u05e8 \u05db\u05d4\u05d4","color.grey":"\u05d0\u05e4\u05d5\u05e8","color.light-grey":"\u05d0\u05e4\u05d5\u05e8 \u05d1\u05d4\u05d9\u05e8","color.white":"\u05dc\u05d1\u05df"},it:{"keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.alphabetic":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare","menu.insert matrix":"Inserisci una Matrice","menu.borders":"Delimitatori di Matrice","menu.array.add row above":"Aggiungi una Riga Prima","menu.array.add row below":"Aggiungi una Riga Dopo","menu.array.add column before":"Aggiungi una Colonna Prima","menu.array.add column after":"Aggiungi una Colonna Dopo","menu.array.delete row":"Rimuovi una Riga","menu.array.delete rows":"Rimuovi le Righe Selezionate","menu.array.delete column":"Rimuovi una Colonna","menu.array.delete columns":"Rimuovi le Colonne Selezionate","menu.mode":"Modalit\xe0","menu.mode-math":"Matematica","menu.mode-text":"Testo","menu.mode-latex":"LaTeX","tooltip.blackboard":"Lavagna","tooltip.bold":"Grassetto","tooltip.italic":"Corsivo","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligrafico","tooltip.typewriter":"Macchina da scrivere","tooltip.roman-upright":"Romano dritto","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"Stile del carattere","menu.accent":"Accento","menu.decoration":"Decorazione","menu.color":"Colore","menu.background-color":"Sfondo","menu.evaluate":"Valuta","menu.simplify":"Semplifica","menu.solve":"Risolvi","menu.solve-for":"Risolvi per %@","menu.cut":"Taglia","menu.copy":"Copia","menu.copy-as-latex":"Copia come LaTeX","menu.copy-as-ascii-math":"Copia come ASCII Math","menu.copy-as-mathml":"Copia come MathML","menu.paste":"Incolla","menu.select-all":"Seleziona tutto","color.red":"Rosso","color.orange":"Arancione","color.yellow":"Giallo","color.lime":"Lime","color.green":"Verde","color.teal":"Verde acqua","color.cyan":"Ciano","color.blue":"Blu","color.indigo":"Indaco","color.purple":"Viola","color.magenta":"Magenta","color.black":"Nero","color.dark-grey":"Grigio scuro","color.grey":"Grigio","color.light-grey":"Grigio chiaro","color.white":"Bianco"},ja:{"keyboard.tooltip.symbols":"\u30b7\u30f3\u30dc\u30eb","keyboard.tooltip.greek":"\u30ae\u30ea\u30b7\u30e3\u6587\u5b57","keyboard.tooltip.numeric":"\u6570\u5024","keyboard.tooltip.alphabetic":"\u30ed\u30fc\u30de\u5b57","tooltip.menu":"\u30e1\u30cb\u30e5\u30fc","tooltip.copy to clipboard":"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc","tooltip.redo":"\u3084\u308a\u76f4\u3057","tooltip.toggle virtual keyboard":"\u4eee\u60f3\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u5207\u308a\u66ff\u3048","tooltip.undo":"\u5143\u306b\u623b\u3059","menu.insert matrix":"\u30de\u30c8\u30ea\u30c3\u30af\u30b9\u3092\u633f\u5165","menu.borders":"\u884c\u5217\u533a\u5207\u308a\u6587\u5b57","menu.array.add row above":"\u5f8c\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add row below":"\u524d\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add column after":"\u5f8c\u306b\u5217\u3092\u8ffd\u52a0","menu.array.add column before":"\u524d\u306b\u5217\u3092\u8ffd\u52a0","menu.array.delete row":"\u884c\u3092\u524a\u9664","menu.array.delete rows":"\u9078\u629e\u3057\u305f\u884c\u3092\u524a\u9664\u3059\u308b","menu.array.delete column":"\u5217\u3092\u524a\u9664","menu.array.delete columns":"\u9078\u629e\u3057\u305f\u5217\u3092\u524a\u9664\u3059\u308b","menu.mode":"\u30e2\u30fc\u30c9","menu.mode-math":"\u6570\u5f0f","menu.mode-text":"\u30c6\u30ad\u30b9\u30c8","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u9ed2\u677f","tooltip.bold":"\u592a\u5b57","tooltip.italic":"\u30a4\u30bf\u30ea\u30c3\u30af","tooltip.fraktur":"\u30d5\u30e9\u30af\u30c8\u30a5\u30fc\u30eb","tooltip.script":"\u30b9\u30af\u30ea\u30d7\u30c8","tooltip.caligraphic":"\u30ab\u30ea\u30b0\u30e9\u30d5\u30a3\u30c3\u30af","tooltip.typewriter":"\u30bf\u30a4\u30d7\u30e9\u30a4\u30bf\u30fc","tooltip.roman-upright":"\u30ed\u30fc\u30de\u76f4\u7acb","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"\u30d5\u30a9\u30f3\u30c8\u30b9\u30bf\u30a4\u30eb","menu.accent":"\u30a2\u30af\u30bb\u30f3\u30c8","menu.decoration":"\u88c5\u98fe","menu.color":"\u8272","menu.background-color":"\u80cc\u666f","menu.evaluate":"\u8a55\u4fa1","menu.simplify":"\u7c21\u7565\u5316","menu.solve":"\u89e3\u304f","menu.solve-for":"%@ \u3092\u89e3\u304f","menu.cut":"\u5207\u308a\u53d6\u308a","menu.copy":"\u30b3\u30d4\u30fc","menu.copy-as-latex":"LaTeX\u3068\u3057\u3066\u30b3\u30d4\u30fc","menu.copy-as-ascii-math":"ASCII Math\u3068\u3057\u3066\u30b3\u30d4\u30fc","menu.copy-as-mathml":"MathML\u3068\u3057\u3066\u30b3\u30d4\u30fc","menu.paste":"\u8cbc\u308a\u4ed8\u3051","menu.select-all":"\u3059\u3079\u3066\u9078\u629e","color.red":"\u8d64","color.orange":"\u30aa\u30ec\u30f3\u30b8","color.yellow":"\u9ec4\u8272","color.lime":"\u30e9\u30a4\u30e0","color.green":"\u7dd1","color.teal":"\u30c6\u30a3\u30fc\u30eb","color.cyan":"\u30b7\u30a2\u30f3","color.blue":"\u9752","color.indigo":"\u30a4\u30f3\u30c7\u30a3\u30b4","color.purple":"\u7d2b","color.magenta":"\u30de\u30bc\u30f3\u30bf","color.black":"\u9ed2","color.dark-grey":"\u6fc3\u3044\u30b0\u30ec\u30fc","color.grey":"\u30b0\u30ec\u30fc","color.light-grey":"\u8584\u3044\u30b0\u30ec\u30fc","color.white":"\u767d"},ko:{"keyboard.tooltip.symbols":"\uae30\ud638","keyboard.tooltip.greek":"\uadf8\ub9ac\uc2a4 \ubb38\uc790","keyboard.tooltip.numeric":"\uc22b\uc790","keyboard.tooltip.alphabetic":"\ub85c\ub9c8 \ubb38\uc790","tooltip.copy to clipboard":"\ud074\ub9bd \ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac","tooltip.redo":"\ub2e4\uc2dc \ud558\ub2e4","tooltip.toggle virtual keyboard":"\uac00\uc0c1 \ud0a4\ubcf4\ub4dc \uc804\ud658","tooltip.undo":"\uc2e4\ud589 \ucde8\uc18c","menu.insert matrix":"\ub9e4\ud2b8\ub9ad\uc2a4 \uc0bd\uc785","menu.borders":"\ud589\ub82c \uad6c\ubd84 \uae30\ud638","menu.array.add row above":"\ub4a4\uc5d0 \ud589 \ucd94\uac00","menu.array.add row below":"\uc55e\uc5d0 \ud589 \ucd94\uac00","menu.array.add column after":"\ub4a4\uc5d0 \uc5f4 \ucd94\uac00","menu.array.add column before":"\uc55e\uc5d0 \uc5f4 \ucd94\uac00","menu.array.delete row":"\ud589 \uc0ad\uc81c","menu.array.delete rows":"\uc120\ud0dd\ud55c \ud589 \uc0ad\uc81c","menu.array.delete column":"\uc5f4 \uc0ad\uc81c","menu.array.delete columns":"\uc120\ud0dd\ud55c \uc5f4 \uc0ad\uc81c","menu.mode":"\u30e2\u30fc\u30c9","menu.mode-math":"\u6570\u5f0f","menu.mode-text":"\u30c6\u30ad\u30b9\u30c8","menu.mode-latex":"LaTeX","tooltip.blackboard":"\uce60\ud310","tooltip.bold":"\uad75\uac8c","tooltip.italic":"\uc774\ud0e4\ub9ad","tooltip.fraktur":"\ud504\ub799\ud22c\uc5b4","tooltip.script":"\uc2a4\ud06c\ub9bd\ud2b8","tooltip.caligraphic":"\uce98\ub9ac\uadf8\ub798\ud53d","tooltip.typewriter":"\ud0c0\uc790\uae30","tooltip.roman-upright":"\ub85c\ub9c8 \uc9c1\ub9bd","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"\uae00\uaf34 \uc2a4\ud0c0\uc77c","menu.accent":"\uc545\uc13c\ud2b8","menu.decoration":"\uc7a5\uc2dd","menu.color":"\uc0c9\uc0c1","menu.background-color":"\ubc30\uacbd","menu.evaluate":"\ud3c9\uac00","menu.simplify":"\uac04\uc18c\ud654","menu.solve":"\ud574\uacb0","menu.solve-for":"%@\uc5d0 \ub300\ud574 \ud574\uacb0","menu.cut":"\uc798\ub77c\ub0b4\uae30","menu.copy":"\ubcf5\uc0ac","menu.copy-as-latex":"LaTeX\ub85c \ubcf5\uc0ac","menu.copy-as-ascii-math":"ASCII Math\ub85c \ubcf5\uc0ac","menu.copy-as-mathml":"MathML\ub85c \ubcf5\uc0ac","menu.paste":"\ubd99\uc5ec\ub123\uae30","menu.select-all":"\ubaa8\ub450 \uc120\ud0dd","color.red":"\ube68\uac15","color.orange":"\uc8fc\ud669","color.yellow":"\ub178\ub791","color.lime":"\ub77c\uc784","color.green":"\ucd08\ub85d","color.teal":"\uccad\ub85d","color.cyan":"\uccad\uc0c9","color.blue":"\ud30c\ub791","color.indigo":"\ub0a8\uc0c9","color.purple":"\ubcf4\ub77c","color.magenta":"\uc790\ud64d","color.black":"\uac80\uc815","color.dark-grey":"\uc9c4\ud55c \ud68c\uc0c9","color.grey":"\ud68c\uc0c9","color.light-grey":"\uc5f0\ud55c \ud68c\uc0c9","color.white":"\ud770\uc0c9"},pl:{"keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.alphabetic":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywr\xf3\u0107","tooltip.toggle virtual keyboard":"Prze\u0142\u0105cz wirtualn\u0105 klawiatur\u0119","tooltip.undo":"Cofnij","menu.insert matrix":"Wstaw macierz","menu.borders":"Ograniczniki macierzy","menu.array.add row above":"Dodaj wiersz po","menu.array.add row below":"Dodaj wiersz przed","menu.array.add column after":"Dodaj kolumn\u0119 po","menu.array.add column before":"Dodaj kolumn\u0119 przed","menu.array.delete row":"Usu\u0144 wiersz","menu.array.delete rows":"Usu\u0144 wybrane wiersze","menu.array.delete column":"Usu\u0144 kolumn\u0119","menu.array.delete columns":"Usu\u0144 wybrane kolumny","menu.mode":"Tryb","menu.mode-math":"Formu\u0142a","menu.mode-text":"Tekst","menu.mode-latex":"LaTeX","tooltip.blackboard":"Tablica","tooltip.bold":"Pogrubienie","tooltip.italic":"Kursywa","tooltip.fraktur":"Fraktura","tooltip.script":"Skrypt","tooltip.caligraphic":"Kaligraficzny","tooltip.typewriter":"Maszynowy","tooltip.roman-upright":"Rzymski prosto","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"Styl czcionki","menu.accent":"Akcent","menu.decoration":"Dekoracja","menu.color":"Kolor","menu.background-color":"T\u0142o","menu.evaluate":"Oblicz","menu.simplify":"Upro\u015b\u0107","menu.solve":"Rozwi\u0105\u017c","menu.solve-for":"Rozwi\u0105\u017c dla %@","menu.cut":"Wytnij","menu.copy":"Kopiuj","menu.copy-as-latex":"Kopiuj jako LaTeX","menu.copy-as-ascii-math":"Kopiuj jako ASCII Math","menu.copy-as-mathml":"Kopiuj jako MathML","menu.paste":"Wklej","menu.select-all":"Zaznacz wszystko","color.red":"Czerwony","color.orange":"Pomara\u0144czowy","color.yellow":"\u017b\xf3\u0142ty","color.lime":"Limetkowy","color.green":"Zielony","color.teal":"Turkusowy","color.cyan":"Cyjan","color.blue":"Niebieski","color.indigo":"Indygo","color.purple":"Fioletowy","color.magenta":"Magenta","color.black":"Czarny","color.dark-grey":"Ciemnoszary","color.grey":"Szary","color.light-grey":"Jasnoszary","color.white":"Bia\u0142y"},pt:{"keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar para \xe1rea de transfer\xeancia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.borders":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","menu.mode":"Modo","menu.mode-math":"F\xf3rmula","menu.mode-text":"Texto","menu.mode-latex":"LaTeX","tooltip.blackboard":"Quadro Negro","tooltip.bold":"Negrito","tooltip.italic":"It\xe1lico","tooltip.fraktur":"Fraktur","tooltip.script":"Script","tooltip.caligraphic":"Caligr\xe1fico","tooltip.typewriter":"M\xe1quina de Escrever","tooltip.roman-upright":"Romano Vertical","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"Estilo da Fonte","menu.accent":"Acento","menu.decoration":"Decora\xe7\xe3o","menu.color":"Cor","menu.background-color":"Cor de Fundo","menu.evaluate":"Avaliar","menu.simplify":"Simplificar","menu.solve":"Resolver","menu.solve-for":"Resolver para %@","menu.cut":"Recortar","menu.copy":"Copiar","menu.copy-as-latex":"Copiar como LaTeX","menu.copy-as-ascii-math":"Copiar como ASCII Math","menu.copy-as-mathml":"Copiar como MathML","menu.paste":"Colar","menu.select-all":"Selecionar Tudo","color.red":"Vermelho","color.orange":"Laranja","color.yellow":"Amarelo","color.lime":"Verde Lima","color.green":"Verde","color.teal":"Verde-azulado","color.cyan":"Ciano","color.blue":"Azul","color.indigo":"\xcdndigo","color.purple":"Roxo","color.magenta":"Magenta","color.black":"Preto","color.dark-grey":"Cinza Escuro","color.grey":"Cinza","color.light-grey":"Cinza Claro","color.white":"Branco"},uk:{"keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0446\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043b\u043e\u0432\u0438\u0439","keyboard.tooltip.alphabetic":"\u0420\u0438\u043c\u0441\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0456\u043d\u0443","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0438","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u0432\u0456\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443 \u043a\u043b\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043c\u0430\u0442\u0440\u0438\u0446\u044e","menu.borders":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u0456 \u0440\u043e\u0437\u0434\u0456\u043b\u044c\u043d\u0438\u043a\u0438","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u043f\u0456\u0441\u043b\u044f","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u0434\u043e","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0456\u0441\u043b\u044f","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0440\u044f\u0434\u043e\u043a","menu.array.delete rows":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0440\u044f\u0434\u043a\u0438","menu.array.delete column":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c","menu.array.delete columns":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0441\u0442\u043e\u0432\u043f\u0446\u0456","menu.mode":"\u0420\u0435\u0436\u0438\u043c","menu.mode-math":"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430","menu.mode-text":"\u0422\u0435\u043a\u0441\u0442","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u0427\u043e\u0440\u043d\u0430 \u0434\u043e\u0448\u043a\u0430","tooltip.bold":"\u0416\u0438\u0440\u043d\u0438\u0439","tooltip.italic":"\u041a\u0443\u0440\u0441\u0438\u0432","tooltip.fraktur":"\u0424\u0440\u0430\u043a\u0442\u0443\u0440\u043d\u0438\u0439","tooltip.script":"\u0421\u043a\u0440\u0438\u043f\u0442","tooltip.caligraphic":"\u041a\u0430\u043b\u0456\u0433\u0440\u0430\u0444\u0456\u0447\u043d\u0438\u0439","tooltip.typewriter":"\u041c\u0430\u0448\u0438\u043d\u043a\u0430 \u0434\u043b\u044f \u043f\u0438\u0441\u044c\u043c\u0430","tooltip.roman-upright":"\u0420\u0438\u043c\u0441\u044c\u043a\u0438\u0439 \u043f\u0440\u044f\u043c\u0438\u0439","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"\u0421\u0442\u0438\u043b\u044c \u0448\u0440\u0438\u0444\u0442\u0443","menu.accent":"\u0410\u043a\u0446\u0435\u043d\u0442","menu.decoration":"\u0414\u0435\u043a\u043e\u0440\u0430\u0446\u0456\u044f","menu.color":"\u041a\u043e\u043b\u0456\u0440","menu.background-color":"\u0424\u043e\u043d","menu.evaluate":"\u041e\u0431\u0447\u0438\u0441\u043b\u0438\u0442\u0438","menu.simplify":"\u0421\u043f\u0440\u043e\u0441\u0442\u0438\u0442\u0438","menu.solve":"\u0412\u0438\u0440\u0456\u0448\u0438\u0442\u0438","menu.solve-for":"\u0412\u0438\u0440\u0456\u0448\u0438\u0442\u0438 \u0434\u043b\u044f %@","menu.cut":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438","menu.copy":"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438","menu.copy-as-latex":"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u044f\u043a LaTeX","menu.copy-as-ascii-math":"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u044f\u043a ASCII Math","menu.copy-as-mathml":"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u044f\u043a MathML","menu.paste":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438","menu.select-all":"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0432\u0441\u0435","color.red":"\u0427\u0435\u0440\u0432\u043e\u043d\u0438\u0439","color.orange":"\u041f\u043e\u043c\u0430\u0440\u0430\u043d\u0447\u0435\u0432\u0438\u0439","color.yellow":"\u0416\u043e\u0432\u0442\u0438\u0439","color.lime":"\u041b\u0430\u0439\u043c","color.green":"\u0417\u0435\u043b\u0435\u043d\u0438\u0439","color.teal":"\u0411\u0456\u0440\u044e\u0437\u043e\u0432\u0438\u0439","color.cyan":"\u0421\u0438\u043d\u044c\u043e-\u0437\u0435\u043b\u0435\u043d\u0438\u0439","color.blue":"\u0421\u0438\u043d\u0456\u0439","color.indigo":"\u0406\u043d\u0434\u0438\u0433\u043e","color.purple":"\u0424\u0456\u043e\u043b\u0435\u0442\u043e\u0432\u0438\u0439","color.magenta":"\u041f\u0443\u0440\u043f\u0443\u0440\u043d\u0438\u0439","color.black":"\u0427\u043e\u0440\u043d\u0438\u0439","color.dark-grey":"\u0422\u0435\u043c\u043d\u043e-\u0441\u0456\u0440\u0438\u0439","color.grey":"\u0421\u0456\u0440\u0438\u0439","color.light-grey":"\u0421\u0432\u0456\u0442\u043b\u043e-\u0441\u0456\u0440\u0438\u0439","color.white":"\u0411\u0456\u043b\u0438\u0439"},zh_cn:{"keyboard.tooltip.symbols":"\u7b26\u53f7","keyboard.tooltip.greek":"\u5e0c\u814a\u5b57\u6bcd","keyboard.tooltip.numeric":"\u6570\u5b57","keyboard.tooltip.alphabetic":"\u7f57\u9a6c\u5b57\u6bcd","tooltip.copy to clipboard":"\u590d\u5236\u5230\u526a\u8d34\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u6362\u865a\u62df\u952e\u76d8","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9635","menu.borders":"\u77e9\u9635\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u540e\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u540e\u9762\u6dfb\u52a0\u5217r","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u5220\u9664\u884c","menu.array.delete rows":"\u5220\u9664\u9009\u5b9a\u884c","menu.array.delete column":"\u5220\u9664\u5217","menu.array.delete columns":"\u5220\u9664\u9009\u5b9a\u7684\u5217","menu.mode":"\u6a21\u5f0f","menu.mode-math":"\u6570\u5b66","menu.mode-text":"\u6587\u672c","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u9ed1\u677f","tooltip.bold":"\u7c97\u4f53","tooltip.italic":"\u659c\u4f53","tooltip.fraktur":"Fraktur","tooltip.script":"\u811a\u672c","tooltip.caligraphic":"\u8349\u4e66","tooltip.typewriter":"\u6253\u5b57\u673a","tooltip.roman-upright":"\u7f57\u9a6c\u76f4\u7acb","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"\u5b57\u4f53\u6837\u5f0f","menu.accent":"\u91cd\u97f3","menu.decoration":"\u88c5\u9970","menu.color":"\u989c\u8272","menu.background-color":"\u80cc\u666f","menu.evaluate":"\u8ba1\u7b97","menu.simplify":"\u7b80\u5316","menu.solve":"\u6c42\u89e3","menu.solve-for":"\u6c42\u89e3 %@","menu.cut":"\u526a\u5207","menu.copy":"\u590d\u5236","menu.copy-as-latex":"\u590d\u5236\u4e3a LaTeX","menu.copy-as-ascii-math":"\u590d\u5236\u4e3a ASCII Math","menu.copy-as-mathml":"\u590d\u5236\u4e3a MathML","menu.paste":"\u7c98\u8d34","menu.select-all":"\u5168\u9009","color.red":"\u7ea2\u8272","color.orange":"\u6a59\u8272","color.yellow":"\u9ec4\u8272","color.lime":"\u7eff\u9ec4\u8272","color.green":"\u7eff\u8272","color.teal":"\u9752\u8272","color.cyan":"\u84dd\u7eff\u8272","color.blue":"\u84dd\u8272","color.indigo":"\u975b\u84dd\u8272","color.purple":"\u7d2b\u8272","color.magenta":"\u6d0b\u7ea2\u8272","color.black":"\u9ed1\u8272","color.dark-grey":"\u6df1\u7070\u8272","color.grey":"\u7070\u8272","color.light-grey":"\u6d45\u7070\u8272","color.white":"\u767d\u8272"},zh_tw:{"keyboard.tooltip.symbols":"\u7b26\u865f","keyboard.tooltip.greek":"\u5e0c\u81d8\u5b57\u6bcd","keyboard.tooltip.numeric":"\u6578\u5b57","keyboard.tooltip.alphabetic":"\u7f85\u99ac\u5b57\u6bcd","tooltip.copy to clipboard":"\u8907\u88fd\u5230\u526a\u8cbc\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u63db\u865b\u64ec\u9375\u76e4","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9663","menu.borders":"\u77e9\u9663\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u5f8c\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u5f8c\u9762\u6dfb\u52a0\u5217","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u522a\u9664\u884c","menu.array.delete rows":"\u522a\u9664\u9078\u5b9a\u884c","menu.array.delete column":"\u522a\u9664\u5217","menu.array.delete columns":"\u522a\u9664\u9078\u5b9a\u7684\u5217","menu.mode":"\u6a21\u5f0f","menu.mode-math":"\u6578\u5b78","menu.mode-text":"\u6587\u672c","menu.mode-latex":"LaTeX","tooltip.blackboard":"\u9ed1\u677f","tooltip.bold":"\u7c97\u9ad4","tooltip.italic":"\u659c\u9ad4","tooltip.fraktur":"Fraktur","tooltip.script":"\u8173\u672c","tooltip.caligraphic":"\u8349\u66f8","tooltip.typewriter":"\u6253\u5b57\u6a5f","tooltip.roman-upright":"\u7f85\u99ac\u76f4\u7acb","tooltip.row-by-col":"%@ \xd7 %@","menu.font-style":"\u5b57\u9ad4\u6a23\u5f0f","menu.accent":"\u91cd\u97f3","menu.decoration":"\u88dd\u98fe","menu.color":"\u984f\u8272","menu.background-color":"\u80cc\u666f","menu.evaluate":"\u8a08\u7b97","menu.simplify":"\u7c21\u5316","menu.solve":"\u6c42\u89e3","menu.solve-for":"\u6c42\u89e3 %@","menu.cut":"\u526a\u4e0b","menu.copy":"\u8907\u88fd","menu.copy-as-latex":"\u8907\u88fd\u70ba LaTeX","menu.copy-as-ascii-math":"\u8907\u88fd\u70ba ASCII Math","menu.copy-as-mathml":"\u8907\u88fd\u70ba MathML","menu.paste":"\u8cbc\u4e0a","menu.select-all":"\u5168\u9078","color.red":"\u7d05\u8272","color.orange":"\u6a59\u8272","color.yellow":"\u9ec3\u8272","color.lime":"\u7da0\u9ec3\u8272","color.green":"\u7da0\u8272","color.teal":"\u9752\u8272","color.cyan":"\u85cd\u7da0\u8272","color.blue":"\u85cd\u8272","color.indigo":"\u975b\u85cd\u8272","color.purple":"\u7d2b\u8272","color.magenta":"\u6d0b\u7d05\u8272","color.black":"\u9ed1\u8272","color.dark-grey":"\u6df1\u7070\u8272","color.grey":"\u7070\u8272","color.light-grey":"\u6dfa\u7070\u8272","color.white":"\u767d\u8272"}},_locale:"",_dirty:!1,_subscribers:[],_numberFormatter:void 0,get locale(){return iA._locale||(iA._locale=eA()?navigator.language.slice(0,5):"en-US"),iA._locale},set locale(e){iA._locale=e,iA._numberFormatter=void 0,iA.dirty=!0},get numberFormatter(){return iA._numberFormatter||(iA._numberFormatter=new Intl.NumberFormat(iA.locale)),iA._numberFormatter},merge(e,t){if("string"==typeof e&&t)iA.strings[e]=Zk(Zk({},iA.strings[e]),t),iA.dirty=!0;else for(let n of Object.keys(e))iA.merge(n,e[n])},get dirty(){return iA._dirty},set dirty(e){iA._dirty||iA._dirty===e||(iA._dirty=!0,setTimeout((()=>{iA._dirty=!1,this._subscribers.forEach((e=>null==e?void 0:e()))}),0))},subscribe:e=>(iA._subscribers.push(e),iA._subscribers.length-1),unsubscribe(e){e<0||e>=iA._subscribers.length||(iA._subscribers[e]=void 0)},update(e){let t=e.querySelectorAll("[data-l10n-tooltip]");for(let n of t){let e=n.getAttribute("data-l10n-tooltip");if(e){let t=aA(e);t&&n.setAttribute("data-tooltip",t)}}t=e.querySelectorAll("[data-l10n-arial-label]");for(let n of t){let e=n.getAttribute("data-l10n-arial-label");if(e){let t=aA(e);t&&n.setAttribute("aria-label",t)}}}};function aA(e){if(void 0===e)return;let t="",n=iA.locale;iA.strings[n]&&(t=iA.strings[n][e]);let r=n.slice(0,2);if(!t&&iA.strings[r]&&(t=iA.strings[r][e]),t||(t=iA.strings.en[e]),!t)return;let i=/(%@|%([0-9]+)\$@)/g,a=i.exec(t),o=0;for(;a;){var s;if((s=1+o++)<1||arguments.length<=s?void 0:arguments[s]){let e=a[2]?parseInt(a[2],10)-1:o-1,n=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];"number"==typeof n&&(n=iA.numberFormatter.format(n)),t=t.replace(a[1],n)}a=i.exec(t)}return t=t.replace(/%%/g,"%"),t}var oA={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},sA={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},lA={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",cyan:"#b8e5c9",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},uA={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",cyan:"#13a7ec",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},cA={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},dA={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function pA(e){var t,n,r,i,a,o;let s,l,u,c=e.split("!"),d=255,p=255,h=255,f=-1,m=c.length>0&&c[0].startsWith("-");m&&(c[0]=c[0].slice(1));for(let g=0;g<c.length;g++){s=d,l=p,u=h;let e=null==(t=c[g].trim().match(/^([A-Za-z\d-]+)/))?void 0:t[1],m=null==e?void 0:e.toLowerCase(),v=e&&null!=(o=null!=(a=null!=(i=null!=(r=null!=(n=uA[m])?n:uA[cA[e]])?r:sA[e])?i:dA[e])?a:oA[e])?o:c[g].trim(),y=v.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(null!=y&&y[1]&&y[2]&&y[3])d=Math.max(0,Math.min(255,Number.parseInt(y[1],16))),p=Math.max(0,Math.min(255,Number.parseInt(y[2],16))),h=Math.max(0,Math.min(255,Number.parseInt(y[3],16)));else if(y=v.match(/^#([\da-f]{3})$/i),null!=y&&y[1]){let e=Number.parseInt(y[1][0],16),t=Number.parseInt(y[1][1],16),n=Number.parseInt(y[1][2],16);d=Math.max(0,Math.min(255,16*e+e)),p=Math.max(0,Math.min(255,16*t+t)),h=Math.max(0,Math.min(255,16*n+n))}else{if(y=v.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),!(null!=y&&y[1]&&y[2]&&y[3]))return;d=Math.max(0,Math.min(255,Number.parseInt(y[1]))),p=Math.max(0,Math.min(255,Number.parseInt(y[2]))),h=Math.max(0,Math.min(255,Number.parseInt(y[3])))}f>=0&&(d=(1-f)*d+f*s,p=(1-f)*p+f*l,h=(1-f)*h+f*u,f=-1),g+1<c.length&&(f=Math.max(0,Math.min(100,Number.parseInt(c[++g])))/100)}return f>=0&&(d=f*d+(1-f)*s,p=f*p+(1-f)*l,h=f*h+(1-f)*u),m&&(d=255-d,p=255-p,h=255-h),"#"+("00"+Math.round(d).toString(16)).slice(-2)+("00"+Math.round(p).toString(16)).slice(-2)+("00"+Math.round(h).toString(16)).slice(-2)}function hA(e){var t,n;return e=e.trim(),null!=(n=null!=(t=lA[e.toLowerCase()])?t:lA[cA[e]])?n:pA(e)}function fA(e,t,n){return n<0&&(n+=6),n>=6&&(n-=6),n<1?(t-e)*n+e:n<3?t:n<4?(t-e)*(4-n)+e:e}function mA(e){return e<0?0:e>255?255:Math.round(e)}function gA(e){let t=function(e){if(!e||"#"!==e[0])return;let t;return(e=e.slice(1)).length<=4?(t={r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16)},4===e.length&&(t.a=parseInt(e[3]+e[3],16)/255)):(t={r:parseInt(e[0]+e[1],16),g:parseInt(e[2]+e[3],16),b:parseInt(e[4]+e[5],16)},8===e.length&&(t.a=parseInt(e[6]+e[7],16)/255)),t&&void 0===t.a&&(t.a=1),t}(e);if(!t)return e;let{h:n,s:r,l:i}=function(e){let{r:t,g:n,b:r}=e;t/=255,n/=255,r/=255;let i,a,o=Math.min(t,n,r),s=Math.max(t,n,r),l=s-o;s===o?i=0:t===s?i=(n-r)/l:n===s?i=2+(r-t)/l:r===s&&(i=4+(t-n)/l),i=Math.min(60*i,360),i<0&&(i+=360);let u=(o+s)/2;return a=s===o?0:u<=.5?l/(s+o):l/(2-s-o),{h:i,s:a,l:u}}(t);return r+=.1,i-=.1,function(e){let{r:t,g:n,b:r}=e,i=((1<<24)+(mA(t)<<16)+(mA(n)<<8)+mA(r)).toString(16).slice(1);return i[0]===i[1]&&i[2]===i[3]&&i[4]===i[5]&&i[6]===i[7]&&(i=i[0]+i[2]+i[4]),"#"+i}(function(e){let[t,n,r]=[e.h,e.s,e.l];t=(t+360)%360/60,r=Math.max(0,Math.min(r,1)),n=Math.max(0,Math.min(n,1));let i=r<=.5?r*(n+1):r+n-r*n,a=2*r-i;return{r:Math.round(255*fA(a,i,t+2)),g:Math.round(255*fA(a,i,t)),b:Math.round(255*fA(a,i,t-2))}}({h:n,s:r,l:i}))}var vA={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},yA={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},bA=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function xA(e,t,n){if(!/[A-Za-z\d]/.test(e)||("up"===n&&(n=void 0),!t&&!n))return e;let r=e.codePointAt(0);if(void 0===r)return e;for(let i of bA)if((!t||i.variant===t)&&(!n||i.style===n)&&r>=i.offset&&r<i.offset+i.len){let e=i.start+r-i.offset;return String.fromCodePoint(yA[e]||e)}return e}function DA(e){var t;if("{}<>[]$&*#^_%:'\u02dc".includes(e)||e.length>1)return;let n=null!=(t=e.codePointAt(0))?t:0,r=vA[n];if(r)return r;let{char:i,variant:a,style:o}=function(e){var t;if((e<119808||e>120831)&&(e<8448||e>8527))return{char:String.fromCodePoint(e)};for(let n in yA)if(yA[n]===e){e=null!=(t=n.codePointAt(0))?t:0;break}for(let n of bA)if(e>=n.start&&e<n.start+n.len)return{char:String.fromCodePoint(e-n.start+n.offset),variant:n.variant,style:n.style};return{char:String.fromCodePoint(e)}}(n);if(a||o){switch(r=i,a){case"double-struck":r="\\mathbb{".concat(r,"}");break;case"fraktur":r="\\mathfrak{".concat(r,"}");break;case"script":r="\\mathscr{".concat(r,"}");break;case"sans-serif":r="\\mathsf{".concat(r,"}");break;case"monospace":r="\\mathtt{".concat(r,"}");break;case"calligraphic":r="\\mathcal{".concat(r,"}")}switch(o){case"bold":r="\\mathbf{".concat(r,"}");break;case"italic":r="\\mathit{".concat(r,"}");break;case"bolditalic":r="\\mathbfit{".concat(r,"}")}return r}}function wA(e){return e?Array.isArray(e)?e:"object"==typeof e&&"group"in e?e.group:[]:[]}var _A,SA,CA,EA={},kA=Zk({},vA),AA={},NA={},MA={iff:{primitive:!0,captureSelection:!0,def:'\\;\\char"27FA\\;'},nicefrac:"^{#1}\\!\\!/\\!_{#2}",phase:{def:"\\enclose{phasorangle}{#1}",args:1,captureSelection:!1},rd:"\\mathrm{d}",rD:"\\mathrm{D}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}",mathstrut:{def:"\\vphantom{(}",primitive:!0},angl:"\\enclose{actuarial}{#1}",angln:"\\enclose{actuarial}{n}",anglr:"\\enclose{actuarial}{r}",anglk:"\\enclose{actuarial}{k}",mathtools:{primitive:!0,package:{ordinarycolon:":",vcentcolon:"\\mathrel{\\mathop\\ordinarycolon}",dblcolon:'{\\mathop{\\char"2237}}',coloneqq:'{\\mathop{\\char"2254}}',Coloneqq:'{\\mathop{\\char"2237\\char"3D}}',coloneq:'{\\mathop{\\char"3A\\char"2212}}',Coloneq:'{\\mathop{\\char"2237\\char"2212}}',eqqcolon:'{\\mathop{\\char"2255}}',Eqqcolon:'{\\mathop{\\char"3D\\char"2237}}',eqcolon:'{\\mathop{\\char"2239}}',Eqcolon:'{\\mathop{\\char"2212\\char"2237}}',colonapprox:'{\\mathop{\\char"003A\\char"2248}}',Colonapprox:'{\\mathop{\\char"2237\\char"2248}}',colonsim:'{\\mathop{\\char"3A\\char"223C}}',Colonsim:'{\\mathop{\\char"2237\\char"223C}}',colondash:"\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",Colondash:"\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}",dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Dashcolon:"\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}"}},ratio:"\\vcentcolon",coloncolon:"\\dblcolon",colonequals:"\\coloneq",coloncolonequals:"\\Coloneq",equalscolon:"\\eqcolon",equalscoloncolon:"\\Eqcolon",colonminus:"\\colondash",coloncolonminus:"\\Colondash",minuscolon:"\\dashcolon",minuscoloncolon:"\\Dashcolon",coloncolonapprox:"\\Colonapprox",coloncolonsim:"\\Colonsim",simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Simcolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",simcoloncolon:"\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}",Approxcolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",approxcoloncolon:"\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}",notni:"\\mathrel{\\char`\u220c}",limsup:"\\operatorname*{lim\\,sup}",liminf:"\\operatorname*{lim\\,inf}",injlim:"\\operatorname*{inj\\,lim}",projlim:"\\operatorname*{proj\\,lim}",varlimsup:"\\operatorname*{\\overline{lim}}",varliminf:"\\operatorname*{\\underline{lim}}",varinjlim:"\\operatorname*{\\underrightarrow{lim}}",varprojlim:"\\operatorname*{\\underleftarrow{lim}}",argmin:"\\operatorname*{arg\\,min}",argmax:"\\operatorname*{arg\\,max}",plim:"\\mathop{\\operatorname{plim}}\\limits",tripledash:{def:"\\vphantom{-}\\raise{4mu}{\\mkern1.5mu\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2mu}}",expand:!0},"braket.sty":{package:{bra:{def:"\\mathinner{\\langle{#1}|}",args:1,captureSelection:!1},ket:{def:"\\mathinner{|{#1}\\rangle}",args:1,captureSelection:!1},braket:{def:"\\mathinner{\\langle{#1}\\rangle}",args:1,captureSelection:!1},set:{def:"\\mathinner{\\lbrace #1 \\rbrace}",args:1,captureSelection:!1},Bra:{def:"\\left\\langle #1\\right|",args:1,captureSelection:!1},Ket:{def:"\\left|#1\\right\\rangle",args:1,captureSelection:!1},Braket:{def:"\\left\\langle{#1}\\right\\rangle",args:1,captureSelection:!1},Set:{def:"\\left\\lbrace #1 \\right\\rbrace",args:1,captureSelection:!1}}},"amsmath.sty":{package:{varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1,captureSelection:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},primitive:!0},"texvc.sty":{package:{darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",N:"\\mathbb{N}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",lArr:"\\Leftarrow",Larr:"\\Leftarrow",lrarr:"\\leftrightarrow",lrArr:"\\Leftrightarrow",Lrarr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",plusmn:"\\pm",rarr:"\\rightarrow",rArr:"\\Rightarrow",Rarr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",weierp:"\\wp",Zeta:"\\mathrm{Z}"},primitive:!1}},FA={" ":32,"\\!":33,"\\#":35,"\\$":36,"\\%":37,"\\&":38,"\\_":95,"-":45,"\\textunderscore":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\textbraceleft":123,"\\textbraceright":125,"\\lbrace":123,"\\rbrace":125,"\\lbrack":91,"\\rbrack":93,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"\u2013":8211,"\u2014":8212,"\u2018":8216,"\u2019":8217,"\u201c":8220,"\u201d":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},TA=/[\w!@*()-=+{}\[\]\\';:?/.,~<>`|$%#&^" ]/;function BA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mord",r=arguments.length>3?arguments[3]:void 0;void 0!==t&&(EA[e]={definitionType:"symbol",type:n,variant:r,codepoint:t},kA[t]||(kA[t]=e))}function LA(e,t,n){if("string"!=typeof e)for(let[r,i,a,o]of e)BA(r,i,null!=a?a:t,null!=o?o:n);else for(let r=0;r<e.length;r++){let t=e.charAt(r);BA(t,t.codePointAt(0))}}function OA(e,t){for(let n=e;n<=t;n++)BA(String.fromCodePoint(n),n)}function zA(e){let t="auto",n=e.match(/:([^=]+)/);return n&&(t=n[1].trim()),t}function IA(e){if(!e)return[];let t=[],n=e.split("]");if(n[0].startsWith("[")){t.push({isOptional:!0,type:zA(n[0].slice(1))});for(let e=1;e<=n.length;e++)t.push(...IA(n[e]))}else if(n=e.split("}"),n[0].startsWith("{")){t.push({isOptional:!1,type:zA(n[0].slice(1))});for(let e=1;e<=n.length;e++)t.push(...IA(n[e]))}return t}function PA(e){if(!e)return"";let t="",n=!0;for(let r of e)"string"==typeof r.value?t+=r.value:n=!1;return n?t:""}function qA(e,t){"string"==typeof e&&(e=[e]);let n={tabular:!1,params:[],createAtom:t};for(let r of e)NA[r]=n}function RA(e,t,n){"string"==typeof e&&(e=[e]);let r={tabular:!0,params:IA(t),createAtom:n};for(let i of e)NA[i]=r}function jA(e,t,n){var r,i;n||(n={});let a={definitionType:"function",params:IA(t),ifMode:n.ifMode,isFunction:null!=(r=n.isFunction)&&r,applyMode:n.applyMode,infix:null!=(i=n.infix)&&i,parse:n.parse,createAtom:n.createAtom,applyStyle:n.applyStyle,serialize:n.serialize,render:n.render};if("string"==typeof e)AA["\\"+e]=a;else for(let o of e)AA["\\"+o]=a}function KA(e){return CA||(CA=UA(MA)),e?UA(Zk(Zk({},CA),e)):CA}function VA(e,t){var n,r,i,a;if("string"==typeof e){let i=0,a=e;return/(^|[^\\])#1/.test(a)&&(i=1),/(^|[^\\])#2/.test(a)&&(i=2),/(^|[^\\])#3/.test(a)&&(i=3),/(^|[^\\])#4/.test(a)&&(i=4),/(^|[^\\])#5/.test(a)&&(i=5),/(^|[^\\])#6/.test(a)&&(i=6),/(^|[^\\])#7/.test(a)&&(i=7),/(^|[^\\])#8/.test(a)&&(i=8),/(^|[^\\])#9/.test(a)&&(i=9),{expand:null==(n=null==t?void 0:t.expand)||n,captureSelection:null==(r=null==t?void 0:t.captureSelection)||r,args:i,def:a}}return Zk({expand:null==(i=null==t?void 0:t.expand)||i,captureSelection:null==(a=null==t?void 0:t.captureSelection)||a,args:0},e)}function UA(e){if(!e)return{};let t={};for(let n of Object.keys(e)){let r=e[n];if(null==r)delete t[n];else if("object"==typeof r&&"package"in r)for(let e of Object.keys(r.package))t[e]=VA(r.package[e],{expand:!r.primitive,captureSelection:r.captureSelection});else t[n]=VA(r)}return t}function $A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"math";if(!e||0===e.length)return null;let n=null;if(e.startsWith("\\")){if(n=AA[e],n)return n.ifMode&&n.ifMode!==t?null:n;"math"===t?n=EA[e]:FA[e]&&(n={definitionType:"symbol",type:"mord",codepoint:FA[e]})}else if("math"===t){if(n=EA[e],!n&&1===e.length){let t=WA("math",e.codePointAt(0));return t.startsWith("\\")?Jk(Zk({},$A(t,"math")),{command:t}):null}}else FA[e]?n={definitionType:"symbol",type:"mord",codepoint:FA[e]}:"text"===t&&(n={definitionType:"symbol",type:"mord",codepoint:e.codePointAt(0)});return null!=n?n:null}function HA(e,t){if(!e.startsWith("\\"))return null;return t[e.slice(1)]}function WA(e,t){if(void 0===t)return"";if("math"===e&&kA[t])return kA[t];if("text"===e){return Object.keys(FA).find((e=>FA[e]===t))||String.fromCodePoint(t)}return String.fromCodePoint(t)}!function(){if(!eA())return!0;if(/firefox/i.test(navigator.userAgent)){let e=navigator.userAgent.match(/firefox\/(\d+)/i);return!!e&&parseInt(e[1])>=78}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let e=navigator.userAgent.match(/edg\/(\d+)/i);return!!e&&parseInt(e[1])>=79}return!0}()?(_A=/[a-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/,SA=/[\da-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/):(_A=new RegExp("\\p{Letter}","u"),SA=new RegExp("[0-9\\p{Letter}]","u"));var GA=[0,.68889,0,0,.72222],ZA=[0,.68889,0,0,.66667],JA=[0,.68889,0,0,.77778],XA=[0,.68889,0,0,.61111],YA=[.16667,.68889,0,0,.77778],QA=[0,.68889,0,0,.55556],eN=[0,0,0,0,.25],tN=[0,.825,0,0,2.33334],nN=[0,.9,0,0,2.33334],rN=[0,.68889,0,0,.54028],iN=[-.03598,.46402,0,0,.5],aN=[-.13313,.36687,0,0,1],oN=[.01354,.52239,0,0,1],sN=[.01354,.52239,0,0,1.11111],lN=[0,.54986,0,0,1],uN=[0,.69224,0,0,.5],cN=[0,.43056,0,0,1],dN=[.08198,.58198,0,0,.77778],pN=[.19444,.69224,0,0,.41667],hN=[.1808,.675,0,0,1],fN=[.19444,.69224,0,0,.83334],mN=[.13667,.63667,0,0,1],gN=[-.064,.437,0,0,1.334],vN=[.08167,.58167,0,0,.77778],yN=[0,.69224,0,0,.72222],bN=[0,.69224,0,0,.66667],xN=[-.13313,.36687,0,0,.77778],DN=[.06062,.54986,0,0,.77778],wN=[0,.69224,0,0,.77778],_N=[.25583,.75583,0,0,.77778],SN=[.25142,.75726,0,0,.77778],CN=[.20576,.70576,0,0,.77778],EN=[.30274,.79383,0,0,.77778],kN=[.22958,.72958,0,0,.77778],AN=[.1808,.675,0,0,.77778],NN=[.13667,.63667,0,0,.77778],MN=[.13597,.63597,0,0,.77778],FN=[.03517,.54986,0,0,.77778],TN=[0,.675,0,0,.77778],BN=[.19444,.69224,0,0,.61111],LN=[0,.54986,0,0,.76042],ON=[0,.54986,0,0,.66667],zN=[.0391,.5391,0,0,.77778],IN=[.03517,.54986,0,0,1.33334],PN=[.38569,.88569,0,0,.77778],qN=[.23222,.74111,0,0,.77778],RN=[.19444,.69224,0,0,.77778],jN=[0,.37788,0,0,.5],KN=[0,.54986,0,0,.72222],VN=[0,.69224,0,0,.83334],UN=[.11111,.69224,0,0,.66667],$N=[.26167,.75726,0,0,.77778],HN=[.48256,.98256,0,0,.77778],WN=[.28481,.79383,0,0,.77778],GN=[.08167,.58167,0,0,.22222],ZN=[.08167,.58167,0,0,.38889],JN=[0,.43056,.04028,0,.66667],XN=[.41951,.91951,0,0,.77778],YN=[.24982,.74947,0,0,.38865],QN=[.08319,.58283,0,0,.75623],eM=[0,.10803,0,0,.27764],tM=[0,.47534,0,0,.50181],nM=[.18906,.47534,0,0,.50181],rM=[0,.69141,0,0,.50181],iM=[.24982,.74947,0,0,.27764],aM=[0,.69141,0,0,.21471],oM=[.25,.75,0,0,.44722],sM=[0,.64444,0,0,.575],lM=[.08556,.58556,0,0,.89444],uM=[0,.69444,0,0,.89444],cM=[0,.68611,0,0,.9],dM=[0,.68611,0,0,.86944],pM=[.25,.75,0,0,.575],hM=[.25,.75,0,0,.31944],fM=[0,.69444,0,0,.63889],mM=[0,.69444,0,0,.31944],gM=[0,.44444,0,0,.63889],vM=[0,.44444,0,0,.51111],yM=[0,.69444,0,0,.575],bM=[.13333,.63333,0,0,.89444],xM=[0,.44444,0,0,.31944],DM=[0,.69444,0,0,.86944],wM=[0,.68611,0,0,.69166],_M=[0,.68611,0,0,.83055],SM=[0,.68611,0,0,.89444],CM=[0,.69444,0,0,.60278],EM=[.19444,.69444,0,0,.51111],kM=[0,.69444,0,0,.83055],AM=[-.10889,.39111,0,0,1.14999],NM=[.19444,.69444,0,0,.575],MM=[.19444,.69444,0,0,1.14999],FM=[.19444,.69444,0,0,.70277],TM=[.05556,.75,0,0,.575],BM=[0,.68611,0,0,.95833],LM=[.08556,.58556,0,0,.76666],OM=[-.02639,.47361,0,0,.575],zM=[0,.44444,0,0,.89444],IM=[0,.55556,0,0,.76666],PM=[-.10889,.39111,0,0,.89444],qM=[.00222,.50222,0,0,.89444],RM=[.19667,.69667,0,0,.89444],jM=[.08556,.58556,0,0,1.14999],KM=[0,.69444,0,0,.70277],VM=[-.02778,.47222,0,0,.575],UM=[.25,.75,0,0,.51111],$M=[-.13889,.36111,0,0,1.14999],HM=[.19444,.69444,0,0,1.02222],WM=[.12963,.69444,0,0,.89444],GM=[.19444,.69444,0,0,.44722],ZM=[0,.64444,.13167,0,.59111],JM=[.19444,.64444,.13167,0,.59111],XM=[0,.68611,.17208,0,.8961],YM=[.19444,.44444,.105,0,.53222],QM=[0,.44444,.085,0,.82666],eF=[0,.69444,.06709,0,.59111],tF=[0,.69444,.12945,0,.35555],nF=[0,.69444,0,0,.94888],rF=[0,.69444,.11472,0,.59111],iF=[0,.68611,.10778,0,.88555],aF=[0,.69444,.07939,0,.62055],oF=[0,.69444,.12417,0,.30667],sF=[0,.64444,.13556,0,.51111],lF=[.19444,.64444,.13556,0,.51111],uF=[0,.68333,.16389,0,.74333],cF=[.19444,.43056,.08847,0,.46],dF=[0,.43056,.07514,0,.71555],pF=[0,.69444,.06646,0,.51111],hF=[0,.69444,0,0,.83129],fF=[0,.69444,.1225,0,.51111],mF=[0,.68333,.09403,0,.76666],gF=[0,.68333,.11111,0,.76666],vF=[0,.69444,.06961,0,.51444],yF=[0,.69444,0,0,.27778],bF=[.25,.75,0,0,.38889],xF=[0,.64444,0,0,.5],DF=[0,.69444,0,0,.77778],wF=[0,.68333,0,0,.75],_F=[0,.68333,0,0,.77778],SF=[0,.68333,0,0,.68056],CF=[0,.68333,0,0,.72222],EF=[.25,.75,0,0,.5],kF=[.25,.75,0,0,.27778],AF=[0,.69444,0,0,.5],NF=[0,.69444,0,0,.55556],MF=[0,.43056,0,0,.44445],FF=[0,.43056,0,0,.5],TF=[.19444,.43056,0,0,.55556],BF=[0,.43056,0,0,.55556],LF=[.08333,.58333,0,0,.77778],OF=[0,.43056,0,0,.27778],zF=[0,.66786,0,0,.27778],IF=[0,.69444,0,0,.75],PF=[0,.66786,0,0,.5],qF=[0,.68333,0,0,.625],RF=[.19444,.69444,0,0,.44445],jF=[0,.69444,0,0,.72222],KF=[.19444,.69444,0,0,.5],VF=[.19444,.69444,0,0,1],UF=[.011,.511,0,0,1.126],$F=[.19444,.69444,0,0,.61111],HF=[.05556,.75,0,0,.5],WF=[0,.68333,0,0,.83334],GF=[.0391,.5391,0,0,.66667],ZF=[-.05555,.44445,0,0,.5],JF=[0,.43056,0,0,.77778],XF=[0,.55556,0,0,.66667],YF=[-.03625,.46375,0,0,.77778],QF=[-.01688,.48312,0,0,.77778],eT=[.0391,.5391,0,0,1],tT=[0,.69444,0,0,.61111],nT=[-.03472,.46528,0,0,.5],rT=[.25,.75,0,0,.44445],iT=[-.14236,.35764,0,0,1],aT=[.244,.744,0,0,.412],oT=[.19444,.69444,0,0,.88889],sT=[.12963,.69444,0,0,.77778],lT=[.19444,.69444,0,0,.38889],uT=[.011,.511,0,0,1.638],cT=[.19444,.69444,0,0,0],dT=[0,.44444,0,0,.575],pT=[.19444,.44444,0,0,.575],hT=[0,.68611,0,0,.75555],fT=[0,.69444,0,0,.66759],mT=[0,.68611,0,0,.80555],gT=[0,.68611,.08229,0,.98229],vT=[0,.68611,0,0,.76666],yT=[0,.44444,0,0,.58472],bT=[.19444,.44444,0,0,.6118],xT=[.19444,.43056,0,0,.5],DT=[0,.68333,.02778,.08334,.76278],wT=[0,.68333,.08125,.05556,.83125],_T=[0,.43056,0,.05556,.48472],ST=[.19444,.43056,0,.08334,.51702],CT=[.25,.75,0,0,.42778],ET=[0,.69444,0,0,.55],kT=[0,.69444,0,0,.73334],AT=[0,.69444,0,0,.79445],NT=[0,.69444,0,0,.51945],MT=[0,.69444,0,0,.70278],FT=[0,.69444,0,0,.76389],TT=[.25,.75,0,0,.34306],BT=[0,.69444,0,0,.56111],LT=[0,.69444,0,0,.25556],OT=[.19444,.45833,0,0,.56111],zT=[0,.45833,0,0,.56111],IT=[0,.69444,0,0,.30556],PT=[0,.69444,0,0,.58056],qT=[0,.69444,0,0,.67223],RT=[0,.69444,0,0,.85556],jT=[0,.69444,0,0,.55834],KT=[0,.65556,.11156,0,.5],VT=[0,.69444,.08094,0,.70834],UT=[.17014,0,0,0,.44445],$T=[0,.69444,.0799,0,.5],HT=[0,.69444,0,0,.73752],WT=[0,.69444,.09205,0,.5],GT=[0,.69444,.09031,0,.77778],ZT=[0,.69444,.07816,0,.27778],JT=[0,.69444,.00316,0,.5],XT=[.19444,.69444,0,0,.83334],YT=[.05556,.75,0,0,.83334],QT=[0,.75,0,0,.5],eB=[.125,.08333,0,0,.27778],tB=[0,.08333,0,0,.27778],nB=[0,.65556,0,0,.5],rB=[0,.69444,0,0,.47222],iB=[0,.69444,0,0,.66667],aB=[0,.69444,0,0,.59722],oB=[0,.69444,0,0,.54167],sB=[0,.69444,0,0,.70834],lB=[.25,.75,0,0,.28889],uB=[0,.69444,0,0,.51667],cB=[0,.44444,0,0,.44445],dB=[.19444,.44444,0,0,.51667],pB=[0,.44444,0,0,.38333],hB=[0,.44444,0,0,.51667],fB=[0,.69444,0,0,.83334],mB=[.35001,.85,0,0,.45834],gB=[.35001,.85,0,0,.57778],vB=[.35001,.85,0,0,.41667],yB=[.35001,.85,0,0,.58334],bB=[0,.72222,0,0,.55556],xB=[1e-5,.6,0,0,.66667],DB=[1e-5,.6,0,0,.77778],wB=[.25001,.75,0,0,.94445],_B=[.306,.805,.19445,0,.47222],SB=[.30612,.805,.19445,0,.47222],CB=[.25001,.75,0,0,.83334],EB=[.35001,.85,0,0,.47222],kB=[.25001,.75,0,0,1.11111],AB=[.65002,1.15,0,0,.59722],NB=[.65002,1.15,0,0,.81111],MB=[.65002,1.15,0,0,.47222],FB=[.65002,1.15,0,0,.66667],TB=[0,.75,0,0,1],BB=[.55001,1.05,0,0,1.27778],LB=[.862,1.36,.44445,0,.55556],OB=[.86225,1.36,.44445,0,.55556],zB=[.55001,1.05,0,0,1.11111],IB=[.65002,1.15,0,0,.52778],PB=[.65002,1.15,0,0,.61111],qB=[.55001,1.05,0,0,1.51112],RB=[.95003,1.45,0,0,.73611],jB=[.95003,1.45,0,0,1.04445],KB=[.95003,1.45,0,0,.52778],VB=[.95003,1.45,0,0,.75],UB=[0,.75,0,0,1.44445],$B=[.95003,1.45,0,0,.58334],HB=[1.25003,1.75,0,0,.79167],WB=[1.25003,1.75,0,0,1.27778],GB=[1.25003,1.75,0,0,.58334],ZB=[1.25003,1.75,0,0,.80556],JB=[0,.825,0,0,1.8889],XB=[1.25003,1.75,0,0,.63889],YB=[.64502,1.155,0,0,.875],QB=[1e-5,.6,0,0,.875],eL=[-99e-5,.601,0,0,.66667],tL=[.64502,1.155,0,0,.66667],nL=[1e-5,.9,0,0,.88889],rL=[.65002,1.15,0,0,.88889],iL=[.90001,0,0,0,.88889],aL=[-.00499,.605,0,0,1.05556],oL=[0,.12,0,0,.45],sL=[0,.61111,0,0,.525],lL=[.08333,.69444,0,0,.525],uL=[-.08056,.53055,0,0,.525],cL=[-.05556,.55556,0,0,.525],dL=[0,.43056,0,0,.525],pL=[.22222,.43056,0,0,.525],hL=[0,0,0,0,.525],fL={"AMS-Regular":{32:eN,65:GA,66:ZA,67:GA,68:GA,69:ZA,70:XA,71:JA,72:JA,73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:JA,76:ZA,77:[0,.68889,0,0,.94445],78:GA,79:YA,80:XA,81:YA,82:GA,83:QA,84:ZA,85:GA,86:GA,87:[0,.68889,0,0,1],88:GA,89:GA,90:ZA,107:QA,160:eN,165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:QA,295:rN,710:tN,732:nN,770:tN,771:nN,989:vN,1008:JN,8245:[0,.54986,0,0,.275],8463:rN,8487:GA,8498:QA,8502:ZA,8503:[0,.68889,0,0,.44445],8504:ZA,8513:[0,.68889,0,0,.63889],8592:iN,8594:iN,8602:aN,8603:aN,8606:oN,8608:oN,8610:sN,8611:sN,8619:lN,8620:lN,8621:[-.13313,.37788,0,0,1.38889],8622:aN,8624:uN,8625:uN,8630:cN,8631:cN,8634:dN,8635:dN,8638:pN,8639:pN,8642:pN,8643:pN,8644:hN,8646:hN,8647:hN,8648:fN,8649:hN,8650:fN,8651:oN,8652:oN,8653:aN,8654:aN,8655:aN,8666:mN,8667:mN,8669:[-.13313,.37788,0,0,1],8672:gN,8674:gN,8705:[0,.825,0,0,.5],8708:QA,8709:vN,8717:[0,.43056,0,0,.42917],8722:iN,8724:[.08198,.69224,0,0,.77778],8726:vN,8733:wN,8736:yN,8737:yN,8738:[.03517,.52239,0,0,.72222],8739:GN,8740:[.25142,.74111,0,0,.27778],8741:ZN,8742:[.25142,.74111,0,0,.5],8756:bN,8757:bN,8764:xN,8765:[-.13313,.37788,0,0,.77778],8769:xN,8770:YF,8774:EN,8776:QF,8778:vN,8782:DN,8783:DN,8785:dN,8786:dN,8787:dN,8790:wN,8791:kN,8796:[.08198,.91667,0,0,.77778],8806:_N,8807:_N,8808:SN,8809:SN,8812:[.25583,.75583,0,0,.5],8814:CN,8815:CN,8816:EN,8817:EN,8818:kN,8819:kN,8822:AN,8823:AN,8828:NN,8829:NN,8830:kN,8831:kN,8832:CN,8833:CN,8840:EN,8841:EN,8842:MN,8843:MN,8847:FN,8848:FN,8858:dN,8859:dN,8861:dN,8862:TN,8863:TN,8864:TN,8865:TN,8872:[0,.69224,0,0,.61111],8873:yN,8874:[0,.69224,0,0,.88889],8876:XA,8877:XA,8878:GA,8879:GA,8882:FN,8883:FN,8884:NN,8885:NN,8888:[0,.54986,0,0,1.11111],8890:TF,8891:BN,8892:BN,8901:[0,.54986,0,0,.27778],8903:vN,8905:vN,8906:vN,8907:wN,8908:wN,8909:[-.03598,.46402,0,0,.77778],8910:LN,8911:LN,8912:FN,8913:FN,8914:ON,8915:ON,8916:bN,8918:zN,8919:zN,8920:IN,8921:IN,8922:PN,8923:PN,8926:NN,8927:NN,8928:EN,8929:EN,8934:qN,8935:qN,8936:qN,8937:qN,8938:CN,8939:CN,8940:EN,8941:EN,8994:RN,8995:RN,9416:[.15559,.69224,0,0,.90222],9484:uN,9488:uN,9492:jN,9496:jN,9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:TN,9633:TN,9650:KN,9651:KN,9654:FN,9660:KN,9661:KN,9664:FN,9674:UN,9733:[.19444,.69224,0,0,.94445],10003:VN,10016:VN,10731:UN,10846:[.19444,.75583,0,0,.61111],10877:NN,10878:NN,10885:_N,10886:_N,10887:MN,10888:MN,10889:$N,10890:$N,10891:HN,10892:HN,10901:NN,10902:NN,10933:SN,10934:SN,10935:$N,10936:$N,10937:$N,10938:$N,10949:_N,10950:_N,10955:WN,10956:WN,57350:GN,57351:ZN,57352:vN,57353:JN,57356:SN,57357:SN,57358:XN,57359:EN,57360:EN,57361:XN,57366:SN,57367:SN,57368:SN,57369:SN,57370:MN,57371:MN},"Caligraphic-Regular":{32:eN,65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:eN},"Fraktur-Regular":{32:eN,33:[0,.69141,0,0,.29574],34:aM,38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:YN,41:YN,42:[0,.62119,0,0,.27764],43:QN,44:eM,45:QN,46:eM,47:[.24982,.74947,0,0,.50181],48:tM,49:tM,50:tM,51:nM,52:nM,53:nM,54:rM,55:nM,56:rM,57:nM,58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:iM,93:iM,94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:eN,8216:aM,8217:aM,58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:eN,33:[0,.69444,0,0,.35],34:CM,35:[.19444,.69444,0,0,.95833],36:TM,37:[.05556,.75,0,0,.95833],38:uM,39:mM,40:oM,41:oM,42:[0,.75,0,0,.575],43:bM,44:[.19444,.15556,0,0,.31944],45:pB,46:[0,.15556,0,0,.31944],47:pM,48:sM,49:sM,50:sM,51:sM,52:sM,53:sM,54:sM,55:sM,56:sM,57:sM,58:xM,59:[.19444,.44444,0,0,.31944],60:lM,61:PM,62:lM,63:[0,.69444,0,0,.54305],64:uM,65:dM,66:[0,.68611,0,0,.81805],67:_M,68:[0,.68611,0,0,.88194],69:hT,70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:cM,73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:wM,77:[0,.68611,0,0,1.09166],78:cM,79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:dM,89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:hM,92:pM,93:hM,94:yM,95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:fM,99:vM,100:fM,101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:fM,105:mM,106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:mM,109:[0,.44444,0,0,.95833],110:gM,111:dT,112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:gM,118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:vM,123:pM,124:hM,125:pM,126:[.35,.34444,0,0,.575],160:eN,163:[0,.69444,0,0,.86853],168:yM,172:[0,.44444,0,0,.76666],176:DM,177:bM,184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:bM,216:[.04861,.73472,0,0,.89444],223:aB,230:[0,.44444,0,0,.83055],247:bM,248:[.09722,.54167,0,0,.575],305:xM,338:[0,.68611,0,0,1.16944],339:zM,567:[.19444,.44444,0,0,.35139],710:yM,711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:yM,715:yM,728:yM,729:mM,730:DM,732:yM,733:yM,915:wM,916:BM,920:SM,923:mT,926:vT,928:cM,931:_M,933:SM,934:_M,936:SM,937:_M,8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:mM,8217:mM,8220:CM,8221:CM,8224:EM,8225:EM,8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:fT,8465:kM,8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:kM,8501:KM,8592:AM,8593:NM,8594:AM,8595:NM,8596:AM,8597:pM,8598:MM,8599:MM,8600:MM,8601:MM,8636:AM,8637:AM,8640:AM,8641:AM,8656:AM,8657:FM,8658:AM,8659:FM,8660:AM,8661:[.25,.75,0,0,.70277],8704:fM,8706:[0,.69444,.06389,0,.62847],8707:fM,8709:TM,8711:BM,8712:LM,8715:LM,8722:bM,8723:bM,8725:pM,8726:pM,8727:VM,8728:OM,8729:OM,8730:[.18,.82,0,0,.95833],8733:zM,8734:[0,.44444,0,0,1.14999],8736:yN,8739:hM,8741:pM,8743:IM,8744:IM,8745:IM,8746:IM,8747:[.19444,.69444,.12778,0,.56875],8764:PM,8768:[.19444,.69444,0,0,.31944],8771:qM,8776:[.02444,.52444,0,0,.89444],8781:qM,8801:qM,8804:RM,8805:RM,8810:jM,8811:jM,8826:lM,8827:lM,8834:lM,8835:lM,8838:RM,8839:RM,8846:IM,8849:RM,8850:RM,8851:IM,8852:IM,8853:bM,8854:bM,8855:bM,8856:bM,8857:bM,8866:KM,8867:KM,8868:uM,8869:uM,8900:OM,8901:[-.02639,.47361,0,0,.31944],8902:VM,8968:UM,8969:UM,8970:UM,8971:UM,8994:$M,8995:$M,9651:HM,9657:VM,9661:HM,9667:VM,9711:MM,9824:WM,9825:WM,9826:WM,9827:WM,9837:[0,.75,0,0,.44722],9838:GM,9839:GM,10216:oM,10217:oM,10815:cM,10927:RM,10928:RM,57376:cT},"Main-BoldItalic":{32:eN,33:[0,.69444,.11417,0,.38611],34:aF,35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:tF,40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:ZM,49:ZM,50:ZM,51:ZM,52:JM,53:ZM,54:ZM,55:JM,56:ZM,57:ZM,58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:rF,64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:XM,73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:XM,79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:eF,95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:YM,104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:YM,114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:eN,168:[0,.69444,.11473,0,.59111],176:nF,184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:QM,248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:QM,567:[.19444,.44444,.04611,0,.385],710:eF,711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:tF,730:nF,732:rF,733:rF,915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:XM,931:[0,.68611,.11431,0,.82666],933:iF,934:[0,.68611,.05632,0,.82666],936:iF,937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:tF,8217:tF,8220:[0,.69444,.16772,0,.62055],8221:aF},"Main-Italic":{32:eN,33:oF,34:vF,35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:oF,40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:sF,49:sF,50:sF,51:sF,52:lF,53:sF,54:sF,55:lF,56:sF,57:sF,58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:fF,64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:uF,73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:uF,79:mF,80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:uF,86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:pF,95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:cF,104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:cF,114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:eN,168:[0,.66786,.10474,0,.51111],176:hF,184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:dF,248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:dF,710:pF,711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:hF,732:[0,.66786,.11585,0,.51111],733:fF,915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:mF,923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:uF,931:[0,.68333,.12028,0,.71555],933:gF,934:[0,.68333,.05986,0,.71555],936:gF,937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:oF,8217:oF,8220:[0,.69444,.1685,0,.51444],8221:vF,8463:rN},"Main-Regular":{32:eN,33:yF,34:AF,35:XT,36:HF,37:YT,38:DF,39:yF,40:bF,41:bF,42:QT,43:LF,44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:EF,48:xF,49:xF,50:xF,51:xF,52:xF,53:xF,54:xF,55:xF,56:xF,57:xF,58:OF,59:[.19444,.43056,0,0,.27778],60:zN,61:xN,62:zN,63:rB,64:DF,65:wF,66:[0,.68333,0,0,.70834],67:CF,68:[0,.68333,0,0,.76389],69:SF,70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:wF,73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:_F,76:qF,77:[0,.68333,0,0,.91667],78:wF,79:_F,80:SF,81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:CF,85:wF,86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:wF,89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:kF,92:EF,93:kF,94:AF,95:[.31,.12056,.02778,0,.5],97:FF,98:NF,99:MF,100:NF,101:MF,102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:NF,105:zF,106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:yF,109:[0,.43056,0,0,.83334],110:BF,111:FF,112:TF,113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:BF,118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:MF,123:EF,124:kF,125:EF,126:[.35,.31786,0,0,.5],160:eN,163:[0,.69444,0,0,.76909],167:RF,168:PF,172:[0,.43056,0,0,.66667],176:IF,177:LF,182:$F,184:UT,198:[0,.68333,0,0,.90278],215:LF,216:[.04861,.73194,0,0,.77778],223:AF,230:[0,.43056,0,0,.72222],247:LF,248:[.09722,.52778,0,0,.5],305:OF,338:[0,.68333,0,0,1.01389],339:JF,567:[.19444,.43056,0,0,.30556],710:AF,711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:AF,715:AF,728:AF,729:zF,730:IF,732:PF,733:AF,915:qF,916:WF,920:_F,923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:wF,931:CF,933:_F,934:CF,936:_F,937:CF,8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:yF,8217:yF,8220:AF,8221:AF,8224:RF,8225:RF,8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:rN,8465:jF,8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:jF,8501:tT,8592:aN,8593:KF,8594:aN,8595:KF,8596:aN,8597:EF,8598:VF,8599:VF,8600:VF,8601:VF,8614:[.011,.511,0,0,1],8617:UF,8618:UF,8636:aN,8637:aN,8640:aN,8641:aN,8652:[.011,.671,0,0,1],8656:aN,8657:$F,8658:aN,8659:$F,8660:aN,8661:[.25,.75,0,0,.61111],8704:NF,8706:[0,.69444,.05556,.08334,.5309],8707:NF,8709:HF,8711:WF,8712:GF,8715:GF,8722:LF,8723:LF,8725:EF,8726:EF,8727:nT,8728:ZF,8729:ZF,8730:[.2,.8,0,0,.83334],8733:JF,8734:cN,8736:yN,8739:kF,8741:EF,8743:XF,8744:XF,8745:XF,8746:XF,8747:[.19444,.69444,.11111,0,.41667],8764:xN,8768:[.19444,.69444,0,0,.27778],8771:YF,8773:[-.022,.589,0,0,1],8776:QF,8781:YF,8784:[-.133,.67,0,0,.778],8801:YF,8804:MN,8805:MN,8810:eT,8811:eT,8826:zN,8827:zN,8834:zN,8835:zN,8838:MN,8839:MN,8846:XF,8849:MN,8850:MN,8851:XF,8852:XF,8853:LF,8854:LF,8855:LF,8856:LF,8857:LF,8866:tT,8867:tT,8868:DF,8869:DF,8872:[.249,.75,0,0,.867],8900:ZF,8901:[-.05555,.44445,0,0,.27778],8902:nT,8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:rT,8969:rT,8970:rT,8971:rT,8994:iT,8995:iT,9136:aT,9137:aT,9651:oT,9657:nT,9661:oT,9667:nT,9711:VF,9824:sT,9825:sT,9826:sT,9827:sT,9837:[0,.75,0,0,.38889],9838:lT,9839:lT,10216:bF,10217:bF,10222:aT,10223:aT,10229:[.011,.511,0,0,1.609],10230:uT,10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:uT,10815:wF,10927:MN,10928:MN,57376:cT},"Math-BoldItalic":{32:eN,48:dT,49:dT,50:dT,51:pT,52:pT,53:pT,54:sM,55:pT,56:sM,57:pT,65:dM,66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:gT,73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:hT,77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:fT,105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:yT,112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:eN,915:[0,.68611,.15972,0,.65694],916:BM,920:[0,.68611,.03194,0,.86722],923:mT,926:[0,.68611,.07458,0,.84125],928:gT,931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:vT,936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:yT,960:[0,.44444,.03704,0,.68241],961:bT,962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:bT,1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:eN,48:FF,49:FF,50:FF,51:xT,52:xT,53:xT,54:xF,55:xT,56:xF,57:xT,65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:wT,73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:DT,80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:_T,112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:eN,915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:DT,923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:wT,931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:_T,960:[0,.43056,.03588,0,.57003],961:ST,962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:ST,1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:eN,33:[0,.69444,0,0,.36667],34:jT,35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:IT,40:CT,41:CT,42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:ET,49:ET,50:ET,51:ET,52:ET,53:ET,54:ET,55:ET,56:ET,57:ET,58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:NT,64:kT,65:kT,66:kT,67:MT,68:AT,69:[0,.69444,0,0,.64167],70:tT,71:kT,72:AT,73:[0,.69444,0,0,.33056],74:NT,75:FT,76:PT,77:[0,.69444,0,0,.97778],78:AT,79:AT,80:MT,81:[.10556,.69444,0,0,.79445],82:MT,83:tT,84:kT,85:FT,86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:kT,89:[0,.69444,.0275,0,.73334],90:qT,91:TT,93:TT,94:ET,95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:BT,99:[0,.45833,0,0,.48889],100:BT,101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:BT,105:LT,106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:LT,109:[0,.45833,0,0,.86667],110:zT,111:[0,.45833,0,0,.55],112:OT,113:OT,114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:zT,118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:eN,168:ET,176:kT,180:ET,184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:ET,711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:ET,729:IT,730:kT,732:ET,733:ET,915:PT,916:[0,.69444,0,0,.91667],920:RT,923:qT,926:kT,928:AT,931:AT,933:RT,934:AT,936:RT,937:AT,8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:IT,8217:IT,8220:jT,8221:jT},"SansSerif-Italic":{32:eN,33:[0,.69444,.05733,0,.31945],34:JT,35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:ZT,40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:eB,45:[0,.44444,.01946,0,.33333],46:tB,47:[.25,.75,.13164,0,.5],48:KT,49:KT,50:KT,51:KT,52:KT,53:KT,54:KT,55:KT,56:KT,57:KT,58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:iB,66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:VT,73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:oB,77:[0,.69444,.08094,0,.875],78:VT,79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:$T,95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:eN,168:[0,.67937,.06385,0,.5],176:HT,184:UT,305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:$T,711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:WT,715:AF,728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:HT,732:[0,.67659,.08826,0,.5],733:WT,915:[0,.69444,.13372,0,.54167],916:fB,920:[0,.69444,.07555,0,.77778],923:tT,926:[0,.69444,.12816,0,.66667],928:VT,931:[0,.69444,.11983,0,.72222],933:GT,934:[0,.69444,.04603,0,.72222],936:GT,937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:ZT,8217:ZT,8220:[0,.69444,.14205,0,.5],8221:JT},"SansSerif-Regular":{32:eN,33:[0,.69444,0,0,.31945],34:AF,35:XT,36:HF,37:YT,38:[0,.69444,0,0,.75834],39:yF,40:bF,41:bF,42:QT,43:LF,44:eB,45:[0,.44444,0,0,.33333],46:tB,47:EF,48:nB,49:nB,50:nB,51:nB,52:nB,53:nB,54:nB,55:nB,56:nB,57:nB,58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:rB,64:iB,65:iB,66:iB,67:fM,68:[0,.69444,0,0,.72223],69:aB,70:[0,.69444,0,0,.56945],71:iB,72:sB,73:yF,74:rB,75:[0,.69444,0,0,.69445],76:oB,77:[0,.69444,0,0,.875],78:sB,79:[0,.69444,0,0,.73611],80:fM,81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:NF,84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:iB,89:[0,.69444,.025,0,.66667],90:tT,91:lB,93:lB,94:AF,95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:uB,99:cB,100:uB,101:cB,102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:uB,105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:hB,111:[0,.44444,0,0,.5],112:dB,113:dB,114:[0,.44444,.01389,0,.34167],115:pB,116:[0,.57143,0,0,.36111],117:hB,118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:eN,168:[0,.67937,0,0,.5],176:iB,184:UT,305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:AF,711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:AF,715:AF,728:AF,729:[0,.67937,0,0,.27778],730:iB,732:[0,.67659,0,0,.5],733:AF,915:oB,916:fB,920:DF,923:tT,926:iB,928:sB,931:jF,933:DF,934:jF,936:DF,937:jF,8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:yF,8217:yF,8220:AF,8221:AF},"Script-Regular":{32:eN,65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:eN},"Size1-Regular":{32:eN,40:mB,41:mB,47:gB,91:vB,92:gB,93:vB,123:yB,125:yB,160:eN,710:bB,732:bB,770:bB,771:bB,8214:[-99e-5,.601,0,0,.77778],8593:xB,8595:xB,8657:DB,8659:DB,8719:wB,8720:wB,8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:SB,8748:_B,8749:_B,8750:SB,8896:CB,8897:CB,8898:CB,8899:CB,8968:EB,8969:EB,8970:EB,8971:EB,9168:eL,10216:EB,10217:EB,10752:kB,10753:kB,10754:kB,10756:CB,10758:CB},"Size2-Regular":{32:eN,40:AB,41:AB,47:NB,91:MB,92:NB,93:MB,123:FB,125:FB,160:eN,710:TB,732:TB,770:TB,771:TB,8719:BB,8720:BB,8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:OB,8748:LB,8749:LB,8750:OB,8896:zB,8897:zB,8898:zB,8899:zB,8968:IB,8969:IB,8970:IB,8971:IB,10216:PB,10217:PB,10752:qB,10753:qB,10754:qB,10756:zB,10758:zB},"Size3-Regular":{32:eN,40:RB,41:RB,47:jB,91:KB,92:jB,93:KB,123:VB,125:VB,160:eN,710:UB,732:UB,770:UB,771:UB,8730:[.95003,1.45,0,0,1],8968:$B,8969:$B,8970:$B,8971:$B,10216:VB,10217:VB},"Size4-Regular":{32:eN,40:HB,41:HB,47:WB,91:GB,92:WB,93:GB,123:ZB,125:ZB,160:eN,710:JB,732:JB,770:JB,771:JB,8730:[1.25003,1.75,0,0,1],8968:XB,8969:XB,8970:XB,8971:XB,9115:YB,9116:QB,9117:YB,9118:YB,9119:QB,9120:YB,9121:tL,9122:eL,9123:tL,9124:tL,9125:eL,9126:tL,9127:nL,9128:rL,9129:iL,9130:[0,.3,0,0,.88889],9131:nL,9132:rL,9133:iL,9143:[.88502,.915,0,0,1.05556],10216:ZB,10217:ZB,57344:aL,57345:aL,57680:oL,57681:oL,57682:oL,57683:oL},"Typewriter-Regular":{32:hL,33:sL,34:sL,35:sL,36:lL,37:lL,38:sL,39:sL,40:lL,41:lL,42:[0,.52083,0,0,.525],43:uL,44:[.13889,.125,0,0,.525],45:uL,46:[0,.125,0,0,.525],47:lL,48:sL,49:sL,50:sL,51:sL,52:sL,53:sL,54:sL,55:sL,56:sL,57:sL,58:dL,59:[.13889,.43056,0,0,.525],60:cL,61:[-.19549,.41562,0,0,.525],62:cL,63:sL,64:sL,65:sL,66:sL,67:sL,68:sL,69:sL,70:sL,71:sL,72:sL,73:sL,74:sL,75:sL,76:sL,77:sL,78:sL,79:sL,80:sL,81:[.13889,.61111,0,0,.525],82:sL,83:sL,84:sL,85:sL,86:sL,87:sL,88:sL,89:sL,90:sL,91:lL,92:lL,93:lL,94:sL,95:[.09514,0,0,0,.525],96:sL,97:dL,98:sL,99:dL,100:sL,101:dL,102:sL,103:pL,104:sL,105:sL,106:[.22222,.61111,0,0,.525],107:sL,108:sL,109:dL,110:dL,111:dL,112:pL,113:pL,114:dL,115:dL,116:[0,.55358,0,0,.525],117:dL,118:dL,119:dL,120:dL,121:pL,122:dL,123:lL,124:lL,125:lL,126:sL,127:sL,160:hL,176:sL,184:[.19445,0,0,0,.525],305:dL,567:pL,711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:sL,715:sL,728:sL,730:sL,770:sL,771:sL,776:sL,915:sL,916:sL,920:sL,923:sL,926:sL,928:sL,931:sL,933:sL,934:sL,936:sL,937:sL,8216:sL,8217:sL,8242:sL,9251:[.11111,.21944,0,0,.525]}},mL=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,gL=10,vL=.25,yL=.431,bL={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[yL,yL,yL],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.5,.732,.925],num2:[.394,.384,.5],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[vL,vL,vL],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},xL=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],DL={"\xa0":" ","\u200b":" ","\xc5":"A","\xc7":"C","\xd0":"D","\xde":"o","\xe5":"a","\xe7":"c","\xf0":"d","\xfe":"o","\u0410":"A","\u0411":"B","\u0412":"B","\u0413":"F","\u0414":"A","\u0415":"E","\u0416":"K","\u0417":"3","\u0418":"N","\u0419":"N","\u041a":"K","\u041b":"N","\u041c":"M","\u041d":"H","\u041e":"O","\u041f":"N","\u0420":"P","\u0421":"C","\u0422":"T","\u0423":"y","\u0424":"O","\u0425":"X","\u0426":"U","\u0427":"h","\u0428":"W","\u0429":"W","\u042a":"B","\u042b":"X","\u042c":"B","\u042d":"3","\u042e":"X","\u042f":"R","\u0430":"a","\u0431":"b","\u0432":"a","\u0433":"r","\u0434":"y","\u0435":"e","\u0436":"m","\u0437":"e","\u0438":"n","\u0439":"n","\u043a":"n","\u043b":"n","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"n","\u0440":"p","\u0441":"c","\u0442":"o","\u0443":"y","\u0444":"b","\u0445":"x","\u0446":"n","\u0447":"n","\u0448":"w","\u0449":"w","\u044a":"a","\u044b":"m","\u044c":"a","\u044d":"e","\u044e":"m","\u044f":"r"};function wL(e,t){void 0===e&&(e=77);let n=fL[t][e];if(n)return{defaultMetrics:!1,depth:n[0],height:n[1],italic:n[2],skew:n[3],width:n[4]};if(11034===e)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0,width:.8};let r=String.fromCodePoint(e);if(r in DL)e=DL[r].codePointAt(0);else if(mL.test(r))return e=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0,width:1};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0,width:.8}}var _L={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],longrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],longleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],longleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],longrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],longleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],longleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],longRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716],longLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},SL={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},CL={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:"m 529 160\n  c -179 0 -524 -115 -524 -115\n  c -5 -1 -9 -5 -9 -10\n  c 0 -1 1 -2 1 -3\n  l 4 -22\n  c 1 -5 5 -9 11 -9\n  h 2\n  s 338 93 512 92\n  c 174 0 513 -92 513 -92\n  h 2\n  c 5 0 9 4 11 9\n  l 5 22\n  c 1 6 -2 12 -8 13\n  c 0 0 -342 115 -520 115\n  z\n  ",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",widetilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",widetilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",widetilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",widetilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};var EL,kL=8205,AL=[[kL,1],[65038,2],[127995,5],[129456,4],[917536,96]],NL=[127462,127487];function ML(e){var t;if(void 0===EL){EL={};for(let e of AL)for(let t=e[0];t<=e[0]+e[1]-1;t++)EL[t]=!0}return null!=(t=EL[e])&&t}function FL(e){return e>=NL[0]&&e<=NL[1]}function TL(e){if(/^[\u0020-\u00FF]*$/.test(e))return e;let t=[],n=function(e){let t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(13===r&&10===e.charCodeAt(n+1)&&(r=10,n++),(13===r||12===r)&&(r=10),0===r&&(r=65533),r>=55296&&r<=56319){let t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(r=65536+1024*(r-55296)+(t-56320),n++)}t.push(r)}return t}(e),r=0;for(;r<n.length;){let e=n[r++],i=n[r];if(i===kL){let e=r-1;for(r+=2;n[r]===kL;)r+=2;t.push(String.fromCodePoint(...n.slice(e,r-e+1)))}else if(ML(i)){let e=r-1;for(;ML(n[r]);)r+=n[r]===kL?2:1;t.push(String.fromCodePoint(...n.slice(e,2*r-e-1)))}else FL(e)?(r+=1,t.push(String.fromCodePoint(...n.slice(r-2,2)))):t.push(String.fromCodePoint(e))}return t}var BL=class{constructor(e){this.obeyspaces=!1,this.pos=0,this.s=TL(e)}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){let t="string"==typeof this.s?e.exec(this.s.slice(this.pos)):e.exec(this.s.slice(this.pos).join(""));return null!=t&&t[0]?(this.pos+=t[0].length,t[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let e=this.get();if("\\"===e){if(!this.end()){let e=this.match(/^[a-zA-Z\*]+/);return e?this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/):e=this.get(),"\\"+e}}else{if("{"===e)return"<{>";if("}"===e)return"<}>";if("^"===e){if("^"===this.peek()){this.get();let e=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(e)return String.fromCodePoint(Number.parseInt(e.slice(e.lastIndexOf("^")+1),16))}return e}if("#"===e){if(!this.end()){let e=!1;if(/[\d?@]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){let t=this.s[this.pos+1];e=/[^\dA-Za-z]/.test(t)}return e?"#"+this.get():"#"}}else if("$"===e)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return e}};function LL(e,t){var n,r,i,a;let o=[],s=e.next();if(s&&"\\relax"!==s)if("\\noexpand"===s)s=e.next(),s&&o.push(s);else if("\\obeyspaces"===s)e.obeyspaces=!0;else if("\\bgroup"===s)o.push("<{>");else if("\\egroup"===s)o.push("<}>");else if("\\string"===s){if(s=e.next(),s)if(s.startsWith("\\"))for(let l of s)o.push("\\"===l?"\\backslash":l);else"<{>"===s?o.push("\\{"):"<space>"===s?o.push("~"):"<}>"===s&&o.push("\\}")}else if("\\csname"===s){for(;"<space>"===e.peek();)e.next();let i="",a=!1,l=[];do{if(0===l.length)if(/^#[\d?@]$/.test(e.peek())){let i=e.get().slice(1);l=OL(null!=(r=null!=(n=null==t?void 0:t(i))?n:null==t?void 0:t("?"))?r:"\\placeholder{}",t),s=l[0]}else s=e.next(),l=s?[s]:[];a=0===l.length,!a&&"\\endcsname"===s&&(a=!0,l.shift()),a||(a="<$>"===s||"<$$>"===s||"<{>"===s||"<}>"===s||"string"==typeof s&&s.length>1&&s.startsWith("\\")),a||(i+=l.shift())}while(!a);i&&o.push("\\"+i),o.push(...l)}else if("\\endcsname"!==s)if(s.length>1&&s.startsWith("#")){let e=s.slice(1);o.push(...OL(null!=(a=null!=(i=null==t?void 0:t(e))?i:null==t?void 0:t("?"))?a:"\\placeholder{}",t))}else o.push(s);return o}function OL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[],r="";for(let o of e.toString().split(/\r?\n/)){r&&n.push(r),r=" ";let e=o.match(/((?:\\%)|[^%])*/);null!==e&&n.push(e[0])}let i=new BL(n.join("")),a=[];do{a.push(...LL(i,t))}while(!i.end());return a}function zL(e){let t="",n=[];for(let r of e)r&&(t&&/^[a-zA-Z\*]/.test(r)&&n.push(t),n.push(r),/^\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(r)&&n.push(" "),t=/\\[a-zA-Z]+\*?$/.test(r)?" ":"");return n.join("")}function IL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.startsWith("\\"),0===n.length?e:zL([e,...n.map((e=>"{".concat(e,"}")))])}function PL(e){return zL(e.map((e=>{var t;return null!=(t={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])?t:e})))}var qL=class e{constructor(t){e._registry[t]=this}static createAtom(t,n,r){return e._registry[t].createAtom(n,$A(n,t),r)}static serialize(t,n){var r;if(!t||0===t.length)return"";if(null!=(r=n.skipStyles)&&r){let r=[];for(let i of jL(t)){let t=e._registry[i[0].mode];r.push(...t.serialize(i,n))}return zL(r)}return zL(function(e,t){if(0===e.length)return[];let{parent:n}=e[0],r=null==n?void 0:n.computedStyle.fontSize,i=[];for(let a of KL(e,"fontSize")){let e=a[0].computedStyle.fontSize,o=UL(a,t);o&&(!e||"auto"===e||n&&r===e?i.push(...o):i.push(["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][e],...o))}return i}(t,n))}static getFont(t,n,r){return e._registry[t].getFont(n,r)}};qL._registry={};var RL=qL;function jL(e){let t=[],n=[],r="NONE";for(let i of e)"first"!==i.type&&(i.mode!==r?(n.length>0&&t.push(n),n=[i],r=i.mode):n.push(i));return n.length>0&&t.push(n),t}function KL(e,t){let n,r=[],i=[];for(let a of e)if("first"!==a.type&&a.style){let e;"variant"===t?(e=a.style.variant,a.style.variantStyle&&"up"!==a.style.variantStyle&&(e+="-"+a.style.variantStyle)):e=a.style[t],e===n?i.push(a):(i.length>0&&r.push(i),i=[a],n=e)}return i.length>0&&r.push(i),r}function VL(e,t){var n;let{parent:r}=e[0],i=null==r?void 0:r.computedStyle.color,a=[];for(let o of jL(e)){let e=t.defaultMode;for(let s of KL(o,"color")){let o=s[0].computedStyle,l=RL._registry[s[0].mode].serialize(s,Jk(Zk({},t),{defaultMode:"text"===e?"text":"math"}));t.skipStyles||!o.color||"none"===o.color||r&&i===o.color?a.push(zL(l)):a.push(IL("\\textcolor",null!=(n=o.verbatimColor)?n:o.color,zL(l)))}}return a}function UL(e,t){let{parent:n}=e[0],r=null==n?void 0:n.computedStyle.backgroundColor;return KL(e,"backgroundColor").map((e=>{var i;if(e.length>0||"box"!==e[0].type){let a=e[0].computedStyle;if(a.backgroundColor&&"none"!==a.backgroundColor&&(!n||r!==a.backgroundColor))return IL("\\colorbox",null!=(i=a.verbatimBackgroundColor)?i:a.backgroundColor,zL(VL(e,Jk(Zk({},t),{defaultMode:"text"}))))}return zL(VL(e,t))}))}function $L(e){return e?{mord:"ord",mbin:"bin",mop:"op",mrel:"rel",mopen:"open",mclose:"close",mpunct:"punct",minner:"inner",spacing:"ignore",latex:"latex",composition:"inner",error:"inner",placeholder:"ord",supsub:"ignore"}[e]:void 0}function HL(e){if(0===e.length)return"ord";let t=$L(e[0].type),n=$L(e[e.length-1].type);return t&&t===n?t:"ord"}function WL(e,t){if("string"==typeof e)return e;if("number"==typeof e){Number.isFinite(e);let n=Math.ceil(100*e)/100;return 0===n?"0":n.toString()+(null!=t?t:"")}return""}var GL=class e{constructor(t,n){var r,i,a,o,s;if("number"==typeof t?this.value=String.fromCodePoint(t):"string"==typeof t?this.value=t:Qk(t)?this.children=t.filter((e=>null!==e)):t&&t instanceof e&&(this.children=[t]),this.children)for(let e of this.children)e.parent=this;this.type=null!=(r=null==n?void 0:n.type)?r:"ignore",this.isSelected=!0===(null==n?void 0:n.isSelected),null!=n&&n.caret&&(this.caret=n.caret),this.classes=null!=(i=null==n?void 0:n.classes)?i:"",this.isTight=null!=(a=null==n?void 0:n.isTight)&&a,null!=n&&n.attributes&&(this.attributes=n.attributes);let l=null==n?void 0:n.fontFamily;null!=n&&n.style&&this.value&&(l=null!=(s=RL.getFont(null!=(o=n.mode)?o:"math",this,Jk(Zk({variant:"normal"},n.style),{letterShapeStyle:n.letterShapeStyle})))?s:void 0),l||(l="Main-Regular"),this._height=0,this._depth=0,this._width=0,this.hasExplicitWidth=!1,this.skew=0,this.italic=0,this.maxFontSize=0,this.scale=1,void 0!==(null==n?void 0:n.maxFontSize)&&(this.maxFontSize=n.maxFontSize),function(e,t){var n;if("latex"===e.type)return e.height=.9,e.depth=.2,void(e._width=1);if(e.value){e.height=-1/0,e.depth=-1/0,e._width=0,e.skew=-1/0,e.italic=-1/0;for(let n=0;n<e.value.length;n++){let r=wL(e.value.codePointAt(n),t);e.height=Math.max(e.height,r.height),e.depth=Math.max(e.depth,r.depth),e._width+=r.width,e.skew=r.skew,e.italic=r.italic}return}if(e.children&&e.children.length>0){let t=-1/0,r=-1/0,i=0;for(let a of e.children)a.height>t&&(t=a.height),a.depth>r&&(r=a.depth),i=Math.max(i,null!=(n=a.maxFontSize)?n:0);e.height=t,e.depth=r,e._width=e.children.reduce(((e,t)=>e+t.width),0),e.maxFontSize=i}}(this,l)}set atomID(e){void 0===e||0===e.length||(this.id=e)}selected(e){if(this.isSelected!==e&&(this.isSelected=e,this.children))for(let t of this.children)t.selected(e)}setStyle(e,t,n){if(void 0===t)return;let r=WL(t,n);r.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[e]=r)}setTop(e){Number.isFinite(e)&&Math.abs(e)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=WL(e,"em"),this.height-=e,this.depth+=e)}get left(){var e;return null!=(e=this.cssProperties)&&e["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(e){Number.isFinite(e)&&(0===e?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=WL(e,"em")))}set right(e){Number.isFinite(e)&&(0===e?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=WL(e,"em")))}set bottom(e){Number.isFinite(e)&&(0===e?this.cssProperties&&delete this.cssProperties["margin-bottom"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-bottom"]=WL(e,"em")))}get width(){return this._width*this.scale}set width(e){this._width=e,this.hasExplicitWidth=!0}set softWidth(e){}get height(){return this._height*this.scale}set height(e){this._height=e}get depth(){return this._depth*this.scale}set depth(e){this._depth=e}wrap(e){let t=e.parent;if(!t)return this;e.isPhantom&&this.setStyle("opacity",0);let n=e.color;n&&n!==t.color&&this.setStyle("color",n);let r=e.backgroundColor;this.isSelected&&(r=gA(r)),r&&r!==t.backgroundColor&&(this.setStyle("background-color",r),this.setStyle("display","inline-block"));let i=e.scalingFactor;return this.scale=i,this.skew*=i,this.italic*=i,this}toMarkup(){var e,t,n,r;let i=null!=(e=this.value)?e:"";if(this.children)for(let p of this.children)i+=p.toMarkup();let a="";if(this.svgBody)a=function(e){if(SL[e]){let[t,n,r]=SL[e],i='<span class="ML__stretchy" style="height:'.concat(r,'em"><svg width="100%" height="').concat(r,'em" viewBox="0 0 ').concat(t," ").concat(n,'" preserveAspectRatio="none" ><path fill="currentcolor" d="').concat(CL[e],'"></path></svg></span>');return'<span style="display:inline-block;height:'.concat(Math.floor(100*r/2)/100,'em;min-width:0">').concat(i,"</span>")}let t,n,[r,i,a,o]=_L[e],s=a/1e3;3===r.length?(t=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],n=["xMinYMin","xMidYMin","xMaxYMin"]):2===r.length?(t=["slice-1-of-2","slice-2-of-2"],n=["xMinYMin","xMaxYMin"]):(t=["slice-1-of-1"],n=[o]);let l=r.map(((e,r)=>'<span class="'.concat(t[r],'" style=height:').concat(s,"em><svg width=400em height=").concat(s,'em viewBox="0 0 400000 ').concat(a,'" preserveAspectRatio="').concat(n[r],' slice"><path fill="currentcolor" d="').concat(CL[e],'"></path></svg></span>'))).join("");return'<span style="display:inline-block;height:'.concat(s,"em;min-width:").concat(i,'em;">').concat(l,"</span>")}(this.svgBody);else if(this.svgOverlay){a='<span style="',a+="display: inline-block;",a+="height:".concat(Math.floor(100*(this.height+this.depth))/100,"em;"),a+="vertical-align:".concat(Math.floor(100*this.depth)/100,"em;"),a+='">',a+=i,a+="</span>",a+='<svg style="position:absolute;overflow:visible;',a+="height:".concat(Math.floor(100*(this.height+this.depth))/100,"em;");let e=null==(t=this.cssProperties)?void 0:t.padding;e?(a+="top:".concat(e,";"),a+="left:".concat(e,";"),a+="width:calc(100% - 2 * ".concat(e," );")):a+="top:0;left:0;width:100%;",a+="z-index:2;",a+='"',this.svgStyle&&(a+=this.svgStyle),a+=' viewBox="0 0 '.concat(Math.floor(100*this.width)/100," ").concat(Math.floor(100*(this.height+this.depth))/100,'"'),a+=">".concat(this.svgOverlay,"</svg>")}let o="",s=this.classes.split(" ");s.push(null!=(n={latex:"ML__raw-latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])?n:""),"latex"===this.caret&&s.push("ML__latex-caret"),this.isSelected&&s.push("ML__selected");let l=1===s.length?s[0]:s.filter(((e,t,n)=>e.length>0&&n.indexOf(e)===t)).join(" ");if(l.length>0&&(o+=' class="'.concat(l,'"')),this.id&&(o+=" data-atom-id=".concat(this.id)),this.cssId&&(o+=' id="'.concat(this.cssId.replace(/ /g,"-"),'" ')),this.attributes&&(o+=" "+Object.keys(this.attributes).map((e=>"".concat(e,'="').concat(this.attributes[e],'"'))).join(" ")),this.htmlData){let e=this.htmlData.split(",");for(let t of e){let e=t.match(/([^=]+)=(.+$)/);if(e){let t=e[1].trim().replace(/ /g,"-");t&&(o+=" data-".concat(t,'="').concat(e[2],'" '))}else{let e=t.trim().replace(/ /g,"-");e&&(o+=" data-".concat(e," "))}}}let u=null!=(r=this.cssProperties)?r:{};this.hasExplicitWidth&&void 0===u.width&&(u.width="".concat(Math.ceil(100*this._width)/100,"em"));let c=Object.keys(u).map((e=>"".concat(e,":").concat(u[e])));if(void 0!==this.scale&&1!==this.scale&&(i.length>0||a.length>0)&&c.push("font-size: ".concat(Math.ceil(1e4*this.scale)/100,"%")),this.htmlStyle){let e=this.htmlStyle.split(";"),t="";for(let n of e){let e=n.match(/([^=]+):(.+$)/);if(e){let n=e[1].trim().replace(/ /g,"-");n&&(t+="".concat(n,":").concat(e[2],";"))}}t&&(o+=' style="'.concat(t,'"'))}c.length>0&&(o+=' style="'.concat(c.join(";"),'"'));let d="";return d=o.length>0||a.length>0?"<span".concat(o,">").concat(i).concat(a,"</span>"):i,"text"===this.caret?d+='<span class="ML__text-caret"></span>':"math"===this.caret&&(d+='<span class="ML__caret"></span>'),d}tryCoalesceWith(e){if(this.svgBody||!this.value||e.svgBody||!e.value)return!1;let t=this.children&&this.children.length>0,n=e.children&&e.children.length>0;if(t||n)return!1;if(e.cssProperties||this.cssProperties)for(let o of["border","border-left","border-right","border-right-width","left","margin","margin-left","margin-right","padding","position","width"])if(e.cssProperties&&o in e.cssProperties||this.cssProperties&&o in this.cssProperties)return!1;let r=this.cssProperties?Object.keys(this.cssProperties).length:0;if(r!==(e.cssProperties?Object.keys(e.cssProperties).length:0))return!1;if(r>0)for(let o of Object.keys(this.cssProperties))if(this.cssProperties[o]!==e.cssProperties[o])return!1;let i=this.classes.trim().replace(/\s+/g," ").split(" "),a=e.classes.trim().replace(/\s+/g," ").split(" ");if(i.length!==a.length)return!1;i.sort(),a.sort();for(let[o,s]of i.entries())if("ML__vertical-separator"===s||s!==a[o])return!1;return this.value+=e.value,this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this._width=this._width+e._width,this.maxFontSize=Math.max(this.maxFontSize,e.maxFontSize),this.italic=e.italic,!0}};function ZL(e){if(!e||0===e.length)return[];e[0].children=ZL(e[0].children);let t=[e[0]];for(let n=1;n<e.length;n++)t[t.length-1].tryCoalesceWith(e[n])||(e[n].children=ZL(e[n].children),t.push(e[n]));return t}function JL(e){return e.children&&(e.children=ZL(e.children)),e}function XL(e,t){if(!e)return new GL(null,t);let n=new GL(null,{classes:"ML__strut",type:"ignore"});n.setStyle("height",Math.max(0,e.height),"em");let r=[n];if(0!==e.depth){let t=new GL(null,{classes:"ML__strut--bottom",type:"ignore"});t.setStyle("height",e.height+e.depth,"em"),t.setStyle("vertical-align",-e.depth,"em"),r.push(t)}return r.push(e),new GL(r,Jk(Zk({},t),{type:"lift"}))}function YL(e){let t=function(e){return _L[e]?_L[e][2]/1e3:SL[e][2]}(e)/2,n=new GL(null,{maxFontSize:0});return n.height=t+.166,n.depth=t-.166,n.svgBody=e,n}function QL(e){var t;let[n,r]=function(e){if("individualShift"in e){let t=e.individualShift,n=t[0];if(null==n)return[null,0];let r=[n],i=-n.shift-n.box.depth,a=i;for(let e=1;e<t.length;e++){let i=t[e],o=-i.shift-a-i.box.depth,s=o-(n.box.height+n.box.depth);a+=o,r.push(s),r.push(i),n=i}return[r,i]}if("top"in e){let t=e.top;for(let n of e.children)t-="number"==typeof n?n:n.box.height+n.box.depth;return[e.children,t]}if("bottom"in e)return[e.children,-e.bottom];if("firstBaseline"in e){let t=e.firstBaseline[0];if("number"==typeof t)throw new Error("First child must be an element.");return[e.firstBaseline,-t.box.depth]}if("shift"in e){let t=e.children[0];if("number"==typeof t)throw new Error("First child must be an element.");return[e.children,-t.box.depth-e.shift]}return[null,0]}(e);if(!n)return[[],0,0];let i=new GL(null,{classes:"ML__pstrut"}),a=0;for(let f of n)if("number"!=typeof f){let e=f.box;a=Math.max(a,e.maxFontSize,e.height)}a+=2,i.height=a,i.setStyle("height",a,"em");let o=[],s=r,l=r,u=r,c=0;for(let f of n){if("number"==typeof f)u+=f;else{let e=f.box,n=null!=(t=f.classes)?t:[],r=new GL([i,e],{classes:n.join(" "),style:f.style});e.setStyle("height",e.height+e.depth,"em"),e.setStyle("display","inline-block"),r.setStyle("top",-a-u-e.depth,"em"),f.marginLeft&&r.setStyle("margin-left",f.marginLeft,"em"),f.marginRight&&r.setStyle("margin-right",f.marginRight,"em"),o.push(r),u+=e.height+e.depth,c=Math.max(c,r.width)}s=Math.min(s,u),l=Math.max(l,u)}o.forEach((e=>{e.softWidth=c}));let d=new GL(o,{classes:"ML__vlist"});if(d.softWidth=c,d.height=l,d.setStyle("height",l,"em"),s>=0)return[[new GL(d,{classes:"ML__vlist-r"})],l,-s];let p=new GL(new GL(null),{classes:"ML__vlist"});p.height=-s,p.setStyle("height",-s,"em");let h=new GL(8203,{classes:"ML__vlist-s",maxFontSize:0});return h.softWidth=0,h.height=0,h.depth=0,[[new GL([d,h],{classes:"ML__vlist-r"}),new GL(p,{classes:"ML__vlist-r"})],l,-s]}var eO=class extends GL{constructor(e,t){var n;let[r,i,a]=QL(e);super(1===r.length?r[0]:r,{type:null==t?void 0:t.type,classes:(null!=(n=null==t?void 0:t.classes)?n:"")+" ML__vlist-t"+(2===r.length?" ML__vlist-t2":"")}),this.height=i,this.depth=a,this.softWidth=r.reduce(((e,t)=>Math.max(e,t.width)),0)}};var tO=class{constructor(e,t,n){this.id=e,this.sizeDelta=t,this.cramped=n;let r={"-4":2,"-3":1,0:0}[t];this.metrics=Object.keys(bL).reduce(((e,t)=>Jk(Zk({},e),{[t]:bL[t][r]})),{})}getFontSize(e){return Math.max(1,e+this.sizeDelta)}get sup(){return rO[[0,1,0,1,2,3,2,3][this.id]]}get sub(){return rO[[0,0,0,0,2,2,2,2][this.id]]}get fracNum(){return rO[[0,1,0,1,2,3,4,5][this.id]]}get fracDen(){return rO[[0,0,0,0,2,2,4,4][this.id]]}get cramp(){return rO[[0,0,2,2,4,4,6,6][this.id]]}get isTight(){return this.sizeDelta<0}},nO={7:new tO(7,0,!1),6:new tO(6,0,!0),5:new tO(5,0,!1),4:new tO(4,0,!0),3:new tO(3,-3,!1),2:new tO(2,-3,!0),1:new tO(1,-4,!1),0:new tO(0,-4,!0)},rO=Jk(Zk({},nO),{displaystyle:nO[7],textstyle:nO[5],scriptstyle:nO[3],scriptscriptstyle:nO[1]});function iO(e,t){var n;if(!e)return 0;let r={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:gL,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[null!=(n=e.unit)?n:"pt"];if(Number.isFinite(t)){let n=10**t;return Math.round(e.dimension/gL*r*n)/n}return e.dimension*r}function aO(e,t){if(null===e)return 0;let n=iO(e)/gL;if(Number.isFinite(t)){let e=10**t;return Math.round(n*e)/e}return n}function oO(e){var t;return"".concat(e.dimension).concat(null!=(t=e.unit)?t:"pt")}function sO(e){var t,n;if(null==e)return null;let r="";if("dimension"in e&&(r="".concat(e.dimension).concat(null!=(t=e.unit)?t:"pt")),"glue"in e&&(r=function(e){let t=oO(e.glue);return e.grow&&0!==e.grow.dimension&&(t+=" plus ".concat(oO(e.grow))),e.shrink&&0!==e.shrink.dimension&&(t+=" minus ".concat(oO(e.shrink))),t}(e)),"number"in e)if("base"in e&&"decimal"!==e.base)if("alpha"===e.base)r="`".concat(String.fromCodePoint(e.number));else{let t=Math.round(e.number)>>>0;"hexadecimal"===e.base?(r=Number(t).toString(16).toUpperCase(),r=t<=255?r.padStart(2,"0"):t<=65535?r.padStart(4,"0"):t<=16777215?r.padStart(6,"0"):r.padStart(8,"0"),r='"'.concat(r)):"octal"===e.base&&(r=Number(t).toString(8),r=t<=63?r.padStart(2,"0"):t<=30583?r.padStart(4,"0"):r.padStart(8,"0"),r="'".concat(r))}else r=Number(e.number).toString();return"register"in e&&("factor"in e&&(-1===e.factor?r="-":1!==e.factor&&(r=Number(e.factor).toString())),"global"in e&&e.global&&(r+="\\global"),r+="\\".concat(e.register)),"string"in e&&(r=e.string),null!=(n=e.relax)&&n&&(r+="\\relax"),r}function lO(e,t){return null==e?null:"number"in e?Jk(Zk({},e),{number:e.number*t}):"register"in e?"factor"in e&&e.factor?Jk(Zk({},e),{factor:e.factor*t}):Jk(Zk({},e),{factor:t}):"dimension"in e?Jk(Zk({},e),{dimension:e.dimension*t}):"glue"in e?e.shrink&&e.grow?{glue:lO(e.glue,t),shrink:lO(e.shrink,t),grow:lO(e.grow,t)}:e.shrink?{glue:lO(e.glue,t),shrink:lO(e.shrink,t)}:e.grow?{glue:lO(e.glue,t),grow:lO(e.grow,t)}:{glue:lO(e.glue,t)}:null}var uO={"p@":{dimension:1},"z@":{dimension:0},maxdimen:{dimension:16383.99999},hfuzz:{dimension:.1},vfuzz:{dimension:.1},overfullrule:{dimension:5},hsize:{dimension:6.5,unit:"in"},vsize:{dimension:8.9,unit:"in"},parindent:{dimension:20},maxdepth:{dimension:4},splitmaxdepth:{register:"maxdimen"},boxmaxdepth:{register:"maxdimen"},delimitershortfall:{dimension:5},nulldelimiterspace:{dimension:1.2,unit:"pt"},scriptspace:{dimension:.5},topskip:{dimension:10},splittopskip:{dimension:10},normalbaselineskip:{dimension:12},normallineskip:{dimension:1},normallineskiplimit:{dimension:0},jot:{dimension:3},doublerulesep:{dimension:2},arrayrulewidth:{dimension:.4},arraycolsep:{dimension:5},fboxsep:{dimension:3},fboxrule:{dimension:.4},"z@skip":{glue:{dimension:0},shrink:{dimension:0},grow:{dimension:0}},hideskip:{glue:{dimension:-1e3},grow:{dimension:1,unit:"fill"}},"@flushglue":{glue:{dimension:0},grow:{dimension:1,unit:"fill"}},parskip:{glue:{dimension:0},grow:{dimension:1}},abovedisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},abovedisplayshortskip:{glue:{dimension:0},grow:{dimension:3}},belowdisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},belowdisplayshortskip:{glue:{dimension:7},grow:{dimension:3},shrink:{dimension:4}},parfillskip:{glue:{dimension:0},grow:{dimension:1,unit:"fil"}},thinmuskip:{glue:{dimension:3,unit:"mu"}},medmuskip:{glue:{dimension:4,unit:"mu"},grow:{dimension:2,unit:"mu"},shrink:{dimension:4,unit:"mu"}},thickmuskip:{glue:{dimension:5,unit:"mu"},grow:{dimension:5,unit:"mu"}},smallskipamount:{glue:{dimension:3},grow:{dimension:1},shrink:{dimension:1}},medskipamount:{glue:{dimension:6},grow:{dimension:2},shrink:{dimension:3}},bigskipamount:{glue:{dimension:12},grow:{dimension:2},shrink:{dimension:4}},pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:1,month:(new Date).getMonth()+1,day:(new Date).getDate(),year:(new Date).getFullYear()};function cO(){return Zk({},uO)}function dO(){return{registers:cO(),smartFence:!1,renderPlaceholder:void 0,placeholderSymbol:"\u25a2",letterShapeStyle:iA.locale.startsWith("fr")?"french":"tex",minFontScale:0,colorMap:pA,backgroundColorMap:hA,getMacro:e=>HA(e,KA())}}var pO=class e{constructor(t,n){var r,i,a,o,s,l,u,c,d,p,h,f,m,g,v;let y;null!=t&&t.parent?(this.parent=t.parent,y=t.parent,this.registers={}):(y=Zk(Zk({},dO()),null!=(r=null==t?void 0:t.from)?r:{}),this.registers=y.registers),y.atomIdsSettings&&(this.atomIdsSettings=Zk({},y.atomIdsSettings)),this.renderPlaceholder=y.renderPlaceholder,this.isPhantom=null!=(o=null!=(a=null==t?void 0:t.isPhantom)?a:null==(i=this.parent)?void 0:i.isPhantom)&&o,this.letterShapeStyle=y.letterShapeStyle,this.minFontScale=y.minFontScale,null!=n&&n.color&&"none"!==n.color?this.color=n.color:this.color=null!=(l=null==(s=this.parent)?void 0:s.color)?l:"",null!=n&&n.backgroundColor&&"none"!==n.backgroundColor?this.backgroundColor=n.backgroundColor:this.backgroundColor=null!=(c=null==(u=this.parent)?void 0:u.backgroundColor)?c:"",null!=n&&n.fontSize&&"auto"!==n.fontSize&&n.fontSize!==(null==(d=this.parent)?void 0:d.size)?this.size=n.fontSize:this.size=null!=(h=null==(p=this.parent)?void 0:p.size)?h:5;let b=null!=(m=null==(f=this.parent)?void 0:f.mathstyle)?m:rO.displaystyle;if("string"==typeof(null==t?void 0:t.mathstyle)){if(y instanceof e)switch(t.mathstyle){case"cramp":b=b.cramp;break;case"superscript":b=b.sup;break;case"subscript":b=b.sub;break;case"numerator":b=b.fracNum;break;case"denominator":b=b.fracDen}switch(t.mathstyle){case"textstyle":b=rO.textstyle;break;case"displaystyle":b=rO.displaystyle;break;case"scriptstyle":b=rO.scriptstyle;break;case"scriptscriptstyle":b=rO.scriptscriptstyle}}this.mathstyle=b,this.smartFence=y.smartFence,this.placeholderSymbol=y.placeholderSymbol,this.colorMap=null!=(g=y.colorMap)?g:e=>e,this.backgroundColorMap=null!=(v=y.backgroundColorMap)?v:e=>e,this.getMacro=y.getMacro,void 0!==this.parent||this.registers}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if("number"!=typeof this.atomIdsSettings.seed)return"".concat(Date.now().toString(36).slice(-2)).concat(Math.floor(1e5*Math.random()).toString(36));let e=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,e}scale(e){return e*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return 7===this.mathstyle.id||6===this.mathstyle.id}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get metrics(){return this.mathstyle.metrics}get effectiveFontSize(){return Math.max(xL[Math.max(1,this.size+this.mathstyle.sizeDelta)],this.minFontScale)}getRegister(e){var t;return null!=(t=this.registers)&&t[e]?this.registers[e]:this.parent?this.parent.getRegister(e):void 0}getRegisterAsNumber(e){let t=this.getRegister(e);return"number"==typeof t?t:"string"==typeof t?Number(t):void 0}getRegisterAsGlue(e){var t;if(null!=(t=this.registers)&&t[e]){let t=this.registers[e];return"object"==typeof t&&"glue"in t?t:"object"==typeof t&&"dimension"in t?{glue:{dimension:t.dimension}}:"number"==typeof t?{glue:{dimension:t}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(e)}getRegisterAsEm(e,t){return aO(this.getRegisterAsDimension(e),t)}getRegisterAsDimension(e){var t;if(null!=(t=this.registers)&&t[e]){let t=this.registers[e];return"object"==typeof t&&"glue"in t?t.glue:"object"==typeof t&&"dimension"in t?t:"number"==typeof t?{dimension:t}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(e)}setRegister(e,t){void 0!==t?this.registers[e]=t:delete this.registers[e]}evaluate(e){if(!e||!("register"in e))return e;let t=this;if("global"in e&&e.global)for(;t.parent;)t=t.parent;let n=1;"factor"in e&&1!==e.factor&&void 0!==e.factor&&(n=e.factor);let r=t.getRegister(e.register);if(void 0===r)return;if("string"==typeof r)return{string:Number(r).toString()+r};if("number"==typeof r)return{number:n*r};let i=t.evaluate(r);return void 0!==i?"string"in i?{string:Number(r).toString()+i.string}:"number"in i?{number:n*i.number}:"dimension"in i?Jk(Zk({},i),{dimension:n*i.dimension}):"glue"in i?Jk(Zk({},i),{glue:Jk(Zk({},i.glue),{dimension:n*i.glue.dimension}),shrink:i.shrink?Jk(Zk({},i.shrink),{dimension:n*i.shrink.dimension}):void 0,grow:i.grow?Jk(Zk({},i.grow),{dimension:n*i.grow.dimension}):void 0}):e:void 0}toDimension(e){let t=this.evaluate(e);return void 0===t?null:"dimension"in t?t:"glue"in t?t.glue:"number"in t?{dimension:t.number}:null}toEm(e,t){if(null===e)return 0;let n=this.toDimension(e);return null===n?0:iO(n,t)/gL}toNumber(e){if(null===e)return null;let t=this.evaluate(e);return void 0===t?null:"number"in t?t.number:"dimension"in t?t.dimension:"glue"in t?t.glue.dimension:"string"in t?Number(t.string):null}toColor(e){var t,n;if(null===e)return null;let r=this.evaluate(e);return void 0===r?null:"string"in r?null!=(n=null==(t=this.colorMap)?void 0:t.call(this,r.string))?n:r.string:null}toBackgroundColor(e){var t,n;if(null===e)return null;let r=this.evaluate(e);return void 0===r?null:"string"in r?null!=(n=null==(t=this.backgroundColorMap)?void 0:t.call(this,r.string))?n:r.string:null}},hO=["body","above","below","superscript","subscript"];function fO(e){return"string"==typeof e&&hO.includes(e)}function mO(e){return void 0!==e&&Array.isArray(e)&&2===e.length}var gO=class e{constructor(e){var t,n,r,i,a,o;this.type=e.type,"string"==typeof e.value&&(this.value=e.value),this.command=null!=(n=null!=(t=e.command)?t:this.value)?n:"",this.mode=null!=(r=e.mode)?r:"math",e.isFunction&&(this.isFunction=!0),e.limits&&(this.subsupPlacement=e.limits),this.style=Zk({},e.style),this.displayContainsHighlight=null!=(i=e.displayContainsHighlight)&&i,this.captureSelection=null!=(a=e.captureSelection)&&a,this.skipBoundary=null!=(o=e.skipBoundary)&&o,void 0!==e.verbatimLatex&&null!==e.verbatimLatex&&(this.verbatimLatex=e.verbatimLatex),e.args&&(this.args=e.args),e.body&&(this.body=e.body),this._changeCounter=0}static createBox(e,t,n){var r;if(!t)return null;let i=function(e){let t,n=[],r=[];for(let i of e)if(t||i.style){let e=i.computedStyle;t&&e.color===t.color&&e.backgroundColor===t.backgroundColor&&e.fontSize===t.fontSize?r.push(i):(r.length>0&&n.push(r),r=[i],t=e)}else r.push(i);return r.length>0&&n.push(r),n}(t),a=[];for(let s of i){let t=s[0].style,n=vO(e,s,{style:{color:t.color,backgroundColor:t.backgroundColor,fontSize:t.fontSize}});n&&a.push(n)}if(0===a.length)return null;let o=(null!=(r=null==n?void 0:n.classes)?r:"").trim();return 1!==a.length||o||null!=n&&n.type?new GL(a,{classes:o,type:null==n?void 0:n.type}).wrap(e):a[0].wrap(e)}static serialize(e,t){return RL.serialize(e,t)}static commonAncestor(e,t){if(e===t||e.parent===t.parent)return e.parent;let n=new WeakSet,{parent:r}=e;for(;r;)n.add(r),r=r.parent;for(r=t.parent;r;){if(n.has(r))return r;r=r.parent}}static fromJson(t){return new e("string"==typeof t?{type:"mord",value:t,mode:"math"}:t)}get latexMode(){return"math"===this.mode?"math":"text"}toJson(){let e={};if(this.type&&(e.type=this.type),"math"!==this.mode&&(e.mode=this.mode),this.command&&this.command!==this.value&&(e.command=this.command),void 0!==this.value&&(e.value=this.value),this.style&&Object.keys(this.style).length>0&&(e.style=Zk({},this.style)),void 0!==this.verbatimLatex&&(e.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(e.explicitSubsupPlacement=!0),this.isFunction&&(e.isFunction=!0),this.displayContainsHighlight&&(e.displayContainsHighlight=!0),this.isExtensibleSymbol&&(e.isExtensibleSymbol=!0),this.skipBoundary&&(e.skipBoundary=!0),this.captureSelection&&(e.captureSelection=!0),this.args&&(e.args=function(e){return e.map((e=>null===e?"<null>":Array.isArray(e)&&e[0]instanceof gO?{atoms:e.map((e=>e.toJson()))}:"object"==typeof e&&"group"in e?{group:e.group.map((e=>e.toJson()))}:e))}(this.args)),this._branches)for(let t of Object.keys(this._branches))this._branches[t]&&(e[t]=this._branches[t].filter((e=>"first"!==e.type)).map((e=>e.toJson())));return"mord"===e.type&&2===Object.keys(e).length&&"value"in e?e.value:e}get changeCounter(){return this.parent?this.parent.changeCounter:this._changeCounter}set isDirty(e){if(e){this.parent||this._changeCounter++,"verbatimLatex"in this&&(this.verbatimLatex=void 0),this._children=void 0;let{parent:e}=this;for(;e;)e.parent||e._changeCounter++,"verbatimLatex"in e&&(e.verbatimLatex=void 0),e._children=void 0,e=e.parent}}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let t=$A(this.command,this.mode);return null!=t&&t.serialize?t.serialize(this,e):this.body&&this.command?zL([IL(this.command,this.bodyToLatex(e)),this.supsubToLatex(e)]):this.body?zL([this.bodyToLatex(e),this.supsubToLatex(e)]):this.value&&"\u200b"!==this.value?this.command:""}bodyToLatex(e){var t;return RL.serialize(this.body,Jk(Zk({},e),{defaultMode:null!=(t=e.defaultMode)?t:this.latexMode}))}aboveToLatex(e){return RL.serialize(this.above,e)}belowToLatex(e){return RL.serialize(this.below,e)}supsubToLatex(e){let t="";if(e=Jk(Zk({},e),{defaultMode:"math"}),void 0!==this.branch("subscript")){let n=RL.serialize(this.subscript,e);0===n.length?t+="_{}":1===n.length&&/^[0-9]$/.test(n)?t+="_".concat(n):t+="_{".concat(n,"}")}if(void 0!==this.branch("superscript")){let n=RL.serialize(this.superscript,e);0===n.length?t+="^{}":1===n.length?"\u2032"===n?t+="^\\prime ":"\u2033"===n?t+="^\\doubleprime ":/^[0-9]$/.test(n)?t+="^".concat(n):t+="^{".concat(n,"}"):t+="^{".concat(n,"}")}return t}get treeDepth(){let e=1,t=this.parent;for(;t;)t=t.parent,e+=1;return e}get inCaptureSelection(){let e=this;for(;e;){if(e.captureSelection)return!0;e=e.parent}return!1}get parentPrompt(){let e=this.parent;for(;e;){if("prompt"===e.type&&!e.captureSelection)return e;e=e.parent}return null}branch(e){if(fO(e)&&this._branches)return this._branches[e]}get branches(){if(!this._branches)return[];let e=[];for(let t of hO)this._branches[t]&&e.push(t);return e}createBranch(e){return fO(e),fO(e)?(this._branches?this._branches[e]||(this._branches[e]=[this.makeFirstAtom(e)]):this._branches={[e]:[this.makeFirstAtom(e)]},this.isDirty=!0,this._branches[e]):[]}get row(){return mO(this.parentBranch)?this.parentBranch[0]:-1}get col(){return mO(this.parentBranch)?this.parentBranch[1]:-1}get body(){var e;return null==(e=this._branches)?void 0:e.body}set body(e){this.setChildren(e,"body")}get superscript(){var e;return null==(e=this._branches)?void 0:e.superscript}set superscript(e){this.setChildren(e,"superscript")}get subscript(){var e;return null==(e=this._branches)?void 0:e.subscript}set subscript(e){this.setChildren(e,"subscript")}get above(){var e;return null==(e=this._branches)?void 0:e.above}set above(e){this.setChildren(e,"above")}get below(){var e;return null==(e=this._branches)?void 0:e.below}set below(e){this.setChildren(e,"below")}get computedStyle(){var e,t;let n="string"==typeof this.style.verbatimColor,r="string"==typeof this.style.verbatimBackgroundColor,i=Zk(Zk({},null!=(t=null==(e=this.parent)?void 0:e.computedStyle)?t:{}),this.style);return delete i.variant,delete i.variantStyle,r||delete i.verbatimBackgroundColor,n||delete i.verbatimColor,i}applyStyle(e){this.isDirty=!0,this.style=Zk(Zk({},this.style),e),"none"===this.style.fontFamily&&delete this.style.fontFamily,"auto"===this.style.fontShape&&delete this.style.fontShape,"auto"===this.style.fontSeries&&delete this.style.fontSeries,"none"===this.style.color&&(delete this.style.color,delete this.style.verbatimColor),"none"===this.style.backgroundColor&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),"auto"===this.style.fontSize&&delete this.style.fontSize;for(let t of this.children)t.applyStyle(e)}getInitialBaseElement(){var e,t,n;return this.hasEmptyBranch("body")?this:(null==(e=this.body)||e[0].type,null!=(n=null==(t=this.body[1])?void 0:t.getInitialBaseElement())?n:this)}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){return"leftright"!==this.type&&"genfrac"!==this.type&&"subsup"!==this.type&&"delim"!==this.type&&"array"!==this.type&&"surd"!==this.type&&"mord"===this.getFinalBaseElement().type}hasEmptyBranch(e){let t=this.branch(e);return!t||(t.length,t[0].type,1===t.length)}setChildren(e,t){var n;if(!e||(fO(t),!fO(t)))return;null==(n=e[0])||n.type;let r=[this.makeFirstAtom(t),...e];this._branches?this._branches[t]=r:this._branches={[t]:r};for(let i of e)i.parent=this,i.parentBranch=t;this.isDirty=!0}makeFirstAtom(t){let n=new e({type:"first",mode:this.mode});return n.parent=this,n.parentBranch=t,n}addChild(e,t){e.type,this.createBranch(t).push(e),this.isDirty=!0,e.parent=this,e.parentBranch=t}addChildBefore(e,t){t.parentBranch;let n=this.createBranch(t.parentBranch);n.splice(n.indexOf(t),0,e),this.isDirty=!0,e.parent=this,e.parentBranch=t.parentBranch}addChildAfter(e,t){t.parentBranch;let n=this.createBranch(t.parentBranch);n.splice(n.indexOf(t)+1,0,e),this.isDirty=!0,e.parent=this,e.parentBranch=t.parentBranch}addChildren(e,t){let n=this.createBranch(t);for(let r of e)r.parent=this,r.parentBranch=t,n.push(r);this.isDirty=!0}addChildrenAfter(e,t){0===e.length||e[0].type,t.parentBranch;let n=this.createBranch(t.parentBranch);n.splice(n.indexOf(t)+1,0,...e),this.isDirty=!0;for(let r of e)r.parent=this,r.parentBranch=t.parentBranch;return e[e.length-1]}removeBranch(e){let t=this.branch(e);if(fO(e)&&(this._branches[e]=void 0),!t)return[];for(let n of t)n.parent=void 0,n.parentBranch=void 0;return t[0].type,t.shift(),this.isDirty=!0,t}removeChild(e){if(e.parent,"first"===e.type)return;let t=this.branch(e.parentBranch),n=t.indexOf(e);t.splice(n,1),this.isDirty=!0,e.parent=void 0,e.parentBranch=void 0}get siblings(){return this.parent?this.parent.branch(this.parentBranch):[]}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:e}=this;return e[e.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return 1===this.siblings.length}get leftSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)-1]}get rightSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.hasChildren,this.children[0]}get lastChild(){this.hasChildren;let{children:e}=this;return e[e.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let e=[];for(let t of hO)if(this._branches[t])for(let n of this._branches[t])e.push(...n.children),e.push(n);return this._children=e,e}render(e){if("first"===this.type&&!e.atomIdsSettings)return null;let t=$A(this.command,this.mode);if(null!=t&&t.render)return t.render(this,e);let n=new pO({parent:e},this.style),r=this.createBox(n,{classes:this.parent?"":"ML__base"});return r?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(r=this.attachSupsub(n,{base:r})),r.wrap(n)):null}attachSupsub(t,n){var r;let i=n.base,a=this.superscript,o=this.subscript;if(!a&&!o)return i;let s=null,l=null,u=null!=(r=n.isCharacterBox)?r:this.isCharacterBox(),c=0;if(a){let n=new pO({parent:t,mathstyle:"superscript"});s=e.createBox(n,a),u||(c=i.height-t.metrics.supDrop*n.scalingFactor)}let d,p=0;if(o){let n=new pO({parent:t,mathstyle:"subscript"});l=e.createBox(n,o),u||(p=i.depth+t.metrics.subDrop*n.scalingFactor)}d=t.isDisplayStyle?t.metrics.sup1:t.isCramped?t.metrics.sup3:t.metrics.sup2;let h=.05/t.scalingFactor,f=null;if(l&&s){c=Math.max(c,d,s.depth+.25*t.metrics.xHeight),p=Math.max(p,t.metrics.sub2);let e=t.metrics.defaultRuleThickness;if(c-s.depth-(l.height-p)<4*e){p=4*e-(c-s.depth)+l.height;let n=.8*t.metrics.xHeight-(c-s.depth);n>0&&(c+=n,p-=n)}let n=this.isExtensibleSymbol&&i.italic?-i.italic:0;f=new eO({individualShift:[{box:l,shift:p,marginLeft:n},{box:s,shift:-c}]}).wrap(t)}else l&&!s?(p=Math.max(p,t.metrics.sub1,l.height-.3448),f=new eO({shift:p,children:[{box:l,marginRight:h,marginLeft:this.isCharacterBox()?-i.italic:0}]})):!l&&s&&(c=Math.max(c,d,s.depth+.10775),f=new eO({shift:-c,children:[{box:s,marginRight:h}]}));return new GL([i,new GL(f,{caret:this.caret,isSelected:this.isSelected,classes:"ML__msubsup"})],{type:n.type})}attachLimits(t,n){let r=this.superscript?e.createBox(new pO({parent:t,mathstyle:"superscript"},this.style),this.superscript):null,i=this.subscript?e.createBox(new pO({parent:t,mathstyle:"subscript"},this.style),this.subscript):null;return r||i?function(e,t){var n,r,i,a,o;let s=e.metrics,l=new GL(t.base),u=null!=(n=t.baseShift)?n:0,c=null!=(r=t.slant)?r:0,d=0,p=0;t.above&&(d=null!=(i=t.aboveShift)?i:Math.max(s.bigOpSpacing1,s.bigOpSpacing3-t.above.depth)),t.below&&(p=null!=(a=t.belowShift)?a:Math.max(s.bigOpSpacing2,s.bigOpSpacing4-t.below.height));let h=null;if(t.below&&t.above){let n=s.bigOpSpacing5+t.below.height+t.below.depth+p+l.depth+u;h=new eO({bottom:n,children:[s.bigOpSpacing5,{box:t.below,marginLeft:-c,classes:["ML__center"]},p,{box:l,classes:["ML__center"]},d,{box:t.above,marginLeft:c,classes:["ML__center"]},s.bigOpSpacing5]}).wrap(e)}else if(t.below&&!t.above)h=new eO({top:l.height-u,children:[s.bigOpSpacing5,{box:t.below,marginLeft:-c,classes:["ML__center"]},p,{box:l,classes:["ML__center"]}]}).wrap(e);else if(!t.below&&t.above){let n=l.depth+u;h=new eO({bottom:n,children:[{box:l,classes:["ML__center"]},d,{box:t.above,marginLeft:c,classes:["ML__center"]},s.bigOpSpacing5]}).wrap(e)}else{let t=l.depth+u;h=new eO({bottom:t,children:[{box:l},s.bigOpSpacing5]}).wrap(e)}return new GL(h,{type:null!=(o=t.type)?o:"op"})}(t,Jk(Zk({},n),{above:r,below:i})):n.base.wrap(t)}bind(e,t){if(!t||e.isPhantom||"\u200b"===this.value)return t;let n=this.parent;for(;n&&!n.captureSelection;)n=n.parent;return null!=n&&n.captureSelection||(this.id||(this.id=e.makeID()),t.atomID=this.id),t}createBox(t,n){var r,i,a,o;let s=null!=(r=this.value)?r:this.body,l=null!=(i=null==n?void 0:n.boxType)?i:$L(this.type),u=null!=(a=null==n?void 0:n.classes)?a:"";"text"===this.mode&&(u+=" ML__text");let c="string"==typeof s||void 0===s?new GL(null!=s?s:null,{type:l,isSelected:this.isSelected,mode:this.mode,maxFontSize:t.scalingFactor,style:Jk(Zk({variant:"normal"},this.style),{fontSize:Math.max(1,t.size+t.mathstyle.sizeDelta)}),letterShapeStyle:t.letterShapeStyle,classes:u}):null!=(o=e.createBox(t,s,{type:l,classes:u}))?o:new GL(null);return t.isTight&&(c.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(c.italic=0),c.right=c.italic,this.bind(t,c),this.caret&&!this.superscript&&!this.subscript&&(c.caret=this.caret),c}isDigit(){var e;return"mord"===this.type&&this.value?/^[\d,\.]$/.test(this.value):"group"===this.type&&2===(null==(e=this.body)?void 0:e.length)&&("first"===this.body[0].type&&","===this.body[1].value)}asDigit(){var e;return"mord"===this.type&&this.value&&/^[\d,\.]$/.test(this.value)?this.value:"group"===this.type&&2===(null==(e=this.body)?void 0:e.length)&&"first"===this.body[0].type&&","===this.body[1].value?".":""}};function vO(e,t,n){var r,i,a,o,s;if(!t||0===t.length)return null;let l=new pO({parent:e},n.style),u=!(null!=(r=l.atomIdsSettings)&&r.groupNumbers),c=[];if(1===t.length){let e=t[0],n=e.render(l);n&&(u&&e.isSelected&&n.selected(!0),c=[n])}else{let e="",n=!0;for(let r of t){null!=(i=l.atomIdsSettings)&&i.groupNumbers&&e&&(n&&r.isDigit()||!n&&yO(r))&&(l.atomIdsSettings.overrideID=e);let t=r.render(l);l.atomIdsSettings&&(l.atomIdsSettings.overrideID=void 0),t&&(null!=(a=l.atomIdsSettings)&&a.groupNumbers&&((r.isDigit()||yO(r))&&(!e||n!==r.isDigit())&&(n=r.isDigit(),e=null!=(o=r.id)?o:""),e&&(!(r.isDigit()||yO(r))||!r.hasEmptyBranch("superscript")||!r.hasEmptyBranch("subscript"))&&(e="")),u&&r.isSelected&&t.selected(!0),c.push(t))}}if(0===c.length)return null;let d=new GL(c,Jk(Zk({isTight:l.isTight},n),{type:null!=(s=n.type)?s:"lift"}));return d.isSelected=c.every((e=>e.isSelected)),d.wrap(l)}function yO(e){return"text"===e.mode}var bO=class e extends gO{constructor(e,t,n){super({type:"text",command:e,mode:"text",displayContainsHighlight:!0}),this.value=t,this.verbatimLatex=t,this.applyStyle(n)}static fromJson(t){return new e(t.command,t.value,t.style)}render(e){let t=this.createBox(e);return this.caret&&(t.caret=this.caret),t}_serialize(e){var t;return null!=(t=this.verbatimLatex)?t:WA("text",this.value.codePointAt(0))}};function xO(e,t){return e[0]===t[0]&&e[1]===t[1]?"equal":"different"}function DO(e){let t=1/0,n=-1/0;for(let r of e.ranges)t=Math.min(t,r[0],r[1]),n=Math.max(n,r[0],r[1]);return[t,n]}function wO(e){return"number"==typeof e&&!Number.isNaN(e)}function _O(e){return Array.isArray(e)&&2===e.length}function SO(e){return null!=e&&"object"==typeof e&&"ranges"in e&&Array.isArray(e.ranges)}function CO(e,t,n){return n?function(e,t){if(!t)return"";if("string"==typeof t)return t;if(!e||void 0===t.after)return t.value;let n=!1,r=!1,i=!1,a=!1,o=!1,s=!1,l=!1,u=!1,c=!1,d=!1,p=!1,h=!1,f=!1,m=!1,g=!1,v=e[0],y=0;for(;null!=v&&v.type&&/^(subsup|placeholder)$/.test(v.type);)y+=1,v=e[y];return n=!v||"first"===v.type,v&&(m="text"===v.mode,r=!m&&"mord"===v.type&&_A.test(v.value),i=!m&&"mord"===v.type&&/\d+$/.test(v.value),a=!m&&v.isFunction,o="genfrac"===v.type,s="surd"===v.type,l="mbin"===v.type,u="mrel"===v.type,c="mop"===v.type||"operator"===v.type||"extensible-symbol"===v.type,d="mpunct"===v.type||"minner"===v.type,p="array"===v.type,h="mopen"===v.type,f="mclose"===v.type||"leftright"===v.type,g="space"===v.type),t.after.includes("nothing")&&n||t.after.includes("letter")&&r||t.after.includes("digit")&&i||t.after.includes("function")&&a||t.after.includes("frac")&&o||t.after.includes("surd")&&s||t.after.includes("binop")&&l||t.after.includes("relop")&&u||t.after.includes("operator")&&c||t.after.includes("punct")&&d||t.after.includes("array")&&p||t.after.includes("openfence")&&h||t.after.includes("closefence")&&f||t.after.includes("text")&&m||t.after.includes("space")&&g?t.value:""}(e,n[t]):""}var EO={"&":"\\&","%":"\\%",$:"\\$","''":"^{\\doubleprime}","'''":"^{\\prime\\prime\\prime}","''''":"^{\\prime\\prime\\prime\\prime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","\u221e":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"\u2211":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","\u2206":"\\differentialD","\u2202":"\\differentialD",arcsin:"\\arcsin",arccos:"\\arccos",arctan:"\\arctan",arcsec:"\\arcsec",arccsc:"\\arccsc",arsinh:"\\arsinh",arcosh:"\\arcosh",artanh:"\\artanh",arcsech:"\\arcsech",arccsch:"\\arccsch",arg:"\\arg",ch:"\\ch",cosec:"\\cosec",cosh:"\\cosh",cot:"\\cot",cotg:"\\cotg",coth:"\\coth",csc:"\\csc",ctg:"\\ctg",cth:"\\cth",sec:"\\sec",sinh:"\\sinh",sh:"\\sh",tanh:"\\tanh",tg:"\\tg",th:"\\th",sin:"\\sin",cos:"\\cos",tan:"\\tan",lg:"\\lg",lb:"\\lb",log:"\\log",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},sint:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\sin t"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",xx:"\\times","+-":"\\pm","\u2260":"\\ne","!=":"\\ne","\u2265":"\\ge",">=":"\\ge","\u2264":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","\u2248":"\\approx","?=":"\\questeq","\xf7":"\\div","\xac":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},"\xb5":"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega","\u03a9":"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\bmod{#?}","(mod":"\\pmod{#?}",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\operatorname{gcd}",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","--\x3e...":"\\longrightarrow\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","*":"\\cdot","**":"\\star","***":"\\ast","//":"\\slash","\\\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceil","~|":"\\rceil",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail",frac:"\\frac{#?}{#?}",cbrt:"\\sqrt[3]{#?}",nthroot:"\\sqrt[#?]{#?}"};function kO(e,t){var n;let r=null!=(n=null==t?void 0:t.format)?n:"auto";return"auto"===r&&([r,e]=function(e){if(e=e.trim(),e.length<=1)return["latex",e];let t;return[t,e]=TO(e),t?["latex",e]:e.startsWith("`")&&e.endsWith("`")?(e=e.substring(1,e.length-1),["ascii-math",e]):e.includes("\\")?["latex",e]:/\$.+\$/.test(e)?["latex","\\text{".concat(e,"}")]:[void 0,e]}(e)),"ascii-math"===r?["ascii-math",AO(e=(e=(e=(e=(e=(e=e.replace(/\u2061/g,"")).replace(/\u3016/g,"{")).replace(/\u3017/g,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),{inlineShortcuts:null==t?void 0:t.inlineShortcuts})]:["latex",e]}function AO(e,t){var n;if(!(e=e.trim()))return"";let r=null!=(n=t.inlineShortcuts)?n:EO;if(e.startsWith("^")||e.startsWith("_")){let{match:n,rest:i}=NO(e.slice(1),{inlineShortcuts:r,noWrap:!0});return"".concat(e[0],"{").concat(n,"}").concat(AO(i,t))}let i=e.match(/^(sqrt|\u221A)(.*)/);if(i){let{match:e,rest:n}=NO(i[2],{inlineShortcuts:r,noWrap:!0});return"\\sqrt{".concat(null!=e?e:"\\placeholder{}","}").concat(AO(n,t))}if(i=e.match(/^(\\cbrt|\u221B)(.*)/),i){let{match:e,rest:n}=NO(i[2],{inlineShortcuts:r,noWrap:!0});return"\\sqrt[3]{".concat(null!=e?e:"\\placeholder{}","}").concat(AO(n,t))}if(i=e.match(/^abs(.*)/),i){let{match:e,rest:n}=NO(i[1],{inlineShortcuts:r,noWrap:!0});return"\\left|".concat(null!=e?e:"\\placeholder{}","\\right|").concat(AO(n,t))}if(i=e.match(/^["\u201d\u201c](.*?)["\u201d\u201c](.*)/),i)return"\\text{".concat(i[1],"}").concat(AO(i[2],t));if(i=e.match(/^([^a-zA-Z\(\{\[\_\^\\\s"]+)(.*)/),i)return"".concat(MO(i[1],r)).concat(AO(i[2],t));if(/^([fgh])[^a-zA-Z]/.test(e)){let{rest:n,match:i}=NO(e.slice(1),{inlineShortcuts:r,noWrap:!0}),a="";return a="("===e[1]?"".concat(e[0],"\\left(").concat(i,"\\right)"):e[0]+i,a+AO(n,t)}if(i=e.match(/^([a-zA-Z]+)(.*)/),i)return MO(i[1],r)+AO(i[2],t);let{match:a,rest:o}=NO(e,{inlineShortcuts:r,noWrap:!0});if(a&&"/"===o[0]){let e=NO(o.slice(1),{inlineShortcuts:r,noWrap:!0});if(e.match)return"\\frac{".concat(a,"}{").concat(e.match,"}").concat(AO(e.rest,t))}else if(a)return e.startsWith("(")?"\\left("+a+"\\right)"+AO(o,t):a+AO(o,t);return i=e.match(/^(\s+)(.*)$/),i?" "+AO(i[2],t):e}function NO(e,t){let n="",r=e=e.trim(),i=e.charAt(0),a={"(":")","{":"}","[":"]"}[i];if(a){let o=1,s=1;for(;s<e.length&&o>0;)e[s]===i&&o++,e[s]===a&&o--,s++;0===o?(t.noWrap&&"("===i?n=AO(e.substring(1,s-1),t):("{"===i&&"}"===a&&(i="\\{",a="\\}"),n="\\left"+i+AO(e.substring(1,s-1),t)+"\\right"+a),r=e.slice(Math.max(0,s))):(n=e.substring(1,s),r="")}else{let i=e.match(/^([a-zA-Z]+)/);if(i){let n=CO(null,e,t.inlineShortcuts);if(n)return n=n.replace("_{#?}",""),n=n.replace("^{#?}",""),{match:n,rest:e.slice(n.length)}}if(i=e.match(/^([a-zA-Z])/),i)return{match:i[1],rest:e.slice(1)};if(i=e.match(/^(-)?\d+(\.\d*)?/),i)return{match:i[0],rest:e.slice(i[0].length)};/^\\(left|right)/.test(e)||(i=e.match(/^(\\[a-zA-Z]+)/),i&&(r=e.slice(i[1].length),n=i[1]))}return{match:n,rest:r}}function MO(e,t){let n=CO(null,e,t);return n?(n=n.replace("_{#?}",""),n=n.replace("^{#?}",""),n+=" "):n=e,n}var FO=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function TO(e){let t=e.trim();for(let n of FO)if(t.startsWith(n[0])&&t.endsWith(n[1]))return[!0,t.substring(n[0].length,t.length-n[1].length)];return[!1,e]}var BO=(e,t,n)=>(FO.some((e=>t.startsWith(e[0])&&t.endsWith(e[1])))||(t="".concat("$$"," ").concat(t," ").concat("$$")),t),LO=class e{constructor(t){e._modes[t]=this}static onPaste(t,n,r){var i;if(!n.contentEditable&&"none"===n.userSelect)return n.model.announce("plonk"),!1;if("string"==typeof r){let e=new DataTransfer;e.setData("text/plain",r),r=e}let a=new ClipboardEvent("paste",{clipboardData:r,cancelable:!0});return!(null==(i=n.host)||!i.dispatchEvent(a))&&e._modes[t].onPaste(n,r)}static copyToClipboard(e,t){if(!e.contentEditable&&"none"===e.userSelect)return void e.model.announce("plonk");let n=e.model,r=n.selectionIsCollapsed?[0,n.lastOffset]:DO(n.selection),i=n.getValue(r,t);navigator.clipboard.writeText(i).then((()=>{}),(()=>e.model.announce("plonk")))}static onCopy(e,t){var n;if(!t.clipboardData)return;if(!e.contentEditable&&"none"===e.userSelect)return void e.model.announce("plonk");let r=e.model,i=r.selectionIsCollapsed?[0,r.lastOffset]:DO(r.selection),a=r.getAtoms(i);if(a.every((e=>"text"===e.mode||!e.mode)))t.clipboardData.setData("text/plain",a.filter((e=>e instanceof bO)).map((e=>e.value)).join(""));else if(a.every((e=>"latex"===e.mode)))t.clipboardData.setData("text/plain",r.getAtoms(i,{includeChildren:!0}).map((e=>{var t;return null!=(t=e.value)?t:""})).join(""));else{let l;l=1===a.length&&void 0!==a[0].verbatimLatex?a[0].verbatimLatex:r.getValue(i,"latex-expanded"),t.clipboardData.setData("application/x-latex",l);try{t.clipboardData.setData("text/plain",e.options.onExport(e,l,i))}catch(o){}if(1===a.length){let e=a[0];("root"===e.type||"group"===e.type)&&(a=e.body.filter((e=>"first"!==e.type)))}try{t.clipboardData.setData("application/json+mathlive",JSON.stringify(a.map((e=>e.toJson()))))}catch(o){}if(null!=(n=window[Symbol.for("io.cortexjs.compute-engine")])&&n.ComputeEngine){let e=globalThis.MathfieldElement.computeEngine;if(e)try{let n=e.jsonSerializationOptions;e.jsonSerializationOptions={metadata:["latex"]};let a=e.parse(r.getValue(i,"latex-unstyled"));e.jsonSerializationOptions=n;let o=JSON.stringify(a.json);o&&t.clipboardData.setData("application/json",o)}catch(s){}}}t.preventDefault()}static insert(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let a="auto"===r.mode?t.mode:null!=(i=r.mode)?i:t.mode;return e._modes[a].insert(t,n,r)}onPaste(e,t){return!1}insert(e,t,n){return!1}};LO._modes={};var OO=LO,zO=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",command:"moveToNextGroup"},{key:"shift+[Tab]",command:"moveToPreviousGroup"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:"complete"},{key:"[Enter]",ifMode:"latex",command:"complete"},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"cmd+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"ctrl+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"cmd+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"ctrl+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"cmd+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleContextMenu"},{key:"alt+shift+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+alt+[KeyT]",ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"shift+alt+[KeyT]",ifMode:"text",command:["switchMode","math","",""]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+shift+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"alt+[Tab]",ifMode:"math",command:"addColumnAfter"},{key:"shift+alt+[Tab]",ifMode:"math",command:"addColumnBefore"},{key:"alt+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Enter]",ifMode:"math",command:"addRowBefore"},{key:"alt+[Return]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Return]",ifMode:"math",command:"addRowBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]},{key:"[Backquote]",ifLayout:["windows.german","linux.german"],ifMode:"math",command:["insert","^"]},{key:"[IntlBackslash]",ifLayout:["apple.german"],ifMode:"math",command:["insert","^"]}],IO={"\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\infty":"alt+[Digit5]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function PO(e){var t;return(null==(t=e.element)?void 0:t.mathfield)===e}function qO(e){let t=function(e){var t,n;return null!=(n=null!=(t=e.querySelector(".ML__caret"))?t:e.querySelector(".ML__text-caret"))?n:e.querySelector(".ML__latex-caret")}(e);if(!t)return null;let n=t.getBoundingClientRect();return{x:n.right,y:n.bottom,height:n.height}}function RO(e){var t;if(!e.parent)return"root";let n=null!=(t=e.parent.id)?t:"";return n+="string"==typeof e.parentBranch?"-"+e.parentBranch:"-".concat(e.parentBranch[0],"/").concat(e.parentBranch[0]),n}function jO(e,t,n){if(!t)return null;let r=e.field.getBoundingClientRect(),i=t.right-t.left,a=t.bottom-t.top,o=Math.ceil(t.left-r.left+e.field.scrollLeft*n),s=Math.ceil(t.top-r.top);return{left:o,right:o+i,top:s,bottom:s+a}}function KO(e){let t=e.getBoundingClientRect(),n=parseInt(getComputedStyle(e).marginRight),r={top:t.top-1,bottom:t.bottom,left:t.left,right:t.right-1+n};if(0===e.children.length||"SVG"===e.tagName.toUpperCase())return r;for(let i of e.children)if(1===i.nodeType&&"atomId"in i.dataset&&!i.classList.contains("ML__pstrut")){let e=KO(i);r.left=Math.min(r.left,e.left),r.right=Math.max(r.right,e.right),r.top=Math.min(r.top,e.top),r.bottom=Math.max(r.bottom,e.bottom)}return r}function VO(e,t){var n,r;if(!t.id)return null;let i=null!=(r=null==(n=e.atomBoundsCache)?void 0:n.get(t.id))?r:null;if(null!==i)return i;let a=e.field.querySelector('[data-atom-id="'.concat(t.id,'"]'));return i=a?KO(a):null,e.atomBoundsCache&&(i?e.atomBoundsCache.set(t.id,i):e.atomBoundsCache.delete(t.id)),null!=i?i:null}function UO(e,t){return e.model.selection.ranges.reduce(((n,r)=>n.concat(...function(e,t,n){let r=new Map;for(let i of e.model.getAtoms(t,{includeChildren:!0})){if(null!=n&&n.excludeAtomsWithBackground&&i.style.backgroundColor)continue;let t=e.field,a=t.offsetWidth,o=Math.floor(t.getBoundingClientRect().width)/a;o=isNaN(o)?1:o;let s=jO(e,VO(e,i),o);if(s){let e=RO(i);if(r.has(e)){let t=r.get(e);r.set(e,{left:Math.min(t.left,s.left),right:Math.max(t.right,s.right),top:Math.min(t.top,s.top),bottom:Math.max(t.bottom,s.bottom)})}else r.set(e,s)}}return[...r.values()]}(e,r,t))),[])}function $O(e,t){return"*"===e||"none"===t||("same-origin"===t?!window.origin||e===window.origin:"function"==typeof t&&t(e))}function HO(e){let t=0,n=0,r=e.offsetWidth,i=e.offsetHeight;for(;e instanceof HTMLElement;)t+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return new DOMRect(n,t,r,i)}var WO,GO;function ZO(e){let t="";switch(e){case"mathfield-element":t="\n    :host { display: inline-block; background-color: field; color: fieldtext; border-width: 1px; border-style: solid; border-color: #acacac; border-radius: 2px; padding:4px;}\n    :host([hidden]) { display: none; }\n    :host([disabled]), :host([disabled]:focus), :host([disabled]:focus-within) { outline: none; opacity:  .5; }\n    :host(:focus), :host(:focus-within) {\n      outline: Highlight auto 1px;    /* For Firefox */\n      outline: -webkit-focus-ring-color auto 1px;\n    }\n    :host([readonly]:focus), :host([readonly]:focus-within),\n    :host([read-only]:focus), :host([read-only]:focus-within) {\n      outline: none;\n    }\n    @media (hover: none) and (pointer: coarse) {\n      :host(:not(:focus)) :first-child { pointer-events: none !important; }\n    }";break;case"core":t=".ML__container {\n  min-height: auto !important;\n  --_hue: var(--hue, 212);\n  --_placeholder-color: var(--placeholder-color, hsl(var(--_hue), 40%, 49%));\n  --_placeholder-opacity: var(--placeholder-opacity, 0.4);\n  --_text-font-family: var(--text-font-family, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif);\n}\n.ML__sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  margin: -1px;\n  padding: 0;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  clip-path: inset(50%);\n  white-space: nowrap;\n  border: 0;\n}\n.ML__is-inline {\n  display: inline-block;\n}\n.ML__base {\n  visibility: inherit;\n  display: inline-block;\n  position: relative;\n  cursor: text;\n  padding: 0;\n  margin: 0;\n  box-sizing: content-box;\n  border: 0;\n  outline: 0;\n  vertical-align: baseline;\n  font-weight: inherit;\n  font-family: inherit;\n  font-style: inherit;\n  text-decoration: none;\n  width: min-content;\n}\n.ML__strut,\n.ML__strut--bottom {\n  display: inline-block;\n  min-height: 0.5em;\n}\n.ML__small-delim {\n  font-family: KaTeX_Main;\n}\n/* Text mode */\n.ML__text {\n  font-family: var(--_text-font-family);\n  white-space: pre;\n}\n/* Use cmr for 'math upright' */\n.ML__cmr {\n  font-family: KaTeX_Main;\n  font-style: normal;\n}\n.ML__mathit {\n  font-family: KaTeX_Math;\n  /* The KaTeX_Math font is italic by default, so the font-style below is only \n     useful when a fallback font is used\n  */\n  font-style: italic;\n}\n.ML__mathbf {\n  font-family: KaTeX_Main;\n  font-weight: bold;\n}\n/* Lowercase greek symbols should stick to math font when \\mathbf is applied \n   to match TeX idiosyncratic behavior */\n.lcGreek.ML__mathbf {\n  font-family: KaTeX_Math;\n  font-weight: normal;\n}\n.ML__mathbfit {\n  font-family: KaTeX_Math;\n  font-weight: bold;\n  font-style: italic;\n}\n.ML__ams {\n  font-family: KaTeX_AMS;\n}\n/* Blackboard */\n.ML__bb {\n  font-family: KaTeX_AMS;\n}\n.ML__cal {\n  font-family: KaTeX_Caligraphic;\n}\n.ML__frak {\n  font-family: KaTeX_Fraktur;\n}\n.ML__tt {\n  font-family: KaTeX_Typewriter;\n}\n.ML__script {\n  font-family: KaTeX_Script;\n}\n.ML__sans {\n  font-family: KaTeX_SansSerif;\n}\n.ML__series_ul {\n  font-weight: 100;\n}\n.ML__series_el {\n  font-weight: 100;\n}\n.ML__series_l {\n  font-weight: 200;\n}\n.ML__series_sl {\n  font-weight: 300;\n}\n.ML__series_sb {\n  font-weight: 500;\n}\n.ML__bold,\n.ML__boldsymbol {\n  font-weight: 700;\n}\n.ML__series_eb {\n  font-weight: 800;\n}\n.ML__series_ub {\n  font-weight: 900;\n}\n.ML__series_uc {\n  font-stretch: ultra-condensed;\n}\n.ML__series_ec {\n  font-stretch: extra-condensed;\n}\n.ML__series_c {\n  font-stretch: condensed;\n}\n.ML__series_sc {\n  font-stretch: semi-condensed;\n}\n.ML__series_sx {\n  font-stretch: semi-expanded;\n}\n.ML__series_x {\n  font-stretch: expanded;\n}\n.ML__series_ex {\n  font-stretch: extra-expanded;\n}\n.ML__series_ux {\n  font-stretch: ultra-expanded;\n}\n.ML__it {\n  font-style: italic;\n}\n.ML__shape_ol {\n  -webkit-text-stroke: 1px black;\n  text-stroke: 1px black;\n  color: transparent;\n}\n.ML__shape_sc {\n  font-variant: small-caps;\n}\n.ML__shape_sl {\n  font-style: oblique;\n}\n/* First level emphasis */\n.ML__emph {\n  color: #bc2612;\n}\n/* Second level emphasis */\n.ML__emph .ML__emph {\n  color: #0c7f99;\n}\n.ML__highlight {\n  color: #007cb2;\n  background: #edd1b0;\n}\n.ML__center {\n  text-align: center;\n}\n.ML__left {\n  text-align: left;\n}\n.ML__right {\n  text-align: right;\n}\n.ML__label_padding {\n  padding: 0 0.5em;\n}\n.ML__frac-line {\n  width: 100%;\n  min-height: 1px;\n}\n.ML__frac-line:after {\n  content: '';\n  display: block;\n  margin-top: max(-1px, -0.04em);\n  min-height: max(1px, 0.04em);\n  /* Ensure the line is visible when printing even if \"turn off background images\" is on*/\n  -webkit-print-color-adjust: exact;\n  print-color-adjust: exact;\n  /* There's a bug since Chrome 62 where \n      sub-pixel border lines don't draw at some zoom \n      levels (110%, 90%). \n      Setting the min-height used to work around it, but that workaround\n      broke in Chrome 84 or so.\n      Setting the background (and the min-height) seems to work for now.\n      */\n  background: currentColor;\n  box-sizing: content-box;\n  /* Vuetify sets the box-sizing to inherit \n            causes the fraction line to not draw at all sizes (see #26) */\n  /* On some versions of Firefox on Windows, the line fails to \n            draw at some zoom levels, but setting the transform triggers\n            the hardware accelerated path, which works */\n  transform: translate(0, 0);\n}\n.ML__sqrt {\n  display: inline-block;\n}\n.ML__sqrt-sign {\n  display: inline-block;\n  position: relative;\n}\n.ML__sqrt-line {\n  display: inline-block;\n  height: max(1px, 0.04em);\n  width: 100%;\n}\n.ML__sqrt-line:before {\n  content: '';\n  display: block;\n  margin-top: min(-1px, -0.04em);\n  min-height: max(1px, 0.04em);\n  /* Ensure the line is visible when printing even if \"turn off background images\" is on*/\n  -webkit-print-color-adjust: exact;\n  print-color-adjust: exact;\n  background: currentColor;\n  /* On some versions of Firefox on Windows, the line fails to \n            draw at some zoom levels, but setting the transform triggers\n            the hardware accelerated path, which works */\n  transform: translate(0, 0);\n}\n.ML__sqrt-line:after {\n  border-bottom-width: 1px;\n  content: ' ';\n  display: block;\n  margin-top: -0.1em;\n}\n.ML__sqrt-index {\n  margin-left: 0.27777778em;\n  margin-right: -0.55555556em;\n}\n.ML__delim-size1 {\n  font-family: KaTeX_Size1;\n}\n.ML__delim-size2 {\n  font-family: KaTeX_Size2;\n}\n.ML__delim-size3 {\n  font-family: KaTeX_Size3;\n}\n.ML__delim-size4 {\n  font-family: KaTeX_Size4;\n}\n.ML__delim-mult .delim-size1 > span {\n  font-family: KaTeX_Size1;\n}\n.ML__delim-mult .delim-size4 > span {\n  font-family: KaTeX_Size4;\n}\n.ML__accent-body > span {\n  font-family: KaTeX_Main;\n  width: 0;\n}\n.ML__accent-vec {\n  position: relative;\n  left: 0.24em;\n}\n/** The markup for a LaTeX formula, either in an editable mathfield or \n    in a static display.\n*/\n.ML__latex {\n  display: inline-block;\n  direction: ltr;\n  text-align: left;\n  text-indent: 0;\n  text-rendering: auto;\n  font-family: KaTeX_Main, 'Times New Roman', serif;\n  font-style: normal;\n  font-size-adjust: none;\n  font-stretch: normal;\n  font-variant-caps: normal;\n  letter-spacing: normal;\n  line-height: 1.2;\n  word-wrap: normal;\n  word-spacing: normal;\n  white-space: nowrap;\n  text-shadow: none;\n  -webkit-user-select: none;\n  user-select: none;\n  width: min-content;\n}\n.ML__latex .style-wrap {\n  position: relative;\n}\n.ML__latex .ML__mfrac {\n  display: inline-block;\n}\n.ML__latex .ML__left-right {\n  display: inline-block;\n}\n.ML__latex .ML__vlist-t {\n  display: inline-table;\n  table-layout: fixed;\n  border-collapse: collapse;\n}\n.ML__latex .ML__vlist-r {\n  display: table-row;\n}\n.ML__latex .ML__vlist {\n  display: table-cell;\n  vertical-align: bottom;\n  position: relative;\n}\n.ML__latex .ML__vlist > span {\n  display: block;\n  height: 0;\n  position: relative;\n}\n.ML__latex .ML__vlist > span > span {\n  display: inline-block;\n}\n.ML__latex .ML__vlist > span > .ML__pstrut {\n  overflow: hidden;\n  width: 0;\n}\n.ML__latex .ML__vlist-t2 {\n  margin-right: -2px;\n}\n.ML__latex .ML__vlist-s {\n  display: table-cell;\n  vertical-align: bottom;\n  font-size: 1px;\n  width: 2px;\n  min-width: 2px;\n}\n.ML__latex .ML__msubsup {\n  text-align: left;\n}\n.ML__latex .ML__negativethinspace {\n  display: inline-block;\n  margin-left: -0.16667em;\n  height: 0.71em;\n}\n.ML__latex .ML__thinspace {\n  display: inline-block;\n  width: 0.16667em;\n  height: 0.71em;\n}\n.ML__latex .ML__mediumspace {\n  display: inline-block;\n  width: 0.22222em;\n  height: 0.71em;\n}\n.ML__latex .ML__thickspace {\n  display: inline-block;\n  width: 0.27778em;\n  height: 0.71em;\n}\n.ML__latex .ML__enspace {\n  display: inline-block;\n  width: 0.5em;\n  height: 0.71em;\n}\n.ML__latex .ML__quad {\n  display: inline-block;\n  width: 1em;\n  height: 0.71em;\n}\n.ML__latex .ML__qquad {\n  display: inline-block;\n  width: 2em;\n  height: 0.71em;\n}\n.ML__latex .ML__llap,\n.ML__latex .ML__rlap {\n  width: 0;\n  position: relative;\n  display: inline-block;\n}\n.ML__latex .ML__llap > .ML__inner,\n.ML__latex .ML__rlap > .ML__inner {\n  position: absolute;\n}\n.ML__latex .ML__llap > .ML__fix,\n.ML__latex .ML__rlap > .ML__fix {\n  display: inline-block;\n}\n.ML__latex .ML__llap > .ML__inner {\n  right: 0;\n}\n.ML__latex .ML__rlap > .ML__inner {\n  left: 0;\n}\n.ML__latex .ML__rule {\n  display: inline-block;\n  border: solid 0;\n  position: relative;\n  box-sizing: border-box;\n}\n.ML__latex .overline .overline-line,\n.ML__latex .underline .underline-line {\n  width: 100%;\n}\n.ML__latex .overline .overline-line:before,\n.ML__latex .underline .underline-line:before {\n  content: '';\n  border-bottom-style: solid;\n  border-bottom-width: max(1px, 0.04em);\n  -webkit-print-color-adjust: exact;\n  print-color-adjust: exact;\n  display: block;\n}\n.ML__latex .overline .overline-line:after,\n.ML__latex .underline .underline-line:after {\n  border-bottom-style: solid;\n  border-bottom-width: max(1px, 0.04em);\n  -webkit-print-color-adjust: exact;\n  print-color-adjust: exact;\n  content: '';\n  display: block;\n  margin-top: -1px;\n}\n.ML__latex .ML__stretchy {\n  display: block;\n  position: absolute;\n  width: 100%;\n  left: 0;\n  overflow: hidden;\n}\n.ML__latex .ML__stretchy:before,\n.ML__latex .ML__stretchy:after {\n  content: '';\n}\n.ML__latex .ML__stretchy svg {\n  display: block;\n  position: absolute;\n  width: 100%;\n  height: inherit;\n  fill: currentColor;\n  stroke: currentColor;\n  fill-rule: nonzero;\n  fill-opacity: 1;\n  stroke-width: 1;\n  stroke-linecap: butt;\n  stroke-linejoin: miter;\n  stroke-miterlimit: 4;\n  stroke-dasharray: none;\n  stroke-dashoffset: 0;\n  stroke-opacity: 1;\n}\n.ML__latex .slice-1-of-2 {\n  display: inline-flex;\n  position: absolute;\n  left: 0;\n  width: 50.2%;\n  overflow: hidden;\n}\n.ML__latex .slice-2-of-2 {\n  display: inline-flex;\n  position: absolute;\n  right: 0;\n  width: 50.2%;\n  overflow: hidden;\n}\n.ML__latex .slice-1-of-3 {\n  display: inline-flex;\n  position: absolute;\n  left: 0;\n  width: 25.1%;\n  overflow: hidden;\n}\n.ML__latex .slice-2-of-3 {\n  display: inline-flex;\n  position: absolute;\n  left: 25%;\n  width: 50%;\n  overflow: hidden;\n}\n.ML__latex .slice-3-of-3 {\n  display: inline-flex;\n  position: absolute;\n  right: 0;\n  width: 25.1%;\n  overflow: hidden;\n}\n.ML__latex .slice-1-of-1 {\n  display: inline-flex;\n  position: absolute;\n  width: 100%;\n  left: 0;\n  overflow: hidden;\n}\n.ML__latex .ML__nulldelimiter {\n  display: inline-block;\n}\n.ML__latex .ML__op-group {\n  display: inline-block;\n}\n.ML__latex .ML__op-symbol {\n  position: relative;\n}\n.ML__latex .ML__op-symbol.ML__small-op {\n  font-family: KaTeX_Size1;\n}\n.ML__latex .ML__op-symbol.ML__large-op {\n  font-family: KaTeX_Size2;\n}\n.ML__latex .ML__mtable .ML__vertical-separator {\n  display: inline-block;\n  min-width: 1px;\n  box-sizing: border-box;\n}\n.ML__latex .ML__mtable .ML__arraycolsep {\n  display: inline-block;\n}\n.ML__latex .ML__mtable .col-align-m > .ML__vlist-t {\n  text-align: center;\n}\n.ML__latex .ML__mtable .col-align-c > .ML__vlist-t {\n  text-align: center;\n}\n.ML__latex .ML__mtable .col-align-l > .ML__vlist-t {\n  text-align: left;\n}\n.ML__latex .ML__mtable .col-align-r > .ML__vlist-t {\n  text-align: right;\n}\n.ML__error {\n  display: inline-block;\n  background-image: radial-gradient(ellipse at center, hsl(341, 100%, 40%), rgba(0, 0, 0, 0) 70%);\n  background-color: hsla(341, 100%, 40%, 0.1);\n  background-repeat: repeat-x;\n  background-size: 3px 3px;\n  padding-bottom: 3px;\n  background-position: 0 100%;\n}\n.ML__error > .ML__error {\n  background: transparent;\n  padding: 0;\n}\n.ML__placeholder {\n  color: var(--_placeholder-color);\n  opacity: var(--_placeholder-opacity);\n  padding-left: 0.4ex;\n  padding-right: 0.4ex;\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n}\n.ML__notation {\n  position: absolute;\n  box-sizing: border-box;\n  line-height: 0;\n}\n/* This class is used to implement the `\\mathtip` and `\\texttip` commands\n   For UI elements, see `[data-ML__tooltip]`\n*/\n.ML__tooltip-container {\n  position: relative;\n  transform: scale(0);\n}\n.ML__tooltip-container .ML__tooltip-content {\n  position: fixed;\n  display: inline-table;\n  visibility: hidden;\n  z-index: 2;\n  width: max-content;\n  max-width: 400px;\n  padding: 12px 12px;\n  border-radius: 8px;\n  background: #616161;\n  --_selection-color: #fff;\n  color: #fff;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);\n  opacity: 0;\n  transition: opacity 0.15s cubic-bezier(0.4, 0, 1, 1);\n}\n.ML__tooltip-container .ML__tooltip-content .ML__text {\n  white-space: normal;\n}\n.ML__tooltip-container .ML__tooltip-content .ML__base {\n  display: contents;\n}\n.ML__tooltip-container:hover .ML__tooltip-content {\n  visibility: visible;\n  opacity: 1;\n  font-size: 0.75em;\n  transform: scale(1) translate(0, 3em);\n}\n";break;case"mathfield":t="@keyframes ML__caret-blink {\n  0%,\n  100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n}\n.ML__container {\n  display: inline-flex;\n  flex-flow: row;\n  justify-content: space-between;\n  align-items: flex-end;\n  min-height: 39px;\n  /* Need some room for the virtual keyboard toggle */\n  width: 100%;\n  /* Encourage browsers to consider allocating a hardware accelerated\n   layer for this element. */\n  isolation: isolate;\n  /* Prevent the browser from trying to interpret touch gestures in the field */\n  /* \"Disabling double-tap to zoom removes the need for browsers to\n        delay the generation of click events when the user taps the screen.\" */\n  touch-action: none;\n  --_caret-color: var(--caret-color, hsl(var(--_hue), 40%, 49%));\n  --_selection-color: var(--selection-color, #000);\n  --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 70%, 85%));\n  --_text-highlight-background-color: var(--highlight-text, hsla(var(--_hue), 40%, 50%, 0.1));\n  --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 40%, 95%));\n  --_smart-fence-color: var(--smart-fence-color, currentColor);\n  --_smart-fence-opacity: var(--smart-fence-opacity, 0.5);\n  --_latex-color: var(--latex-color, hsl(var(--_hue), 80%, 40%));\n  --_correct-color: var(--correct-color, #10a000);\n  --_incorrect-color: var(--incorrect-color, #a01b00);\n  --_composition-background-color: var(--composition-background-color, #fff1c2);\n  --_composition-text-color: var(--composition-text-color, black);\n  --_composition-underline-color: var(--composition-underline-color, transparent);\n}\n/* This is the actual field content (formula) */\n.ML__content {\n  display: flex;\n  align-items: center;\n  align-self: center;\n  position: relative;\n  overflow: hidden;\n  padding: 2px 3px 2px 1px;\n  width: 100%;\n}\n.ML__virtual-keyboard-toggle,\n.ML__menu-toggle {\n  box-sizing: border-box;\n  display: flex;\n  align-self: center;\n  align-items: center;\n  flex-shrink: 0;\n  flex-direction: column;\n  justify-content: center;\n  width: 34px;\n  height: 34px;\n  padding: 0;\n  margin-right: 4px;\n  cursor: pointer;\n  /* Avoid some weird blinking with :hover */\n  border-radius: 8px;\n  border: 1px solid transparent;\n  transition: background 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);\n  color: hsl(var(--_hue), 40%, 50%);\n  fill: currentColor;\n  background: transparent;\n}\n.ML__virtual-keyboard-toggle:hover,\n.ML__menu-toggle:hover {\n  background: hsla(0, 0%, 70%, 0.3);\n  color: #333;\n  fill: currentColor;\n}\n.ML__virtual-keyboard-toggle > span,\n.ML__menu-toggle > span {\n  display: flex;\n  align-self: center;\n  align-items: center;\n}\n/* The invisible element used to capture keyboard events. We're just trying\n really hard to make sure it doesn't show. */\n.ML__keyboard-sink {\n  display: inline-block;\n  resize: none;\n  outline: none;\n  border: none;\n  /* Need these for Microsoft Edge */\n  position: fixed;\n  clip: rect(0 0 0 0);\n  /* Need this to prevent iOS Safari from auto-zooming */\n  font-size: 1em;\n  font-family: KaTeX_Main;\n  line-height: 0.5;\n  /* On Chromium, if this is 0, no keyboard events are received */\n}\n[part=\"placeholder\"] {\n  color: var(--neutral-400);\n}\n.ML__composition {\n  background: var(--_composition-background-color);\n  color: var(--_composition-text-color);\n  text-decoration: underline var(--_composition-underline-color);\n}\n.ML__caret::after {\n  content: '';\n  visibility: hidden;\n  width: 0;\n  display: inline-block;\n  height: 0.76em;\n  --_caret-width: clamp(2px, 0.08em, 10px);\n  border: none;\n  border-radius: calc(var(--_caret-width) / 2);\n  border-right: var(--_caret-width) solid var(--_caret-color);\n  margin-right: calc(-1 * var(--_caret-width));\n  position: relative;\n  left: -0.045em;\n  bottom: -0.05em;\n  animation: ML__caret-blink 1.05s step-end forwards infinite;\n}\n.ML__text-caret::after {\n  content: '';\n  visibility: hidden;\n  width: 0;\n  display: inline-block;\n  height: 0.76em;\n  --_caret-width: clamp(2px, 0.08em, 10px);\n  border: none;\n  border-radius: calc(var(--_caret-width) / 2);\n  border-right: var(--_caret-width) solid var(--_caret-color);\n  margin-right: calc(-1 * var(--_caret-width));\n  position: relative;\n  left: -0.045em;\n  bottom: -0.05em;\n  animation: ML__caret-blink 1.05s step-end forwards infinite;\n}\n.ML__latex-caret::after {\n  content: '';\n  visibility: hidden;\n  --_caret-width: clamp(2px, 0.08em, 10px);\n  border: none;\n  border-radius: calc(var(--_caret-width) / 2);\n  border-right: var(--_caret-width) solid var(--_latex-color);\n  margin-right: calc(-1 * var(--_caret-width));\n  position: relative;\n  left: -0.019em;\n  animation: ML__caret-blink 1.05s step-end forwards infinite;\n}\n.ML__focused .ML__latex-caret::after,\n.ML__focused .ML__text-caret::after,\n.ML__focused .ML__caret::after {\n  visibility: visible;\n}\n.ML__focused .ML__text {\n  background: var(--_text-highlight-background-color);\n}\n/* When using smartFence, the anticipated closing fence is displayed\nwith this style */\n.ML__smart-fence__close {\n  opacity: var(--_smart-fence-opacity);\n  color: var(--_smart-fence-color);\n}\n.ML__selected,\n.ML__focused .ML__selected .ML__contains-caret,\n.ML__focused .ML__selected .ML__smart-fence__close,\n.ML__focused .ML__selected .ML__placeholder {\n  color: var(--_selection-color);\n  opacity: 1;\n}\n.ML__selection {\n  box-sizing: border-box;\n  background: var(--_selection-background-color) !important;\n}\n.ML__contains-caret.ML__close,\n.ML__contains-caret.ML__open,\n.ML__contains-caret > .ML__close,\n.ML__contains-caret > .ML__open,\n.ML__contains-caret .ML__sqrt-sign,\n.ML__contains-caret .ML__sqrt-line {\n  color: var(--_caret-color);\n}\n.ML__contains-highlight {\n  box-sizing: border-box;\n  background: transparent;\n}\n.ML__focused .ML__contains-highlight {\n  background: var(--_contains-highlight-background-color);\n}\n.ML__raw-latex {\n  font-family: 'Berkeley Mono', 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;\n  font-weight: 400;\n  font-size: 0.8em;\n  letter-spacing: -0.05em;\n  color: var(--_latex-color);\n}\n.ML__suggestion {\n  color: var(--neutral-500);\n}\n.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover {\n  background: hsl(var(--_hue), 25%, 35%);\n  color: #fafafa;\n  fill: currentColor;\n}\n.ML__virtual-keyboard-toggle:focus {\n  outline: none;\n  border-radius: 8px;\n  border: 2px solid hsl(var(--_hue), 40%, 50%);\n}\n.ML__virtual-keyboard-toggle.is-pressed,\n.ML__virtual-keyboard-toggle.is-active:hover,\n.ML__virtual-keyboard-toggle.is-active {\n  background: hsl(var(--_hue), 25%, 35%);\n  color: #fafafa;\n  fill: currentColor;\n}\n/* Add an attribute 'data-tooltip' to automatically show a\n   tooltip over a element on hover.\n*/\n[data-tooltip] {\n  position: relative;\n}\n[data-tooltip]::after {\n  content: attr(data-tooltip);\n  position: absolute;\n  display: block;\n  z-index: 2;\n  pointer-events: none;\n  right: auto;\n  top: calc(-100% - 4px);\n  width: max-content;\n  max-width: 200px;\n  padding: 8px 8px;\n  border-radius: 4px;\n  background: #616161;\n  color: #fff;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);\n  text-align: center;\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  font-style: normal;\n  font-weight: 400;\n  font-size: 13px;\n  /* Phone */\n  opacity: 0;\n  transform: scale(0.5);\n}\n@media only screen and (max-width: 767px) {\n  [data-tooltip]::after {\n    padding: 8px 16px;\n    font-size: 16px;\n  }\n}\nmenu [data-tooltip]::after {\n  left: 100%;\n  top: 0%;\n}\nmenu .ML__base {\n  cursor: default;\n}\n/** Don't display if we're tracking, i.e. have the pointer down */\n.tracking [data-tooltip]:hover::after {\n  /* Use visibility, not display. Display will remove the after from the DOM, and the override below will not work */\n  visibility: hidden;\n}\n/** But do display if tracking and inside a menu */\n.tracking menu li[data-tooltip]:hover::after,\n[data-tooltip]:hover::after {\n  visibility: visible;\n  opacity: 1;\n  transform: scale(1);\n  transition-property: opacity, scale;\n  transition-duration: 0.15s;\n  transition-delay: 1s;\n  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);\n}\n.ML__prompt {\n  border-radius: 2px;\n}\n.ML__editablePromptBox {\n  outline: 1px solid #acacac;\n  border-radius: 2px;\n  z-index: -1;\n}\n.ML__focusedPromptBox {\n  outline: highlight auto 1px;\n}\n.ML__lockedPromptBox {\n  background-color: rgba(142, 142, 141, 0.4);\n  z-index: -1;\n}\n.ML__correctPromptBox {\n  outline: 1px solid var(--_correct-color);\n  box-shadow: 0 0 5px var(--_correct-color);\n}\n.ML__incorrectPromptBox {\n  outline: 1px solid var(--_incorrect-color);\n  box-shadow: 0 0 5px var(--_incorrect-color);\n}\n.variant-submenu {\n  display: flex;\n  flex-direction: column;\n  padding: 8px;\n}\n.variant-submenu [part=menu-item] {\n  font-size: 2rem;\n  text-align: center;\n  margin: 0;\n}\n.insert-matrix-submenu {\n  display: grid;\n  padding: 8px;\n  align-content: center;\n  justify-content: center;\n  grid-template-columns: repeat(5, minmax(0, 1fr));\n}\n.insert-matrix-submenu [part=menu-item] {\n  font-size: 21px;\n  border: none;\n  border-radius: 0;\n  line-height: 21px;\n  text-align: center;\n  padding: 0;\n  margin: 0;\n}\n.border-submenu [part=menu-item] {\n  font-size: 2rem;\n  line-height: 1.2;\n  text-align: center;\n}\n.swatches-submenu {\n  --_swatch-size: 2rem;\n  --_columns: 4;\n  display: flex;\n  flex-flow: wrap;\n  padding: 8px;\n  max-width: calc(var(--_columns) * (var(--_swatch-size) + 18px) + 16px);\n  box-sizing: border-box;\n}\n.menu-swatch {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: fit-content;\n  height: fit-content;\n  margin: 2px;\n  padding: 0;\n  background: var(--neutral-200);\n}\n.menu-swatch > .label {\n  padding: 0;\n  margin: 0;\n  line-height: 0;\n}\n.menu-swatch > .label > span {\n  display: inline-block;\n  margin: 6px;\n  min-width: var(--_swatch-size);\n  min-height: var(--_swatch-size);\n  border-radius: 50%;\n}\n.menu-swatch.active {\n  background: var(--neutral-100);\n  scale: 1.4;\n}\n.menu-swatch.active > .label > span {\n  border-radius: 2px;\n}\n.menu-swatch .ui-checkmark,\n.menu-swatch .ui-mixedmark {\n  position: absolute;\n  margin: 0;\n  padding: 0;\n  color: white;\n}\n.menu-swatch.dark-contrast .ui-checkmark,\n.menu-swatch.dark-contrast .ui-mixedmark {\n  color: #000;\n}\n";break;case"environment-popover":t="#mathlive-environment-popover.is-visible {\n  visibility: visible;\n}\n#mathlive-environment-popover {\n  --_environment-panel-height: var(--environment-panel-height, 70px);\n  --_accent-color: var(--accent-color, #aaa);\n  --_background: var(--environment-panel-background, #fff);\n  --_button-background: var(--environment-panel-button-background, white);\n  --_button-background-hover: var(--environment-panel-button-background-hover, #f5f5f7);\n  --_button-background-active: var(--environment-panel-button-background-active, #f5f5f7);\n  --_button-text: var(--environment-panel-button-text, #e3e4e8);\n  position: absolute;\n  width: calc(var(--_environment-panel-height) * 2);\n  height: var(--_environment-panel-height);\n  border-radius: 4px;\n  border: 1.5px solid var(--_accent-color);\n  background-color: var(--_background);\n  box-shadow: 0 0 30px 0 var(--environment-shadow, rgba(0, 0, 0, 0.4));\n  pointer-events: all;\n  visibility: hidden;\n}\n#mathlive-environment-popover .MLEP__array-buttons {\n  height: calc(var(--_environment-panel-height) * 5/4);\n  width: calc(var(--_environment-panel-height) * 5/4);\n  margin-left: calc(0px - var(--_environment-panel-height) * 0.16);\n  margin-top: calc(0px - var(--_environment-panel-height) * 0.19);\n}\n#mathlive-environment-popover .MLEP__array-buttons .font {\n  fill: white;\n}\n#mathlive-environment-popover .MLEP__array-buttons circle {\n  fill: #7f7f7f;\n  transition: fill 300ms;\n}\n#mathlive-environment-popover .MLEP__array-buttons .MLEP__array-insert-background {\n  fill-opacity: 1;\n  fill: var(--_background);\n  stroke: var(--_accent-color);\n  stroke-width: 3px;\n}\n#mathlive-environment-popover .MLEP__array-buttons line {\n  stroke: var(--_accent-color);\n  stroke-opacity: 0;\n  stroke-width: 40;\n  pointer-events: none;\n  transition: stroke-opacity 300ms;\n  stroke-linecap: round;\n}\n#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover circle {\n  fill: var(--_accent-color);\n}\n#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover line {\n  stroke-opacity: 1;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls {\n  height: 100%;\n  width: 50%;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options {\n  width: var(--_environment-panel-height);\n  height: var(--_environment-panel-height);\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  justify-content: space-around;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg {\n  pointer-events: all;\n  margin-top: 2px;\n  width: calc(var(--_environment-panel-height) / 3 * 28 / 24);\n  height: calc(var(--_environment-panel-height) / 3 - 2px);\n  border-radius: calc(var(--_environment-panel-height) / 25);\n  background-color: var(--_button-background);\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg:hover {\n  background-color: var(--_button-background-hover);\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path,\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg line {\n  stroke: var(--_button-text);\n  stroke-width: 2;\n  stroke-linecap: round;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg rect,\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path {\n  fill-opacity: 0;\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active {\n  pointer-events: none;\n  background-color: var(--_button-background-active);\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active path,\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active line {\n  stroke: var(--_accent-color);\n}\n#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active circle {\n  fill: var(--_accent-color);\n}\n";break;case"suggestion-popover":t="/* The element that display info while in latex mode */\n#mathlive-suggestion-popover {\n  background-color: rgba(97, 97, 97);\n  color: #fff;\n  text-align: center;\n  border-radius: 8px;\n  position: fixed;\n  z-index: 1;\n  display: none;\n  flex-direction: column;\n  justify-content: center;\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\n}\n#mathlive-suggestion-popover.top-tip::after {\n  content: '';\n  position: absolute;\n  top: -15px;\n  left: calc(50% - 15px);\n  width: 0;\n  height: 0;\n  border-left: 15px solid transparent;\n  border-right: 15px solid transparent;\n  border-bottom: 15px solid rgba(97, 97, 97);\n  font-size: 1rem;\n}\n#mathlive-suggestion-popover.bottom-tip::after {\n  content: '';\n  position: absolute;\n  bottom: -15px;\n  left: calc(50% - 15px);\n  width: 0;\n  height: 0;\n  border-left: 15px solid transparent;\n  border-right: 15px solid transparent;\n  border-top: 15px solid rgba(97, 97, 97);\n  font-size: 1rem;\n}\n#mathlive-suggestion-popover.is-animated {\n  transition: all 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);\n  animation: ML__fade-in cubic-bezier(0, 0, 0.2, 1) 0.15s;\n}\n#mathlive-suggestion-popover.is-visible {\n  display: flex;\n}\n@keyframes ML__fade-in {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n/* The wrapper class for the entire content of the popover panel */\n#mathlive-suggestion-popover ul {\n  display: flex;\n  flex-flow: column;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  align-items: flex-start;\n  max-height: 400px;\n  overflow-y: auto;\n}\n#mathlive-suggestion-popover li {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 8px;\n  padding: 8px;\n  width: calc(100% - 16px - 16px);\n  column-gap: 1em;\n  border-radius: 8px;\n  cursor: pointer;\n  /* Since the content can be clicked on, provide feedback on hover */\n}\n#mathlive-suggestion-popover li a {\n  color: #5ea6fd;\n  padding-top: 0.3em;\n  margin-top: 0.4em;\n  display: block;\n}\n#mathlive-suggestion-popover li a:hover {\n  color: #5ea6fd;\n  text-decoration: underline;\n}\n#mathlive-suggestion-popover li:hover,\n#mathlive-suggestion-popover li.is-pressed,\n#mathlive-suggestion-popover li.is-active {\n  background: rgba(255, 255, 255, 0.1);\n}\n/* The command inside a popover (inside a #mathlive-suggestion-popover) */\n.ML__popover__command {\n  font-size: 1.6rem;\n  font-family: KaTeX_Main;\n}\n.ML__popover__current {\n  background: #5ea6fd;\n  color: #fff;\n}\n.ML__popover__latex {\n  font-family: 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;\n  align-self: center;\n}\n/* The keyboard shortcuts for a symbol as displayed in the popover */\n.ML__popover__keybinding {\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  font-size: 0.8em;\n  opacity: 0.7;\n}\n/* Style for the character that joins the modifiers of a keyboard shortcut \n(usually a \"+\" sign)*/\n.ML__shortcut-join {\n  opacity: 0.5;\n}\n";break;case"keystroke-caption":t="/* The element that displays the keys as the user type them */\n#mathlive-keystroke-caption-panel {\n  visibility: hidden;\n  /*min-width: 160px;*/\n  /*background-color: rgba(97, 97, 200, .95);*/\n  background: var(--secondary, hsl(var(--_hue), 19%, 26%));\n  border-color: var(--secondary-border, hsl(0, 0%, 91%));\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n  text-align: center;\n  border-radius: 6px;\n  padding: 16px;\n  position: absolute;\n  z-index: 1;\n  display: flex;\n  flex-direction: row-reverse;\n  justify-content: center;\n  --keystroke: white;\n  --on-keystroke: #555;\n  --keystroke-border: #f7f7f7;\n}\n@media (prefers-color-scheme: dark) {\n  body:not([theme='light']) #mathlive-keystroke-caption-panel {\n    --keystroke: hsl(var(--_hue), 50%, 30%);\n    --on-keystroke: hsl(0, 0%, 98%);\n    --keystroke-border: hsl(var(--_hue), 50%, 25%);\n  }\n}\nbody[theme='dark'] #mathlive-keystroke-caption-panel {\n  --keystroke: hsl(var(--_hue), 50%, 30%);\n  --on-keystroke: hsl(0, 0%, 98%);\n  --keystroke-border: hsl(var(--_hue), 50%, 25%);\n}\n#mathlive-keystroke-caption-panel > span {\n  min-width: 14px;\n  /*height: 8px;*/\n  margin: 0 8px 0 0;\n  padding: 4px;\n  background-color: var(--keystroke);\n  color: var(--on-keystroke);\n  fill: currentColor;\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  font-size: 1em;\n  border-radius: 6px;\n  border: 2px solid var(--keystroke-border);\n  /*box-shadow: 0 7px 14px rgba(0,0,0,0.25), 0 5px 5px rgba(0,0,0,0.22);*/\n}\n";break;case"virtual-keyboard":t=".ML__keyboard {\n  --_keyboard-height: 0;\n  --_keyboard-zindex: var(--keyboard-zindex, 105);\n  --_accent-color: var(--keyboard-accent-color, #0c75d8);\n  --_background: var(--keyboard-background, #cacfd7);\n  --_border: var(--keyboard-border, #ddd);\n  --_padding-horizontal: var(--keyboard-padding-horizontal, 0px);\n  --_padding-top: var(--keyboard-padding-top, 5px);\n  --_padding-bottom: var(--keyboard-padding-bottom, 0px);\n  --_row-padding-left: var(--keyboard-row-padding-left, 0px);\n  --_row-padding-right: var(--keyboard-row-padding-right, 0px);\n  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);\n  --_toolbar-text-active: var(--keyboard-toolbar-text-active, var(--_accent-color));\n  --_toolbar-background: var(--keyboard-toolbar-background, transparent);\n  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);\n  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);\n  --_toolbar-font-size: var(--keyboard-toolbar-font-size, '135%');\n  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);\n  --_keycap-background: var(--keycap-background, white);\n  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);\n  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));\n  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));\n  --_keycap-border: var(--keycap-border, #e5e6e9);\n  --_keycap-border-bottom: var(--keycap-border-bottom, #8d8f92);\n  --_keycap-text: var(--keycap-text, #000);\n  --_keycap-text-active: var(--keycap-text-active, #fff);\n  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));\n  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);\n  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));\n  --_keycap-primary-background: var(--keycap-primary-background, var(--_accent-color));\n  --_keycap-primary-text: var(--keycap-primary-text, #ddd);\n  --_keycap-primary-background-hover: var(--keycap-primary-background-hover, #0d80f2);\n  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);\n  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);\n  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);\n  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);\n  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);\n  --_keycap-height: var(--keycap-height, 60px);\n  /* Keycap width (incl. margin) */\n  --_keycap-max-width: var(--keycap-max-width, 100px);\n  --_keycap-gap: var(--keycap-gap, 8px);\n  --_keycap-font-size: var(--keycap-font-size, clamp(16px, 4cqw, 24px));\n  --_keycap-small-font-size: var(--keycap-small-font-size, calc(var(--keycap-font-size) * 0.8));\n  --_keycap-extra-small-font-size: var(--keycap-extra-small-font-size, calc(var(--keycap-font-size) / 1.42));\n  --_variant-panel-background: var(--variant-panel-background, #fff);\n  --_variant-keycap-text: var(--variant-keycap-text, var(--_keycap-text));\n  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));\n  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));\n  --_variant-keycap-length: var(--variant-keycap-length, 70px);\n  --_variant-keycap-font-size: var(--variant-keycap-font-size, 30px);\n  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 12px);\n  --_keycap-shift-font-size: var(--keycap-shift-font-size, 16px);\n  --_keycap-shift-color: var(--keycap-shift-color, var(--_accent-color));\n  --_box-placeholder-color: var(--box-placeholder-color, var(--_accent-color));\n  --_box-placeholder-pressed-color: var(--box-placeholder-pressed-color, var(--keycap-text-pressed));\n}\n.is-math-mode .MLK__rows .if-text-mode,\n.is-text-mode .MLK__rows .if-math-mode {\n  display: none;\n}\n.if-can-undo,\n.if-can-redo,\n.if-can-copy,\n.if-can-cut,\n.if-can-paste {\n  opacity: 0.4;\n  pointer-events: none;\n}\n.can-undo .if-can-undo,\n.can-redo .if-can-redo,\n.can-copy .if-can-copy,\n.can-cut .if-can-cut,\n.can-paste .if-can-paste {\n  opacity: 1;\n  pointer-events: all;\n}\nbody > .ML__keyboard {\n  position: fixed;\n  --_padding-bottom: calc(var(--keyboard-padding-bottom, 0px) + env(safe-area-inset-bottom, 0));\n}\nbody > .ML__keyboard.is-visible > .MLK__backdrop {\n  box-shadow: 0 -5px 6px rgba(0, 0, 0, 0.08);\n  border-top: 1px solid var(--_border);\n}\nbody > .ML__keyboard.backdrop-is-transparent.is-visible > .MLK__backdrop {\n  box-shadow: none;\n  border: none;\n}\nbody > .ML__keyboard.is-visible.animate > .MLK__backdrop {\n  transition: 0.28s cubic-bezier(0, 0, 0.2, 1);\n  transition-property: transform, opacity;\n  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);\n}\n.ML__keyboard {\n  position: relative;\n  overflow: hidden;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: var(--_keyboard-zindex);\n  box-sizing: border-box;\n  outline: none;\n  border: none;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  overflow-wrap: unset;\n  text-align: left;\n  vertical-align: baseline;\n  cursor: auto;\n  white-space: pre;\n  box-shadow: none;\n  opacity: 1;\n  transform: none;\n  pointer-events: none;\n}\n.ML__keyboard :where(div) {\n  box-sizing: border-box;\n  outline: none;\n  border: none;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  overflow-wrap: unset;\n  text-align: left;\n  vertical-align: baseline;\n  cursor: auto;\n  white-space: pre;\n  box-shadow: none;\n  transform: none;\n}\n.MLK__backdrop {\n  position: absolute;\n  bottom: calc(-1 * var(--_keyboard-height));\n  width: 100%;\n  height: var(--_keyboard-height);\n  box-sizing: border-box;\n  padding-top: var(--_padding-top);\n  padding-bottom: var(--_padding-bottom);\n  padding-left: var(--_padding-horizontal);\n  padding-right: var(--_padding-horizontal);\n  opacity: 0;\n  visibility: hidden;\n  transform: translate(0, 0);\n  background: var(--_background);\n}\n.backdrop-is-transparent .MLK__backdrop {\n  background: transparent;\n}\n/* If a custom layout has a custom container/backdrop\n  (backdrop-is-transparent), make sure to let pointer event go through. */\n.backdrop-is-transparent .MLK__plate {\n  background: transparent;\n  pointer-events: none;\n}\n/* If a custom layout has a custom container/backdrop, make sure to \n   allow pointer events on it. */\n.backdrop-is-transparent .MLK__layer > div > div {\n  pointer-events: all;\n}\n.ML__keyboard.is-visible > .MLK__backdrop {\n  transform: translate(0, calc(-1 * var(--_keyboard-height)));\n  opacity: 1;\n  visibility: visible;\n}\n.caps-lock-indicator {\n  display: none;\n  width: 8px;\n  height: 8px;\n  background: #0cbc0c;\n  box-shadow: inset 0 0 4px 0 #13ca13, 0 0 4px 0 #a9ef48;\n  border-radius: 8px;\n  right: 8px;\n  top: 8px;\n  position: absolute;\n}\n.ML__keyboard.is-caps-lock .caps-lock-indicator {\n  display: block;\n}\n.ML__keyboard.is-caps-lock .shift {\n  background: var(--_keycap-background-active);\n  color: var(--_keycap-text-active);\n}\n.MLK__plate {\n  position: absolute;\n  top: var(--_padding-top);\n  left: var(--_padding-horizontal);\n  width: calc(100% - 2 * var(--_padding-horizontal));\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  container-type: inline-size;\n  touch-action: none;\n  -webkit-user-select: none;\n  user-select: none;\n  pointer-events: all;\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  font-size: 16px;\n  /* Size of toolbar labels */\n  font-weight: 400;\n  text-shadow: none;\n}\n.ML__box-placeholder {\n  color: var(--_box-placeholder-color);\n}\n.MLK__tex {\n  font-family: KaTeX_Main, KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;\n}\n.MLK__tex-math {\n  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;\n  font-style: italic;\n}\n.MLK__layer {\n  display: none;\n  outline: none;\n}\n.MLK__layer.is-visible {\n  display: flex;\n  flex-flow: column;\n}\n/* Keyboard layouts are made or rows of keys... */\n.MLK__rows {\n  --_keycap-width: var(--keycap-width, min(var(--_keycap-max-width), 10cqw));\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  border-collapse: separate;\n  clear: both;\n  border: 0;\n  margin: 0;\n  margin-bottom: var(--_keycap-gap);\n  gap: var(--_keycap-gap);\n  /* If the styling include, e.g., some shadows, they will be\n  cut off by the overflow. In that case, set the padding to \n  compensate. */\n  padding-left: var(--_row-padding-left);\n  padding-right: var(--_row-padding-right);\n  overflow: visible;\n  touch-action: none;\n}\n.MLK__rows > .MLK__row {\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n  width: 100%;\n  gap: var(--_keycap-gap);\n  margin: 0;\n  padding: 0;\n  /* For the alignment of the text on some modifiers (e.g. shift) */\n  /* Extra spacing between two adjacent keys */\n}\n.MLK__rows > .MLK__row .tex {\n  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;\n}\n.MLK__rows > .MLK__row .tex-math {\n  font-family: KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;\n}\n.MLK__rows > .MLK__row .big-op {\n  font-size: calc(1.25 * var(--_keycap-font-size));\n}\n.MLK__rows > .MLK__row .small {\n  font-size: var(--_keycap-small-font-size);\n}\n.MLK__rows > .MLK__row .bottom {\n  justify-content: flex-end;\n}\n.MLK__rows > .MLK__row .left {\n  align-items: flex-start;\n  padding-left: 12px;\n}\n.MLK__rows > .MLK__row .right {\n  align-items: flex-end;\n  padding-right: 12px;\n}\n.MLK__rows > .MLK__row .w0 {\n  width: 0;\n}\n.MLK__rows > .MLK__row .w5 {\n  width: calc(0.5 * var(--_keycap-width) - var(--_keycap-gap));\n}\n.MLK__rows > .MLK__row .w15 {\n  width: calc(1.5 * var(--_keycap-width) - var(--_keycap-gap));\n}\n.MLK__rows > .MLK__row .w20 {\n  width: calc(2 * var(--_keycap-width) - var(--_keycap-gap));\n}\n.MLK__rows > .MLK__row .w40 {\n  width: calc(4 * var(--_keycap-width) - var(--_keycap-gap));\n}\n.MLK__rows > .MLK__row .w50 {\n  width: calc(5 * var(--_keycap-width) - var(--_keycap-gap));\n}\n.MLK__rows > .MLK__row .MLK__keycap.w50 {\n  font-size: 80%;\n  padding-top: 10px;\n  font-weight: 100;\n}\n.MLK__rows > .MLK__row .separator {\n  background: transparent;\n  border: none;\n  pointer-events: none;\n}\n.MLK__rows > .MLK__row .horizontal-rule {\n  height: 6px;\n  margin-top: 3px;\n  margin-bottom: 0;\n  width: 100%;\n  border-radius: 0;\n  border-top: var(--_horizontal-rule);\n}\n.MLK__rows > .MLK__row .ghost {\n  background: var(--_toolbar-background);\n  border: none;\n  color: var(--_toolbar-text);\n}\n.MLK__rows > .MLK__row .ghost:hover {\n  background: var(--_toolbar-background-hover);\n}\n.MLK__rows > .MLK__row .bigfnbutton {\n  font-size: var(--_keycap-extra-small-font-size);\n}\n.MLK__rows > .MLK__row .shift,\n.MLK__rows > .MLK__row .action {\n  color: var(--_keycap-secondary-text);\n  background: var(--_keycap-secondary-background);\n  border-color: var(--_keycap-secondary-border);\n  border-bottom-color: var(--_keycap-secondary-border-bottom);\n  line-height: 0.8;\n  font-size: min(1rem, var(--_keycap-small-font-size));\n  font-weight: 600;\n  padding: 8px 12px 8px 12px;\n}\n.MLK__rows > .MLK__row .shift:hover,\n.MLK__rows > .MLK__row .action:hover {\n  background: var(--_keycap-secondary-background-hover);\n}\n.MLK__rows > .MLK__row .action.primary {\n  background: var(--_keycap-primary-background);\n  color: var(--_keycap-primary-text);\n}\n.MLK__rows > .MLK__row .action.primary:hover {\n  background: var(--_keycap-primary-background-hover);\n  color: var(--_keycap-primary-text);\n}\n.MLK__rows > .MLK__row .shift.selected,\n.MLK__rows > .MLK__row .action.selected {\n  color: var(--_toolbar-text-active);\n}\n.MLK__rows > .MLK__row .shift.selected.is-pressed,\n.MLK__rows > .MLK__row .action.selected.is-pressed,\n.MLK__rows > .MLK__row .shift.selected.is-active,\n.MLK__rows > .MLK__row .action.selected.is-active {\n  color: white;\n}\n.MLK__rows > .MLK__row .warning {\n  background: #cd0030;\n  color: white;\n}\n.MLK__rows > .MLK__row .warning svg.svg-glyph {\n  width: 24px;\n  height: 24px;\n  min-height: 24px;\n}\n/** A regular keycap\n * Use the :where() pseudo-class to give it a very low specifity, \n * so that it can be overriden by custom style.\n */\n:where(.MLK__rows > .MLK__row  div) {\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-evenly;\n  width: calc(var(--_keycap-width) - var(--_keycap-gap));\n  height: var(--_keycap-height);\n  box-sizing: border-box;\n  padding: 0;\n  vertical-align: top;\n  text-align: center;\n  float: left;\n  color: var(--_keycap-text);\n  fill: currentColor;\n  font-size: var(--_keycap-font-size);\n  background: var(--_keycap-background);\n  border: 1px solid var(--_keycap-border);\n  border-bottom-color: var(--_keycap-border-bottom);\n  border-radius: 6px;\n  cursor: pointer;\n  touch-action: none;\n  /* Keys with a variants panel */\n  position: relative;\n  overflow: hidden;\n  -webkit-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n:where(.MLK__rows > .MLK__row  div):hover {\n  overflow: visible;\n  background: var(--_keycap-background-hover);\n}\n:where(.MLK__rows > .MLK__row  div) .ML__latex {\n  pointer-events: none;\n  touch-action: none;\n}\n:where(.MLK__rows > .MLK__row  div) svg.svg-glyph {\n  margin: 8px 0;\n  width: 20px;\n  height: 20px;\n  min-height: 20px;\n}\n:where(.MLK__rows > .MLK__row  div) svg.svg-glyph-lg {\n  margin: 8px 0;\n  width: 24px;\n  height: 24px;\n  min-height: 24px;\n}\n:where(.MLK__rows > .MLK__row  div).MLK__tex-math {\n  font-size: 25px;\n}\n:where(.MLK__rows > .MLK__row  div).is-pressed {\n  background: var(--_keycap-background-pressed);\n  color: var(--_keycap-text-pressed);\n  --_box-placeholder-color: var(--_box-placeholder-pressed-color);\n}\n:where(.MLK__rows > .MLK__row  div).MLK__keycap.is-active,\n:where(.MLK__rows > .MLK__row  div).action.is-active,\n:where(.MLK__rows > .MLK__row  div).MLK__keycap.is-pressed,\n:where(.MLK__rows > .MLK__row  div).action.is-pressed {\n  z-index: calc(var(--_keyboard-zindex) - 5);\n}\n:where(.MLK__rows > .MLK__row  div).MLK__keycap.is-active aside,\n:where(.MLK__rows > .MLK__row  div).action.is-active aside,\n:where(.MLK__rows > .MLK__row  div).MLK__keycap.is-pressed aside,\n:where(.MLK__rows > .MLK__row  div).action.is-pressed aside {\n  display: none;\n}\n:where(.MLK__rows > .MLK__row  div).MLK__keycap.is-active .MLK__shift,\n:where(.MLK__rows > .MLK__row  div).action.is-active .MLK__shift,\n:where(.MLK__rows > .MLK__row  div).MLK__keycap.is-pressed .MLK__shift,\n:where(.MLK__rows > .MLK__row  div).action.is-pressed .MLK__shift {\n  display: none;\n}\n:where(.MLK__rows > .MLK__row  div).shift.is-pressed,\n:where(.MLK__rows > .MLK__row  div).MLK__keycap.is-pressed,\n:where(.MLK__rows > .MLK__row  div).action.is-pressed {\n  background: var(--_keycap-background-pressed);\n  color: var(--_keycap-text-pressed);\n}\n:where(.MLK__rows > .MLK__row  div).shift.is-active,\n:where(.MLK__rows > .MLK__row  div).MLK__keycap.is-active,\n:where(.MLK__rows > .MLK__row  div).action.is-active {\n  background: var(--_keycap-background-active);\n  color: var(--_keycap-text-active);\n  --_box-placeholder-color: var(--_box-placeholder-pressed-color);\n}\n:where(.MLK__rows > .MLK__row  div) small {\n  color: var(--_keycap-secondary-text);\n}\n:where(.MLK__rows > .MLK__row  div) aside {\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  font-size: 10px;\n  line-height: 10px;\n  color: var(--_keycap-secondary-text);\n}\n/* Add an attribute 'data-tooltip' to display a tooltip on hover.\nNote there are a different set of tooltip rules for the keyboard toggle\n(it's in a different CSS tree) */\n.ML__keyboard [data-tooltip] {\n  position: relative;\n}\n.ML__keyboard [data-tooltip]::after {\n  position: absolute;\n  display: inline-table;\n  content: attr(data-tooltip);\n  top: inherit;\n  bottom: 100%;\n  width: max-content;\n  max-width: 200px;\n  padding: 8px 8px;\n  background: #616161;\n  color: #fff;\n  text-align: center;\n  z-index: 2;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);\n  border-radius: 2px;\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  font-weight: 400;\n  font-size: 12px;\n  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1) 1s;\n  opacity: 0;\n  transform: scale(0.5);\n}\n.ML__keyboard [data-tooltip]:hover {\n  position: relative;\n}\n.ML__keyboard [data-tooltip]:hover::after {\n  opacity: 1;\n  transform: scale(1);\n}\n.MLK__toolbar {\n  align-self: center;\n  display: flex;\n  flex-flow: row;\n  justify-content: space-between;\n  width: 100%;\n  max-width: 996px;\n  min-height: 32px;\n  /* Icons for undo/redo, etc. */\n}\n.MLK__toolbar svg {\n  height: 20px;\n  width: 20px;\n}\n.MLK__toolbar > .left {\n  position: relative;\n  display: flex;\n  justify-content: flex-start;\n  flex-flow: row;\n}\n.MLK__toolbar > .right {\n  display: flex;\n  justify-content: flex-end;\n  flex-flow: row;\n}\n.MLK__toolbar > div > div {\n  /* \"button\" in the toolbar */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--_toolbar-text);\n  fill: currentColor;\n  background: var(--_toolbar-background);\n  font-size: var(--_toolbar-font-size);\n  padding: 4px 15px;\n  cursor: pointer;\n  width: max-content;\n  min-width: 42px;\n  min-height: 34px;\n  border: none;\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  margin-top: 0;\n  margin-bottom: 4px;\n  margin-left: 4px;\n  margin-right: 4px;\n  border-radius: 8px;\n  box-shadow: none;\n  border-bottom: 2px solid transparent;\n}\n.MLK__toolbar > div > div:not(.disabled):not(.selected):hover {\n  background: var(--_toolbar-background-hover);\n}\n.MLK__toolbar > div > div.disabled svg,\n.MLK__toolbar > div > div.disabled:hover svg,\n.MLK__toolbar > div > div.disabled.is-pressed svg {\n  color: var(--_toolbar-text);\n  opacity: 0.2;\n}\n.MLK__toolbar > div > div:hover,\n.MLK__toolbar > div > div:active,\n.MLK__toolbar > div > div.is-pressed,\n.MLK__toolbar > div > div.is-active {\n  color: var(--_toolbar-text-active);\n}\n.MLK__toolbar > div > div.selected {\n  color: var(--_toolbar-text-active);\n  background: var(--_toolbar-background-selected);\n  border-radius: 0;\n  border-bottom-color: var(--_toolbar-text-active);\n  padding-bottom: 4px;\n  margin-bottom: 8px;\n}\n/* This is the element that displays variants on press+hold */\n.MLK__variant-panel {\n  visibility: hidden;\n  position: fixed;\n  display: flex;\n  flex-flow: row wrap-reverse;\n  justify-content: center;\n  align-content: center;\n  margin: 0;\n  padding: 0;\n  bottom: auto;\n  top: 0;\n  box-sizing: content-box;\n  transform: none;\n  z-index: calc(var(--_keyboard-zindex) + 1);\n  touch-action: none;\n  max-width: 350px;\n  background: var(--_variant-panel-background);\n  text-align: center;\n  border-radius: 6px;\n  padding: 6px;\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\n  transition: none;\n}\n.MLK__variant-panel.is-visible {\n  visibility: visible;\n}\n.MLK__variant-panel.compact {\n  --_variant-keycap-length: var(--variant-keycap-length, 50px);\n  --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);\n  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 10px);\n}\n.MLK__variant-panel .item {\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  justify-content: center;\n  font-size: var(--_variant-keycap-font-size);\n  height: var(--_variant-keycap-length);\n  width: var(--_variant-keycap-length);\n  margin: 0;\n  box-sizing: border-box;\n  border-radius: 5px;\n  border: 1px solid transparent;\n  background: transparent;\n  pointer-events: all;\n  cursor: pointer;\n  color: var(--_variant-keycap-text);\n  fill: currentColor;\n}\n@media (max-height: 412px) {\n  .MLK__variant-panel .item {\n    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);\n    --_variant-keycap-length: var(--variant-keycap-length, 50px);\n  }\n}\n.MLK__variant-panel .item .ML__latex {\n  pointer-events: none;\n}\n.MLK__variant-panel .item.is-active {\n  background: var(--_variant-keycap-background-active);\n  color: var(--_variant-keycap-text-active);\n}\n.MLK__variant-panel .item.is-pressed {\n  background: var(--_variant-keycap-background-pressed);\n  color: var(--_variant-keycap-text-pressed);\n}\n.MLK__variant-panel .item.small {\n  font-size: var(--_keycap-small-font-size);\n}\n.MLK__variant-panel .item.swatch-button {\n  box-sizing: border-box;\n  background: #fbfbfb;\n}\n.MLK__variant-panel .item.swatch-button > span {\n  display: inline-block;\n  margin: 6px;\n  width: calc(100% - 12px);\n  height: calc(100% - 12px);\n  border-radius: 50%;\n}\n.MLK__variant-panel .item.swatch-button:hover {\n  background: #f0f0f0;\n}\n.MLK__variant-panel .item.swatch-button:hover > span {\n  border-radius: 2px;\n}\n.MLK__variant-panel .item.box > div,\n.MLK__variant-panel .item.box > span {\n  border: 1px dashed rgba(0, 0, 0, 0.24);\n}\n.MLK__variant-panel .item .warning {\n  min-height: 60px;\n  min-width: 60px;\n  background: #cd0030;\n  color: white;\n  padding: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 5px;\n}\n.MLK__variant-panel .item .warning.is-pressed,\n.MLK__variant-panel .item .warning.is-active {\n  background: red;\n}\n.MLK__variant-panel .item .warning svg.svg-glyph {\n  width: 50px;\n  height: 50px;\n}\n.MLK__variant-panel .item aside {\n  font-size: var(--_variant-keycap-aside-font-size);\n  line-height: 12px;\n  opacity: 0.78;\n  padding-top: 2px;\n}\n.MLK__keycap {\n  position: relative;\n}\n.MLK__shift {\n  display: block;\n  position: absolute;\n  right: 4px;\n  top: 4px;\n  font-size: var(--_keycap-shift-font-size);\n  color: var(--_keycap-shift-color);\n}\n.hide-shift .MLK__shift {\n  display: none;\n}\n@media (max-width: 414px) {\n  .MLK__variant-panel {\n    max-width: 350px;\n    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);\n    --_variant-keycap-length: var(--variant-keycap-length, 50px);\n  }\n}\n/* @xs breakpoint: iPhone 5 */\n@container (max-width: 414px) {\n  .MLK__rows {\n    --_keycap-gap: max(var(--_keycap-gap, 2px), 2px);\n    --_keycap-height: max(var(--_keycap-height), 42px);\n    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width)), 10cqw), 62px));\n  }\n  .MLK__toolbar > div > div {\n    font-size: 100%;\n    margin-left: 2px;\n    margin-right: 2px;\n  }\n  .MLK__rows .shift,\n  .MLK__rows .action {\n    font-size: 65%;\n  }\n  .MLK__rows .warning svg.svg-glyph {\n    width: 14px;\n    height: 14px;\n    min-height: 14px;\n  }\n}\n@container (max-width: 744px) {\n  .MLK__rows {\n    --_keycap-gap: max(var(--keycap-gap, 2px), 2px);\n    --_keycap-height: max(var(--keycap-height, 52px), 52px);\n    --_keycap-width: var(--keycap-width, min(min(var(--_keycap-max-width), 10cqw), 62px));\n  }\n  .MLK__toolbar > div > div {\n    padding-left: 0;\n    padding-right: 0;\n  }\n  .MLK__tooltip::after {\n    padding: 8px 16px;\n    font-size: 16px;\n  }\n  .MLK__rows > .MLK__row > div.fnbutton {\n    font-size: 16px;\n  }\n  .MLK__rows > .MLK__row > div.bigfnbutton {\n    font-size: calc(var(--_keycap-extra-small-font-size) / 1.55);\n  }\n  .MLK__rows > .MLK__row > div.small {\n    font-size: 13px;\n  }\n  .MLK__rows > .MLK__row > div > aside {\n    display: none;\n  }\n  .MLK__shift {\n    display: none;\n  }\n}\n/* Medium breakpoint: larger phones */\n@container (max-width: 768px) {\n  .MLK__rows {\n    --_keycap-height: max(var(--keycap-height, 42px), 42px);\n  }\n  .MLK__rows > .MLK__row > div > small {\n    font-size: 14px;\n  }\n}\n@media (max-height: 768px) {\n  .MLK__rows {\n    --_keycap-height: max(var(--keycap-height, 42px), 42px);\n  }\n  .MLK__rows > .MLK__row > div > small {\n    font-size: 14px;\n  }\n}\n@container (max-width: 1444px) {\n  .MLK__rows .if-wide {\n    display: none;\n  }\n}\n@media (prefers-color-scheme: dark) {\n  .ML__keyboard {\n    --_accent-color: var(--keyboard-accent-color, #0b5c9c);\n    --_background: var(--keyboard-background, #151515);\n    --_border: var(--keyboard-border, transparent);\n    --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);\n    --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);\n    --keyboard-toolbar-background-hover: #303030;\n    --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);\n    --_keycap-background: var(--keycap-background, #1f2022);\n    --_keycap-background-hover: var(--keycap-background-hover, #2f3032);\n    --_keycap-border: var(--_keycap-border, transparent);\n    --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);\n    --_keycap-text: var(--keycap-text, #e3e4e8);\n    --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);\n    --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);\n    --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);\n    --keycap-secondary-border: transparent;\n    --keycap-secondary-border-bottom: transparent;\n    --_keycap-secondary-border: var(--keycap-secondary-border, transparent);\n    --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);\n    --_variant-panel-background: var(--variant-panel-background, #303030);\n    --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);\n  }\n}\n/* Same as the media query, but with a class */\n[theme='dark'] .ML__keyboard {\n  --_accent-color: var(--keyboard-accent-color, #0b5c9c);\n  --_background: var(--keyboard-background, #151515);\n  --_border: var(--keyboard-border, transparent);\n  --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);\n  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);\n  --keyboard-toolbar-background-hover: #303030;\n  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);\n  --_keycap-background: var(--keycap-background, #1f2022);\n  --_keycap-background-hover: var(--keycap-background-hover, #2f3032);\n  --_keycap-border: var(--_keycap-border, transparent);\n  --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);\n  --_keycap-text: var(--keycap-text, #e3e4e8);\n  --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);\n  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);\n  --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);\n  --keycap-secondary-border: transparent;\n  --keycap-secondary-border-bottom: transparent;\n  --_keycap-secondary-border: var(--keycap-secondary-border, transparent);\n  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);\n  --_variant-panel-background: var(--variant-panel-background, #303030);\n  --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);\n}\n[theme='light'] .ML__keyboard {\n  --_accent-color: var(--keyboard-accent-color, #0c75d8);\n  --_background: var(--keyboard-background, #cacfd7);\n  --_border: var(--keyboard-border, #ddd);\n  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);\n  --_toolbar-background: var(--keyboard-toolbar-background, transparent);\n  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);\n  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);\n  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);\n  --_keycap-background: var(--keycap-background, white);\n  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);\n  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));\n  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));\n  --_keycap-border: var(--_keycap-border, #e5e6e9);\n  --_keycap-border-bottom: var(--_keycap-border-bottom, #8d8f92);\n  --_keycap-text: var(--keycap-text, #000);\n  --_keycap-text-active: var(--keycap-text-active, #fff);\n  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));\n  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);\n  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));\n  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);\n  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);\n  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);\n  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);\n  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);\n  --_variant-panel-background: var(--variant-panel-background, #fff);\n  --_variant-keycap-text: var(--variant-keycap-textvar, var(--_keycap-text));\n  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));\n  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));\n}\n";break;case"ui":t=":host {\n  --primary-color: #5898ff;\n  --primary-color-dimmed: #c0c0f0;\n  --primary-color-dark: var(--blue-500);\n  --primary-color-light: var(--blue-100);\n  --primary-color-reverse: #ffffff;\n  --secondary-color: #ff8a65;\n  --secondary-color-dimmed: #f0d5c5;\n  --secondary-color-dark: var(--orange-500);\n  --secondary-color-light: var(--orange-100);\n  --secondary-color-reverse: #ffffff;\n  --link-color: #5898ff;\n  --link-color-dimmed: #c5c5c5;\n  --link-color-dark: #121212;\n  --link-color-light: #e2e2e2;\n  --link-color-reverse: #ffffff;\n  --semantic-blue: var(--blue-700);\n  --semantic-red: var(--red-400);\n  --semantic-orange: var(--orange-400);\n  --semantic-green: var(--green-700);\n  --neutral-100: #f5f5f5;\n  --neutral-200: #eeeeee;\n  --neutral-300: #e0e0e0;\n  --neutral-400: #bdbdbd;\n  --neutral-500: #9e9e9e;\n  --neutral-600: #757575;\n  --neutral-700: #616161;\n  --neutral-800: #424242;\n  --neutral-900: #212121;\n  --red-25: #fff8f7;\n  --red-50: #fff1ef;\n  --red-100: #ffeae6;\n  --red-200: #ffcac1;\n  --red-300: #ffa495;\n  --red-400: #ff7865;\n  --red-500: #f21c0d;\n  --red-600: #e50018;\n  --red-700: #d30024;\n  --red-800: #bd002c;\n  --red-900: #a1002f;\n  --orange-25: #fffbf8;\n  --orange-50: #fff7f1;\n  --orange-100: #fff3ea;\n  --orange-200: #ffe1c9;\n  --orange-300: #ffcca2;\n  --orange-400: #ffb677;\n  --orange-500: #fe9310;\n  --orange-600: #f58700;\n  --orange-700: #ea7c00;\n  --orange-800: #dc6d00;\n  --orange-900: #ca5b00;\n  --brown-25: #fff8ef;\n  --brown-50: #fff1df;\n  --brown-100: #ffe9ce;\n  --brown-200: #ebcca6;\n  --brown-300: #cdaf8a;\n  --brown-400: #af936f;\n  --brown-500: #856a47;\n  --brown-600: #7f5e34;\n  --brown-700: #78511f;\n  --brown-800: #6e4200;\n  --brown-900: #593200;\n  --yellow-25: #fffdf9;\n  --yellow-50: #fffcf2;\n  --yellow-100: #fffaec;\n  --yellow-200: #fff2ce;\n  --yellow-300: #ffe8ab;\n  --yellow-400: #ffdf85;\n  --yellow-500: #ffcf33;\n  --yellow-600: #f1c000;\n  --yellow-700: #dfb200;\n  --yellow-800: #c9a000;\n  --yellow-900: #ad8a00;\n  --lime-25: #f4ffee;\n  --lime-50: #e9ffdd;\n  --lime-100: #ddffca;\n  --lime-200: #a8fb6f;\n  --lime-300: #94e659;\n  --lime-400: #80d142;\n  --lime-500: #63b215;\n  --lime-600: #45a000;\n  --lime-700: #268e00;\n  --lime-800: #007417;\n  --lime-900: #005321;\n  --green-25: #f5fff5;\n  --green-50: #ebffea;\n  --green-100: #e0ffdf;\n  --green-200: #a7ffa7;\n  --green-300: #5afa65;\n  --green-400: #45e953;\n  --green-500: #17cf36;\n  --green-600: #00b944;\n  --green-700: #00a34a;\n  --green-800: #008749;\n  --green-900: #00653e;\n  --teal-25: #f3ffff;\n  --teal-50: #e6fffe;\n  --teal-100: #d9fffe;\n  --teal-200: #8dfffe;\n  --teal-300: #57f4f4;\n  --teal-400: #43e5e5;\n  --teal-500: #17cfcf;\n  --teal-600: #00c2c0;\n  --teal-700: #00b5b1;\n  --teal-800: #00a49e;\n  --teal-900: #009087;\n  --cyan-25: #f7fcff;\n  --cyan-50: #eff8ff;\n  --cyan-100: #e7f5ff;\n  --cyan-200: #c2e6ff;\n  --cyan-300: #95d5ff;\n  --cyan-400: #61c4ff;\n  --cyan-500: #13a7ec;\n  --cyan-600: #069eda;\n  --cyan-700: #0095c9;\n  --cyan-800: #0088b2;\n  --cyan-900: #0a7897;\n  --blue-25: #f7faff;\n  --blue-50: #eef5ff;\n  --blue-100: #e5f1ff;\n  --blue-200: #bfdbff;\n  --blue-300: #92c2ff;\n  --blue-400: #63a8ff;\n  --blue-500: #0d80f2;\n  --blue-600: #0077db;\n  --blue-700: #006dc4;\n  --blue-800: #0060a7;\n  --blue-900: #005086;\n  --indigo-25: #f8f7ff;\n  --indigo-50: #f1efff;\n  --indigo-100: #eae7ff;\n  --indigo-200: #ccc3ff;\n  --indigo-300: #ac99ff;\n  --indigo-400: #916aff;\n  --indigo-500: #63c;\n  --indigo-600: #5a21b2;\n  --indigo-700: #4e0b99;\n  --indigo-800: #3b0071;\n  --indigo-900: #220040;\n  --purple-25: #fbf7ff;\n  --purple-50: #f8f0ff;\n  --purple-100: #f4e8ff;\n  --purple-200: #e4c4ff;\n  --purple-300: #d49aff;\n  --purple-400: #c36aff;\n  --purple-500: #a219e6;\n  --purple-600: #9000c4;\n  --purple-700: #7c009f;\n  --purple-800: #600073;\n  --purple-900: #3d0043;\n  --magenta-25: #fff8fb;\n  --magenta-50: #fff2f6;\n  --magenta-100: #ffebf2;\n  --magenta-200: #ffcddf;\n  --magenta-300: #ffa8cb;\n  --magenta-400: #ff7fb7;\n  --magenta-500: #eb4799;\n  --magenta-600: #da3689;\n  --magenta-700: #c82179;\n  --magenta-800: #b00065;\n  --magenta-900: #8a004c;\n}\n@media (prefers-color-scheme: dark) {\n  :host {\n    --semantic-blue: var(--blue-700);\n    --semantic-red: var(--red-400);\n    --semantic-orange: var(--orange-400);\n    --semantic-green: var(--green-700);\n    --semantic-bg-blue: var(--blue-25);\n    --semantic-bg-red: var(--red-25);\n    --semantic-bg-orange: var(--orange-25);\n    --semantic-bg-green: var(--green-25);\n    --neutral-100: #121212;\n    --neutral-200: #424242;\n    --neutral-300: #616161;\n    --neutral-400: #757575;\n    --neutral-500: #9e9e9e;\n    --neutral-600: #bdbdbd;\n    --neutral-700: #e0e0e0;\n    --neutral-800: #eeeeee;\n    --neutral-900: #f5f5f5;\n  }\n}\n:host([theme='dark']) {\n  --semantic-blue: var(--blue-700);\n  --semantic-red: var(--red-400);\n  --semantic-orange: var(--orange-400);\n  --semantic-green: var(--green-700);\n  --semantic-bg-blue: var(--blue-25);\n  --semantic-bg-red: var(--red-25);\n  --semantic-bg-orange: var(--orange-25);\n  --semantic-bg-green: var(--green-25);\n  --neutral-100: #121212;\n  --neutral-200: #424242;\n  --neutral-300: #616161;\n  --neutral-400: #757575;\n  --neutral-500: #9e9e9e;\n  --neutral-600: #bdbdbd;\n  --neutral-700: #e0e0e0;\n  --neutral-800: #eeeeee;\n  --neutral-900: #f5f5f5;\n}\n/* @media (prefers-color-scheme: dark) {\n  :host {\n      --label-color: #fff;\n      --active-label-color: #000;\n      --menu-bg: #525252;\n      --active-bg: #5898ff;\n      --active-bg-dimmed: #5c5c5c;\n  }\n} */\n:host {\n  --ui-font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont,\n    'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji',\n    'Segoe UI Emoji', 'Segoe UI Symbol';\n  --ui-font-size: 14px;\n  --ui-line-height: 1.5;\n  --ui-letter-spacing: 0.007em;\n  --mono-font-family: 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono',\n    'Source Code Pro', Menlo, Monaco, 'Courier New', monospace;\n  --ui-layer-1: var(--neutral-100);\n  --ui-layer-2: var(--neutral-200);\n  --ui-layer-3: var(--neutral-300);\n  --ui-layer-4: var(--neutral-400);\n  --ui-layer-5: var(--neutral-500);\n  --ui-layer-6: var(--neutral-600);\n  --ui-border-color: var(--primary-color);\n  --ui-border-radius: 4px;\n  --ui-text: var(--neutral-900);\n  --ui-text-secondary: var(--neutral-700);\n  --ui-text-placeholder: var(--neutral-500);\n  --ui-text-muted: var(--neutral-300);\n  /** A field is a UI element in which a user can type data, for\n  * example an input or textarea element.\n  */\n  --ui-field-bg: var(--neutral-100);\n  --ui-field-bg-hover: var(--neutral-100);\n  --ui-field-bg-disabled: var(--neutral-300);\n  --ui-field-bg-invalid: var(--red-100);\n  --ui-field-bg-focus: var(--neutral-100);\n  --ui-field-border: 0.5px solid var(--border-color);\n  --ui-field-border-hover: 0.5px solid var(--border-color);\n  --ui-field-border-disabled: 0.5px solid var(--border-color);\n  --ui-field-border-invalid: 0.5px solid var(--border-color);\n  --ui-field-border-focus: 0.5px solid var(--border-color);\n  --ui-menu-bg: var(--neutral-100);\n  --ui-menu-text: var(--neutral-900);\n  --ui-menu-bg-hover: var(--neutral-200);\n  --ui-menu-text-hover: var(--neutral-900);\n  /** The `active` state is used for the state of menu items\n  * when they are selected.\n  */\n  --ui-menu-bg-active: var(--primary-color);\n  --ui-menu-text-active: var(--primary-color-reverse);\n  /** The `active-muted` set is used for the state of\n  * submenus when they are open.\n  */\n  --ui-menu-bg-active-muted: var(--neutral-300);\n  --ui-menu-text-active-muted: var(--neutral-900);\n  /* --ui-menu-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.302),\n0 2px 6px 2px rgba(60, 64, 67, 0.149); */\n  --ui-menu-shadow: 0 0 2px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 0, 0, 0.2);\n  --ui-menu-divider: 0.5px solid #c7c7c7;\n  /* var(--neutral-300); */\n  --ui-menu-z-index: 10000;\n  --page-bg: var(--neutral-100);\n  --content-bg: var(--neutral-200);\n}\n@media (prefers-color-scheme: dark) {\n  :host {\n    --ui-menu-bg: var(--neutral-200);\n  }\n}\n:host([theme='dark']) {\n  --ui-menu-bg: var(--neutral-200);\n}\n/* PingFang SC is a macOS font. Microsoft Yahei is a Windows font. \n  Noto  is a Linux/Android font.\n*/\n:lang(zh-cn),\n:lang(zh-sg),\n:lang(zh-my),\n:lang(zh) {\n  --ui-font-family: -apple-system, system-ui, 'PingFang SC', 'Hiragino Sans GB',\n    'Noto Sans CJK SC', 'Noto Sans SC', 'Noto Sans', 'Microsoft Yahei UI',\n    'Microsoft YaHei New', 'Microsoft Yahei', '\u5fae\u8f6f\u96c5\u9ed1', SimSun, '\u5b8b\u4f53',\n    STXihei, '\u534e\u6587\u7ec6\u9ed1', sans-serif;\n}\n:lang(zh-tw),\n:lang(zh-hk),\n:lang(zh-mo) {\n  --ui-font-family: -apple-system, system-ui, 'Noto Sans',\n    'Microsoft JhengHei UI', 'Microsoft JhengHei', '\u5fae\u8edf\u6b63\u9ed1\u9ad4', '\u65b0\u7d30\u660e\u9ad4',\n    'PMingLiU', '\u7d30\u660e\u9ad4', 'MingLiU', sans-serif;\n}\n:lang(ja),\n:lang(ja-jp),\n:lang(ja-jp-mac) {\n  --ui-font-family: -apple-system, system-ui, 'Hiragino Sans',\n    'Hiragino Kaku Gothic ProN', 'Noto Sans CJK JP', 'Noto Sans JP', 'Noto Sans',\n    '\u6e38\u30b4\u30b7\u30c3\u30af', '\u6e38\u30b4\u30b7\u30c3\u30af\u4f53', YuGothic, 'Yu Gothic', '\u30e1\u30a4\u30ea\u30aa', Meiryo,\n    '\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af', 'MS PGothic', sans-serif;\n}\n:lang(ko),\n:lang(ko-kr),\n:lang(ko-kr-std) {\n  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR',\n    'Noto Sans', 'Malgun Gothic', '\ub9d1\uc740 \uace0\ub515', 'Apple SD Gothic Neo',\n    '\uc560\ud50c SD \uc0b0\ub3cc\uace0\ub515 Neo', 'Apple SD \uc0b0\ub3cc\uace0\ub515 Neo', '\ub3cb\uc6c0', Dotum, sans-serif;\n}\n:lang(ko-kr-apple) {\n  --ui-font-family: -apple-system, system-ui, 'Noto Sans CJK KR', 'Noto Sans KR',\n    'Noto Sans', 'Apple SD Gothic Neo', '\uc560\ud50c SD \uc0b0\ub3cc\uace0\ub515 Neo',\n    'Apple SD \uc0b0\ub3cc\uace0\ub515 Neo', '\ub3cb\uc6c0', Dotum, sans-serif;\n}\n:lang(zh-cn),\n:lang(zh-sg),\n:lang(zh-my),\n:lang(zh),\n:lang(zh-tw),\n:lang(zh-hk),\n:lang(zh-mo),\n:lang(ja),\n:lang(ja-jp),\n:lang(ja-jp-mac),\n:lang(ko),\n:lang(ko-kr),\n:lang(ko-kr-std),\n:lang(ko-kr-apple) {\n  --ui-font-size: 1rem;\n  --ui-line-height: 1.7;\n  --ui-letter-spacing: 0;\n}\n:dir(rtl) {\n  --ui-line-height: auto;\n  --ui-letter-spacing: 0;\n}\n";break;case"menu":t=".ui-menu *,\n.ui-menu ::before,\n.ui-menu ::after {\n  box-sizing: border-box;\n}\n.ui-menu {\n  display: none;\n  color-scheme: light dark;\n  -webkit-user-select: none;\n  /* Important: Safari iOS doesn't respect user-select */\n  user-select: none;\n  cursor: default;\n  -webkit-touch-callout: none;\n  -webkit-tap-highlight-color: rgba(0 0 0 0);\n  --active-label-color: #fff;\n  /* ui-menu-text-active */\n  --label-color: #121212;\n  /* ui-menu-text */\n  --menu-bg: #e2e2e2;\n  /* ui-menu-background */\n  --active-bg: #5898ff;\n  /* ui-menu-background-active */\n  --active-bg-dimmed: #c5c5c5;\n  /* ui-menu-background-active-muted */\n}\n/** Use the :where pseudo selector to make the specificity of the\n * selector 0, so that it can be overridden by the user.\n */\n:where(.ui-menu-container) {\n  position: absolute;\n  overflow: visible;\n  width: auto;\n  height: auto;\n  z-index: 10000;\n  border-radius: 8px;\n  background: var(--ui-menu-bg);\n  box-shadow: var(--ui-menu-shadow);\n  list-style: none;\n  padding: 6px 0 6px 0;\n  margin: 0;\n  user-select: none;\n  cursor: default;\n  color: var(--ui-menu-text);\n  font-weight: normal;\n  font-style: normal;\n  text-shadow: none;\n  text-transform: none;\n  letter-spacing: 0;\n  outline: none;\n  opacity: 1;\n  /* The [popover] elements have a 1px solid black border. Ugh. */\n  border: none;\n  width: fit-content;\n  height: fit-content;\n}\n:where(.ui-menu-container > li) {\n  display: flex;\n  flex-flow: row;\n  align-items: center;\n  padding: 1px 7px 1px 7px;\n  margin-top: 0;\n  margin-left: 6px;\n  margin-right: 6px;\n  border-radius: 4px;\n  white-space: nowrap;\n  position: relative;\n  outline: none;\n  fill: currentColor;\n  user-select: none;\n  cursor: default;\n  text-align: left;\n  color: inherit;\n  font-family: var(--ui-font-family);\n  font-size: var(--ui-font-size);\n  line-height: var(--ui-line-height);\n  letter-spacing: var(--ui-letter-spacing);\n}\n:where(.ui-menu-container > li > .label) {\n  appearance: none;\n  background: none;\n  outline: none;\n  width: 100%;\n  margin: 0;\n  padding: 1px 2px 1px 1px;\n  overflow: visible;\n  border: 1px solid transparent;\n  white-space: nowrap;\n  text-align: start;\n}\n:where(.ui-menu-container > li:has(.heading)) {\n  margin-top: 0.5em;\n}\n:where(.ui-menu-container > li > .label.heading) {\n  font-weight: bold;\n  opacity: 0.4;\n}\n:where(.ui-menu-container > li.indent > .label) {\n  margin-inline-start: 12px;\n}\n:where(.ui-menu-container > li > .label.indent) {\n  margin-inline-start: 12px;\n}\n:where(.ui-menu-container > li[role='divider']) {\n  border-bottom: 1px solid var(--ui-menu-divider);\n  border-radius: 0;\n  padding: 0;\n  margin-left: 15px;\n  margin-right: 15px;\n  padding-top: 5px;\n  margin-bottom: 5px;\n  width: calc(100% - 30px);\n  /** 100% - (margin-left + margin-right) */\n}\n:where(.ui-menu-container > li[aria-disabled='true']) {\n  opacity: 0.5;\n}\n:where(.ui-menu-container > li.active) {\n  background: var(--ui-menu-bg-active);\n  background: -apple-system-control-accent;\n  color: var(--ui-menu-text-active);\n}\n:where(.ui-menu-container > li.active.is-submenu-open) {\n  background: var(--ui-menu-bg-active-muted);\n  color: inherit;\n}\n:where(.ui-menu-container > li[aria-haspopup='true'] > .label) {\n  padding-inline-end: 0;\n}\n:where(.ui-menu-container > li[aria-haspopup='true'].active::after) {\n  color: var(--ui-menu-text-active);\n}\n/** Keyboard shortcut */\n:where(.ui-menu-container > li > kbd) {\n  font-family: var(--ui-font-family);\n  margin-inline-start: 12px;\n  opacity: 0.4;\n}\n:where(.ui-menu-container > li.active > kbd) {\n  opacity: 0.85;\n}\n.ui-trailing-chevron {\n  display: flex;\n  margin-inline-start: 24px;\n  width: 10px;\n  height: 10px;\n  margin-bottom: 4px;\n}\n.ui-trailing-chevron:dir(rtl) {\n  transform: scaleX(-1);\n}\n.ui-checkmark {\n  display: flex;\n  margin-inline-end: -11px;\n  margin-inline-start: -4px;\n  margin-top: 2px;\n  width: 16px;\n  height: 16px;\n}\n.ui-mixedmark {\n  display: flex;\n  margin-inline-end: -11px;\n  margin-inline-start: -4px;\n  margin-top: 2px;\n  width: 16px;\n  height: 16px;\n}\n"}return t}function JO(e){return WO||(WO={}),WO[e]||(WO[e]=new CSSStyleSheet,WO[e].replaceSync(ZO(e))),WO[e]}function XO(e){var t;if(!("adoptedStyleSheets"in document)){if(window.document.getElementById("mathlive-style-".concat(e)))return;let t=window.document.createElement("style");return t.id="mathlive-style-".concat(e),t.append(window.document.createTextNode(ZO(e))),void window.document.head.appendChild(t)}if(GO||(GO={}),0!==(null!=(t=GO[e])?t:0))GO[e]+=1;else{let t=JO(e);document.adoptedStyleSheets=[...document.adoptedStyleSheets,t],GO[e]=1}}function YO(e){if("adoptedStyleSheets"in document&&null!=GO&&GO[e]&&(GO[e]-=1,GO[e]<=0)){let t=WO[e];document.adoptedStyleSheets=document.adoptedStyleSheets.filter((e=>e!==t))}}var QO=class e extends gO{constructor(e){var t;super(Jk(Zk({},e),{type:"accent",body:null!=(t=e.body)?t:void 0})),e.accentChar?this.accent=e.accentChar:this.svgAccent=null==e?void 0:e.svgAccent,this.skipBoundary=!0,this.captureSelection=!0}static fromJson(t){return new e(t)}toJson(){return Jk(Zk({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(e){var t;let n=new pO({parent:e,mathstyle:"cramp"},this.style),r=null!=(t=gO.createBox(n,this.body))?t:new GL("\u25a2",{style:this.style}),i=0;!this.hasEmptyBranch("body")&&2===this.body.length&&this.body[1].isCharacterBox()&&(i=r.skew);let a,o=Math.min(r.height,yL);if(this.svgAccent)a=YL(this.svgAccent),o=n.metrics.bigOpSpacing1-o;else if(this.accent){let e=new GL(this.accent,{fontFamily:"Main-Regular"});e.italic=0;let t=8407===this.accent?" ML__accent-vec":"";a=new GL(new GL(e),{classes:"ML__accent-body"+t})}a=new eO({shift:0,children:[{box:new GL(r)},-o,{box:a,marginLeft:r.left+2*i,classes:["ML__center"]}]});let s=new GL(a,{type:"lift"});return this.caret&&(s.caret=this.caret),this.bind(n,s.wrap(n)),this.attachSupsub(n,{base:s})}},ez={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},tz=Object.fromEntries(Object.entries(ez).map((e=>{let[t,n]=e;return[n,t]})));function nz(e){var t;return null!=(t={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"\u2223":8739,"\u2225":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[e])?t:e.codePointAt(0)}function rz(e,t,n,r,i){var a,o;let s=new pO({parent:r,mathstyle:"textstyle"},null==i?void 0:i.style),l=new GL(nz(e),{fontFamily:"Size".concat(t,"-Regular"),isSelected:i.isSelected,classes:(null!=(a=i.classes)?a:"")+" ML__delim-size".concat(t),type:null!=(o=i.type)?o:"ignore"}).wrap(s);return n&&l.setTop((1-s.scalingFactor)*vL),l}function iz(e,t,n,r,i){var a;let o,s,l,u;o=l=u=nz(e),s=null;let c="Size1-Regular";"\\vert"===e||"\\lvert"===e||"\\rvert"===e||"\\mvert"===e||"\\mid"===e?l=o=u=8739:"\\Vert"===e||"\\lVert"===e||"\\rVert"===e||"\\mVert"===e||"\\|"===e?l=o=u=8741:"\\uparrow"===e?l=u=9168:"\\Uparrow"===e?l=u=8214:"\\downarrow"===e?o=l=9168:"\\Downarrow"===e?o=l=8214:"\\updownarrow"===e?(o=8593,l=9168,u=8595):"\\Updownarrow"===e?(o=8657,l=8214,u=8659):"["===e||"\\lbrack"===e?(o=9121,l=9122,u=9123,c="Size4-Regular"):"]"===e||"\\rbrack"===e?(o=9124,l=9125,u=9126,c="Size4-Regular"):"\\lfloor"===e||"\u230a"===e?(l=o=9122,u=9123,c="Size4-Regular"):"\\lceil"===e||"\u2308"===e?(o=9121,l=u=9122,c="Size4-Regular"):"\\rfloor"===e||"\u230b"===e?(l=o=9125,u=9126,c="Size4-Regular"):"\\rceil"===e||"\u2309"===e?(o=9124,l=u=9125,c="Size4-Regular"):"("===e||"\\lparen"===e?(o=9115,l=9116,u=9117,c="Size4-Regular"):")"===e||"\\rparen"===e?(o=9118,l=9119,u=9120,c="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(o=9127,s=9128,u=9129,l=9130,c="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(o=9131,s=9132,u=9133,l=9130,c="Size4-Regular"):"\\lgroup"===e||"\u27ee"===e?(o=9127,u=9129,l=9130,c="Size4-Regular"):"\\rgroup"===e||"\u27ef"===e?(o=9131,u=9133,l=9130,c="Size4-Regular"):"\\lmoustache"===e||"\u23b0"===e?(o=9127,u=9133,l=9130,c="Size4-Regular"):"\\rmoustache"===e||"\u23b1"===e?(o=9131,u=9129,l=9130,c="Size4-Regular"):"\\surd"===e?(o=57345,u=9143,l=57344,c="Size4-Regular"):"\\ulcorner"===e?(o=9484,l=u=32):"\\urcorner"===e?(o=9488,l=u=32):"\\llcorner"===e?(u=9492,l=o=32):"\\lrcorner"===e&&(o=9496,l=o=32);let d=wL(o,c),p=d.height+d.depth,h=wL(l,c),f=h.height+h.depth,m=wL(u,c),g=m.height+m.depth,v=0,y=1;if(null!==s){let e=wL(s,c);v=e.height+e.depth,y=2}let b=p+g+v,x=Math.max(0,Math.ceil((t-b)/(y*f))),D=b+x*y*f,w=vL;n&&(w*=r.scalingFactor);let _=D/2-w,S=.008,C=[];C.push({box:new GL(u,{fontFamily:c})}),C.push(-S);let E=new GL(l,{fontFamily:c});if(null===s)for(let N=0;N<x;N++)C.push({box:E});else{for(let e=0;e<x;e++)C.push({box:E});C.push(-S),C.push({box:new GL(s,{fontFamily:c})}),C.push(-S);for(let e=0;e<x;e++)C.push({box:E})}C.push(-S),C.push({box:new GL(o,{fontFamily:c})});let k="";"Size1-Regular"===c?k=" delim-size1":"Size4-Regular"===c&&(k=" delim-size4");let A=new eO({bottom:_,children:C},{classes:k});return new GL(A,Jk(Zk({},null!=i?i:{}),{classes:(null!=(a=null==i?void 0:i.classes)?a:"")+" ML__delim-mult"}))}var az=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","\u230a","\u230b","\u2308","\u2309"]),oz=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","\u27ee","\u27ef","\u23b0","\u23b1"]),sz=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),lz=[0,1.2,1.8,2.4,3];var uz=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],cz=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],dz=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function pz(e){return"small"===e.type?"Main-Regular":"large"===e.type?"Size"+e.size+"-Regular":(e.type,"Size4-Regular")}function hz(e,t,n,r,i,a){if(!t||0===t.length||"."===t)return mz(i);let o;"<"===t||"\\lt"===t?t="\\langle":(">"===t||"\\gt"===t)&&(t="\\rangle"),o=sz.has(t)?uz:az.has(t)?dz:cz;let s=function(e,t,n,r){for(let i={"-4":0,"-3":1,0:2}[r.mathstyle.sizeDelta];i<n.length&&"stack"!==n[i].type;i++){let a=wL(e,pz(n[i]));if(a.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let o=a.height+a.depth;if("small"===n[i].type&&("scriptscriptstyle"===n[i].mathstyle?o*=Math.max(xL[Math.max(1,r.size-2)],r.minFontScale):"scriptstyle"===n[i].mathstyle&&(o*=Math.max(xL[Math.max(1,r.size-1)],r.minFontScale))),o>t)return n[i]}return n[n.length-1]}(nz(t),n,o,i),l=new pO({parent:i,mathstyle:s.mathstyle},null==a?void 0:a.style);return"small"===s.type?function(e,t,n,r){var i;let a=new GL(nz(e),{fontFamily:"Main-Regular",isSelected:r.isSelected,classes:"ML__small-delim "+(null!=(i=r.classes)?i:"")}).wrap(t);return n&&a.setTop((1-t.scalingFactor)*vL),a}(t,l,r,Jk(Zk({},a),{type:e})):"large"===s.type?rz(t,s.size,r,l,Jk(Zk({},a),{type:e})):(s.type,iz(t,n,r,l,Jk(Zk({},a),{type:e})))}function fz(e,t,n,r,i,a){if("."===t)return mz(i,null==a?void 0:a.classes);let o=vL*i.scalingFactor,s=Math.max(n-o,r+o);return hz(e,t,Math.max(s/500*901,2*s-.5),!0,i,a)}function mz(e,t){let n=new GL(null,{classes:" ML__nulldelimiter "+(null!=t?t:""),type:"ignore"});return n.width=e.getRegisterAsEm("nulldelimiterspace"),n.wrap(new pO({parent:e,mathstyle:"textstyle"}))}var gz=class e extends gO{constructor(e){var t;super({type:"placeholder",command:"\\placeholder",mode:null!=(t=null==e?void 0:e.mode)?t:"math",style:null==e?void 0:e.style}),this.captureSelection=!0}static fromJson(t){return new e(t)}toJson(){return super.toJson()}render(e){let t;return this.value=e.placeholderSymbol,t="function"==typeof e.renderPlaceholder?e.renderPlaceholder(e):this.createBox(e),this.caret&&(t.classes+=" ML__placeholder-selected"),t}_serialize(e){return e.skipPlaceholders?"":"\\placeholder{}"}},vz=["matrix","matrix*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*"],yz=["cases","dcases","rcases"],bz=["align","align*","aligned","gather","gather*","gathered","split"],xz=["array","subequations","eqnarray"];function Dz(e){return vz.includes(e)}var wz=class e extends gO{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;super({type:"array"}),this.environmentName=e,this.rowGaps=n,r.mathstyleName&&(this.mathstyleName=r.mathstyleName),r.columns&&(0===r.columns.length?this.colFormat=[{align:"l"}]:this.colFormat=r.columns),this.colFormat||(this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]),this.array=function(e,t,n){let r=0;for(let u of n)"align"in u&&(r+=1);let i=0,a=[];for(let u of t){let t=0;for(i=Math.max(i,Math.min(u.length,r));t<u.length;){let n=[],i=Math.min(u.length,t+r);for(;t<i;){let r=u[t];0===r.length?n.push([new gO({type:"first",mode:e.mode})]):"first"!==r[0].type?n.push([new gO({type:"first",mode:e.mode}),...r]):(r.slice(1).some((e=>"first"===e.type)),n.push(r)),t+=1}a.push(n)}}a.length>0&&1===a[a.length-1].length&&1===a[a.length-1][0].length&&"first"===a[a.length-1][0][0].type&&a.pop();let o=[];for(let u of a){if(u.length!==i)for(let t=u.length;t<i;t++)u.push([new gO({type:"first",mode:e.mode}),new gz]);o.push(u)}let s=0,l=0;for(let u of o){l=0;for(let t of u){for(let n of t)n.parent=e,n.parentBranch=[s,l];l+=1}s+=1}return e.isDirty=!0,o}(this,t,this.colFormat),r.leftDelim&&(this.leftDelim=r.leftDelim),r.rightDelim&&(this.rightDelim=r.rightDelim),void 0!==r.arraycolsep&&(this.arraycolsep=r.arraycolsep),this.colSeparationType=r.colSeparationType,void 0!==r.arraystretch&&(this.arraystretch=r.arraystretch),this.minColumns=null!=(i=r.minColumns)?i:1}static fromJson(t){return new e(t.environmentName,t.array,t.rowGaps,t)}toJson(){let e=Jk(Zk({},super.toJson()),{environmentName:this.environmentName,array:this.array.map((e=>e.map((e=>e.map((e=>e.toJson())))))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType});return void 0!==this.arraystretch&&(e.arraystretch=this.arraystretch),void 0!==this.arraycolsep&&(e.arraycolsep=this.arraycolsep),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),e}branch(e){var t;if(mO(e))return null!=(t=this.array[e[0]][e[1]])?t:void 0}createBranch(e){var t;return mO(e)?(this.isDirty=!0,null!=(t=this.branch(e))?t:[]):[]}get rowCount(){return this.array.length}get colCount(){return this.array[0].length}get maxColumns(){return this.colFormat.filter((e=>!!e.align)).length}removeBranch(e){if(fO(e))return super.removeBranch(e);let t=this.branch(e);return this.array[e[0]][e[1]]=void 0,t.forEach((e=>{e.parent=void 0,e.parentBranch=void 0})),t[0].type,t.shift(),this.isDirty=!0,t}get hasChildren(){return this.children.length>0}get children(){let e=[];for(let t of this.array)for(let n of t)if(n)for(let t of n)e.push(...t.children),e.push(t);return[...e,...super.children]}render(e){var t,n,r,i,a,o;let s=new pO({parent:e,mathstyle:this.mathstyleName},this.style),l=s.getRegisterAsEm("arrayrulewidth"),u=s.getRegisterAsEm("arraycolsep"),c=s.getRegisterAsEm("doublerulesep"),d=null!=(n=null!=(t=this.arraystretch)?t:s.getRegisterAsNumber("arraystretch"))?n:1,p="number"==typeof this.arraycolsep?this.arraycolsep:u;"small"===this.colSeparationType&&(p=new pO({parent:e,mathstyle:"scriptstyle"}).scalingFactor/e.scalingFactor*.2778);let h=1.2*d,f=.7*h,m=.3*h,g=0,v=[],y=0,b=this.array.length;for(let T=0;T<b;++T){let e=this.array[T];y=Math.max(y,e.length);let t=new pO({parent:s,mathstyle:this.mathstyleName},this.style),n=f/t.scalingFactor,a=m/t.scalingFactor,o={cells:[],height:0,depth:0,pos:0};for(let i of e){let e=null!=(r=gO.createBox(t,i,{type:"ignore"}))?r:new GL(null,{type:"ignore"});a=Math.max(a,e.depth),n=Math.max(n,e.height),o.cells.push(e)}let l=null!=(i=aO(this.rowGaps[T]))?i:0;l>0&&(l+=m,a=Math.max(a,l),l=0),T<b-1&&!Dz(this.environmentName)&&"cases"!==this.environmentName&&"array"!==this.environmentName&&(a+=s.getRegisterAsEm("jot")),o.height=n,o.depth=a,g+=n,o.pos=g,g+=a+l,v.push(o)}let x=g/2+vL,D=[];for(let T=0;T<y;T++){let e=[];for(let t of v){let n=t.cells[T];n.depth=t.depth,n.height=t.height,e.push({box:n,shift:t.pos-x})}e.length>0&&D.push(new eO({individualShift:e}))}let w=[],_=!1,S=!1,C=0,E=!this.leftDelim,{colFormat:k}=this;for(let T of k){if("align"in T&&C>=D.length)break;if("align"in T)_?w.push(Sz(2*p)):(S||E)&&w.push(Sz(p)),w.push(new GL(D[C],{classes:"col-align-"+T.align})),C++,_=!0,S=!1,E=!1;else if("gap"in T){if("number"==typeof T.gap)w.push(Sz(T.gap));else{let t=Cz(e,v,x,T.gap);t&&w.push(t)}_=!1,S=!1,E=!1}else if("separator"in T){let e=new GL(null,{classes:"ML__vertical-separator"});e.height=g,e.setStyle("height",g,"em"),e.setStyle("border-right","".concat(l,"em ").concat(T.separator," currentColor")),e.setStyle("vertical-align",-(g-x),"em");let t=0;S?t=c-l:_&&(t=p-l),e.left=t,w.push(e),_=!1,S=!0,E=!1}}_&&!this.rightDelim&&w.push(Sz(p));let A=new GL(w,{classes:"ML__mtable"});if((!this.leftDelim||"."===this.leftDelim)&&(!this.rightDelim||"."===this.rightDelim))return this.caret&&(A.caret=this.caret),this.bind(e,A);let N=A.height,M=A.depth,F=this.bind(e,new GL([this.bind(e,fz("open",null!=(a=this.leftDelim)?a:".",N,M,s,{isSelected:this.isSelected})),A,this.bind(e,fz("close",null!=(o=this.rightDelim)?o:".",N,M,s,{isSelected:this.isSelected}))],{type:"ord"}));return F?(F.setStyle("display","inline-block"),this.caret&&(F.caret=this.caret),this.bind(e,this.attachSupsub(e,{base:F}))):null}_serialize(e){var t;let n=[];if("lines"===this.environmentName?n.push("{\\displaylines"):n.push("\\begin{".concat(this.environmentName,"}")),"array"===this.environmentName){if(n.push("{"),void 0!==this.colFormat)for(let e of this.colFormat)"align"in e&&"string"==typeof e.align?n.push(e.align):"separator"in e&&"solid"===e.separator?n.push("|"):"separator"in e&&"dashed"===e.separator&&n.push(":");n.push("}")}for(let r=0;r<this.array.length;r++){for(let t=0;t<this.array[r].length;t++)t>0&&n.push(" & "),n.push(gO.serialize(this.array[r][t],e));if(r<this.array.length-1){let e=this.rowGaps[r];null!=e&&e.dimension?n.push("\\\\[".concat(e.dimension," ").concat(null!=(t=e.unit)?t:"pt","] ")):n.push("\\\\ ")}}return"lines"===this.environmentName?n.push("}"):n.push("\\end{".concat(this.environmentName,"}")),zL(n)}getCell(e,t){return this.array[e][t]}setCell(e,t,n){"array"===this.type&&Array.isArray(this.array)&&this.array[e][t];for(let i of this.array[e][t])i.parent=void 0,i.parentBranch=void 0;let r=n;(0===n.length||"first"!==n[0].type)&&(r=[new gO({type:"first",mode:this.mode}),...n]),this.array[e][t]=r;for(let i of r)i.parent=this,i.parentBranch=[e,t];this.isDirty=!0}addRowBefore(e){"array"===this.type&&Array.isArray(this.array);let t=[];for(let n=0;n<this.colCount;n++)t.push(_z(this));this.array.splice(e,0,t);for(let n=e;n<this.rowCount;n++)for(let e=0;e<this.colCount;e++){let t=this.array[n][e];if(t)for(let r of t)r.parentBranch=[n,e]}this.isDirty=!0}addRowAfter(e){"array"===this.type&&Array.isArray(this.array);let t=[];for(let n=0;n<this.colCount;n++)t.push(_z(this));this.array.splice(e+1,0,t);for(let n=e+1;n<this.rowCount;n++)for(let e=0;e<this.colCount;e++){let t=this.array[n][e];if(t)for(let r of t)r.parentBranch=[n,e]}this.isDirty=!0}removeRow(e){"array"===this.type&&Array.isArray(this.array)&&this.rowCount;let t=this.array.splice(e,1);for(let n of t)for(let e of n)if(e)for(let t of e)t.parent=void 0,t.parentBranch=void 0;for(let n=e;n<this.rowCount;n++)for(let e=0;e<this.colCount;e++){let t=this.array[n][e];if(t)for(let r of t)r.parentBranch=[n,e]}this.isDirty=!0}addColumnBefore(e){"array"===this.type&&Array.isArray(this.array);for(let t of this.array)t.splice(e,0,_z(this));for(let t=0;t<this.rowCount;t++)for(let n=e;n<this.colCount;n++){let e=this.array[t][n];if(e)for(let r of e)r.parentBranch=[t,n]}this.isDirty=!0}addColumnAfter(e){"array"===this.type&&Array.isArray(this.array);for(let t of this.array)t.splice(e+1,0,_z(this));for(let t=0;t<this.rowCount;t++)for(let n=e+1;n<this.colCount;n++){let e=this.array[t][n];if(e)for(let r of e)r.parentBranch=[t,n]}this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(e){"array"===this.type&&Array.isArray(this.array)&&this.colCount;for(let t of this.array){let n=t.splice(e,1);for(let e of n)if(e)for(let t of e)t.parent=void 0,t.parentBranch=void 0}for(let t=0;t<this.rowCount;t++)for(let n=e;n<this.colCount;n++){let e=this.array[t][n];if(e)for(let r of e)r.parentBranch=[t,n]}this.isDirty=!0}get cells(){let e=[];for(let t of this.array)for(let n of t)n&&e.push(n.filter((e=>"first"!==e.type)));return e}};function _z(e){let t=new gO({type:"first",mode:e.mode});t.parent=e;let n=new gz;return n.parent=e,[t,n]}function Sz(e){let t=new GL(null,{classes:"ML__arraycolsep"});return t.width=e,t}function Cz(e,t,n,r){if(!r)return null;let i=[];for(let a of t){let t=gO.createBox(e,r,{type:"ignore"});t&&(t.depth=a.depth,t.height=a.height,i.push({box:t,shift:a.pos-n}))}return new eO({individualShift:i}).wrap(e)}var Ez=class e extends gO{constructor(e){super({mode:e.mode,command:e.command,style:e.style,body:e.body,type:"box"}),this.framecolor=e.framecolor,this.backgroundcolor=e.backgroundcolor,this.padding=e.padding,this.offset=e.offset,this.border=e.border}static fromJson(t){return new e(t)}toJson(){return Jk(Zk({},super.toJson()),{framecolor:this.framecolor,backgroundcolor:this.backgroundcolor,padding:this.padding,offset:this.offset,border:this.border})}render(e){var t,n,r,i;let a=gO.createBox(e,this.body,{type:"lift"});if(!a)return null;let o=e.toEm(null!=(t=this.offset)?t:{dimension:0});a.depth+=o,a.setStyle("display","inline-block"),a.setStyle("position","relative"),a.setStyle("height",Math.floor(100*a.height+a.depth)/100,"em"),a.setStyle("vertical-align",-Math.floor(100*a.height)/100,"em");let s=new pO({parent:e},this.style),l=s.toEm(null!=(n=this.padding)?n:{register:"fboxsep"}),u=new GL(null,{classes:"ML__box"});u.height=a.height+l,u.depth=a.depth+l,u.setStyle("box-sizing","border-box"),u.setStyle("position","absolute"),u.setStyle("top",.3-l,"em"),u.setStyle("left",0),u.setStyle("height",u.height+u.depth,"em"),u.setStyle("width","100%"),this.backgroundcolor&&u.setStyle("background-color",null!=(r=s.toColor(this.backgroundcolor))?r:"transparent"),this.framecolor&&u.setStyle("border","".concat(s.getRegisterAsEm("fboxrule",2),"em solid ").concat(null!=(i=s.toColor(this.framecolor))?i:"black")),this.border&&u.setStyle("border",this.border);let c=new GL([u,a],{type:"lift"});return c.setStyle("display","inline-block"),c.setStyle("position","relative"),c.setStyle("line-height",0),c.height=a.height+l+(o>0?o:0),c.depth=a.depth+l+(o<0?-o:0),c.setStyle("padding-left",l,"em"),c.setStyle("padding-right",l,"em"),c.setStyle("height",Math.floor(100*(a.height+a.depth+2*l+Math.abs(o)))/100,"em"),c.setStyle("margin-top",-l,"em"),c.setStyle("top",Math.floor(100*(a.depth-a.height+2*l-o))/100,"em"),c.setStyle("vertical-align",Math.floor(100*(a.depth+2*l))/100,"em"),this.caret&&(c.caret=this.caret),this.attachSupsub(e,{base:c})}_serialize(e){return e.skipStyles?zL([this.bodyToLatex(e),this.supsubToLatex(e)]):super._serialize(e)}},kz=class e extends gO{constructor(e,t){var n;super({type:"composition",mode:null!=(n=null==t?void 0:t.mode)?n:"math",value:e})}static fromJson(t){return new e(t.value,t)}toJson(){return super.toJson()}get computedStyle(){return{}}render(e){let t=new GL(this.value,{classes:"ML__composition",type:"composition"});return this.bind(e,t),this.caret&&(t.caret=this.caret),t}_serialize(e){return""}},Az=class e extends gO{constructor(e){super({type:"error",value:e,command:e,mode:"math"}),this.verbatimLatex=e}static fromJson(t){return new e(t.command)}toJson(){return super.toJson()}render(e){let t=this.createBox(e,{classes:"ML__error"});return this.caret&&(t.caret=this.caret),t}},Nz=class e extends gO{constructor(e,t,n){super({type:"group",mode:t,style:n}),this.body=e,this.boxType=e.length>1?"ord":"ignore",this.skipBoundary=!0,this.displayContainsHighlight=!1,e&&1===e.length&&","===e[0].command&&(this.captureSelection=!0)}static fromJson(t){return new e(t.body,t.mode,t.style)}render(e){let t=gO.createBox(e,this.body,{type:this.boxType});return t?(this.caret&&(t.caret=this.caret),this.bind(e,t)):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let t=$A(this.command,this.mode);return null!=t&&t.serialize?t.serialize(this,e):"{".concat(this.bodyToLatex(e),"}")}},Mz=class e extends gO{constructor(e,t,n){super({type:"leftright",style:n.style,displayContainsHighlight:!0}),this.variant=e,this.body=t,this.leftDelim=n.leftDelim,this.rightDelim=n.rightDelim}static fromJson(t){var n;return new e(null!=(n=t.variant)?n:"",t.body,t)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),e}_serialize(e){var t,n;let r=this.matchingRightDelim();return"left...right"===this.variant?zL(["\\left",null!=(t=this.leftDelim)?t:".",this.bodyToLatex(e),"\\right",r]):"mleft...mright"===this.variant?zL(["\\mleft",null!=(n=this.leftDelim)?n:".",this.bodyToLatex(e),"\\mright",r]):zL([this.leftDelim&&"."!==this.leftDelim?this.leftDelim:"",this.bodyToLatex(e),r])}matchingRightDelim(){var e,t;if(this.rightDelim&&"?"!==this.rightDelim)return this.rightDelim;let n=null!=(e=this.leftDelim)?e:".";return null!=(t=ez[n])?t:n}render(e){var t,n;let r=new pO({parent:e},this.style);this.body;let i=new pO({parent:e,mathstyle:"textstyle"},this.style),a=null!=(t=gO.createBox(r,this.body,{type:"inner"}))?t:new GL(null,{type:"inner"}),o=a.height/i.scalingFactor,s=a.depth/i.scalingFactor,l=[];if(this.leftDelim&&l.push(this.bind(i,fz("open",this.leftDelim,o,s,i,{isSelected:this.isSelected,classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),a&&(Fz(a.children,this,r,o,s),l.push(a)),this.rightDelim){let e=this.containsCaret?" ML__contains-caret":"",t=this.rightDelim;"?"===t&&(r.smartFence?(t=this.matchingRightDelim(),e+=" ML__smart-fence__close"):t="."),l.push(this.bind(i,fz("close",t,o,s,i,{isSelected:this.isSelected,classes:e+" ML__close",mode:this.mode,style:this.style})))}let u="mleft...mright"===this.variant,c=this.leftSibling;c&&(!u&&c.isFunction&&(u=!0),!u&&"subsup"===c.type&&null!=(n=c.leftSibling)&&n.isFunction&&(u=!0));let d=new GL(l,{type:u?"close":"inner",classes:"ML__left-right"});return d.setStyle("margin-top","".concat(-a.depth,"em")),d.setStyle("height","".concat(a.height+a.depth,"em")),this.caret&&(d.caret=this.caret),this.bind(r,d.wrap(r))}};function Fz(e,t,n,r,i){if(e)for(let a=0;a<e.length;a++){let o=e[a];"middle"===o.type?(e[a]=t.bind(n,fz("inner",o.value,r,i,n,{isSelected:t.isSelected})),e[a].caret=o.caret,e[a].isSelected=o.isSelected,e[a].cssId=o.cssId,e[a].htmlData=o.htmlData,e[a].htmlStyle=o.htmlStyle,e[a].attributes=o.attributes,e[a].cssProperties=o.cssProperties):o.children&&Fz(o.children,t,n,r,i)}}var Tz=class e extends gO{constructor(e,t){var n;super({type:"macro",command:e,style:t.style}),this.body=t.body,void 0===t.captureSelection?t.args?this.captureSelection=!1:this.captureSelection=!0:this.captureSelection=t.captureSelection,this.macroArgs=t.args,this.expand=null!=(n=t.expand)&&n}static fromJson(t){return new e(t.command,t)}toJson(){let e=super.toJson();return this.expand&&(e.expand=!0),void 0!==this.captureSelection&&(e.captureSelection=this.captureSelection),this.macroArgs&&(e.args=this.macroArgs),e}_serialize(e){var t;return e.expandMacro&&this.expand?this.bodyToLatex(e):this.command+(null!=(t=this.macroArgs)?t:"")}render(e){let t=gO.createBox(e,this.body);return t?(this.caret&&(t.caret=this.caret),this.bind(e,t)):null}},Bz=class e extends gO{constructor(){super({type:"macro-argument"})}static fromJson(t){return new e}toJson(){return super.toJson()}_serialize(e){return""}render(e){return null}},Lz=class e extends gO{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;var a;super({type:"prompt",mode:null!=(a=null==i?void 0:i.mode)?a:"math",style:null==i?void 0:i.style,command:"\\placeholder"}),this.body=r,this.correctness=t,this.placeholderId=e,this.locked=n,this.captureSelection=this.locked}static fromJson(t){return new e(t.placeholderId,t.correctness,t.locked,t.body,t)}toJson(){let e=super.toJson();return this.placeholderId&&(e.placeholderId=this.placeholderId),this.body||delete e.body,this.body&&(e.body=this.body.filter((e=>"first"!==e.type)).map((e=>e.toJson()))),this.correctness&&(e.correctness=this.correctness),e.locked=this.locked,e}render(e){let t=new pO({parent:e}),n=t.getRegisterAsEm("fboxsep"),r=n,i=n,a=gO.createBox(e,this.body);if(!a)return null;a.height||(a.height=t.metrics.xHeight),a.setStyle("vertical-align",-a.height,"em"),"correct"===this.correctness?a.setStyle("color","var(--correct-color, var(--ML__correct-color))"):"incorrect"===this.correctness&&a.setStyle("color","var(--incorrect-color, var(--ML__incorrect-color))");let o=new GL(a,{type:"ord"});o.setStyle("display","inline-block"),o.setStyle("height",a.height+a.depth,"em"),o.setStyle("vertical-align",-i,"em");let s="ML__prompt ";this.locked?s+=" ML__lockedPromptBox ":s+=" ML__editablePromptBox ","correct"===this.correctness?s+=" ML__correctPromptBox ":"incorrect"===this.correctness&&(s+=" ML__incorrectPromptBox "),this.containsCaret&&(s+=" ML__focusedPromptBox ");let l=new GL(null,{classes:s,attributes:{part:"prompt"}});l.height=o.height+i,l.depth=o.depth+i,l.width=o.width+2*r,l.setStyle("box-sizing","border-box"),l.setStyle("position","absolute"),l.setStyle("height",o.height+o.depth+2*i,"em"),0===r&&l.setStyle("width","100%"),0!==r&&(l.setStyle("width","calc(100% + ".concat(2*r,"em)")),l.setStyle("top",n,"em"),l.setStyle("left",-r,"em")),(!this.body||1===this.body.length)&&(l.width=3*r,l.setStyle("width","calc(100% + ".concat(3*r,"em)")),l.setStyle("left",-1.5*r,"em"));let u="";"incorrect"===this.correctness&&(u+='<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="0.5" stroke="var(--incorrect-color, var(--ML__incorrect-color))" stroke-linecap="round" />'),u&&(l.svgOverlay=u);let c=new GL([l,o],{classes:"ML__prompt-atom"});return o.setStyle("line-height",1),c.setStyle("position","relative"),c.setStyle("display","inline-block"),c.setStyle("line-height",0),c.height=o.height+i+.2,c.depth=o.depth+i,c.left=r,c.right=r,c.setStyle("height",o.height+i,"em"),c.setStyle("top",o.depth-o.height,"em"),c.setStyle("vertical-align",o.depth+i,"em"),c.setStyle("margin-left",.5,"em"),c.setStyle("margin-right",.5,"em"),this.caret&&(c.caret=this.caret),this.bind(t,this.attachSupsub(e,{base:c}))}_serialize(e){var t;let n=null!=(t=this.bodyToLatex(e))?t:"";if(e.skipPlaceholders)return n;let r="\\placeholder";return this.placeholderId&&(r+="[".concat(this.placeholderId,"]")),"correct"===this.correctness?r+="[correct]":"incorrect"===this.correctness&&(r+="[incorrect]"),this.locked&&(r+="[locked]"),IL(r,n)}},Oz=class e extends gO{constructor(e){super({type:"subsup",style:null==e?void 0:e.style}),this.subsupPlacement="auto"}static fromJson(t){let n=new e(t);for(let e of hO)t[e]&&n.setChildren(t[e],e);return n}render(e){var t;let n=new pO({parent:e,isPhantom:!0}),r=this.leftSibling,i=null!=(t=r.render(n))?t:new GL(null),a=new GL(null);return a.height=i.height,a.depth=i.depth,this.attachSupsub(e,{base:a,isCharacterBox:r.isCharacterBox(),type:"ignore"})}_serialize(e){return this.supsubToLatex(e)}};function zz(e){return!!e&&!/^(<$$>|<$>|<space>|<{>|<}>|#[0-9\?]|\\.+)$/.test(e)}var Iz=class{constructor(e,t,n){var r,i,a,o;this.errors=[],this.index=0,this.endCount=0,null!=n||(n={}),this.tokens=e,this.context=!(t instanceof pO)||null!=n&&n.parseMode||n.mathstyle?new pO({from:t,mathstyle:n.mathstyle},n.style):t,this.args=null!=(r=n.args)?r:void 0,this.smartFence=this.context.smartFence,this.parsingContext={parent:void 0,mathlist:[],style:null!=(i=n.style)?i:{},parseMode:null!=(a=n.parseMode)?a:"math",mathstyle:null!=(o=n.mathstyle)?o:"displaystyle",tabular:!1}}beginContext(e){var t,n,r;let i=this.parsingContext,a={parent:i,mathlist:[],style:Zk({},i.style),parseMode:null!=(t=null==e?void 0:e.mode)?t:i.parseMode,mathstyle:null!=(n=null==e?void 0:e.mathstyle)?n:i.mathstyle,tabular:null!=(r=null==e?void 0:e.tabular)&&r};this.parsingContext=a}endContext(){this.parsingContext=this.parsingContext.parent}onError(e){this.errors.push(Zk({before:PL(this.tokens.slice(this.index,this.index+10)),after:PL(this.tokens.slice(Math.max(0,this.index-10),this.index))},e))}get mathlist(){return this.parsingContext.mathlist}set mathlist(e){this.parsingContext.mathlist=e}get parseMode(){return this.parsingContext.parseMode}set parseMode(e){this.parsingContext.parseMode=e}get tabularMode(){return this.parsingContext.tabular}get style(){let e=this.parsingContext;for(;e;){if(e.style)return Zk({},e.style);e=e.parent}return{}}set style(e){this.parsingContext.style=e}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}next(){this.index+=1}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}expandUnicode(){if(!this.peek()||"math"!==this.parseMode)return;let e=DA(this.peek());e&&this.tokens.splice(this.index,1,...OL(e))}match(e){return this.tokens[this.index]===e&&(this.index++,!0)}lastSubsupAtom(){let e;return this.mathlist.length>0&&(e=this.mathlist[this.mathlist.length-1],"subsup"===e.type||void 0!==e.subsupPlacement)||(e=new Oz({style:this.style}),this.mathlist.push(e)),e}hasPattern(e){return e.test(this.tokens[this.index])}hasInfixCommand(){var e;let{index:t}=this;if(t<this.tokens.length&&this.tokens[t].startsWith("\\")){let n=$A(this.tokens[t],this.parseMode);return!(!n||"symbol"===n.definitionType||n.ifMode&&!n.ifMode.includes(this.parseMode))&&(null!=(e=n.infix)&&e)}return!1}matchColumnSeparator(){return!(!this.tabularMode||"&"!==this.peek())&&(this.index++,!0)}matchRowSeparator(){if(!this.tabularMode)return!1;let e=this.peek();return("\\\\"===e||"\\cr"===e||"\\tabularnewline"===e)&&(this.index++,!0)}placeholder(){var e;let t=null==(e=this.args)?void 0:e.call(this,"?");return t?Pz(t,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new gz({mode:this.parseMode,style:this.style})]}skipWhitespace(){for(;this.match("<space>"););}skipUntilToken(e){let t=this.tokens[this.index];for(;t&&t!==e;)t=this.tokens[++this.index];t===e&&this.index++}skipFiller(){for(;this.match("\\relax")||this.match("<space>"););}matchKeyword(e){let t=this.index,n=this.end(),r="";for(;!n;){let t=this.get();zz(t)?(r+=t,n=this.end()||r.length>=e.length):n=!0}let i=e.toUpperCase()===r.toUpperCase();return i||(this.index=t),i}scanString(){let e="";for(;!this.end();){let t=this.peek();if("]"===t)return e;if("<space>"===t)e+=" ";else if(t.startsWith("\\"))this.onError({code:"unexpected-command-in-string"}),e+=t.substring(1);else{if(!zz(t))return e;e+=t}this.next()}return e}scanBalancedString(){let e="",t=this.end(),n=1;for(;!t;){let r=this.get();"<space>"===r?e+=" ":"<{>"===r?(e+="{",n+=1):"<}>"===r?(n-=1,n>0?e+="}":this.index-=1):e+="<$>"===r?"$":"<$$>"===r?"$$":r,t=0===n||this.end()}return e}scanLiteralGroup(){var e;if(!this.match("<{>"))return"";let t="",n=1;for(;n>0&&!this.end();){let r=this.get();"<}>"===r?(n-=1,n>0&&(t+="}")):"<{>"===r?(n+=1,t+="{"):(/\\[a-zA-Z]+$/.test(t)&&/^[a-zA-Z]/.test(r)&&(t+=" "),t+=null!=(e={"<space>":" ","<$$>":"$$","<$>":"$"}[r])?e:r)}return t}scanNumber(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t,n;let r=!1,i=this.peek();for(;"<space>"===i||"+"===i||"-"===i;)this.get(),"-"===i&&(r=!r),i=this.peek();e=!!e;let a=10,o=/\d/;if(this.match("'"))a=8,o=/[0-7]/,e=!0;else if(this.match('"'))a=16,o=/[\dA-F]/,e=!0;else if(this.match("x"))a=16,o=/[\dA-Fa-f]/,e=!0;else if(this.match("`"))return i=this.get(),i?2===i.length&&i.startsWith("\\")?{number:(r?-1:1)*(null!=(t=i.codePointAt(1))?t:0),base:"alpha"}:{number:(r?-1:1)*(null!=(n=i.codePointAt(0))?n:0),base:"alpha"}:null;let s="";for(;this.hasPattern(o);)s+=this.get();if(!e&&(this.match(".")||this.match(",")))for(s+=".";this.hasPattern(o);)s+=this.get();let l=e?Number.parseInt(s,a):Number.parseFloat(s);return Number.isNaN(l)?null:{number:r?-l:l,base:16===a?"hexadecimal":8===a?"octal":"decimal"}}scanRegister(){var e;let t=this.index,n=this.scanNumber(!1);if(this.skipWhitespace(),this.match("\\relax"))return n;let r=!1;if(null===n)for(;;){let e=this.peek();if("-"===e)r=!r;else if("+"!==e)break;this.next(),this.skipWhitespace()}if(this.match("\\global")){this.skipWhitespace();let e=this.get();return e.startsWith("\\")?n?{register:e,global:!0,factor:(r?-1:1)*n.number}:r?{register:e,global:!0,factor:-1}:{register:e,global:!0}:(this.index=t,null)}let i=this.get();return null!=i&&i.startsWith("\\")?(i=i.substring(1),this.context.registers[i]?r&&null===n?{register:i}:{register:i,factor:(r?-1:1)*(null!=(e=null==n?void 0:n.number)?e:1)}:(this.index=t,null)):(this.index=t,null)}scanValue(){let e=this.scanRegister();if(e)return e;let t=this.index,n=this.scanGlueOrDimen();if(n&&("unit"in n||"glue"in n&&"unit"in n.glue))return n;this.index=t;let r=this.scanNumber();if(r)return r;if(this.end()||!zz(this.peek()))return null;let i=this.scanString();return i.length>0?{string:i}:null}scanDimen(){let e=this.scanNumber(!1);if(null===e)return null;let t,n=e.number;return this.skipWhitespace(),this.matchKeyword("true"),this.skipWhitespace(),this.matchKeyword("pt")?t="pt":this.matchKeyword("mm")?t="mm":this.matchKeyword("cm")?t="cm":this.matchKeyword("ex")?t="ex":this.matchKeyword("px")?t="px":this.matchKeyword("em")?t="em":this.matchKeyword("bp")?t="bp":this.matchKeyword("dd")?t="dd":this.matchKeyword("pc")?t="pc":this.matchKeyword("in")?t="in":this.matchKeyword("mu")&&(t="mu"),t?{dimension:n,unit:t}:{dimension:n}}scanGlueOrDimen(){let e=this.scanDimen();if(null===e)return null;if(this.skipWhitespace(),this.match("\\relax"))return e;let t={glue:e};if(this.matchKeyword("plus")){let e=this.scanDimen();if(!e)return t;t.grow=e}if(this.skipWhitespace(),this.match("\\relax"))return t;if(this.skipWhitespace(),this.matchKeyword("minus")){let e=this.scanDimen();if(!e)return t;t.shrink=e}return t.grow||t.shrink?t:e}scanColspec(){this.skipWhitespace();let e=[];for(;!this.end()&&"<}>"!==this.peek()&&"]"!==this.peek();){let t=this.get();"c"===t||"r"===t||"l"===t?e.push({align:t}):"|"===t?e.push({separator:"solid"}):":"===t?e.push({separator:"dashed"}):"@"===t&&(this.match("<{>")&&(this.beginContext({mode:"math"}),e.push({gap:this.scan((e=>"<}>"===e))}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return e}scanModeSet(){let e;if(this.match("\\(")&&(e="textstyle"),!e&&this.match("\\[")&&(e="displaystyle"),!e)return null;this.beginContext({mode:"math",mathstyle:e});let t=this.scan((t=>t===("displaystyle"===e?"\\]":"\\)")));return this.match("displaystyle"===e?"\\]":"\\)")||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),t}scanModeShift(){let e="";if(this.match("<$>")&&(e="<$>"),!e&&this.match("<$$>")&&(e="<$$>"),!e)return null;this.beginContext({mode:"math",mathstyle:"textstyle"});let t=this.scan((t=>t===e));return this.match(e)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),t}scanEnvironment(){if(!this.match("\\begin"))return null;let e=this.scanArgument("string");if(!e)return null;let t=function(e){var t;return null!=(t=NA[e])?t:null}(e);if(!t)return this.onError({code:"unknown-environment",arg:e}),null;let n=[];if(t.params)for(let s of t.params)if(s.isOptional)n.push(this.scanOptionalArgument(s.type));else{let t=this.scanArgument(s.type);t||this.onError({code:"missing-argument",arg:e}),n.push(t)}this.beginContext({tabular:t.tabular});let r=[],i=[],a=[],o=!1;do{if(this.end()&&(this.onError({code:"unbalanced-environment",arg:e}),o=!0),!o&&this.match("\\end")&&(this.scanArgument("string")!==e&&this.onError({code:"unbalanced-environment",arg:e}),o=!0),!o)if(this.matchColumnSeparator())a.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){a.push(this.mathlist),this.mathlist=[];let e=null;this.skipWhitespace(),this.match("[")&&(e=this.scanDimen(),this.skipWhitespace(),this.match("]")),i.push(null!=e?e:{dimension:0}),r.push(a),a=[]}else this.mathlist.push(...this.scan((e=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(e))))}while(!o);return a.push(this.mathlist),a.length>0&&r.push(a),this.endContext(),t.createAtom(e,r,i,n)}scanExpression(){let e=this.mathlist;if(this.mathlist=[],this.parseExpression()){let t=this.mathlist;return this.mathlist=e,t}return this.mathlist=e,null}scan(e){this.beginContext(),e||(e=e=>"<}>"===e);let t,n="",r=null,i=[],a=null;for(;!this.end()&&!e(this.peek());)this.hasInfixCommand()&&!n?(n=this.get(),r=$A(n,"math"),r&&(i=this.scanArguments(r)[1]),a=this.mathlist,this.mathlist=[]):this.parseExpression();return n?(i.unshift(this.mathlist),a&&i.unshift(a),t=[r.createAtom({command:n,args:i,style:this.style,mode:this.parseMode})]):t=this.mathlist,this.endContext(),t}scanGroup(){let e=this.index;if(!this.match("<{>"))return null;let t=this.scan((e=>"<}>"===e));this.match("<}>")||this.onError({code:"unbalanced-braces"});let n=new Nz(t,this.parseMode,this.style);return n.verbatimLatex=PL(this.tokens.slice(e,this.index)),n}scanSmartFence(){if(this.skipWhitespace(),!this.match("("))return null;this.beginContext();let e=1;for(;!this.end()&&0!==e;)this.match("(")&&(e+=1),this.match(")")&&(e-=1),0!==e&&this.parseExpression();let t=new Mz("",this.mathlist,{leftDelim:"(",rightDelim:0===e?")":"?"});return this.endContext(),t}scanDelim(){this.skipWhitespace();let e=this.peek();if(!e)return this.onError({code:"unexpected-end-of-string"}),null;if(!zz(e)&&!e.startsWith("\\"))return null;this.next();let t=$A(e,"math");return t?"function"===t.definitionType&&t.ifMode&&!t.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:e}),null):"symbol"===t.definitionType&&("mopen"===t.type||"mclose"===t.type)||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(e)?e:(this.onError({code:"unexpected-delimiter",arg:e}),null):(this.onError({code:"unknown-command",arg:e}),null)}scanLeftRight(){var e;if(this.match("\\right"))return this.onError({code:"unbalanced-braces"}),new Az("\\right");if(this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),new Az("\\mright");let t="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;t="\\mright"}let n=this.scanDelim();if(!n)return this.onError({code:"unexpected-delimiter"}),new Az("\\right"===t?"\\left":"\\mleft");for(this.beginContext();!this.end()&&!this.match(t);)this.parseExpression();let r=this.mathlist;this.endContext();let i=null!=(e=this.scanDelim())?e:".";return new Mz("\\right"===t?"left...right":"mleft...mright",r,{leftDelim:n,rightDelim:i,style:this.style})}parseSupSub(){if("math"!==this.parseMode)return!1;let e=this.peek();if("^"!==e&&"_"!==e&&"'"!==e)return!1;let t=this.lastSubsupAtom();for(;"^"===e||"_"===e||"'"===e;)this.match("'")?this.match("'")?t.addChild(new gO({type:"mord",command:"\\doubleprime",mode:"math",value:"\u2032\u2032"}),"superscript"):t.addChild(new gO({type:"mord",command:"\\prime",mode:"math",value:"\u2032"}),"superscript"):(this.match("^")||this.match("_"))&&t.addChildren(wA(this.scanArgument("expression")),"_"===e?"subscript":"superscript"),e=this.peek();return!0}parseLimits(){if("math"!==this.parseMode)return!1;let e=this.match("\\limits"),t=!e&&this.match("\\nolimits"),n=!t&&!e&&this.match("\\displaylimits");if(!e&&!t&&!n)return!1;let r=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return null!==r&&(r.explicitSubsupPlacement=!0,e&&(r.subsupPlacement="over-under"),t&&(r.subsupPlacement="adjacent"),n&&(r.subsupPlacement="auto"),!0)}scanArguments(e){if(null==e||!e.params)return[void 0,[]];let t,n=[],r=e.infix?2:0;for(;r<e.params.length;){let i=e.params[r];"rest"===i.type?n.push(this.scan((e=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(e)))):i.isOptional?n.push(this.scanOptionalArgument(i.type)):i.type.endsWith("*")?t=i.type.slice(0,-1):n.push(this.scanArgument(i.type)),r+=1}return[t,n]}scanSymbolOrLiteral(){let e,t=this.peek();if(!t)return null;if(this.next(),zz(t)){let e=RL.createAtom(this.parseMode,t,Zk({},this.style));return e?[e]:null}if(e=this.scanMacro(t),e)return[e];if(t.startsWith("\\")){let n=$A(t,this.parseMode);if(!n)return this.onError({code:"unknown-command",arg:t}),[new Az(t)];if("symbol"===n.definitionType){let r=Zk({},this.style);n.variant&&(r.variant=n.variant),e=new gO({type:n.type,command:t,style:r,value:String.fromCodePoint(n.codepoint),mode:this.parseMode,verbatimLatex:t})}else{if(n.applyMode||n.applyStyle||n.infix)return this.onError({code:"invalid-command",arg:t}),[new Az(t)];n.createAtom&&(e=n.createAtom({command:t,args:[],style:this.style,mode:this.parseMode}))}}return e?[e]:null}scanArgument(e){var t;this.skipFiller();let n=this.parseMode;if("auto"===e&&(e=n),!this.match("<{>")){if("string"===e)return this.scanString();if("value"===e)return this.scanValue();if("delim"===e)return null!=(t=this.scanDelim())?t:".";if("expression"===e)return this.scanExpression();if("math"===e){e!==n&&this.beginContext({mode:"math"});let t=this.scanSymbolOrLiteral();return e!==n&&this.endContext(),t}if("text"===e){e!==n&&this.beginContext({mode:"text"});let t=this.scanSymbolOrLiteral();return e!==n&&this.endContext(),t}return"balanced-string"===e?null:"rest"===e?this.scan((e=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline","\\right"].includes(e))):null}if("text"===e){this.beginContext({mode:"text"});do{this.mathlist.push(...this.scan())}while(!this.match("<}>")&&!this.end());let e=this.mathlist;return this.endContext(),{group:e}}if("math"===e){this.beginContext({mode:"math"});do{this.mathlist.push(...this.scan())}while(!this.match("<}>")&&!this.end());let e=this.mathlist;return this.endContext(),{group:e}}let r=null;if("expression"===e){this.beginContext({mode:"math"});do{this.mathlist.push(...this.scan())}while(!this.match("<}>")&&!this.end());let e=this.mathlist;return this.endContext(),{group:e}}return"string"===e?r=this.scanString():"balanced-string"===e?r=this.scanBalancedString():"colspec"===e?r=this.scanColspec():"value"===e&&(r=this.scanValue()),this.skipUntilToken("<}>"),r}scanOptionalArgument(e){if(e="auto"===e?this.parseMode:e,this.skipFiller(),!this.match("["))return null;let t=null;for(;!this.end()&&!this.match("]");)if("string"===e)t=this.scanString();else if("value"===e)t=this.scanValue();else if("colspec"===e)t=this.scanColspec();else if("bbox"===e){let e={},n=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let t of n){let n=t.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(n)e.padding={dimension:parseInt(n[1]),unit:n[2]};else{let n=t.match(/^\s*border\s*:\s*(.*)/);n?e.border=n[1]:e.backgroundcolor={string:t}}}t=e}else"math"===e&&(this.beginContext({mode:"math"}),t=this.mathlist.concat(this.scan((e=>"]"===e))),this.endContext());return t}scanSymbolOrCommand(e){var t,n,r;if("\\placeholder"===e){let e,t=this.scanOptionalArgument("string"),n=this.scanOptionalArgument("math"),r=gO.serialize(n,{defaultMode:"math"}),i=[];e||"correct"!==r?e||"incorrect"!==r?""!==r&&(i=n):e="incorrect":e="correct";let a,o="locked"===this.scanOptionalArgument("string"),s=this.scanArgument("auto");return a=s&&Array.isArray(s)&&s.length>0?s:s&&"object"==typeof s&&"group"in s?s.group:i,t?[new Lz(t,e,o,null!=a?a:i,{mode:this.parseMode,style:this.style})]:[new gz({mode:this.parseMode,style:this.style})]}if("\\renewcommand"===e||"\\newcommand"===e||"\\providecommand"===e||"\\def"===e){let t=this.index,n=this.scanLiteralGroup()||this.next();if(!n)return null;if(this.context.registers[n.substring(1)]){let r=this.scanArgument("string");null!==r&&(this.context.registers[n.substring(1)]=r);let i=zL([e,PL(this.tokens.slice(t,this.index))]);return[new gO({type:"text",value:"",verbatimLatex:i})]}}let i=this.scanMacro(e);if(i)return[i];let a=$A(e,this.parseMode);if(!a)return"text"===this.parseMode?(/[a-zA-Z]/.test(null!=(t=this.peek())?t:"")&&(e+=" "),[...e].map((e=>new gO({type:"text",value:e,mode:"text",style:this.style})))):(this.onError({code:"unknown-command",arg:e}),[new Az(e)]);let o=this.index;if("symbol"===a.definitionType){let t=Zk({},this.style);a.variant&&(t.variant=a.variant),i=new gO({type:a.type,command:e,style:t,value:String.fromCodePoint(a.codepoint),mode:this.parseMode})}else{if(a.ifMode&&!a.ifMode.includes(this.parseMode))return[];let t=this.parseMode;a.applyMode&&(this.parseMode=a.applyMode);let o,s=[];if(a.parse?s=a.parse(this):[o,s]=this.scanArguments(a),this.parseMode=t,a.applyMode&&!a.applyStyle&&!a.createAtom)return wA(s[0]);if(a.infix)return this.onError({code:"too-many-infix-commands",arg:e}),null;if("function"==typeof a.createAtom)i=a.createAtom({command:e,args:s,style:this.style,mode:this.parseMode}),o&&(i.body=wA(this.scanArgument(o)));else if("function"==typeof a.applyStyle){let t=Zk(Zk({},this.style),a.applyStyle(e,s,this.context)),n=this.parseMode;if(a.applyMode&&(this.parseMode=a.applyMode),o){let e=this.style;this.style=t;let r=this.scanArgument(o);return this.style=e,this.parseMode=n,wA(r)}this.style=t}else i=new gO({type:"mord",command:null!=(n=a.command)?n:e,style:Zk({},this.style),value:e,mode:null!=(r=a.applyMode)?r:this.parseMode})}if(!i)return null;if(i instanceof gO&&void 0===i.verbatimLatex&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(e)){let t=zL([e,PL(this.tokens.slice(o,this.index))]);t&&(i.verbatimLatex=t)}if(null===i.verbatimLatex&&(i.verbatimLatex=void 0),i.isFunction&&this.smartFence){let e=this.scanSmartFence();if(e)return[i,e]}return[i]}scanSymbolCommandOrLiteral(){this.expandUnicode();let e=this.get();if(!e)return null;if(zz(e)){let t=RL.createAtom(this.parseMode,e,Zk({},this.style));if(!t)return null;if(t.isFunction&&this.smartFence){let e=this.scanSmartFence();if(e)return[t,e]}return[t]}return e.startsWith("\\")?this.scanSymbolOrCommand(e):"<space>"===e?"text"===this.parseMode?[new bO(" "," ",this.style)]:null:("<}>"===e?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:e}),null)}scanMacro(e){var t;let n=this.context.getMacro(e);if(!n)return null;let r=this.index,i=n.args,a={"?":null==(t=this.args)?void 0:t.call(this,"?")};for(let o=1;o<=i;o++){let e=this.scanLiteralGroup();if(!e){let t=this.index;this.scanExpression(),e=PL(this.tokens.slice(t,this.index))}a[o]=e}return new Tz(e,{expand:n.expand,captureSelection:n.captureSelection,args:r===this.index?null:PL(this.tokens.slice(r,this.index)),style:this.parsingContext.style,body:Pz(n.def,{context:this.context,parseMode:this.parseMode,args:e=>a[e],mathstyle:this.parsingContext.mathstyle,style:this.parsingContext.style})})}parseExpression(){var e,t,n,r;let i=null!=(r=null!=(n=null!=(t=null!=(e=this.scanEnvironment())?e:this.scanModeShift())?t:this.scanModeSet())?n:this.scanGroup())?r:this.scanLeftRight();if(null===i){if(this.parseSupSub()||this.parseLimits())return!0;i=this.scanSymbolCommandOrLiteral()}return!!i&&(Array.isArray(i)?this.mathlist.push(...i):this.mathlist.push(i),!0)}};function Pz(e,t){var n,r,i,a;let o=null!=(n=null==t?void 0:t.args)?n:void 0,s=new Iz(OL(e,o),null==t?void 0:t.context,{args:o,mathstyle:null!=(r=null==t?void 0:t.mathstyle)?r:"displaystyle",parseMode:null!=(i=null==t?void 0:t.parseMode)?i:"math",style:null!=(a=null==t?void 0:t.style)?a:{}}),l=[];for(;!s.end();)l.push(...s.scan((()=>!1)));return l}function qz(e,t){var n;let r=new Iz(OL(e,null),null==t?void 0:t.context,{mathstyle:"displaystyle",parseMode:null!=(n=null==t?void 0:t.parseMode)?n:"math"});for(;!r.end();)r.scan();return r.errors}var Rz=class e extends gO{constructor(e,t){super({type:"chem"},{command:e,mode:"math"});let n=Kz.go(jz.go(t,"\\pu"===e?"pu":"ce"),!1);this.body=Pz(n),this._verbatimLatex=e+"{"+t+"}",this.arg=t,this.captureSelection=!0}static fromJson(t){return new e(t.command,t.arg)}set verbatimLatex(e){}get verbatimLatex(){return this._verbatimLatex}toJson(){return Jk(Zk({},super.toJson()),{arg:this.arg})}render(e){let t=gO.createBox(e,this.body,{type:"inner"});return this.caret&&(t.caret=this.caret),this.bind(e,t)}_serialize(e){return this.verbatimLatex,this.verbatimLatex}};jA(["ce","pu"],"{chemformula:balanced-string}",{createAtom:e=>{var t;return new Rz(e.command,null!=(t=e.args[0])?t:"")}});var jz={go:function(e,t){if(!e)return[];void 0===t&&(t="ce");var n="0",r={parenthesisLevel:0};e=(e=(e=e.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var i,a=10,o=[];;){i!==e?(a=10,i=e):a--;var s=jz.stateMachines[t],l=s.transitions[n]||s.transitions["*"];e:for(var u=0;u<l.length;u++){var c=jz.patterns.match_(l[u].pattern,e);if(c){for(var d=l[u].task,p=0;p<d.action_.length;p++){var h;if(s.actions[d.action_[p].type_])h=s.actions[d.action_[p].type_](r,c.match_,d.action_[p].option);else{if(!jz.actions[d.action_[p].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+d.action_[p].type_+")"];h=jz.actions[d.action_[p].type_](r,c.match_,d.action_[p].option)}jz.concatArray(o,h)}if(n=d.nextState||n,!(e.length>0))return o;if(d.revisit||(e=c.remainder),!d.toContinue)break e}}if(a<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(e,t){if(t)if("[object Array]"===Object.prototype.toString.call(t))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return t&&t[0]?{match_:t.slice(1),remainder:e.substr(t[0].length)}:null},"(-)(9)^(-9)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return t&&t[0]?{match_:t.slice(1),remainder:e.substr(t[0].length)}:null},"state of aggregation $":function(e){var t=jz.patterns.findObserveGroups(e,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(t&&t.remainder.match(/^($|[\s,;\)\]\}])/))return t;var n=e.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return n?{match_:n[0],remainder:e.substr(n[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(e){return jz.patterns.findObserveGroups(e,"^{","","","}")},"^($...$)":function(e){return jz.patterns.findObserveGroups(e,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(e){return jz.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(e){return jz.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(e){return jz.patterns.findObserveGroups(e,"_{","","","}")},"_($...$)":function(e){return jz.patterns.findObserveGroups(e,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(e){return jz.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(e){return jz.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(e){return jz.patterns.findObserveGroups(e,"","{","}","")},"{(...)}":function(e){return jz.patterns.findObserveGroups(e,"{","","","}")},"$...$":function(e){return jz.patterns.findObserveGroups(e,"","$","$","")},"${(...)}$":function(e){return jz.patterns.findObserveGroups(e,"${","","","}$")},"$(...)$":function(e){return jz.patterns.findObserveGroups(e,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(e){return jz.patterns.findObserveGroups(e,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(e){return jz.patterns.findObserveGroups(e,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(e){return jz.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(e){return jz.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(e){return jz.patterns.findObserveGroups(e,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(e){return jz.patterns.findObserveGroups(e,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(e){return jz.patterns.findObserveGroups(e,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(e){return jz.patterns.findObserveGroups(e,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(e){return jz.patterns.findObserveGroups(e,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(e){return jz.patterns.findObserveGroups(e,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(e){return jz.patterns.findObserveGroups(e,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(e){return jz.patterns.findObserveGroups(e,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(e){var t;if(t=e.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:t[0],remainder:e.substr(t[0].length)};var n=jz.patterns.findObserveGroups(e,"","$","$","");return n&&(t=n.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:t[0],remainder:e.substr(t[0].length)}:null},amount2:function(e){return this.amount(e)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(e){if(e.match(/^\([a-z]+\)$/))return null;var t=e.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return t?{match_:t[0],remainder:e.substr(t[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(e,t,n,r,i,a,o,s,l,u){var c=function(e,t){if("string"==typeof t)return 0!==e.indexOf(t)?null:t;var n=e.match(t);return n?n[0]:null},d=c(e,t);if(null===d||(e=e.substr(d.length),null===(d=c(e,n))))return null;var p=function(e,t,n){for(var r=0;t<e.length;){var i=e.charAt(t),a=c(e.substr(t),n);if(null!==a&&0===r)return{endMatchBegin:t,endMatchEnd:t+a.length};if("{"===i)r++;else if("}"===i){if(0===r)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];r--}t++}return null}(e,d.length,r||i);if(null===p)return null;var h=e.substring(0,r?p.endMatchEnd:p.endMatchBegin);if(a||o){var f=this.findObserveGroups(e.substr(p.endMatchEnd),a,o,s,l);if(null===f)return null;var m=[h,f.match_];return{match_:u?m.join(""):m,remainder:f.remainder}}return{match_:h,remainder:e.substr(p.endMatchEnd)}},match_:function(e,t){var n=jz.patterns.patterns[e];if(void 0===n)throw["MhchemBugP","mhchem bug P. Please report. ("+e+")"];if("function"==typeof n)return jz.patterns.patterns[e](t);var r=t.match(n);return r?{match_:r[2]?[r[1],r[2]]:r[1]?r[1]:r[0],remainder:t.substr(r[0].length)}:null}},actions:{"a=":function(e,t){e.a=(e.a||"")+t},"b=":function(e,t){e.b=(e.b||"")+t},"p=":function(e,t){e.p=(e.p||"")+t},"o=":function(e,t){e.o=(e.o||"")+t},"q=":function(e,t){e.q=(e.q||"")+t},"d=":function(e,t){e.d=(e.d||"")+t},"rm=":function(e,t){e.rm=(e.rm||"")+t},"text=":function(e,t){e.text_=(e.text_||"")+t},insert:function(e,t,n){return{type_:n}},"insert+p1":function(e,t,n){return{type_:n,p1:t}},"insert+p1+p2":function(e,t,n){return{type_:n,p1:t[0],p2:t[1]}},copy:function(e,t){return t},rm:function(e,t){return{type_:"rm",p1:t||""}},text:function(e,t){return jz.go(t,"text")},"{text}":function(e,t){var n=["{"];return jz.concatArray(n,jz.go(t,"text")),n.push("}"),n},"tex-math":function(e,t){return jz.go(t,"tex-math")},"tex-math tight":function(e,t){return jz.go(t,"tex-math tight")},bond:function(e,t,n){return{type_:"bond",kind_:n||t}},"color0-output":function(e,t){return{type_:"color0",color:t[0]}},ce:function(e,t){return jz.go(t)},"1/2":function(e,t){var n=[];t.match(/^[+\-]/)&&(n.push(t.substr(0,1)),t=t.substr(1));var r=t.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return r[1]=r[1].replace(/\$/g,""),n.push({type_:"frac",p1:r[1],p2:r[2]}),r[3]&&(r[3]=r[3].replace(/\$/g,""),n.push({type_:"tex-math",p1:r[3]})),n},"9,9":function(e,t){return jz.go(t,"9,9")}},createTransitions:function(e){var t,n,r,i,a={};for(t in e)for(n in e[t])for(r=n.split("|"),e[t][n].stateArray=r,i=0;i<r.length;i++)a[r[i]]=[];for(t in e)for(n in e[t])for(r=e[t][n].stateArray||[],i=0;i<r.length;i++){var o=e[t][n];if(o.action_){o.action_=[].concat(o.action_);for(var s=0;s<o.action_.length;s++)"string"==typeof o.action_[s]&&(o.action_[s]={type_:o.action_[s]})}else o.action_=[];for(var l=t.split("|"),u=0;u<l.length;u++)if("*"===r[i])for(var c in a)a[c].push({pattern:l[u],task:o});else a[r[i]].push({pattern:l[u],task:o})}return a},stateMachines:{}};jz.stateMachines={ce:{transitions:jz.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(e,t){var n;if((e.d||"").match(/^[0-9]+$/)){var r=e.d;e.d=void 0,n=this.output(e),e.b=r}else n=this.output(e);return jz.actions["o="](e,t),n},"d= kv":function(e,t){e.d=t,e.dType="kv"},"charge or bond":function(e,t){if(e.beginsWithBond){var n=[];return jz.concatArray(n,this.output(e)),jz.concatArray(n,jz.actions.bond(e,t,"-")),n}e.d=t},"- after o/d":function(e,t,n){var r=jz.patterns.match_("orbital",e.o||""),i=jz.patterns.match_("one lowercase greek letter $",e.o||""),a=jz.patterns.match_("one lowercase latin letter $",e.o||""),o=jz.patterns.match_("$one lowercase latin letter$ $",e.o||""),s="-"===t&&(r&&""===r.remainder||i||a||o);s&&!e.a&&!e.b&&!e.p&&!e.d&&!e.q&&!r&&a&&(e.o="$"+e.o+"$");var l=[];return s?(jz.concatArray(l,this.output(e)),l.push({type_:"hyphen"})):(r=jz.patterns.match_("digits",e.d||""),n&&r&&""===r.remainder?(jz.concatArray(l,jz.actions["d="](e,t)),jz.concatArray(l,this.output(e))):(jz.concatArray(l,this.output(e)),jz.concatArray(l,jz.actions.bond(e,t,"-")))),l},"a to o":function(e){e.o=e.a,e.a=void 0},"sb=true":function(e){e.sb=!0},"sb=false":function(e){e.sb=!1},"beginsWithBond=true":function(e){e.beginsWithBond=!0},"beginsWithBond=false":function(e){e.beginsWithBond=!1},"parenthesisLevel++":function(e){e.parenthesisLevel++},"parenthesisLevel--":function(e){e.parenthesisLevel--},"state of aggregation":function(e,t){return{type_:"state of aggregation",p1:jz.go(t,"o")}},comma:function(e,t){var n=t.replace(/\s*$/,"");return n!==t&&0===e.parenthesisLevel?{type_:"comma enumeration L",p1:n}:{type_:"comma enumeration M",p1:n}},output:function(e,t,n){var r,i,a;e.r?(i="M"===e.rdt?jz.go(e.rd,"tex-math"):"T"===e.rdt?[{type_:"text",p1:e.rd||""}]:jz.go(e.rd),a="M"===e.rqt?jz.go(e.rq,"tex-math"):"T"===e.rqt?[{type_:"text",p1:e.rq||""}]:jz.go(e.rq),r={type_:"arrow",r:e.r,rd:i,rq:a}):(r=[],!e.a&&!e.b&&!e.p&&!e.o&&!e.q&&!e.d&&!n||(e.sb&&r.push({type_:"entitySkip"}),e.o||e.q||e.d||e.b||e.p||2===n?e.o||e.q||e.d||!e.b&&!e.p?e.o&&"kv"===e.dType&&jz.patterns.match_("d-oxidation$",e.d||"")?e.dType="oxidation":e.o&&"kv"===e.dType&&!e.q&&(e.dType=void 0):(e.o=e.a,e.d=e.b,e.q=e.p,e.a=e.b=e.p=void 0):(e.o=e.a,e.a=void 0),r.push({type_:"chemfive",a:jz.go(e.a,"a"),b:jz.go(e.b,"bd"),p:jz.go(e.p,"pq"),o:jz.go(e.o,"o"),q:jz.go(e.q,"pq"),d:jz.go(e.d,"oxidation"===e.dType?"oxidation":"bd"),dType:e.dType})));for(var o in e)"parenthesisLevel"!==o&&"beginsWithBond"!==o&&delete e[o];return r},"oxidation-output":function(e,t){var n=["{"];return jz.concatArray(n,jz.go(t,"oxidation")),n.push("}"),n},"frac-output":function(e,t){return{type_:"frac-ce",p1:jz.go(t[0]),p2:jz.go(t[1])}},"overset-output":function(e,t){return{type_:"overset",p1:jz.go(t[0]),p2:jz.go(t[1])}},"underset-output":function(e,t){return{type_:"underset",p1:jz.go(t[0]),p2:jz.go(t[1])}},"underbrace-output":function(e,t){return{type_:"underbrace",p1:jz.go(t[0]),p2:jz.go(t[1])}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:jz.go(t[1])}},"r=":function(e,t){e.r=t},"rdt=":function(e,t){e.rdt=t},"rd=":function(e,t){e.rd=t},"rqt=":function(e,t){e.rqt=t},"rq=":function(e,t){e.rq=t},operator:function(e,t,n){return{type_:"operator",kind_:n||t}}}},a:{transitions:jz.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:jz.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:jz.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(e){if(e.text_){var t={type_:"text",p1:e.text_};for(var n in e)delete e[n];return t}}}},pq:{transitions:jz.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(e,t){return{type_:"state of aggregation subscript",p1:jz.go(t,"o")}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:jz.go(t[1],"pq")}}}},bd:{transitions:jz.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(e,t){return{type_:"color",color1:t[0],color2:jz.go(t[1],"bd")}}}},oxidation:{transitions:jz.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(e,t){return{type_:"roman numeral",p1:t||""}}}},"tex-math":{transitions:jz.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var n in e)delete e[n];return t}}}},"tex-math tight":{transitions:jz.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(e,t){e.o=(e.o||"")+"{"+t+"}"},output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var n in e)delete e[n];return t}}}},"9,9":{transitions:jz.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:jz.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(e,t){var n=[];return"+-"===t[0]||"+/-"===t[0]?n.push("\\pm "):t[0]&&n.push(t[0]),t[1]&&(jz.concatArray(n,jz.go(t[1],"pu-9,9")),t[2]&&(t[2].match(/[,.]/)?jz.concatArray(n,jz.go(t[2],"pu-9,9")):n.push(t[2])),(t[3]||t[4])&&("e"===t[3]||"*"===t[4]?n.push({type_:"cdot"}):n.push({type_:"times"}))),t[5]&&n.push("10^{"+t[5]+"}"),n},"number^":function(e,t){var n=[];return"+-"===t[0]||"+/-"===t[0]?n.push("\\pm "):t[0]&&n.push(t[0]),jz.concatArray(n,jz.go(t[1],"pu-9,9")),n.push("^{"+t[2]+"}"),n},operator:function(e,t,n){return{type_:"operator",kind_:n||t}},space:function(){return{type_:"pu-space-1"}},output:function(e){var t,n=jz.patterns.match_("{(...)}",e.d||"");n&&""===n.remainder&&(e.d=n.match_);var r=jz.patterns.match_("{(...)}",e.q||"");if(r&&""===r.remainder&&(e.q=r.match_),e.d&&(e.d=e.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.d=e.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),e.q){e.q=e.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.q=e.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var i={d:jz.go(e.d,"pu"),q:jz.go(e.q,"pu")};"//"===e.o?t={type_:"pu-frac",p1:i.d,p2:i.q}:(t=i.d,i.d.length>1||i.q.length>1?t.push({type_:" / "}):t.push({type_:"/"}),jz.concatArray(t,i.q))}else t=jz.go(e.d,"pu-2");for(var a in e)delete e[a];return t}}},"pu-2":{transitions:jz.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(e,t){e.rm+="^{"+t+"}"},space:function(){return{type_:"pu-space-2"}},output:function(e){var t=[];if(e.rm){var n=jz.patterns.match_("{(...)}",e.rm||"");t=n&&""===n.remainder?jz.go(n.match_,"pu"):{type_:"rm",p1:e.rm}}for(var r in e)delete e[r];return t}}},"pu-9,9":{transitions:jz.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){var n=e.text_.length%3;0===n&&(n=3);for(var r=e.text_.length-3;r>0;r-=3)t.push(e.text_.substr(r,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(0,n)),t.reverse()}else t.push(e.text_);for(var i in e)delete e[i];return t},"output-o":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){for(var n=e.text_.length-3,r=0;r<n;r+=3)t.push(e.text_.substr(r,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(r))}else t.push(e.text_);for(var i in e)delete e[i];return t}}}};var Kz={go:function(e,t){if(!e)return"";for(var n="",r=!1,i=0;i<e.length;i++){var a=e[i];"string"==typeof a?n+=a:(n+=Kz._go2(a),"1st-level escape"===a.type_&&(r=!0))}return!t&&!r&&n&&(n="{"+n+"}"),n},_goInner:function(e){return e&&Kz.go(e,!0)},_go2:function(e){var t;switch(e.type_){case"chemfive":t="";var n={a:Kz._goInner(e.a),b:Kz._goInner(e.b),p:Kz._goInner(e.p),o:Kz._goInner(e.o),q:Kz._goInner(e.q),d:Kz._goInner(e.d)};n.a&&(n.a.match(/^[+\-]/)&&(n.a="{"+n.a+"}"),t+=n.a+"\\,"),(n.b||n.p)&&(t+="{\\vphantom{X}}",t+="^{\\hphantom{"+(n.b||"")+"}}_{\\hphantom{"+(n.p||"")+"}}",t+="{\\vphantom{X}}",t+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(n.b||"")+"}}",t+="_{\\vphantom{2}\\llap{\\smash[t]{"+(n.p||"")+"}}}"),n.o&&(n.o.match(/^[+\-]/)&&(n.o="{"+n.o+"}"),t+=n.o),"kv"===e.dType?((n.d||n.q)&&(t+="{\\vphantom{X}}"),n.d&&(t+="^{"+n.d+"}"),n.q&&(t+="_{\\smash[t]{"+n.q+"}}")):"oxidation"===e.dType?(n.d&&(t+="{\\vphantom{X}}",t+="^{"+n.d+"}"),n.q&&(t+="{\\vphantom{X}}",t+="_{\\smash[t]{"+n.q+"}}")):(n.q&&(t+="{\\vphantom{X}}",t+="_{\\smash[t]{"+n.q+"}}"),n.d&&(t+="{\\vphantom{X}}",t+="^{"+n.d+"}"));break;case"rm":case"roman numeral":t="\\mathrm{"+e.p1+"}";break;case"text":e.p1.match(/[\^_]/)?(e.p1=e.p1.replace(" ","~").replace("-","\\text{-}"),t="\\mathrm{"+e.p1+"}"):t="\\text{"+e.p1+"}";break;case"state of aggregation":t="\\mskip2mu "+Kz._goInner(e.p1);break;case"state of aggregation subscript":t="\\mskip1mu "+Kz._goInner(e.p1);break;case"bond":if(!(t=Kz._getBond(e.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+e.kind_+")"];break;case"frac":var r="\\frac{"+e.p1+"}{"+e.p2+"}";t="\\mathchoice{\\textstyle"+r+"}{"+r+"}{"+r+"}{"+r+"}";break;case"pu-frac":var i="\\frac{"+Kz._goInner(e.p1)+"}{"+Kz._goInner(e.p2)+"}";t="\\mathchoice{\\textstyle"+i+"}{"+i+"}{"+i+"}{"+i+"}";break;case"tex-math":case"1st-level escape":t=e.p1+" ";break;case"frac-ce":t="\\frac{"+Kz._goInner(e.p1)+"}{"+Kz._goInner(e.p2)+"}";break;case"overset":t="\\overset{"+Kz._goInner(e.p1)+"}{"+Kz._goInner(e.p2)+"}";break;case"underset":t="\\underset{"+Kz._goInner(e.p1)+"}{"+Kz._goInner(e.p2)+"}";break;case"underbrace":t="\\underbrace{"+Kz._goInner(e.p1)+"}_{"+Kz._goInner(e.p2)+"}";break;case"color":t="{\\color{"+e.color1+"}{"+Kz._goInner(e.color2)+"}}";break;case"color0":t="\\color{"+e.color+"}";break;case"arrow":var a={rd:Kz._goInner(e.rd),rq:Kz._goInner(e.rq)},o=Kz._getArrow(e.r);a.rd||a.rq?"<=>"===e.r||"<=>>"===e.r||"<<=>"===e.r||"<--\x3e"===e.r?(o="\\long"+o,a.rd&&(o="\\overset{"+a.rd+"}{"+o+"}"),a.rq&&(o="<--\x3e"===e.r?"\\underset{\\lower2mu{"+a.rq+"}}{"+o+"}":"\\underset{\\lower6mu{"+a.rq+"}}{"+o+"}"),o=" {}\\mathrel{"+o+"}{} "):(a.rq&&(o+="[{"+a.rq+"}]"),o=" {}\\mathrel{\\x"+(o+="{"+a.rd+"}")+"}{} "):o=" {}\\mathrel{\\long"+o+"}{} ",t=o;break;case"operator":t=Kz._getOperator(e.kind_);break;case"space":t=" ";break;case"entitySkip":case"pu-space-1":t="~";break;case"pu-space-2":t="\\mkern3mu ";break;case"1000 separator":t="\\mkern2mu ";break;case"commaDecimal":t="{,}";break;case"comma enumeration L":t="{"+e.p1+"}\\mkern6mu ";break;case"comma enumeration M":t="{"+e.p1+"}\\mkern3mu ";break;case"comma enumeration S":t="{"+e.p1+"}\\mkern1mu ";break;case"hyphen":t="\\text{-}";break;case"addition compound":t="\\,{\\cdot}\\,";break;case"electron dot":t="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":t="{\\times}";break;case"prime":t="\\prime ";break;case"cdot":t="\\cdot ";break;case"tight cdot":t="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":t="\\times ";break;case"circa":t="{\\sim}";break;case"^":t="uparrow";break;case"v":t="downarrow";break;case"ellipsis":t="\\ldots ";break;case"/":t="/";break;case" / ":t="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return t},_getArrow:function(e){switch(e){case"->":case"\u2192":case"\u27f6":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<--\x3e":return"leftrightarrows";case"<=>":case"\u21cc":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(e){switch(e){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(e){switch(e){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},Vz=class e extends gO{constructor(e){super(Jk(Zk({},e),{type:"delim"})),this.value=e.delim,this.size=e.size}static fromJson(t){return new e(t)}toJson(){return Jk(Zk({},super.toJson()),{delim:this.value,size:this.size})}render(e){return new GL(this.value,{type:"middle"})}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let t=$A(this.command,this.mode);return null!=t&&t.serialize?t.serialize(this,e):IL(this.command,this.value)}},Uz=class e extends gO{constructor(e){super(Jk(Zk({},e),{type:"sizeddelim",value:e.delim})),this.delimType=e.delimType,this.size=e.size}static fromJson(t){return new e(t)}toJson(){return Jk(Zk({},super.toJson()),{delim:this.value,size:this.size,delimType:this.delimType})}render(e){let t=function(e,t,n,r){return void 0===e||"."===e?mz(n,r.classes):("<"===e||"\\lt"===e||"\u27e8"===e?e="\\langle":(">"===e||"\\gt"===e||"\u27e9"===e)&&(e="\\rangle"),az.has(e)||sz.has(e)?rz(e,t,!1,n,r):oz.has(e)?iz(e,lz[t],!1,n,r):null)}(this.value,this.size,e,{classes:{open:"ML__open",close:"ML__close"}[this.delimType],type:this.delimType,isSelected:this.isSelected});return t?(t=this.bind(e,t),this.caret&&(t.caret=this.caret),t):null}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let t=$A(this.command,this.mode);return null!=t&&t.serialize?t.serialize(this,e):IL(this.command,this.value)}},$z=class e extends gO{constructor(e,t,n,r){var i,a;super({type:"enclose",command:e,style:r.style}),this.body=t,this.backgroundcolor=r.backgroundcolor,n.updiagonalarrow&&(n.updiagonalstrike=!1),n.box&&(n.left=!1,n.right=!1,n.bottom=!1,n.top=!1),this.notation=n,this.shadow=null!=(i=r.shadow)?i:"none",this.strokeWidth=null!=(a=r.strokeWidth)?a:"0.06em",this.strokeWidth||(this.strokeWidth="0.06em"),this.strokeStyle=r.strokeStyle,this.svgStrokeStyle=r.svgStrokeStyle,this.strokeColor=r.strokeColor,this.borderStyle=r.borderStyle,this.padding=r.padding,this.captureSelection=!1}static fromJson(t){return new e(t.command,t.body,t.notation,t)}toJson(){return Jk(Zk({},super.toJson()),{notation:this.notation,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}_serialize(e){var t;if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let n=$A(this.command,this.mode);if(null!=n&&n.serialize)return n.serialize(this,e);let r=null!=(t=this.command)?t:"";if("\\enclose"===this.command){r+="{"+Object.keys(this.notation).join(" ")+"}";let e="",t="";this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(e+=t+'mathbackground="'+this.backgroundcolor+'"',t=","),this.shadow&&"auto"!==this.shadow&&(e+=t+'shadow="'+this.shadow+'"',t=","),this.strokeWidth||"solid"!==this.strokeStyle?(e+=t+this.borderStyle,t=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(e+=t+'mathcolor="'+this.strokeColor+'"',t=","),e&&(r+="[".concat(e,"]"))}return IL(r,this.bodyToLatex(e))}render(e){let t=new pO({parent:e},this.style),n=gO.createBox(t,this.body);if(!n)return null;let r=function(e){if(!e)return"1px";let t=e.match(/([0-9][a-zA-Z\%]+)/);return null===t?"1px":t[1]}(this.borderStyle),i=t.toEm(this.padding&&"auto"!==this.padding?{string:this.padding}:{register:"fboxsep"});n.setStyle("position","relative"),n.setStyle("display","inline-block"),n.setStyle("top",i,"em"),n.setStyle("height",n.height+n.depth,"em"),n.setStyle("width",n.width,"em");let a=new GL(null,{classes:"ML__notation"}),o=n.height+n.depth+2*i,s=n.width+2*i,l="";if(this.notation.horizontalstrike&&(l+=this.line(3,50,97,50)),this.notation.verticalstrike&&(l+=this.line(50,3,50,97)),this.notation.updiagonalstrike&&(l+=this.line(3,97,97,3)),this.notation.downdiagonalstrike&&(l+=this.line(3,3,97,97)),this.notation.updiagonalarrow){l+=this.line(i.toString(),(i+n.depth+n.height).toString(),(i+n.width).toString(),i.toString());let e=.03*Math.sqrt(s*s+o*o)*1,t=n.width*e,r=(n.depth+n.height)*e,a=i+n.width,u=i;u+r-.4*t<0&&(u=.4*t-r),l+='<polygon points="',l+="".concat(a,",").concat(u," ").concat(a-t-.4*r,",").concat(u+r-.4*t," "),l+="".concat(a-.7*t,",").concat(u+.7*r," ").concat(a-t+.4*r,",").concat(u+r+.4*t," "),l+="".concat(a,",").concat(u),l+="\" stroke='none' fill=\"".concat(this.strokeColor,'"'),l+="/>"}let u=0;if(this.notation.phasorangle){let e=Wz(t),r=(n.height+n.depth+2*e+i).toString(),a=(n.height+n.depth)/2;l+=this.line(i.toString(),r,(i+a+n.width).toString(),r),l+=this.line(i.toString(),r,(i+a).toString(),(i-e).toString()),o+=e,u=a,n.left+=o/2-i}if(this.notation.longdiv){let e=Wz(t);o+=e,l+=this.line(i.toString(),i.toString(),(i+n.width).toString(),i.toString());let r=.3;u=r+e,n.left+=r+e,n.setTop(i+e),l+='<path d="',l+="M ".concat(i," ").concat(i,"  a").concat(r," ").concat((n.depth+n.height+2*e)/2,", 0, 1, 1, 0 ").concat(n.depth+n.height+2*e,' "'),l+=' stroke-width="'.concat(function(e){return(Math.floor(100*e.metrics.sqrtRuleThickness/e.scalingFactor)/100/10).toString()+"em"}(t),'" stroke="').concat(this.strokeColor,'" fill="none"'),l+="/>"}if(a.width=n.width+2*i+u,a.height=n.height+i,a.depth=n.depth+i,a.setStyle("box-sizing","border-box"),a.setStyle("left","calc(-".concat(r," / 2 )")),a.setStyle("height","".concat(Math.floor(100*o)/100,"em")),a.setStyle("top","calc(".concat(r," / 2 )")),this.backgroundcolor&&a.setStyle("background-color",this.backgroundcolor),this.notation.box&&a.setStyle("border","1px solid red"),this.notation.actuarial&&(a.setStyle("border-top",this.borderStyle),a.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(a.setStyle("border-bottom",this.borderStyle),a.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(a.setStyle("border-radius","8px"),a.setStyle("border",this.borderStyle)),this.notation.circle&&(a.setStyle("border-radius","50%"),a.setStyle("border",this.borderStyle)),this.notation.top&&a.setStyle("border-top",this.borderStyle),this.notation.left&&a.setStyle("border-left",this.borderStyle),this.notation.right&&a.setStyle("border-right",this.borderStyle),this.notation.bottom&&a.setStyle("border-bottom",this.borderStyle),l){let e="";"auto"===this.shadow&&(e+="filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)"),"none"!==this.shadow&&(e+="filter: drop-shadow(".concat(this.shadow,")")),e+=' stroke-width="'.concat(this.strokeWidth,'" stroke="').concat(this.strokeColor,'"'),e+=' stroke-linecap="round"',this.svgStrokeStyle&&(e+=' stroke-dasharray="'.concat(this.svgStrokeStyle,'"')),a.svgStyle=e,a.svgOverlay=l}let c=new GL([a,n]);return c.setStyle("position","relative"),c.setStyle("vertical-align",i,"em"),c.setStyle("height","".concat(Math.floor(100*(n.height+n.depth+2*i))/100,"em")),c.setStyle("display","inline-block"),c.height=a.height,c.depth=a.depth,c.width=a.width-2*i,c.left=i,c.right=i,this.caret&&(c.caret=this.caret),c.wrap(t)}line(e,t,n,r){return'<line x1="'.concat(Hz(e),'"  y1="').concat(Hz(t),'" x2="').concat(Hz(n),'" y2="').concat(Hz(r),'" vector-effect="non-scaling-stroke"></line>')}};function Hz(e){return"number"==typeof e?"".concat(Math.floor(100*e)/100,"%"):e}function Wz(e){let t=e.isDisplayStyle?yL:e.metrics.defaultRuleThickness;return e.metrics.defaultRuleThickness+e.scalingFactor*t/4}var Gz=class e extends gO{constructor(e,t,n){var r,i,a;super(Jk(Zk({},n),{type:"genfrac",displayContainsHighlight:!0})),this.above=e,this.below=t,this.hasBarLine=null==(r=null==n?void 0:n.hasBarLine)||r,this.continuousFraction=null!=(i=null==n?void 0:n.continuousFraction)&&i,this.align=null!=(a=null==n?void 0:n.align)?a:"center",this.numerPrefix=null==n?void 0:n.numerPrefix,this.denomPrefix=null==n?void 0:n.denomPrefix,this.mathstyleName=null==n?void 0:n.mathstyleName,this.leftDelim=null==n?void 0:n.leftDelim,this.rightDelim=null==n?void 0:n.rightDelim,this.fractionNavigationOrder=null==n?void 0:n.fractionNavigationOrder}static fromJson(t){return new e(t.above,t.below,t)}toJson(){let e={};return this.continuousFraction&&(e.continuousFraction=!0),"center"!==this.align&&(e.align=this.align),this.numerPrefix&&(e.numerPrefix=this.numerPrefix),this.denomPrefix&&(e.denomPrefix=this.denomPrefix),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.hasBarLine||(e.hasBarLine=!1),this.mathstyleName&&(e.mathstyleName=this.mathstyleName),this.fractionNavigationOrder&&(e.fractionNavigationOrder=this.fractionNavigationOrder),Zk(Zk({},super.toJson()),e)}get children(){if(this._children)return this._children;let e=[];if("denominator-numerator"===this.fractionNavigationOrder){for(let t of this.below)e.push(...t.children),e.push(t);for(let t of this.above)e.push(...t.children),e.push(t)}else{for(let t of this.above)e.push(...t.children),e.push(t);for(let t of this.below)e.push(...t.children),e.push(t)}return this._children=e,e}render(e){var t,n;let r,i,a=new pO({parent:e,mathstyle:this.mathstyleName},this.style),o=a.metrics,s=new pO({parent:a,mathstyle:this.continuousFraction?"":"numerator"},this.style),l=this.numerPrefix?new GL([new GL(this.numerPrefix),gO.createBox(s,this.above)],{isTight:s.isTight,type:"ignore"}):null!=(t=gO.createBox(s,this.above,{type:"ignore"}))?t:new GL(null,{type:"ignore"}),u=new pO({parent:a,mathstyle:this.continuousFraction?"":"denominator"},this.style),c=this.denomPrefix?new GL([new GL(this.denomPrefix),gO.createBox(u,this.below,{type:"ignore"})]):null!=(n=gO.createBox(u,this.below,{type:"ignore"}))?n:new GL(null,{type:"ignore"}),d=this.hasBarLine?o.defaultRuleThickness:0,p=0;a.isDisplayStyle?(r=s.metrics.num1,p=d>0?3*d:7*d,i=u.metrics.denom1):(d>0?(r=s.metrics.num2,p=d):(r=s.metrics.num3,p=3*o.defaultRuleThickness),i=u.metrics.denom2);let h=[];this.isSelected&&h.push("ML__selected");let f,m=l.depth,g=c.height;if(d<=0){let e=r-m-(g-i);e<p&&(r+=(p-e)/2,i+=(p-e)/2),f=new eO({individualShift:[{box:l,shift:-r,classes:[...h,Zz(this.align)]},{box:c,shift:i,classes:[...h,Zz(this.align)]}]}).wrap(a)}else{let e=new GL(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});e.softWidth=Math.max(l.width,c.width),e.height=d/2,e.depth=d/2;let t=vL+d/2;r<p+m+t&&(r=p+m+t);let n=vL-d/2;i<p+g-n&&(i=p+g-n),f=new eO({individualShift:[{box:c,shift:i,classes:[...h,Zz(this.align)]},{box:e,shift:-n,classes:h},{box:l,shift:-r,classes:[...h,Zz(this.align)]}]}).wrap(a)}let v=a.isDisplayStyle?o.delim1:o.delim2,y=this.leftDelim?this.bind(e,hz("open",this.leftDelim,v,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):mz(a,"ML__open"),b=null;b=this.continuousFraction?new GL(null,{type:"close"}):this.rightDelim?this.bind(e,hz("close",this.rightDelim,v,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):mz(a,"ML__close");let x=new GL([y,f,b],{isTight:a.isTight,type:"inner",classes:"ML__mfrac"}),D=this.bind(e,x);return this.caret&&(D.caret=this.caret),this.attachSupsub(e,{base:D})}};function Zz(e){var t;return null!=(t={left:"ML__left",right:"ML__right",center:"ML__center"}[e])?t:"ML__center"}var Jz=class e extends gO{constructor(e,t){var n;super({type:"latex",value:e,mode:"latex"}),this.isSuggestion=null!=(n=null==t?void 0:t.isSuggestion)&&n,this.isError=!1}static fromJson(t){let n=new e(t.value);return t.isSuggestion&&(n.isSuggestion=!0),t.isError&&(n.isError=!0),n}toJson(){let e={};return this.isSuggestion&&(e.isSuggestion=!0),this.isError&&(e.isError=!0),Zk({type:"latex",value:this.value},e)}get computedStyle(){return{}}render(e){let t=new GL(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return t?(this.caret&&(t.caret=this.caret),this.bind(e,t)):null}},Xz=class e extends gO{constructor(e){super({type:"latexgroup",mode:"latex"}),this.body=[...e].map((e=>new Jz(e))),this.skipBoundary=!1}static fromJson(t){return new e("")}toJson(){return super.toJson()}render(e){let t=gO.createBox(e,this.body);return t?(this.caret&&(t.caret=this.caret),this.bind(e,t)):null}_serialize(e){var t,n;return null!=(n=null==(t=this.body)?void 0:t.map((e=>e.value)).join(""))?n:""}},Yz=class e extends gO{constructor(e,t){super(Jk(Zk({},t),{type:"extensible-symbol",isFunction:null==t?void 0:t.isFunction})),this.value=e,this.variant=null==t?void 0:t.variant,this.subsupPlacement=null==t?void 0:t.limits}static fromJson(t){return new e(t.symbol,t)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.isExtensibleSymbol&&(e.isExtensibleSymbol=!0),this.value&&(e.symbol=this.value),e}render(e){var t;let n=e.isDisplayStyle&&"\\smallint"!==this.value,r=new GL(this.value,{fontFamily:n?"Size2-Regular":"Size1-Regular",classes:"ML__op-symbol "+(n?"ML__large-op":"ML__small-op"),type:"op",maxFontSize:e.scalingFactor,isSelected:this.isSelected});if(!r)return null;r.right=r.italic;let i=(r.height-r.depth)/2-vL*e.scalingFactor,a=r.italic;r.setTop(i);let o=r;if(this.superscript||this.subscript){let n=null!=(t=this.subsupPlacement)?t:"auto";o="over-under"===n||"auto"===n&&e.isDisplayStyle?this.attachLimits(e,{base:r,baseShift:i,slant:a}):this.attachSupsub(e,{base:r})}return new GL(this.bind(e,o),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let t=$A(this.command,this.mode);if(null!=t&&t.serialize)return t.serialize(this,e);let n=[];return n.push(this.command),this.explicitSubsupPlacement&&("over-under"===this.subsupPlacement&&n.push("\\limits"),"adjacent"===this.subsupPlacement&&n.push("\\nolimits"),"auto"===this.subsupPlacement&&n.push("\\displaylimits")),n.push(this.supsubToLatex(e)),zL(n)}},Qz=class e extends gO{constructor(e){let t=e.body;super(Jk(Zk({},e),{type:"overlap",body:"string"==typeof t?[new gO({value:t})]:t,style:null==e?void 0:e.style})),this.skipBoundary=!0,this.align=null==e?void 0:e.align,this.boxType=null==e?void 0:e.boxType}static fromJson(t){return new e(t)}toJson(){let e={};return this.align&&(e.align=this.align),this.boxType&&(e.boxType=this.boxType),Zk(Zk({},super.toJson()),e)}render(e){let t=gO.createBox(e,this.body,{classes:"ML__inner"});return t?(this.caret&&(t.caret=this.caret),this.bind(e,new GL([t,new GL(null,{classes:"ML__fix"})],{classes:"right"===this.align?"ML__rlap":"ML__llap",type:this.boxType}))):null}},eI=class e extends gO{constructor(e){var t,n,r,i;super({type:"overunder",command:e.command,style:e.style,mode:e.mode,body:e.body,skipBoundary:null==(t=e.skipBoundary)||t}),this.subsupPlacement=e.supsubPlacement,this.svgAbove=e.svgAbove,this.svgBelow=e.svgBelow,this.svgBody=e.svgBody,this.above=e.above,this.below=e.below,this.boxType=null!=(n=e.boxType)?n:"ord",this.paddedBody=null!=(r=e.paddedBody)&&r,this.paddedLabels=null!=(i=e.paddedLabels)&&i}static fromJson(t){return new e(t)}toJson(){let e=super.toJson();return this.skipBoundary||(e.skipBoundary=!1),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.svgAbove&&(e.svgAbove=this.svgAbove),this.svgBelow&&(e.svgBelow=this.svgBelow),this.svgBody&&(e.svgBody=this.svgBody),"ord"!==this.boxType&&(e.boxType=this.boxType),this.paddedBody&&(e.paddedBody=!0),this.paddedLabels&&(e.paddedLabels=!0),e}render(e){let t=this.svgBody?YL(this.svgBody):gO.createBox(e,this.body,{type:"ignore"}),n=new pO({parent:e,mathstyle:"scriptstyle"},this.style),r=null;this.svgAbove?r=YL(this.svgAbove):this.above&&(r=gO.createBox(n,this.above,{type:"ignore"}));let i=null;this.svgBelow?i=YL(this.svgBelow):this.below&&(i=gO.createBox(n,this.below,{type:"ignore"})),this.paddedBody&&(t=new GL([mz(e,"ML__open"),t,mz(e,"ML__close")],{type:"ignore"}));let a=function(e,t){if(!t.base)return null;if(!t.above&&!t.below){let e=new GL(t.base,{type:t.type});return e.setStyle("position","relative"),e}let n=0;t.above&&(n=e.metrics.bigOpSpacing5);let r=null,i=t.base,a=0,o=["ML__center"];if(t.paddedAboveBelow&&o.push("ML__label_padding"),t.below&&t.above){let s=e.metrics.bigOpSpacing5+t.below.height+t.below.depth+i.depth+a;r=new eO({bottom:s,children:[e.metrics.bigOpSpacing5,{box:t.below,classes:o},{box:i,classes:["ML__center"]},n,{box:t.above,classes:o},e.metrics.bigOpSpacing5]})}else t.below?r=new eO({top:i.height-a,children:[e.metrics.bigOpSpacing5,{box:t.below,classes:o},{box:i,classes:["ML__center"]}]}):t.above&&(r=new eO({bottom:i.depth+a,children:[{box:i,classes:["ML__center"]},n,{box:t.above,classes:o},e.metrics.bigOpSpacing5]}));return new GL(r,{type:t.type})}(e,{base:t,above:r,below:i,type:"bin"===this.boxType||"rel"===this.boxType?this.boxType:"ord",paddedAboveBelow:this.paddedLabels});return a?(a="over-under"===this.subsupPlacement?this.attachLimits(e,{base:a,type:a.type}):this.attachSupsub(e,{base:a}),this.caret&&(a.caret=this.caret),this.bind(e,a)):null}};var tI=class e extends gO{constructor(e){var t,n,r,i;super(Jk(Zk({},e),{type:"phantom"})),this.captureSelection=!0,this.isInvisible=null!=(t=e.isInvisible)&&t,this.smashDepth=null!=(n=e.smashDepth)&&n,this.smashHeight=null!=(r=e.smashHeight)&&r,this.smashWidth=null!=(i=e.smashWidth)&&i}static fromJson(t){return new e(t)}toJson(){let e={};return this.isInvisible&&(e.isInvisible=!0),this.smashDepth&&(e.smashDepth=!0),this.smashHeight&&(e.smashHeight=!0),this.smashWidth&&(e.smashWidth=!0),Zk(Zk({},super.toJson()),e)}render(e){let t=new pO({parent:e,isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return this.isInvisible,gO.createBox(t,this.body,{classes:"ML__inner"});let n=gO.createBox(this.isInvisible?t:e,this.body);if(!n)return null;if(this.smashWidth){let t=new GL(null,{classes:"ML__fix"});return new GL([n,t],{classes:"ML__rlap"}).wrap(e)}if(!this.smashHeight&&!this.smashDepth)return n;if(this.smashHeight&&(n.height=0),this.smashDepth&&(n.depth=0),n.children)for(let r of n.children)this.smashHeight&&(r.height=0),this.smashDepth&&(r.depth=0);return new eO({firstBaseline:[{box:n}]},{type:n.type}).wrap(e)}},nI=class e extends gO{constructor(e){var t;super(Zk({type:"spacing"},e)),this.width=null==e?void 0:e.width,this._braced=null!=(t=null==e?void 0:e.braced)&&t}static fromJson(t){return new e(t)}toJson(){let e=super.toJson();return void 0!==this.width&&(e.width=this.width),this._braced&&(e.braced=!0),e}render(e){var t;if("space"===this.command)return new GL("math"===this.mode?null:" ");let n;if(void 0!==this.width)n=new GL(null,{classes:"ML__mspace"}),n.left=e.toEm(this.width);else{let e=null!=(t={"\\qquad":"ML__qquad","\\quad":"ML__quad","\\enspace":"ML__enspace","\\;":"ML__thickspace","\\:":"ML__mediumspace","\\>":"ML__mediumspace","\\,":"ML__thinspace","\\!":"ML__negativethinspace"}[this.command])?t:"ML__mediumspace";n=new GL(null,{classes:e})}return n=this.bind(e,n),this.caret&&(n.caret=this.caret),n}_serialize(e){var t;if(!e.expandMacro&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let n=$A(this.command,this.mode);if(null!=n&&n.serialize)return n.serialize(this,e);let r=null!=(t=this.command)?t:"";return void 0===this.width?r:this._braced&&!("register"in this.width)?"".concat(r,"{").concat(sO(this.width),"}"):"".concat(r).concat(sO(this.width))}},rI=class e extends gO{constructor(e){var t;super(Jk(Zk({},e),{type:"surd",mode:null!=(t=e.mode)?t:"math",style:e.style,displayContainsHighlight:!0,body:e.body})),this.above=e.index}static fromJson(t){return new e(Jk(Zk({},t),{index:t.above}))}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let t=$A(this.command,this.mode);if(null!=t&&t.serialize)return t.serialize(this,e);let n=this.command,r=this.bodyToLatex(e);return this.above&&!this.hasEmptyBranch("above")?IL("".concat(n,"[").concat(this.aboveToLatex(e),"]"),r):/^[0-9]$/.test(r)?"".concat(n).concat(r):IL(n,r)}get children(){if(this._children)return this._children;let e=[];if(this.above)for(let t of this.above)e.push(...t.children),e.push(t);if(this.body)for(let t of this.body)e.push(...t.children),e.push(t);return this._children=e,e}render(e){var t;let n=new pO({parent:e,mathstyle:"cramp"},this.style),r=null!=(t=gO.createBox(n,this.body,{type:"inner"}))?t:new GL(null),i=n.scalingFactor,a=n.metrics.defaultRuleThickness/i,o=e.isDisplayStyle?yL:a,s=new GL(null,{classes:"ML__sqrt-line",style:this.style});s.height=a,s.softWidth=r.width;let l=i*(a+o/4),u=Math.max(2*i*o,r.height+r.depth)+l+a,c=new pO({parent:e},this.style),d=this.bind(c,new GL(hz("inner","\\surd",u,!1,c,{isSelected:this.isSelected}),{isSelected:this.isSelected,classes:"ML__sqrt-sign",style:this.style}));if(!d)return null;let p=d.height+d.depth-a;p>r.height+r.depth+l&&(l=(l+p-(r.height+r.depth))/2),d.setTop(d.height-r.height-l);let h=this.bind(e,new eO({firstBaseline:[{box:new GL(r)},l-2*a,{box:s},a]})),f=gO.createBox(new pO({parent:e,mathstyle:"scriptscriptstyle"}),this.above,{type:"ignore"});if(!f){let t=new GL([d,h],{classes:this.containsCaret?"ML__contains-caret":"",type:"inner"});return t.setStyle("display","inline-block"),t.setStyle("height",t.height+t.depth,"em"),this.caret&&(t.caret=this.caret),this.bind(e,t)}let m=new eO({shift:-.6*(Math.max(d.height,h.height)-Math.max(d.depth,h.depth)),children:[{box:f}]}),g=new GL([new GL(m,{classes:"ML__sqrt-index",type:"ignore"}),d,h],{type:"inner",classes:this.containsCaret?"ML__contains-caret":""});return g.height=d.height,g.depth=d.depth,this.caret&&(g.caret=this.caret),this.bind(e,g)}},iI=class extends GL{constructor(e){super(null,{type:"skip"}),this._width=e}toMarkup(){return'<span style="display:inline-block;width:'.concat(Math.ceil(100*this.width)/100,'em"></span>')}};function aI(e,t){if(!e.parent)return;let n=e.parent.children,r=n.indexOf(e),i=r-1;for(;i>=0&&"ignore"===n[i].type;)i-=1;i<0&&e.parent.parent&&"lift"===e.parent.type?aI(e.parent,t):r>0&&"skip"===n[r-1].type?n[r-1].width+=t:n.splice(r,0,new iI(t))}var oI={ord:{op:3,bin:4,rel:5,inner:3},op:{ord:3,op:3,rel:5,inner:3},bin:{ord:4,op:4,open:4,inner:4},rel:{ord:5,op:5,open:5,inner:5},close:{op:3,bin:4,rel:5,inner:3},punct:{ord:3,op:3,rel:3,open:3,punct:3,inner:3},inner:{ord:3,op:3,bin:4,rel:5,open:3,punct:3,inner:3}},sI={ord:{op:3},op:{ord:3,op:3},close:{op:3},inner:{op:3}};function lI(e,t){if(!e.children)return e;let n=e.children;!function(e){uI(e,((e,t)=>{"bin"===t.type&&(!e||/^(middle|bin|op|rel|open|punct)$/.test(e.type))&&(t.type="ord"),"bin"===(null==e?void 0:e.type)&&/^(rel|close|punct)$/.test(t.type)&&(e.type="ord"),"ignore"!==t.type&&(e=t)}))}(n);let r=t.getRegisterAsEm("thinmuskip"),i=t.getRegisterAsEm("medmuskip"),a=t.getRegisterAsEm("thickmuskip");return uI(n,((e,t)=>{var n,o,s;if(!e)return;let l=e.type,u=t.isTight?null!=(n=sI[l])?n:null:null!=(o=oI[l])?o:null,c=null!=(s=null==u?void 0:u[t.type])?s:null;3===c&&aI(t,r),4===c&&aI(t,i),5===c&&aI(t,a)})),e}function uI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e)return n;e=[...e];for(let r of e)"lift"===r.type?n=uI(r.children,t,n):"ignore"===r.type?uI(r.children,t):(t(n,r),uI(r.children,t),n=r);return n}var cI=class e extends gO{constructor(e){super({type:"tooltip",command:e.command,mode:e.mode,style:e.style,body:e.body,displayContainsHighlight:!0}),this.tooltip=new gO({type:"root",mode:e.content,body:e.tooltip,style:{}}),this.skipBoundary=!0,this.captureSelection=!1}static fromJson(t){return new e(Jk(Zk({},t),{tooltip:pI(t.tooltip)}))}toJson(){var e;let t=null==(e=this.tooltip.body)?void 0:e.filter((e=>"first"!==e.type)).map((e=>e.toJson()));return Jk(Zk({},super.toJson()),{tooltip:t})}render(e){let t=gO.createBox(new pO,this.body);if(!t)return null;let n=new pO({parent:e,mathstyle:"displaystyle"},{fontSize:5}),r=JL(lI(new GL(this.tooltip.render(n),{classes:"ML__tooltip-content"}),n)),i=new GL([r,t],{classes:"ML__tooltip-container"});return this.caret&&(i.caret=this.caret),this.bind(e,i)}},dI=class e extends gO{constructor(e,t){super(Jk(Zk({},t),{type:"operator",isFunction:null==t?void 0:t.isFunction})),this.value=e,this.variant=null==t?void 0:t.variant,this.variantStyle=null==t?void 0:t.variantStyle,this.subsupPlacement=null==t?void 0:t.limits}static fromJson(t){return new e(t.symbol,t)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.variantStyle&&(e.variantStyle=this.variantStyle),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.value&&(e.symbol=this.value),e}render(e){var t;let n=new GL(this.value,{type:"op",mode:"math",maxFontSize:e.scalingFactor,style:{variant:this.variant,variantStyle:this.variantStyle},isSelected:this.isSelected,letterShapeStyle:e.letterShapeStyle}),r=n;if(this.superscript||this.subscript){let i=null!=(t=this.subsupPlacement)?t:"auto";r="over-under"===i||"auto"===i&&e.isDisplayStyle?this.attachLimits(e,{base:n}):this.attachSupsub(e,{base:n})}return new GL(this.bind(e,r),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"ML__op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles||e.skipPlaceholders)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let t=$A(this.command,this.mode);if(null!=t&&t.serialize)return t.serialize(this,e);let n=[this.command];return this.explicitSubsupPlacement&&("over-under"===this.subsupPlacement&&n.push("\\limits"),"adjacent"===this.subsupPlacement&&n.push("\\nolimits"),"auto"===this.subsupPlacement&&n.push("\\displaylimits")),n.push(this.supsubToLatex(e)),zL(n)}};function pI(e){if(Qk(e))return e.map((e=>pI(e)));if("string"==typeof e)return gO.fromJson(e);e=Zk({},e);for(let r of hO)e[r]&&(e[r]=pI(e[r]));e.args&&(e.args=function(e){if(e&&Array.isArray(e))return e.map((e=>"<null>"===e?null:"object"==typeof e&&"group"in e?{group:e.group.map((e=>pI(e)))}:"object"==typeof e&&"atoms"in e?e.atoms.map((e=>pI(e))):e))}(e.args)),e.array&&(e.array=pI(e.array));let t,n=e.type;"accent"===n&&(t=QO.fromJson(e)),"array"===n&&(t=wz.fromJson(e)),"box"===n&&(t=Ez.fromJson(e)),"chem"===n&&(t=Rz.fromJson(e)),"composition"===n&&(t=kz.fromJson(e)),"delim"===n&&(t=Vz.fromJson(e)),"enclose"===n&&(t=$z.fromJson(e)),"error"===n&&(t=Az.fromJson(e)),"extensible-symbol"===n&&(t=Yz.fromJson(e)),"genfrac"===n&&(t=Gz.fromJson(e)),"group"===n&&(t=Nz.fromJson(e)),"latex"===n&&(t=Jz.fromJson(e)),"latexgroup"===n&&(t=Xz.fromJson(e)),"leftright"===n&&(t=Mz.fromJson(e)),"macro"===n&&(t=Tz.fromJson(e)),"macro-argument"===n&&(t=Bz.fromJson(e)),"operator"===n&&(t=dI.fromJson(e)),"overlap"===n&&(t=Qz.fromJson(e)),"overunder"===n&&(t=eI.fromJson(e)),"placeholder"===n&&(t=gz.fromJson(e)),"prompt"===n&&(t=Lz.fromJson(e)),"phantom"===n&&(t=tI.fromJson(e)),"sizeddelim"===n&&(t=Uz.fromJson(e)),"spacing"===n&&(t=nI.fromJson(e)),"subsup"===n&&(t=Oz.fromJson(e)),"surd"===n&&(t=rI.fromJson(e)),"text"===n&&(t=bO.fromJson(e)),"tooltip"===n&&(t=cI.fromJson(e)),t||(!n||["first","mbin","mrel","mclose","minner","mop","mopen","mord","mpunct","root","space"].includes(n),"".concat(n),t=gO.fromJson(e));for(let r of hO)e[r]&&t.setChildren(e[r],r);return void 0!==e.verbatimLatex&&(t.verbatimLatex=e.verbatimLatex),e.subsupPlacement&&(t.subsupPlacement=e.subsupPlacement),e.explicitSubsupPlacement&&(t.explicitSubsupPlacement=!0),e.isFunction&&(t.isFunction=!0),e.isExtensibleSymbol&&(t.isExtensibleSymbol=!0),e.skipBoundary&&(t.skipBoundary=!0),e.captureSelection&&(t.captureSelection=!0),t}var hI={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},fI={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^\u2019\u2018]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},mI=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,gI=[/^[a-z]$/,/^[A-Z]$/,mI,/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/],vI={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};function yI(e){if(!e)return"";let{style:t}=e;if(void 0===t.variant)return"";let n=t.variant;return!["calligraphic","fraktur","double-struck","script","monospace","sans-serif"].includes(t.variant)&&t.variantStyle&&"up"!==t.variantStyle&&(n+="-"+t.variantStyle),n}function bI(e,t){return KL(e,"fontSeries").map((e=>{let n=function(e,t){return KL(e,"fontShape").map((e=>{let n=function(e,t){return e.map((e=>e._serialize(t)))}(e,t),{fontShape:r}=e[0].style,i="";return"it"===r&&(i="\\textit"),"sl"===r&&(i="\\textsl"),"sc"===r&&(i="\\textsc"),"n"===r&&(i="\\textup"),!i&&r?"{".concat(IL("\\fontshape",r)).concat(zL(n),"}"):i?IL(i,zL(n)):zL(n)}))}(e,t),{fontSeries:r}=e[0].style,i="";return"b"===r&&(i="\\textbf"),"l"===r&&(i="\\textlf"),"m"===r&&(i="\\textmd"),r&&!i?"{".concat(IL("\\fontseries",r)).concat(zL(n),"}"):i?IL(i,zL(n)):zL(n)}))}function xI(e,t,n){return KL(e,"fontFamily").map((e=>{var r,i;let a=function(e,t){return KL(e,"fontSize").map((e=>{var n,r;let i=bI(e,t),a=null!=(r=["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][null!=(n=e[0].style.fontSize)?n:""])?r:"";return a?"".concat(a," ").concat(zL(i)):zL(i)}))}(e,t),o=null!=(i={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[null!=(r=e[0].style.fontFamily)?r:""])?i:"";return o?"\\".concat(o,"{").concat(zL(a),"}"):e[0].style.fontFamily?"{\\fontfamily{".concat(e[0].style.fontFamily,"} ").concat(zL(a),"}"):n?"\\text{".concat(zL(a),"}"):zL(a)}))}new class extends RL{constructor(){super("math")}createAtom(e,t,n){var r,i,a,o,s,l;if(null===t)return new gO({type:"mord",mode:"math",command:e,value:e,style:n});let u=null!=(a=null==(i=globalThis.MathfieldElement)?void 0:i.isFunction(null!=(r=t.command)?r:e))&&a;if("symbol"===t.definitionType){let r=new gO({type:null!=(o=t.type)?o:"mord",mode:"math",command:null!=(s=t.command)?s:e,value:String.fromCodePoint(t.codepoint),style:n});return u&&(r.isFunction=!0),e.startsWith("\\")&&(r.verbatimLatex=e),r}let c=new gO({type:"mord",mode:"math",command:null!=(l=t.command)?l:e,value:e,style:n});return u&&(c.isFunction=!0),e.startsWith("\\")&&(c.verbatimLatex=e),c}serialize(e,t){let n=function(e,t){let{parent:n}=e[0],r=yI(n);return KL(e,"variant").map((e=>{let n=yI(e[0]),i="";n&&n!==r&&(i={calligraphic:"\\mathcal",fraktur:"\\mathfrak","double-struck":"\\mathbb",script:"\\mathscr",monospace:"\\mathtt","sans-serif":"\\mathsf",normal:"\\mathrm","normal-italic":"\\mathnormal","normal-bold":"\\mathbf","normal-bolditalic":"\\mathbfit",ams:"","ams-italic":"\\mathit","ams-bold":"\\mathbf","ams-bolditalic":"\\mathbfit",main:"","main-italic":"\\mathit","main-bold":"\\mathbf","main-bolditalic":"\\mathbfit"}[n]);let a=zL(e.map((e=>e._serialize(t))));return i?IL(i,a):a}))}(e,Jk(Zk({},t),{defaultMode:"math"}));return 0===n.length||"text"!==t.defaultMode?n:["$ ",...n," $"]}getFont(e,t){if(t.variant,t.fontFamily){let[n,r]=hI[t.fontFamily];return r&&(e.classes+=" "+r),n}let{variant:n}=t,{variantStyle:r}=t;"normal"===n&&!r&&/[\u00A3\u0131\u0237]/.test(e.value)&&(n="main",r="italic"),"normal"===n&&!r&&1===e.value.length&&gI.forEach(((n,i)=>{var a;n.test(e.value)&&"it"===vI[null!=(a=t.letterShapeStyle)?a:"tex"][i]&&(r="italic")})),"up"===r&&(r=void 0);let i=r?n+"-"+r:n,[a,o]=hI[i];return fI[n]&&!fI[n].test(e.value)?(e.value=xA(e.value,n,r),null):(mI.test(e.value)&&(e.classes+=" lcGreek"),o&&(e.classes+=" "+o),a)}};var DI={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};new class extends RL{constructor(){super("text")}createAtom(e,t,n){return t&&"symbol"===t.definitionType?new bO(e,String.fromCodePoint(t.codepoint),null!=n?n:{}):null}serialize(e,t){return xI(e,Jk(Zk({},t),{defaultMode:"text"}),"text"!==t.defaultMode)}getFont(e,t){var n,r,i,a,o;let{fontFamily:s}=t;if(DI[s]?e.classes+=" "+DI[s]:s&&e.setStyle("font-family",s),t.fontShape&&(e.classes+=" ",e.classes+=null!=(n={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[t.fontShape])?n:""),t.fontSeries){let n=t.fontSeries.match(/(.?[lbm])?(.?[cx])?/);n&&(e.classes+=" ",e.classes+=null!=(i={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[null!=(r=n[1])?r:""])?i:"",e.classes+=" ",e.classes+=null!=(o={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[null!=(a=n[2])?a:""])?o:"")}return"Main-Regular"}};new class extends RL{constructor(){super("latex")}createAtom(e){return new Jz(e)}serialize(e,t){return e.filter((e=>e instanceof Jz&&!e.isSuggestion)).map((e=>e.value))}getFont(){return null}};var wI={id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u0131"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\xce"],KeyE:["e","E","\xb4","\xb4"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\u02dd"],KeyH:["h","H","\u02d9","\xd3"],KeyI:["i","I","\u02c6","\u02c6"],KeyJ:["j","J","\u2206","\xd4"],KeyK:["k","K","\u02da","\uf8ff"],KeyL:["l","L","\xac","\xd2"],KeyM:["m","M","\xb5","\xc2"],KeyN:["n","N","\u02dc","\u02dc"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae","\u2030"],KeyS:["s","S","\xdf","\xcd"],KeyT:["t","T","\u2020","\u02c7"],KeyU:["u","U","\xa8","\xa8"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\u02db"],KeyY:["y","Y","\xa5","\xc1"],KeyZ:["z","Z","\u03a9","\xb8"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["-","_","\u2013","\u2014"],Equal:["=","+","\u2260","\xb1"],BracketLeft:["[","{","\u201c","\u201d"],BracketRight:["]","}","\u2018","\u2019"],Backslash:["\\","|","\xab","\xbb"],Semicolon:[";",":","\u2026","\xda"],Quote:["'",'"',"\xe6","\xc6"],Backquote:["`","\u02dc","`","`"],Comma:[",","<","\u2264","\xaf"],Period:[".",">","\u2265","\u02d8"],Slash:["/","?","\xf7","\xbf"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}},_I={id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","\xe1","\xc1"],KeyB:["b","B","",""],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\xe9","\xc9"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","\xed","\xcd"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","\xf8","\xd8"],KeyM:["m","M","\xb5",""],KeyN:["n","N","\xf1","\xd1"],KeyO:["o","O","\xf3","\xd3"],KeyP:["p","P","\xf6","\xd6"],KeyQ:["q","Q","\xe4","\xc4"],KeyR:["r","R","\xae",""],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\xfe","\xde"],KeyU:["u","U","\xfa","\xda"],KeyV:["v","V","",""],KeyW:["w","W","\xe5","\xc5"],KeyX:["x","X","",""],KeyY:["y","Y","\xfc","\xdc"],KeyZ:["z","Z","\xe6","\xc6"],Digit1:["1","!","\xa1","\xb9"],Digit2:["2","@","\xb2",""],Digit3:["3","#","\xb3",""],Digit4:["4","$","\xa4","\xa3"],Digit5:["5","%","\u20ac",""],Digit6:["6","^","\xbc",""],Digit7:["7","&","\xbd",""],Digit8:["8","*","\xbe",""],Digit9:["9","(","\u2018",""],Digit0:["0",")","\u2019",""],Space:[" "," ","",""],Minus:["-","_","\xa5",""],Equal:["=","+","\xd7","\xf7"],BracketLeft:["[","{","\xab",""],BracketRight:["]","}","\xbb",""],Backslash:["\\","|","\xac","\xa6"],Semicolon:[";",":","\xb6","\xb0"],Quote:["'",'"',"\xb4","\xa8"],Backquote:["`","~","",""],Comma:[",","<","\xe7","\xc7"],Period:[".",">","",""],Slash:["/","?","\xbf",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}},SI={id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}};function CI(e){let t=e.split("+"),n={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:t.pop()};return t.includes("shift")&&(n.shift=!0),t.includes("alt")&&(n.alt=!0),t.includes("ctrl")&&(n.ctrl=!0),t.includes("cmd")&&(n.cmd=!0),t.includes("win")&&(n.win=!0),t.includes("meta")&&(n.meta=!0),n}function EI(e){let t="";return e.shift&&(t+="shift+"),e.alt&&(t+="alt+"),e.ctrl&&(t+="ctrl+"),e.cmd&&(t+="cmd+"),e.win&&(t+="win+"),e.meta&&(t+="meta+"),t+e.key}var kI,AI={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},NI=[];function MI(){switch(nA()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function FI(e){(!e.platform||e.platform===MI())&&NI.push(e)}function TI(){return null!=kI?kI:NI[0]}switch(MI()){case"apple":FI(wI),FI({id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","\u2021","\u03a9"],KeyB:["b","B","\xdf","\u222b"],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\xea","\xca"],KeyF:["f","F","\u0192","\xb7"],KeyG:["g","G","\ufb01","\ufb02"],KeyH:["h","H","\xcc","\xce"],KeyI:["i","I","\xee","\xef"],KeyJ:["j","J","\xcf","\xcd"],KeyK:["k","K","\xc8","\xcb"],KeyL:["l","L","\xac","|"],KeyM:[",","?","\u221e","\xbf"],KeyN:["n","N","~","\u0131"],KeyO:["o","O","\u0153","\u0152"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xae","\u201a"],KeyS:["s","S","\xd2","\u2211"],KeyT:["t","T","\u2020","\u2122"],KeyU:["u","U","\xba","\xaa"],KeyV:["v","V","\u25ca","\u221a"],KeyW:["z","Z","\xc2","\xc5"],KeyX:["x","X","\u2248","\u2044"],KeyY:["y","Y","\xda","\u0178"],KeyZ:["w","W","\u2039","\u203a"],Digit1:["&","1","\uf8ff","\xb4"],Digit2:["\xe9","2","\xeb","\u201e"],Digit3:['"',"3","\u201c","\u201d"],Digit4:["'","4","\u2018","\u2019"],Digit5:["(","5","{","["],Digit6:["\xa7","6","\xb6","\xe5"],Digit7:["\xe8","7","\xab","\xbb"],Digit8:["!","8","\xa1","\xdb"],Digit9:["\xe7","9","\xc7","\xc1"],Digit0:["\xe0","0","\xf8","\xd8"],Space:[" "," "," "," "],Minus:[")","\xb0","}","]"],Equal:["-","_","\u2014","\u2013"],BracketLeft:["^","\xa8","\xf4","\xd4"],BracketRight:["$","*","\u20ac","\xa5"],Backslash:["`","\xa3","@","#"],Semicolon:["m","M","\xb5","\xd3"],Quote:["\xf9","%","\xd9","\u2030"],Backquote:["<",">","\u2264","\u2265"],Comma:[";",".","\u2026","\u2022"],Period:[":","/","\xf7","\\"],Slash:["=","+","\u2260","\xb1"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","\u2022","\u0178"],NumpadEqual:["=","=","=","="]}}),FI({id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\xdf",""],KeyC:["c","C","\xa9"," "],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\u20ac","\u20ac"],KeyF:["f","F","\u0192","\ufb01"],KeyG:["g","G","\uf8ff","\ufb02"],KeyH:["h","H","\u2122"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","\xb6","\xaf"],KeyK:["k","K","\xa7","\u02c7"],KeyL:["l","L"," ","\u02d8"],KeyM:["m","M","\xb5","\u02da"],KeyN:["n","N"," ","\u02d9"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae"," "],KeyS:["s","S","\u222b"," "],KeyT:["t","T","\u2020","\u2021"],KeyU:["u","U"," "," "],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\xe6","\xc6"],KeyX:["x","X","\u2211","\u203a"],KeyY:["y","Y","\xa5"," "],KeyZ:["z","Z","\u03a9","\u2039"],Digit1:["1","!","|","\u0131"],Digit2:["2",'"',"@","\u02dd"],Digit3:["3","\xb7","#","\u2022"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","\u221e","\u2030"],Digit6:["6","&","\xac"," "],Digit7:["7","/","\xf7","\u2044"],Digit8:["8","(","\u201c","\u2018"],Digit9:["9",")","\u201d","\u2019"],Digit0:["0","=","\u2260","\u2248"],Space:[" "," "," "," "],Minus:["'","?","\xb4","\xb8"],Equal:["\xa1","\xbf","\u201a","\u02db"],BracketLeft:["`","^","[","\u02c6"],BracketRight:["+","*","]","\xb1"],Backslash:["\xe7","\xc7","}","\xbb"],Semicolon:["\xf1","\xd1","~","\u02dc"],Quote:["\xb4","\xa8","{","\xab"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u201e",""],Period:[".",":","\u2026","\u2026"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["\xba","\xaa","\\","\xb0"]}}),FI({id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u2039"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\u2122"],KeyE:["e","E","\u20ac","\u2030"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\xcc"],KeyH:["h","H","\xaa","\xd3"],KeyI:["i","I","\u2044","\xdb"],KeyJ:["j","J","\xba","\u0131"],KeyK:["k","K","\u2206","\u02c6"],KeyL:["l","L","@","\ufb02"],KeyM:["m","M","\xb5","\u02d8"],KeyN:["n","N","~","\u203a"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\xab","\xbb"],KeyR:["r","R","\xae","\xb8"],KeyS:["s","S","\u201a","\xcd"],KeyT:["t","T","\u2020","\u02dd"],KeyU:["u","U","\xa8","\xc1"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\xd9"],KeyY:["z","Z","\u03a9","\u02c7"],KeyZ:["y","Y","\xa5","\u2021"],Digit1:["1","!","\xa1","\xac"],Digit2:["2",'"',"\u201c","\u201d"],Digit3:["3","\xa7","\xb6","#"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","[","\ufb01"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","\u02dc"],Digit9:["9",")","}","\xb7"],Digit0:["0","=","\u2260","\xaf"],Space:[" "," "," "," "],Minus:["\xdf","?","\xbf","\u02d9"],Equal:["\xb4","`","'","\u02da"],BracketLeft:["\xfc","\xdc","\u2022","\xb0"],BracketRight:["+","*","\xb1","\uf8ff"],Backslash:["#","'","\u2018","\u2019"],Semicolon:["\xf6","\xd6","\u0153","\u0152"],Quote:["\xe4","\xc4","\xe6","\xc6"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u221e","\u02db"],Period:[".",":","\u2026","\xf7"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","\xb0","\u201e","\u201c"],NumpadEqual:["=","=","=","="]}});break;case"windows":FI(_I),FI({id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["\xe9","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["\xe8","7","`",""],Digit8:["_","8","\\",""],Digit9:["\xe7","9","^",""],Digit0:["\xe0","0","@",""],Space:[" "," ","",""],Minus:[")","\xb0","]",""],Equal:["=","+","}",""],BracketLeft:["^","\xa8","",""],BracketRight:["$","\xa3","\xa4",""],Backslash:["*","\xb5","",""],Semicolon:["m","M","",""],Quote:["\xf9","%","",""],Backquote:["\xb2","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","\xa7","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),FI({id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","\xb7","#",""],Digit4:["4","$","~",""],Digit5:["5","%","\u20ac",""],Digit6:["6","&","\xac",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["\xa1","\xbf","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["\xe7","\xc7","}",""],Semicolon:["\xf1","\xd1","",""],Quote:["\xb4","\xa8","{",""],Backquote:["\xba","\xaa","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),FI({id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","\xb5",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"\xb2",""],Digit3:["3","\xa7","\xb3",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["\xdf","?","\\","\u1e9e"],Equal:["\xb4","`","",""],BracketLeft:["\xfc","\xdc","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["\xf6","\xd6","",""],Quote:["\xe4","\xc4","",""],Backquote:["^","\xb0","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}});break;case"linux":FI(SI),FI({id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","\u03a9"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:[",","?","\u0301","\u030b"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["z","Z","\xab","<"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["w","W","\u0142","\u0141"],Digit1:["&","1","\xb9","\xa1"],Digit2:["\xe9","2","~","\u215b"],Digit3:['"',"3","#","\xa3"],Digit4:["'","4","{","$"],Digit5:["(","5","[","\u215c"],Digit6:["-","6","|","\u215d"],Digit7:["\xe8","7","`","\u215e"],Digit8:["_","8","\\","\u2122"],Digit9:["\xe7","9","^","\xb1"],Digit0:["\xe0","0","@","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:[")","\xb0","]","\xbf"],Equal:["=","+","}","\u0328"],BracketLeft:["\u0302","\u0308","\u0308","\u030a"],BracketRight:["$","\xa3","\xa4","\u0304"],Backslash:["*","\xb5","\u0300","\u0306"],Semicolon:["m","M","\xb5","\xba"],Quote:["\xf9","%","\u0302","\u030c"],Backquote:["\xb2","~","\xac","\xac"],Comma:[";",".","\u2500","\xd7"],Period:[":","/","\xb7","\xf7"],Slash:["!","\xa7","\u0323","\u0307"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"]}}),FI({id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe6","\xc6"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:["m","M","\xb5","\xba"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["q","Q","@","\u03a9"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["w","W","\u0142","\u0141"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["z","Z","\xab","<"],Digit1:["1","!","|","\xa1"],Digit2:["2",'"',"@","\u215b"],Digit3:["3","\xb7","#","\xa3"],Digit4:["4","$","~","$"],Digit5:["5","%","\xbd","\u215c"],Digit6:["6","&","\xac","\u215d"],Digit7:["7","/","{","\u215e"],Digit8:["8","(","[","\u2122"],Digit9:["9",")","]","\xb1"],Digit0:["0","=","}","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:["'","?","\\","\xbf"],Equal:["\xa1","\xbf","\u0303","~"],BracketLeft:["\u0300","\u0302","[","\u030a"],BracketRight:["+","*","]","\u0304"],Backslash:["\xe7","\xc7","}","\u0306"],Semicolon:["\xf1","\xd1","~","\u030b"],Quote:["\u0301","\u0308","{","{"],Backquote:["\xba","\xaa","\\","\\"],Comma:[",",";","\u2500","\xd7"],Period:[".",":","\xb7","\xf7"],Slash:["-","_","\u0323","\u0307"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}}),FI({id:"linux.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","\xe6","\xc6"],KeyB:["b","B","\u201c","\u2018"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\u20ac"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0323","\u0307"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:["m","M","\xb5","\xba"],KeyN:["n","N","\u201d","\u2019"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["q","Q","@","\u03a9"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\u017f","\u1e9e"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201e","\u201a"],KeyW:["w","W","\u0142","\u0141"],KeyX:["x","X","\xab","\u2039"],KeyY:["z","Z","\u2190","\xa5"],KeyZ:["y","Y","\xbb","\u203a"],Digit1:["1","!","\xb9","\xa1"],Digit2:["2",'"',"\xb2","\u215b"],Digit3:["3","\xa7","\xb3","\xa3"],Digit4:["4","$","\xbc","\xa4"],Digit5:["5","%","\xbd","\u215c"],Digit6:["6","&","\xac","\u215d"],Digit7:["7","/","{","\u215e"],Digit8:["8","(","[","\u2122"],Digit9:["9",")","]","\xb1"],Digit0:["0","=","}","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:["\xdf","?","\\","\xbf"],Equal:["\u0301","\u0300","\u0327","\u0328"],BracketLeft:["\xfc","\xdc","\u0308","\u030a"],BracketRight:["+","*","~","\xaf"],Backslash:["#","'","\u2019","\u0306"],Semicolon:["\xf6","\xd6","\u030b","\u0323"],Quote:["\xe4","\xc4","\u0302","\u030c"],Backquote:["\u0302","\xb0","\u2032","\u2033"],Comma:[",",";","\xb7","\xd7"],Period:[".",":","\u2026","\xf7"],Slash:["-","_","\u2013","\u2014"],PrintScreen:["","","",""],PageUp:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",",","",","],IntlBackslash:["<",">","|","\u0331"],AltRight:["\r","\r","\r","\r"],MetaRight:[".",".",".","."]}})}function BI(e){var t;let n=/macos|ios/.test(nA()),r=e.split("+"),i="";for(let a of r)i&&(i+=n?"\u2009":'<span class="ML__shortcut-join">+</span>'),a.startsWith("[Key")?i+=a.slice(4,5):a.startsWith("Key")?i+=a.slice(3,4):a.startsWith("[Digit")?i+=a.slice(6,7):a.startsWith("Digit")?i+=a.slice(5,6):i+=null!=(t={cmd:"\u2318",meta:n?"\u2318":"Ctrl",shift:n?"\u21e7":"Shift",alt:n?"\u2325":"Alt",ctrl:n?"\u2303":"Ctrl","\n":n?"\u23ce":"Return","[return]":n?"\u23ce":"Return","[enter]":n?"\u2324":"Enter","[tab]":n?"\u21e5":"Tab","[escape]":"Esc","[backspace]":n?"\u232b":"Backspace","[delete]":n?"\u2326":"Del","[pageup]":n?"\u21de":"Page Up","[pagedown]":n?"\u21df":"Page Down","[home]":n?"\u2912":"Home","[end]":n?"\u2913":"End","[space]":"Space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"\u21e0",up:"\u21e1",right:"\u21e2",down:"\u21e3","[arrowleft]":"\u21e0","[arrowup]":"\u21e1","[arrowright]":"\u21e2","[arrowdown]":"\u21e3"}[a.toLowerCase()])?t:a.toUpperCase();return i}function LI(e){if(e instanceof MouseEvent||e instanceof PointerEvent)return{x:e.clientX,y:e.clientY};if(e instanceof TouchEvent){let t=[...e.touches].reduce(((e,t)=>({x:e.x+t.clientX,y:e.y+t.clientY})),{x:0,y:0}),n=e.touches.length;return{x:t.x/n,y:t.y/n}}}function OI(e){let t={alt:!1,control:!1,shift:!1,meta:!1};return(e instanceof MouseEvent||e instanceof PointerEvent||e instanceof TouchEvent||e instanceof KeyboardEvent)&&(e.altKey&&(t.alt=!0),e.ctrlKey&&(t.control=!0),e.metaKey&&(t.meta=!0),e.shiftKey&&(t.shift=!0)),t}FI({id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["x","X","\u2248","\u02db"],KeyC:["j","J","\u2206","\xd4"],KeyD:["e","E","\xb4","\xb4"],KeyE:[".",">","\u2265","\u02d8"],KeyF:["u","U","\xa8","\xa8"],KeyG:["i","I","\u02c6","\u02c6"],KeyH:["d","D","\u2202","\xce"],KeyI:["c","C","\xe7","\xc7"],KeyJ:["h","H","\u02d9","\xd3"],KeyK:["t","T","\u2020","\u02c7"],KeyL:["n","N","\u02dc","\u02dc"],KeyM:["m","M","\xb5","\xc2"],KeyN:["b","B","\u222b","\u0131"],KeyO:["r","R","\xae","\u2030"],KeyP:["l","L","\xac","\xd2"],KeyQ:["'",'"',"\xe6","\xc6"],KeyR:["p","P","\u03c0","\u220f"],KeyS:["o","O","\xf8","\xd8"],KeyT:["y","Y","\xa5","\xc1"],KeyU:["g","G","\xa9","\u02dd"],KeyV:["k","K","\u02da","\uf8ff"],KeyW:[",","<","\u2264","\xaf"],KeyX:["q","Q","\u0153","\u0152"],KeyY:["f","F","\u0192","\xcf"],KeyZ:[";",":","\u2026","\xda"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["[","{","\u201c","\u201d"],Equal:["]","}","\u2018","\u2019"],BracketLeft:["/","?","\xf7","\xbf"],BracketRight:["=","+","\u2260","\xb1"],Backslash:["\\","|","\xab","\xbb"],Semicolon:["s","S","\xdf","\xcd"],Quote:["-","_","\u2013","\u2014"],Backquote:["`","~","`","`"],Comma:["w","W","\u2211","\u201e"],Period:["v","V","\u221a","\u25ca"],Slash:["z","Z","\u03a9","\xb8"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}});var zI=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function II(e){return!(e.ctrlKey||e.metaKey||["Dead","Process"].includes(e.key))&&(""===e.code||zI.has(e.code))}function PI(){var e;let t=document.activeElement;for(;null!=(e=null==t?void 0:t.shadowRoot)&&e.activeElement;)t=t.shadowRoot.activeElement;return t}var qI=class e{static get scrim(){return e._scrim||(e._scrim=new e),e._scrim}static open(t){e.scrim.open(t)}static close(){e.scrim.close()}static get state(){return e.scrim.state}static get element(){return e.scrim.element}constructor(e){var t,n;this.lightDismiss=null==(t=null==e?void 0:e.lightDismiss)||t,this.translucent=null!=(n=null==e?void 0:e.translucent)&&n,this.state="closed"}get element(){if(this._element)return this._element;let e=document.createElement("div");return e.setAttribute("role","presentation"),e.style.position="fixed",e.style.contain="content",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.zIndex="var(--scrim-zindex, 10099)",e.style.outline="none",this.translucent?(e.style.background="rgba(255, 255, 255, .2)",e.style.backdropFilter="contrast(40%)"):e.style.background="transparent",this._element=e,e}open(e){var t;if("closed"!==this.state)return;this.state="opening",this.onDismiss=null==e?void 0:e.onDismiss,this.savedActiveElement=PI();let{element:n}=this;(null!=(t=null==e?void 0:e.root)?t:document.body).appendChild(n),n.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let r=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let i=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight="".concat(i+r,"px"),null!=e&&e.child&&n.append(e.child),this.state="open"}close(){var e,t,n,r;if("open"!==this.state)return void this.element.parentElement;this.state="closing","function"==typeof this.onDismiss&&this.onDismiss(),this.onDismiss=void 0;let{element:i}=this;i.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),i.remove(),document.body.style.overflow=null!=(e=this.savedOverflow)?e:"",document.body.style.marginRight=null!=(t=this.savedMarginRight)?t:"",PI()!==this.savedActiveElement&&(null==(r=null==(n=this.savedActiveElement)?void 0:n.focus)||r.call(n)),i.innerHTML="",this.state="closed"}handleEvent(e){this.lightDismiss&&(e.target===this._element&&"click"===e.type||e.target===document&&("touchmove"===e.type||"scroll"===e.type))&&(this.close(),e.preventDefault(),e.stopPropagation())}};function RI(e){var t;if(!e||!II(e))return"";let n;return"Unidentified"===e.key&&e.target&&(n=e.target.value),n=null!=(t=null!=n?n:e.key)?t:e.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(n)&&(n=""),n}function jI(e){e=function(e){if(e.code)return e;let t=Object.entries(TI().mapping),n=!1,r=!1,i="";for(let a=0;a<4;a++){for(let[o,s]of t)if(s[a]===e.key){i=o,3===a?(n=!0,r=!0):2===a?n=!0:1===a&&(r=!0);break}if(i)break}return new KeyboardEvent(e.type,Jk(Zk({},e),{altKey:n,shiftKey:r,code:i}))}(e);let t=[];return e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),0===t.length?"[".concat(e.code,"]"):(t.push("[".concat(e.code,"]")),t.join("+"))}function KI(e){let t=e;return Qk(t)&&(t=t.length>0?t[0]+"("+t.slice(1).join("")+")":""),t}function VI(e,t){let n=[];if("string"==typeof t){let e=IO[t];Qk(e)?n=e.slice():e&&n.push(e)}let r=KI(t),i=new RegExp("^"+r.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let a of e)i.test(KI(a.command))&&n.push(a.key);return n.map(BI)}function UI(e,t){if(e.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(e.ifPlatform))throw new Error('Unexpected platform "'.concat(e.ifPlatform,'" for keybinding ').concat(e.key));if(void 0!==e.ifLayout&&(0===t.score||!e.ifLayout.includes(t.id)))return;let n=CI(e.key),r=e.ifPlatform;if(n.cmd){if(r&&"macos"!==r&&"ios"!==r)throw new Error('Unexpected "cmd" modifier with platform "'+r+'"\n"cmd" modifier can only be used with macOS or iOS platform.');r||(r="ios"===nA()?"ios":"macos"),n.win=!1,n.cmd=!1,n.meta=!0}if(n.win){if(r&&"windows"!==r)throw new Error('Unexpected "win" modifier with platform "'+r+'"\n"win" modifier can only be used with Windows platform.');r="windows",n.win=!1,n.cmd=!1,n.meta=!0}if(r&&!function(e){if(eA()){let t=nA(),n=e.startsWith("!"),r=e.endsWith(t);if(n&&!r||!n&&r)return!0}return"!other"!==e&&"other"===e}(r))return;if(/^\[.+\]$/.test(n.key))return Jk(Zk({},e),{key:EI(n)});let i=function(e,t){var n;let r={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!e)return r;for(let[i,a]of Object.entries(t.mapping)){if(a[0]===e)return r.key="[".concat(i,"]"),r;if(a[1]===e)return r.shift=!0,r.key="[".concat(i,"]"),r;if(a[2]===e)return r.alt=!0,r.key="[".concat(i,"]"),r;if(a[3]===e)return r.shift=!0,r.alt=!0,r.key="[".concat(i,"]"),r}return r.key=null!=(n=AI[e])?n:"",r}(n.key,t);if(!i)return Jk(Zk({},e),{key:EI(n)});if(i.shift&&n.shift||i.alt&&n.alt)throw new Error("The keybinding ".concat(e.key," (").concat($I(e.command),") is conflicting with the key combination ").concat(EI(i)," using the ").concat(t.displayName," keyboard layout"));return i.shift=i.shift||n.shift,i.alt=i.alt||n.alt,i.meta=n.meta,i.ctrl=n.ctrl,Jk(Zk({},e),{key:EI(i)})}function $I(e){if(Array.isArray(e)){let t=[...e];return t.shift()+"("+t.map((e=>"string"==typeof e?'"'.concat(e,'"'):e.toString())).join(", ")+")"}return e}function HI(e){var t,n;let r=e.atoms.find((e=>"latexgroup"===e.type));return r&&null!=(n=null==(t=r.body)?void 0:t.filter((e=>"latex"===e.type)))?n:[]}function WI(e,t){var n;let r=0,i=!1,a=Number.isFinite(null==t?void 0:t.before)?null!=(n=null==t?void 0:t.before)?n:0:e.lastOffset;for(;r<=a&&!i;){let t=e.at(r);i=t instanceof Jz&&t.isSuggestion,i||r++}if(!i)return[void 0,void 0];let o=r,s=!1;for(;o<=a&&!s;){let t=e.at(o);s=!(t instanceof Jz&&t.isSuggestion),s||o++}return[r-1,o-1]}function GI(e){let t=HI(e.model).filter((e=>e.isSuggestion));if(0!==t.length){e.model.position=e.model.offsetOf(t[0].leftSibling);for(let e of t)e.parent.removeChild(e)}}function ZI(e,t){var n;let{model:r}=e;GI(e);for(let c of HI(r))c.isError=!1;if(!r.selectionIsCollapsed||"off"===e.options.popoverPolicy)return void rP(e);let i=[],a=r.at(r.position);for(;a&&a instanceof Jz&&/^[a-zA-Z\*]$/.test(a.value);)a=a.leftSibling;if(a&&a instanceof Jz&&"\\"===a.value)for(i.push(a),a=a.rightSibling;a&&a instanceof Jz&&/^[a-zA-Z\*]$/.test(a.value);)i.push(a),a=a.rightSibling;let o=i.map((e=>e.value)).join(""),s=function(e,t){var n,r;if(0===t.length||"\\"===t||!t.startsWith("\\"))return[];let i=[];for(let o in AA)o.startsWith(t)&&!AA[o].infix&&i.push({match:o,frequency:null!=(n=AA[o].frequency)?n:0});for(let o in EA)o.startsWith(t)&&i.push({match:o,frequency:null!=(r=EA[o].frequency)?r:0});let a=t.substring(1);for(let o of Object.keys(e.options.macros))o.startsWith(a)&&i.push({match:"\\"+o,frequency:0});return i.sort(((e,t)=>{var n,r;return e.frequency===t.frequency?e.match.length===t.match.length?e.match<t.match?-1:1:e.match.length-t.match.length:(null!=(n=t.frequency)?n:0)-(null!=(r=e.frequency)?r:0)})),i.map((e=>e.match))}(e,o);if(0===s.length){if(/^\\[a-zA-Z\*]+$/.test(o))for(let e of i)e.isError=!0;return void rP(e)}let l=null!=(n=null==t?void 0:t.atIndex)?n:0;e.suggestionIndex=l<0?s.length-1:l%s.length;let u=s[e.suggestionIndex];if(u!==o){let t=i[i.length-1];t.parent.addChildrenAfter([...u.slice(o.length-u.length)].map((e=>new Jz(e,{isSuggestion:!0}))),t),fP(e,{interactive:!0})}!function(e,t){var n;if(0===t.length)return void rP(e);let r="";for(let[a,o]of t.entries()){let t=o,n=eP(e,o),i=VI(e.keybindings,t).join("<br>");r+='<li role="button" data-command="'.concat(t,'" ').concat(a===e.suggestionIndex?"class=ML__popover__current":"",'><span class="ML__popover__latex">').concat(t,'</span><span class="ML__popover__command">').concat(n,"</span>"),i&&(r+='<span class="ML__popover__keybinding">'.concat(i,"</span>")),r+="</li>"}let i=function(e,t){let n=document.getElementById("mathlive-suggestion-popover");return n||(n=YI("mathlive-suggestion-popover"),XO("suggestion-popover"),XO("core"),n.addEventListener("pointerdown",(e=>e.preventDefault())),n.addEventListener("click",(t=>{let n=t.target;for(;n&&!n.dataset.command;)n=n.parentElement;n&&(XI(e,"reject"),OO.insert(e.model,n.dataset.command,{selectionMode:"placeholder",format:"latex",mode:"math"}),e.dirty=!0,e.focus())}))),n.innerHTML=globalThis.MathfieldElement.createHTML(t),n}(e,"<ul>".concat(r,"</ul>"));tP()&&(null==(n=i.querySelector(".ML__popover__current"))||n.scrollIntoView({block:"nearest",inline:"nearest"})),setTimeout((()=>{var t;i&&!tP()&&(i.classList.add("is-visible"),nP(e),null==(t=i.querySelector(".ML__popover__current"))||t.scrollIntoView({block:"nearest",inline:"nearest"}))}),32)}(e,s)}function JI(e){let[t,n]=WI(e,{before:e.position});if(void 0===t||void 0===n)return!1;let r=!1;return e.getAtoms([t,n]).forEach((e=>{e.isSuggestion&&(e.isSuggestion=!1,r=!0)})),r}function XI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"accept",n=arguments.length>2?arguments[2]:void 0;var r,i;rP(e);let a=function(e){return e.atoms.find((e=>"latexgroup"===e.type))}(e.model);if(!a)return!1;if("accept-suggestion"===t||"accept-all"===t){let n=HI(e.model).filter((e=>e.isSuggestion));if(0!==n.length){for(let e of n)e.isSuggestion=!1;e.model.position=e.model.offsetOf(n[n.length-1])}if("accept-suggestion"===t)return 0!==n.length}let o=HI(e.model).filter((e=>!e.isSuggestion)).map((e=>e.value)).join(""),s=a.leftSibling;return a.parent.removeChild(a),e.model.position=e.model.offsetOf(s),e.switchMode(null!=(r=null==n?void 0:n.mode)?r:"math"),"reject"===t||(OO.insert(e.model,o,{selectionMode:null!=(i=null==n?void 0:n.selectItem)&&i?"item":"placeholder",format:"latex",mode:"math"}),e.snapshot(),e.model.announce("replacement"),e.switchMode("math")),!0}function YI(e){var t;let n=document.getElementById(e);return n?n.dataset.refcount=Number(Number.parseInt(null!=(t=n.dataset.refcount)?t:"0")+1).toString():(n=document.createElement("div"),n.setAttribute("aria-hidden","true"),n.dataset.refcount="1",n.id=e,document.body.append(n)),n}function QI(e){var t;let n=document.getElementById(e);if(!n)return;let r=Number.parseInt(null!=(t=n.getAttribute("data-refcount"))?t:"0");r<=1?n.remove():n.dataset.refcount=Number(r-1).toString()}function eP(e,t){let n=new pO({from:e.context}),r=new gO({mode:"math",type:"root",body:Pz(t,{context:n})});return XL(JL(lI(new GL(r.render(n),{classes:"ML__base"}),n)),{classes:"ML__latex"}).toMarkup()}function tP(){let e=document.getElementById("mathlive-suggestion-popover");return!!e&&e.classList.contains("is-visible")}function nP(e,t){var n;if(!e.element||e.element.mathfield!==e||!tP())return;if("latex"!==(null==(n=e.model.at(e.model.position))?void 0:n.type))return void rP(e);if(null!=t&&t.deferred)return void setTimeout((()=>nP(e)),32);let r=qO(e.field);if(!r)return;let i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerWidth-document.documentElement.clientWidth,s=window.innerHeight-document.documentElement.clientHeight,l=window.mathVirtualKeyboard.boundingRect.height,u=document.getElementById("mathlive-suggestion-popover");r.x+u.offsetWidth/2>a-o?u.style.left="".concat(a-u.offsetWidth-o,"px"):r.x-u.offsetWidth/2<0?u.style.left="0":u.style.left="".concat(r.x-u.offsetWidth/2,"px");let c=r.y-r.height;i-s-l-r.y<c?(u.classList.add("ML__popover--reverse-direction"),u.classList.remove("top-tip"),u.classList.add("bottom-tip"),u.style.top="".concat(r.y-r.height-u.offsetHeight-15,"px")):(u.classList.remove("ML__popover--reverse-direction"),u.classList.add("top-tip"),u.classList.remove("bottom-tip"),u.style.top="".concat(r.y+15,"px"))}function rP(e){e.suggestionIndex=0;let t=document.getElementById("mathlive-suggestion-popover");t&&(t.classList.remove("is-visible"),t.innerHTML="")}new class extends OO{constructor(){super("latex")}createAtom(e){return new Jz(e)}onPaste(e,t){if(!t)return!1;let n="string"==typeof t?t:t.getData("application/x-latex")||t.getData("text/plain");return!(!n||!e.model.contentWillChange({inputType:"insertFromPaste",data:n}))&&(e.stopCoalescingUndo(),e.stopRecording(),this.insert(e.model,n)&&(e.startRecording(),e.snapshot("paste"),e.model.contentDidChange({inputType:"insertFromPaste"}),pP(e)),e.startRecording(),!0)}insert(e,t,n){if(!e.contentWillChange({data:t,inputType:"insertText"}))return!1;n||(n={}),n.insertionMode||(n.insertionMode="replaceSelection"),n.selectionMode||(n.selectionMode="placeholder");let{silenceNotifications:r}=e;n.silenceNotifications&&(e.silenceNotifications=!0);let i=e.silenceNotifications;e.silenceNotifications=!0,"replaceSelection"!==n.insertionMode||e.selectionIsCollapsed?"replaceAll"===n.insertionMode?(e.root.setChildren([],"body"),e.position=0):"insertBefore"===n.insertionMode?e.collapseSelection("backward"):"insertAfter"===n.insertionMode&&e.collapseSelection("forward"):e.deleteAtoms(DO(e.selection));let a=[];for(let l of t)TA.test(l)&&a.push(new Jz(l));let o=e.at(e.position);if(o instanceof Xz&&(o=o.lastChild),!(o.parent instanceof Xz)){let e=new Xz("");o.parent.addChildAfter(e,o),o=e.firstChild}let s=o.parent.addChildrenAfter(a,o);return e.silenceNotifications=i,"before"===n.selectionMode||("item"===n.selectionMode?e.setSelection(e.anchor,e.offsetOf(s)):s&&(e.position=e.offsetOf(s))),e.contentDidChange({data:t,inputType:"insertText"}),e.silenceNotifications=r,!0}};var iP,aP,oP=null,sP=(null==(aP=null==(iP=null==globalThis?void 0:globalThis.document)?void 0:iP.currentScript)?void 0:aP.src)||function(){let e=String((new Error).stack).replace(/^Error.*\n/,"").split("\n");if(0===e.length)return console.error("Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format \"".concat((new Error).stack,'").')),"";let t=e[1],n=t.match(/http.*\.ts[\?:]/);return n&&(t=e[2]),n=t.match(/(https?:.*):[0-9]+:[0-9]+/),n||(n=t.match(/at (.*(\.ts))[\?:]/),n||(n=t.match(/at (.*(\.mjs|\.js))[\?:]/))),n?n[1]:(console.error(e),console.error("Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location \"".concat(t,'").')),"")}();async function lP(e){if(/^(?:[a-z+]+:)?\/\//i.test(e)){try{return new URL(e).href}catch(kC){}if(e.startsWith("//"))try{return new URL("".concat(window.location.protocol).concat(e)).href}catch(kC){}return e}if(null===oP)try{let e=await fetch(sP,{method:"HEAD"});200===e.status&&(oP=e.url)}catch(kC){console.error('Invalid URL "'.concat(e,'" (relative to "').concat(sP,'")'))}return new URL(e,null!=oP?oP:sP).href}var uP="not-loaded";async function cP(){var e;if("not-loaded"===uP)if(uP="loading",null!=(e=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))&&e)uP="ready";else if(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document){let e=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],n=Array.from(document.fonts).map((e=>e.family));if(e.every((e=>n.includes(e))))return void(uP="ready");if(!globalThis.MathfieldElement.fontsDirectory)return void(uP="not-loaded");let r=await lP(globalThis.MathfieldElement.fontsDirectory);if(!r)return document.body.classList.add("ML__fonts-did-not-load"),void(uP="error");let i=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular"],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new FontFace(e,"url(".concat(t,".woff2) format('woff2')"),n)}(e[0].replace(/-[a-zA-Z]+$/,""),"".concat(r,"/").concat(e[0]),e[1])));try{return(await Promise.all(i.map((e=>{try{return e.load()}catch(t){}})))).forEach((e=>document.fonts.add(e))),void(uP="ready")}catch(t){console.error('MathLive 0.98.6: The math fonts could not be loaded from "'.concat(r,'"'),{cause:t}),document.body.classList.add("ML__fonts-did-not-load")}uP="error"}}function dP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=3735928559^t,r=1103547991^t;for(let i=0;i<e.length;i++){let t=e.charCodeAt(i);n=Math.imul(n^t,2654435761),r=Math.imul(r^t,1597334677)}return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}function pP(e,t){e&&(e.dirty||(e.dirty=!0,requestAnimationFrame((()=>{PO(e)&&e.dirty&&(e.atomBoundsCache=new Map,fP(e,t),e.atomBoundsCache=void 0)}))))}function hP(e,t){let{model:n}=e;n.root.caret=void 0,n.root.isSelected=!1,n.root.containsCaret=!0;for(let r of n.atoms)r.caret=void 0,r.isSelected=!1,r.containsCaret=!1;if(n.selectionIsCollapsed){let t=n.at(n.position);t.caret=e.model.mode;let r=t.parent;for(;r;)r.containsCaret=!0,r=r.parent}else{let e=n.getAtoms(n.selection,{includeChildren:!0});for(let t of e)t.isSelected=!0}return function(e,t){var n;t=null!=t?t:{};let r=new pO({from:Jk(Zk({},e.context),{atomIdsSettings:{seed:t.forHighlighting?dP(gO.serialize([e.model.root],{expandMacro:!1,defaultMode:e.options.defaultMode})):"random",groupNumbers:null!=(n=t.forHighlighting)&&n},letterShapeStyle:e.options.letterShapeStyle}),mathstyle:"inline-math"===e.options.defaultMode?"textstyle":"displaystyle"});return XL(lI(e.model.root.render(r),r),{classes:e.hasEditablePrompts?"ML__latex ML__prompting":"ML__latex",attributes:{translate:"no","aria-hidden":"true"}})}(e,t).toMarkup()}function fP(e,t){if(!PO(e))return;null!=t||(t={});let n=e.element.querySelector("[part=virtual-keyboard-toggle]");n&&(n.style.display=e.hasEditableContent?"":"none");let r=e.field;if(!r)return;let i=e.isSelectionEditable&&e.hasFocus(),a=r.classList.contains("ML__focused");a&&!i?r.classList.remove("ML__focused"):!a&&i&&r.classList.add("ML__focused");let o=hP(e,t),s=e.element.querySelector("[part=menu-toggle]");if(s&&(e.model.atoms.length<=1||e.disabled||e.readOnly&&!e.hasEditableContent||"none"===e.userSelect?s.style.display="none":s.style.display=""),e.model.atoms.length<=1){let t=e.options.contentPlaceholder;t&&(o+='<span part=placeholder class="ML__content-placeholder">'.concat(uj(t),"</span>"))}r.innerHTML=globalThis.MathfieldElement.createHTML(o),mP(e,t.interactive),e.dirty=!1}function mP(e,t){let n=e.field;if(!n)return;for(let s of n.querySelectorAll(".ML__selection, .ML__contains-highlight"))s.remove();(null==t||!t)&&"error"!==uP&&"ready"!==uP&&setTimeout((()=>{"ready"===uP?mP(e):setTimeout((()=>mP(e)),128)}),32);let r=e.model,i=n.offsetWidth,a=n.getBoundingClientRect().width,o=Math.floor(a)/i;if(o=isNaN(o)?1:o,r.selectionIsCollapsed){nP(e,{deferred:!0});let t=r.at(r.position);for(;t&&"prompt"!==t.type&&(!t.containsCaret||!t.displayContainsHighlight);)t=t.parent;if(null!=t&&t.containsCaret&&t.displayContainsHighlight){let r=jO(e,VO(e,t),o);if(r){r.left/=o,r.right/=o,r.top/=o,r.bottom/=o;let e=document.createElement("div");e.classList.add("ML__contains-highlight"),e.style.position="absolute",e.style.left="".concat(r.left+1,"px"),e.style.top="".concat(Math.ceil(r.top),"px"),e.style.width="".concat(Math.ceil(r.right-r.left),"px"),e.style.height="".concat(Math.ceil(r.bottom-r.top),"px"),n.insertBefore(e,n.childNodes[0])}}}else for(let s of function(e){let t=[];for(let n of e){let e=!1;for(let r of t)if(n.left===r.left&&n.right===r.right&&n.top===r.top&&n.bottom===r.bottom){e=!0;break}e||t.push(n)}e=t,t=[];for(let n of e){let r=0;for(let t of e)if(n.left>=t.left&&n.right<=t.right&&n.top>=t.top&&n.bottom<=t.bottom&&(r+=1,r>1))break;1===r&&t.push(n)}return t}(UO(e,{excludeAtomsWithBackground:!0}))){s.left/=o,s.right/=o,s.top/=o,s.bottom/=o;let e=document.createElement("div");e.classList.add("ML__selection"),e.style.position="absolute",e.style.left="".concat(s.left,"px"),e.style.top="".concat(s.top,"px"),e.style.width="".concat(Math.ceil(s.right-s.left),"px"),e.style.height="".concat(Math.ceil(s.bottom-s.top-1),"px"),n.insertBefore(e,n.childNodes[0])}}var gP;function vP(e,t){t=Zk({target:"mathfield",canUndo:!1,audioFeedback:void 0,changeContent:!1,changeSelection:!1},null!=t?t:{}),gP||(gP={});for(let n of Object.keys(e))gP[n],gP[n]=Jk(Zk({},t),{fn:e[n]})}function yP(e){let t;if(Array.isArray(e)){if("performWithFeedback"===e[0])return yP(e[1]);t=e[0]}else t=e;return t=t.replace(/-\w/g,(e=>e[1].toUpperCase())),gP[t]}function bP(e){var t;return null==(t=yP(e))?void 0:t.target}vP({performWithFeedback:(e,t)=>function(e,t){var n;if(!e)return!1;e.focus(),rK.keypressVibration&&tA()&&navigator.vibrate(3);let r=yP(t);globalThis.MathfieldElement.playSound(null!=(n=null==r?void 0:r.audioFeedback)?n:"keypress");let i=e.executeCommand(t);return e.scrollIntoView(),i}(e,t)}),vP({complete:XI},{target:"mathfield",audioFeedback:"return",canUndo:!0,changeContent:!0,changeSelection:!0}),vP({nextSuggestion:function(e){return ZI(e,{atIndex:e.suggestionIndex+1}),!1},previousSuggestion:function(e){return ZI(e,{atIndex:e.suggestionIndex-1}),!1}},{target:"mathfield",audioFeedback:"keypress",changeSelection:!0});var xP="mathlive#virtual-keyboard-message";function DP(e){var t;return"message"===e.type&&(null==(t=e.data)?void 0:t.type)===xP}var wP,_P=class e{constructor(){this.targetOrigin=window.origin,this.originValidator="none",this._boundingRect=new DOMRect(0,0,0,0),this._isShifted=!1,window.addEventListener("message",this),this.sendMessage("proxy-created"),this.listeners={}}static get singleton(){return this._singleton||(this._singleton=new e),this._singleton}set alphabeticLayout(e){this.sendMessage("update-setting",{alphabeticLayout:e})}set layouts(e){this.sendMessage("update-setting",{layouts:e})}get normalizedLayouts(){return[]}set editToolbar(e){this.sendMessage("update-setting",{editToolbar:e})}set actionKeycap(e){this.sendMessage("update-setting",{actionKeycap:e})}set shiftKeycap(e){this.sendMessage("update-setting",{shiftKeycap:e})}set backspaceKeycap(e){this.sendMessage("update-setting",{backspaceKeycap:e})}set tabKeycap(e){this.sendMessage("update-setting",{tabKeycap:e})}set container(e){throw new Error("Container inside an iframe cannot be changed")}show(e){this.sendMessage("show",e)}hide(e){this.sendMessage("hide",e)}get isShifted(){return this._isShifted}get visible(){return this._boundingRect.height>0}set visible(e){e?this.show():this.hide()}get boundingRect(){return this._boundingRect}executeCommand(e){return this.sendMessage("execute-command",{command:e}),!0}updateToolbar(e){this.sendMessage("update-toolbar",e)}update(e){this.sendMessage("update-setting",e)}connect(){this.sendMessage("connect")}disconnect(){this.sendMessage("disconnect")}addEventListener(e,t,n){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(t)||this.listeners[e].add(t)}dispatchEvent(e){return!this.listeners[e.type]||0===this.listeners[e.type].size||(this.listeners[e.type].forEach((t=>{"function"==typeof t?t(e):null==t||t.handleEvent(e)})),!e.defaultPrevented)}removeEventListener(e,t,n){this.listeners[e]&&this.listeners[e].delete(t)}handleEvent(e){if(DP(e)){if(!$O(e.origin,this.originValidator))throw new DOMException("Message from unknown origin (".concat(e.origin,") cannot be handled"),"SecurityError");this.handleMessage(e.data)}}handleMessage(e){let{action:t}=e;if("execute-command"!==t)return"synchronize-proxy"===t?(this._boundingRect=e.boundingRect,void(this._isShifted=e.isShifted)):"geometry-changed"===t?(this._boundingRect=e.boundingRect,void this.dispatchEvent(new Event("geometrychange"))):void 0;{let{command:t}=e;"virtual-keyboard"===bP(t)&&this.executeCommand(t)}}sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!window.top)throw new DOMException("A frame does not have access to the top window and can\u2018t communicate with the keyboard. Review virtualKeyboardTargetOrigin and originValidator on mathfields embedded in an iframe","SecurityError");window.top.postMessage(Zk({type:xP,action:e},t),this.targetOrigin)}},SP={numeric:{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",rows:[[{latex:"x",shift:"y",variants:["y","z","t","r","x^2","x^n","x^{#?}","x_n","x_i","x_{#?}",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"}]},{latex:"n",shift:"a",variants:["i","j","p","k","a","u"]},"[separator-5]","[7]","[8]","[9]","[/]","[separator-5]",{latex:"\\exponentialE",shift:"\\ln",variants:["\\exp","\\times 10^{#?}","\\ln","\\log_{10}","\\log"]},{latex:"\\imaginaryI",variants:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"]},{latex:"\\pi",shift:"\\sin",variants:["\\prod",{latex:"\\theta",aside:"theta"},{latex:"\\rho",aside:"rho"},{latex:"\\tau",aside:"tau"},"\\sin","\\cos","\\tan"]}],[{label:"<",latex:"<",class:"hide-shift",shift:{latex:"\\le",label:"\u2264"}},{label:">",latex:">",class:"hide-shift",shift:{latex:"\\ge",label:"\u2265"}},"[separator-5]","[4]","[5]","[6]","[*]","[separator-5]",{class:"hide-shift",latex:"#@^2}",shift:"#@^{\\prime}}"},{latex:"#@^{#0}}",class:"hide-shift",shift:"#@_{#?}"},{class:"hide-shift",latex:"\\sqrt{#0}",shift:{latex:"\\sqrt[#0]{#?}}"}}],["[(]","[)]","[separator-5]","[1]","[2]","[3]","[-]","[separator-5]",{latex:"\\int^{\\infty}_{0}\\!#?\\,\\mathrm{d}x",class:"small hide-shift",shift:"\\int",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{class:"hide-shift",latex:"\\forall",shift:"\\exists"},{label:"[backspace]",width:1}],[{label:"[shift]",width:2},"[separator-5]","[0]","[.]","[=]","[+]","[separator-5]","[left]","[right]",{label:"[action]",width:1}]]},greek:{label:"&alpha;&beta;&gamma;",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.greek",rows:[[{label:"<i>&#x03c6;</i>",class:"MLK__tex hide-shift",insert:"\\varphi",aside:"phi var.",shift:"\\Phi"},{label:"<i>&#x03c2;</i>",class:"MLK__tex hide-shift",insert:"\\varsigma",aside:"sigma var.",shift:"\\Sigma"},{label:"<i>&#x03f5;</i>",class:"MLK__tex hide-shift",insert:"\\epsilon",aside:"espilon",shift:'\\char"0190'},{label:"<i>&rho;</i>",class:"MLK__tex hide-shift",insert:"\\rho",aside:"rho",shift:'\\char"3A1'},{label:"<i>&tau;</i>",class:"MLK__tex hide-shift",insert:"\\tau",aside:"tau",shift:'\\char"3A4'},{label:"<i>&upsilon;</i>",class:"MLK__tex hide-shift",insert:"\\upsilon",aside:"upsilon",shift:"\\Upsilon"},{label:"<i>&theta;</i>",class:"MLK__tex hide-shift",insert:"\\theta",aside:"theta",shift:"\\Theta"},{label:"<i>&iota;</i>",class:"MLK__tex hide-shift",insert:"\\iota",aside:"iota",shift:'\\char"399'},{label:"<i>&omicron;</i>",class:"MLK__tex hide-shift",insert:"\\omicron",aside:"omicron",shift:'\\char"39F'},{label:"<i>&pi;</i>",class:"MLK__tex hide-shift",insert:"\\pi",aside:"pi",shift:"\\Pi"}],["[separator-5]",{label:"<i>&alpha;</i>",class:"MLK__tex hide-shift",insert:"\\alpha",aside:"alpha",shift:'\\char"391'},{label:"<i>&sigma;</i>",class:"MLK__tex hide-shift",insert:"\\sigma",aside:"sigma",shift:"\\Sigma"},{label:"<i>&delta;</i>",class:"MLK__tex hide-shift",insert:"\\delta",aside:"delta",shift:"\\Delta"},{latex:"\\phi",class:"MLK__tex hide-shift",insert:"\\phi",aside:"phi",shift:"\\Phi"},{label:"<i>&gamma;</i>",class:"MLK__tex hide-shift",insert:"\\gamma",aside:"gamma",shift:"\\Gamma"},{label:"<i>&eta;</i>",class:"MLK__tex hide-shift",insert:"\\eta",aside:"eta",shift:'\\char"397'},{label:"<i>&xi;</i>",class:"MLK__tex hide-shift",insert:"\\xi",aside:"xi",shift:"\\Xi"},{label:"<i>&kappa;</i>",class:"MLK__tex hide-shift",insert:"\\kappa",aside:"kappa",shift:"\\Kappa"},{label:"<i>&lambda;</i>",class:"MLK__tex hide-shift",insert:"\\lambda",aside:"lambda",shift:"\\Lambda"},"[separator-5]"],["[shift]",{label:"<i>&zeta;</i>",class:"MLK__tex hide-shift",insert:"\\zeta",aside:"zeta",shift:'\\char"396'},{label:"<i>&chi;</i>",class:"MLK__tex hide-shift",insert:"\\chi",aside:"chi",shift:'\\char"3A7'},{label:"<i>&psi;</i>",class:"MLK__tex hide-shift",insert:"\\psi",aside:"zeta",shift:"\\Psi"},{label:"<i>&omega;</i>",class:"MLK__tex hide-shift",insert:"\\omega",aside:"omega",shift:"\\Omega"},{label:"<i>&beta;</i>",class:"MLK__tex hide-shift",insert:"\\beta",aside:"beta",shift:'\\char"392'},{label:"<i>&nu;</i>",class:"MLK__tex hide-shift",insert:"\\nu",aside:"nu",shift:'\\char"39D'},{label:"<i>&mu;</i>",class:"MLK__tex hide-shift",insert:"\\mu",aside:"mu",shift:'\\char"39C'},"[backspace]"],["[separator]",{label:"<i>&#x03b5;</i>",class:"MLK__tex",insert:"\\varepsilon",aside:"espilon var."},{label:"<i>&#x03d1;</i>",class:"MLK__tex",insert:"\\vartheta",aside:"theta var."},{label:"<i>&#x3f0;</i>",class:"MLK__tex",insert:"\\varkappa",aside:"kappa var."},{label:"<i>&#x03d6;</i>",class:"MLK__tex",insert:"\\varpi",aside:"pi var."},{label:"<i>&#x03f1;</i>",class:"MLK__tex",insert:"\\varrho",aside:"rho var."},"[left]","[right]","[action]"]]},symbols:{label:"&infin;\u2260\u2208",labelClass:"MLK__tex",tooltip:"keyboard.tooltip.symbols",rows:[[{latex:"\\sin",shift:"\\sin^{-1}",variants:[{class:"small",latex:"\\sinh"},{class:"small",latex:"\\sin^{-1}"},{class:"small",latex:"\\arsinh"}]},"\\ln",{latex:"\\mathrm{abs}",insert:"\\mathrm{abs}\\left(#0\\right)"},{latex:"\\rarr",shift:"\\rArr",variants:[{latex:"\\implies",aside:"implies"},{latex:"\\to",aside:"to"},"\\dashv",{latex:"\\roundimplies",aside:"round implies"}]},{latex:"\\exists",variants:["\\nexists"],shift:"\\nexists"},{latex:"\\in",shift:"\\notin",variants:["\\notin","\\owns"]},"\\cup",{latex:"\\overrightarrow{#@}",shift:"\\overleftarrow{#@}",variants:["\\overleftarrow{#@}","\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"]},{class:"small hide-shift",latex:"\\lim_{#?}",shift:"\\lim_{x\\to\\infty}",variants:[{class:"small",latex:"\\liminf_{#?}"},{class:"small",latex:"\\limsup_{#?}"}]},"\\exponentialE"],[{latex:"\\cos",shift:"\\cos^{-1}",variants:[{class:"small",latex:"\\cosh"},{class:"small",latex:"\\cos^{-1}"},{class:"small",latex:"\\arcosh"}]},{latex:"\\log",shift:"\\log_{10}",variants:["\\log_{#0}","\\log_{10}"]},"\\left\\vert#0\\right\\vert",{latex:"\\larr",shift:"\\lArr",variants:[{latex:"\\impliedby",aside:"implied by"},{latex:"\\gets",aside:"gets"},"\\lArr","\\vdash",{latex:"\\models",aside:"models"}]},{latex:"\\forall",shift:"\\lnot",variants:[{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"}]},{latex:"\\ni",shift:"\\not\\owns"},"\\cap",{latex:"\\overline{#@}",shift:"\\underline{#@}",variants:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}","\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"]},{class:"hide-shift small",latex:"\\int",shift:"\\iint",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\intop","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"]},{latex:"\\pi",shift:"\\tau",variants:["\\tau"]}],[{latex:"\\tan",shift:"\\tan^{-1}",variants:[{class:"small",latex:"\\tanh"},{class:"small",latex:"\\tan^{-1}"},{class:"small",latex:"\\artanh"},{class:"small",latex:"\\arctan"},{class:"small",latex:"\\arctg"},{class:"small",latex:"\\tg"}]},{latex:"\\exp",insert:"\\exp\\left(#0\\right)",variants:["\\exponentialE^{#0}"]},"\\left\\Vert#0\\right\\Vert",{latex:"\\lrArr",shift:"\\leftrightarrow",variants:[{latex:"\\iff",aside:"if and only if"},"\\leftrightarrow","\\leftrightarrows","\\Leftrightarrow",{latex:"^\\biconditional",aside:"biconditional"}]},{latex:"\\vert",shift:"!"},{latex:"#@^{\\complement}",aside:"complement",variants:[{latex:"\\setminus",aside:"set minus"},{latex:"\\smallsetminus",aside:"small set minus"}]},{latex:"\\subset",shift:"\\subseteq",variants:["\\subset","\\subseteq","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsubseteq","\\supset","\\supseteq","\\supsetneq","\\supsetneqq","\\nsupset","\\nsupseteq"]},{latex:"#@^{\\prime}",shift:"#@^{\\doubleprime}",variants:["#@^{\\doubleprime}","#@\\degree"]},{latex:"\\mathrm{d}",shift:"\\partial",variants:["\\mathrm{d}x",{latex:"\\dfrac{\\mathrm{d}}{\\mathrm{d} x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\partial"]},{latex:"\\infty",variants:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"]}],[{label:"[shift]",width:2},{class:"box",latex:",",shift:";",variants:[";","?"]},{class:"box",latex:"\\colon",shift:"\\Colon",variants:[{latex:"\\Colon",aside:"such that",class:"box"},{latex:":",aside:"ratio",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\therefore",aside:"therefore",class:"box"},{latex:"\\because",aside:"because",class:"box"}]},{class:"box",latex:"\\cdot",aside:"centered dot",shift:"\\ast",variants:["\\circ","\\bigcirc","\\bullet","\\odot","\\oslash","\\circledcirc","\\ast","\\star","\\times","\\doteq","\\doteqdot"]},"[separator]","[left]","[right]",{label:"[backspace]",width:1,class:"action hide-shift"},{label:"[action]",width:1}]]},compact:{label:"compact",rows:[["[+]","[-]","[*]","[/]","[=]","[.]","[(]","[)]","\\sqrt{#0}","#@^{#?}"],["[1]","[2]","[3]","[4]","[5]","[6]","[7]","[8]","[9]","[0]"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]},minimalist:{label:"minimalist",layers:[{style:"\n          .minimalist-backdrop {\n            display: flex;\n            justify-content: center;\n          }          \n          .minimalist-container {\n            --keycap-height: 40px;\n            --keycap-max-width: 53px;\n            --keycap-small-font-size: 12px;\n            background: var(--keyboard-background);\n            padding: 20px;\n            border-top-left-radius: 8px;\n            border-top-right-radius: 8px;\n            border: 1px solid var(--keyboard-border);\n            box-shadow: 0 0 32px rgb(0 0 0 / 30%);\n          }        \n        ",backdrop:"minimalist-backdrop",container:"minimalist-container",rows:[["+","-","\\times",{latex:"\\frac{#@}{#0}",class:"small"},"=","[.]","(",")",{latex:"\\sqrt{#0}",class:"small"},{latex:"#@^{#?}",class:"small"}],["1","2","3","4","5","6","7","8","9","0"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]}]},"numeric-only":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",id:"numeric-only",rows:[["7","8","9","[separator]",{label:"[backspace]",width:2}],["4","5","6","[separator]","[separator]","[separator]"],["1","2","3","[separator]","[separator]","[separator]"],["0",{label:"[.]",variants:[]},"-","[separator]","[left]","[right]"]]}},CP={0:["\\varnothing","\\infty"],1:["\\frac{1}{#@}","#@^{-1}","\\times 10^{#?}","\\phi","\\imaginaryI"],2:["\\frac{1}{2}","#@^2","\\sqrt2","\\exponentialE"],3:["\\frac{1}{3}","#@^3","\\sqrt3","\\pi"],4:["\\frac{1}{4}","#@^4"],5:["\\frac{1}{5}","#@^5","\\sqrt5"],6:["\\frac{1}{6}","#@^6"],7:["\\frac{1}{7}","#@^7"],8:["\\frac{1}{8}","#@^8"],9:["\\frac{1}{9}","#@^9"],".":[".",",",";","\\colon"],",":["{,}",".",";","\\colon"],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"},"\xe0","\xe1","\xe2","\xe4","\xe6"],b:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"},"\xe7"],d:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"},"\xe8","\xe9","\xea","\xeb"],g:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"},"\xec","\xed","\xee","\xef"],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"},"\xf1"],o:["\xf8","\u0153","\xf2","\xf3","\xf4","\xf6","\u0153"],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],u:["\xf9","\xfa","\xfb","\xfc"],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],y:["\xfd","\xff"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>\u207b\xb3\u29f8\u2081\u2088 em"},{latex:'\\char"203A\\,\\char"2039',insert:"\\,",aside:"thin space<br>\xb3\u29f8\u2081\u2088 em"},{latex:'\\char"203A\\:\\char"2039',insert:"\\:",aside:"medium space<br>\u2074\u29f8\u2081\u2088 em"},{latex:'\\char"203A\\;\\char"2039',insert:"\\;",aside:"thick space<br>\u2075\u29f8\u2081\u2088 em"},{latex:'\\char"203A\\ \\char"2039',insert:"\\ ",aside:"\u2153 em"},{latex:'\\char"203A\\enspace\\char"2039',insert:"\\enspace",aside:"\xbd em"},{latex:'\\char"203A\\quad\\char"2039',insert:"\\quad",aside:"1 em"},{latex:'\\char"203A\\qquad\\char"2039',insert:"\\qquad",aside:"2 em"}]};function EP(e,t){var n,r,i;let a=GP.singleton;if(!a)return;let o=HP(e),s=null!=(r=null==(n=a.getKeycap(null==o?void 0:o.id))?void 0:n.variants)?r:"";if("string"==typeof s&&!AP(s)||Array.isArray(s)&&0===s.length)return void(null==t||t());let l={},u="";for(let m of function(e){var t;return"string"!=typeof e?e:(CP[e]||(CP[e]=null!=(t=function(e){if("foreground-color"===e){let e=[];for(let t of Object.keys(uA))e.push({class:"swatch-button",label:'<span style="border: 3px solid '+uA[t]+'"></span>',command:["applyStyle",{color:t}]});return e}if("background-color"===e){let e=[];for(let t of Object.keys(lA))e.push({class:"swatch-button",label:'<span style="background:'+lA[t]+'"></span>',command:["applyStyle",{backgroundColor:t}]});return e}}(e))?t:[]),CP[e])}(s)){let e=jP(m),t=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);l[t]=e;let[n,r]=PP(e);u+="<div id=".concat(t,' class="item ').concat(r,'">').concat(n,"</div>")}let c=document.createElement("div");c.setAttribute("aria-hidden","true"),c.className="MLK__variant-panel",c.style.height="auto";let d=Object.keys(l).length,p=5;1===d?p=1:2===d||4===d?p=2:3===d||5===d||6===d?p=3:d>=7&&d<14&&(p=4),c.style.width="calc(var(--variant-keycap-length) * ".concat(p," + 12px)"),c.innerHTML=rK.createHTML(u),qI.open({root:null==(i=null==a?void 0:a.container)?void 0:i.querySelector(".ML__keyboard"),child:c}),wP=new AbortController;let{signal:h}=wP,f=null==e?void 0:e.getBoundingClientRect();if(f){f.top-c.clientHeight<0&&(c.style.width="auto",d<=6?c.style.height="56px":d<=12?c.style.height="108px":d<=18?c.style.height="205px":c.classList.add("compact"));let e=Math.max(0,Math.min(window.innerWidth-c.offsetWidth,(f.left+f.right-c.offsetWidth)/2)),n=f.top-c.clientHeight+5;c.style.transform="translate(".concat(e,"px, ").concat(n,"px)"),c.classList.add("is-visible"),requestAnimationFrame((()=>{c.addEventListener("pointerup",(e=>{let n=HP(e.target);null==n||!n.id||!l[n.id]||(UP(l[n.id]),kP(),null==t||t(),e.preventDefault())}),{capture:!0,passive:!1,signal:h}),c.addEventListener("pointerenter",(e=>{let t=HP(e.target);null==t||!t.id||!l[t.id]||t.classList.add("is-active")}),{capture:!0,signal:h}),c.addEventListener("pointerleave",(e=>{let t=HP(e.target);null==t||!t.id||!l[t.id]||t.classList.remove("is-active")}),{capture:!0,signal:h}),window.addEventListener("pointercancel",(()=>{kP(),null==t||t()}),{signal:h}),window.addEventListener("pointerup",(()=>{kP(),null==t||t()}),{signal:h})}))}}function kP(){null==wP||wP.abort(),wP=null,"open"===qI.state&&qI.close()}function AP(e){return void 0!==CP[e]}function NP(e){return Object.keys(e).map((t=>"".concat(t," {").concat(function(e){return"string"==typeof e?e:Object.entries(e).map((e=>{let[t,n]=e;return"".concat(t,":").concat(n," !important")})).join(";")}(e[t]),"}"))).join("")}function MP(e){if(!e)return"";let t=new pO,n=new gO({mode:"math",type:"root",body:Pz(e,{context:t,args:e=>"@"===e?"{\\class{ML__box-placeholder}{\\blacksquare}}":"\\placeholder{}"})});return XL(JL(lI(new GL(n.render(t),{classes:"ML__base"}),t)),{classes:"ML__latex"}).toMarkup()}function FP(e){if(Array.isArray(e))return e.map((e=>FP(e))).flat();let t="string"==typeof e?{markup:e}:e;return"rows"in t&&Array.isArray(t.rows)&&(t.rows=t.rows.map((e=>e.map((e=>jP(e)))))),null!=t.id||(t.id="ML__layer_"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36)),[t]}function TP(e){if("alphabetic"===e)return function(){var e,t;let n=window.mathVirtualKeyboard.alphabeticLayout;if("auto"===n){let t=TI();t&&(n=t.virtualLayout),(!n||"auto"===n)&&(n=null!=(e={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[iA.locale.slice(0,2)])?e:"qwerty")}let r={qwerty:["qwertyuiop"," asdfghjkl ","^zxcvbnm~"],azerty:["azertyuiop","qsdfghjklm","^ wxcvbn ~"],qwertz:["qwertzuiop"," asdfghjkl ","^yxcvbnm~"],dvorak:["^  pyfgcrl ","aoeuidhtns","qjkxbmwvz~"],colemak:[" qwfpgjluy ","arstdhneio","^zxcvbkm~"]},i=null!=(t=r[n])?t:r.qwerty,a="azerty"===n?[[{label:"1",variants:"1"},{label:"2",shift:{latex:"\xe9"},variants:"2"},{label:"3",shift:{latex:"\xf9"},variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{label:"(",latex:"("},variants:"5"},{label:"6",shift:{label:")",latex:")"},variants:"6"},{label:"7",shift:{latex:"\xe8"},variants:"7"},{label:"8",shift:{latex:"\xea"},variants:"8"},{label:"9",shift:{latex:"\xe7"},variants:"9"},{label:"0",shift:{latex:"\xe0"},variants:"0"}]]:[[{label:"1",variants:"1"},{label:"2",variants:"2"},{label:"3",variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{latex:"\\frac{#@}{#?}"},variants:"5"},{label:"6",shift:{latex:"#@^#?"},variants:"6"},{label:"7",variants:"7"},{label:"8",shift:{latex:"\\times"},variants:"8"},{label:"9",shift:{label:"(",latex:"("},variants:"9"},{label:"0",shift:{label:")",latex:")"},variants:"0"}]];for(let o of i){let e=[];for(let t of o)/[a-z]/.test(t)?e.push({label:t,class:"hide-shift",shift:{label:t.toUpperCase()},variants:AP(t)?t:void 0}):"~"===t?"dvorak"!==n?e.push("[backspace]"):e.push({label:"[backspace]",width:1}):"^"===t?e.push("[shift]"):" "===t&&e.push("[separator-5]");a.push(e)}return a.push(["[-]","[+]","[=]",{label:" ",width:1.5},{label:",",shift:";",variants:".",class:"hide-shift"},"[.]","[left]","[right]",{label:"[action]",width:1.5}]),{label:"abc",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.alphabetic",layers:FP({rows:a})}}();if("string"==typeof e)return"".concat(e),TP(SP[e]);let t;if("rows"in e&&Array.isArray(e.rows)){let n=e,{rows:r}=n,i=Yk(n,["rows"]);t=Jk(Zk({},i),{layers:FP({rows:e.rows})})}else if("markup"in e&&"string"==typeof e.markup){let n=e,{markup:r}=n,i=Yk(n,["markup"]);t=Jk(Zk({},i),{layers:FP(e.markup)})}else t=Zk({},e),"layers"in e?t.layers=FP(e.layers):console.error('MathLive 0.98.6: provide either a "rows", "markup" or "layers" property');let n=!1,r=!1;for(let i of t.layers)if(i.rows)for(let e of i.rows.flat()){WP(e)&&(n=!0);let t=e.command;"string"==typeof t&&["undo","redo","cut","copy","paste"].includes(t)&&(r=!0)}return(!("displayShiftedKeycaps"in e)||void 0===e.displayShiftedKeycaps)&&(t.displayShiftedKeycaps=n),(!("displayEditToolbar"in e)||void 0===e.displayEditToolbar)&&(t.displayEditToolbar=!r),t}function BP(e,t){var n,r;let i='<div class="left">';if(e.normalizedLayouts.length>1)for(let[a,o]of e.normalizedLayouts.entries()){let e=o,s=[a===t?"selected":"layer-switch"];e.tooltip&&s.push("MLK__tooltip"),e.labelClass&&s.push(...e.labelClass.split(" ")),i+='<div class="'.concat(s.join(" "),'"'),e.tooltip&&(i+=" data-tooltip='"+(null!=(n=aA(e.tooltip))?n:e.tooltip)+"' "),a!==t&&(i+='data-layer="'.concat(e.layers[0].id,'"')),i+=">".concat(null!=(r=e.label)?r:"untitled","</div>")}return i+="</div>",i}function LP(e,t){let n="";if("none"===e.editToolbar)return"";let r=[];t.selectionIsCollapsed?r.push("undo","redo","pasteFromClipboard"):r.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let i={undo:"<div class='action ".concat(!1===t.canUndo?"disabled":"","'\n          data-command='\"undo\"'\n          data-tooltip='").concat(aA("tooltip.undo"),"'>\n          <svg><use xlink:href='#svg-undo' /></svg>\n      </div>"),redo:"<div class='action ".concat(!1===t.canRedo?"disabled":"","'\n          data-command='\"redo\"'\n          data-tooltip='").concat(aA("tooltip.redo"),"'>\n          <svg><use xlink:href='#svg-redo' /></svg>\n      </div>"),cutToClipboard:"\n        <div class='action'\n            data-command='\"cutToClipboard\"'\n            data-tooltip='".concat(aA("tooltip.cut to clipboard"),"'>\n            <svg><use xlink:href='#svg-cut' /></svg>\n        </div>\n    "),copyToClipboard:"\n        <div class='action'\n            data-command='\"copyToClipboard\"'\n            data-tooltip='".concat(aA("tooltip.copy to clipboard"),"'>\n            <svg><use xlink:href='#svg-copy' /></svg>\n        </div>\n    "),pasteFromClipboard:"\n        <div class='action'\n            data-command='\"pasteFromClipboard\"'\n            data-tooltip='".concat(aA("tooltip.paste from clipboard"),"'>\n            <svg><use xlink:href='#svg-paste' /></svg>\n        </div>\n    ")};return n+=r.map((e=>i[e])).join(""),n}function OP(e){let t=GP.singleton;if(!t)return;let n={};if(!e.id){if(e.hasAttribute("data-label")&&(n.label=e.dataset.label),e.hasAttribute("data-latex")&&(n.latex=e.dataset.latex),e.hasAttribute("data-key")&&(n.key=e.dataset.key),e.hasAttribute("data-insert")&&(n.insert=e.dataset.insert),e.hasAttribute("data-variants")&&(n.variants=e.dataset.variants),e.hasAttribute("data-aside")&&(n.aside=e.dataset.aside),e.className&&(n.class=e.className),!n.label&&!n.latex&&!n.key&&!n.insert&&(n.latex=e.innerText,n.label=e.innerHTML),e.hasAttribute("data-command"))try{n.command=JSON.parse(e.dataset.command)}catch(r){}e.id=t.registerKeycap(n)}if(!e.innerHTML){let[t,r]=PP(n);e.innerHTML=globalThis.MathfieldElement.createHTML(t)}}function zP(e){e.resetKeycapRegistry(),XO("virtual-keyboard"),XO("core"),cP();let t=document.createElement("div");t.className="ML__keyboard";let n=document.createElement("div");n.className="MLK__plate",n.innerHTML=globalThis.MathfieldElement.createHTML('<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n<symbol id="svg-delete-backward" viewBox="0 0 576 512">\n  <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>\n</symbol>\n\n<symbol id="svg-shift" viewBox="0 0 384 512">\n  <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>\n</symbol>\n\n<symbol id="svg-commit" viewBox="0 0 512 512">\n  <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>\n</symbol>\n\n\n<symbol id="circle-plus" viewBox="0 0 512 512"><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344c0 13.3 10.7 24 24 24s24-10.7 24-24V280h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H280V168c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H168c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"/></symbol>\n\n<symbol id="svg-command" viewBox="0 0 640 512">\n  <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n</symbol>\n\n<symbol id="svg-undo" viewBox="0 0 512 512">\n  <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n</symbol>\n<symbol id="svg-redo" viewBox="0 0 512 512">\n  <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n</symbol>\n<symbol id="svg-arrow-left" viewBox="0 0 320 512">\n  <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>\n</symbol>\n<symbol id="svg-arrow-right" viewBox="0 0 320 512">\n  <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>\n</symbol>\n<symbol id="svg-tab" viewBox="0 0 448 512">\n  <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n</symbol>\n<symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>\n<symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>\n<symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>\n</symbol>\n<symbol id="svg-angle-double-right" viewBox="0 0 512 512"><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/>\n</symbol>\n<symbol id="svg-angle-double-left" viewBox="0 0 512 512"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/>\n</symbol>\n<symbol id="svg-trash" viewBox="0 0 448 512">\n  <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n</symbol>\n<symbol id="svg-keyboard-down" viewBox="0 0 576 512"><path d="M64 48c-8.8 0-16 7.2-16 16V240c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H512c35.3 0 64 28.7 64 64V240c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM159 359c9.4-9.4 24.6-9.4 33.9 0l95 95 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L305 505c-4.5 4.5-10.6 7-17 7s-12.5-2.5-17-7L159 393c-9.4-9.4-9.4-24.6 0-33.9zm1-167c0-8.8 7.2-16 16-16H400c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V192zM120 88h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H200c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H280c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H360c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H440c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16z"/></symbol>\n</svg>'+e.normalizedLayouts.map(((t,n)=>function(e,t,n){let r=[];if(!("layers"in t))return"";for(let i of t.layers)r.push('<div tabindex="-1" class="MLK__layer" id="'.concat(i.id,'">')),(e.normalizedLayouts.length>1||t.displayEditToolbar)&&(r.push("<div class='MLK__toolbar' role='toolbar'>"),r.push(BP(e,n)),t.displayEditToolbar&&r.push('<div class="ML__edit-toolbar right"></div>'),r.push("</div>")),r.push(IP(e,i)),r.push("</div>");return r.join("")}(e,t,n))).join(""));let r=document.createElement("div");r.className="MLK__backdrop",r.appendChild(n),t.appendChild(r),t.addEventListener("pointerdown",KP,{passive:!1});let i=t.querySelectorAll(".ML__edit-toolbar");if(i)for(let o of i)o.addEventListener("click",(t=>{var n,r;let i=t.target,a="";for(;i&&!a;)a=null!=(n=null==i?void 0:i.getAttribute("data-command"))?n:"",i=null!=(r=null==i?void 0:i.parentElement)?r:null;a&&e.executeCommand(JSON.parse(a))}));!function(e){for(let t of e)OP(t)}(t.querySelectorAll(".MLK__keycap, .action, .fnbutton, .bigfnbutton"));let a=t.querySelectorAll(".MLK__layer");a.length;for(let o of a)o.addEventListener("pointerdown",(e=>e.preventDefault()));return e.currentLayer=e.latentLayer,t}function IP(e,t){if("string"==typeof t)return t;let n="";if("string"==typeof t.style?n+="<style>".concat(t.style,"</style>"):"object"==typeof t.style&&(n+="<style>".concat(NP(t.style),"</style>")),t.backdrop&&(n+="<div class='".concat(t.backdrop,"'>")),t.container&&(n+="<div class='".concat(t.container,"'>")),t.rows){n+="<div class=MLK__rows>";for(let r of t.rows){n+='<div dir="ltr" class=MLK__row>';for(let t of r)if(t){let r=e.registerKeycap(t),[i,a]=PP(t);/(^|\s)separator/.test(a)?n+='<div class="'.concat(a,'"'):n+='<div tabindex="-1" id="'.concat(r,'" class="').concat(a,'"'),t.tooltip&&(n+=' data-tooltip="'.concat(t.tooltip,'"')),n+=">".concat(i,"</div>")}n+="</div>"}n+="</div>"}else t.markup&&(n+=t.markup);return t.container&&(n+="</div>"),t.backdrop&&(n+="</div>"),n}function PP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shifted:!1};var n,r,i,a,o,s,l;let u="",c=null!=(n=e.class)?n:"";if(t.shifted&&WP(e)&&(c+=" is-active"),t.shifted&&"shift"in e)"string"==typeof e.shift?u=MP(e.shift):"object"==typeof e.shift&&(u=e.shift.label?e.shift.label:null!=(r=MP(e.shift.latex||e.shift.insert||"")||e.shift.key)?r:""),"object"==typeof e.shift&&(c=null!=(a=null!=(i=e.shift.class)?i:e.class)?a:"");else{if(u=e.label?e.label:null!=(o=MP(e.latex||e.insert||"")||e.key)?o:"",e.shift){let t;t="string"==typeof e.shift?MP(e.shift):e.shift.label?e.shift.label:null!=(s=MP(e.shift.latex||e.shift.insert||"")||e.shift.key)?s:"",u+='<span class="MLK__shift">'.concat(t,"</span>")}e.aside&&(u+="<aside>".concat(e.aside,"</aside>"))}return e.layer&&!/layer-switch/.test(c)&&(c+=" layer-switch"),/(^|\s)(separator|action|shift|fnbutton|bigfnbutton)($|\s)/.test(c)||(c+=" MLK__keycap"),!/\bw[0-9]+\b/.test(c)&&e.width&&(c+=null!=(l={0:" w0",.5:" w5",1.5:" w15",2:" w20",5:" w50"}[e.width])?l:""),[u,c||"MLK__keycap"]}var qP,RP={"[left]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-left /></svg>",command:["performWithFeedback","moveToPreviousChar"],shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-left /></svg>",command:["performWithFeedback","extendSelectionBackward"]}},"[right]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-right /></svg>",command:["performWithFeedback","moveToNextChar"],shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-right /></svg>",command:["performWithFeedback","extendSelectionForward"]}},"[up]":{class:"action hide-shift",label:"\u2191",command:["performWithFeedback","moveUp"],shift:{label:"\u219f",command:["performWithFeedback","extendSelectionUpward"]}},"[down]":{class:"action hide-shift",label:"\u2193",command:["performWithFeedback","moveDown"],shift:{label:"\u21a1",command:["performWithFeedback","extendSelectionDownward"]}},"[return]":{class:"action hide-shift",command:["performWithFeedback","commit"],shift:{command:["performWithFeedback","addRowAfter"]},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[action]":{class:"action hide-shift",command:["performWithFeedback","commit"],shift:{label:"<svg class=svg-glyph><use xlink:href=#circle-plus /></svg>",command:["performWithFeedback","addRowAfter"]},width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[hr]":{class:"separator horizontal-rule"},"[hide-keyboard]":{class:"action",command:["hideVirtualKeyboard"],width:1.5,label:"<svg class=svg-glyph-lg><use xlink:href=#svg-keyboard-down /></svg>"},"[.]":{variants:".",command:["performWithFeedback","insertDecimalSeparator"],shift:",",class:"big-op hide-shift",label:"."},"[,]":{variants:",",command:["performWithFeedback","insertDecimalSeparator"],shift:".",class:"big-op hide-shift",label:","},"[+]":{variants:[{latex:"\\sum_{#0}^{#0}",class:"small"},"\\oplus"],latex:"+",label:"+",class:"big-op hide-shift",shift:{latex:"\\sum",insert:"\\sum",class:"small"}},"[-]":{variants:["\\pm","\\ominus"],latex:"-",label:"&#x2212;",shift:"\\pm",class:"big-op hide-shift"},"[/]":{class:"big-op hide-shift",shift:{class:"",latex:"\\frac{1}{#@}"},variants:["/","\\div","\\%","\\oslash"],latex:"\\frac{#@}{#?}",label:"&divide;"},"[*]":{variants:[{latex:"\\prod_{#0}^{#0}",class:"small"},"\\otimes","\\cdot"],latex:"\\cdot",label:"&times;",shift:{latex:"\\times"},class:"big-op hide-shift"},"[=]":{variants:["\\neq","\\equiv","\\varpropto","\\thickapprox","\\lt","\\gt","\\le","\\ge"],latex:"=",label:"=",shift:{label:"\u2260",latex:"\\ne"},class:"big-op hide-shift"},"[backspace]":{class:"action bottom right hide-shift",width:1.5,command:["performWithFeedback","deleteBackward"],label:"<svg class=svg-glyph><use xlink:href=#svg-delete-backward /></svg>",shift:{class:"action warning",label:"<svg class=svg-glyph><use xlink:href=#svg-trash /></svg>",command:"deleteAll"}},"[undo]":{class:"ghost if-can-undo",command:"undo",label:"<svg class=svg-glyph><use xlink:href=#svg-undo /></svg>",tooltip:"tooltip.undo"},"[redo]":{class:"ghost  if-can-redo",command:"redo",label:"<svg class=svg-glyph><use xlink:href=#svg-redo /></svg>",tooltip:"tooltip.redo"},"[(]":{variants:[{latex:"\\lbrack",key:"["},"\\langle","\\lfloor","\\lceil",{latex:"\\lbrace",key:"{"}],key:"(",label:"(",shift:{label:"[",key:"["},class:"hide-shift"},"[)]":{variants:[{latex:"\\rbrack",key:"]"},"\\rangle","\\rfloor","\\rceil",{latex:"\\rbrace",key:"]"}],key:")",label:")",shift:{label:"]",latex:"\\rbrack"},class:"hide-shift"},"[0]":{variants:"0",latex:"0",label:"0",shift:"\\infty",class:"hide-shift"},"[1]":{variants:"1",latex:"1",label:"1",shift:"#@^{-1}",class:"hide-shift"},"[2]":{variants:"2",latex:"2",label:"2",shift:"#@^2",class:"hide-shift"},"[3]":{variants:"3",latex:"3",label:"3",shift:"#@^3",class:"hide-shift"},"[4]":{variants:"4",latex:"4",label:"4",shift:"#@^4",class:"hide-shift"},"[5]":{variants:"5",latex:"5",label:"5",shift:"#@^5",class:"hide-shift"},"[6]":{variants:"6",latex:"6",label:"6",shift:"#@^6",class:"hide-shift"},"[7]":{variants:"7",latex:"7",label:"7",shift:"#@^7",class:"hide-shift"},"[8]":{variants:"8",latex:"8",label:"8",shift:"#@^8",class:"hide-shift"},"[9]":{variants:"9",latex:"9",label:"9",shift:"#@^9",class:"hide-shift"},"[separator-5]":{class:"separator",width:.5},"[separator]":{class:"separator"},"[separator-10]":{class:"separator"},"[separator-15]":{class:"separator",width:1.5},"[separator-20]":{class:"separator",width:2},"[separator-50]":{class:"separator",width:5},"[shift]":{class:"shift bottom left",width:1.5,label:"<span class=caps-lock-indicator></span><svg class=svg-glyph><use xlink:href=#svg-shift /></svg>"},"[foreground-color]":{variants:"foreground-color",command:["applyStyle",{color:"red"}],label:"<span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'>"},"[background-color]":{variants:"background-color",command:["applyStyle",{backgroundColor:"yellow"}],label:"<span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span>"}};function jP(e){var t;if("string"==typeof e){if("[.]"===e&&","===globalThis.MathfieldElement.decimalSeparator&&(e="[,]"),!RP[e])return{latex:e};e={label:e}}let n;return"label"in e&&e.label&&RP[e.label]&&(n=Jk(Zk(Zk({},RP[e.label]),e),{label:RP[e.label].label})),"key"in e&&e.key&&RP[e.key]&&(n=Jk(Zk(Zk({},RP[e.key]),e),{key:RP[e.key].key})),n?("insertDecimalSeparator"===n.command&&(n.label=null!=(t=globalThis.MathfieldElement.decimalSeparator)?t:"."),"[action]"===e.label&&(n=Zk(Zk({},n),window.mathVirtualKeyboard.actionKeycap)),"[shift]"===e.label&&(n=Zk(Zk({},n),window.mathVirtualKeyboard.shiftKeycap)),"[backspace]"===e.label&&(n=Zk(Zk({},n),window.mathVirtualKeyboard.backspaceKeycap)),"[tab]"===e.label&&(n=Zk(Zk({},n),window.mathVirtualKeyboard.tabKeycap)),n):e}function KP(e){var t;if(0!==e.button)return;let n=GP.singleton;if(!n)return;let r=e.target;for(;r&&!r.getAttribute("data-layer");)r=r.parentElement;if(r)return n.currentLayer=null!=(t=r.getAttribute("data-layer"))?t:"",void e.preventDefault();let i=HP(e.target);if(null==i||!i.id)return;let a=n.getKeycap(i.id);if(!a)return;e.type;let o=new AbortController,s=o.signal;i.classList.add("is-pressed"),i.addEventListener("pointerenter",VP(o),{capture:!0,signal:s}),i.addEventListener("pointerleave",VP(o),{capture:!0,signal:s}),i.addEventListener("pointercancel",VP(o),{signal:s}),i.addEventListener("pointerup",VP(o),{signal:s}),WP(a)&&(i.classList.add("is-active"),n.shiftPressCount++),a.variants&&(qP&&clearTimeout(qP),qP=setTimeout((()=>{i.classList.contains("is-pressed")&&(i.classList.remove("is-pressed"),i.classList.add("is-active"),e.target&&"releasePointerCapture"in e.target&&e.target.releasePointerCapture(e.pointerId),EP(i,(()=>{o.abort(),null==i||i.classList.remove("is-active")})))}),300)),e.preventDefault()}function VP(e){return t=>{let n=HP(t.target);if(null==n||!n.id)return;let r=GP.singleton;if(!r)return;let i=r.getKeycap(n.id);if(i){if("pointerenter"===t.type&&t.target===n&&t.isPrimary&&n.classList.add("is-pressed"),"pointercancel"===t.type)return n.classList.remove("is-pressed"),WP(i)&&(r.shiftPressCount--,n.classList.toggle("is-active",r.isShifted)),void e.abort();if("pointerleave"===t.type&&t.target===n)return n.classList.remove("is-pressed"),void(WP(i)&&(r.shiftPressCount--,n.classList.toggle("is-active",r.isShifted)));if("pointerup"===t.type)return qP&&clearTimeout(qP),WP(i)?n.classList.toggle("is-active",r.isShifted):n.classList.contains("is-pressed")&&(n.classList.remove("is-pressed"),r.isShifted&&i.shift?"string"==typeof i.shift?r.executeCommand(["insert",i.shift,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]):UP(i.shift):UP(i),1===r.shiftPressCount&&!t.shiftKey&&(r.shiftPressCount=0)),e.abort(),void t.preventDefault()}}}function UP(e){var t;let n=e.command;!n&&e.insert&&(n=["insert",e.insert,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),!n&&e.key&&(n=["typedText",e.key,{focus:!0,feedback:!0,simulateKeystroke:!0}]),!n&&e.latex&&(n=["insert",e.latex,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex"}]),n||(n=["typedText",e.label,{focus:!0,feedback:!0,simulateKeystroke:!0}]),null==(t=GP.singleton)||t.executeCommand(n)}function $P(e){if(1!==e.nodeType)return!1;let t=e.classList;return t.contains("MLK__keycap")||t.contains("shift")||t.contains("action")||t.contains("fnbutton")||t.contains("bigfnbutton")}function HP(e){if(!e)return;let t=e;for(;t&&!$P(t);)t=t.parentElement;return null!=t?t:void 0}function WP(e){return!!e.class&&/(^|\s)shift($|\s)/.test(e.class)}var GP=class e{constructor(){var e,t,n;this.originalContainerBottomPadding=null,this.keycapRegistry={},this._shiftPressCount=0,this.targetOrigin=window.origin,this.originValidator="none",this._alphabeticLayout="auto",this._layouts=Object.freeze(["default"]),this._editToolbar="default",this._container=null!=(t=null==(e=window.document)?void 0:e.body)?t:null,this._visible=!1,this._rebuilding=!1,this.observer=new ResizeObserver((e=>{this.adjustBoundingRect(),this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})})),this.listeners={};try{null==(n=window.top)||n.addEventListener("message",this)}catch(r){window.addEventListener("message",this)}document.body.addEventListener("focusin",(e=>{let t=e.target;null!=t&&t.isConnected&&setTimeout((()=>{let e=ZP();e&&!e.readOnly&&"auto"===e.mathVirtualKeyboardPolicy&&("matchMedia"in window?window.matchMedia("(pointer: coarse)").matches:"ontouchstart"in window||navigator.maxTouchPoints>0)&&this.show({animate:!0})}),300)})),document.addEventListener("focusout",(e=>{var t,n;"math-field"===(null==(n=null==(t=e.target)?void 0:t.tagName)?void 0:n.toLowerCase())&&"manual"!==e.target.mathVirtualKeyboardPolicy&&setTimeout((()=>{ZP()||this.hide()}),300)}))}get currentLayer(){var e,t,n;return null!=(n=null==(t=null==(e=this._element)?void 0:e.querySelector(".MLK__layer.is-visible"))?void 0:t.id)?n:""}set currentLayer(e){var t;if(!this._element)return void(this.latentLayer=e);let n=e?this._element.querySelector("#".concat(e,".MLK__layer")):null;n||(n=this._element.querySelector(".MLK__layer")),n&&(null==(t=this._element.querySelector(".MLK__layer.is-visible"))||t.classList.remove("is-visible"),n.classList.add("is-visible")),this.render()}get shiftPressCount(){return this._shiftPressCount}set shiftPressCount(e){var t;this._shiftPressCount=e>2||e<0?0:e,null==(t=this._element)||t.classList.toggle("is-caps-lock",2===this.shiftPressCount),this.render()}get isShifted(){return this._shiftPressCount>0}resetKeycapRegistry(){this.keycapRegistry={}}registerKeycap(e){let t="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);return this.keycapRegistry[t]=e,t}getKeycap(e){return e?this.keycapRegistry[e]:void 0}getLayer(e){let t=this.normalizedLayouts;for(let n of t)for(let t of n.layers)if(t.id===e)return t}get alphabeticLayout(){return this._alphabeticLayout}set alphabeticLayout(e){this._alphabeticLayout=e,this.rebuild()}get actionKeycap(){return this._actionKeycap}set actionKeycap(e){this._actionKeycap="string"==typeof e?{label:e}:e}get shiftKeycap(){return this._shiftKeycap}set shiftKeycap(e){this._shiftKeycap="string"==typeof e?{label:e}:e}get backspaceKeycap(){return this._backspaceKeycap}set backspaceKeycap(e){this._backspaceKeycap="string"==typeof e?{label:e}:e}get tabKeycap(){return this._tabKeycap}set tabKeycap(e){this._tabKeycap="string"==typeof e?{label:e}:e}get layouts(){return this._layouts}set layouts(e){this.updateNormalizedLayouts(e),this.rebuild()}updateNormalizedLayouts(e){let t=Array.isArray(e)?[...e]:[e],n=t.findIndex((e=>"default"===e));n>=0&&t.splice(n,1,"numeric","symbols","alphabetic","greek"),this._layouts=Object.freeze(t),this._normalizedLayouts=t.map((e=>TP(e)))}get normalizedLayouts(){return this._normalizedLayouts||this.updateNormalizedLayouts(this._layouts),this._normalizedLayouts}get editToolbar(){return this._editToolbar}set editToolbar(e){this._editToolbar=e,this.rebuild()}get container(){return this._container}set container(e){this._container=e,this.rebuild()}static get singleton(){if(void 0===this._singleton)try{this._singleton=new e}catch(kC){this._singleton=null}return this._singleton}get style(){return this._style}addEventListener(e,t,n){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(t)||this.listeners[e].add(t)}dispatchEvent(e){return!this.listeners[e.type]||0===this.listeners[e.type].size||(this.listeners[e.type].forEach((t=>{"function"==typeof t?t(e):null==t||t.handleEvent(e)})),!e.defaultPrevented)}removeEventListener(e,t,n){this.listeners[e]&&this.listeners[e].delete(t)}get element(){return this._element}set element(e){var t;this._element!==e&&(null==(t=this._element)||t.remove(),this._element=e)}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get boundingRect(){var e;if(!this._visible)return new DOMRect;let t=null==(e=this._element)?void 0:e.getElementsByClassName("MLK__plate")[0];return t?t.getBoundingClientRect():new DOMRect}adjustBoundingRect(){var e,t;let n=this.boundingRect.height;if(this.container===document.body){null==(e=this._element)||e.style.setProperty("--_keyboard-height","calc(".concat(n,"px + var(--_padding-top) + var(--_padding-bottom) + env(safe-area-inset-bottom, 0))"));let t=n-1;this.container.style.paddingBottom=this.originalContainerBottomPadding?"calc(".concat(this.originalContainerBottomPadding," + ").concat(t,"px)"):"".concat(t,"px")}else null==(t=this._element)||t.style.setProperty("--_keyboard-height","".concat(n,"px"))}rebuild(){if(this._rebuilding||!this._element)return;this._rebuilding=!0;let e=this.currentLayer;requestAnimationFrame((()=>{this._rebuilding=!1,this._element&&(this._element.remove(),this._element=void 0),this.visible&&(this.buildAndAttachElement(),this.currentLayer=e,this.render(),this.adjustBoundingRect(),this._element.classList.add("is-visible"))}))}render(){var e;if(!this._element)return;let t=this.getLayer(this.currentLayer);this._element.classList.toggle("backdrop-is-transparent",!(!t||!t.backdrop&&!t.container));let n=this._element.querySelectorAll(".MLK__layer.is-visible .MLK__keycap, .MLK__layer.is-visible .action, .fnbutton, .MLK__layer.is-visible .bigfnbutton, .MLK__layer.is-visible .shift");if(!n)return;let r=this.isShifted;for(let i of n){let t=this.getKeycap(i.id);if(t){let[n,a]=PP(t,{shifted:r});i.innerHTML=globalThis.MathfieldElement.createHTML(n),i.className=a,r&&"object"==typeof t.shift&&null!=(e=t.shift)&&e.tooltip?i.dataset.tooltip=t.shift.tooltip:!r&&t.tooltip&&(i.dataset.tooltip=t.tooltip)}}}show(e){var t;if(this._visible)return;let n=this.container;if(n&&window.mathVirtualKeyboard&&this.stateWillChange(!0)){if(this._element||(this.buildAndAttachElement(),this.adjustBoundingRect()),!this._visible){let e=this._element.getElementsByClassName("MLK__plate")[0];if(e&&this.observer.observe(e),n===window.document.body){let t=n.style.paddingBottom;this.originalContainerBottomPadding=t;let r=e.offsetHeight-1;n.style.paddingBottom=t?"calc(".concat(t," + ").concat(r,"px)"):"".concat(r,"px")}window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("keydown",this,{capture:!0}),window.addEventListener("keyup",this,{capture:!0}),null==(t=this._element)||t.classList.toggle("is-caps-lock",2===this.shiftPressCount),this.currentLayer=this.latentLayer}this._visible=!0,null!=e&&e.animate?requestAnimationFrame((()=>{this._element&&(this._element.classList.add("animate"),this._element.addEventListener("transitionend",(()=>{var e;return null==(e=this._element)?void 0:e.classList.remove("animate")}),{once:!0}),this._element.classList.add("is-visible"),this.stateChanged())})):(this._element.classList.add("is-visible"),this.stateChanged())}}hide(e){var t;let n=this.container;if(n&&this._visible&&this.stateWillChange(!1)){if(this._visible=!1,this._element){this.latentLayer=this.currentLayer;let e=this._element.getElementsByClassName("MLK__plate")[0];e&&this.observer.unobserve(e),window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("keydown",this,{capture:!0}),window.removeEventListener("keyup",this,{capture:!0}),window.removeEventListener("contextmenu",this,{capture:!0}),kP(),YO("core"),YO("virtual-keyboard"),null==(t=this._element)||t.remove(),this._element=void 0,null!==this.originalContainerBottomPadding&&(n.style.paddingBottom=this.originalContainerBottomPadding)}this.stateChanged()}}get height(){var e,t;return null!=(t=null==(e=this.element)?void 0:e.offsetHeight)?t:0}buildAndAttachElement(){var e;this.element,this.element=zP(this),window.addEventListener("contextmenu",this,{capture:!0}),this.element.addEventListener("contextmenu",(e=>{e.shiftKey||((e.ctrlKey||2===e.button)&&EP(e.target),e.preventDefault(),e.stopPropagation())}),{capture:!0}),null==(e=this.container)||e.appendChild(this.element)}handleEvent(e){if(DP(e)){if(!$O(e.origin,this.originValidator))throw new DOMException("Message from unknown origin (".concat(e.origin,") cannot be handled"),"SecurityError");"disconnect"===e.data.action?this.connectedMathfieldWindow=void 0:"update-setting"!==e.data.action&&"proxy-created"!==e.data.action&&"execute-command"!==e.data.action&&(e.source,this.connectedMathfieldWindow=e.source),this.handleMessage(e.data,e.source)}if(this._element)switch(e.type){case"mouseup":case"blur":document.body.style.userSelect="",this.shiftPressCount=0;break;case"contextmenu":2!==e.button&&e.preventDefault();break;case"keydown":"Shift"===e.key&&!e.repeat&&(this.shiftPressCount=1);break;case"keyup":("Shift"===e.key||!e.getModifierState("Shift")&&2!==this.shiftPressCount)&&(this.shiftPressCount=0)}}handleMessage(e,t){let{action:n}=e;if("execute-command"!==n){if(("connect"===n||"show"===n)&&this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},t),"disconnect"!==n&&window===window.top){if("show"===n)return void("undefined"!=typeof e.animate?this.show({animate:e.animate}):this.show());if("hide"===n)return void("undefined"!=typeof e.animate?this.hide({animate:e.animate}):this.hide());if("update-setting"===n)return e.alphabeticLayout&&(this.alphabeticLayout=e.alphabeticLayout),e.layouts&&(this.layouts=e.layouts),void(e.editToolbar&&(this.editToolbar=e.editToolbar));if("proxy-created"===n)return void this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},t)}}else{let{command:t}=e,n=bP(t);if(void 0!==window.top&&"virtual-keyboard"!==n)return;this.executeCommand(t)}}sendMessage(e,t,n){if(n||(n=this.connectedMathfieldWindow),null!==this.targetOrigin&&"null"!==this.targetOrigin&&n!==window){if(n)n.postMessage(Zk({type:xP,action:e},t),{targetOrigin:this.targetOrigin});else if(t.command&&this.dispatchEvent(new CustomEvent("math-virtual-keyboard-command",{detail:t.command})),"execute-command"===e&&Array.isArray(t.command)&&"insert"===t.command[0]){let e=t.command[1].split("");for(let t of e)this.dispatchEvent(new KeyboardEvent("keydown",{key:t,bubbles:!0})),this.dispatchEvent(new KeyboardEvent("keyup",{key:t,bubbles:!0}))}}else window.dispatchEvent(new MessageEvent("message",{source:window,data:Zk({type:xP,action:e},t)}))}stateWillChange(e){return this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:e},bubbles:!0,cancelable:!0,composed:!0}))}stateChanged(){this.dispatchEvent(new Event("virtual-keyboard-toggle")),this._visible||(this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect}))}focus(){this.sendMessage("focus",{})}blur(){this.sendMessage("blur",{})}updateToolbar(e){let t=this._element;if(!t)return;t.classList.toggle("is-math-mode","math"===e.mode),t.classList.toggle("is-text-mode","text"===e.mode),t.classList.toggle("can-undo",e.canUndo),t.classList.toggle("can-redo",e.canRedo),t.classList.toggle("can-copy",!e.selectionIsCollapsed),t.classList.toggle("can-copy",!e.selectionIsCollapsed),t.classList.toggle("can-paste",!0);let n=t.querySelectorAll(".ML__edit-toolbar");if(n)for(let r of n)r.innerHTML=LP(this,e)}update(e){this._style=e.style,this.updateToolbar(e)}connect(){this.connectedMathfieldWindow=window}disconnect(){this.connectedMathfieldWindow=void 0}executeCommand(e){let t,n=[],r=bP(e);return Qk(e)?(t=e[0],"performWithFeedback"===t&&(r=bP(e=e.slice(1))),n=e.slice(1)):t=e,t=t.replace(/-\w/g,(e=>e[1].toUpperCase())),"virtual-keyboard"===r?gP[t].fn(void 0,...n):(this.sendMessage("execute-command",{command:e}),!1)}dispose(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("message",this)}};function ZP(){var e,t;let n=PI(),r=null;for(;n;){if("host"in n&&"math-field"===(null==(t=null==(e=n.host)?void 0:e.tagName)?void 0:t.toLowerCase())){r=n.host;break}n=n.parentNode}return r}if(eA()&&!("mathVirtualKeyboard"in window))if(window===window.top){let e=GP.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>e})}else Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>_P.singleton,configurable:!0});function JP(e){let t={};for(let n of Object.keys(e))switch(n){case"scriptDepth":let r=e.scriptDepth;if(Qk(r))t.scriptDepth=[r[0],r[1]];else if("number"==typeof r)t.scriptDepth=[r,r];else{if("string"!=typeof r)throw new TypeError("Unexpected value for scriptDepth");{let[e,n]=r.split(",").map((e=>parseInt(e.trim())));t.scriptDepth=[e,n]}}break;case"mathVirtualKeyboardPolicy":let i=e.mathVirtualKeyboardPolicy.toLowerCase();if("sandboxed"===i){if(window!==window.top){let e=GP.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>e})}i="manual"}t.mathVirtualKeyboardPolicy=i;break;case"letterShapeStyle":"auto"===e.letterShapeStyle?iA.locale.startsWith("fr")?t.letterShapeStyle="french":t.letterShapeStyle="tex":t.letterShapeStyle=e.letterShapeStyle;break;case"defaultMode":["text","math","inline-math"].includes(e.defaultMode)?t.defaultMode=e.defaultMode:(console.error('MathLive 0.98.6:  valid values for defaultMode are "text", "math" or "inline-math"'),t.defaultMode="math");break;case"macros":t.macros=UA(e.macros);break;default:Qk(e[n])?t[n]=[...e[n]]:"object"!=typeof e[n]||e[n]instanceof Element||"computeEngine"===n?t[n]=e[n]:t[n]=Zk({},e[n])}return t}function XP(e,t){let n;n="string"==typeof t?[t]:void 0===t?Object.keys(e):t;let r={};for(let i of n)null===e[i]?r[i]=null:Qk(e[i])?r[i]=[...e[i]]:"object"!=typeof e[i]||e[i]instanceof Element||"computeEngine"===i?r[i]=e[i]:r[i]=Zk({},e[i]);return"string"==typeof t?r[t]:r}function YP(){return{readOnly:!1,defaultMode:"math",macros:{},registers:{},colorMap:pA,backgroundColorMap:hA,letterShapeStyle:iA.locale.startsWith("fr")?"french":"tex",minFontScale:0,smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,isImplicitFunction:e=>["\\sin","\\cos","\\tan","\\arcsin","\\arccos","\\arctan","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th","\\lg","\\lb","\\log","\\ln"].includes(e),mathModeSpace:"",placeholderSymbol:"\u25a2",contentPlaceholder:"",popoverPolicy:"auto",environmentPopoverPolicy:"off",keybindings:zO,inlineShortcuts:EO,inlineShortcutTimeout:0,mathVirtualKeyboardPolicy:"auto",virtualKeyboardTargetOrigin:null==window?void 0:window.origin,originValidator:"none",onInlineShortcut:()=>"",onScrollIntoView:null,onExport:BO,value:""}}function QP(e){return"inline-math"===e.defaultMode?"math":e.defaultMode}function eq(e,t){!e||!t||(Qk(e)?e.forEach((e=>eq(e,t))):"object"==typeof e&&!e.style.color&&!e.style.backgroundColor&&!e.style.fontFamily&&!e.style.fontShape&&!e.style.fontSeries&&!e.style.fontSize&&!e.style.variant&&!e.style.variantStyle&&(e.applyStyle(t),eq(e.body,t),eq(e.above,t),eq(e.below,t),eq(e.subscript,t),eq(e.superscript,t)))}function tq(e,t,n,r){function i(e,t){for(let n of a)if(n.style[e]!==t)return!1;return!0}if((t=e.normalizeRange(t))[0]===t[1])return!1;let a=e.getAtoms(t,{includeChildren:!0});"toggle"===r.operation&&(n.color&&i("color",n.color)&&(n.color="none",delete n.verbatimColor),n.backgroundColor&&i("backgroundColor",n.backgroundColor)&&(n.backgroundColor="none",delete n.verbatimBackgroundColor),n.fontFamily&&i("fontFamily",n.fontFamily)&&(n.fontFamily="none"),n.fontSeries&&i("fontSeries",n.fontSeries)&&(n.fontSeries="auto"),n.fontShape&&i("fontShape",n.fontShape)&&(n.fontShape="auto"),n.fontSize&&i("fontSize",n.fontSize)&&(n.fontSize=5),n.variant&&i("variant",n.variant)&&(n.variant="normal"),n.variantStyle&&i("variantStyle",n.variantStyle)&&(n.variantStyle=""));for(let o of a)o.applyStyle(n);return!0}function nq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(e){for(let t of e)for(let e of t)if(e.length>0)return!1;return!0}(e)?Array(t).fill([[new gO({type:"first"}),new gz]]):e.map((e=>0===e.length?[[new gO({type:"first"})]]:e.map((e=>0===e.length?[new gO({type:"first"})]:("first"!==e[0].type&&e.unshift(new gO({type:"first"})),e)))))}function rq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[[[]]],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];switch(t=nq(t,["split","align","align*","aligned","eqnarray"].includes(e)?2:1),e){case"math":case"displaymath":return new wz(e,t,n,{mathstyleName:"textstyle"});case"center":return new wz(e,t,n,{columns:[{align:"c"}]});case"multline":case"multline*":return new wz(e,t,n,{columns:[{align:"m"}],leftDelim:".",rightDelim:"."});case"split":return new wz(e,t,n,{columns:[{align:"r"},{align:"l"}],minColumns:2});case"gather":case"gathered":return new wz(e,t,n,{columns:[{gap:.25},{align:"c"},{gap:0}]});case"pmatrix":case"pmatrix*":return new wz(e,t,n,{mathstyleName:"textstyle",leftDelim:"(",rightDelim:")",columns:iq(r[0])});case"bmatrix":case"bmatrix*":return new wz(e,t,n,{mathstyleName:"textstyle",leftDelim:"[",rightDelim:"]",columns:iq(r[0])});case"Bmatrix":case"Bmatrix*":return new wz(e,t,n,{mathstyleName:"textstyle",leftDelim:"\\lbrace",rightDelim:"\\rbrace",columns:iq(r[0])});case"vmatrix":case"vmatrix*":return new wz(e,t,n,{mathstyleName:"textstyle",leftDelim:"\\vert",rightDelim:"\\vert",columns:iq(r[0])});case"Vmatrix":case"Vmatrix*":return new wz(e,t,n,{mathstyleName:"textstyle",leftDelim:"\\Vert",rightDelim:"\\Vert",columns:iq(r[0])});case"matrix":case"matrix*":return new wz(e,t,n,{mathstyleName:"textstyle",leftDelim:".",rightDelim:".",columns:iq(null==r?void 0:r[0])});case"smallmatrix":case"smallmatrix*":return new wz(e,t,n,{mathstyleName:"scriptstyle",columns:iq(null==r?void 0:r[0]),colSeparationType:"small",arraystretch:.5});case"cases":case"dcases":return new wz(e,t,n,{mathstyleName:"dcases"===e?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]});case"rcases":return new wz(e,t,n,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]});case"lines":return new wz(e,t,n,{leftDelim:".",rightDelim:".",columns:[{align:"l"}]});case"align":case"align*":case"aligned":case"eqnarray":{let r=0;for(let e of t)r=Math.max(r,e.length);let i=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],a=2;for(;a<r;)i.push({gap:1},{align:"r"},{gap:.25},{align:"l"}),a+=2;return i.push({gap:0}),new wz(e,t,n,{arraycolsep:0,columns:i,minColumns:2})}}return new wz(e,t,n,{mathstyleName:"textstyle"})}function iq(e){return null!=e?e:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}]}function aq(e,t,n){let r=e.getCell(t,n);return!(!r||2!==r.length)&&"placeholder"===r[1].type}function oq(e,t,n,r){let i=function(e,t,n,r){let i=t.getCell(n,r);return i?[e.offsetOf(i[0]),e.offsetOf(i[i.length-1])]:-1}(e,t,n,r);"number"!=typeof i&&e.setSelection(i)}function sq(e,t,n,r,i){let a=t.getCell(n,r);a&&e.setPositionHandlingPlaceholder(e.offsetOf(a["start"===i?0:a.length-1]))}function lq(e,t){let[n,[r,i]]=function(e,t){let n=e.at(e.position);for(;n&&!(n.parent instanceof wz);)n=n.parent;if(n&&"array"===n.type&&n.environmentName,!n||!(n.parent instanceof wz)){let r=e.at(e.position);if(n=r,!n.parent.parent){let n,i=e.extractAtoms([e.position,e.lastOffset]),a=e.extractAtoms([0,e.position]);return 0===a.length&&(a=hq()),0===i.length&&(i=hq()),t.endsWith("column")?(n=rq("split",[[a,i]]),e.root=n,aq(n,0,0)?oq(e,n,0,0):aq(n,0,1)?oq(e,n,0,1):e.position=e.offsetOf(r)):(n=rq("lines",[[a],[i]]),e.root=n,aq(n,0,0)?oq(e,n,0,0):aq(n,1,0)?oq(e,n,1,0):e.position=e.offsetOf(r)),[void 0,[0,0]]}if(n.parent instanceof Mz){let r=n.parent,i=e.extractAtoms([e.position,e.offsetOf(r.lastChild)]),a=e.extractAtoms([e.offsetOf(r.firstChild),e.position]);0===a.length&&(a=hq()),0===i.length&&(i=hq());let o="pmatrix",s=r.leftDelim,l=r.rightDelim;"("!==s||")"!==l&&"?"!==l?"["!==s&&"\\lbrack"!==s||"]"!==l&&"\\rbrack"!==l&&"?"!==l?"\\vert"===s&&"\\vert"===l?o="vmatrix":"\\Vert"===s&&"\\Vert"===l?o="Vmatrix":("{"===s||"\\lbrace"===s)&&("."===l||"?"===l)&&(o="cases"):o="bmatrix":o="pmatrix";let u=rq(o,t.endsWith("column")?[[a,i]]:[[a],[i]]);return r.parent.addChildBefore(u,r),r.parent.removeChild(r),aq(u,0,0)?oq(e,u,0,0):t.endsWith("column")?aq(u,0,1)?oq(e,u,0,1):e.position=e.offsetOf(n):aq(u,1,0)?oq(e,u,1,0):e.position=e.offsetOf(n),[void 0,[0,0]]}}return n&&n.parent instanceof wz?[n.parent,n.parentBranch]:[void 0,[0,0]]}(e,t);if(n)switch(t){case"after row":n.addRowAfter(r),sq(e,n,r+1,0,"end");break;case"after column":if(n.maxColumns<=n.colCount)return void e.announce("plonk");n.addColumnAfter(i),sq(e,n,r,i+1,"end");break;case"before row":n.addRowBefore(r),sq(e,n,r,0,"start");break;case"before column":if(n.maxColumns<=n.colCount)return void e.announce("plonk");n.addColumnBefore(i),sq(e,n,r,i,"start")}}function uq(e){return!!e.contentWillChange({inputType:"insertText"})&&(lq(e,"after row"),e.contentDidChange({inputType:"insertText"}),!0)}function cq(e){return!!e.contentWillChange({inputType:"insertText"})&&(lq(e,"after column"),e.contentDidChange({inputType:"insertText"}),!0)}function dq(e,t){if(!e.contentWillChange({}))return!1;e.mathfield.snapshot();let n=".",r=".";switch(t){case"pmatrix":case"pmatrix*":n="(",r=")";break;case"bmatrix":case"bmatrix*":n="[",r="]";break;case"Bmatrix":case"Bmatrix*":n="\\lbrace",r="\\rbrace";break;case"vmatrix":case"vmatrix*":n="\\vert",r="\\vert";break;case"Vmatrix":case"Vmatrix*":n="\\Vert",r="\\Vert";break;case"matrix":case"matrix*":n=".",r=".";break;case"cases":case"dcases":n="\\lbrace";break;case"rcases":r="\\rbrace"}let i=e.at(e.position),a="array"===i.type?i:e.parentEnvironment;return a.environmentName=t,a.leftDelim=n,a.rightDelim=r,e.contentDidChange({}),!0}function pq(e,t){let n=e.at(e.position);for(;n&&!(Array.isArray(n.parentBranch)&&n.parent instanceof wz);)n=n.parent;if(Array.isArray(null==n?void 0:n.parentBranch)&&(null==n?void 0:n.parent)instanceof wz){let r,i=n.parent,a=n.parentBranch;switch(t){case"row":if(i.rowCount>1){i.removeRow(a[0]);let t=i.getCell(Math.max(0,a[0]-1),a[1]);r=e.offsetOf(t[t.length-1])}break;case"column":if(i.colCount>i.minColumns){i.removeColumn(a[1]);let t=i.getCell(a[0],Math.max(0,a[1]-1));r=e.offsetOf(t[t.length-1])}}r&&e.setPositionHandlingPlaceholder(r)}}function hq(){return[new gz]}qA(["math","displaymath"],rq),qA("center",rq),jA("displaylines","",{parse:e=>{let t=[],n=[];for(e.beginContext({tabular:!0});;){if(e.end()||e.match("<}>"))break;e.matchColumnSeparator()||e.matchRowSeparator()?(t.push([n]),n=[]):n.push(...e.scan((e=>["<}>","&","\\cr","\\\\","\\tabularnewline"].includes(e))))}return e.endContext(),t.push([n]),t},createAtom:e=>new wz("lines",e.args,[],{leftDelim:".",rightDelim:".",columns:[{align:"l"}]})}),RA("array","{columns:colspec}",((e,t,n,r)=>new wz(e,nq(t),n,{columns:r[0],mathstyleName:"textstyle"}))),RA(["equation","equation*","subequations"],"",((e,t,n)=>new wz(e,nq(t),n,{columns:[{align:"c"}]}))),RA(["multline","multline*"],"",rq),RA(["align","align*","aligned","eqnarray"],"",rq),RA("split","",rq),RA(["gather","gather*","gathered"],"",rq),RA(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",rq),RA(["smallmatrix","smallmatrix*"],"[columns:colspec]",rq),RA(["cases","dcases","rcases"],"",rq),vP({addRowAfter:uq,addColumnAfter:cq,addRowBefore:function(e){return!!e.contentWillChange({inputType:"insertText"})&&(lq(e,"before row"),e.contentDidChange({inputType:"insertText"}),!0)},addColumnBefore:function(e){return!!e.contentWillChange({inputType:"insertText"})&&(lq(e,"before column"),e.contentDidChange({inputType:"insertText"}),!0)},removeRow:function(e){return!!e.contentWillChange({inputType:"deleteContent"})&&(pq(e,"row"),e.contentDidChange({inputType:"deleteContent"}),!0)},removeColumn:function(e){return!!e.contentWillChange({inputType:"deleteContent"})&&(pq(e,"column"),e.contentDidChange({inputType:"deleteContent"}),!0)},setEnvironment:dq},{target:"model",canUndo:!0,changeContent:!0,changeSelection:!0});var fq=class e{constructor(e){this.recording=!1,this.model=e,this.reset()}reset(){this.stack=[],this.index=-1,this.lastOp=""}startRecording(){this.recording=!0}stopRecording(){this.recording=!1}canUndo(){return this.index-1>=0}canRedo(){return this.stack.length-1>this.index}stopCoalescing(e){e&&this.index>=0&&(this.stack[this.index].selection=e),this.lastOp=""}undo(){return!!this.canUndo()&&(this.model.setState(this.stack[this.index-1],{silenceNotifications:!1,type:"undo"}),this.index-=1,this.lastOp="",!0)}redo(){return!!this.canRedo()&&(this.index+=1,this.model.setState(this.stack[this.index],{silenceNotifications:!1,type:"redo"}),this.lastOp="",!0)}pop(){this.canUndo()&&(this.stack.splice(this.index,this.stack.length-this.index),this.index-=1)}snapshot(t){return!!this.recording&&(t&&t===this.lastOp&&this.pop(),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index+=1,this.stack.length>e.maximumDepth&&(this.stack.shift(),this.index-=1),this.lastOp=null!=t?t:"",!0)}};fq.maximumDepth=1e3;var mq=fq;function gq(e,t,n){if("text"!==e.at(t).mode)return t;let r,i="backward"===n?-1:1;if(SA.test(e.at(t).value)){let n,a=t;do{n="text"===e.at(a).mode&&SA.test(e.at(a).value),a+=i}while(e.at(a)&&n);r=e.at(a)?a-2*i:a-i}else if(/\s/.test(e.at(t).value)){let n=t;for(;e.at(n)&&"text"===e.at(n).mode&&/\s/.test(e.at(n).value);)n+=i;if(e.at(n)){let t=!0;do{t="text"===e.at(n).mode&&!/\s/.test(e.at(n).value),n+=i}while(e.at(n)&&t);r=e.at(n)?n-2*i:n-i}else r=n-i}else{let n=t;for(;e.at(n)&&"text"===e.at(n).mode&&!/\s/.test(e.at(n).value);)n+=i;r=e.at(n)?n:n-i;let a=!0;for(;e.at(n)&&a;)a="text"===e.at(n).mode&&/\s/.test(e.at(n).value),a&&(r=n),n+=i;r=e.at(n)?n-2*i:n-i}return r-(i>0?0:1)}function vq(e,t,n){var r,i,a,o,s,l,u;let c=e.position;null!=(r=null==n?void 0:n.extend)&&r||e.collapseSelection(t);let d=e.at(e.position);if("forward"===t&&("subsup"===d.type?(d=d.rightSibling,d||(d=e.at(e.position+1))):d=e.at(e.position+1)),!d)return e.announce("plonk"),!1;let p=e.offsetOf(d);if(d instanceof bO)p=gq(e,p,t);else if(d instanceof Jz)if(d.isSuggestion)for(;d&&d instanceof Jz;)d.isSuggestion=!1,p=e.offsetOf(d),d=d.rightSibling;else if("forward"===t){if(d=d.rightSibling,!d||!(d instanceof Jz))return e.announce("plonk"),!1;for(;d&&d instanceof Jz&&/[a-zA-Z\*]/.test(d.value);)p=e.offsetOf(d),d=d.rightSibling}else{if(d=d.leftSibling,!d||!(d instanceof Jz))return e.announce("plonk"),!1;for(;d&&d instanceof Jz&&/[a-zA-Z\*]/.test(d.value);)p=e.offsetOf(d),d=d.leftSibling}else if("forward"===t&&"mopen"===d.type){let t=0;do{"mopen"===d.type?t+=1:"mclose"===d.type&&(t-=1),d=d.rightSibling}while(!d.isLastSibling&&0!==t);p=e.offsetOf(d.leftSibling)}else if("backward"===t&&"mclose"===d.type){let t=0;do{"mopen"===d.type?t+=1:"mclose"===d.type&&(t-=1),d=d.leftSibling}while(!d.isFirstSibling&&0!==t);p=e.offsetOf(d)}else if("backward"===t)if("first"===d.type)for(;p>0&&"first"===d.type;)p-=1,d=e.at(p);else{let t=d.type;"subsup"===d.type&&(p=e.offsetOf(e.at(p).leftSibling)),p-=1;let n=null==(i=e.at(p))?void 0:i.type;for(;p>=0&&n===t;)"subsup"===(null==(a=e.at(p))?void 0:a.type)?p=e.offsetOf(e.at(p).leftSibling):p-=1,n=e.at(p).type}else{let{type:t}=d,n=null==(o=e.at(p))?void 0:o.type,{lastOffset:r}=e;for(;p<=r&&(n===t||"subsup"===n);){for(;"subsup"===(null==(s=e.at(p).rightSibling)?void 0:s.type);)p=e.offsetOf(e.at(p).rightSibling);p+=1,n=null==(l=e.at(p))?void 0:l.type}p-=1}if(null!=(u=null==n?void 0:n.extend)&&u){if(!e.setSelection(e.anchor,p))return e.announce("plonk"),!1}else{if(p===e.position)return e.announce("plonk"),!1;e.position=p}return e.announce("move",c),e.mathfield.stopCoalescingUndo(),!0}function yq(e,t,n){var r,i;if(n=null!=n?n:{extend:!1},e.mathfield.adoptStyle="backward"===t?"right":"left","forward"!==t){let[t,n]=WI(e);void 0!==t&&void 0!==n&&e.deleteAtoms([t,n])}if("upward"===t)return function(e,t){var n,r;let i=null!=(n=null==t?void 0:t.extend)&&n;i||e.collapseSelection("backward");let a=()=>{var t,n;let r=!0;return e.silenceNotifications||(r=null==(n=null==(t=e.mathfield.host)?void 0:t.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))||n),e.announce(r?"plonk":"line"),r},o=e.at(e.position),s=o;for(;s&&"below"!==s.parentBranch&&!(Array.isArray(s.parentBranch)&&s.parent instanceof wz);)s=s.parent;if(Array.isArray(null==s?void 0:s.parentBranch)&&s.parent instanceof wz){let t=s.parent;if(s.parentBranch[0]<1)return a();let n=s.parentBranch[0]-1,r=t.array[n][s.parentBranch[1]];if(!r.some((e=>"prompt"===e.type&&!e.captureSelection))&&e.mathfield.hasEditablePrompts)return a();Dq(e,o,r,i,"up")}else{if(!s)return a();{let t=null!=(r=s.parent.branch("above"))?r:s.parent.createBranch("above");if(!t.some((e=>"prompt"===e.type&&e.placeholderId))&&e.mathfield.hasEditablePrompts)return a();Dq(e,o,t,i,"up")}}return e.mathfield.stopCoalescingUndo(),!0}(e,n);if("downward"===t)return function(e,t){var n,r;let i=null!=(n=null==t?void 0:t.extend)&&n;i||e.collapseSelection("forward");let a=()=>{var t,n;let r=!0;return e.silenceNotifications||(r=null==(n=null==(t=e.mathfield.host)?void 0:t.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))||n),e.announce(r?"plonk":"line"),r},o=e.at(e.position),s=o;for(;s&&"above"!==s.parentBranch&&!(Array.isArray(s.parentBranch)&&s.parent instanceof wz);)s=s.parent;if(Array.isArray(null==s?void 0:s.parentBranch)&&s.parent instanceof wz){let t=s.parent;if(s.parentBranch[0]+1>t.array.length-1)return a();let n=s.parentBranch[0]+1,r=t.array[n][s.parentBranch[1]];if(!r.some((e=>"prompt"===e.type&&!e.captureSelection))&&e.mathfield.hasEditablePrompts)return a();Dq(e,o,r,i,"down")}else{if(!s)return a();{let t=null!=(r=s.parent.branch("below"))?r:s.parent.createBranch("below");if(!t.some((e=>"prompt"===e.type))&&e.mathfield.hasEditablePrompts)return a();Dq(e,o,t,i,"down")}}return!0}(e,n);if(n.extend){let n=bq(e,e.position,t);n<0&&(n=0),n>e.lastOffset&&(n=e.lastOffset);let r=e.setSelection(e.anchor,n);return e.mathfield.stopCoalescingUndo(),r}if(e.selectionIsPlaceholder){e.collapseSelection(t);let n=yq(e,t);return e.mathfield.stopCoalescingUndo(),n}let a=e.position,o=a;if(e.collapseSelection(t)?(a=e.position,xq(e,a)||(a=bq(e,a,t))):a=bq(e,a,t),a<0||a>e.lastOffset){let n=!0;return e.silenceNotifications||(n=null==(i=null==(r=e.mathfield.host)?void 0:r.dispatchEvent(new CustomEvent("move-out",{detail:{direction:t},cancelable:!0,bubbles:!0,composed:!0})))||i),n&&e.announce("plonk"),n}return e.setPositionHandlingPlaceholder(a),e.mathfield.stopCoalescingUndo(),e.announce("move",o),!0}function bq(e,t,n){return(t+="forward"===n?1:-1)<0||t>e.lastOffset||xq(e,t)?t:bq(e,t,n)}function xq(e,t){var n;let r=e.at(t),i=r.parent;for(;i&&!i.inCaptureSelection;)i=i.parent;return!(null!=i&&i.inCaptureSelection||null!=(n=r.parent)&&n.skipBoundary&&(!r.isFirstSibling&&r.isLastSibling||"first"===r.type)||e.mathfield.hasEditablePrompts&&!r.parentPrompt)}function Dq(e,t,n,r,i){let a=e.mathfield.hasEditablePrompts,o=a?n.filter((e=>"prompt"===e.type&&!e.captureSelection)):n,s=HO(e.mathfield.getHTMLElement(t)).right,l=e.offsetOf(function(e,t,n){let r=1/0,i=0;for(;i<t.length;i++){let a=HO(e.getHTMLElement(t[i])).right,o=Math.abs(n-a);if(!(o<=r))break;r=o}return t[i-1]}(e.mathfield,o,s))-(a?1:0);if(r){let t,[n,r]=e.selection.ranges[0];t=l<("up"===i?n:r)?{ranges:[[l,r]],direction:"backward"}:{ranges:[[n,l]],direction:"forward"},e.setSelection(t)}else e.setPositionHandlingPlaceholder(l);e.announce("move ".concat(i))}function wq(e){let t=e.position,n=e.at(t).parent;return null!=n&&n.parent?(e.position=e.offsetOf(n),e.mathfield.stopCoalescingUndo(),e.announce("move",t),!0):(e.announce("plonk"),!1)}function _q(e){var t;if(e.collapseSelection(),function(e){let t=0,n=e.at(e.position),r=!1;for(;n;)(!n.hasEmptyBranch("superscript")||!n.hasEmptyBranch("subscript"))&&(t+=1),n.hasEmptyBranch("superscript")?n.hasEmptyBranch("subscript")||(r=!1):r=!0,n=n.parent;return r?t:0}(e)>=e.mathfield.options.scriptDepth[1])return e.announce("plonk"),!1;let n=e.at(e.position);return void 0===n.subsupPlacement&&("subsup"!==(null==(t=n.rightSibling)?void 0:t.type)&&n.parent.addChildAfter(new Oz({style:n.computedStyle}),n),n=n.rightSibling),n.createBranch("superscript"),e.setSelection(e.getSiblingsRange(e.offsetOf(n.superscript[0]))),!0}function Sq(e){var t;if(e.collapseSelection(),function(e){let t=0,n=e.at(e.position),r=!1;for(;n;)(!n.hasEmptyBranch("superscript")||!n.hasEmptyBranch("subscript"))&&(t+=1),n.hasEmptyBranch("superscript")?n.hasEmptyBranch("subscript")||(r=!0):r=!1,n=n.parent;return r?t:0}(e)>=e.mathfield.options.scriptDepth[0])return e.announce("plonk"),!1;let n=e.at(e.position);return void 0===n.subsupPlacement&&("subsup"!==(null==(t=e.at(e.position+1))?void 0:t.type)&&n.parent.addChildAfter(new Oz({style:e.at(e.position).computedStyle}),n),n=e.at(e.position+1)),n.createBranch("subscript"),e.setSelection(e.getSiblingsRange(e.offsetOf(n.subscript[0]))),!0}function Cq(){function e(e){return!(!function(e){return!(e.disabled||"hidden"===e.type&&"INPUT"===e.tagName.toUpperCase()||function(e){if(!eA()||e===document.activeElement||e.contains(document.activeElement))return!1;if("hidden"===getComputedStyle(e).visibility)return!0;let t=e.getBoundingClientRect();if(0===t.width||0===t.height)return!0;for(;e;){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(e))}(e)||function(e){return"INPUT"===e.tagName.toUpperCase()&&"radio"===e.type&&!function(e){var t;if(!e.name)return!0;let n=(null!=(t=e.form)?t:e.ownerDocument).querySelectorAll('input[type="radio"][name="'+e.name+'"]'),r=function(e,t){for(let n of e)if(n.checked&&n.form===t)return n;return null}(n,e.form);return!r||r===e}(e)}(e)||t(e)<0)}function t(e){var t;let n=Number.parseInt(null!=(t=e.getAttribute("tabindex"))?t:"NaN",10);return Number.isNaN(n)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:n}return eA()?function(n){let r=[],i=[];return[...n.querySelectorAll('input, select, textarea, a[href], button,\n        [tabindex], audio[controls], video[controls],\n        [contenteditable]:not([contenteditable="false"]), details>summary')].filter(e).forEach(((e,n)=>{let a=t(e);0===a?r.push(e):i.push({documentOrder:n,tabIndex:a,node:e})})),i.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(r)}(document.body):[]}function Eq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"forward",r=e.position;if(Array.isArray(t)){let i=e.offsetOf(t[0]),a=e.offsetOf(t[t.length-1]);return"forward"===n?e.setSelection(i,a):e.setSelection(a,i),e.announce("move",r),e.mathfield.stopCoalescingUndo(),!0}return Eq(e,"forward"===n?[t.leftSibling,t]:[t,t.leftSibling])}function kq(e,t){let n=e.position;if("number"==typeof t&&(t=e.at(t)),"prompt"===t.type)e.setSelection(e.offsetOf(t.firstChild),e.offsetOf(t.lastChild));else{let n=e.offsetOf(t);"placeholder"===t.type?e.setSelection(n-1,n):e.position=n}return e.announce("move",n),e.mathfield.stopCoalescingUndo(),!0}function Aq(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var r,i;let a="forward"===t?1:-1;"placeholder"===e.at(e.anchor).type&&yq(e,t);let o,s=e.at(e.anchor).parentPrompt;o=s?"forward"===t?e.offsetOf(s)+1:e.offsetOf(s.leftSibling):Math.max(e.position+a,0);let l=Nq(e,o,t);if(!l||"forward"===t&&e.offsetOf(l)<o||"backward"===t&&e.offsetOf(l)>o){if(!n||null!=(i=null==(r=e.mathfield.host)?void 0:r.dispatchEvent(new CustomEvent("move-out",{detail:{direction:t},cancelable:!0,bubbles:!0,composed:!0})))&&!i)return e.announce("plonk"),!1;let o=Cq();if(!document.activeElement||o.length<=1)return e.announce("plonk"),!1;let s=o.indexOf(document.activeElement)+a;return s<0&&(s=o.length-1),s>=o.length&&(s=0),o[s].focus(),e.mathfield.stopCoalescingUndo(),!0}return kq(e,l),!0}function Nq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"forward";return e.findAtom((t=>"placeholder"===t.type||"prompt"===t.type||!e.mathfield.readOnly&&t.treeDepth>2&&t.isFirstSibling&&t.isLastSibling),t,n)}function Mq(e,t,n,r){if("forward"===r){let e=t.rightSibling;for(;e&&!n(e);)e=e.rightSibling;return e}let i=t.leftSibling;for(;i&&!n(i);)i=i.leftSibling;return i}function Fq(e,t,n){"function"==typeof t&&(n=t,t=1/0),void 0===t&&(t=1/0);let r=e.position,i=!1,a="";for(;!i;){let o=e.at(r);i=0===t||void 0===o||"first"===o.type||"math"!==o.mode||!(o.type&&/mord|mpunct|operator/.test(o.type)||"mop"===o.type&&/[a-zA-Z ]+/.test(o.value))||!o.hasEmptyBranch("superscript")||!o.hasEmptyBranch("subscript")||"function"==typeof n&&!n(o),i||(o.mode="text",o.command=o.value,o.verbatimLatex=void 0,a+=o.value),r-=1,t-=1}e.contentDidChange({data:a,inputType:"insertText"})}function Tq(e,t,n){"function"==typeof t&&(n=t,t=1/0),void 0===t&&(t=1/0);let r=e.position,i=!1,a=[];for(;!i;){let o=e.at(r);i=0===t||!o||"first"===o.type||o.isFirstSibling||"text"!==o.mode||" "===o.value||"function"==typeof n&&!n(o),i||(a.push(gO.serialize([o],{defaultMode:"math"})),o.mode="math"),r-=1,t-=1}Bq(e),e.contentDidChange({data:zL(a),inputType:"insertText"})}function Bq(e){var t;let n=e.position-1;for(;n>=0&&"math"===(null==(t=e.at(n))?void 0:t.mode);)n-=1;if(!(n<0)&&"text"===e.at(n).mode&&" "===e.at(n).value&&"math"===e.at(n-1).mode){e.at(n-1).parent.removeChild(e.at(n-1));let t=e.silenceNotifications;e.silenceNotifications=!0,e.position-=1,e.silenceNotifications=t,e.contentDidChange({inputType:"deleteContent"})}}function Lq(){return document.getElementById("mathlive-keystroke-caption-panel")||(XO("keystroke-caption"),XO("core"),YI("mathlive-keystroke-caption-panel"))}function Oq(e,t){var n,r,i;let{model:a}=e,o=jI(t);if(t.isTrusted){!function(e){var t,n;if(!e||"Unidentified"===e.key||"Dead"===e.key)return;let r=e.shiftKey&&e.altKey?3:e.altKey?2:e.shiftKey?1:0;for(let i of NI)(null==(t=i.mapping[e.code])?void 0:t[r])===e.key?i.score+=1:null!=(n=i.mapping[e.code])&&n[r]&&(i.score=0);NI.sort(((e,t)=>t.score-e.score))}(t);let n=TI();e.keyboardLayout!==n.id&&(e.keyboardLayout=n.id,e._keybindings=void 0)}if(clearTimeout(e.inlineShortcutBufferFlushTimer),e.inlineShortcutBufferFlushTimer=0,function(e,t){if(!e.isSelectionEditable||!e.keystrokeCaptionVisible)return;let n=Lq(),r=e.element.getBoundingClientRect();n.style.left="".concat(r.left,"px"),n.style.top="".concat(r.top-64,"px"),n.innerHTML=globalThis.MathfieldElement.createHTML("<span>"+(BI(t)||t)+"</span>"+n.innerHTML),n.style.visibility="visible",setTimeout((()=>{n.childNodes.length>0&&n.childNodes[n.childNodes.length-1].remove(),0===n.childNodes.length&&(n.style.visibility="hidden")}),3e3)}(e,o),t.isTrusted&&t.defaultPrevented)return e.flushInlineShortcutBuffer(),!1;let s,l,u="",c=e.inlineShortcutBuffer;if(e.isSelectionEditable){if("math"===a.mode)if("[Backspace]"===o)c.pop();else if(II(t)){let i=RI(t),o=[...null!=(r=null==(n=c[c.length-1])?void 0:n.keystrokes)?r:[],i];c.push({state:a.getState(),keystrokes:o,leftSiblings:Iq(e)});let u=0,d="";for(;!s&&u<o.length;)l=c.length-(o.length-u),d=o.slice(u).join(""),s=CO(c[l].leftSiblings,d,e.options.inlineShortcuts),!s&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(d)&&(s=e.options.onInlineShortcut(e,d)),u+=1;e.flushInlineShortcutBuffer({defer:!0})}else e.flushInlineShortcutBuffer();e.options.smartMode&&(s?e.switchMode("math"):function(e,t,n){let{model:r}=e;if("latex"===r.mode||!r.at(r.position).isLastSibling||!n||!II(n))return!1;let i=RI(n);if(!r.selectionIsCollapsed)return!("text"!==e.model.mode||!/[/_^]/.test(i));let a=function(e){let t="",n=e.position,r=!1;for(;!r;){let i=e.at(n);r=!(i&&("text"===i.mode||"math"===i.mode&&i.type&&/mord|mpunct/.test(i.type))),r||(t=i.value+t),n-=1}return t}(r)+i;if("text"===e.model.mode){if("Esc"===t||/[/\\]/.test(i))return!0;if(/[\^_]/.test(i))return/(^|\s)[a-zA-Z][^_]$/.test(a)&&Tq(r,1),!0;let e={")":"(","}":"{","]":"["}[i],{parent:n}=r.at(r.position);if(e&&n instanceof Mz&&n.leftDelim===e)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(a))return!1;if(/[\$\xA2-\xA5\u0E3F\u20A1\u20A4\u20A7-\u20A9\u20AC\u20B1\u20B9\u20BA]/.test(i))return!0;if(/(^|[^a-zA-Z'\u2019])[a-zA-Z] $/.test(a))return Tq(r,1),!1;if(/\D\.[^\d\s]$/.test(a)){Tq(r,1);let e=r.at(r.position);return e.value="\u22c5",e.style.variant="normal",e.command="\\cdot",e.verbatimLatex=void 0,r.contentDidChange({data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(a)||/\.\d$/.test(a)||/\([\d+\-.]$/.test(a))return Tq(r,1),!0;if(/\([a-z][,;]$/.test(a))return Tq(r,2),!0;if(/[\d+\-=><*|]$/.test(i))return Bq(r),!0}else{if("[Space]"===t)return Fq(r,void 0,(e=>/[a-z][:,;.]$/.test(e.value))),!0;if(/[a-zA-Z]{3,}$/.test(a)&&!/(dxd|abc|xyz|uvw)$/.test(a))return Fq(r,void 0,(e=>/[a-zA-Z]/.test(e.value))),!0;if(/(^|\W)(if)$/i.test(a))return Fq(r,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/.test(a)&&!/(\u03b1\u03b2\u03b3)$/.test(a))return Fq(r,void 0,(e=>/(:|,|;|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/.test(e.value))),!0;if("?"===i||"."===i&&!/[\d-+]\.$/.test(a))return!0}return!1}(e,o,t)&&(e.switchMode({math:"text",text:"math"}[a.mode]),u=""))}if(!s){if(u||(u=function(e,t,n){if(0===e.length)return"";let r=EI(CI(jI(n))),i=EI({key:n.key,shift:n.shiftKey,alt:n.altKey,ctrl:n.ctrlKey,meta:n.metaKey||n.ctrlKey&&/macos|ios/.test(nA()),cmd:!1,win:!1});for(let a=e.length-1;a>=0;a--)if((e[a].key===r||e[a].key===i)&&(!e[a].ifMode||e[a].ifMode===t))return e[a].command;return""}(e.keybindings,a.mode,t)),!u&&("[Enter]"===o||"[Return]"===o)){let n=!1;return a.contentWillChange({inputType:"insertLineBreak"})&&(e.host&&(n=!e.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),n||t.preventDefault&&(t.preventDefault(),t.stopPropagation()),a.contentDidChange({inputType:"insertLineBreak"})),n}if((!u||"[Space]"===o)&&"math"===a.mode){if("[Space]"===o){if(e.adoptStyle="none",e.flushInlineShortcutBuffer(),e.options.mathModeSpace)return OO.insert(a,e.options.mathModeSpace,{format:"latex",mode:"math"}),e.snapshot("insert-space"),u="",e.dirty=!0,e.scrollIntoView(),t.preventDefault&&(t.preventDefault(),t.stopPropagation()),!1;let n=a.at(a.position+1),r=a.at(a.position-1);if("text"===(null==n?void 0:n.mode)||"text"===(null==r?void 0:r.mode))return OO.insert(a," ",{mode:"text"}),e.snapshot("insert-space"),e.dirty=!0,e.scrollIntoView(),!1}null!=(i=a.at(a.position))&&i.isDigit()&&","===globalThis.MathfieldElement.decimalSeparator&&","===RI(t)&&(u="insertDecimalSeparator")}}if(!s&&!u){if(a.mathfield.smartFence){if(qq(a,RI(t),e.effectiveStyle))return e.dirty=!0,e.scrollIntoView(),t.preventDefault&&t.preventDefault(),!1}else{let{parent:n}=a.at(a.position);if(n instanceof Mz&&"?"===n.rightDelim&&a.at(a.position).isLastSibling&&/^[)}\]|]$/.test(o))return e.snapshot(),n.isDirty=!0,n.rightDelim=o,a.position+=1,a.selectionDidChange(),a.contentDidChange({data:RI(t),inputType:"insertText"}),e.snapshot("insert-fence"),e.dirty=!0,e.scrollIntoView(),t.preventDefault&&t.preventDefault(),!1;if(!a.selectionIsCollapsed){let n=RI(t);if("("===n||"{"===n||"["===n){let r={"(":"(","{":"\\lbrace","[":"\\lbrack"}[n],i={"(":")","{":"\\rbrace","[":"\\rbrack"}[n],[o,s]=DO(a.selection);return e.snapshot(),a.position=s,OO.insert(a,i,{format:"latex"}),a.position=o,OO.insert(a,r,{format:"latex"}),a.setSelection(o+1,s+1),a.contentDidChange({data:n,inputType:"insertText"}),e.snapshot("insert-fence"),e.dirty=!0,e.scrollIntoView(),t.preventDefault&&t.preventDefault(),!1}}}return!0}let d=a.at(Math.max(a.position,a.anchor)),{parent:p}=d;if("moveAfterParent"===u&&"leftright"===(null==p?void 0:p.type)&&d.isLastSibling&&e.options.smartFence&&qq(a,".",e.defaultStyle)&&(u="",pP(e)),e.keyboardDelegate.cancelComposition(),u)e.executeCommand(u);else if(s){let t=e.effectiveStyle;a.setState(c[l].state);let n=c[c.length-1].keystrokes;for(let e of n)OO.insert(a,e,{silenceNotifications:!0,style:t});e.snapshot("insert-shortcut"),a.setState(c[l].state),a.deferNotifications({content:!0,selection:!0,data:s,type:"insertText"},(()=>(OO.insert(a,s,{format:"latex",style:t}),Bq(e.model),s.endsWith(" ")&&(e.switchMode("text"),OO.insert(a," ",{style:t,mode:"text"})),e.snapshot(),a.selectionIsCollapsed||e.flushInlineShortcutBuffer(),!0))),e.dirty=!0,a.announce("replacement")}return e.scrollIntoView(),t.preventDefault&&t.preventDefault(),!1}function zq(e,t,n){let{model:r}=e;if(!e.isSelectionEditable)return void r.announce("plonk");null!=n||(n={}),n.focus&&e.focus(),n.feedback&&globalThis.MathfieldElement.playSound("keypress"),"string"==typeof n.mode&&(e.switchMode(n.mode),e.snapshot());let i=TL(t),a=window.mathVirtualKeyboard;if(null!=a&&a.isShifted&&(i="string"==typeof i?i.toUpperCase():i.map((e=>e.toUpperCase()))),n.simulateKeystroke){let t=!0;for(let n of i)Oq(e,new KeyboardEvent("keypress",{key:n}))&&(t=!1);if(t)return}let o=r.at(r.position),s=Zk(Zk({},o.computedStyle),e.defaultStyle);if(r.selectionIsCollapsed||(r.deleteAtoms(DO(r.selection)),e.snapshot("delete")),"latex"===r.mode)r.deferNotifications({content:!0,selection:!0,data:t,type:"insertText"},(()=>{GI(e);for(let e of i)OO.insert(r,e);e.snapshot("insert-latex"),ZI(e)}));else if("text"===r.mode){for(let e of i)OO.insert(r,e,{style:s});e.snapshot("insert-text")}else if("math"===r.mode)for(let l of i)Pq(e,l,s,o);e.dirty=!0,e.scrollIntoView()}function Iq(e){let t=e.model,n=[],r=t.at(Math.min(t.position,t.anchor));for(;"first"!==r.type;)n.push(r),r=r.leftSibling;return n}function Pq(e,t,n,r){let i=e.model,a={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[t];if(" "===t&&e.options.mathModeSpace&&(a=["insert",e.options.mathModeSpace]),a)e.executeCommand(a);else{if(/\d/.test(t)&&e.options.smartSuperscript&&"superscript"===r.parentBranch&&"mop"!==r.parent.type&&"operator"!==r.parent.type&&"extensible-symbol"!==r.parent.type&&r.hasNoSiblings)return function(e){e.selectionIsCollapsed||(e.deleteAtoms(DO(e.selection)),e.mathfield.snapshot("delete"))}(i),OO.insert(i,t,{style:n}),e.snapshot(),wq(i),void e.snapshot();if(/[a-zA-Z0-9]/.test(t)&&"none"!==e.adoptStyle){let t="left"===e.adoptStyle?r:r.parent?r.rightSibling:null;"mord"===(null==t?void 0:t.type)&&/[a-zA-Z0-9]/.test(t.value)&&(n=Zk({},n),t.style.variant&&(n.variant=t.style.variant),t.style.variantStyle&&(n.variantStyle=t.style.variantStyle))}OO.insert(i,t,{style:n}),e.snapshot("insert-".concat(i.at(i.position).type))}}function qq(e,t,n){if(!t||"math"!==e.mode)return!1;let r=e.at(e.position),{parent:i}=r,a={"(":"(",")":")","{":"\\lbrace","}":"\\rbrace","[":"\\lbrack","]":"\\rbrack","|":"|"}[t];if(!a)return!1;let o=tz[a],s=ez[a];if(!e.selectionIsCollapsed){e.mathfield.snapshot();let[t,n]=DO(e.selection),r=e.extractAtoms([t,n]),o=i.addChildrenAfter([new Mz("left...right",r,{leftDelim:a,rightDelim:s})],e.at(t));return e.setSelection(e.offsetOf(o.firstChild),e.offsetOf(o.lastChild)),e.mathfield.snapshot("insert-fence"),e.contentDidChange({data:a,inputType:"insertText"}),!0}if("|"===a){let t=i instanceof Mz?i.leftDelim+i.rightDelim:"";if("\\lbrace\\rbrace"===t||"\\{\\}"===t||"\\lbrace?"===t)return e.mathfield.snapshot(),OO.insert(e,"\\,\\middle\\vert\\,",{format:"latex",style:n}),e.mathfield.snapshot("insert-fence"),e.contentDidChange({data:a,inputType:"insertText"}),!0}if(s){if(i instanceof Mz&&i.firstChild===r&&("?"===i.leftDelim||"."===i.leftDelim))return i.leftDelim=a,i.isDirty=!0,e.mathfield.snapshot(),e.contentDidChange({data:a,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0;if(!(i instanceof Mz)){let t=r;for(;t&&("mclose"!==t.type||t.value!==s);)t=t.rightSibling;if(t){e.mathfield.snapshot();let n=e.extractAtoms([e.offsetOf(r),e.offsetOf(t)]);return n.pop(),i.addChildrenAfter([new Mz("left...right",n,{leftDelim:a,rightDelim:s})],r),e.position=e.offsetOf(i.firstChild)+1,e.contentDidChange({data:a,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0}}let t,o=e.offsetOf(r.lastSibling);for(t=e.position;t<=o;t++){let n=e.at(t);if(n instanceof Mz&&("?"===n.leftDelim||"."===n.leftDelim)&&jq(a,n.rightDelim))break}let l=e.at(t);if(t<=o&&l instanceof Mz){l.leftDelim=a,e.mathfield.snapshot();let n=e.extractAtoms([e.position,t-1]);return n=n.filter((e=>"first"!==e.type)),l.addChildren(n,l.parentBranch),e.position+=1,e.contentDidChange({data:a,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0}if(i instanceof Mz&&("?"===i.leftDelim||"."===i.leftDelim)&&jq(a,i.rightDelim)){i.isDirty=!0,i.leftDelim=a,e.mathfield.snapshot();let t=e.extractAtoms([e.offsetOf(r.firstSibling),e.position]);for(let e of t)i.parent.addChildBefore(e,i);return e.contentDidChange({data:a,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0}if(!(i instanceof Mz&&"|"===i.leftDelim)){if(e.mathfield.snapshot(),OO.insert(e,"\\left".concat(a,"\\right?"),{format:"latex",style:n}),"first"!==r.lastSibling.type){let t=e.offsetOf(r.lastSibling),n=e.extractAtoms([e.position,t]);e.at(e.position).body=n,e.position-=1}return e.mathfield.snapshot("insert-fence"),!0}}if(o){let t=r;for(;t;){if("mopen"===t.type&&t.value===o){e.mathfield.snapshot();let n=t.leftSibling,s=e.extractAtoms([e.offsetOf(t.leftSibling),e.offsetOf(r)]);s.shift();let l=new Mz("left...right",s,{leftDelim:o,rightDelim:a});return i.addChildrenAfter([l],n),e.position=e.offsetOf(l),e.contentDidChange({data:a,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0}t=t.leftSibling}if(i instanceof Mz&&r.isLastSibling&&Rq(i.leftDelim,a))return e.mathfield.snapshot(),i.isDirty=!0,i.rightDelim=a,e.position+=1,e.contentDidChange({data:a,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0;let s,l=e.offsetOf(r.firstSibling);for(s=e.position;s>=l;s--){let t=e.at(s);if(t instanceof Mz&&("?"===t.rightDelim||"."===t.rightDelim)&&Rq(t.leftDelim,a))break}let u=e.at(s);if(s>=l&&u instanceof Mz)return e.mathfield.snapshot(),u.rightDelim=a,u.addChildren(e.extractAtoms([s,e.position]),u.parentBranch),e.contentDidChange({data:a,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0;if(i instanceof Mz&&("?"===i.rightDelim||"."===i.rightDelim)&&Rq(i.leftDelim,a))return e.mathfield.snapshot(),i.isDirty=!0,i.rightDelim=a,i.parent.addChildren(e.extractAtoms([e.position,e.offsetOf(r.lastSibling)]),i.parentBranch),e.position=e.offsetOf(i),e.contentDidChange({data:a,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0;let c=i.parent;return!(!(c instanceof Mz)||"?"!==c.rightDelim&&"."!==c.rightDelim||!e.at(e.position).isLastSibling)&&(e.position=e.offsetOf(c),qq(e,a,n))}return!1}function Rq(e,t){return!e||(["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(e)?[")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(t):ez[e]===t)}function jq(e,t){return!t||([")","\\rparen","}","\\}","\\rbrace","]","\\rbrack"].includes(t)?["(","\\lparen","{","\\{","\\lbrace","[","\\lbrack"].includes(e):tz[t]===e)}function Kq(e,t){var n,r,i,a,o,s,l,u,c,d;let p={};if("string"==typeof t.color){let a=null!=(r=e.colorMap(null!=(n=t.color)?n:t.verbatimColor))?r:"none";a!==t.color&&(p.verbatimColor=null!=(i=t.verbatimColor)?i:t.color),p.color=a}if("string"==typeof t.backgroundColor){let n=null!=(o=e.backgroundColorMap(null!=(a=t.backgroundColor)?a:t.verbatimBackgroundColor))?o:"none";n!==t.backgroundColor&&(p.verbatimBackgroundColor=null!=(s=t.verbatimBackgroundColor)?s:t.backgroundColor),p.backgroundColor=n}"string"==typeof t.fontFamily&&(p.fontFamily=t.fontFamily),"string"==typeof t.series&&(p.fontSeries=t.series),"string"==typeof t.fontSeries&&(p.fontSeries=t.fontSeries.toLowerCase()),p.fontSeries&&(p.fontSeries=null!=(l={bold:"b",medium:"m",normal:"m"}[p.fontSeries])?l:p.fontSeries),"string"==typeof t.shape&&(p.fontShape=t.shape),"string"==typeof t.fontShape&&(p.fontShape=t.fontShape.toLowerCase()),p.fontShape&&(p.fontShape=null!=(u={italic:"it",up:"n",upright:"n",normal:"n"}[p.fontShape])?u:p.fontShape),t.variant&&(p.variant=t.variant.toLowerCase()),t.variantStyle&&(p.variantStyle=t.variantStyle.toLowerCase());let h=null!=(c=t.size)?c:t.fontSize;return"number"==typeof h?p.fontSize=Math.max(1,Math.min(10,h)):"string"==typeof h&&(p.fontSize=null!=(d={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[h.toLowerCase()])?d:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[h]),p}function Vq(e){let[t,n]=DO(e.selection);if(t=Uq(e,t,"backward"),n=Uq(e,n,"forward"),t===n){let r=e.at(t);if("leftright"===r.type)return e.setSelection(e.offsetOf(r.firstChild)-1,n);if("first"===r.type&&("leftright"===r.parent.type||"surd"===r.parent.type))return e.setSelection(t-1,e.offsetOf(r.parent.lastChild)+1);e.setSelection(t-1,n)}else e.setSelection(t,n);return!0}function Uq(e,t,n){var r,i,a;let o=e.at(t);if(!o)return t;let s="forward"===n?1:-1;if("text"===o.mode){for(;o&&"text"===o.mode&&SA.test(o.value);)t+=s,o=e.at(t);return"backward"===n?t-1:t}if("latex"===o.mode){if(/[a-zA-Z\*]/.test(o.value))if("backward"===n)for(;o&&"latex"===o.mode&&"\\"!==o.value&&/[a-zA-Z]/.test(o.value);)t+=s,o=e.at(t);else for(;o&&"latex"===o.mode&&/[a-zA-Z\*]/.test(o.value);)t+=s,o=e.at(t);else{if("{"===o.value){if("forward"===n){for(;o&&"latex"===o.mode&&"}"!==o.value;)t+=s,o=e.at(t);return t}return t-1}if("}"===o.value){if("backward"===n){for(;o&&"latex"===o.mode&&"{"!==o.value;)t+=s,o=e.at(t);return t-1}return t}}return t-1}if("math"===o.mode){if(o.isDigit()){for(;null!=(r=e.at(t+s))&&r.isDigit();)t+=s;return"backward"===n?t-1:t}if(o.style.variant||o.style.variantStyle){let r=null==(i=e.at(t))?void 0:i.style;for(;r&&r.variant===o.style.variant&&r.variantStyle===o.style.variantStyle;)r=null==(a=e.at(t+s))?void 0:a.style,t+=s;return"backward"===n?t-1:t}return t}return t}vP({moveToOpposite:e=>{let t=e.at(e.position),{parent:n}=t;if(!n)return e.announce("plonk"),!1;let r,i=t.parentBranch;if("string"==typeof i&&(r={superscript:"subscript",subscript:"superscript",above:"below",below:"above"}[i]),!r){let n=t.subsupPlacement?Sq(e):_q(e);return e.mathfield.stopCoalescingUndo(),n}n.branch(r)||n.createBranch(r);let a=e.setSelection(e.getBranchRange(e.offsetOf(n),r));return e.mathfield.stopCoalescingUndo(),a},moveBeforeParent:e=>{let{parent:t}=e.at(e.position);return t?(e.position=e.offsetOf(t),e.mathfield.stopCoalescingUndo(),!0):(e.announce("plonk"),!1)},moveAfterParent:e=>wq(e),moveToNextChar:e=>yq(e,"forward"),moveToPreviousChar:e=>yq(e,"backward"),moveUp:e=>yq(e,"upward"),moveDown:e=>yq(e,"downward"),moveToNextWord:e=>vq(e,"forward"),moveToPreviousWord:e=>vq(e,"backward"),moveToGroupStart:e=>{let t=e.offsetOf(e.at(e.position).firstSibling);return t===e.position?(e.announce("plonk"),!1):(e.position=t,e.mathfield.stopCoalescingUndo(),!0)},moveToGroupEnd:e=>{let t=e.offsetOf(e.at(e.position).lastSibling);return t===e.position?(e.announce("plonk"),!1):(e.position=t,e.mathfield.stopCoalescingUndo(),!0)},moveToNextGroup:e=>{var t,n,r,i;if(e.position===e.lastOffset&&e.anchor===e.lastOffset)return Aq(e,"forward");let a=e.at(e.position);if("text"===a.mode){if(e.selectionIsCollapsed){let n=a;for(;n&&"text"===n.mode;)n=n.leftSibling;let r=a;for(;"text"===(null==(t=r.rightSibling)?void 0:t.mode);)r=r.rightSibling;if(n&&r)return Eq(e,[n,r])}if("text"===a.rightSibling.mode){let t=a;for(;t&&"text"===t.mode;)t=t.rightSibling;return t?(kq(e,null!=(n=t.leftSibling)?n:t),e.mathfield.switchMode("math"),!0):kq(e,e.lastOffset)}}let o=e.at(e.anchor).parentPrompt,s=o?e.offsetOf(o)+1:Math.max(e.position+1,0),l=Nq(e,s,"forward");if(l&&e.offsetOf(l)<s)return Aq(e,"forward");if(l)return kq(e,l);let u=Mq(e,a,(e=>"leftright"===e.type||"text"===e.type),"forward");if(u){if("text"===u.mode){let t=u;for(;t&&"text"===t.mode;)t=t.rightSibling;return Eq(e,[null!=(r=u.leftSibling)?r:u,null!=(i=t.leftSibling)?i:t])}return Eq(e,u)}let c=a.parent;if(c){if("leftright"===c.type||"surd"===c.type)return Eq(e,c);if("superscript"===a.parentBranch&&c.subscript)return Eq(e,c.subscript);if("above"===a.parentBranch&&c.below)return Eq(e,c.below);if("superscript"===a.parentBranch||"subscript"===a.parentBranch)return kq(e,c);if("above"===a.parentBranch||"below"===a.parentBranch)return Eq(e,c)}return kq(e,e.lastOffset)},moveToPreviousGroup:e=>{var t;if(0===e.position&&0===e.anchor)return Aq(e,"backward");let n=e.at(e.position),r=n.mode;if("text"===r){if(e.selectionIsCollapsed){let r=n;for(;r&&"text"===r.mode;)r=r.leftSibling;let i=n;for(;"text"===(null==(t=i.rightSibling)?void 0:t.mode);)i=i.rightSibling;if(r&&i)return Eq(e,[r,i])}for(;n&&"text"===n.mode;)n=n.leftSibling;return kq(e,n||0)}let i=e.at(e.anchor).parentPrompt,a=i?e.offsetOf(i.leftSibling):Math.max(e.position-1,0),o=Nq(e,a,"backward");if(o&&e.offsetOf(o)>a)return Aq(e,"backward");if(o)return kq(e,o);if("math"===r){let t=Mq(e,n,(e=>"leftright"===e.type||"text"===e.type),"backward");if(t){if("text"===t.mode){let n=t;for(;n&&"text"===n.mode;)n=n.leftSibling;return Eq(e,[t,n])}return Eq(e,t)}let r=n.parent;if(r){if("leftright"===r.type||"surd"===r.type)return Eq(e,r);if("subscript"===n.parentBranch&&r.superscript)return Eq(e,r.superscript);if("below"===n.parentBranch&&r.above)return Eq(e,r.above);if("superscript"===n.parentBranch||"subscript"===n.parentBranch)return kq(e,r);if("above"===n.parentBranch||"below"===n.parentBranch)return Eq(e,r)}return kq(e,0)}return!1},moveToMathfieldStart:e=>e.selectionIsCollapsed&&0===e.position?(e.announce("plonk"),!1):(e.position=0,e.mathfield.stopCoalescingUndo(),!0),moveToMathfieldEnd:e=>e.selectionIsCollapsed&&e.position===e.lastOffset?(e.announce("plonk"),!1):(e.position=e.lastOffset,e.mathfield.stopCoalescingUndo(),!0),moveToSuperscript:_q,moveToSubscript:Sq},{target:"model",changeSelection:!0}),vP({moveToNextPlaceholder:e=>Aq(e,"forward"),moveToPreviousPlaceholder:e=>Aq(e,"backward")},{target:"model",changeSelection:!0,audioFeedback:"return"}),vP({undo:e=>(e.undo(),!0),redo:e=>(e.redo(),!0),scrollIntoView:e=>(e.scrollIntoView(),!0),scrollToStart:e=>(e.field.scroll(0,0),!0),scrollToEnd:e=>{let t=e.field.getBoundingClientRect();return e.field.scroll(t.left-window.scrollX,0),!0},toggleKeystrokeCaption:function(e){if(e.keystrokeCaptionVisible=!e.keystrokeCaptionVisible,e.keystrokeCaptionVisible){Lq().innerHTML=""}else{YI("mathlive-keystroke-caption-panel").style.visibility="hidden"}return!1},toggleContextMenu:e=>{let t=e.toggleContextMenu();return t||e.model.announce("plonk"),t},plonk:e=>(e.model.announce("plonk"),!0),switchMode:(e,t,n,r)=>(e.switchMode(t,n,r),!0),insert:(e,t,n)=>e.insert(t,n),typedText:(e,t,n)=>(zq(e,t,n),!0),insertDecimalSeparator:e=>{let t=e.model;return"math"===t.mode&&","===globalThis.MathfieldElement.decimalSeparator&&t.at(Math.max(t.position,t.anchor)).isDigit()?(e.insert("{,}",{format:"latex"}),e.snapshot("insert-mord"),!0):(e.insert("."),!0)},commit:e=>{var t;return e.model.contentWillChange({inputType:"insertLineBreak"})&&(null==(t=e.host)||t.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),e.model.contentDidChange({inputType:"insertLineBreak"})),!0},insertPrompt:(e,t,n)=>{let r=e.getPrompts(),i="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36),a=0;for(;r.includes(i)&&a<100;){if(99===a)return console.error("could not find a unique ID after 100 tries"),!1;i="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36),a++}return e.insert("\\placeholder[".concat(null!=t?t:i,"]{}"),n),!0}}),vP({copyToClipboard:e=>(e.focus(),e.model.selectionIsCollapsed&&e.select(),"queryCommandSupported"in document&&document.queryCommandSupported("copy")?document.execCommand("copy"):e.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1)},{target:"mathfield"}),vP({cutToClipboard:e=>(e.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("cut")?document.execCommand("cut"):e.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:e=>(e.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("paste")?(document.execCommand("paste"),!0):(navigator.clipboard.readText().then((t=>{t&&e.model.contentWillChange({inputType:"insertFromPaste",data:t})?(e.stopCoalescingUndo(),e.stopRecording(),e.insert(t,{mode:e.model.mode})&&(ZI(e),e.startRecording(),e.snapshot("paste"),e.model.contentDidChange({inputType:"insertFromPaste"}),pP(e))):e.model.announce("plonk"),e.startRecording()})),!0))},{target:"mathfield",canUndo:!0,changeContent:!0,changeSelection:!0}),vP({applyStyle:function(e,t){e.flushInlineShortcutBuffer(),e.stopCoalescingUndo();let n=Kq(e,t),{model:r}=e;return r.selectionIsCollapsed?(e.defaultStyle.fontSeries&&n.fontSeries===e.defaultStyle.fontSeries&&(n.fontSeries="auto"),n.fontShape&&n.fontShape===e.defaultStyle.fontShape&&(n.fontShape="auto"),n.color&&n.color===e.defaultStyle.color&&(n.color="none"),n.backgroundColor&&n.backgroundColor===e.defaultStyle.backgroundColor&&(n.backgroundColor="none"),n.fontSize&&n.fontSize===e.defaultStyle.fontSize&&(n.fontSize="auto"),e.defaultStyle=Zk(Zk({},e.defaultStyle),n)):e.model.deferNotifications({content:!0,type:"insertText"},(()=>{r.selection.ranges.forEach((e=>tq(r,e,n,{operation:"toggle"}))),e.snapshot("style-change")})),!0}},{target:"mathfield",canUndo:!0,changeContent:!0}),vP({selectGroup:e=>{let t=Vq(e);return t||e.announce("plonk"),t},selectAll:e=>e.setSelection(0,e.lastOffset),extendSelectionForward:e=>yq(e,"forward",{extend:!0}),extendSelectionBackward:e=>yq(e,"backward",{extend:!0}),extendToNextWord:e=>vq(e,"forward",{extend:!0}),extendToPreviousWord:e=>vq(e,"backward",{extend:!0}),extendSelectionUpward:e=>yq(e,"upward",{extend:!0}),extendSelectionDownward:e=>yq(e,"downward",{extend:!0}),extendToNextBoundary:e=>vq(e,"forward",{extend:!0}),extendToPreviousBoundary:e=>vq(e,"backward",{extend:!0}),extendToGroupStart:e=>{let t=e.setSelection(e.anchor,e.offsetOf(e.at(e.position).firstSibling));return t||e.announce("plonk"),t},extendToGroupEnd:e=>{let t=e.setSelection(e.anchor,e.offsetOf(e.at(e.position).lastSibling));return t||e.announce("plonk"),t},extendToMathFieldStart:e=>{let t=e.setSelection(e.anchor,0);return t||e.announce("plonk"),t},extendToMathFieldEnd:e=>{let t=e.setSelection(e.anchor,e.lastOffset);return t||e.announce("plonk"),t}},{target:"model",changeSelection:!0});var $q=null,Hq=0,Wq=class e{static start(t,n,r,i){var a;e.element=t,null==(a=e.controller)||a.abort(),e.controller=new AbortController;let o={signal:e.controller.signal};"PointerEvent"in window?(t.addEventListener("pointermove",r,o),t.addEventListener("pointerup",i,o),t.addEventListener("pointercancel",i,o),Gq(n)&&(e.pointerId=n.pointerId,t.setPointerCapture(n.pointerId))):(window.addEventListener("mousemove",r,o),window.addEventListener("blur",i,o),window.addEventListener("mouseup",i,o))}static stop(){var t;null==(t=e.controller)||t.abort(),e.controller=void 0,"number"==typeof e.pointerId&&(e.element.releasePointerCapture(e.pointerId),e.pointerId=void 0)}};function Gq(e){return null!==e&&void 0!==globalThis.PointerEvent&&e instanceof PointerEvent}function Zq(e,t){var n;if(t.buttons>1)return;e.atomBoundsCache=new Map;let r,i=e,a=!1,o=!1,s="none",l=!1,u=!1,c=t.clientX,d=t.clientY,p=Date.now(),h=i.field,f=setInterval((()=>{l?h.scroll({top:0,left:h.scrollLeft-16}):u&&h.scroll({top:0,left:h.scrollLeft+16})}),32);function m(){Wq.stop(),a=!1,clearInterval(f),e.element.classList.remove("tracking"),t&&t.preventDefault()}$q&&Math.abs($q.x-c)<5&&Math.abs($q.y-d)<5&&Date.now()<$q.time+500?(Hq+=1,$q.time=p):($q={x:c,y:d,time:p},Hq=1);let g=h.getBoundingClientRect();if(c>=g.left&&c<=g.right&&d>=g.top&&d<=g.bottom){if(e.flushInlineShortcutBuffer(),e.adoptStyle="left",r=Qq(e,c,d,{bias:0}),r>=0){if(e.element.classList.add("tracking"),t.shiftKey){let t=e.model.selectionIsCollapsed;e.model.extendSelectionTo(e.model.anchor,r),s=JI(e.model)||t?"all":"selection"}else"placeholder"===e.model.at(r).type?(e.model.setSelection(r-1,r),s="selection"):"placeholder"===(null==(n=e.model.at(r).rightSibling)?void 0:n.type)?(e.model.setSelection(r,r+1),s="selection"):(e.model.position=r,s=JI(e.model)?"all":"selection");e.defaultStyle={},3===t.detail||Hq>2?(m(),(3===t.detail||3===Hq)&&(e.model.selection={ranges:[[0,e.model.lastOffset]]},s="all")):a||(a=!0,Wq.start(h,t,(function(t){if(!i.hasFocus())return void m();let n=t.clientX,a=t.clientY,s=Gq(t)&&"touch"===t.pointerType?20:5;if(Date.now()<p+500&&Math.abs(c-n)<s&&Math.abs(d-a)<s)return t.preventDefault(),void t.stopPropagation();let f=h.getBoundingClientRect();u=n>f.right,l=n<f.left;let g=r;Gq(t)&&(t.isPrimary||(g=Qq(i,t.clientX,t.clientY,{bias:0})));let v=Qq(i,n,a,{bias:n<=c?n===c?0:-1:1});g>=0&&v>=0&&(i.model.extendSelectionTo(g,v),pP(e)),o&&Vq(i.model)}),m),(2===t.detail||2===Hq)&&(o=!0,Vq(e.model),s="all"))}e.hasFocus()||(s="none",e.focus({preventScroll:!0}))}else $q=null;e.stopCoalescingUndo(),"none"!==s&&(e.model.selectionIsCollapsed&&(s="all"),pP(e)),t.preventDefault()}function Jq(e,t,n){if(e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom)return 0;let r=e-(n.left+n.right)/2,i=t-(n.top+n.bottom)/2;return r*r+i*i}function Xq(e,t,n,r,i){if(!n.id)return[1/0,null];if(t.has(n.id))return t.get(n.id);let a=VO(e,n);if(!a)return[1/0,null];let o=[1/0,null];if(n.hasChildren&&!n.captureSelection&&r>=a.left&&r<=a.right)for(let s of n.children){let n=Xq(e,t,s,r,i);n[0]<=o[0]&&(o=n)}return o[1]||(o=[Jq(r,i,a),n]),t.set(n.id,o),o}function Yq(e,t,n){let[,r]=Xq(e,new Map,e.model.root,t,n);return r}function Qq(e,t,n,r){var i;let a=e.field.querySelector(".ML__latex").getBoundingClientRect();if(!a)return 0;if(t>a.right||n>a.bottom+8)return e.model.lastOffset;if(t<a.left||n<a.top-8)return 0;(r=null!=r?r:{}).bias=null!=(i=r.bias)?i:0;let o=Yq(e,t,n),s=[],l=o;for(;l;)s.unshift(l),l=l.parent;for(let c of s)if(c.captureSelection){o=c;break}let u=e.model.offsetOf(o);if(u<0)return-1;if(o.leftSibling)if(0===r.bias&&"placeholder"!==o.type){let n=VO(e,o);n&&t<(n.left+n.right)/2&&(u=e.model.offsetOf(o.leftSibling))}else r.bias<0&&(u=e.model.offsetOf(o.leftSibling));return u}function eR(e,t,n,r){var i;let a,o=[];if("string"!=typeof t||"math-json"===r.format){let n=globalThis.MathfieldElement.computeEngine;if(!n)return["math-json",[]];[a,t]=["latex",n.box(t).latex],o=Pz(t,{context:e.mathfield.context})}else"string"==typeof t&&"ascii-math"===r.format?([a,t]=kO(t,{format:"ascii-math",inlineShortcuts:e.mathfield.options.inlineShortcuts}),o=Pz(t,{context:e.mathfield.context}),"latex"!==a&&e.mathfield.options.removeExtraneousParentheses&&nR(o)):("auto"===r.format||null!=(i=r.format)&&i.startsWith("latex"))&&("auto"===r.format&&([a,t]=kO(t,{format:"auto",inlineShortcuts:e.mathfield.options.inlineShortcuts})),"latex"===r.format&&([,t]=TO(t)),o=Pz(t,{context:e.mathfield.context,args:n}),"latex"!==r.format&&e.mathfield.options.removeExtraneousParentheses&&nR(o));return eq(o,r.style),[null!=a?a:"latex",o]}function tR(e){if(!e||(e[0].type,e.length>1))return null;let t=e[0];return t instanceof Mz&&"("===t.leftDelim&&")"===t.rightDelim?t.removeBranch("body"):null}function nR(e){if(e){for(let t=0;e[t];t++){let n=e[t];if(n instanceof Mz&&"("===n.leftDelim){let r=0,i=0,a=0;for(let e=0;n.body[e];e++)"genfrac"===n.body[e].type&&(r++,i=e),a++;0===a&&1===r&&(e[t]=n.body[i])}}for(let t of e){for(let e of t.branches)if(!t.hasEmptyBranch(e)){nR(t.branch(e));let n=tR(t.branch(e));n&&t.setChildren(n,e)}if(t instanceof wz)for(let e of t.cells)nR(e)}}}function rR(e){return!!e.isDigit()||!(!e.type||!/^(mord|surd|subsup|leftright|mop|mclose)$/.test(e.type))&&!e.isExtensibleSymbol}new class extends OO{constructor(){super("math")}onPaste(e,t){if(!t||!e.model.contentWillChange({data:"string"==typeof t?t:null,dataTransfer:"string"==typeof t?null:t,inputType:"insertFromPaste"}))return!1;let n="",r="auto",i="string"!=typeof t?t.getData("application/json+mathlive"):"";if(i)try{let t=JSON.parse(i);if(t&&Array.isArray(t)){e.snapshot();let n=pI(t),{model:r}=e;r.selectionIsCollapsed||r.deleteAtoms(DO(r.selection));let i=r.at(r.position);if(i.parent instanceof wz){i.parentBranch;let e=[],t=[];"first"===n[0].type&&n.shift(),"first"===n[n.length-1].type&&n.pop();for(let i of n)"first"===i.type&&t.length>0?(e.push(t),t=[i]):t.push(i);t.length>0&&e.push(t);let r=Number(i.parentBranch[0]),a=Number(i.parentBranch[1]),o=i.parent.maxColumns;for(;i.parent.colCount-a<e.length&&i.parent.colCount<o;)i.parent.addColumn();i.parent.addChildrenAfter(e[0],i);for(let n=1;n<e.length;n++)a++,a>=o&&(a=0,i.parent.addRowAfter(r),r++),i.parent.setCell(r,a,e[n])}else i.parent.addChildrenAfter(n.filter((e=>"first"!==e.type)),i);return r.position=r.offsetOf(n[n.length-1]),r.contentDidChange({inputType:"insertFromPaste"}),pP(e),!0}}catch(a){}if(i="string"!=typeof t?t.getData("application/json"):"",i&&globalThis.MathfieldElement.computeEngine)try{let e=JSON.parse(i);if("object"==typeof e&&"latex"in e&&e.latex&&(n=e.latex),!n){let t=globalThis.MathfieldElement.computeEngine.box(e);t&&!t.has("Error")&&(n=t.latex)}n||(r="latex")}catch(a){}if(!n&&"string"!=typeof t&&(n=t.getData("application/x-latex"),n&&(r="latex")),n||(n="string"==typeof t?t:t.getData("text/plain")),n){let t;return[t,n]=TO(n),"auto"===r&&t&&(r="latex"),e.stopCoalescingUndo(),e.stopRecording(),this.insert(e.model,n,{format:r})&&(e.startRecording(),e.snapshot("paste"),pP(e)),e.startRecording(),!0}return!1}insert(e,t,n){var r,i;let a="string"==typeof t?t:null!=(i=null==(r=globalThis.MathfieldElement.computeEngine)?void 0:r.box(t).latex)?i:"";if(!n.silenceNotifications&&!e.contentWillChange({data:a,inputType:"insertText"}))return!1;n.insertionMode||(n.insertionMode="replaceSelection"),n.selectionMode||(n.selectionMode="placeholder"),n.format||(n.format="auto");let{silenceNotifications:o}=e;n.silenceNotifications&&(e.silenceNotifications=!0);let s=e.silenceNotifications;e.silenceNotifications=!0;let l={"?":"\\placeholder{}","@":"\\placeholder{}"};l[0]="replaceAll"===n.insertionMode?"":e.getValue(e.selection,"latex-unstyled"),"replaceSelection"!==n.insertionMode||e.selectionIsCollapsed?"replaceAll"===n.insertionMode?e.deleteAtoms():"insertBefore"===n.insertionMode?e.collapseSelection("backward"):"insertAfter"===n.insertionMode&&e.collapseSelection("forward"):e.deleteAtoms(DO(e.selection)),e.at(e.position).isLastSibling||"placeholder"!==e.at(e.position+1).type?"placeholder"===e.at(e.position).type&&e.deleteAtoms([e.position-1,e.position]):e.deleteAtoms([e.position,e.position+1]);let u=-1;l[0]?l["@"]=l[0]:"string"==typeof t&&/(^|[^\\])#@/.test(t)&&(u=function(e){let t=e.at(e.position);if("text"===t.mode){for(;!t.isFirstSibling&&"text"===t.mode;)t=t.leftSibling;return e.offsetOf(t)}let n=t,r=!1;if("mclose"===t.type){let e=tz[t.value];for(;!t.isFirstSibling&&("mopen"!==t.type||t.value!==e);)t=t.leftSibling;t.isFirstSibling||(t=t.leftSibling),r=!0}else"leftright"===t.type&&(t=t.leftSibling,r=!0);if(r)for(;!t.isFirstSibling&&(t.isFunction||rR(t));)t=t.leftSibling;else{let e=[];for(;!t.isFirstSibling&&(rR(t)||e.length>0);)"mclose"===t.type&&e.unshift(t.value),"mopen"===t.type&&e.length>0&&t.value===tz[e[0]]&&e.shift(),t=t.leftSibling}return n===t?-1:e.offsetOf(t)}(e),u>=0&&(l["@"]=e.getValue(u,e.position,"latex"))),l[0]||(l[0]=l["?"]);let c=!1,d=e=>(c=!0,l[e]),[p,h]=eR(e,t,d,n);if(!h)return!1;let f=1===h.length&&"genfrac"===h[0].type;f&&u>=0&&"function"==typeof e.mathfield.options.isImplicitFunction&&e.mathfield.options.isImplicitFunction(e.at(e.position).command)?(l["@"]=l["?"],c=!1,[p,h]=eR(e,t,d,n)):u>=0&&e.deleteAtoms([u,e.position]);let{parent:m}=e.at(e.position),g=m.hasEmptyBranch("body");if(f&&"latex"!==p&&e.mathfield.options.removeExtraneousParentheses&&m instanceof Mz&&"("===m.leftDelim&&g){let e=m.parent,t=m.parentBranch;e.removeChild(m),e.setChildren(h,t)}let v=e.at(e.position);v.parent.addChildrenAfter(h,v),"latex"===p&&"string"==typeof t&&"root"===(null==m?void 0:m.type)&&g&&!c&&(m.verbatimLatex=t),e.silenceNotifications=s;let y=h[h.length-1];if("placeholder"===n.selectionMode){let t=h.flatMap((e=>[e,...e.children])).find((e=>"placeholder"===e.type));if(t){let n=e.offsetOf(t);e.setSelection(n-1,n),e.announce("move")}else y&&(e.position=e.offsetOf(y))}else"before"===n.selectionMode||("after"===n.selectionMode?y&&(e.position=e.offsetOf(y)):"item"===n.selectionMode&&e.setSelection(e.anchor,e.offsetOf(y)));return e.contentDidChange({data:a,inputType:"insertText"}),e.silenceNotifications=o,!0}};function iR(e){return{value:e.model.getValue(),selectionIsCollapsed:e.model.selectionIsCollapsed,canUndo:e.canUndo(),canRedo:e.canRedo(),style:e.selectionStyle,mode:e.model.mode}}new class extends OO{constructor(){super("text")}onPaste(e,t){if(!t)return!1;let n="string"==typeof t?t:t.getData("text/plain");return!(!n||!e.model.contentWillChange({inputType:"insertFromPaste",data:n}))&&(e.stopCoalescingUndo(),e.stopRecording(),this.insert(e.model,n)&&(e.model.contentDidChange({inputType:"insertFromPaste"}),e.startRecording(),e.snapshot("paste"),pP(e)),e.startRecording(),!0)}insert(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.contentWillChange({data:t,inputType:"insertText"}))return!1;n.insertionMode||(n.insertionMode="replaceSelection"),n.selectionMode||(n.selectionMode="placeholder"),n.format||(n.format="auto");let{silenceNotifications:r}=e;n.silenceNotifications&&(e.silenceNotifications=!0);let i=e.silenceNotifications;e.silenceNotifications=!0,"replaceSelection"!==n.insertionMode||e.selectionIsCollapsed?"replaceAll"===n.insertionMode?(e.root.setChildren([],"body"),e.position=0):"insertBefore"===n.insertionMode?e.collapseSelection("backward"):"insertAfter"===n.insertionMode&&e.collapseSelection("forward"):e.deleteAtoms(DO(e.selection));let a=function(e,t){return Pz(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/lbrace/g,"\\textbraceleft ")).replace(/rbrace/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/\xa3/g,"\\textsterling "),{context:t,parseMode:"text"})}(t,e.mathfield.context);if(eq(a,n.style),!a)return!1;let o=e.at(e.position),s=o.parent.addChildrenAfter(a,o);return e.silenceNotifications=i,"before"===n.selectionMode||("item"===n.selectionMode?e.setSelection(e.anchor,e.offsetOf(s)):s&&(e.position=e.offsetOf(s))),e.contentDidChange({data:t,inputType:"insertText"}),e.silenceNotifications=r,!0}};var aR=20,oR=48,sR=(e,t)=>'\n  <line x1="'.concat(e+aR,'" y1="').concat(t+aR,'" \n    x2="').concat(e>t?e+aR:180,'" \n    y2="').concat(e<t?t+aR:180,'"/>\n  <svg id="plus" viewBox="0 0 40 40" x="').concat(e,'" y="').concat(t,'" width="40" height="40">\n    <circle class="cls-2" cx="20" cy="20" r="20"/>\n    <path class="font" d="m33.33,20c0,1.84-1.49,3.34-3.33,3.34h-6.67v6.66c0,1.84-1.49,3.34-3.33,3.34s-3.34-1.5-3.34-3.34v-6.66h-6.66c-1.84,0-3.34-1.5-3.34-3.34s1.5-3.33,3.34-3.33h6.66v-6.67c0-1.84,1.5-3.33,3.34-3.33s3.33,1.49,3.33,3.33v6.67h6.67c1.84,0,3.33,1.49,3.33,3.33Z"/>\n  </svg>'),lR=(e,t)=>'\n  <line x1="'.concat(e+aR,'" y1="').concat(t+aR,'" \n    x2="').concat(e>t?e+aR:180,'" \n    y2="').concat(e<t?t+aR:180,'"/>\n  <svg id="minus" viewBox="0 0 40 40" x="').concat(e,'" y="').concat(t,'" width="40" height="40">\n    <circle class="cls-2" cx="20" cy="20" r="20"/>\n    <path class="font" d="m33.33,20c0,1.84-1.49,3.33-3.33,3.33H10c-1.84,0-3.34-1.49-3.34-3.33s1.5-3.34,3.34-3.34h20c1.84,0,3.33,1.5,3.33,3.34Z"/>\n  </svg>'),uR=(e,t,n)=>'\n  <svg id="arrow" viewBox="0 0 40 40" x="'.concat(e,'" y="').concat(t,'" width="40" height="40">\n    <circle class="cls-2" cx="20" cy="20" r="20"/>\n    <g transform="rotate(').concat(n,')" transform-origin="20 20">\n      <path class="font" d="m17.7,7.23h4.6c.52,0,.94.42.94.94v13.82c0,.52.42.94.94.94h3.39c.83,0,1.25,1.01.66,1.6l-7.56,7.56c-.37.37-.96.37-1.32,0l-7.56-7.56c-.59-.59-.17-1.6.66-1.6h3.39c.52,0,.94-.42.94-.94v-13.82c0-.52.42-.94.94-.94Z"/>\n    </g>  \n  </svg>'),cR='\n<svg class="MLEP__array-buttons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \nviewBox=\n"-2 -2 '.concat(205," ").concat(205,'">\n  <rect \n      class="MLEP__array-insert-background rows"\n      x="0" \n      y="').concat(52,'" \n      height="').concat(144,'" \n      width="').concat(oR,'" \n      rx="').concat(24,'"/>\n      <rect \n      class="MLEP__array-insert-background columns"\n      x="').concat(52,'" \n      y="0" \n      height="').concat(oR,'" \n      width="').concat(144,'" \n      rx="').concat(24,'"/>\n  <g data-command=\'"moveDown"\'>\n  ').concat(uR(104,152,0),"\n  </g>\n  <g data-command='\"moveUp\"'>\n  ").concat(uR(104,56,180),"\n  </g>\n  <g data-command='\"moveToNextWord\"'>\n  ").concat(uR(152,104,-90),"\n  </g>\n  <g data-command='\"moveToPreviousWord\"'>\n  ").concat(uR(56,104,90),"\n  </g>\n  <g>\n\n  <g data-command='\"addColumnBefore\"'>\n  ").concat(sR(56,4),"\n  </g>\n  <g data-command='\"removeColumn\"'>\n  ").concat(lR(104,4),"\n  </g>\n  <g data-command='\"addColumnAfter\"'>\n  ").concat(sR(152,4),"\n  </g>\n  <g data-command='\"addRowBefore\"'>\n  ").concat(sR(4,56),"\n  </g>\n  <g data-command='\"removeRow\"'>\n  ").concat(lR(4,104),"\n  </g>\n  <g data-command='\"addRowAfter\"'>\n    ").concat(sR(4,152),"\n  </g>\n</svg>"),dR=e=>'\n<svg id="Bmatrix" class="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" \n  data-command=\'["setEnvironment","Bmatrix"]\'>\n  <rect class="cls-1" width="28" height="24"/>\n  <path class="cls-2" d="m6,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>\n  <path class="cls-2" d="m22,4c1.1,0,2,.9,2,2v3c0,1.66.9,3,2,3-1.1,0-2,1.34-2,3v3c0,1.1-.9,2-2,2"/>\n  <circle cx="10" cy="8" r="1"/>\n  <circle cx="14" cy="12" r="1"/>\n  <circle cx="18" cy="16" r="1"/>\n</svg>'),pR={matrix:e=>'\n<svg id="matrix" class="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" \n  data-command=\'["setEnvironment","matrix"]\'>\n  <rect class="cls-1" width="28" height="24"/>\n  <circle cx="10" cy="8" r="1"/>\n  <circle cx="14" cy="12" r="1"/>\n  <circle cx="18" cy="16" r="1"/></svg>'),pmatrix:e=>'\n<svg id="pmatrix" class="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" \ndata-command=\'["setEnvironment","pmatrix"]\'>\n  <rect class="cls-1" width="28" height="24"/>\n  <path class="cls-2" d="m6,4c-3.96,4.6-3.96,11.4,0,16"/>\n  <path class="cls-2" d="m22,4c3.96,4.6,3.96,11.4,0,16"/>\n  <circle cx="10" cy="8" r="1"/>\n  <circle cx="14" cy="12" r="1"/>\n  <circle cx="18" cy="16" r="1"/></svg>'),bmatrix:e=>'\n<svg id="bmatrix" class="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" \n  data-command=\'["setEnvironment","bmatrix"]\'>\n  <rect class="cls-1" width="28" height="24"/>\n  <path class="cls-2" d="m6,4h-3v16h3"/>\n  <path class="cls-2" d="m22,4h3v16h-3"/>\n  <circle cx="10" cy="8" r="1"/>\n  <circle cx="14" cy="12" r="1"/>\n  <circle cx="18" cy="16" r="1"/>\n</svg>'),Bmatrix:dR,vmatrix:e=>'\n<svg id="vmatrix" class="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" \n  data-command=\'["setEnvironment","vmatrix"]\'>\n  <rect class="cls-1" width="28" height="24"/>\n  <circle cx="10" cy="8" r="1"/>\n  <circle cx="14" cy="12" r="1"/>\n  <circle cx="18" cy="16" r="1"/>\n  <line class="cls-2" x1="4" y1="4" x2="4" y2="20"/>\n  <line class="cls-2" x1="24" y1="4" x2="24" y2="20"/>\n</svg>'),Vmatrix:e=>'\n<svg id="Vmatrix" class="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" viewBox="-3.5 -3 35 30" \n  data-command=\'["setEnvironment","Vmatrix"]\'>\n  <rect class="cls-1" width="28" height="24"/>\n  <circle cx="10" cy="8" r="1"/>\n  <circle cx="14" cy="12" r="1"/>\n  <circle cx="18" cy="16" r="1"/>\n  <line class="cls-2" x1="6" y1="4" x2="6" y2="20"/>\n  <line class="cls-2" x1="22" y1="4" x2="22" y2="20"/>\n  <line class="cls-2" x1="2" y1="4" x2="2" y2="20"/>\n  <line class="cls-2" x1="26" y1="4" x2="26" y2="20"/>\n</svg>')},hR={cases:e=>'\n<svg id="cases" class="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" \n  data-command=\'["setEnvironment","cases"]\'>\n  <rect class="cls-1" width="28" height="24"/>\n  <path class="cls-2" d="m10,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>\n  <circle cx="13" cy="8" r="1"/>\n  <circle cx="13" cy="16" r="1"/>\n  <circle cx="21" cy="8" r="1"/>\n  <circle cx="21" cy="16" r="1"/>\n</svg>'),rcases:e=>'\n<svg id="rcases" class="'.concat(e,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" \n  data-command=\'["setEnvironment","rcases"]\'>\n  <rect class="cls-1" width="28" height="24"/>\n  <path class="cls-2" d="m18,20c1.1,0,2-.9,2-2v-3c0-1.66.9-3,2-3-1.1,0-2-1.34-2-3v-3c0-1.1-.9-2-2-2"/>\n  <circle cx="15" cy="8" r="1"/>\n  <circle cx="15" cy="16" r="1"/>\n  <circle cx="7" cy="8" r="1"/>\n  <circle cx="7" cy="16" r="1"/>\n</svg>'),Bmatrix:dR};function fR(e){var t,n;let r=null==(t=e.model.parentEnvironment)?void 0:t.array;if(!r)return;let i=0;r.forEach((e=>{(!i||e.length>i)&&(i=e.length)}));let a=document.getElementById("mathlive-environment-popover");a||(a=YI("mathlive-environment-popover"),XO("environment-popover"),XO("core"),a.setAttribute("aria-hidden","true"));let o,s=a.querySelector(".MLEP__environment-controls");s?o=s:(o=document.createElement("div"),a.innerHTML="",a.appendChild(o)),o.className="MLEP__environment-controls",o.style.display="flex",o.style.width="100%",o.style.height="100%",o.style.boxSizing="border-box",o.innerHTML=cR;let l=[],u="",c=e.model.parentEnvironment.environmentName;if(Dz(c)){let e=function(e){return e.replace("*","")}(c);u=pR[e]("active");let t=pR,{[e]:n}=t,r=Yk(t,[Xk(e)]);l=Object.values(r).map((e=>e("inactive")))}else if(function(e){return yz.includes(e)}(c)){let e=function(e){return"dcases"===e?"cases":e}(c);u=hR[e]("active");let t=hR,{[e]:n}=t,r=Yk(t,[Xk(e)]);l=Object.values(r).map((e=>e("inactive")))}else(function(e){return bz.includes(e)})(c)&&(u=pR.matrix("active"),l=Object.values(hR).map((e=>e("inactive"))));let d=document.createElement("div");d.className="MLEP__environment-delimiter-controls",d.style.display="flex",d.style.flexDirection="column",d.innerHTML="\n  <div class='MLEP__array-delimiter-options'>\n  ".concat(u,"\n  ").concat(l.join(""),"\n  </div>"),u&&o.appendChild(d),o.querySelectorAll("[data-command]").forEach((t=>{let n=t.dataset.command,r=n;try{r=JSON.parse(n)}catch(v){}t.addEventListener("mousedown",(e=>e.preventDefault())),r&&t.addEventListener("click",(()=>e.executeCommand(r)))}));let p=null==(n=e.field)?void 0:n.getBoundingClientRect();p&&(a.style.top="".concat(window.scrollY+(p.top-a.clientHeight-15),"px"),a.style.left="".concat(p.left+20,"px"),a.classList.add("is-visible"))}function mR(){let e=document.getElementById("mathlive-environment-popover");null==e||e.classList.remove("is-visible")}function gR(e){if(!e.hasFocus())return;let t=!1;if("math"===e.model.mode){let n=e.model.parentEnvironment;if(null!=n&&n.array&&function(e){return xz.concat(bz).concat(yz).concat(vz).includes(e)}(n.environmentName)){let n=e.options.environmentPopoverPolicy;t="auto"===n||"on"===n}}t?fR(e):mR()}function vR(e){let t=getComputedStyle(e).direction;return"ltr"===t||"rtl"===t?t:"ltr"}function yR(e,t,n){return"left"===t||"leading"===t&&"ltr"===n||"trailing"===t&&"rtl"===n?e.left:e.right}function bR(e,t,n,r){return"middle"===n?e-t/2:"start"===n&&"rtl"===r||"end"===n&&"ltr"===r||"top"===n||"right"===n?Math.max(0,e-t):e}function xR(e){return"submenu"in e}function DR(e){return"type"in e&&"command"===e.type||"onMenuSelect"in e||"id"in e}function wR(e){return"type"in e&&"divider"===e.type}function _R(e){return"type"in e&&"heading"===e.type}var SR={};function CR(e){let t=SR[e];if(!t){let n;switch(e){case"checkmark":n='<span aria-hidden="true" class="ui-checkmark"><svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"></path></svg>\n      </span>';break;case"trailing-chevron":n='<span aria-hidden="true" class="ui-trailing-chevron"><svg focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></span>';break;case"mixedmark":n='<span aria-hidden="true" class="ui-mixedmark"><svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256c0-13.3 10.7-24 24-24H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24z"/></svg></span>'}if(n){let r=document.createElement("template");r.innerHTML=n,SR[e]=r,t=r}}if(t){if("content"in t)return t.content.cloneNode(!0);let e=document.createElement("svg");return e.innerHTML=t.innerHTML,e}}var ER=class{constructor(e,t){var n;this._element=null,this.parentMenu=t,this._declaration=e,xR(e)?(this.type="submenu",this.submenu=new AR(e.submenu,{parentMenu:t,submenuClass:e.submenuClass,columnCount:e.columnCount})):this.type=null!=(n=e.type)?n:"command",this.hasCheck=DR(e)&&void 0!==e.checked}get rootMenu(){return this.parentMenu.rootMenu}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}dispose(){var e,t;null==(e=this._abortController)||e.abort(),this._abortController=void 0,null==(t=this._element)||t.remove(),this._element=null,this.submenu&&this.submenu.dispose(),this.submenu=void 0}get menuItem(){return this._declaration}get label(){var e;return null!=(e=this._label)?e:""}set label(e){void 0===e&&(e=""),e!==this._label&&(this._label=e,this.dirty=!0)}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.dirty=!0)}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.element&&(e?this.element.removeAttribute("aria-disabled"):this.element.setAttribute("aria-disabled","true")),this.dirty=!0}get checked(){return this._checked}set checked(e){this._checked=e,this.dirty=!0}get tooltip(){return this._tooltip}set tooltip(e){e!==this._tooltip&&(this._tooltip=e,this.dirty=!0)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){e!==this._ariaLabel&&(this._ariaLabel=e,this.dirty=!0)}get active(){var e,t;return null!=(t=null==(e=this.element)?void 0:e.classList.contains("active"))&&t}set active(e){this.element&&this.element.classList.toggle("active",e)}updateState(e){var t,n,r;let i=this._declaration;if(wR(i))return this.enabled=!1,void(this.checked=!1);_R(i)&&(this.enabled=!1,this.checked=!1,this.visible=!0),DR(i)&&(this.checked=DR(i)&&null!=(t=kR(i.checked,e))&&t),(DR(i)||xR(i))&&(this.enabled=null==(n=kR(i.enabled,e))||n,this.visible=null==(r=kR(i.visible,e))||r,this.visible&&this.enabled&&this.submenu&&(this.submenu.updateState(e),this.submenu.visible||(this.visible=!1))),(DR(i)||_R(i)||xR(i))&&(this.label=kR(i.label,e),this.tooltip=kR(i.tooltip,e),this.ariaLabel=kR(i.ariaLabel,e)),this._element&&this.updateElement()}set dirty(e){e&&this.parentMenu&&(this.parentMenu.dirty=!0)}updateElement(){if(!this.visible||!this.element)return;let e=this.element;e.textContent="",this.enabled?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true"),!0===this.checked?(e.setAttribute("aria-checked","true"),e.append(CR("checkmark"))):"mixed"===this.checked?(e.setAttribute("aria-checked","mixed"),e.append(CR("mixedmark"))):e.removeAttribute("aria-checked"),this.ariaLabel&&e.setAttribute("aria-label",this.ariaLabel);let t=document.createElement("span");if(t.className=this.parentMenu.hasCheck?"label indent":"label","heading"===this.type&&t.classList.add("heading"),t.innerHTML=this.label,e.append(t),this._tooltip&&e.setAttribute("data-tooltip",this._tooltip),DR(this._declaration)&&this._declaration.keyboardShortcut){let t=document.createElement("kbd");t.innerHTML=BI(this._declaration.keyboardShortcut),e.append(t)}"submenu"===this.type&&e.append(CR("trailing-chevron"))}get element(){if(this._element)return this._element;if(wR(this._declaration)){let e=document.createElement("li");return e.setAttribute("part","menu-divider"),e.setAttribute("role","divider"),this._element=e,e}let e=document.createElement("li");this._element=e,(DR(this._declaration)||_R(this._declaration)||xR(this._declaration))&&this._declaration.class&&(e.className=this._declaration.class),e.setAttribute("part","menu-item"),e.setAttribute("tabindex","-1"),this.hasCheck?e.setAttribute("role","menuitemcheckbox"):e.setAttribute("role","menuitem"),"submenu"===this.type&&(e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false"));let t=this.abortController.signal;return e.addEventListener("pointerenter",this,{signal:t}),e.addEventListener("pointerleave",this,{signal:t}),e.addEventListener("pointerup",this,{signal:t}),e.addEventListener("click",this,{signal:t}),this._element}dispatchSelect(){if(!DR(this._declaration))return;let e=new CustomEvent("menu-select",{cancelable:!0,bubbles:!0,detail:{modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data}});this.parentMenu.dispatchEvent(e)&&"function"==typeof this._declaration.onMenuSelect&&this._declaration.onMenuSelect({modifiers:this.rootMenu.modifiers,id:this._declaration.id,data:this._declaration.data})}handleEvent(e){var t;if(this.visible&&this.enabled){if("click"===e.type)return"modal"===this.rootMenu.state&&this.select(),e.stopPropagation(),void e.preventDefault();if("pointerenter"===e.type){let n=e;return this.rootMenu.cancelDelayedOperation(),void(this.parentMenu.isSubmenuOpen&&null!=(t=this.parentMenu.activeMenuItem)&&t.movingTowardSubmenu(n)?this.rootMenu.scheduleOperation((()=>{this.parentMenu.activeMenuItem=this,this.openSubmenu()})):(this.parentMenu.activeMenuItem=this,this.openSubmenu({withDelay:!0})))}if("pointerleave"===e.type)return void(this.rootMenu.activeSubmenu===this.parentMenu&&(this.parentMenu.activeMenuItem=null));if("pointerup"===e.type)return"modal"!==this.rootMenu.state&&this.select(),e.stopPropagation(),void e.preventDefault()}}select(){this.rootMenu.cancelDelayedOperation(),"submenu"!==this.type?(this.active=!1,setTimeout((()=>{this.active=!0,setTimeout((()=>{this.rootMenu.hide(),this.dispatchSelect()}),80)}),80)):this.openSubmenu()}openSubmenu(e){var t;if("submenu"!==this.type||!this.element)return;if(null!=(t=null==e?void 0:e.withDelay)&&t)return void this.rootMenu.scheduleOperation((()=>this.openSubmenu()));let n=this.element.getBoundingClientRect(),r=vR(this.element);this.submenu.show({container:this.rootMenu.element.parentNode,location:{x:yR(n,"trailing",r),y:n.top-4},alternateLocation:{x:yR(n,"leading",r),y:n.top-4}})}movingTowardSubmenu(e){if(!this.element||"submenu"!==this.type)return!1;let t=this.rootMenu.lastMoveEvent;if(!t)return!1;let n=e.timeStamp-t.timeStamp;if(n>500)return!1;let r=e.clientX-t.clientX;if(function(e,t,n){return Math.hypot(e,t)/n}(r,t.clientY-e.clientY,n)<=.2)return!1;let i="right";if(this.submenu.element){let e=this.submenu.element.getBoundingClientRect(),t=this.element.getBoundingClientRect();e.left<t.left+t.width/2&&(i="left")}return"right"===i?r>0:r<0}};function kR(e,t){return void 0===e||"function"!=typeof e?e:(null!=t||(t={alt:!1,control:!1,shift:!1,meta:!1}),e(t))}var AR=class e{constructor(e,t){var n,r;this._element=null,this._activeMenuItem=null,this._dirty=!0,this.parentMenu=null!=(n=null==t?void 0:t.parentMenu)?n:null,this._submenuClass=null==t?void 0:t.submenuClass,this.columnCount=null!=(r=null==t?void 0:t.columnCount)?r:1,this.isSubmenuOpen=!1,this.menuItems=e}get children(){return this._menuItems}set menuItems(e){let t=this.parentMenu;this.dispose(),this.parentMenu=t,e=[...e],this._menuItems=e.map((e=>e.onCreate?e.onCreate(e,this):new ER(e,this))),this.hasCheck=void 0,this.dirty=!0}dispose(){var e;this.hide(),this._element&&this._element.remove(),this._abortController&&this._abortController.abort(),null==(e=this._menuItems)||e.forEach((e=>e.dispose())),this._menuItems=[],this._activeMenuItem=null,this.parentMenu=null}handleEvent(e){if("wheel"===e.type&&this._element){let t=e;this._element.scrollBy(0,t.deltaY),e.stopPropagation()}}dispatchEvent(e){return this.rootMenu.dispatchEvent(e)}get rootMenu(){return this.parentMenu.rootMenu}updateState(e){var t,n,r;this._menuItems.forEach((t=>t.updateState(e)));let i=this.hasCheck;this.hasCheck=this._menuItems.some((e=>e.visible&&e.hasCheck)),this.hasCheck!==i&&this._menuItems.forEach((t=>t.updateState(e)));let a,o=0;for(let l of this._menuItems)"heading"===l.type?(a&&0===o&&(a.visible=!1),a=l,o=0):"divider"===l.type&&a?(a.visible=o>0,a=void 0,o=0):a&&l.visible&&(o+=1);a&&(a.visible=o>0);let s=!0;for(let l of this._menuItems)"divider"===l.type?(l.visible=!s,s=!0):l.visible&&(s=!1);null!=(t=this.activeMenuItem)&&t.visible||(this.activeMenuItem=null),!(null!=(n=this.activeMenuItem)&&n.enabled)&&"submenu"===(null==(r=this.activeMenuItem)?void 0:r.type)&&this._activeMenuItem.submenu.hide(),this._dirty=!1}get enabled(){return this.updateIfDirty(),this._menuItems.some((e=>"divider"!==e.type&&e.visible&&e.enabled))}get visible(){return this.updateIfDirty(),this._menuItems.some((e=>"divider"!==e.type&&e.visible))}set dirty(e){this._dirty!==e&&e&&this.parentMenu&&(this._dirty=!0,this.parentMenu.dirty=!0)}updateIfDirty(){this._dirty&&this.updateState(this.rootMenu.modifiers)}updateElement(){var e;if(this._element){this._element.textContent="";for(let{element:e,visible:t}of this._menuItems)e&&t&&this._element.append(e);null==(e=this._element.querySelector("li:first-of-type"))||e.setAttribute("tabindex","0")}}get element(){if(this._element)return this._element;let e=document.createElement("menu");e.setAttribute("role","menu"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-orientation","vertical"),e.setAttribute("part","ui-menu-container"),this._submenuClass&&e.classList.add(this._submenuClass),e.classList.add("ui-menu-container"),this._abortController||(this._abortController=new AbortController);let t=this._abortController.signal;return e.addEventListener("focus",this,{signal:t}),e.addEventListener("wheel",this,{passive:!0,signal:t}),this._element=e,this.updateElement(),e}get activeMenuItem(){return this._activeMenuItem}set activeMenuItem(e){var t,n,r,i;if(this.rootMenu.cancelDelayedOperation(),e!==this._activeMenuItem){if(this.activeMenuItem){let e=this.activeMenuItem;e.active=!1,null==(t=e.submenu)||t.hide()}if(null!=(n=null==e?void 0:e.visible)&&!n)return void(this._activeMenuItem=null);this._activeMenuItem=e,e&&(e.active=!0)}e?null==(r=e.element)||r.focus({preventScroll:!0}):null==(i=this._element)||i.focus({preventScroll:!0})}get firstMenuItem(){this.updateIfDirty();let e=0,t=!1,n=this._menuItems;for(;!t&&e<=n.length-1;){let r=n[e];t="divider"!==r.type&&r.visible&&r.enabled,e+=1}return t?n[e-1]:null}get lastMenuItem(){this.updateIfDirty();let e=this._menuItems,t=e.length-1,n=!1;for(;!n&&t>=0;){let r=e[t];n="divider"!==r.type&&r.visible&&r.enabled,t-=1}return n?e[t+1]:null}nextMenuItem(e){if(0===e)return this._activeMenuItem;if(!this._activeMenuItem)return e>0?this.firstMenuItem:this.lastMenuItem;if(!this.firstMenuItem||!this.lastMenuItem||!this._activeMenuItem)return null;this.updateIfDirty();let t=this._menuItems.indexOf(this.firstMenuItem),n=this._menuItems.indexOf(this.lastMenuItem),r=this._menuItems.indexOf(this._activeMenuItem),i=1;for(;r>=t&&r<=n;){r+=e>0?1:-1;let t=this._menuItems[r];if(!t)break;if(t.visible&&t.enabled){if(i===Math.abs(e))return this._menuItems[r];i+=1}}return e>0?this.lastMenuItem:this.firstMenuItem}getMenuItemColumn(e){this.updateIfDirty();let t=this._menuItems.filter((e=>e.visible&&e.enabled)).indexOf(e);return t<0?-1:t%this.columnCount}static get collator(){return e._collator||(e._collator=new Intl.Collator(void 0,{usage:"search",sensitivity:"base"})),e._collator}findMenuItem(t){var n;this.updateIfDirty();let r=this._menuItems.filter((e=>"divider"!==e.type&&e.visible&&e.enabled));if(0===r.length)return null;let i=Math.max(...r.map((e=>e.label.length)))-t.length;if(i<0)return null;let a=null,o=0;for(;o<i&&!a;)a=null!=(n=r.find((n=>0===e.collator.compare(t,n.label.substring(o,t.length)))))?n:null,o++;return a}show(e){return!(!this.visible||!e.container)&&(this.updateElement(),e.container.appendChild(this.element),rA()&&(this.element.popover="manual",this.element.showPopover()),e.location&&function(e,t){var n,r,i;let a=null!=(n=vR(e))?n:"ltr";e.style.position="fixed",e.style.left="",e.style.top="",e.style.right="",e.style.bottom="",e.style.height="",e.style.width="";let o=e.getBoundingClientRect(),s=Number.isFinite(t.maxHeight)?Math.min(t.maxHeight,window.innerHeight):window.innerHeight,l=Math.min(s,null!=(r=t.height)?r:o.height),u=bR(t.location.y,l,t.verticalPos,a);u+l>window.innerHeight-8&&(t.alternateLocation?(u=bR(t.alternateLocation.y,l,t.verticalPos,a),u+l>window.innerHeight-8&&(u=void 0)):u=void 0),Number.isFinite(u)||(u=Math.max(8,window.innerHeight-8-l),8+l>window.innerHeight-8&&(e.style.bottom="8px")),l=Math.min(u+l,window.innerHeight-8)-u;let c=Number.isFinite(t.maxWidth)?Math.min(t.maxWidth,window.innerWidth):window.innerWidth,d=Math.min(c,null!=(i=t.width)?i:o.width),p=bR(t.location.x,d,t.horizontalPos,a);p+d>window.innerWidth-8&&(t.alternateLocation?(p=function(e,t,n,r){return"middle"===n?e-t/2:"start"===n&&"ltr"===r||"end"===n&&"rtl"===r||"top"===n||"right"===n?e:e-t}(t.alternateLocation.x,d,t.verticalPos,a),p+d>window.innerWidth-8&&(p=void 0)):p=void 0),Number.isFinite(p)||(p=Math.max(8,window.innerWidth-8-d),8+d>window.innerWidth-8&&(e.style.right="8px")),d=Math.min(p+d,window.innerWidth-8)-p,"rtl"===a?e.style.right="".concat(Math.ceil(window.innerWidth-p-d).toString(),"px"):e.style.left="".concat(Math.ceil(p).toString(),"px"),e.style.top="".concat(Math.ceil(u).toString(),"px"),l!==o.height&&(e.style.height="".concat(Math.ceil(l).toString(),"px")),d!==o.width&&(e.style.width="".concat(Math.ceil(d).toString(),"px"))}(this.element,{location:e.location,alternateLocation:e.alternateLocation,verticalPos:"bottom",horizontalPos:"start"}),this.element.focus({preventScroll:!0}),this.parentMenu&&(this.parentMenu.openSubmenu=this),!0)}hide(){var e,t,n,r,i;this.openSubmenu=null,this.activeMenuItem=null,this.parentMenu&&(this.parentMenu.openSubmenu=null),rA()&&null!=(e=this._element)&&e.popover&&this.element.hidePopover(),null==(n=null==(t=this.parentMenu)?void 0:t.element)||n.focus(),null==(i=null==(r=this._element)?void 0:r.parentNode)||i.removeChild(this._element)}set openSubmenu(e){var t,n,r,i;let a=null!==e;"submenu"===(null==(t=this.activeMenuItem)?void 0:t.type)&&(null==(n=this.activeMenuItem.element)||n.setAttribute("aria-expanded",a.toString())),null==(i=null==(r=this.activeMenuItem)?void 0:r.element)||i.classList.toggle("is-submenu-open",a),this.isSubmenuOpen=a}},NR=class e extends AR{constructor(e,t){var n;super(e),this.state="closed",this.typingBufferResetTimer=0,this.hysteresisTimer=0,this._updating=!1,this._host=null!=(n=null==t?void 0:t.host)?n:null,this.isDynamic=e.some(FR),this._modifiers={shift:!1,control:!1,alt:!1,meta:!1},this.typingBuffer="",this.state="closed"}get modifiers(){return this._modifiers}set modifiers(e){(function(e,t){return!(!e&&t||e&&!t)&&(!e||!t||e.alt===t.alt&&e.control===t.control&&e.shift===t.shift&&e.meta===t.meta)})(this._modifiers,e)||(this._modifiers=e,this.dirty=!0)}get activeSubmenu(){let e=this;for(;e.isSubmenuOpen;)e=e.activeMenuItem.submenu;return e}set dirty(e){this._updating||this._dirty!==e&&(this._dirty=!0,e&&setTimeout((()=>{this.updateState(this.modifiers),this.updateElement()})))}updateState(e){this._updating=!0,this.modifiers=null!=e?e:this.modifiers,super.updateState(this.modifiers),this._updating=!1}handleKeyupEvent(e){this.isDynamic&&(this.modifiers=OI(e)),e.stopImmediatePropagation()}handleKeydownEvent(e){var t,n,r;if("Tab"===e.key||"Escape"===e.key)return void this.hide();this.isDynamic&&(this.modifiers=OI(e));let i=!0,a=this.activeSubmenu,o=a.activeMenuItem;switch(e.key){case" ":case"Space":case"Return":case"Enter":null==o||o.select(OI(e));break;case"ArrowRight":if("submenu"===(null==o?void 0:o.type))o.select(OI(e)),this.activeSubmenu.activeMenuItem=this.activeSubmenu.firstMenuItem;else if(o){let e=null!=(t=a.getMenuItemColumn(o))?t:-1;if(e>=0&&e<(null!=(n=a.columnCount)?n:1)-1){let e=a.nextMenuItem(1);e&&(a.activeMenuItem=e)}}else a.activeMenuItem=a.firstMenuItem;break;case"ArrowLeft":if(a===this.rootMenu)o||(a.activeMenuItem=a.firstMenuItem);else if((o&&null!=(r=a.getMenuItemColumn(o))?r:-1)<=0||!o){a.hide();let e=a.parentMenu.activeMenuItem;if(e){let{element:t}=e;null==t||t.focus(),null==t||t.classList.remove("is-submenu-open")}}else{let e=a.nextMenuItem(-1);e&&(a.activeMenuItem=e)}break;case"ArrowDown":a.activeMenuItem=a.nextMenuItem(a.columnCount);break;case"ArrowUp":a.activeMenuItem=a.nextMenuItem(-a.columnCount);break;case"Home":case"PageUp":a.activeMenuItem=a.firstMenuItem;break;case"End":case"PageDown":a.activeMenuItem=a.lastMenuItem;break;case"Backspace":if(this.typingBuffer&&(this.typingBuffer=this.typingBuffer.slice(0,-1),this.typingBuffer)){clearTimeout(this.typingBufferResetTimer);let e=a.findMenuItem(this.typingBuffer);e&&(a.activeMenuItem=e),this.typingBufferResetTimer=setTimeout((()=>{this.typingBuffer=""}),500)}break;default:if(II(e)){isFinite(this.typingBufferResetTimer)&&clearTimeout(this.typingBufferResetTimer),this.typingBuffer+=e.key;let t=a.findMenuItem(this.typingBuffer);t&&(a.activeMenuItem=t),this.typingBufferResetTimer=setTimeout((()=>{this.typingBuffer=""}),500)}else i=!1}i&&(e.preventDefault(),e.stopPropagation())}handleEvent(e){if("keydown"===e.type)this.handleKeydownEvent(e);else if("keyup"===e.type)this.handleKeyupEvent(e);else if("pointermove"===e.type)this.lastMoveEvent=e;else if("pointerup"===e.type&&e.target===this.scrim)Number.isFinite(this.rootMenu._openTimestamp)&&Date.now()-this.rootMenu._openTimestamp<120?this.state="modal":"modal"===this.state&&this.hide();else if("contextmenu"===e.type)return e.preventDefault(),void e.stopPropagation();super.handleEvent(e)}dispatchEvent(e){return!this._host||this._host.dispatchEvent(e)}get scrim(){return qI.element}connectScrim(e){let t=this.scrim;t.addEventListener("pointerup",this),t.addEventListener("contextmenu",this),t.addEventListener("keydown",this),t.addEventListener("keyup",this),t.addEventListener("pointermove",this),qI.open({root:e,onDismiss:()=>this.hide()})}disconnectScrim(){let e=this.scrim;e.removeEventListener("pointerup",this),e.removeEventListener("contextmenu",this),e.removeEventListener("keydown",this),e.removeEventListener("keyup",this),e.removeEventListener("pointermove",this),"open"===qI.state&&qI.scrim.close()}get rootMenu(){return this}show(e){return this._onDismiss=null==e?void 0:e.onDismiss,null!=e&&e.modifiers&&(this.modifiers=e.modifiers),this.updateState(),this.connectScrim(null==e?void 0:e.target),super.show(Jk(Zk({},e),{container:this.scrim}))?(this._openTimestamp=Date.now(),this.state="open",!0):(this.disconnectScrim(),!1)}hide(){this.cancelDelayedOperation(),void 0!==this.state&&("closed"!==this.state&&(this.activeMenuItem=null,qI.element.parentElement.focus(),super.hide(),this.state="closed",this.disconnectScrim()),this._onDismiss&&(this._onDismiss(),this._onDismiss=void 0))}scheduleOperation(t){this.cancelDelayedOperation();let n=e.SUBMENU_DELAY;n<=0?t():this.hysteresisTimer=setTimeout((()=>{this.hysteresisTimer=0,t()}),n)}cancelDelayedOperation(){this.hysteresisTimer&&(clearTimeout(this.hysteresisTimer),this.hysteresisTimer=0)}};NR.SUBMENU_DELAY=120;var MR=NR;function FR(e){return!wR(e)&&(!!("function"==typeof e.label||"function"==typeof e.ariaLabel||"function"==typeof e.tooltip||(DR(e)||xR(e))&&("function"==typeof e.enabled||"function"==typeof e.visible)||DR(e)&&"function"==typeof e.checked)||!!xR(e)&&e.submenu.some(FR))}var TR=class{};function BR(e){return new Promise(((t,n)=>{let r=LI(e);r||t(!1);let i=r,a=setTimeout((()=>{o.abort(),t(function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)}(i,r)<TR.MAX_DISTANCE)}),TR.DELAY),o=new AbortController,s=o.signal;for(let e of["pointermove","pointerup","pointercancel"])window.addEventListener(e,(e=>{if("pointerup"===e.type||"pointercancel"===e.type)clearTimeout(a),o.abort(),t(!1);else if("pointermove"===e.type){let t=LI(e);t&&(i=t)}}),{passive:!0,signal:s})}))}async function LR(e,t,n){if("contextmenu"===e.type){let r=e;if(n.show({target:t,location:LI(r),modifiers:OI(r)}))return e.preventDefault(),e.stopPropagation(),!0}if("keydown"===e.type){let r=e;if("ContextMenu"===r.code||"F10"===r.code&&r.shiftKey){let i=null==t?void 0:t.getBoundingClientRect();if(i&&n.show({target:t,location:{x:Math.ceil(i.left+i.width/2),y:Math.ceil(i.top+i.height/2)},modifiers:OI(r)}))return e.preventDefault(),e.stopPropagation(),!0}}if("pointerdown"===e.type&&"mouse"!==e.pointerType&&0===e.button){let r=e.target;for(;r&&t!==r;)r=r.parentNode;if(!r||!n.visible)return!1;let i=LI(e);if(await BR(e))return"closed"===n.state&&(n.show({target:t,location:i}),!0)}return!1}TR.DELAY=300,TR.MAX_DISTANCE=10;var OR={acute:714,grave:715,dot:729,ddot:168,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};jA(Object.keys(OR),"{body:auto}",{createAtom:e=>new QO(Jk(Zk({},e),{body:wA(e.args[0]),accentChar:OR[e.command.slice(1)]}))}),jA(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:e=>{let t=PA(wA(e.args[0]));return new QO(Jk(Zk({},e),{body:wA(e.args[0]),svgAccent:e.command.slice(1)+(t.length>5?"4":["1","1","2","2","3","3"][t.length])}))}}),jA(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:e=>new QO(Jk(Zk({},e),{body:wA(e.args[0]),svgAccent:"overarc"}))}),jA(["underarc","underparen"],"{body:auto}",{createAtom:e=>new eI(Jk(Zk({},e),{body:wA(e.args[0]),svgBelow:"underarc"}))}),jA("utilde","{body:auto}",{createAtom:e=>{let t=wA(e.args[0]),n=PA(t),r="widetilde"+(n.length>5?"4":["1","1","2","2","3","3"][n.length]);return new eI(Jk(Zk({},e),{body:t,svgBelow:r,boxType:HL(t)}))}}),jA("^","{:string}",{createAtom:e=>{var t;return new gO(Jk(Zk({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(t={a:"\xe2",e:"\xea",i:"\xee",o:"\xf4",u:"\xfb",A:"\xc2",E:"\xca",I:"\xce",O:"\xd4",U:"\xdb"}[e.args[0]])?t:"^"}))}}),jA("`","{:string}",{createAtom:e=>{var t;return new gO(Jk(Zk({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(t={a:"\xe0",e:"\xe8",i:"\xec",o:"\xf2",u:"\xf9",A:"\xc0",E:"\xc8",I:"\xcc",O:"\xd2",U:"\xd9"}[e.args[0]])?t:"`"}))}}),jA("'","{:string}",{createAtom:e=>{var t;return new gO(Jk(Zk({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(t={a:"\xe1",e:"\xe9",i:"\xed",o:"\xf3",u:"\xfa",A:"\xc1",E:"\xc9",I:"\xcd",O:"\xd3",U:"\xda"}[e.args[0]])?t:"'"}))}}),jA('"',"{:string}",{createAtom:e=>{var t,n;return new gO(Jk(Zk({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:null!=(t=e.args)&&t[0]?null!=(n={a:"\xe4",e:"\xeb",i:"\xef",o:"\xf6",u:"\xfc",A:"\xc4",E:"\xcb",I:"\xcb",O:"\xd6",U:"\xdc"}[e.args[0]])?n:'"'+e.args[0]:'"'}))}}),jA(".","{:string}",{createAtom:e=>{var t,n;return new gO(Jk(Zk({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:null!=(t=e.args)&&t[0]?null!=(n={a:"\u0227",e:"\u0117",i:"\u0307i",o:"\u022f",u:"\u0307u",A:"\u0226",E:"\u0116",I:"\u0130",O:"\u022e",U:"\u0307U"}[e.args[0]])?n:"."+e.args[0]:"."}))}}),jA("=","{:string}",{createAtom:e=>{var t,n;return new gO(Jk(Zk({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:null!=(t=e.args)&&t[0]?null!=(n={a:"\u0101",e:"\u0113",i:"\u012b",o:"\u014d",u:"\u016b",A:"\u0100",E:"\u0112",I:"\u012a",O:"\u014c",U:"\u016a"}[e.args[0]])?n:"="+e.args[0]:"="}))}}),jA("~","{:string}",{createAtom:e=>{var t;return new gO(Jk(Zk({type:"mord"},e),{isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(t={n:"\xf1",N:"\xd1",a:"\xe3",o:"\xf5",A:"\xc3",O:"\xd5"}[e.args[0]])?t:"\xb4"}))}}),jA("c","{:string}",{createAtom:e=>{var t;return new gO(Jk(Zk({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(t={c:"\xe7",C:"\xc7"}[e.args[0]])?t:""}))}}),jA("enclose","{notation:string}[style:string]{body:auto}",{createAtom:e=>{var t,n;let r=e.args,i={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"none",svgStrokeStyle:void 0,borderStyle:void 0,style:null!=(t=e.style)?t:{}};if(r[1]){let e=r[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let t of e){let e=t.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(e)i.strokeWidth=e[1],i.strokeStyle=e[2],i.strokeColor=e[3];else{let e=t.match(/\s*([a-z]*)\s*=\s*"(.*)"/);e&&("mathbackground"===e[1]?i.backgroundcolor=e[2]:"mathcolor"===e[1]?i.strokeColor=e[2]:"padding"===e[1]?i.padding=e[2]:"shadow"===e[1]&&(i.shadow=e[2]))}}"dashed"===i.strokeStyle?i.svgStrokeStyle="5,5":"dotted"===i.strokeStyle&&(i.svgStrokeStyle="1,5")}i.borderStyle="".concat(i.strokeWidth," ").concat(i.strokeStyle," ").concat(i.strokeColor);let a={};return(null!=(n=r[0])?n:"").split(/[, ]/).filter((e=>e.length>0)).forEach((e=>{a[e.toLowerCase()]=!0})),new $z(e.command,wA(r[2]),a,i)}}),jA("cancel","{body:auto}",{createAtom:e=>{var t;return new $z(e.command,wA(e.args[0]),{updiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:null!=(t=e.style)?t:{}})}}),jA("bcancel","{body:auto}",{createAtom:e=>{var t;return new $z(e.command,wA(e.args[0]),{downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:null!=(t=e.style)?t:{}})}}),jA("xcancel","{body:auto}",{createAtom:e=>{var t;return new $z(e.command,wA(e.args[0]),{updiagonalstrike:!0,downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"none",style:null!=(t=e.style)?t:{}})}}),jA(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:e=>{var t;return new eI(Jk(Zk({},e),{body:wA(null==(t=e.args)?void 0:t[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgAbove:e.command.slice(1)}))}}),jA("overbrace","{:auto}",{createAtom:e=>new eI(Jk(Zk({},e),{body:wA(e.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgAbove:e.command.slice(1)}))}),jA(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:e=>new eI(Jk(Zk({},e),{body:wA(e.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgBelow:e.command.slice(1)}))}),jA(["underbrace"],"{:auto}",{createAtom:e=>new eI(Jk(Zk({},e),{body:wA(e.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgBelow:e.command.slice(1)}))}),jA(["xrightarrow","longrightarrow","xleftarrow","longleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","longleftrightarrow","xLeftrightarrow","xrightleftharpoons","longrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xleftrightarrows","longleftrightarrows","xRightleftharpoons","longRightleftharpoons","xLeftrightharpoons","longLeftrightharpoons"],"[:auto]{:auto}",{createAtom:e=>{var t,n,r,i,a;return new eI(Jk(Zk({},e),{svgBody:e.command.slice(1),above:0===(null==(n=wA(null==(t=e.args)?void 0:t[1]))?void 0:n.length)?void 0:wA(null==(r=e.args)?void 0:r[1]),below:null!=(a=wA(null==(i=e.args)?void 0:i[0]))?a:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"rel"}))},serialize:(e,t)=>e.command+(e.hasEmptyBranch("below")?"":"[".concat(e.belowToLatex(t),"]"))+"{".concat(e.aboveToLatex(t),"}").concat(e.supsubToLatex(t))}),jA(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","deg","dim","exp","gcd","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,ifMode:"math",createAtom:e=>new dI(e.command.slice(1),Jk(Zk({},e),{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up"}))}),jA(["liminf","limsup"],"",{ifMode:"math",createAtom:e=>new dI({"\\liminf":"lim inf","\\limsup":"lim sup"}[e.command],Jk(Zk({},e),{limits:"over-under",variant:"main"}))}),jA(["lim","mod"],"",{ifMode:"math",createAtom:e=>new dI(e.command.slice(1),Jk(Zk({},e),{limits:"over-under",variant:"main"}))}),jA(["det","max","min"],"",{ifMode:"math",isFunction:!0,createAtom:e=>new dI(e.command.slice(1),Jk(Zk({},e),{limits:"over-under",isFunction:!0,variant:"main"}))}),jA(["ang"],"{:math}",{ifMode:"math",createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[0])})),serialize:(e,t)=>"\\ang{".concat(e.bodyToLatex(t),"}"),render:(e,t)=>{let n=e.createBox(t),r=n.caret;n.caret=void 0;let i=new GL("\xb0",{style:Jk(Zk({},e.style),{variant:"normal",variantStyle:"up"})});return new GL([n,i],{type:"inner",isSelected:e.isSelected,caret:r})}}),jA("sqrt","[index:auto]{radicand:expression}",{ifMode:"math",createAtom:e=>new rI(Jk(Zk({},e),{body:wA(e.args[1]),index:e.args[0]?wA(e.args[0]):void 0}))}),jA(["frac","dfrac","tfrac","binom","dbinom","tbinom"],"{:expression}{:expression}",{ifMode:"math",createAtom:e=>{let t=Zk({},e),n=e.command,r=e.args;switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":t.hasBarLine=!0;break;case"\\atopfrac":t.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":t.hasBarLine=!1,t.leftDelim="(",t.rightDelim=")";break;case"\\cfrac":t.hasBarLine=!0,t.continuousFraction=!0}switch(n){case"\\dfrac":case"\\dbinom":t.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":t.mathstyleName="textstyle"}return new Gz(r[0]?wA(r[0]):[new gz],r[1]?wA(r[1]):[new gz],t)},serialize:(e,t)=>{let n=e.aboveToLatex(t),r=e.belowToLatex(t);return/^[0-9]$/.test(n)&&/^[0-9]$/.test(r)?"".concat(e.command).concat(n).concat(r):IL(e.command,n,r)}}),jA(["cfrac"],"[:string]{:expression}{:expression}",{ifMode:"math",createAtom:e=>{let t=Zk({},e),n=e.args;return t.hasBarLine=!0,t.continuousFraction=!0,"r"===n[0]&&(t.align="right"),"l"===n[0]&&(t.align="left"),new Gz(n[1]?wA(n[1]):[new gz],n[2]?wA(n[2]):[new gz],t)},serialize:(e,t)=>{let n=e.aboveToLatex(t),r=e.belowToLatex(t);return IL(e.command,n,r)}}),jA(["brace","brack"],"",{infix:!0,createAtom:e=>new Gz(wA(e.args[0]),wA(e.args[1]),Jk(Zk({},e),{hasBarLine:!1,leftDelim:"\\brace"===e.command?"\\lbrace":"\\lbrack",rightDelim:"\\brace"===e.command?"\\rbrace":"\\rbrack"})),serialize:(e,t)=>zL([e.aboveToLatex(t),e.command,e.belowToLatex(t)])}),jA(["over","atop","choose"],"",{infix:!0,createAtom:e=>{let t,n,r=e.args;return"\\choose"===e.command&&(t="(",n=")"),new Gz(wA(r[0]),wA(r[1]),Jk(Zk({},e),{hasBarLine:"\\over"===e.command,leftDelim:t,rightDelim:n}))},serialize:(e,t)=>zL([e.aboveToLatex(t),e.command,e.belowToLatex(t)])}),jA(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:e=>{var t,n;let r=e.args;return new Gz(wA(r[0]),wA(r[1]),Jk(Zk({},e),{leftDelim:null!=(t=r[2])?t:".",rightDelim:null!=(n=r[3])?n:".",hasBarLine:!1}))},serialize:(e,t)=>"".concat(e.aboveToLatex(t)," ").concat(e.command).concat(e.leftDelim).concat(e.rightDelim).concat(e.belowToLatex(t))}),jA("pdiff","{numerator}{denominator}",{ifMode:"math",createAtom:e=>new Gz(wA(e.args[0]),wA(e.args[1]),Jk(Zk({},e),{hasBarLine:!0,numerPrefix:"\u2202",denomPrefix:"\u2202"}))}),jA(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{ifMode:"math",createAtom:e=>new Yz({coprod:"\u2210",bigvee:"\u22c1",bigwedge:"\u22c0",biguplus:"\u2a04",bigcap:"\u22c2",bigcup:"\u22c3",intop:"\u222b",prod:"\u220f",sum:"\u2211",bigotimes:"\u2a02",bigoplus:"\u2a01",bigodot:"\u2a00",bigsqcup:"\u2a06",smallint:"\u222b"}[e.command.slice(1)],Jk(Zk({},e),{limits:"auto",variant:"main"}))}),jA("smallint","",{ifMode:"math",createAtom:e=>new dI("\u222b",Jk(Zk({},e),{limits:"adjacent",variant:"main"}))});var zR={int:"\u222b",iint:"\u222c",iiint:"\u222d",oint:"\u222e",oiint:"\u222f",oiiint:"\u2230",intclockwise:"\u2231",varointclockwise:"\u2232",ointctrclockwise:"\u2233",intctrclockwise:"\u2a11",sqcup:"\u2294",sqcap:"\u2293",uplus:"\u228e",wr:"\u2240",amalg:"\u2a3f",Cap:"\u22d2",Cup:"\u22d3",doublecap:"\u22d2",doublecup:"\u22d3"};jA(Object.keys(zR),"",{ifMode:"math",createAtom:e=>{let t=e.command,n=zR[t.slice(1)];return new Yz(n,Jk(Zk({},e),{limits:"adjacent",variant:{"\u22d2":"ams","\u22d3":"ams"}[n]}))}}),jA(["Re","Im"],"",{ifMode:"math",createAtom:e=>new dI({"\\Re":"\u211c","\\Im":"\u2111"}[e.command],Jk(Zk({},e),{limits:"adjacent",isFunction:!0,variant:"fraktur"}))}),jA("middle","{:delim}",{ifMode:"math",createAtom:e=>{var t;return new Vz(Jk(Zk({},e),{delim:null!=(t=e.args[0])?t:"|",size:1}))}}),jA("the","{:value}",{createAtom:e=>new gO(Jk(Zk({},e),{captureSelection:!0,verbatimLatex:null})),render:(e,t)=>{var n;let r=new pO({parent:t},e.style),i="";e.isSelected&&(i+=" ML__selected");let a=r.evaluate(e.args[0]);return new GL((null!=(n=sO(a))?n:"").split("").map((t=>new GL(t,{type:"ord",classes:i,mode:e.mode,isSelected:e.isSelected,style:Zk({variant:"main"},e.style)}))),{type:"lift",style:e.style,caret:e.caret,isSelected:e.isSelected,classes:i}).wrap(r)},serialize:e=>{var t;return"\\the".concat(null!=(t=sO(e.args[0]))?t:"\\relax")}}),jA("mathtip","{:auto}{:math}",{createAtom:e=>new cI(Jk(Zk({},e),{body:wA(e.args[0]),tooltip:wA(e.args[1]),content:"math"})),serialize:(e,t)=>t.skipStyles?e.bodyToLatex(t):"\\texttip{".concat(e.bodyToLatex(t),"}{").concat(gO.serialize([e.tooltip],Jk(Zk({},t),{defaultMode:"math"})),"}")}),jA("texttip","{:auto}{:text}",{createAtom:e=>new cI(Jk(Zk({},e),{body:wA(e.args[0]),tooltip:wA(e.args[1]),content:"text"})),serialize:(e,t)=>t.skipStyles?e.bodyToLatex(t):"\\texttip{".concat(e.bodyToLatex(t),"}{").concat(gO.serialize([e.tooltip],Jk(Zk({},t),{defaultMode:"text"})),"}")}),jA("error","{:math}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[0])})),serialize:(e,t)=>"\\error{".concat(e.bodyToLatex(t),"}"),render:(e,t)=>e.createBox(t,{classes:"ML__error"})}),jA("ensuremath","{:math}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[0])})),serialize:(e,t)=>"".concat(e.command,"{").concat(e.bodyToLatex(Jk(Zk({},t),{defaultMode:"math"})),"}")}),jA("color","{:value}",{applyStyle:(e,t,n)=>{var r,i;return{verbatimColor:null!=(r=sO(t[0]))?r:void 0,color:n.toColor(null!=(i=t[0])?i:{string:"red"})}}}),jA("textcolor","{:value}{content:auto*}",{applyStyle:(e,t,n)=>{var r,i;return{verbatimColor:null!=(r=sO(t[0]))?r:void 0,color:n.toColor(null!=(i=t[0])?i:{string:"red"})}}}),jA("boxed","{content:math}",{createAtom:e=>new Ez(Jk(Zk({},e),{body:wA(e.args[0]),framecolor:{string:"black"}}))}),jA("colorbox","{:value}{:text*}",{applyStyle:(e,t,n)=>{var r,i;return{verbatimBackgroundColor:null!=(r=sO(t[0]))?r:void 0,backgroundColor:n.toBackgroundColor(null!=(i=t[0])?i:{string:"yellow"})}}}),jA("fcolorbox","{frame-color:value}{background-color:value}{content:text}",{applyMode:"text",createAtom:e=>{var t,n;return new Ez(Jk(Zk({},e),{body:wA(e.args[2]),framecolor:null!=(t=e.args[0])?t:{string:"blue"},backgroundcolor:null!=(n=e.args[1])?n:{string:"yellow"}}))},serialize:(e,t)=>{var n,r;return t.skipStyles?e.bodyToLatex(Jk(Zk({},t),{defaultMode:"text"})):IL(e.command,null!=(n=sO(e.framecolor))?n:"",null!=(r=sO(e.backgroundcolor))?r:"",e.bodyToLatex(Jk(Zk({},t),{defaultMode:"text"})))}}),jA("bbox","[:bbox]{body:auto}",{createAtom:e=>{var t;let n=e.args[0],r=wA(e.args[1]);return new Ez(Jk(Zk({},e),n?{body:r,padding:n.padding,border:n.border,backgroundcolor:null!=(t=n.backgroundcolor)?t:void 0}:{body:r}))},serialize:(e,t)=>{var n,r;if(t.skipStyles)return e.bodyToLatex(t);let i=e.command;if(Number.isFinite(e.padding)||void 0!==e.border||void 0!==e.backgroundcolor){let t=[];e.padding&&t.push(null!=(n=sO(e.padding))?n:""),e.border&&t.push("border: ".concat(e.border)),e.backgroundcolor&&t.push(null!=(r=sO(e.backgroundcolor))?r:""),i+="[".concat(t.join(","),"]")}return IL(i,e.bodyToLatex(t))}}),jA(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[0])})),render:(e,t)=>{let n=new pO({parent:t,mathstyle:e.command.slice(1)},e.style),r=gO.createBox(n,e.body,{type:"lift"});return e.caret&&(r.caret=e.caret),e.bind(t,r)},serialize:(e,t)=>t.skipStyles?e.bodyToLatex(t):"{".concat(zL([e.command,e.bodyToLatex(t)]),"}")}),jA(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:e=>({fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[e]})}),jA("fontseries","{:string}",{ifMode:"text",applyStyle:(e,t)=>{var n;return{fontSeries:null!=(n=t[0])?n:"auto"}}}),jA("fontshape","{:string}",{ifMode:"text",applyStyle:(e,t)=>{var n;return{fontShape:null!=(n=t[0])?n:"auto"}}}),jA("fontfamily","{:string}",{ifMode:"text",applyStyle:(e,t)=>{var n;return{fontFamily:null!=(n=t[0])?n:"roman"}}}),jA("selectfont","",{ifMode:"text",applyStyle:()=>({})}),jA("bf","{:rest*}",{applyStyle:()=>({fontSeries:"b",fontShape:"n",fontFamily:"roman"})}),jA(["boldsymbol","bm"],"{:math}",{applyMode:"math",createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[0])})),serialize:(e,t)=>"".concat(e.command,"{").concat(e.bodyToLatex(t),"}"),render:(e,t)=>e.createBox(t,{classes:"ML__boldsymbol"})}),jA("bold","{:math*}",{applyMode:"math",applyStyle:()=>({variantStyle:"bold"})}),jA("bfseries","{:rest*}",{applyMode:"text",applyStyle:()=>({fontSeries:"b"})}),jA("mdseries","{:rest*}",{applyMode:"text",applyStyle:()=>({fontSeries:"m"})}),jA("upshape","{:rest*}",{applyMode:"text",applyStyle:()=>({fontShape:"n"})}),jA("slshape","{:rest*}",{applyMode:"text",applyStyle:()=>({fontShape:"sl"})}),jA("scshape","{:rest*}",{applyMode:"text",applyStyle:()=>({fontShape:"sc"})}),jA("textbf","{:text*}",{applyMode:"text",applyStyle:()=>({fontSeries:"b"})}),jA("textmd","{:text*}",{applyMode:"text",applyStyle:()=>({fontSeries:"m"})}),jA("textup","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"n"})}),jA("textnormal","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"n",fontSeries:"m"})}),jA("textsl","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"sl"})}),jA("textit","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"it"})}),jA("textsc","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"sc"})}),jA("textrm","{:text*}",{applyMode:"text",applyStyle:()=>({fontFamily:"roman"})}),jA("textsf","{:text*}",{applyMode:"text",applyStyle:()=>({fontFamily:"sans-serif"})}),jA("texttt","{:text*}",{applyMode:"text",applyStyle:()=>({fontFamily:"monospace"})}),jA("mathbf","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"normal",variantStyle:"bold"})}),jA("mathit","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"main",variantStyle:"italic"})}),jA("mathnormal","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"normal",variantStyle:"italic"})}),jA("mathbfit","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"main",variantStyle:"bolditalic"})}),jA("mathrm","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"normal",variantStyle:"up"})}),jA("mathsf","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"sans-serif",variantStyle:"up"})}),jA("mathtt","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"monospace",variantStyle:"up"})}),jA("it","{:rest*}",{applyStyle:()=>({fontSeries:"m",fontShape:"it",fontFamily:"roman",variantStyle:"italic"})}),jA("rmfamily","{:rest*}",{applyStyle:()=>({fontFamily:"roman"})}),jA("sffamily","{:rest*}",{applyStyle:()=>({fontFamily:"sans-serif"})}),jA("ttfamily","{:rest*}",{applyStyle:()=>({fontFamily:"monospace"})}),jA(["Bbb","mathbb"],"{:math*}",{applyStyle:()=>({variant:"double-struck",variantStyle:"up"})}),jA(["frak","mathfrak"],"{:math*}",{applyStyle:()=>({variant:"fraktur",variantStyle:"up"})}),jA("mathcal","{:math*}",{applyStyle:()=>({variant:"calligraphic",variantStyle:"up"})}),jA("mathscr","{:math*}",{applyStyle:()=>({variant:"script",variantStyle:"up"})}),jA("mbox","{:text}",{ifMode:"math",createAtom:e=>new gO(Jk(Zk({},e),{type:"mord",body:wA(e.args[0]),mode:"math"})),serialize:(e,t)=>IL("\\mbox",e.bodyToLatex(Jk(Zk({},t),{defaultMode:"text"})))}),jA("text","{:text}",{ifMode:"math",applyMode:"text"}),jA(["class","htmlClass"],"{name:string}{content:auto}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[1])})),serialize:(e,t)=>!e.args[0]||t.skipStyles?e.bodyToLatex(t):"".concat(e.command,"{").concat(e.args[0],"}{").concat(e.bodyToLatex(t),"}"),render:(e,t)=>{var n;return e.createBox(t,{classes:null!=(n=e.args[0])?n:""})}}),jA(["cssId","htmlId"],"{id:string}{content:auto}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[1])})),serialize:(e,t)=>{var n;return null==(n=e.args)||!n[0]||t.skipStyles?e.bodyToLatex(t):"".concat(e.command,"{").concat(e.args[0],"}{").concat(e.bodyToLatex(t),"}")},render:(e,t)=>{var n;let r=e.createBox(t);return r.cssId=null!=(n=e.args[0])?n:"",r}}),jA("htmlData","{data:string}{content:auto}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[1])})),serialize:(e,t)=>{var n;return null==(n=e.args)||!n[0]||t.skipStyles?e.bodyToLatex(t):"\\htmlData{".concat(e.args[0],"}{").concat(e.bodyToLatex(t),"}")},render:(e,t)=>{var n;let r=e.createBox(t);return r.htmlData=null!=(n=e.args[0])?n:"",r}}),jA(["style","htmlStyle"],"{data:string}{content:auto}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[1])})),serialize:(e,t)=>{var n;return null==(n=e.args)||!n[0]||t.skipStyles?e.bodyToLatex(t):"".concat(e.command,"{").concat(e.args[0],"}{").concat(e.bodyToLatex(t),"}")},render:(e,t)=>{var n;let r=e.createBox(t);return r.htmlStyle=null!=(n=e.args[0])?n:"",r}}),jA("em","{:rest}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[0])})),serialize:(e,t)=>t.skipStyles?e.bodyToLatex(t):"{\\em ".concat(e.bodyToLatex(t),"}"),render:(e,t)=>e.createBox(t,{classes:"ML__emph",boxType:"lift"})}),jA("emph","{:auto}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[1])})),serialize:(e,t)=>t.skipStyles?e.bodyToLatex(t):"\\emph{".concat(e.bodyToLatex(t),"}"),render:(e,t)=>e.createBox(t,{classes:"ML__emph",boxType:"lift"})});var IR={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};jA(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:e=>{var t;return new Uz(Jk(Zk({},e),{delim:null!=(t=e.args[0])?t:".",size:IR[e.command].size,delimType:IR[e.command].mclass}))}}),jA(["hspace","hspace*"],"{width:value}",{createAtom:e=>{var t;return new nI(Jk(Zk({},e),{width:null!=(t=e.args[0])?t:{dimension:0}}))}}),jA(["mkern","kern","mskip","hskip","mspace"],"{width:value}",{createAtom:e=>{var t;return new nI(Jk(Zk({},e),{width:null!=(t=e.args[0])?t:{dimension:0}}))}}),jA("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:e=>new gO(e),render:(e,t)=>{let n=0,r=t.mathstyle.id;(5===r||4===r)&&(n=1),(3===r||2===r)&&(n=2),(1===r||0===r)&&(n=3);let i=wA(e.args[n]);return gO.createBox(t,i)},serialize:(e,t)=>"\\mathchoice{".concat(gO.serialize(e.args[0],t),"}{").concat(gO.serialize(e.args[1],t),"}{").concat(gO.serialize(e.args[2],t),"}{").concat(gO.serialize(e.args[3],t),"}")}),jA("mathop","{:auto}",{createAtom:e=>new gO(Jk(Zk({},e),{type:"mop",body:wA(e.args[0]),limits:"over-under",isFunction:!0,captureSelection:!0})),render:(e,t)=>{var n;let r=gO.createBox(t,e.body);if(e.superscript||e.subscript){let i=null!=(n=e.subsupPlacement)?n:"auto";r="over-under"===i||"auto"===i&&t.isDisplayStyle?e.attachLimits(t,{base:r}):e.attachSupsub(t,{base:r})}return new GL(e.bind(t,r),{type:"op",isSelected:e.isSelected,classes:"ML__op-group"})},serialize:(e,t)=>{let n=[IL(e.command,e.bodyToLatex(t))];return e.explicitSubsupPlacement&&("over-under"===e.subsupPlacement&&n.push("\\limits"),"adjacent"===e.subsupPlacement&&n.push("\\nolimits"),"auto"===e.subsupPlacement&&n.push("\\displaylimits")),n.push(e.supsubToLatex(t)),zL(n)}}),jA(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:e=>new gO(Jk(Zk({},e),{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[e.command],body:wA(e.args[0])}))}),jA(["operatorname","operatorname*"],"{operator:math}",{createAtom:e=>{let t=wA(e.args[0]).map((e=>{var t;return"first"!==e.type&&(e.type="mord",e.value=null!=(t={"\u2217":"*","\u2212":"-"}[e.value])?t:e.value,e.isFunction=!1,!e.style.variant&&!e.style.variantStyle&&(e.style.variant="main",e.style.variantStyle="up")),e}));return new gO(Jk(Zk({},e),{type:"mop",body:t,isFunction:!0,limits:"\\operatorname"===e.command?"adjacent":"over-under"}))},render:(e,t)=>{var n;let r=gO.createBox(t,e.body);if(e.superscript||e.subscript){let i=null!=(n=e.subsupPlacement)?n:"auto";r="over-under"===i||"auto"===i&&t.isDisplayStyle?e.attachLimits(t,{base:r}):e.attachSupsub(t,{base:r})}return e.caret&&(r.caret=e.caret),new GL(e.bind(t,r),{type:"op",isSelected:e.isSelected,classes:"ML__op-group"})},serialize:(e,t)=>{let n=[IL(e.command,e.bodyToLatex(t))];return e.explicitSubsupPlacement&&("over-under"===e.subsupPlacement&&n.push("\\limits"),"adjacent"===e.subsupPlacement&&n.push("\\nolimits"),"auto"===e.subsupPlacement&&n.push("\\displaylimits")),n.push(e.supsubToLatex(t)),zL(n)}}),jA(["char","unicode"],"{charcode:value}",{createAtom:e=>new gO(Jk(Zk({},e),{type:"text"===e.mode?"text":"mord"})),serialize:e=>{var t;return"".concat(e.command).concat(sO(null!=(t=e.args[0])?t:{number:10067,base:"hexadecimal"}))},render:(e,t)=>{let n=t.evaluate(e.args[0]);return(!n||!("number"in n))&&(n={number:10067,base:"hexadecimal"}),e.value=String.fromCodePoint(n.number),e.createBox(t)}}),jA("rule","[raise:value]{width:value}{thickness:value}",{createAtom:e=>new gO(e),render:(e,t)=>{var n,r,i;let a=new pO({parent:t,mathstyle:"textstyle"},e.style),o=a.toEm(null!=(n=e.args[0])?n:{dimension:0}),s=a.toEm(null!=(r=e.args[1])?r:{dimension:10}),l=a.toEm(null!=(i=e.args[2])?i:{dimension:10}),u=new GL(null,{classes:"ML__rule",type:"ord"});return u.width=s,u.height=l+o,u.depth=-o,u.setStyle("border-right-width",s,"em"),u.setStyle("border-top-width",l,"em"),u.setStyle("border-color",e.style.color),u.setStyle("vertical-align",o,"em"),e.isSelected&&u.setStyle("opacity","50%"),e.bind(a,u),e.caret&&(u.caret=e.caret),u.wrap(t)},serialize:e=>"\\rule".concat(e.args[0]?"[".concat(sO(e.args[0]),"]"):"","{").concat(sO(e.args[1]),"}{").concat(sO(e.args[2]),"}")}),jA(["overline","underline"],"{:auto}",{createAtom:e=>new gO(Jk(Zk({},e),{body:wA(e.args[0])})),render:(e,t)=>{let n=e.command.substring(1),r=new pO({parent:t,mathstyle:"cramp"},e.style),i=gO.createBox(r,e.body);if(!i)return null;let a,o=r.metrics.defaultRuleThickness/r.scalingFactor,s=new GL(null,{classes:n+"-line"});return s.height=o,s.maxFontSize=1.125*o*r.scalingFactor,a=new eO("overline"===n?{shift:0,children:[{box:i},3*o,{box:s},o]}:{top:i.height,children:[o,{box:s},3*o,{box:i}]}),e.caret&&(a.caret=e.caret),new GL(a,{classes:n,type:"ignore"})}}),jA("overset","{:auto}{base:auto}",{createAtom:e=>{let t=wA(e.args[1]);return new eI(Jk(Zk({},e),{above:wA(e.args[0]),body:t,skipBoundary:!1,boxType:HL(t)}))},serialize:(e,t)=>IL(e.command,e.aboveToLatex(t),e.bodyToLatex(t))}),jA("underset","{:auto}{base:auto}",{createAtom:e=>{let t=wA(e.args[1]);return new eI(Jk(Zk({},e),{below:wA(e.args[0]),body:t,skipBoundary:!1,boxType:HL(t)}))},serialize:(e,t)=>IL(e.command,e.belowToLatex(t),e.bodyToLatex(t))}),jA("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:e=>{let t=wA(e.args[2]);return new eI(Jk(Zk({},e),{above:wA(e.args[0]),below:wA(e.args[1]),body:t,skipBoundary:!1,boxType:HL(t)}))},serialize:(e,t)=>IL(e.command,e.belowToLatex(t),e.bodyToLatex(t))}),jA(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:e=>new eI(Jk(Zk({},e),{body:wA(e.args[2]),above:wA(e.args[1]),below:wA(e.args[0]),skipBoundary:!1,boxType:"\\stackrel"===e.command?"rel":"bin"})),serialize:(e,t)=>IL(e.command,e.aboveToLatex(t),e.bodyToLatex(t))}),jA("smash","[:string]{:auto}",{createAtom:e=>{var t,n,r,i;return new tI(Jk(Zk({},e),{body:wA(e.args[1]),smashHeight:null==(n=null==(t=e.args[0])?void 0:t.includes("t"))||n,smashDepth:null==(i=null==(r=e.args[0])?void 0:r.includes("b"))||i}))}}),jA(["vphantom"],"{:auto}",{createAtom:e=>new tI(Jk(Zk({},e),{body:wA(e.args[0]),isInvisible:!0,smashWidth:!0}))}),jA(["hphantom"],"{:auto}",{createAtom:e=>new tI(Jk(Zk({},e),{body:wA(e.args[0]),isInvisible:!0,smashHeight:!0,smashDepth:!0}))}),jA(["phantom"],"{:auto}",{createAtom:e=>new tI(Jk(Zk({},e),{body:wA(e.args[0]),isInvisible:!0}))}),jA("not","{:math}",{createAtom:e=>{let t=wA(e.args[0]);return 0===t.length?new gO(Jk(Zk({},e),{type:"mrel",value:"\ue020"})):new gO(Jk(Zk({},e),{body:[new Qz(Jk(Zk({},e),{body:"\ue020",align:"right"})),...t],captureSelection:!0}))},serialize:(e,t)=>{let n=e.args[0],r=n&&"object"==typeof n&&"group"in n;return"\ue020"!==e.value?r?"\\not{".concat(gO.serialize(n.group,t),"}"):"\\not".concat(gO.serialize(n,t)):r?"\\not{}":"\\not"},render:(e,t)=>{if(e.value)return e.createBox(t);let n=e.args[0]&&"object"==typeof e.args[0]&&"group"in e.args[0]?"ord":HL(wA(e.args[0])),r=gO.createBox(t,e.body,{type:n});return e.caret&&(r.caret=e.caret),e.bind(t,r)}}),jA(["ne","neq"],"",{createAtom:e=>new gO(Jk(Zk({},e),{type:"mrel",body:[new Qz(Jk(Zk({},e),{body:"\ue020",align:"right",boxType:"rel"})),new gO(Jk(Zk({},e),{value:"="}))],captureSelection:!0})),serialize:e=>e.command}),jA("rlap","{:auto}",{createAtom:e=>new Qz(Jk(Zk({},e),{body:wA(e.args[0]),align:"right"}))}),jA("llap","{:auto}",{createAtom:e=>new Qz(Jk(Zk({},e),{body:wA(e.args[0]),align:"left"}))}),jA("mathrlap","{:math}",{createAtom:e=>new Qz(Jk(Zk({},e),{body:wA(e.args[0]),align:"left"}))}),jA("mathllap","{:math}",{createAtom:e=>new Qz(Jk(Zk({},e),{body:wA(e.args[0]),align:"left"}))}),jA("raisebox","{:value}{:text}",{createAtom:e=>{var t;return new Ez(Jk(Zk({},e),{body:wA(e.args[1]),padding:{dimension:0},offset:null!=(t=e.args[0])?t:{dimension:0}}))},serialize:(e,t)=>{var n;return IL("\\raisebox",null!=(n=sO(e.offset))?n:"0pt",e.bodyToLatex(t))}}),jA("raise","{:value}{:auto}",{createAtom:e=>{var t;return new Ez(Jk(Zk({},e),{body:wA(e.args[1]),padding:{dimension:0},offset:null!=(t=e.args[0])?t:{dimension:0}}))},serialize:(e,t)=>{var n;return IL("\\raise",null!=(n=sO(e.offset))?n:"0pt",e.bodyToLatex(t))}}),jA("lower","{:value}{:auto}",{createAtom:e=>{var t;return new Ez(Jk(Zk({},e),{body:wA(e.args[1]),padding:{dimension:0},offset:null!=(t=lO(e.args[0],-1))?t:{dimension:0}}))},serialize:(e,t)=>{var n,r;return IL("\\lower",null!=(r=sO(lO(null!=(n=e.offset)?n:{dimension:0},-1)))?r:"0pt",e.bodyToLatex(t))}}),LA("0123456789/@.?!"),OA(65,90),OA(97,122),LA([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]),LA([["\\#",35],["\\&",38],["\\parallelogram",9649],["\\spadesuit",9824],["\\heartsuit",9825],["\\diamondsuit",9826],["\\clubsuit",9827],["\\flat",9837],["\\natural",9838],["\\sharp",9839]]),LA([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\Q",81,"mord","double-struck"],["\\C",67,"mord","double-struck"],["\\P",80,"mord","double-struck"],["\\pounds",163],["\\euro",8364]]),LA([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel"),LA([["\\mapsfrom",8612,"mrel"],["\\Mapsfrom",10502,"mrel"],["\\MapsTo",10503,"mrel"],["\\Yup",8516,"mord"],["\\lightning",8623,"mrel"],["\\leftarrowtriangle",8701,"mrel"],["\\rightarrowtriangle",8702,"mrel"],["\\leftrightarrowtriangle",8703,"mrel"],["\\boxdot",8865,"mbin"],["\\bigtriangleup",9651,"mbin"],["\\bigtriangledown",9661,"mbin"],["\\boxbar",9707,"mbin"],["\\Lbag",10181,"mopen"],["\\Rbag",10182,"mclose"],["\\llbracket",10214,"mopen"],["\\rrbracket",10215,"mclose"],["\\longmapsfrom",10235,"mrel"],["\\Longmapsfrom",10237,"mrel"],["\\Longmapsto",10238,"mrel"],["\\boxslash",10692,"mbin"],["\\boxbslash",10693,"mbin"],["\\boxast",10694,"mbin"],["\\boxcircle",10695,"mbin"],["\\boxbox",10696,"mbin"],["\\fatsemi",10783,"mop"],["\\leftslice",10918,"mrel"],["\\rightslice",10919,"mrel"],["\\interleave",10996,"mbin"],["\\biginterleave",11004,"mop"],["\\sslash",11005,"mbin"],["\\talloblong",11006,"mbin"]]),LA([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]),LA([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\twoheadrightarrowtail",10518],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nleftarrow",8602],["\\nrightarrow",8603],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\nvrightarrow",8696],["\\nvtwoheadrightarrow",10496],["\\nvrightarrowtail",10516],["\\nvtwoheadrightarrowtail",10519],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams"),LA([["+",43],["-",8722],["\u2212",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin"),LA([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams"),LA([["\\surd",8730],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\emptyset",8709]]),LA([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\coloneqq",8788],["\\colonequals",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",8869],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel"),LA([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams"),LA([["\\wp",8472],["\\aleph",8501]]),LA([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams"),LA([["\\ ",160],["~",160]],"space"),jA(["!",",",":",";",">","enskip","enspace","quad","qquad"],"",{createAtom:e=>new nI(e)}),jA("space","",{createAtom:e=>new nI(e)}),LA([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct"),LA([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner"),LA([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var PR="<mo>&#x2061;</mo>",qR="<mo>&#8290;</mo>";function RR(e){return e.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function jR(e,t){return e&&t.generateID?' extid="'.concat(e,'"'):""}function KR(e,t,n){var r,i,a,o,s,l,u,c,d,p,h;let f=!1;t=null!=t?t:e.atoms.length;let m="",g="",v=e.atoms[e.index],y=null!=(i=null==(r=v.style)?void 0:r.variant)?i:"",b=null!=(o=null==(a=v.style)?void 0:a.variantStyle)?o:"",x="";if(y||b){let t=xA(v.value,null==(s=v.style)?void 0:s.variant,null==(l=v.style)?void 0:l.variantStyle);if(t!==v.value)return e.index+=1,m="<mi".concat(jR(v.id,n),">").concat(t,"</mi>"),$R(m,e,n)||(e.mathML+=m,e.lastType="mi"),!0;x=null!=(u={upnormal:"normal",boldnormal:"bold",italicmain:"italic",bolditalicmain:"bold-italic","updouble-struck":"double-struck","double-struck":"double-struck",boldfraktur:"bold-fraktur",calligraphic:"script",upcalligraphic:"script",script:"script",boldscript:"bold-script",boldcalligraphic:"bold-script",fraktur:"fraktur","upsans-serif":"sans-serif","boldsans-serif":"bold-sans-serif","italicsans-serif":"sans-serif-italic","bolditalicsans-serif":"sans-serif-bold-italic",monospace:"monospace"}[b+y])?u:"",x=' mathvariant="'.concat(x,'"')}let D={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"\u210f","\\cdotp":"\u22c5","\\ldots":"\u2026","\\cdots":"\u22ef","\\ddots":"\u22f1","\\vdots":"\u22ee","\\ldotp":"."};if("!"===v.command)return e.index+=1,m="<mo>!</mo>",$R(m,e,n)||(e.mathML+=m,e.lastType="mo"),!0;if(D[v.command]){e.index+=1;let t="<mi".concat(jR(v.id,n)).concat(x,">").concat(D[v.command],"</mi>");return("mi"===e.lastType||"mn"===e.lastType||"mtext"===e.lastType||"fence"===e.lastType)&&(t=qR+t),$R(t,e,n)||(e.mathML+=t,e.lastType="mi"),!0}if("\\operatorname"===v.command)g=YR(v.body),e.index+=1;else if(y||b)for(;e.index<t&&("mord"===v.type||"macro"===v.type)&&!v.isDigit()&&y===(null!=(d=null==(c=v.style)?void 0:c.variant)?d:"")&&b===(null!=(h=null==(p=v.style)?void 0:p.variantStyle)?h:"");)g+=YR([v]),e.index+=1,v=e.atoms[e.index];else("mord"===v.type||"macro"===v.type)&&!v.isDigit()&&(g+=YR([v]),e.index+=1);if(g.length>0){f=!0,m="<mi".concat(x,">").concat(g,"</mi>");let t=e.lastType;m.endsWith(">f</mi>")||m.endsWith(">g</mi>")?(m+=PR,e.lastType="applyfunction"):e.lastType=/^<mo>(.*)<\/mo>$/.test(m)?"mo":"mi",$R(m,e,n)||(("mi"===t||"mn"===t||"mtext"===t||"fence"===t)&&(m=qR+m),e.mathML+=m)}return f}function VR(e){return e.index<e.atoms.length&&e.atoms[e.index].superscript&&"subsup"===e.atoms[e.index].type}function UR(e){let t=-1,n=e.index,r=!1,i=!1;for(;n<e.atoms.length&&!r&&!i;){let t=e.atoms[n];r=!t.isDigit(),i=!r&&void 0!==t.superscript,n++}return i&&(t=n-1),t}function $R(e,t,n){var r;let i=t.atoms[t.index-1];if(!i)return!1;if(!i.superscript&&!i.subscript){if("subsup"!==(null==(r=t.atoms[t.index])?void 0:r.type))return!1;i=t.atoms[t.index],t.index+=1}let a=t.lastType;t.lastType="";let o=JR(i.superscript,n);t.lastType="";let s=JR(i.subscript,n);if(t.lastType=a,!o&&!s)return!1;let l="";return o&&s?l="<msubsup>".concat(e).concat(s).concat(o,"</msubsup>"):o?l="<msup>".concat(e).concat(o,"</msup>"):s&&(l="<msub>".concat(e).concat(s,"</msub>")),t.mathML+=l,t.lastType="",!0}function HR(e,t,n){t=null!=t?t:e.atoms.length;let r=e.index,i="",a=UR(e);for(a>=0&&a<t&&(t=a);e.index<t&&"text"===e.atoms[e.index].mode;)i+=e.atoms[e.index].value?e.atoms[e.index].value:" ",e.index+=1;return i.length>0&&(i="<mtext ".concat(jR(e.atoms[r].id,n),">").concat(i,"</mtext>"),a<0&&VR(e)&&(a=e.index,e.index+=1),$R(i,e,n)||(e.mathML+=i,e.lastType="mtext"),!0)}function WR(e,t,n){t=null!=t?t:e.atoms.length;let r=e.index,i="",a=UR(e);for(a>=0&&a<t&&(t=a);e.index<t&&e.atoms[e.index].isDigit();)i+=e.atoms[e.index].asDigit(),e.index+=1;return!(i.length<=0)&&(i="<mn"+jR(e.atoms[r].id,n)+">"+i+"</mn>",a<0&&VR(e)&&(a=e.index,e.index+=1),$R(i,e,n)||(e.mathML+=i,e.lastType="mn"),!0)}function GR(e,t,n){let r=!1;t=null!=t?t:e.atoms.length;let i="",a="";if(e.index<t&&"mopen"===e.atoms[e.index].type){let o=!1,s=0,l=e.index,u=-1,c=l+1;for(;c<t&&!o;)"mopen"===e.atoms[c].type?s+=1:"mclose"===e.atoms[c].type&&(s-=1),-1===s&&(o=!0,u=c),c+=1;o&&(i="<mrow>",i+=XR(e.atoms[l],n),i+=JR(e.atoms,n,l+1,u),i+=XR(e.atoms[u],n),i+="</mrow>",e.index=u+1,("mi"===e.lastType||"mn"===e.lastType||"mfrac"===e.lastType||"fence"===e.lastType)&&(e.mathML+=qR),$R(i,e,n)&&(r=!0,e.lastType="",i=""),a="fence")}return i.length>0&&(r=!0,e.mathML+=i,e.lastType=a),r}function ZR(e,t,n){let r=!1;t=null!=t?t:e.atoms.length;let i="",a="",o=e.atoms[e.index];if(!o)return!1;let s={"\\ne":"&ne;","\\neq":"&ne;","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"\u2225","\\mid":"\u2223","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lbrack":"[","\\rbrack":"]","\\lparen":"(","\\rparen":")","\\langle":"\u27e8","\\rangle":"\u27e9","\\lfloor":"\u230a","\\rfloor":"\u230b","\\lceil":"\u2308","\\rceil":"\u2309"};if(s[o.command]){e.index+=1;let t="<mo".concat(jR(o.id,n),">").concat(s[o.command],"</mo>");return $R(t,e,n)||(e.mathML+=t,e.lastType="mo"),!0}if(e.index<t&&("mbin"===o.type||"mrel"===o.type))i+=QR(e.atoms[e.index],n),e.index+=1,a="mo";else if(e.index<t&&("mop"===o.type||"operator"===o.type||"extensible-symbol"===o.type)){if("over-under"===o.subsupPlacement&&(o.superscript||o.subscript)){let t=XR(o,n);return o.superscript&&o.subscript?(i+="<munderover>"+t,i+=JR(o.subscript,n),i+=JR(o.superscript,n),i+="</munderover>"):o.superscript?(i+="<mover>"+t,i+=JR(o.superscript,n),i+="</mover>"):o.subscript&&(i+="<munder>"+t,i+=JR(o.subscript,n),i+="</munder>"),e.mathML+=i,e.lastType="mo",e.index+=1,!0}{let t=e.atoms[e.index],r="\\operatorname"===t.value,o=r?'<mi class="MathML-Unit"'+jR(t.id,n)+">"+YR(t.value)+"</mi>":XR(t,n);i+=o,r||/^<mo>(.*)<\/mo>$/.test(o)?a=r?"mi":"mo":(i+=PR,a="applyfunction")}("mi"===e.lastType||"mn"===e.lastType)&&!/^<mo>(.*)<\/mo>$/.test(i)&&(i=qR+i),e.index+=1}return i.length>0&&(r=!0,$R(i,e,n)||(e.mathML+=i,e.lastType=a)),r}function JR(e,t,n,r){null!=t||(t={});let i={atoms:[],index:null!=n?n:0,mathML:"",lastType:""};if("number"==typeof e||"boolean"==typeof e)i.mathML=e.toString();else if("string"==typeof e)i.mathML=e;else if(e instanceof gO)i.mathML=QR(e,t);else if(Array.isArray(e)){i.atoms=e;let n=0;for(r=r||(e?e.length:0);i.index<r;)if(HR(i,r,t)||WR(i,r,t)||KR(i,r,t)||ZR(i,r,t)||GR(i,r,t))n+=1;else if(i.index<r){let e=QR(i.atoms[i.index],t);"mn"===i.lastType&&e.length>0&&"genfrac"===i.atoms[i.index].type&&(e="<mo>&#x2064;</mo>"+e),"genfrac"===i.atoms[i.index].type?i.lastType="mfrac":i.lastType="",i.index+=1,$R(e,i,t)?n+=1:e.length>0&&(i.mathML+=e,n+=1)}n>1&&(i.mathML="<mrow>"+i.mathML+"</mrow>")}return i.mathML}function XR(e,t){let n="",r=YR(e.value);return r&&(n="<mo"+jR(e.id,t)+">"+r+"</mo>"),n}function YR(e){if(!e)return"";if("string"==typeof e)return RR(e);if(!Array.isArray(e)&&"string"==typeof e.body)return RR(e.body);let t="";for(let n of e)"string"==typeof n.value&&(t+=n.value);return RR(t)}function QR(e,t){var n,r,i,a,o,s,l,u,c,d,p,h,f,m,g,v,y,b,x,D,w,_;if("text"===e.mode)return"<mi".concat(jR(e.id,t),">").concat(e.value,"</mi>");let S,C,E,k,A,N,M={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",longleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",longrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",longrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xleftrightarrows:"\u21c4",xRightleftharpoons:"\u21cc",longRightleftharpoons:"\u21cc",xLeftrightharpoons:"\u21cb",longLeftrightharpoons:"\u21cb"},F={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\>":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},T="",B="",{command:L}=e;if("\\error"===e.command)return"<merror".concat(jR(e.id,t),">").concat(JR(e.body,t),"</merror>");let O={"\\vert":"|","\\Vert":"\u2225","\\mid":"\u2223","\\lbrack":"[","\\rbrack":"]","\\{":"{","\\}":"}","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"\u27e8","\\rangle":"\u27e9","\\lfloor":"\u230a","\\rfloor":"\u230b","\\lceil":"\u2308","\\rceil":"\u2309"},z={"\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};switch(e.type){case"first":case"line":case"overlap":case"subsup":case"phantom":case"composition":case"rule":case"chem":break;case"group":case"root":T=JR(e.body,t);break;case"array":if((e.leftDelim&&"."!==e.leftDelim||e.rightDelim&&"."!==e.rightDelim)&&(T+="<mrow>",e.leftDelim&&"."!==e.leftDelim&&(T+="<mo>"+(O[e.leftDelim]||e.leftDelim)+"</mo>")),T+="<mtable",e.colFormat){for(T+=' columnalign="',E=0;E<e.colFormat.length;E++)e.colFormat[E].align&&(T+={l:"left",c:"center",r:"right"}[e.colFormat[E].align]+" ");T+='"'}for(T+=">",C=0;C<e.array.length;C++){for(T+="<mtr>",S=0;S<e.array[C].length;S++)T+="<mtd>"+JR(e.array[C][S],t)+"</mtd>";T+="</mtr>"}T+="</mtable>",(e.leftDelim&&"."!==e.leftDelim||e.rightDelim&&"."!==e.rightDelim)&&(e.rightDelim&&"."!==e.rightDelim&&(T+="<mo>"+(O[e.leftDelim]||e.rightDelim)+"</mo>"),T+="</mrow>");break;case"genfrac":(e.leftDelim||e.rightDelim)&&(T+="<mrow>"),e.leftDelim&&"."!==e.leftDelim&&(T+="<mo"+jR(e.id,t)+">"+(O[e.leftDelim]||e.leftDelim)+"</mo>"),e.hasBarLine?(T+="<mfrac>",T+=JR(e.above,t)||"<mi>&nbsp;</mi>",T+=JR(e.below,t)||"<mi>&nbsp;</mi>",T+="</mfrac>"):(T+="<mtable"+jR(e.id,t)+">",T+="<mtr>"+JR(e.above,t)+"</mtr>",T+="<mtr>"+JR(e.below,t)+"</mtr>",T+="</mtable>"),e.rightDelim&&"."!==e.rightDelim&&(T+="<mo"+jR(e.id,t)+">"+(O[e.rightDelim]||e.rightDelim)+"</mo>"),(e.leftDelim||e.rightDelim)&&(T+="</mrow>");break;case"surd":e.hasEmptyBranch("above")?(T+="<msqrt"+jR(e.id,t)+">",T+=JR(e.body,t),T+="</msqrt>"):(T+="<mroot"+jR(e.id,t)+">",T+=JR(e.body,t),T+=JR(e.above,t),T+="</mroot>");break;case"leftright":let I=e,P=I.leftDelim;T="<mrow>",P&&"."!==P&&(T+="<mo".concat(jR(e.id,t),">").concat(null!=(n=O[P])?n:P,"</mo>")),e.body&&(T+=JR(e.body,t));let q=I.matchingRightDelim();q&&"."!==q&&(T+="<mo".concat(jR(e.id,t),">").concat(null!=(r=O[q])?r:q,"</mo>")),T+="</mrow>";break;case"sizeddelim":case"delim":T+="<mo".concat(jR(e.id,t),">").concat(O[e.value]||e.value,"</mo>");break;case"accent":T+='<mover accent="true"'+jR(e.id,t)+">",T+=JR(e.body,t),T+="<mo>"+(z[L]||e.accent)+"</mo>",T+="</mover>";break;case"overunder":A=e.above,k=e.below,(e.svgAbove||A)&&(e.svgBelow||k)?N=e.body:A&&A.length>0?(N=e.body,null!=(a=null==(i=e.body)?void 0:i[0])&&a.below?(k=e.body[0].below,N=e.body[0].body):"first"===(null==(s=null==(o=e.body)?void 0:o[0])?void 0:s.type)&&null!=(u=null==(l=e.body)?void 0:l[1])&&u.below&&(k=e.body[1].below,N=e.body[1].body)):k&&k.length>0&&(N=e.body,null!=(d=null==(c=e.body)?void 0:c[0])&&d.above?(A=e.body[0].above,N=e.body[0].body):"first"===(null==(h=null==(p=e.body)?void 0:p[0])?void 0:h.type)&&null!=(m=null==(f=e.body)?void 0:f[1])&&m.above&&(A=e.body[1].overscript,N=e.body[1].body)),(e.svgAbove||A)&&(e.svgBelow||k)?(T+="<munderover ".concat(jR(e.id,t),">"),T+=null!=(g=M[e.svgBody])?g:JR(N,t),T+=null!=(v=M[e.svgBelow])?v:JR(k,t),T+=null!=(y=M[e.svgAbove])?y:JR(A,t),T+="</munderover>"):e.svgAbove||A?(T+="<mover ".concat(jR(e.id,t),">")+(null!=(b=M[e.svgBody])?b:JR(N,t)),T+=null!=(x=M[e.svgAbove])?x:JR(A,t),T+="</mover>"):(e.svgBelow||k)&&(T+="<munder ".concat(jR(e.id,t),">")+(null!=(D=M[e.svgBody])?D:JR(N,t)),T+=null!=(w=M[e.svgBelow])?w:JR(k,t),T+="</munder>");break;case"placeholder":T+="?";break;case"mord":{T="string"==typeof e.value?e.value:L,"\\char"===L?T="&#x"+("000000"+e.args[0].number.toString(16)).slice(-4)+";":T.length>0&&T.startsWith("\\")&&("string"==typeof e.value&&e.value.charCodeAt(0)>255?T="&#x"+("000000"+e.value.charCodeAt(0).toString(16)).slice(-4)+";":"string"==typeof e.value?T=e.value.charAt(0):(console.error("Did not expect this"),T=""));let n=/\d/.test(T)?"mn":"mi";T="<".concat(n).concat(jR(e.id,t),">").concat(RR(T),"</").concat(n,">");break}case"mbin":case"mrel":case"minner":T=XR(e,t);break;case"mpunct":T='<mo separator="true"'+jR(e.id,t)+">"+L+"</mo>";break;case"mop":case"operator":case"extensible-symbol":"\u200b"!==e.body&&(T="<mo"+jR(e.id,t)+">",T+="\\operatorname"===L?e.body:L||e.body,T+="</mo>");break;case"box":T='<menclose notation="box"',e.backgroundcolor&&(T+=' mathbackground="'+e.backgroundcolor+'"'),T+=jR(e.id,t)+">"+JR(e.body,t)+"</menclose>";break;case"spacing":T+='<mspace width="'+(null!=(_=F[L])?_:0)+'em"/>';break;case"enclose":T='<menclose notation="';for(let t in e.notation)Object.prototype.hasOwnProperty.call(e.notation,t)&&e.notation[t]&&(T+=B+t,B=" ");T+=jR(e.id,t)+'">'+JR(e.body,t)+"</menclose>";break;case"prompt":T='<menclose notation="roundexbox""">'+JR(e.body,t)+"</menclose>";break;case"space":T+="&nbsp;";break;case"mopen":case"mclose":T+=XR(e,t);break;case"macro":{let n=e.command+YR(e.macroArgs);n&&(T+="<mo ".concat(jR(e.id,t),">").concat(n,"</mo>"))}break;case"latexgroup":case"tooltip":T+=JR(e.body,t);break;case"latex":T+="<mtext"+jR(e.id,t)+">"+e.value+"</mtext>";break;case"text":T+="<mtext ".concat(jR(e.id,t),"x>").concat(e.value,"</mtext>");break;default:if("\\displaystyle"===e.command)return"<mrow ".concat(jR(e.id,t),' displaystyle="true">').concat(JR(e.body,t),"</mrow>");if("\\textstyle"===e.command)return"<mrow ".concat(jR(e.id,t),' displaystyle="false">').concat(JR(e.body,t),"</mrow>");console.info("Unexpected element in conversion to MathML:",e)}return T}var ej={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"imaginary eye ","\\imaginaryJ":"imaginary jay ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\pm":"plus or minus","\\mp":"minus or plus","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","\\ne":"is not equal to ","\\neq":"is not equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","\u200b":"","\u2212":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},tj={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function nj(e){let t=0;if(Qk(e))for(let n of e)"first"!==n.type&&(t+=1);return 1===t}function rj(e){let t="";if(Qk(e))for(let n of e)"first"!==n.type&&"string"==typeof n.value&&(t+=n.value);return t}function ij(e,t){var n,r,i,a,o;function s(e){return"<emphasis>"+e+"</emphasis>"}if(!t)return"";let l="";if(Qk(t)){let r=!1,i=!1;for(let a=0;a<t.length;a++)"first"!==t[a].type&&("text"!==t[a].mode&&(i=!1),a<t.length-2&&"mopen"===t[a].type&&"mclose"===t[a+2].type&&"mord"===t[a+1].type?(l+=" of ",l+=s(ij(e,t[a+1])),a+=2):"text"===t[a].mode?i?l+=null!=(n=t[a].value)?n:" ":(i=!0,l+=ij("text",t[a])):t[a].isDigit()?r?l+=t[a].asDigit():(r=!0,l+=ij(e,t[a])):(r=!1,l+=ij(e,t[a])))}else if("text"===t.mode)t.id&&"math"===e&&(l+='<mark name="'+t.id.toString()+'"/>'),l+=t.value;else{t.id&&"math"===e&&(l+='<mark name="'+t.id.toString()+'"/>');let n="",u="",c="",d=!1,{command:p}=t;switch(p){case"\\vec":return"vector "+ij(e,t.body);case"\\acute":return ij(e,t.body)+" acute";case"\\grave":return ij(e,t.body)+" grave";case"\\dot":return"dot over"+ij(e,t.body);case"\\ddot":return"double dot over"+ij(e,t.body);case"\\mathring":return"ring over"+ij(e,t.body);case"\\tilde":case"\\widetilde":return"tilde over"+ij(e,t.body);case"\\bar":return ij(e,t.body)+" bar";case"\\breve":return ij(e,t.body)+" breve";case"\\check":case"\\widecheck":return"check over "+ij(e,t.body);case"\\hat":case"\\widehat":return"hat over"+ij(e,t.body);case"\\overarc":case"\\overparen":case"\\wideparen":return"arc over "+ij(e,t.body);case"\\underarc":case"\\underparen":return"arc under "+ij(e,t.body)}switch(t.type){case"prompt":l+=' <break time="300ms"/> '+(t.body.length>1?'start input . <break time="500ms"/> '+ij(e,t.body)+'. <break time="500ms"/> end input':"blank")+'. <break time="700ms"/>'+(null!=(r=t.correctness)?r:"")+' . <break time="700ms"/> ';break;case"array":let h=t.array,f=t.environmentName;if(Object.keys(tj).includes(f)){l+=" begin ".concat(tj[f]," ");for(let e=0;e<h.length;e++){e>0&&(l+=","),l+=" row ".concat(e+1," ");for(let t=0;t<h[e].length;t++)t>0&&(l+=","),l+=" column ".concat(t+1,": "),l+=ij("math",h[e][t])}l+=" end ".concat(tj[f]," ")}break;case"group":"\\ne"===p?l+=" not equal ":("\\not"===p&&(l+=" not "),l+=ij("math",t.body));break;case"root":l+=ij("math",t.body);break;case"genfrac":if(n=ij("math",t.above),u=ij("math",t.below),nj(t.above)&&nj(t.below)){let e={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[rj(t.above)+"/"+rj(t.below)];e?l=e:l+=n+" over "+u}else l+=' the fraction <break time="150ms"/>'+n+' over <break time="150ms"/>'+u+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(c=ij("math",t.body),t.hasEmptyBranch("above"))l+=nj(t.body)?" the square root of "+c+" , ":' the square root of <break time="200ms"/>'+c+'. <break time="200ms"/> End square root';else{let e=ij("math",t.above);e=e.trim();let n=e.replace(/<mark([^/]*)\/>/g,"");l+="3"===n?' the cube root of <break time="200ms"/>'+c+'. <break time="200ms"/> End cube root':"n"===n?' the nth root of <break time="200ms"/>'+c+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+e+', of <break time="200ms"/>'+c+'. <break time="200ms"/> End root'}break;case"leftright":{let e=t;l+=null!=(i=e.leftDelim?ej[e.leftDelim]:void 0)?i:e.leftDelim,l+=ij("math",t.body),l+=null!=(a=e.rightDelim?ej[e.rightDelim]:void 0)?a:e.rightDelim}break;case"rule":case"overunder":case"overlap":case"space":case"spacing":break;case"macro":let m=p.replace(/^\\/g,""),g=KA()[m];g&&(null!=g&&g.expand?l+=ij("math",t.body):l+="".concat(m," "));break;case"placeholder":l+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if("\\mathbin"===p||"\\mathrel"===p||"\\mathopen"===p||"\\mathclose"===p||"\\mathpunct"===p||"\\mathord"===p||"\\mathinner"===p){l=ij(e,t.body);break}let n=t.isDigit()?t.asDigit():t.value,r=t.command;if(("delim"===t.type||"sizeddelim"===t.type)&&(r=t.value,n=r),"text"===e)l+=n;else{if("mbin"===t.type&&(l+='<break time="150ms"/>'),n){let e=ej[n]||(r?ej[r.trim()]:"");if(e)l+=" "+e;else{let e=r?function(e){let t="";return e.startsWith("\\")&&(t=" "+e.replace("\\","")+" "),t}(r.trim()):"";l+=e||function(e){return globalThis.MathfieldElement.textToSpeechMarkup?/[a-z]/.test(e)?' <say-as interpret-as="character">'.concat(e,"</say-as>"):/[A-Z]/.test(e)?'capital <say-as interpret-as="character">'.concat(e.toLowerCase(),"</say-as>"):e:/[a-z]/.test(e)?" '"+e.toUpperCase()+"'":/[A-Z]/.test(e)?" 'capital "+e.toUpperCase()+"'":e}(n)}}else l+=ij("math",t.body);"mbin"===t.type&&(l+='<break time="150ms"/>')}break}case"mop":case"operator":case"extensible-symbol":if("\u200b"!==t.value){let e=t.command;if("\\sum"===e)if(t.hasEmptyBranch("superscript")||t.hasEmptyBranch("subscript"))if(t.hasEmptyBranch("subscript"))l+=" the summation of";else{let e=ij("math",t.subscript);e=e.trim(),l+=' the summation from <break time="200ms"/>'+e+'<break time="200ms"/> of <break time="150ms"/>',d=!0}else{let e=ij("math",t.superscript);e=e.trim();let n=ij("math",t.subscript);n=n.trim(),l+=' the summation from <break time="200ms"/>'+n+'<break time="200ms"/> to  <break time="200ms"/>'+e+'<break time="200ms"/> of <break time="150ms"/>',d=!0}else if("\\prod"===e)if(t.hasEmptyBranch("superscript")||t.hasEmptyBranch("subscript"))if(t.hasEmptyBranch("subscript"))l+=" the product  of ";else{let e=ij("math",t.subscript);e=e.trim(),l+=' the product from <break time="200ms"/>'+e+'<break time="200ms"/> of <break time="150ms"/>',d=!0}else{let e=ij("math",t.superscript);e=e.trim();let n=ij("math",t.subscript);n=n.trim(),l+=' the product from <break time="200ms"/>'+n+'<break time="200ms"/> to <break time="200ms"/>'+e+'<break time="200ms"/> of <break time="150ms"/>',d=!0}else if("\\int"===e)if(t.hasEmptyBranch("superscript")||t.hasEmptyBranch("subscript"))l+=' the integral of <break time="200ms"/> ';else{let e=ij("math",t.superscript);e=e.trim();let n=ij("math",t.subscript);n=n.trim(),l+=' the integral from <break time="200ms"/>'+s(n)+'<break time="200ms"/> to <break time="200ms"/>'+s(e)+' <break time="200ms"/> of ',d=!0}else if("\\operatorname"===e||"\\operatorname*"===e)l+=function(e){return e?e.map((e=>e.value)).join(""):""}(t.body)+" ";else if("string"==typeof t.value){l+=(null!=(o=ej[t.value])?o:t.command?ej[t.command]:void 0)||" "+t.value}else t.command&&("\\mathop"===t.command?l+=ij("math",t.body):l+=t.command.startsWith("\\")?" "+t.command.slice(1):" "+t.command)}break;case"enclose":c=ij("math",t.body),l+=" crossed out "+c+". End crossed out."}if(!d&&!t.hasEmptyBranch("superscript")){let n=ij(e,t.superscript);n=n.trim();let r=n.replace(/<[^>]*>/g,"");if(nj(t.superscript)){if("math"===e){let e=function(e){if(Qk(e))for(let t of e)if("first"!==t.type&&t.id)return t.id.toString();return""}(t.superscript);e&&(l+='<mark name="'+e+'"/>')}"\u2032"===r?l+=" prime ":"2"===r?l+=" squared ":"3"===r?l+=" cubed ":Number.isNaN(Number.parseInt(r))?l+=" to the "+n+"; ":l+=' to the <say-as interpret-as="ordinal">'+r+"</say-as> power; "}else Number.isNaN(Number.parseInt(r))?l+=" raised to the "+n+"; ":l+=' raised to the <say-as interpret-as="ordinal">'+r+"</say-as> power; "}if(!d&&!t.hasEmptyBranch("subscript")){let e=ij("math",t.subscript);e=e.trim(),l+=nj(t.subscript)?" sub "+e:" subscript "+e+". End subscript. "}}return l}function aj(e){var t,n;let r=globalThis.MathfieldElement;if("sre"===r.textToSpeechRules&&("sre"in window||"SRE"in window)){let i=JR(e);if(i){r.textToSpeechMarkup&&(r.textToSpeechRulesOptions=null!=(t=r.textToSpeechRulesOptions)?t:{},r.textToSpeechRulesOptions=Jk(Zk({},r.textToSpeechRulesOptions),{markup:r.textToSpeechMarkup}),"ssml"===r.textToSpeechRulesOptions.markup&&(r.textToSpeechRulesOptions=Jk(Zk({},r.textToSpeechRulesOptions),{markup:"ssml_step"})),r.textToSpeechRulesOptions=Jk(Zk({},r.textToSpeechRulesOptions),{rate:r.speechEngineRate}));let e=null!=(n=window.SRE)?n:globalThis.sre.System.getInstance();r.textToSpeechRulesOptions&&e.setupEngine(r.textToSpeechRulesOptions);let o="";try{o=e.toSpeech(i)}catch(a){console.error("MathLive 0.98.6: `SRE.toSpeech()` runtime error",a)}return o}return""}let i=ij("math",e);if("ssml"===r.textToSpeechMarkup){let e="";r.speechEngineRate&&(e='<prosody rate="'+r.speechEngineRate+'">'),i='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+e+"<p><s>"+i+"</s></p>"+(e?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else i="mac"===r.textToSpeechMarkup&&"macos"===nA()?i.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):i.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return i}var oj={"\\ne":"\u2260","\\neq":"\u2260","\u2212":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\>":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" ","\\infty":"oo","\\R":"RR","\\N":"NN","\\Z":"ZZ","\\Q":"QQ","\\C":"CC","\\emptyset":"O/","\\varnothing":"O/","\\varDelta":"Delta","\\varTheta":"Theta","\\varLambda":"Lambda","\\varXi":"Xi","\\varPi":"Pi","\\varSigma":"Sigma","\\varUpsilon":"Upsilon","\\varPhi":"Phi","\\varPsi":"Psi","\\varOmega":"Omega"},sj={"\\pm":"+-","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrack":"[","\\rbrack":"]","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)","\\sum":" sum ","\\prod":" prod ","\\bigcap":" nnn ","\\bigcup":" uuu ","\\int":" int ","\\oint":" oint ","\\ge":">=","\\le":"<=","\\ne":"!=","\\neq":"!=","\\lt":"<","\\gt":">","\\gets":"<-","\\to":"->","\\land":" and ","\\lor":" or ","\\lnot":" not ","\\forall":" AA ","\\exists":" EE ","\\in":" in ","\\notin":" !in ","\\mapsto":"|->","\\implies":"=>","\\iff":"<=>","\\cdot":"*","\\ast":"**","\\star":"***","\\times":"xx","\\div":"-:","\\ltimes":"|><","\\rtimes":"><|","\\bowtie":"|><|","\\circ":"@"};function lj(e){var t,n,r,i,a,o,s,l,u,c,d,p,h;if(!e)return"";if(Qk(e)){if(0===e.length)return"";if("latex"===e[0].mode)return e.map(lj).join("");if("text"===e[0].mode){let n=0,r="";for(;"text"===(null==(t=e[n])?void 0:t.mode);)r+=e[n].body?lj(e[n].body):e[n].value,n++;return'"'.concat(r,'" ').concat(lj(e.slice(n)))}let n=0,r=[];for(;e[n]&&"math"===e[n].mode;){let t="";for(;e[n]&&"mord"===e[n].type&&/\d/.test(e[n].value);)t+=e[n++].value;t?r.push(t):r.push(lj(e[n++]))}return r.push(lj(e.slice(n))),function(e){let t="";for(let n of e){let e=t[t.length-1];void 0!==e&&/\d/.test(e)&&/^\d/.test(n)&&(t+=" "),t+=n}return t}(r)}if("text"===e.mode)return'"'.concat(e.value,'"');let f,m="",{command:g}=e;if("\\placeholder"===g)return"(".concat(lj(e.body),")");switch(e.type){case"accent":let t={"\\vec":"vec","\\dot":"dot","\\ddot":"ddot","\\bar":"bar","\\hat":"hat","\\acute":"acute;","\\grave":"grave","\\tilde":"tilde","\\breve":"breave","\\check":"check"}[g];m="".concat(null!=t?t:""," ").concat(lj(e.body)," ");break;case"first":return"";case"latexgroup":return e.body.map((e=>e.value)).join("");case"group":case"root":m=null!=(n=oj[g])?n:lj(e.body);break;case"genfrac":{let t=e;(t.leftDelim||t.rightDelim)&&(m="."!==t.leftDelim&&t.leftDelim?t.leftDelim:"{:"),t.hasBarLine?(m+="(",m+=lj(t.above),m+=")/(",m+=lj(t.below),m+=")"):(m+="("+lj(t.above)+"),",m+="("+lj(t.below)+")"),(t.leftDelim||t.rightDelim)&&(m+="."!==t.rightDelim&&t.rightDelim?t.rightDelim:"{:")}break;case"surd":m+=e.hasEmptyBranch("above")?"sqrt("+lj(e.body)+")":"root("+lj(e.above)+")("+lj(e.body)+")";break;case"latex":case"sizeddelim":case"delim":case"mopen":case"mclose":m=e.value;break;case"leftright":{let t=e,n=t.leftDelim;m+="."!==n&&n?n:"{:",m+=lj(t.body);let r=t.matchingRightDelim();m+="."!==r&&r?r:":}"}break;case"overlap":case"overunder":case"box":break;case"mord":m=null!=(i=null!=(r=oj[g])?r:g)?i:"string"==typeof e.value?e.value:"",m.startsWith("\\")&&(m+=" "),f=g?g.match(/{?\\char"([\dabcdefABCDEF]+)}?/):null,f?m=String.fromCodePoint(Number.parseInt("0x"+f[1])):m.length>0&&m.startsWith("\\")&&(m="string"==typeof e.value?e.value.charAt(0):e.command),m=function(e,t){if(!t)return e;let n=e;return"double-struck"===t.variant&&(n='bbb "'.concat(n,'"')),"script"===t.variant&&(n='cc "'.concat(n,'"')),"fraktur"===t.variant&&(n='fr "'.concat(n,'"')),"sans-serif"===t.variant&&(n='sf "'.concat(n,'"')),"monospace"===t.variant&&(n='tt "'.concat(n,'"')),"bold"===t.variantStyle&&(n='bb "'.concat(n,'"')),t.color?"color({".concat(t.color,"})(").concat(n,")"):n}(m,e.style);break;case"mbin":case"mrel":case"minner":m=null!=(o=null!=(a=oj[g])?a:sj[g])?o:e.value;break;case"mpunct":m=null!=(s=sj[g])?s:g;break;case"mop":case"operator":case"extensible-symbol":"\u200b"!==e.value&&(m=sj[g]?sj[g]:"\\operatorname"===g?lj(e.body):null!=(l=e.value)?l:g,m+=" ");break;case"array":let v=e.array,y=e.environmentName,b=null!=(u={bmatrix:["[","]"],"bmatrix*":["[","]"]}[y])?u:["(",")"],x=[];for(let e of v){let t=[];for(let n of e)t.push(b[0]+lj(n)+b[1]);x.push(t.join(","))}let D=null!=(c={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[y])?c:["(",")"];m=D[0]+x.join(",")+D[1];break;case"spacing":m=null!=(d=oj[g])?d:" ";break;case"enclose":m="("+lj(e.body)+")";break;case"space":m=" ";break;case"subsup":m="";break;case"macro":m=null!=(h=null!=(p=oj[g])?p:sj[g])?h:lj(e.body)}if(!e.hasEmptyBranch("subscript")){m+="_";let t=lj(e.subscript);m+=1!==t.length?"(".concat(t,")"):t}if(!e.hasEmptyBranch("superscript")){m+="^";let t=lj(e.superscript);m+=1!==t.length?"(".concat(t,")"):t}return m}function uj(e,t){var n,r;null!=t||(t={}),t.mathstyle=null!=(n=t.mathstyle)?n:"displaystyle";let i=new pO({from:Jk(Zk({},dO()),{renderPlaceholder:()=>new GL(160,{maxFontSize:1}),letterShapeStyle:null!=(r=null==t?void 0:t.letterShapeStyle)?r:"tex"}),mathstyle:t.mathstyle}),a=new gO({mode:"math",type:"root",body:Pz(e,{context:i,parseMode:"math",mathstyle:t.mathstyle})}).render(i);return a?(JL(lI(a,i)),XL(a,{classes:"ML__latex"}).toMarkup()):""}function cj(e){if("string"==typeof e){let t=function(e){if(!e||"#"!==e[0])return;let t;return e=e.slice(1),e.length<=4?(t={r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16)},4===e.length&&(t.a=parseInt(e[3]+e[3],16)/255)):(t={r:parseInt(e[0]+e[1],16),g:parseInt(e[2]+e[3],16),b:parseInt(e[4]+e[5],16)},8===e.length&&(t.a=parseInt(e[6]+e[7],16)/255)),t&&"undefined"==typeof t.a&&(t.a=1),t}(e);if(!t)throw new Error("Invalid color: ".concat(e));return t}return"C"in e?function(e){return gj(pj(e))}(e):"a"in e?gj(e):e}function dj(e){return e<0?0:e>255?255:Math.round(e)}function pj(e){let[t,n,r]=[e.L,e.C,e.H],i=r*Math.PI/180,a={L:t,a:n*Math.cos(i),b:n*Math.sin(i)};return void 0!==e.alpha&&(a.alpha=e.alpha),a}function hj(e){let[t,n,r]=[e.L,e.a,e.b],i=Math.pow(.9999999984505198*t+.39633779217376786*n+.2158037580607588*r,3),a=Math.pow(1.00000000888176*t-.10556134232365635*n-.0638541747717059*r,3),o=Math.pow(1.000000054672411*t-.0894841820949657*n-1.2914855378640917*r,3),s=-1.2684380040921763*i+2.6097574006633715*a-.3413193963102197*o,l=-.004196086541837188*i-.7034186144594493*a+1.7076147009309444*o,u=e=>{let t=Math.abs(e);return t<=.0031308?12.92*e:(Math.sign(e)||1)*(1.055*Math.pow(t,1/2.4)-.055)};return[u(4.076741661347994*i-3.307711590408193*a+.230969928729428*o),u(s),u(l)]}function fj(e){let[t,n,r]=e;return t>=0&&t<=1&&n>=0&&n<=1&&r>=0&&r<=1}function mj(e,t){let[n,r,i]=e;return n=dj(255*n),r=dj(255*r),i=dj(255*i),void 0!==t?{r:n,g:r,b:i,alpha:t}:{r:n,g:r,b:i}}function gj(e){let[t,n,r]=hj(e);if(fj([t,n,r]))return mj([t,n,r],e.alpha);let i=function(e){let[t,n,r]=[e.L,e.a,e.b],i={L:t,C:Math.sqrt(n*n+r*r),H:180*Math.atan2(r,n)/Math.PI};return void 0!==e.alpha&&(i.alpha=e.alpha),i}(e);if(i.C=0,[t,n,r]=hj(pj(i)),!fj([t,n,r]))return mj([t,n,r],e.alpha);let a=0,o=e.L,s=(a+o)/2;i.C=s;let l=.36/Math.pow(2,12);for(;o-a>l;)s=(a+o)/2,i.C=s,[t,n,r]=hj(pj(i)),fj([t,n,r])?a=s:o=s;return mj([t,n,r],e.alpha)}function vj(e,t){let n=cj(e),r=cj(t);function i(e){return e>=.022?e:e+(.022-e)**1.414}function a(e){return(e<0?-1:1)*Math.pow(Math.abs(e),2.4)}let o,s,l,u=i(.2126729*a(r.r/255)+.7151522*a(r.g/255)+.072175*a(r.b/255)),c=i(.2126729*a(n.r/255)+.7151522*a(n.g/255)+.072175*a(n.b/255));return Math.abs(c-u)<5e-4?s=0:c>u?(o=c**.56-u**.57,s=1.14*o):(o=c**.65-u**.62,s=1.14*o),l=Math.abs(s)<.1?0:s>0?s-.027:s+.027,100*l}function yj(e,t,n){null!=n||(n="#fff"),null!=t||(t="#000");let r=vj(e,n),i=vj(e,t);return Math.abs(r)>Math.abs(i)?n:t}function bj(e){let t=cj(e),n=((1<<24)+(dj(t.r)<<16)+(dj(t.g)<<8)+dj(t.b)).toString(16).slice(1);return void 0!==t.alpha&&t.alpha<1&&(n+=("00"+Math.round(255*t.alpha).toString(16)).slice(-2)),n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&n[6]===n[7]&&(n=n[0]+n[2]+n[4]+(void 0!==t.alpha&&t.alpha<1?n[6]:"")),"#"+n}function xj(e){let t=Dj(e),n="";for(let r of t){if("string"!=typeof r.value)return"";n+=r.value}return n}function Dj(e){let t=e.model.selection.ranges;return 1!==t.length?[]:e.model.getAtoms(t[0])}function wj(e){return[Tj(e,"double-struck","mathbb","tooltip.blackboard"),Tj(e,"fraktur","mathfrak","tooltip.fraktur"),Tj(e,"calligraphic","mathcal","tooltip.caligraphic"),Bj(e,"up","mathrm","tooltip.roman-upright"),Bj(e,"bold","mathbf","tooltip.bold"),Bj(e,"italic","mathit","tooltip.italic")]}function _j(e){return[{label:()=>uj("\\vec{".concat(xj(e),"}")),visible:()=>1===xj(e).length,onMenuSelect:()=>e.insert("\\vec{#@}",{selectionMode:"item"})},{label:()=>uj("\\overrightarrow{".concat(xj(e),"}")),visible:()=>xj(e).length>0,onMenuSelect:()=>e.insert("\\overrightarrow{#@}",{selectionMode:"item"})},{label:()=>uj("\\overleftarrow{".concat(xj(e),"}")),visible:()=>xj(e).length>0,onMenuSelect:()=>e.insert("\\overleftarrow{#@}",{selectionMode:"item"})},{label:()=>uj("\\dot{".concat(xj(e),"}")),visible:()=>1===xj(e).length,onMenuSelect:()=>e.insert("\\dot{#@}",{selectionMode:"item"})},{label:()=>uj("\\ddot{".concat(xj(e),"}")),visible:()=>1===xj(e).length,onMenuSelect:()=>e.insert("\\ddot{#@}",{selectionMode:"item"})},{label:()=>uj("\\bar{".concat(xj(e),"}")),visible:()=>1===xj(e).length,onMenuSelect:()=>e.insert("\\bar{#@}",{selectionMode:"item"})},{label:()=>uj("\\overline{".concat(xj(e),"}")),visible:()=>xj(e).length>0,onMenuSelect:()=>e.insert("\\overline{#@}",{selectionMode:"item"})},{label:()=>uj("\\overgroup{".concat(xj(e),"}")),visible:()=>xj(e).length>0,onMenuSelect:()=>e.insert("\\overgroup{#@}",{selectionMode:"item"})},{label:()=>uj("\\overbrace{".concat(xj(e),"}")),visible:()=>xj(e).length>0,onMenuSelect:()=>e.insert("\\overbrace{#@}",{selectionMode:"item"})},{label:()=>uj("\\underline{".concat(xj(e),"}")),visible:()=>xj(e).length>0,onMenuSelect:()=>e.insert("\\underline{#@}",{selectionMode:"item"})},{label:()=>uj("\\undergroup{".concat(xj(e),"}")),visible:()=>xj(e).length>0,onMenuSelect:()=>e.insert("\\undergroup{#@}",{selectionMode:"item"})},{label:()=>uj("\\underbrace{".concat(xj(e),"}")),visible:()=>xj(e).length>0,onMenuSelect:()=>e.insert("\\underbrace{#@}",{selectionMode:"item"})}]}function Sj(e){return[{label:()=>uj("\\boxed{".concat(e.getValue(e.model.selection),"}}")),onMenuSelect:()=>e.insert("\\boxed{#@}",{selectionMode:"item"})},{label:()=>uj("\\bbox[5px, border: 2px solid red]{".concat(e.getValue(e.model.selection),"}")),onMenuSelect:()=>e.insert("\\bbox[5px, border: 2px solid red]{#@}",{selectionMode:"item"})},{label:()=>uj("\\bbox[5px, border: 2px dashed black]{".concat(e.getValue(e.model.selection),"}")),onMenuSelect:()=>e.insert("\\bbox[5px, border: 2px dashed black]{#@}",{selectionMode:"item"})}]}function Cj(e){let t=[];for(let n of Object.keys(lA))t.push({class:("#000"===bj(yj(lA[n]))?"dark-contrast":"light-contrast")+" menu-swatch",label:'<span style="background:'.concat(lA[n],' "></span>'),ariaLabel:()=>{var e;return null!=(e=aA(n))?e:n},checked:()=>{var t;return{some:"mixed",all:!0}[null!=(t=e.queryStyle({backgroundColor:n}))&&t]},onMenuSelect:()=>{e.applyStyle({backgroundColor:n},{operation:"toggle"}),e.adoptStyle="none"}});return t}function Ej(e){let t=[];for(let n of Object.keys(uA))t.push({class:("#000"===yj(uA[n])?"dark-contrast":"light-contrast")+" menu-swatch",label:'<span style="background:'.concat(uA[n],' "></span>'),ariaLabel:()=>{var e;return null!=(e=aA(n))?e:n},checked:()=>{var t;return{some:"mixed",all:!0}[null!=(t=e.queryStyle({color:n}))&&t]},onMenuSelect:()=>{e.applyStyle({color:n},{operation:"toggle"}),e.adoptStyle="none"}});return t}var kj=class extends ER{constructor(e,t,n,r){super(e,t),this.row=n,this.col=r}set active(e){let t=this.parentMenu.children;if(e)for(let n of t)n.element.classList.toggle("active",n.row<=this.row&&n.col<=this.col);else for(let n of t)n.element.classList.remove("active")}};function Aj(e){let t=[];for(let n=1;n<=5;n++)for(let r=1;r<=5;r++)t.push({onCreate:(e,t)=>new kj(e,t,n,r),label:"\u2610",tooltip:()=>aA("tooltip.row-by-col",n,r),data:{row:n,col:r},onMenuSelect:()=>{e.insert("\\begin{pmatrix}".concat(Array(n).fill(Array(r).fill("#?").join(" & ")).join("\\\\"),"\\end{pmatrix}"),{selectionMode:"item"})}});return t}function Nj(e){return[{label:()=>aA("menu.array.add row above"),id:"add-row-above",onMenuSelect:()=>e.executeCommand("addRowBefore"),visible:()=>Mj(e)},{label:()=>aA("menu.array.add row below"),id:"add-row-below",onMenuSelect:()=>e.executeCommand("addRowAfter"),visible:()=>Mj(e)},{label:()=>aA("menu.array.add column before"),id:"add-column-before",onMenuSelect:()=>e.executeCommand("addColumnBefore"),visible:()=>Mj(e),enabled:()=>{let t=e.model.parentEnvironment;if(!t)return!1;let[n,r]=function(e){var t;let n=null==(t=e.model.parentEnvironment)?void 0:t.array;return n?[n.length,n.reduce(((e,t)=>Math.max(e,t.length)),0)]:[0,0]}(e);return n<t.maxColumns}},{label:()=>aA("menu.array.add column after"),id:"add-column-after",onMenuSelect:()=>e.executeCommand("addColumnAfter"),visible:()=>Mj(e)},{type:"divider"},{label:()=>aA("menu.array.delete row"),id:"delete-row",onMenuSelect:()=>e.executeCommand("removeRow"),visible:()=>Mj(e)},{label:()=>aA("menu.array.delete column"),id:"delete-column",onMenuSelect:()=>e.executeCommand("removeColumn"),visible:()=>Mj(e)},{type:"divider"},{label:()=>aA("menu.borders"),visible:()=>(function(e){return"array"===e.model.at(e.model.position).type}(e)||Mj(e))&&e.isSelectionEditable,submenu:[{label:" \u22f1 ",id:"environment-no-border",onMenuSelect:()=>Fj(e,"matrix")},{label:"(\u22f1)",id:"environment-parentheses",onMenuSelect:()=>Fj(e,"pmatrix")},{label:"[\u22f1]",id:"environment-brackets",onMenuSelect:()=>Fj(e,"bmatrix")},{label:"|\u22f1|",id:"environment-bar",onMenuSelect:()=>Fj(e,"vmatrix")},{label:"{\u22f1}",id:"environment-braces",onMenuSelect:()=>Fj(e,"Bmatrix")}],submenuClass:"border-submenu"},{type:"divider"},{label:()=>aA("menu.insert matrix"),id:"insert-matrix",visible:()=>e.isSelectionEditable,submenu:Aj(e),submenuClass:"insert-matrix-submenu",columnCount:5},{label:()=>aA("menu.mode"),id:"mode",visible:()=>e.isSelectionEditable&&e.model.selectionIsCollapsed,submenu:[{label:()=>aA("menu.mode-math"),id:"mode-math",onMenuSelect:()=>{XI(e,"accept-all"),e.executeCommand(["switchMode","math"])},checked:()=>"math"===e.model.mode},{label:()=>aA("menu.mode-text"),id:"mode-text",onMenuSelect:()=>{XI(e,"accept-all"),e.executeCommand(["switchMode","text"])},checked:()=>"text"===e.model.mode},{label:()=>aA("menu.mode-latex"),id:"mode-latex",onMenuSelect:()=>e.executeCommand(["switchMode","latex"]),checked:()=>"latex"===e.model.mode}]},{type:"divider"},{label:()=>aA("menu.font-style"),id:"variant",visible:()=>e.isSelectionEditable,submenu:wj(e),submenuClass:"variant-submenu"},{label:()=>aA("menu.color"),id:"color",visible:()=>e.isSelectionEditable,submenu:Ej(e),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>aA("menu.background-color"),id:"background-color",visible:()=>e.isSelectionEditable,submenu:Cj(e),columnCount:4,submenuClass:"swatches-submenu"},{label:()=>aA("menu.accent"),id:"accent",visible:()=>e.isSelectionEditable,submenu:_j(e),submenuClass:"variant-submenu"},{label:()=>aA("menu.decoration"),id:"decoration",visible:()=>e.isSelectionEditable&&xj(e).length>0,submenu:Sj(e),submenuClass:"variant-submenu"},{type:"divider"},{label:()=>aA("menu.evaluate"),id:"ce-evaluate",visible:()=>e.isSelectionEditable&&null!==globalThis.MathfieldElement.computeEngine,onMenuSelect:()=>{let t=function(e){var t,n;let r;if(r=e.model.selectionIsCollapsed?null==(t=globalThis.MathfieldElement.computeEngine)?void 0:t.parse(e.getValue(),{canonical:!1}):null==(n=globalThis.MathfieldElement.computeEngine)?void 0:n.parse(e.getValue(e.model.selection),{canonical:!1}),!r)return"";let i=r.evaluate();return i.isSame(r)&&(i=r.N()),i.latex}(e);t?e.model.selectionIsCollapsed?(e.model.position=e.model.lastOffset,e.insert("=".concat(t),{insertionMode:"insertAfter",selectionMode:"item"})):e.insert(t,{insertionMode:"replaceSelection",selectionMode:"item"}):e.model.announce("plonk")}},{label:()=>aA("menu.simplify"),id:"ce-simplify",visible:()=>e.isSelectionEditable&&null!==globalThis.MathfieldElement.computeEngine,onMenuSelect:()=>{var t,n;if(e.model.selectionIsCollapsed){let n=null==(t=e.expression)?void 0:t.simplify();if(e.model.position=e.model.lastOffset,!n)return void e.model.announce("plonk");e.insert("=".concat(n.latex),{insertionMode:"insertAfter",selectionMode:"item"})}else{let t=null==(n=globalThis.MathfieldElement.computeEngine)?void 0:n.parse(e.getValue(e.model.selection)).simplify();if(!t)return void e.model.announce("plonk");e.insert(t.latex,{insertionMode:"replaceSelection",selectionMode:"item"})}}},{label:()=>{var t;if(null===globalThis.MathfieldElement.computeEngine)return"";let n=null==(t=e.expression)?void 0:t.unknowns[0];return n?aA("menu.solve-for",uj(n)):aA("menu.solve")},id:"ce-solve",visible:()=>{var t;return e.isSelectionEditable&&null!==globalThis.MathfieldElement.computeEngine&&1===(null==(t=e.expression)?void 0:t.unknowns.length)&&"Nothing"!==e.expression.unknowns[0]},onMenuSelect:()=>{var t;let n=e.expression,r=null==n?void 0:n.unknowns[0],i=null==(t=n.solve(r))?void 0:t.map((e=>{var t;return null!=(t=e.simplify().latex)?t:""}));i?e.insert("".concat(r,"=").concat(1===i.length?i[0]:"\\left\\lbrace"+(null==i?void 0:i.join(", "))+"\\right\\rbrace"),{insertionMode:"replaceAll",selectionMode:"item"}):e.model.announce("plonk")}},{type:"divider"},{label:()=>aA("menu.cut"),onMenuSelect:()=>e.executeCommand("cutToClipboard"),visible:()=>!e.options.readOnly&&e.isSelectionEditable,keyboardShortcut:"meta+X"},{label:()=>aA("menu.copy"),id:"copy",submenu:[{label:()=>aA("menu.copy-as-latex"),id:"copy-latex",onMenuSelect:()=>OO.copyToClipboard(e,"latex"),keyboardShortcut:"meta+C"},{label:()=>aA("menu.copy-as-ascii-math"),id:"copy-ascii-math",onMenuSelect:()=>OO.copyToClipboard(e,"ascii-math")},{label:()=>aA("menu.copy-as-mathml"),id:"copy-math-ml",onMenuSelect:()=>OO.copyToClipboard(e,"math-ml")}]},{label:()=>aA("menu.paste"),id:"paste",onMenuSelect:()=>e.executeCommand("pasteFromClipboard"),visible:()=>e.hasEditableContent,keyboardShortcut:"meta+V"},{label:()=>aA("menu.select-all"),id:"select-all",keyboardShortcut:"meta+A",onMenuSelect:()=>e.executeCommand("selectAll")}]}function Mj(e){var t;return!(null==(t=e.model.parentEnvironment)||!t.array)}function Fj(e,t){GI(e),e.flushInlineShortcutBuffer(),dq(e.model,t),pP(e)}function Tj(e,t,n,r){return{label:()=>uj("\\".concat(n,"{").concat(xj(e),"}")),tooltip:()=>{var e;return null!=(e=aA(r))?e:r},visible:()=>function(e,t){let n=Dj(e);if(1!==n.length)return!1;let r=fI[t];return!!r&&!!r.test(n[0].value)}(e,t),checked:()=>{var n;return{some:"mixed",all:!0}[null!=(n=e.queryStyle({variant:t}))&&n]},onMenuSelect:()=>{e.applyStyle({variant:t},{operation:"toggle"}),e.adoptStyle="none"}}}function Bj(e,t,n,r){return{label:()=>uj("\\".concat(n,"{").concat(xj(e),"}")),tooltip:()=>{var e;return null!=(e=aA(r))?e:r},visible:()=>function(e){return xj(e).length>0}(e),checked:()=>{var n;return{some:"mixed",all:!0}[null!=(n=e.queryStyle({variantStyle:t}))&&n]},onMenuSelect:()=>{e.applyStyle({variantStyle:t},{operation:"toggle"}),e.adoptStyle="none"}}}function Lj(e,t){return e+aj(t)}function Oj(e){var t;let n;if("prompt"===e.parent.type)"body"===e.parentBranch&&(n="prompt");else if("body"===e.parentBranch)n=e.type&&null!=(t={enclose:"cross out",leftright:"delimiter",surd:"square root",root:"math field",mop:"operator",first:"first"}[e.type])?t:"parent";else if("genfrac"===e.parent.type){if("above"===e.parentBranch)return"numerator";if("below"===e.parentBranch)return"denominator"}else"surd"===e.parent.type?"above"===e.parentBranch&&(n="index"):"superscript"===e.parentBranch?n="superscript":"subscript"===e.parentBranch&&(n="subscript");return null!=n?n:"parent"}function zj(e,t,n,r){let i="";if("plonk"===t)globalThis.MathfieldElement.playSound("plonk"),e.flushInlineShortcutBuffer();else if("delete"===t)i=Lj("deleted: ",r);else if("focus"===t||t.includes("move"))i=function(e,t){if(Number.isNaN(t))return"";let n=e.at(t);if(!n||n.treeDepth<=e.at(e.position).treeDepth)return"";let r="",i=n.parent,a=e.at(e.position).parent;for(;i!==e.root&&i!==a;)r+="out of ".concat(Oj(i),";"),i=i.parent;return r}(e.model,n)+(e.model.selectionIsCollapsed?"":"selected: ")+function(e){if(!e.selectionIsCollapsed)return Lj("",e.getAtoms(e.selection));let t="",n=e.at(e.position),r=Oj(n);return n.isFirstSibling&&(t=(r?"start of "+r:"unknown")+": "),n.isLastSibling?n.isFirstSibling||(t+=r?"end of "+r:"unknown"):t+=Lj("",n),t}(e.model);else if("replacement"===t)i=Lj("",e.model.at(e.model.position));else if("line"===t){let t=Lj("",e.model.root);e.keyboardDelegate.setAriaLabel(t)}else i=r?Lj(t+" ",r):t;if(i){let t=e.ariaLiveText.textContent.includes("\xa0")?" \u202f ":" \xa0 ";e.ariaLiveText.textContent=i+t}}vP({speak:(e,t,n)=>function(e,t,n){var r;n=null!=n?n:{withHighlighting:!1};let{model:i}=e;function a(e){let t=null;switch(e){case"all":default:t=i.root;break;case"selection":t=i.getAtoms(i.selection);break;case"left":t=i.getAtoms(i.offsetOf(i.at(i.position).leftSibling),i.position);break;case"right":t=i.getAtoms(i.position,i.offsetOf(i.at(i.position).rightSibling));break;case"group":t=i.getAtoms(i.getSiblingsRange(i.position));break;case"parent":{let{parent:e}=i.at(i.position);t=null!=e&&e.parent?e:i.root;break}}return t}function o(e){let t="";switch(e){case"all":case"group":default:break;case"selection":t="no selection";break;case"left":t="at start";break;case"right":t="at end";break;case"parent":t="no parent"}return t}let s=globalThis.MathfieldElement,l=a(t);if(null===l)return null==(r=s.speakHook)||r.call(s,o(t)),!1;(n.withHighlighting||"amazon"===s.speechEngine)&&(s.textToSpeechMarkup=globalThis.sre&&"sre"===s.textToSpeechRules?"ssml_step":"ssml");let u=aj(l);return eA()&&n.withHighlighting?(iK().readAloudMathfield=e,fP(e,{forHighlighting:!0}),s.readAloudHook&&s.readAloudHook(e.field,u)):s.speakHook&&s.speakHook(u),!1}(e,t,n)},{target:"mathfield"});var Ij=class{constructor(e,t,n){this.mathfield=e,this.mode=t,this.silenceNotifications=!1,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.root=n}dispose(){this.mathfield=void 0}getState(){let e={ranges:[...this._selection.ranges]};return this.selection.direction&&"none"!==this.selection.direction&&(e.direction=this.selection.direction),{content:this.root.toJson(),selection:e,mode:this.mode}}setState(e,t){var n;let r=this.silenceNotifications;this.silenceNotifications=null==(n=null==t?void 0:t.silenceNotifications)||n;let i={};if("undo"===(null==t?void 0:t.type)&&(i={inputType:"historyUndo"}),"redo"===(null==t?void 0:t.type)&&(i={inputType:"historyRedo"}),this.contentWillChange(i)){let t=this.silenceNotifications;this.silenceNotifications=!0,this.mode=e.mode,this.root=pI(e.content),this.selection=e.selection,this.silenceNotifications=t,this.contentDidChange(i)}this.silenceNotifications=r}get atoms(){return this.root.children}get selection(){return this._selection}set selection(e){this.setSelection(e)}setSelection(e,t){return!(!this.mathfield.contentEditable&&"none"===this.mathfield.userSelect)&&this.deferNotifications({selection:!0},(()=>{var n,r,i;let a=this.normalizeSelection(e,t);if(void 0===a)throw new TypeError("Invalid selection");if(1===a.ranges.length&&a.ranges[0][0]===a.ranges[0][1]){let e=a.ranges[0][0];return this.mathfield.dirty||null!=(n=this.at(e))&&n.parentPrompt||!this.mathfield.hasEditablePrompts?(this._anchor=e,this._position=e,void(this._selection=a)):null!=(r=this.at(e-1))&&r.parentPrompt?(this._anchor=this.normalizeOffset(e-1),this._position=this._anchor,void(this._selection=this.normalizeSelection(this._anchor))):null!=(i=this.at(e+1))&&i.parentPrompt?(this._anchor=this.normalizeOffset(e+1),this._position=this._anchor,void(this._selection=this.normalizeSelection(this._anchor))):(this._anchor=0,this._position=0,void(this._selection={ranges:[[0,0]]}))}let o=DO(a);"backward"===a.direction?[this._position,this._anchor]=o:[this._anchor,this._position]=o;let s=this.at(o[0]+1),l=this.at(o[1]),u=gO.commonAncestor(s,l);"array"===(null==u?void 0:u.type)&&s.parent===u&&l.parent,this._selection={ranges:[o],direction:a.direction},this._position>=0&&(this._position,this.lastOffset)}))}setPositionHandlingPlaceholder(e){var t;let n=this.at(e);"placeholder"===(null==n?void 0:n.type)?this.setSelection(e-1,e):"placeholder"===(null==(t=null==n?void 0:n.rightSibling)?void 0:t.type)?this.setSelection(e,e+1):this.position=e,n instanceof Jz&&n.isSuggestion&&(n.isSuggestion=!1),this.mathfield.stopCoalescingUndo()}get position(){return this._position}set position(e){this.setSelection(e,e)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return 1===Math.abs(this._anchor-this._position)&&"placeholder"===this.at(Math.max(this._anchor,this._position)).type}collapseSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"forward";return this._anchor!==this._position&&(this.position="backward"===e?Math.min(this._anchor,this._position):Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(e){return this.atoms[e]}offsetOf(e){return this.atoms.indexOf(e)}getSiblingsRange(e){let t=this.at(e),{parent:n}=t;if(!n)return[0,this.lastOffset];let r=t.parent.branch(t.parentBranch);return[this.offsetOf(r[0]),this.offsetOf(r[r.length-1])]}getBranchRange(e,t){let n=this.at(e).branch(t);return[this.offsetOf(n[0]),this.offsetOf(n[n.length-1])]}getAtoms(e,t,n){let r,i,a=null!=n?n:{};if(SO(e)){if(a=null!=t?t:{},e.ranges.length>1)return e.ranges.reduce(((e,t)=>[...e,...this.getAtoms(t,a)]),[]);e=e.ranges[0]}if(wO(e)){if(r=e,!wO(t))return[];i=t}else[r,i]=e,a=null!=t?t:{};if(!Number.isFinite(r))return[];void 0===a.includeChildren&&(a.includeChildren=!1),r<0&&(r=this.lastOffset-r+1),i<0&&(i=this.lastOffset+i+1);let o=Math.min(r,i)+1,s=Math.max(r,i);if(!a.includeChildren&&1===o&&s===this.lastOffset)return[this.root];let l=[];for(let u=o;u<=s;u++){let e=this.atoms[u];Pj(this,e,o,s)&&l.push(e)}return a.includeChildren||(l=l.filter((e=>{let t=!1,{parent:n}=e;for(;n&&!t;)t=Pj(this,n,o,s),n=n.parent;return!t}))),l}getAllAtoms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[],n=this.lastOffset;for(let r=e;r<=n;r++)t.push(this.atoms[r]);for(let r=0;r<e;r++)t.push(this.atoms[r]);return t}findAtom(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"forward",i=this.lastOffset;if("forward"!==r){for(let r=n;r>=0;r--)if(t=this.atoms[r],e(t))return t;for(let r=i;r>n;r--)if(t=this.atoms[r],e(t))return t}else{for(let r=n;r<=i;r++)if(t=this.atoms[r],e(t))return t;for(let r=0;r<n;r++)if(t=this.atoms[r],e(t))return t}}extractAtoms(e){let t=this.getAtoms(e);if(1===t.length&&!t[0].parent){if("root"!==t[0].type)return t=this.root.cells.flat(),this.root=new gO({type:"root",body:[]}),t;t=[...t[0].body],t.shift()}for(let n of t)n.parent.removeChild(n);return t}deleteAtoms(e){null!=e||(e=[0,-1]),this.extractAtoms(e),this.position=e[0]}atomToString(e,t){let n=null!=t?t:"latex";if(n.startsWith("latex"))return gO.serialize([e],{expandMacro:"latex-expanded"===n,skipStyles:"latex-unstyled"===n,skipPlaceholders:"latex-without-placeholders"===n,defaultMode:this.mathfield.options.defaultMode});if("math-ml"===n)return JR(e);if("spoken"===n)return aj(e);if("spoken-text"===n){let t=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="";let n=aj(e);return globalThis.MathfieldElement.textToSpeechMarkup=t,n}if("spoken-ssml"===n||"spoken-ssml-with-highlighting"===n){let t=globalThis.MathfieldElement.textToSpeechMarkup;globalThis.MathfieldElement.textToSpeechMarkup="ssml";let n=aj(e);return globalThis.MathfieldElement.textToSpeechMarkup=t,n}return"ascii-math"===n?lj(e):(console.error('MathLive 0.98.6: Unexpected format "'.concat(n)),"")}getValue(e,t,n){if(void 0===e)return this.atomToString(this.root,"latex");if("string"==typeof e&&"math-json"!==e)return this.atomToString(this.root,e);let r,i;if(wO(e)&&wO(t)?(r=[this.normalizeRange([e,t])],i=n):_O(e)?(r=[this.normalizeRange(e)],i=t):SO(e)?(r=e.ranges,i=t):(r=[this.normalizeRange([0,-1])],i=e),null!=i||(i="latex"),"math-json"===i){if(!globalThis.MathfieldElement.computeEngine)return window[Symbol.for("io.cortexjs.compute-engine")]||console.error('The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),'["Error", "compute-engine-not-available"]';let e=this.getValue({ranges:r},"latex-unstyled");try{let t=globalThis.MathfieldElement.computeEngine.parse(e);return JSON.stringify(t.json)}catch(a){return JSON.stringify(["Error","'".concat(a.toString(),"'")])}}if(i.startsWith("latex")){let e={expandMacro:"latex-expanded"===i,skipStyles:"latex-unstyled"===i,skipPlaceholders:"latex-without-placeholders"===i,defaultMode:this.mathfield.options.defaultMode};return zL(r.map((t=>gO.serialize(this.getAtoms(t),e))))}return r.map((e=>this.getAtoms(e).map((e=>this.atomToString(e,i))).join(""))).join("")}extendSelectionTo(e,t){return!(!this.mathfield.contentEditable&&"none"===this.mathfield.userSelect)&&this.deferNotifications({selection:!0},(()=>{let n=this.normalizeRange([e,t]),[r,i]=n,{parent:a}=this.at(i);if(a&&("genfrac"===a.type||"subsup"===a.type))for(;a!==this.root&&qj(this,a,[r,i]);)i=this.offsetOf(a),a=a.parent;for(a=this.at(r).parent;a!==this.root&&qj(this,a,[r,i]);)r=this.offsetOf(a.leftSibling),a=a.parent;if(a=this.at(i).parent,"genfrac"===(null==a?void 0:a.type))for(;a!==this.root&&qj(this,a,[r,i]);)i=this.offsetOf(a),a=a.parent;this._position=this.normalizeOffset(t),this._selection={ranges:[[r,i]],direction:"none"}}))}announce(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var r,i;(null==(i=null==(r=this.mathfield.host)?void 0:r.dispatchEvent(new CustomEvent("announce",{detail:{command:e,previousPosition:t,atoms:n},cancelable:!0,bubbles:!0,composed:!0})))||i)&&zj(this.mathfield,e,t,n)}deferNotifications(e,t){let n=this._selection,r=this._anchor,i=this._position,a=this.silenceNotifications;this.silenceNotifications=!0;let o=this.root.changeCounter;t();let s=this.root.changeCounter!==o,l=r!==this._anchor||i!==this._position||"different"===function(e,t){if(e.direction===t.direction){let n=e.ranges.length;if(t.ranges.length===n){let r=0;for(;r<n&&"equal"===xO(e.ranges[r],t.ranges[r]);)r++;return r===n?"equal":"different"}}return"different"}(this._selection,n);return this.silenceNotifications=a,e.content&&s&&this.contentDidChange({inputType:e.type}),e.selection&&l&&this.selectionDidChange(),s||l}normalizeOffset(e){return e>0?e=Math.min(e,this.lastOffset):e<0&&(e=this.lastOffset+e+1),e}normalizeRange(e){let[t,n]=e;return t=this.normalizeOffset(t),n=this.normalizeOffset(n),t<n?[t,n]:[n,t]}normalizeSelection(e,t){var n;let r;if(wO(e)){let n=this.normalizeOffset(e);if(wO(t)){let e=this.normalizeOffset(t);r=n<=e?{ranges:[[n,e]],direction:"none"}:{ranges:[[e,n]],direction:"backward"}}else r={ranges:[[n,n]],direction:"none"}}else if(_O(e)){let t=this.normalizeOffset(e[0]),n=this.normalizeOffset(e[1]);r=t<=n?{ranges:[[t,n]],direction:"none"}:{ranges:[[n,t]],direction:"backward"}}else SO(e)&&(r={ranges:e.ranges.map((e=>this.normalizeRange(e))),direction:null!=(n=e.direction)?n:"none"});return r}get parentEnvironment(){let e=this.at(this.position).parent;if(e){for(;e.parent&&"array"!==e.type;)e=e.parent;if("array"===e.type)return e}}get cell(){var e;let t=this.at(this.position);if(t){for(;t&&"array"!==(null==(e=t.parent)?void 0:e.type);)t=t.parent;if(null!=t&&t.parent&&"array"===t.parent.type)return t.parentBranch}}contentWillChange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.silenceNotifications||!this.mathfield)return!0;let t=this.silenceNotifications;this.silenceNotifications=!0;let n=this.mathfield.onContentWillChange(e);return this.silenceNotifications=t,n}contentDidChange(e){var t;if(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(iR(this.mathfield)),this.silenceNotifications||!this.mathfield.host||!this.mathfield)return;let n=this.silenceNotifications;this.silenceNotifications=!0,this.mathfield.host.dispatchEvent(new InputEvent("input",Jk(Zk({},e),{data:e.data?e.data:null!=(t=e.inputType)?t:"",bubbles:!0,composed:!0}))),this.silenceNotifications=n}selectionDidChange(){if(!this.mathfield||(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(iR(this.mathfield)),this.silenceNotifications))return;let e=this.silenceNotifications;this.silenceNotifications=!0,this.mathfield.onSelectionDidChange(),this.silenceNotifications=e}};function Pj(e,t,n,r){let i=e.offsetOf(t);if(i<n||i>r)return!1;if(!t.hasChildren)return!0;let a=e.offsetOf(t.firstChild);if(a>=n&&a<=r){let i=e.offsetOf(t.lastChild);if(i>=n&&i<=r)return!0}return!1}function qj(e,t,n){if(null==t||!t.hasChildren)return!1;let[r,i]=n,a=e.offsetOf(t.firstChild),o=e.offsetOf(t.lastChild);return a>=r&&a<=i&&o>=a&&o<=i}function Rj(e,t,n,r){var i,a,o,s,l,u;let c=n.parent;if(c&&n instanceof Mz){let i=!r&&"forward"===t||"body"===r&&"backward"===t,a=i?e.offsetOf(n.firstChild):e.offsetOf(n.lastChild);return i?"?"!==n.rightDelim&&"."!==n.rightDelim?(n.leftDelim=".",n.isDirty=!0):(c.addChildrenAfter(n.removeBranch("body"),n),c.removeChild(n),a--):"?"!==n.leftDelim&&"."!==n.leftDelim?(n.rightDelim=".",n.isDirty=!0):(c.addChildrenAfter(n.removeBranch("body"),n),c.removeChild(n),a--),e.position=a,!0}if(c&&"surd"===n.type){if("forward"===t&&!r||"backward"===t&&"body"===r){let t=n.leftSibling;n.hasChildren&&c.addChildrenAfter(n.removeBranch("body"),n),c.removeChild(n),e.position=e.offsetOf(t)}else"forward"===t&&"body"===r?e.position=e.offsetOf(n):r||"backward"!==t?"above"===r&&(n.hasEmptyBranch("above")&&n.removeBranch("above"),e.position="backward"===t?e.offsetOf(n.leftSibling):e.offsetOf(n.body[0])):n.hasChildren?e.position=e.offsetOf(n.lastChild):(e.position=Math.max(0,e.offsetOf(n)-1),c.removeChild(n));return!0}if(c&&("box"===n.type||"enclose"===n.type)){let i=r&&"backward"===t||!r&&"forward"===t?n.leftSibling:n.lastChild;return c.addChildrenAfter(n.removeBranch("body"),n),c.removeChild(n),e.position=e.offsetOf(i),!0}if("genfrac"===n.type||"overunder"===n.type){if(!r)return!("overunder"===n.type&&n.hasEmptyBranch("body")||"genfrac"===n.type&&n.hasEmptyBranch("below")&&n.hasEmptyBranch("above"))&&(e.position=e.offsetOf("forward"===t?n.firstChild:n.lastChild),!0);let i="numerator-denominator"===Jj.fractionNavigationOrder?"above":"below",a="above"===i?"below":"above";if(c&&("forward"===t&&r===i||"backward"===t&&r===a)){let t=n.removeBranch(i),r=n.removeBranch(a);return c.addChildrenAfter([...t,...r],n),c.removeChild(n),e.position=e.offsetOf(t.length>0?t[t.length-1]:r[0]),!0}return e.position="backward"===t?e.offsetOf(n.leftSibling):e.offsetOf(n),!0}if(n.isExtensibleSymbol||"subsup"===n.type){if(!r&&"forward"===t)return!1;if(!r){if(n.subscript||n.superscript){let r="forward"===t?null!=(o=null==(i=n.superscript)?void 0:i[0])?o:null==(a=n.subscript)?void 0:a[0]:null!=(u=null==(s=n.subscript)?void 0:s[0].lastSibling)?u:null==(l=n.superscript)?void 0:l[0].lastSibling;return r&&(e.position=e.offsetOf(r)),!0}return!1}if(!n.hasChildren&&"subsup"===n.type){let r="forward"===t?e.offsetOf(n):Math.max(0,e.offsetOf(n)-1);return n.parent.removeChild(n),e.position=r,!0}if("superscript"===r)if("backward"===t){let t=e.offsetOf(n.firstChild)-1;e.position=t}else n.subscript?e.position=e.offsetOf(n.subscript[0]):e.position=e.offsetOf(n);else"subscript"===r&&("backward"===t&&n.superscript?e.position=e.offsetOf(n.superscript[0].lastSibling):e.position="backward"===t?e.offsetOf(n.firstChild)-1:e.offsetOf(n));if(r&&n.hasEmptyBranch(r)&&(n.removeBranch(r),"subsup"===n.type&&!n.subscript&&!n.superscript)){let r="forward"===t?e.offsetOf(n):Math.max(0,e.offsetOf(n)-1);n.parent.removeChild(n),e.position=r}return!0}if("genfrac"===(null==c?void 0:c.type)&&!r&&"first"!==n.type){let t=e.offsetOf(n.leftSibling);return c.removeChild(n),c.hasEmptyBranch("above")&&c.hasEmptyBranch("below")?(t=e.offsetOf(c.leftSibling),c.parent.removeChild(c),e.announce("delete",void 0,[c]),e.position=t,!0):(e.announce("delete",void 0,[n]),e.position=t,!0)}if("backward"===t&&("\\ln"===(null==c?void 0:c.command)||"\\log"===(null==c?void 0:c.command))&&"body"!==n.parentBranch){let t=e.offsetOf(c.leftSibling);return c.parent.removeChild(c),e.announce("delete",void 0,[c]),e.position=t,!0}return!1}function jj(e,t,n){let r=e.getAtoms(t);if(r.length>0&&r[0].parent){let i=r[0].parent.firstChild;"first"===i.type&&(i=i.rightSibling);let a=r[r.length-1].parent.lastChild,o=r[0];"first"===o.type&&(o=o.rightSibling);let s=r[r.length-1];if(o===i&&s===a){let n=r[0].parent;n.parent&&"prompt"!==n.type&&(t=[e.offsetOf(n.leftSibling),e.offsetOf(n)])}if(1===r.length&&"placeholder"===r[0].type&&"genfrac"===r[0].parent.type){let t=r[0].parent,i="below"===r[0].parentBranch?"above":"below",a=e.offsetOf(t.leftSibling);return e.deferNotifications({content:!0,selection:!0,type:n},(()=>{var n,r;let o=t.removeBranch(i);if(1===o.length&&"placeholder"===o[0].type)null==(r=t.parent)||r.removeChild(t),e.position=Math.max(0,a);else{let r=t.parent.addChildrenAfter(o,t);null==(n=t.parent)||n.removeChild(t),e.position=e.offsetOf(r)}}))}}return e.deferNotifications({content:!0,selection:!0,type:n},(()=>e.deleteAtoms(t)))}vP({deleteAll:e=>e.contentWillChange({inputType:"deleteContent"})&&jj(e,[0,-1],"deleteContent"),deleteForward:e=>function(e){return!(!e.mathfield.isSelectionEditable||!e.contentWillChange({inputType:"deleteContentForward"}))&&(e.selectionIsCollapsed?e.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},(()=>{var t,n;let r=e.at(e.position).rightSibling;if(r&&Rj(e,"forward",r))return;if(r){if(e.at(e.position).isLastSibling&&Rj(e,"forward",r.parent,r.parentBranch))return}else{if(r=e.at(e.position),r.isLastSibling&&Rj(e,"forward",r.parent,r.parentBranch))return;r=void 0}if(e.position===e.lastOffset||!r)return void e.announce("plonk");r.parent.removeChild(r);let i=null==(t=e.at(e.position))?void 0:t.rightSibling;for(;"subsup"===(null==i?void 0:i.type);)i.parent.removeChild(i),i=null==(n=e.at(e.position))?void 0:n.rightSibling;e.announce("delete",void 0,[r])})):jj(e,DO(e.selection),"deleteContentForward"))}(e),deleteBackward:e=>function(e){return!(!e.mathfield.isSelectionEditable||!e.contentWillChange({inputType:"deleteContentBackward"}))&&(e.selectionIsCollapsed?e.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},(()=>{let t=e.at(e.position);if(!t||!Rj(e,"backward",t)){if(null!=t&&t.isFirstSibling){if(Rj(e,"backward",t.parent,t.parentBranch))return;t=null}if(!t)return void e.announce("plonk");e.position=e.offsetOf(t.leftSibling),t.parent.removeChild(t),e.announce("delete",void 0,[t])}})):jj(e,DO(e.selection),"deleteContentBackward"))}(e),deleteNextWord:e=>e.contentWillChange({inputType:"deleteWordForward"})&&jj(e,[e.anchor,gq(e,e.position,"forward")],"deleteWordForward"),deletePreviousWord:e=>e.contentWillChange({inputType:"deleteWordBackward"})&&jj(e,[e.anchor,gq(e,e.position,"backward")],"deleteWordBackward"),deleteToGroupStart:e=>e.contentWillChange({inputType:"deleteSoftLineBackward"})&&jj(e,[e.anchor,e.offsetOf(e.at(e.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:e=>e.contentWillChange({inputType:"deleteSoftLineForward"})&&jj(e,[e.anchor,e.offsetOf(e.at(e.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:e=>e.contentWillChange({inputType:"deleteHardLineBackward"})&&jj(e,[e.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:e=>e.contentWillChange({inputType:"deleteHardLineForward"})&&jj(e,[e.anchor,-1],"deleteHardLineForward")},{target:"model",audioFeedback:"delete",canUndo:!0,changeContent:!0,changeSelection:!0});var Kj='<svg xmlns="http://www.w3.org/2000/svg" style="width: 21px;"  viewBox="0 0 576 512" role="img" aria-label="'.concat(aA("tooltip.toggle virtual keyboard"),'"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg>'),Vj='<svg xmlns="http://www.w3.org/2000/svg" style="height: 18px;" viewBox="0 0 448 512" role="img" aria-label="'.concat(aA("tooltip.menu"),'"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>'),Uj=class{constructor(e,t){var n,r,i;this.focusBlurInProgress=!1,this.options=Zk(Jk(Zk({},YP()),{macros:KA(),registers:cO()}),JP(t)),this.eventController=new AbortController;let a=this.eventController.signal;t.eventSink&&(this.host=t.eventSink),this.element=e,e.mathfield=this,this.blurred=!0,this.keystrokeCaptionVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.defaultStyle={},this.adoptStyle="left","inline-math"===this.options.defaultMode?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline"),this.dirty=!1;let o=null!=(r=null!=(n=t.value)?n:this.element.textContent)?r:"";o=o.trim();let s=QP(this.options),l=new gO({type:"root",mode:s,body:Pz(o,{context:this.context})});this.model=new Ij(this,s,l),this.undoManager=new mq(this.model);let u=[];if(u.push("<span contenteditable=true aria-multiline=false part=keyboard-sink class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=0></span>"),u.push('<span part=container class=ML__container aria-hidden=true  style="visibility:hidden">'),u.push("<span part=content class=ML__content>"),u.push(hP(this)),u.push("</span>"),window.mathVirtualKeyboard&&(u.push("<div part=virtual-keyboard-toggle class=ML__virtual-keyboard-toggle role=button ".concat(this.hasEditableContent?"":'style="display:none;"',' data-l10n-tooltip="tooltip.toggle virtual keyboard">')),u.push(Kj),u.push("</div>")),u.push('<div part=menu-toggle class=ML__menu-toggle role=button data-l10n-tooltip="tooltip.menu">'),u.push(Vj),u.push("</div>"),u.push("</span>"),u.push("<span class=ML__sr-only>"),u.push("<span role=status aria-live=assertive aria-atomic=true></span>"),u.push("</span>"),this.element.innerHTML=globalThis.MathfieldElement.createHTML(u.join("")),!this.element.children)return void console.error("%cMathLive 0.98.6: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include `runtimeCompiler: true` in your Vue configuration. There may a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");this._l10Subscription=iA.subscribe((()=>iA.update(this.element))),iA.update(this.element),this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",(e=>e.stopImmediatePropagation()),{capture:!1,signal:a}),this.field.addEventListener("wheel",this,{passive:!1,signal:a}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this,{signal:a}):this.field.addEventListener("mousedown",this,{signal:a}),null==(i=this.element.querySelector("[part=virtual-keyboard-toggle]"))||i.addEventListener("click",(()=>{window.mathVirtualKeyboard.visible?window.mathVirtualKeyboard.hide():(window.mathVirtualKeyboard.show({animate:!0}),window.mathVirtualKeyboard.update(iR(this)))}),{signal:a}),this._menu=new MR(Nj(this),{host:this.host}),this.field.addEventListener("contextmenu",this,{signal:a});let c=this.element.querySelector("[part=menu-toggle]");var d;null==c||c.addEventListener("pointerdown",(e=>{if(e.currentTarget!==c||"closed"!==this._menu.state)return;this.element.classList.add("tracking");let t=c.getBoundingClientRect();this._menu.modifiers=OI(e),this._menu.show({target:c,location:{x:t.left,y:t.bottom},onDismiss:()=>this.element.classList.remove("tracking")}),e.preventDefault(),e.stopPropagation()}),{signal:a}),(this.model.atoms.length<=1||this.disabled||this.readOnly&&!this.hasEditableContent||"none"===this.userSelect)&&(c.style.display="none"),this.ariaLiveText=this.element.querySelector("[role=status]"),this.keyboardDelegate=function(e,t,n){let r=null,i=null,a=!1,o=!1,s=!1,l=new AbortController,u=l.signal;return e.addEventListener("keydown",(t=>{a||"Process"===t.key||"CapsLock"===t.code||/(Control|Meta|Alt|Shift)(Left|Right)/.test(t.code)?r=null:(r=t,i=null,n.onKeystroke(t)?e.textContent="":r=null)}),{capture:!0,signal:u}),e.addEventListener("keypress",(e=>{a||(r&&i&&n.onKeystroke(r),i=e)}),{capture:!0,signal:u}),e.addEventListener("compositionstart",(t=>{e.textContent="",a=!0,n.onCompositionStart(t.data)}),{capture:!0,signal:u}),e.addEventListener("compositionupdate",(e=>{a&&n.onCompositionUpdate(e.data)}),{capture:!0,signal:u}),e.addEventListener("compositionend",(t=>{e.textContent="",a&&(a=!1,n.onCompositionEnd(t.data))}),{capture:!0,signal:u}),e.addEventListener("beforeinput",(e=>e.stopImmediatePropagation()),{signal:u}),e.addEventListener("input",(t=>{var r;if(!a&&(e.textContent="","insertCompositionText"!==t.inputType)){if("insertFromPaste"===t.inputType)return t.preventDefault(),void t.stopPropagation();n.onInput(null!=(r=t.data)?r:""),t.preventDefault(),t.stopPropagation()}}),{signal:u}),e.addEventListener("paste",(t=>{e.focus({preventScroll:!0}),e.textContent="",n.onPaste(t)||t.preventDefault(),t.stopImmediatePropagation()}),{signal:u}),e.addEventListener("cut",(e=>n.onCut(e)),{capture:!0,signal:u}),e.addEventListener("copy",(e=>n.onCopy(e)),{capture:!0,signal:u}),e.addEventListener("blur",(a=>{var l,u;if((null==(u=null==(l=a.relatedTarget)?void 0:l._mathfield)?void 0:u.element)===t)return e.focus({preventScroll:!0}),a.preventDefault(),void a.stopPropagation();let c=!1,d=a.relatedTarget;for(;d;){if(d.classList.contains("ML__keyboard")){c=!0;break}d=d.parentElement}if(c)return e.focus({preventScroll:!0}),a.preventDefault(),void a.stopPropagation();let p=qI.state;return"open"===p||"opening"===p||a.relatedTarget===a.target.getRootNode().host?(a.preventDefault(),void a.stopPropagation()):void(s||o||(s=!0,r=null,i=null,n.onBlur(),s=!1))}),{capture:!0,signal:u}),e.addEventListener("focus",(e=>{s||o||(o=!0,n.onFocus(),o=!1)}),{capture:!0,signal:u}),{dispose:()=>l.abort(),cancelComposition:()=>{a&&(e.blur(),requestAnimationFrame((()=>e.focus({preventScroll:!0}))))},blur:()=>{"function"==typeof e.blur&&e.blur()},focus:()=>{!o&&"function"==typeof e.focus&&e.focus({preventScroll:!0})},hasFocus:()=>PI()===e,setAriaLabel:t=>e.setAttribute("aria-label",t),setValue:t=>{var n;e.textContent=t,e.style.left="-1000px",null==(n=window.getSelection())||n.selectAllChildren(e)},moveTo:(t,n)=>{e.style.top="".concat(n,"px"),e.style.left="".concat(t,"px")}}}(this.element.querySelector(".ML__keyboard-sink"),this.element,this),window.addEventListener("resize",this,{signal:a}),document.addEventListener("scroll",this,{signal:a}),this.resizeObserver=new ResizeObserver((()=>pP(this))),this.resizeObserver.observe(this.field),window.mathVirtualKeyboard.addEventListener("virtual-keyboard-toggle",this,{signal:a}),kI&&!iA.locale.startsWith(kI.locale)&&(d=iA.locale,kI=NI.find((e=>d.startsWith(e.locale)))),"ready"!==uP&&document.fonts.ready.then((()=>mP(this))),e.querySelector("[part=container]").style.removeProperty("visibility"),this.undoManager.startRecording(),this.undoManager.snapshot("set-value")}get defaultStyle(){return this._defaultStyle}set defaultStyle(e){this._defaultStyle=e}get effectiveStyle(){if("none"===this.adoptStyle)return this.defaultStyle;let e=this.model.at(this.model.position),t="right"===this.adoptStyle?e.rightSibling:e;if(!t)return this.defaultStyle;if("group"===t.type){let e=t.branch("body");return!e||e.length<2?{}:"right"===this.adoptStyle?e[1].computedStyle:e[e.length-1].computedStyle}return t.computedStyle}connectToVirtualKeyboard(){this.connectedToVirtualKeyboard||(this.connectedToVirtualKeyboard=!0,window.addEventListener("message",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.connect(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(iR(this)),gR(this))}disconnectFromVirtualKeyboard(){this.connectedToVirtualKeyboard&&(window.removeEventListener("message",this),window.mathVirtualKeyboard.disconnect(),this.connectedToVirtualKeyboard=!1,mR())}showMenu(e){var t,n;let r=null!=(n=null!=(t=null==e?void 0:e.location)?t:qO(this.field))?n:void 0,i=null==e?void 0:e.modifiers,a=this.element.querySelector("[part=container]");return this._menu.show({target:a,location:r,modifiers:i})}get colorMap(){return e=>{var t,n,r;return null!=(r=null==(n=(t=this.options).colorMap)?void 0:n.call(t,e))?r:pA(e)}}get backgroundColorMap(){return e=>{var t,n,r,i,a,o;return null!=(o=null!=(a=null==(n=(t=this.options).backgroundColorMap)?void 0:n.call(t,e))?a:null==(i=(r=this.options).colorMap)?void 0:i.call(r,e))?o:hA(e)}}get smartFence(){var e;return null!=(e=this.options.smartFence)&&e}get readOnly(){var e;return null!=(e=this.options.readOnly)&&e}get disabled(){var e,t;return null!=(t=null==(e=this.host)?void 0:e.disabled)&&t}get contentEditable(){return!!this.host&&"false"!==this.host.getAttribute("contenteditable")}get userSelect(){if(!this.host)return"";let e=getComputedStyle(this.host);return e.getPropertyValue("user-select")||e.getPropertyValue("-webkit-user-select")}get hasEditableContent(){return!(this.disabled||!this.contentEditable)&&(!this.readOnly||this.hasEditablePrompts)}get hasEditablePrompts(){return this.readOnly&&!this.disabled&&this.contentEditable&&void 0!==this.model.findAtom((e=>"prompt"===e.type&&!e.locked))}get isSelectionEditable(){if(this.disabled||!this.contentEditable)return!1;if(!this.readOnly)return!0;let e=this.model.at(this.model.anchor),t=this.model.at(this.model.position),n=gO.commonAncestor(e,t);return!!("prompt"===(null==n?void 0:n.type)||null!=n&&n.parentPrompt)}get letterShapeStyle(){var e;return null!=(e=this.options.letterShapeStyle)?e:"tex"}get minFontScale(){return this.options.minFontScale}get selectionStyle(){if(this.model.selectionIsCollapsed)return this.effectiveStyle;let e=this.model.getAtoms(this.model.selection);if(0===e.length)return{};let t=Zk({},e[0].style);for(let n of e)for(let[e,r]of Object.entries(n.style))t[e]!==r&&delete t[e];return t}queryStyle(e){let t=Kq(this,e);"verbatimColor"in t&&delete t.verbatimColor,"verbatimBackgroundColor"in t&&delete t.verbatimBackgroundColor;let n=Object.keys(t).length;if(0===n)return"all";if(n>1){for(let e of Object.keys(t)){let n=this.queryStyle({[e]:t[e]});if("none"===n)return"none";if("some"===n)return"some"}return"all"}let r=Object.keys(t)[0],i=t[r];if(this.model.selectionIsCollapsed)return this.effectiveStyle[r]===i?"all":"none";let a=this.model.getAtoms(this.model.selection,{includeChildren:!0}),o=a.length;if(0===o)return"none";let s=0;for(let l of a)"first"!==l.type?l.style[r]===i&&(s+=1):o-=1;return 0===s?"none":s===o?"all":"some"}get keybindings(){var e,t;if(this._keybindings)return this._keybindings;let[n,r]=function(e,t){let n=[],r=[];for(let a of e)try{let e=UI(a,t);if(!e)continue;let n=r.find((t=>t.key===e.key&&t.ifMode===e.ifMode));if(n)throw new Error("Ambiguous key binding ".concat(a.key," (").concat($I(a.command),") matches ").concat(n.key," (").concat($I(n.command),") with the ").concat(t.displayName," keyboard layout"));r.push(e)}catch(i){i instanceof Error&&n.push(i.message)}return[r,n]}(this.options.keybindings,null!=(e=TI())?e:function(){switch(MI()){case"apple":return wI;case"windows":return _I;case"linux":return SI}return wI}());return(null==(t=TI())?void 0:t.score)>0&&(this._keybindings=n,r.length>0&&console.error("MathLive 0.98.6: Invalid keybindings for current keyboard layout",r)),n}get menu(){return this._menu}setOptions(e){var t;this.options=Zk(Zk({},this.options),JP(e)),this._keybindings=void 0,"inline-math"===this.options.defaultMode?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline");let n=this.options.defaultMode;"inline-math"===n&&(n="math"),(null==(t=this.model.root.firstChild)?void 0:t.mode)!==n&&(this.model.root.firstChild.mode=n),this.options.readOnly&&this.hasFocus()&&window.mathVirtualKeyboard.visible&&this.executeCommand("hideVirtualKeyboard");let r=gO.serialize([this.model.root],{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in e||this.model.getValue()!==r)&&OO.insert(this.model,r,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",silenceNotifications:!0,mode:"math"}),("value"in e||"macros"in e||"registers"in e||"colorMap"in e||"backgroundColorMap"in e||"letterShapeStyle"in e||"minFontScale"in e||"readOnly"in e||"placeholderSymbol"in e)&&pP(this)}getOptions(e){return XP(this.options,e)}getOption(e){return XP(this.options,e)}async handleEvent(e){var t;if(PO(this)){if(DP(e)){if(!$O(e.origin,null!=(t=this.options.originValidator)?t:"none"))throw new DOMException("Message from unknown origin (".concat(e.origin,") cannot be handled"),"SecurityError");let{action:n}=e.data;if("execute-command"===n){let t=e.data.command;if("virtual-keyboard"===bP(t))return;this.executeCommand(t)}else"update-state"===n||("focus"===n?this.focus({preventScroll:!0}):"blur"===n&&this.blur());return}switch(e.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":"none"!==this.userSelect&&Zq(this,e);break;case"pointerdown":"none"!==this.userSelect&&(Zq(this,e),!1===e.shiftKey&&await LR(e,this.element.querySelector("[part=container]"),this._menu)&&Wq.stop());break;case"contextmenu":"none"!==this.userSelect&&!1===e.shiftKey&&await LR(e,this.element.querySelector("[part=container]"),this._menu)&&Wq.stop();break;case"virtual-keyboard-toggle":this.hasFocus()&&gR(this);break;case"resize":case"scroll":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame((()=>PO(this)&&this.onGeometryChange()));break;case"wheel":this.onWheel(e);break;case"message":break;default:console.warn("Unexpected event type",e.type)}}}dispose(){if(!PO(this))return;iA.unsubscribe(this._l10Subscription),this.keyboardDelegate.dispose(),this.keyboardDelegate=void 0,this.eventController.abort(),this.eventController=void 0,this.resizeObserver.disconnect(),window.mathVirtualKeyboard.removeEventListener("virtual-keyboard-toggle",this),this.disconnectFromVirtualKeyboard(),this.model.dispose(),delete this.element.mathfield,this.element=void 0,this.host=void 0,this.field=void 0,this.ariaLiveText=void 0,document.getElementById("mathlive-keystroke-caption-panel")&&(QI("mathlive-keystroke-caption-panel"),YO("core"),YO("keystroke-caption")),document.getElementById("mathlive-suggestion-popover")&&(QI("mathlive-suggestion-popover"),YO("suggestion-popover"),YO("core")),document.getElementById("mathlive-environment-popover")&&(QI("mathlive-environment-popover"),YO("environment-popover"),YO("core"))}flushInlineShortcutBuffer(e){if(null!=e||(e={defer:!1}),!e.defer)return this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),void(this.inlineShortcutBufferFlushTimer=0);this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout((()=>this.flushInlineShortcutBuffer()),this.options.inlineShortcutTimeout))}executeCommand(e){return"virtual-keyboard"===bP(e)?(this.focus({preventScroll:!0}),window.mathVirtualKeyboard.executeCommand(e),requestAnimationFrame((()=>window.mathVirtualKeyboard.update(iR(this)))),!1):function(e,t){var n;if(!t)return!1;let r,i=[],a=!1,o=!1;Qk(t)?(r=t[0],i=t.slice(1)):r=t,r=r.replace(/-\w/g,(e=>e[1].toUpperCase()));let s=gP[r],l=null==s?void 0:s.target;if("model"===l){if(!e.isSelectionEditable&&null!=s&&s.changeContent)return e.model.announce("plonk"),!1;/^(delete|add)/.test(r)&&("deleteBackward"!==r&&e.flushInlineShortcutBuffer(),e.snapshot(r)),/^complete/.test(r)||GI(e),gP[r].fn(e.model,...i),ZI(e),o=!0,a=!0}else if("virtual-keyboard"===l)o=null!=(n=window.mathVirtualKeyboard.executeCommand(t))&&n,a=!0;else{if(!gP[r])throw new Error('Unknown command "'.concat(r,'"'));if(!e.isSelectionEditable&&null!=s&&s.changeContent)return e.model.announce("plonk"),!1;/^(undo|redo)/.test(r)&&e.flushInlineShortcutBuffer(),o=gP[r].fn(e,...i),a=!0}return"virtual-keyboard"!==l&&(!e.model.selectionIsCollapsed||null!=s&&s.changeSelection&&"deleteBackward"!==t)&&(e.flushInlineShortcutBuffer(),null!=s&&s.changeContent||e.stopCoalescingUndo(),e.defaultStyle={}),o&&pP(e),a}(this,e)}get errors(){return qz(this.model.getValue(),{context:this.context})}getValue(e,t,n){return this.model.getValue(e,t,n)}setValue(e,t){var n;void 0===(t=null!=t?t:{mode:"math"}).insertionMode&&(t.insertionMode="replaceAll"),(void 0===t.format||"auto"===t.format)&&(t.format="latex"),(void 0===t.mode||"auto"===t.mode)&&(t.mode=null!=(n=function(e,t){let n,r=e.at(t);if(r){n=r.mode;let e=r.parent;for(;!n&&e;)e&&(n=e.mode),e=e.parent}return n}(this.model,this.model.position))?n:"math");let r=this.undoManager.canUndo();OO.insert(this.model,e,t)&&(pP(this),r||this.undoManager.reset(),this.undoManager.snapshot("set-value"))}get expression(){let e=globalThis.MathfieldElement.computeEngine;return e?e.box(e.parse(this.model.getValue("latex-unstyled"))):(console.error("MathLive 0.98.6:  no compute engine available. Make sure the Compute Engine library is loaded."),null)}scrollIntoView(){var e;if(!this.element)return;if(this.host)if(this.options.onScrollIntoView)this.options.onScrollIntoView(this);else if(this.host.scrollIntoView({block:"nearest",inline:"nearest"}),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.container===window.document.body){let t=window.mathVirtualKeyboard.boundingRect,n=this.host.getBoundingClientRect();n.bottom>t.top&&(null==(e=window.document.scrollingElement)||e.scrollBy(0,n.bottom-t.top+8))}this.dirty&&fP(this,{interactive:!0});let t=this.field.getBoundingClientRect(),n=null;if(this.model.selectionIsCollapsed)n=qO(this.field);else{let e=UO(this);if(e.length>0){let r=-1/0,i=-1/0;for(let t of e)t.right>r&&(r=t.right),t.top<i&&(i=t.top);n={x:r+t.left-this.field.scrollLeft,y:i+t.top-this.field.scrollTop,height:0}}}if(this.host&&n){let e=this.host.getBoundingClientRect(),t=n.y,r=this.host.scrollTop;t<e.top?r=t-e.top+this.host.scrollTop:t>e.bottom&&(r=t-e.bottom+this.host.scrollTop+n.height),this.host.scroll({top:r,left:0})}if(n){let e=n.x-window.scrollX,r=this.field.scrollLeft;e<t.left?r=e-t.left+this.field.scrollLeft-20:e>t.right&&(r=e-t.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:r})}}insert(e,t){return!("string"!=typeof e||0===e.length&&("insertBefore"===(null==t?void 0:t.insertionMode)||"insertAfter"===(null==t?void 0:t.insertionMode))||0===e.length&&this.model.selectionIsCollapsed)&&(this.flushInlineShortcutBuffer(),(t=null!=t?t:{mode:"math"}).focus&&this.focus(),t.feedback&&(globalThis.MathfieldElement.keypressVibration&&tA()&&navigator.vibrate(3),globalThis.MathfieldElement.playSound("keypress")),"\\\\"===e?uq(this.model):"&"===e?cq(this.model):this.model.selectionIsCollapsed?OO.insert(this.model,e,Zk({style:this.model.at(this.model.position).computedStyle},t)):OO.insert(this.model,e,t),this.snapshot("insert-".concat(this.model.at(this.model.position).type)),pP(this),t.scrollIntoView&&this.scrollIntoView(),!0)}switchMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var r;if(this.model.mode===e||!this.hasEditableContent||!this.contentEditable||this.disabled)return;let i=this.model.mode;if(this.model.mode=e,null==(r=this.host)||!r.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0})))return void(this.model.mode=i);let a=this.model.mode,{model:o}=this;o.deferNotifications({content:!!n||!!t,selection:!0,type:"insertText"},(()=>{let r=!1;if(this.flushInlineShortcutBuffer(),this.stopCoalescingUndo(),t&&"latex"!==e){let n=Pz(t,{context:this.context,parseMode:e});o.collapseSelection("forward");let i=o.at(o.position);o.position=o.offsetOf(i.parent.addChildrenAfter(n,i)),r=!0}if(this.model.mode=e,"latex"===e){let e=o.selectionIsCollapsed;XI(this,"accept");let n,r=o.at(o.position);if(e)n="\\";else{let i=DO(o.selection);n=this.model.getValue(i,"latex");let a=this.model.extractAtoms(i);1===a.length&&"placeholder"===a[0].type&&(n=t,e=!0),r=o.at(i[0])}let i=new Xz(n);r.parent.addChildAfter(i,r),e?o.position=o.offsetOf(i.lastChild):o.setSelection(o.offsetOf(i.firstChild),o.offsetOf(i.lastChild))}else HI(o).forEach((e=>{e.isError=!1}));if(n){let e=Pz(n,{context:this.context,parseMode:a});o.collapseSelection("forward");let t=o.at(o.position);o.position=o.offsetOf(t.parent.addChildrenAfter(e,t)),r=!0}return pP(this),this.undoManager.snapshot("latex"===e?"insert-latex":"insert"),r})),this.model.mode=e,window.mathVirtualKeyboard.update(iR(this))}hasFocus(){return!this.blurred}focus(e){var t;this.hasFocus()||(this.keyboardDelegate.focus(),this.connectToVirtualKeyboard(),this.onFocus(),this.model.announce("line")),null!=(t=null==e?void 0:e.preventScroll)&&t||this.scrollIntoView()}blur(){this.disconnectFromVirtualKeyboard(),this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]},this.focus()}applyStyle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;let i={operation:"set",silenceNotifications:!1};_O(t)?i.range=t:("toggle"===t.operation&&(i.operation="toggle"),i.range=t.range,i.silenceNotifications=null!=(n=t.silenceNotifications)&&n);let a=Kq(this,e),o=null!=(r=i.operation)?r:"set";if(void 0===i.range&&this.model.selectionIsCollapsed){if("set"===o)return void(this.defaultStyle=Zk(Zk({},this.defaultStyle),a));let e=Zk({},this.defaultStyle);for(let t of Object.keys(a))e[t]===a[t]?("color"===t&&delete e.verbatimColor,"backgroundColor"===t&&delete e.verbatimBackgroundColor,delete e[t]):e[t]=a[t];this.defaultStyle=e}else this.model.deferNotifications({content:!i.silenceNotifications,type:"insertText"},(()=>{if(void 0===i.range)for(let e of this.model.selection.ranges)tq(this.model,e,a,{operation:o});else tq(this.model,i.range,a,{operation:o})})),pP(this)}toggleContextMenu(){var e;return!!this._menu.visible&&("open"===this._menu.state?(this._menu.hide(),!0):(this._menu.show({target:this.element.querySelector("[part=container]"),location:null!=(e=this.getCaretPoint())?e:void 0,onDismiss:()=>{var e;return null==(e=this.element)?void 0:e.focus()}}),!0))}getCaretPoint(){let e=qO(this.field);return e?{x:e.x,y:e.y}:null}setCaretPoint(e,t){let n=Qq(this,e,t,{bias:0});if(n<0)return!1;let r=this.model.position;return this.model.position=n,this.model.announce("move",r),pP(this),!0}getPrompt(e){return this.model.findAtom((t=>"prompt"===t.type&&t.placeholderId===e))}getPromptValue(e,t){let n=this.getPrompt(e);if(!n)return"";let r=this.model.offsetOf(n.firstChild),i=this.model.offsetOf(n.lastChild);return this.model.getValue(r,i,t)}getPrompts(e){return this.model.getAllAtoms().filter((t=>"prompt"===t.type&&(!e||!(e.id&&t.placeholderId!==e.id||e.locked&&t.locked!==e.locked||"undefined"===e.correctness&&t.correctness||e.correctness&&t.correctness!==e.correctness)))).map((e=>e.placeholderId))}setPromptValue(e,t,n){if(void 0!==t){let r=this.getPrompt(e);if(!r)return void console.error("MathLive 0.98.6: unknown prompt ".concat(e));let i=this.model.getBranchRange(this.model.offsetOf(r),"body");this.model.setSelection(i),this.insert(t,Jk(Zk({},n),{insertionMode:"replaceSelection"}))}null!=n&&n.silenceNotifications&&(this.valueOnFocus=this.getValue()),pP(this)}setPromptState(e,t,n){let r=this.getPrompt(e);r?("undefined"===t?r.correctness=void 0:"string"==typeof t&&(r.correctness=t),"boolean"==typeof n&&(r.locked=n,r.captureSelection=n),pP(this)):console.error("MathLive 0.98.6: unknown prompt ".concat(e))}getPromptState(e){let t=this.getPrompt(e);return t?[t.correctness,t.locked]:(console.error("MathLive 0.98.6: unknown prompt ".concat(e)),[void 0,!0])}getPromptRange(e){let t=this.getPrompt(e);return t?this.model.getBranchRange(this.model.offsetOf(t),"body"):(console.error("MathLive 0.98.6: unknown prompt ".concat(e)),[0,0])}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop()}snapshot(e){var t;this.undoManager.snapshot(e)&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(iR(this)),null==(t=this.host)||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}stopCoalescingUndo(){this.undoManager.stopCoalescing(this.model.selection)}stopRecording(){this.undoManager.stopRecording()}startRecording(){this.undoManager.startRecording()}undo(){var e;this.undoManager.undo()&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(iR(this)),null==(e=this.host)||e.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var e;this.undoManager.redo()&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(iR(this)),null==(e=this.host)||e.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}resetUndo(){var e;null==(e=this.undoManager)||e.reset()}onSelectionDidChange(){var e,t;let n=this.model;this.keyboardDelegate.setValue(n.getValue(this.model.selection,"latex-expanded"));{let t=n.at(n.position),r=null!=(e=t.mode)?e:QP(this.options);this.model.mode!==r&&("latex"===this.model.mode?(XI(this,"accept",{mode:r}),n.position=n.offsetOf(t)):this.switchMode(r))}null==(t=this.host)||t.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0})),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(iR(this)),gR(this)}onContentWillChange(e){var t,n,r;return null==(r=null==(n=this.host)?void 0:n.dispatchEvent(new InputEvent("beforeinput",Jk(Zk({},e),{data:e.data?e.data:null!=(t=e.inputType)?t:"",cancelable:!0,bubbles:!0,composed:!0}))))||r}onFocus(){this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.keyboardDelegate.focus(),this.stopCoalescingUndo(),fP(this,{interactive:!0}),this.valueOnFocus=this.model.getValue(),this.hasEditablePrompts&&!this.model.at(this.model.anchor).parentPrompt&&this.executeCommand("moveToNextPlaceholder"),this.focusBlurInProgress=!1)}onBlur(){var e,t,n;if(this.focusBlurInProgress||this.blurred)return;this.focusBlurInProgress=!0,this.stopCoalescingUndo(),this.blurred=!0,this.ariaLiveText.textContent="",rP(this),this.model.getValue()!==this.valueOnFocus&&(null==(e=this.host)||e.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),this.disconnectFromVirtualKeyboard(),null==(t=this.host)||t.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),null==(n=this.host)||n.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),pP(this),this.focusBlurInProgress=!1,mR();let r=new AbortController,i=r.signal;document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&document.addEventListener("visibilitychange",(()=>{PO(this)&&"visible"===document.visibilityState&&this.focus({preventScroll:!0})}),{once:!0,signal:i})}),{once:!0,signal:i}),setTimeout((()=>r.abort()),100)}onInput(e){zq(this,e)}onKeystroke(e){return Oq(this,e)}onCompositionStart(e){this.model.deleteAtoms(DO(this.model.selection));let t=qO(this.field);t&&requestAnimationFrame((()=>{fP(this),this.keyboardDelegate.moveTo(t.x,t.y-t.height)}))}onCompositionUpdate(e){(function(e,t){let n=e.at(e.position);if("composition"===n.type)n.value=t;else{let{caret:r}=n;n.caret=void 0;let i=new kz(t,{mode:n.mode});i.caret=r,n.parent.addChildAfter(i,n),e.position+=1}})(this.model,e),pP(this)}onCompositionEnd(e){(function(e){let t=e.at(e.position);"composition"===t.type&&(t.parent.removeChild(t),e.position-=1)})(this.model),zq(this,e,{simulateKeystroke:!0})}onCut(e){this.isSelectionEditable?this.model.contentWillChange({inputType:"deleteByCut"})&&(this.stopCoalescingUndo(),OO.onCopy(this,e),jj(this.model,DO(this.model.selection),"deleteByCut"),this.snapshot("cut"),pP(this)):this.model.announce("plonk")}onCopy(e){OO.onCopy(this,e)}onPaste(e){let t=this.isSelectionEditable;return t&&(t=OO.onPaste(this.model.at(this.model.position).mode,this,e.clipboardData)),t||this.model.announce("plonk"),e.preventDefault(),e.stopPropagation(),t}onGeometryChange(){this._menu.hide(),nP(this),gR(this)}onWheel(e){let t=5*e.deltaX;if(!Number.isFinite(t)||0===t)return;let n=this.field;t<0&&0===n.scrollLeft||t>0&&n.offsetWidth+n.scrollLeft>=n.scrollWidth||(n.scrollBy({top:0,left:t}),e.preventDefault(),e.stopPropagation())}getHTMLElement(e){let t=e;for(;!t.id&&t.hasChildren;)t=e.children[0];return this.field.querySelector('[data-atom-id="'.concat(t.id,'"]'))}get context(){var e,t;return{registers:null!=(e=this.options.registers)?e:{},smartFence:this.smartFence,letterShapeStyle:this.letterShapeStyle,minFontScale:this.minFontScale,placeholderSymbol:null!=(t=this.options.placeholderSymbol)?t:"\u25a2",colorMap:e=>this.colorMap(e),backgroundColorMap:e=>this.backgroundColorMap(e),getMacro:e=>HA(e,this.options.macros),atomIdsSettings:{seed:"random",groupNumbers:!1}}}};function $j(e){if(e&&(e.classList.remove("ML__highlight"),e.children))for(let t of e.children)$j(t)}function Hj(e,t){var n;e&&(t&&(null==(n=e.dataset)?void 0:n.atomId)!==t?(e.classList.remove("ML__highlight"),e.children&&e.children.length>0&&[...e.children].forEach((e=>{e instanceof HTMLElement&&Hj(e,t)}))):(e.classList.add("ML__highlight"),e.children&&e.children.length>0&&[...e.children].forEach((e=>{e instanceof HTMLElement&&Hj(e)}))))}eA()||console.error('MathLive 0.98.6: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var Wj=new WeakMap,Gj={letterShapeStyle:"mf.letterShapeStyle = ...",horizontalSpacingScale:'Removed. Use `"thinmuskip"`, `"medmuskip"`, and `"thickmuskip"` registers ',macros:"mf.macros = ...",registers:"mf.registers = ...",backgroundColorMap:"mf.backgroundColorMap = ...",colorMap:"mf.colorMap = ...",enablePopover:"mf.popoverPolicy = ...",mathModeSpace:"mf.mathModeSpace = ...",placeholderSymbol:"mf.placeholderSymbol = ...",readOnly:"mf.readOnly = ...",removeExtraneousParentheses:"mf.removeExtraneousParentheses = ...",scriptDepth:"mf.scriptDepth = ...",smartFence:"mf.smartFence = ...",smartMode:"mf.smartMode = ...",smartSuperscript:"mf.smartSuperscript = ...",inlineShortcutTimeout:"mf.inlineShortcutTimeout = ...",inlineShortcuts:"mf.inlineShortcuts = ...",keybindings:"mf.keybindings = ...",virtualKeyboardMode:"mf.mathVirtualKeyboardPolicy = ...",customVirtualKeyboardLayers:"mathVirtualKeyboard.layers = ...",customVirtualKeyboards:"mathVirtualKeyboard.layouts = ...",keypressSound:"mathVirtualKeyboard.keypressSound = ...",keypressVibration:"mathVirtualKeyboard.keypressVibration = ...",plonkSound:"mathVirtualKeyboard.plonkSound = ...",virtualKeyboardContainer:"mathVirtualKeyboard.container = ...",virtualKeyboardLayout:"mathVirtualKeyboard.alphabeticLayout = ...",virtualKeyboardTheme:"No longer supported",virtualKeyboardToggleGlyph:"No longer supported",virtualKeyboardToolbar:"mathVirtualKeyboard.editToolbar = ...",virtualKeyboards:"Use `mathVirtualKeyboard.layouts`",speechEngine:"`MathfieldElement.speechEngine`",speechEngineRate:"`MathfieldElement.speechEngineRate`",speechEngineVoice:"`MathfieldElement.speechEngineVoice`",textToSpeechMarkup:"`MathfieldElement.textToSpeechMarkup`",textToSpeechRules:"`MathfieldElement.textToSpeechRules`",textToSpeechRulesOptions:"`MathfieldElement.textToSpeechRulesOptions`",readAloudHook:"`MathfieldElement.readAloudHook`",speakHook:"`MathfieldElement.speakHook`",computeEngine:"`MathfieldElement.computeEngine`",fontsDirectory:"`MathfieldElement.fontsDirectory`",soundsDirectory:"`MathfieldElement.soundsDirectory`",createHTML:"`MathfieldElement.createHTML`",onExport:"`MathfieldElement.onExport`",onInlineShortcut:"`MathfieldElement.onInlineShortcut`",onScrollIntoView:"`MathfieldElement.onScrollIntoView`",locale:"MathfieldElement.locale = ...",strings:"MathfieldElement.strings = ...",decimalSeparator:"MathfieldElement.decimalSeparator = ...",fractionNavigationOrder:"MathfieldElement.fractionNavigationOrder = ..."},Zj=class e extends HTMLElement{constructor(e){if(super(),this._observer=null,e){let t=[];for(let n of Object.keys(e))if(Gj[n])if(Gj[n].startsWith("mf."))if(Gj[n].startsWith("mf.".concat(n)))t.push("Option `".concat(n,"` cannot be used as a constructor option. Use ").concat(Gj[n]));else{let e=Gj[n].match(/([a-zA-Z]+) =/);t.push("Option `".concat(n,"` has been renamed `").concat(e[1],"`"))}else t.push("Option `".concat(n,"` cannot be used as a constructor option. Use ").concat(Gj[n]));if(t.length>0){console.group("%cMathLive 0.98.6: %cInvalid Options","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn("Some of the options passed to `new MathfieldElement(...)` are invalid. \n          See https://cortexjs.io/mathlive/changelog/ for details.");for(let e of t)console.warn(e);console.groupEnd()}}if(Qj()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open",delegatesFocus:!0}),this.shadowRoot&&"adoptedStyleSheets"in this.shadowRoot){this.shadowRoot.adoptedStyleSheets=[JO("core"),JO("mathfield"),JO("mathfield-element"),JO("ui"),JO("menu")],this.shadowRoot.appendChild(document.createElement("span"));let e=document.createElement("slot");e.style.display="none",this.shadowRoot.appendChild(e)}else this.shadowRoot.innerHTML="<style>"+ZO("core")+ZO("mathfield")+ZO("mathfield-element")+ZO("ui")+ZO("menu")+'</style><span></span><slot style="display:none"></slot>';e&&this._setOptions(e)}static get formAssociated(){return Qj()}static get optionsAttributes(){return{"default-mode":"string","letter-shape-style":"string","min-font-scale":"number","popover-policy":"string","math-mode-space":"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","inline-shortcut-timeout":"string","script-depth":"string",placeholder:"string","virtual-keyboard-target-origin":"string","math-virtual-keyboard-policy":"string"}}static get observedAttributes(){return[...Object.keys(this.optionsAttributes),"contenteditable","disabled","readonly","read-only"]}static get fontsDirectory(){return this._fontsDirectory}static set fontsDirectory(e){e!==this._fontsDirectory&&(this._fontsDirectory=e,async function(){uP="not-loaded",cP()}())}get fontsDirectory(){throw new Error("Use MathfieldElement.fontsDirectory instead")}set fontsDirectory(e){throw new Error("Use MathfieldElement.fontsDirectory instead")}static get soundsDirectory(){return this._soundsDirectory}static set soundsDirectory(e){this._soundsDirectory=e,this.audioBuffers={}}get soundsDirectory(){throw new Error("Use MathfieldElement.soundsDirectory instead")}set soundsDirectory(e){throw new Error("Use MathfieldElement.soundsDirectory instead")}static get keypressSound(){return this._keypressSound}static set keypressSound(e){var t,n,r;this.audioBuffers={},null===e?this._keypressSound={spacebar:null,return:null,delete:null,default:null}:"string"==typeof e?this._keypressSound={spacebar:e,return:e,delete:e,default:e}:"object"==typeof e&&"default"in e&&(this._keypressSound={spacebar:null!=(t=e.spacebar)?t:e.default,return:null!=(n=e.return)?n:e.default,delete:null!=(r=e.delete)?r:e.default,default:e.default})}static get plonkSound(){return this._plonkSound}static set plonkSound(e){this.audioBuffers={},this._plonkSound=e}static get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}static get speechEngine(){return this._speechEngine}static set speechEngine(e){this._speechEngine=e}static get speechEngineRate(){return this._speechEngineRate}static set speechEngineRate(e){this._speechEngineRate=e}static get speechEngineVoice(){return this._speechEngineVoice}static set speechEngineVoice(e){this._speechEngineVoice=e}static get textToSpeechMarkup(){return this._textToSpeechMarkup}static set textToSpeechMarkup(e){this._textToSpeechMarkup=e}static get textToSpeechRules(){return this._textToSpeechRules}static set textToSpeechRules(e){this._textToSpeechRules=e}static get textToSpeechRulesOptions(){return this._textToSpeechRulesOptions}static set textToSpeechRulesOptions(e){this._textToSpeechRulesOptions=e}static get locale(){return iA.locale}static set locale(e){"auto"===e&&(e=navigator.language.slice(0,5)),iA.locale=e}get locale(){throw new Error("Use MathfieldElement.locale instead")}set locale(e){throw new Error("Use MathfieldElement.locale instead")}static get strings(){return iA.strings}static set strings(e){iA.merge(e)}get strings(){throw new Error("Use MathfieldElement.strings instead")}set strings(e){throw new Error("Use MathfieldElement.strings instead")}static get decimalSeparator(){return this._decimalSeparator}static set decimalSeparator(e){this._decimalSeparator=e,this._computeEngine&&(this._computeEngine.latexOptions.decimalMarker=","===this.decimalSeparator?"{,}":".")}get decimalSeparator(){throw new Error("Use MathfieldElement.decimalSeparator instead")}set decimalSeparator(e){throw new Error("Use MathfieldElement.decimalSeparator instead")}static get computeEngine(){var e,t;if(void 0===this._computeEngine){let t=null==(e=window[Symbol.for("io.cortexjs.compute-engine")])?void 0:e.ComputeEngine;if(!t)return null;this._computeEngine=new t,this._computeEngine&&","===this.decimalSeparator&&(this._computeEngine.latexOptions.decimalMarker="{,}")}return null!=(t=this._computeEngine)?t:null}static set computeEngine(e){this._computeEngine=e}get computeEngine(){throw new Error("Use MathfieldElement.computeEngine instead")}set computeEngine(e){throw new Error("Use MathfieldElement.computeEngine instead")}static get isFunction(){return"function"!=typeof this._isFunction?()=>!1:this._isFunction}static set isFunction(e){this._isFunction=e}static async loadSound(e){delete this.audioBuffers[e];let t="";switch(e){case"keypress":t=this._keypressSound.default;break;case"return":t=this._keypressSound.return;break;case"spacebar":t=this._keypressSound.spacebar;break;case"delete":t=this._keypressSound.delete;break;case"plonk":t=this.plonkSound}if("string"!=typeof t)return;t=t.trim();let n=this.soundsDirectory;if(null!=n&&"null"!==n&&"none"!==t&&"null"!==t)try{let r=await(await fetch(await lP("".concat(n,"/").concat(t)))).arrayBuffer(),i=await this.audioContext.decodeAudioData(r);this.audioBuffers[e]=i}catch(r){}}static async playSound(e){if(("suspended"===this.audioContext.state||"interrupted"===this.audioContext.state)&&await this.audioContext.resume(),this.audioBuffers[e]||await this.loadSound(e),!this.audioBuffers[e])return;let t=this.audioContext.createBufferSource();t.buffer=this.audioBuffers[e];let n=this.audioContext.createGain();n.gain.value=.5,t.connect(n).connect(this.audioContext.destination),t.start()}showMenu(e){var t,n;return null!=(n=null==(t=this._mathfield)?void 0:t.showMenu(e))&&n}get mathVirtualKeyboard(){throw new Error("The `mathVirtualKeyboard` property is not available on the MathfieldElement. Use `window.mathVirtualKeyboard` instead.")}onPointerDown(){window.addEventListener("pointerup",(e=>{var t;e.target===this&&(null==(t=this._mathfield)||!t.disabled)&&this.dispatchEvent(new MouseEvent("click",{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,movementX:e.movementX,movementY:e.movementY,relatedTarget:e.relatedTarget,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey}))}),{once:!0})}getPromptValue(e,t){var n,r;return null!=(r=null==(n=this._mathfield)?void 0:n.getPromptValue(e,t))?r:""}setPromptValue(e,t,n){var r;null==(r=this._mathfield)||r.setPromptValue(e,t,n)}getPromptRange(e){var t,n;return null!=(n=null==(t=this._mathfield)?void 0:t.getPromptRange(e))?n:null}getPrompts(e){var t,n;return null!=(n=null==(t=this._mathfield)?void 0:t.getPrompts(e))?n:[]}get form(){var e;return null==(e=this._internals)?void 0:e.form}get name(){var e;return null!=(e=this.getAttribute("name"))?e:""}get type(){return this.localName}get mode(){var e,t;return null!=(t=null==(e=this._mathfield)?void 0:e.model.mode)?t:"text"===this.defaultMode?"text":"math"}set mode(e){var t;null==(t=this._mathfield)||t.switchMode(e)}get expression(){if(this._mathfield)return window[Symbol.for("io.cortexjs.compute-engine")]?this._mathfield.expression:(console.error('MathLive 0.98.6: The CortexJS Compute Engine library is not available.\n        \n        Load the library, for example with:\n        \n        import "https://unpkg.com/@cortex-js/compute-engine?module"'),null)}set expression(t){var n,r;if(!this._mathfield)return;let i=null!=(r=null==(n=e.computeEngine)?void 0:n.box(t).latex)?r:null;null!==i&&this._mathfield.setValue(i),window[Symbol.for("io.cortexjs.compute-engine")]||console.error('MathLive 0.98.6: The CortexJS Compute Engine library is not available.\n        \n        Load the library, for example with:\n        \n        import "https://unpkg.com/@cortex-js/compute-engine?module"')}get errors(){var e,t;return null!=(t=null==(e=this._mathfield)?void 0:e.errors)?t:[]}_getOptions(e){return this._mathfield?XP(this._mathfield.options,e):Wj.has(this)?Zk({},XP(Zk(Zk({},YP()),JP(Wj.get(this).options)),e)):null}getOptions(e){return console.warn("%cMathLive 0.98.6: %cDeprecated Usage%c\n      `mf.getOptions()` is deprecated. Read the property directly on the mathfield instead.\n      See https://cortexjs.io/mathlive/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._mathfield?XP(this._mathfield.options,e):Wj.has(this)?XP(Zk(Zk({},YP()),JP(Wj.get(this).options)),e):null}reflectAttributes(){let t=YP(),n=this._getOptions();Object.keys(e.optionsAttributes).forEach((r=>{let i=Xj(r);"on/off"===e.optionsAttributes[r]?t[i]!==n[i]?this.setAttribute(r,n[i]?"on":"off"):this.removeAttribute(r):t[i]!==n[i]&&("boolean"===e.optionsAttributes[r]?n[i]?this.setAttribute(r,""):this.removeAttribute(r):("string"==typeof n[i]||"number"==typeof n[i])&&this.setAttribute(r,n[i].toString()))}))}getOption(e){return console.warn("%cMathLive 0.98.6: %cDeprecated Usage%c\n      `mf.getOption()` is deprecated. Read the property directly on the mathfield instead.\n      See https://cortexjs.io/mathlive/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._getOptions([e])[e]}_getOption(e){return this._getOptions([e])[e]}_setOptions(e){if(this._mathfield)this._mathfield.setOptions(e);else if(Wj.has(this)){let t=Zk(Zk({},Wj.get(this).options),e);Wj.set(this,Jk(Zk({},Wj.get(this)),{selection:{ranges:t.readOnly?[[0,0]]:[[0,-1]]},options:t}))}else Wj.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:e,menuItems:void 0});this.reflectAttributes()}setOptions(e){console.group("%cMathLive 0.98.6: %cDeprecated Usage","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn(" `mf.setOptions()` is deprecated. Set the property directly on the mathfield instead.\n      See https://cortexjs.io/mathlive/changelog/ for details.");for(let t of Object.keys(e))Gj[t]&&console.warn("`mf.setOptions({".concat(t,":...})` -> ").concat(Gj[t]));console.groupEnd(),this._setOptions(e)}executeCommand(e){var t,n;return null!=(n=null==(t=this._mathfield)?void 0:t.executeCommand(e))&&n}getValue(e,t,n){var r,i;if(this._mathfield)return this._mathfield.model.getValue(e,t,n);if(Wj.has(this)){let a,o,s;if(SO(e)?([a,o]=e.ranges[0],s=t):_O(e)?([a,o]=e,s=t):wO(e)&&wO(t)?(a=e,o=t,s=n):(a=0,o=-1,s=e),(void 0===s||"latex"===s)&&0===a&&-1===o)return null!=(i=null!=(r=Wj.get(this).value)?r:this.textContent)?i:""}return""}setValue(e,t){if(this._mathfield&&void 0!==e)return null!=t||(t={silenceNotifications:!0,mode:"math"}),void this._mathfield.setValue(e,t);if(Wj.has(this)){let t=Wj.get(this).options;return void Wj.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:t,menuItems:void 0})}let n=Yj(this);Wj.set(this,{value:e,selection:{ranges:[[-1,-1]],direction:"forward"},options:n,menuItems:void 0})}hasFocus(){var e,t;return null!=(t=null==(e=this._mathfield)?void 0:e.hasFocus())&&t}focus(){var e;null==(e=this._mathfield)||e.focus()}blur(){var e;null==(e=this._mathfield)||e.blur()}select(){var e;null==(e=this._mathfield)||e.select()}insert(e,t){var n,r;return null!=(r=null==(n=this._mathfield)?void 0:n.insert(e,t))&&r}applyStyle(e,t){var n;return null==(n=this._mathfield)?void 0:n.applyStyle(e,t)}queryStyle(e){var t,n;return null!=(n=null==(t=this._mathfield)?void 0:t.queryStyle(e))?n:"none"}get caretPoint(){var e,t;return null!=(t=null==(e=this._mathfield)?void 0:e.getCaretPoint())?t:null}set caretPoint(e){var t;e&&(null==(t=this._mathfield)||t.setCaretPoint(e.x,e.y))}setCaretPoint(e,t){var n,r;return null!=(r=null==(n=this._mathfield)?void 0:n.setCaretPoint(e,t))&&r}offsetFromPoint(e,t,n){return this._mathfield?Qq(this._mathfield,e,t,n):-1}hitboxFromOffset(e){if(!this._mathfield)return null;let t=this._mathfield.model.at(e);if(!t)return null;let n=VO(this._mathfield,t);return n?new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top):null}resetUndo(){var e;null==(e=this._mathfield)||e.resetUndo()}canUndo(){return!!this._mathfield&&this._mathfield.canUndo()}canRedo(){return!!this._mathfield&&this._mathfield.canRedo()}handleEvent(e){var t,n,r,i,a;"closed"===qI.state&&"closed"===(null==(n=null==(t=this._mathfield)?void 0:t.menu)?void 0:n.state)&&("pointerdown"===e.type&&this.onPointerDown(),"focus"===e.type&&(null==(r=this._mathfield)||r.focus()),"blur"===e.type&&"closed"===(null==(i=qI.scrim)?void 0:i.state)&&(null==(a=this._mathfield)||a.blur()))}connectedCallback(){var t,n,r,i;let a=window.getComputedStyle(this),o=this.shadowRoot,s=o.host,l="none"!==a.userSelect;if(l)s.addEventListener("pointerdown",this,!0);else{o.querySelector("span").style.pointerEvents="none"}s.addEventListener("focus",this,!0),s.addEventListener("blur",this,!0),this._observer=new MutationObserver((()=>{var e;this.value=null!=(e=this.textContent)?e:""})),this._observer.observe(this,{childList:!0,characterData:!0,subtree:!0}),Qj()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),l&&!this.hasAttribute("contenteditable")&&this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let u=o.querySelector("slot:not([name])");if(u)try{this._style=u.assignedElements().filter((e=>"style"===e.tagName.toLowerCase())).map((e=>e.textContent)).join("")}catch(Pt){console.error(Pt)}if(this._style){let e=document.createElement("style");e.textContent=this._style,o.appendChild(e)}let c="";if(c=this.hasAttribute("value")?this.getAttribute("value"):null!=(t=null==u?void 0:u.assignedNodes().map((e=>3===e.nodeType?e.textContent:"")).join("").trim())?t:"",this._mathfield=new Uj(o.querySelector(":host > span"),Jk(Zk({},null!=(r=null==(n=Wj.get(this))?void 0:n.options)?r:Yj(this)),{eventSink:this,value:c})),!Wj.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let t of Object.keys(e.optionsAttributes))this.upgradeProperty(Xj(t))}if(null!=(i=this._mathfield)&&i.model){if(Wj.has(this)){let e=this._mathfield,t=Wj.get(this),n=t.menuItems;e.model.deferNotifications({content:!1,selection:!1},(()=>{let n=t.value;void 0!==n&&e.setValue(n),e.model.selection=t.selection,Wj.delete(this)})),n&&(this.menuItems=n)}window.queueMicrotask((()=>{this.isConnected&&this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))})),cP()}else this._mathfield=null}disconnectedCallback(){var t,n,r;if(this.shadowRoot.host.removeEventListener("pointerdown",this,!0),!this._mathfield)return;null==(t=this._observer)||t.disconnect(),this._observer=null,window.queueMicrotask((()=>this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0}))));let i=XP(this._mathfield.options,Object.keys(e.optionsAttributes).map((e=>Xj(e))));Wj.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,menuItems:null!=(r=null==(n=this._mathfield.menu)?void 0:n.menuItems)?r:void 0,options:i}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(e){if(this.hasOwnProperty(e)){let t=this[e];delete this[e],("readonly"===e||"read-only"===e)&&(e="readOnly"),this[e]=t}}attributeChangedCallback(e,t,n){if(t===n)return;let r=null!==n;switch(e){case"contenteditable":pP(this._mathfield);break;case"disabled":this.disabled=r;break;case"read-only":case"readonly":this.readOnly=r}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(e){let t=!!e;t?(this.setAttribute("readonly",""),Qj()?this._internals.ariaReadOnly="true":this.setAttribute("aria-readonly","true"),this.setAttribute("aria-readonly","true")):(Qj()?this._internals.ariaReadOnly="false":this.removeAttribute("aria-readonly"),this.removeAttribute("readonly"),this.removeAttribute("read-only")),this._setOptions({readOnly:t})}get disabled(){return this.hasAttribute("disabled")}set disabled(e){var t;let n=!!e;n?this.setAttribute("disabled",""):this.removeAttribute("disabled"),Qj()?this._internals.ariaDisabled=n?"true":"false":this.setAttribute("aria-disabled",n?"true":"false"),n&&null!=(t=this._mathfield)&&t.hasFocus&&window.mathVirtualKeyboard.visible&&this._mathfield.executeCommand("hideVirtualKeyboard")}get value(){return this.getValue()}set value(e){this.setValue(e)}get defaultMode(){return this._getOption("defaultMode")}set defaultMode(e){this._setOptions({defaultMode:e})}get macros(){return this._getOption("macros")}set macros(e){this._setOptions({macros:e})}get registers(){let e=this;return new Proxy({},{get:(t,n)=>{if("string"==typeof n)return e._getOption("registers")[n]},set:(t,n,r)=>"string"==typeof n&&(e._setOptions({registers:Jk(Zk({},e._getOption("registers")),{[n]:r})}),!0)})}set registers(e){this._setOptions({registers:e})}get colorMap(){return this._getOption("colorMap")}set colorMap(e){this._setOptions({colorMap:e})}get backgroundColorMap(){return this._getOption("backgroundColorMap")}set backgroundColorMap(e){this._setOptions({backgroundColorMap:e})}get letterShapeStyle(){return this._getOption("letterShapeStyle")}set letterShapeStyle(e){this._setOptions({letterShapeStyle:e})}get minFontScale(){return this._getOption("minFontScale")}set minFontScale(e){this._setOptions({minFontScale:e})}get smartMode(){return this._getOption("smartMode")}set smartMode(e){this._setOptions({smartMode:e})}get smartFence(){return this._getOption("smartFence")}set smartFence(e){this._setOptions({smartFence:e})}get smartSuperscript(){return this._getOption("smartSuperscript")}set smartSuperscript(e){this._setOptions({smartSuperscript:e})}get scriptDepth(){return this._getOption("scriptDepth")}set scriptDepth(e){this._setOptions({scriptDepth:e})}get removeExtraneousParentheses(){return this._getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(e){this._setOptions({removeExtraneousParentheses:e})}get mathModeSpace(){return this._getOption("mathModeSpace")}set mathModeSpace(e){this._setOptions({mathModeSpace:e})}get placeholderSymbol(){return this._getOption("placeholderSymbol")}set placeholderSymbol(e){this._setOptions({placeholderSymbol:e})}get popoverPolicy(){return this._getOption("popoverPolicy")}set popoverPolicy(e){this._setOptions({popoverPolicy:e})}get environmentPopoverPolicy(){return this._getOption("environmentPopoverPolicy")}set environmentPopoverPolicy(e){this._setOptions({environmentPopoverPolicy:e})}get menuItems(){var e,t,n;return this._mathfield?null!=(e=this._mathfield.menu._menuItems.map((e=>e.menuItem)))?e:[]:null!=(n=null==(t=Wj.get(this))?void 0:t.menuItems)?n:[]}set menuItems(e){var t;if(this._mathfield){let n=null==(t=this._mathfield.element)?void 0:t.querySelector("[part=menu-toggle]");n&&(n.style.display=0===e.length?"none":""),this._mathfield.menu.menuItems=e}Wj.has(this)?Wj.set(this,Jk(Zk({},Wj.get(this)),{menuItems:e})):Wj.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:Yj(this),menuItems:e})}get mathVirtualKeyboardPolicy(){return this._getOption("mathVirtualKeyboardPolicy")}set mathVirtualKeyboardPolicy(e){this._setOptions({mathVirtualKeyboardPolicy:e})}get inlineShortcuts(){return this._getOption("inlineShortcuts")}set inlineShortcuts(e){this._setOptions({inlineShortcuts:e})}get inlineShortcutTimeout(){return this._getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(e){this._setOptions({inlineShortcutTimeout:e})}get keybindings(){return this._getOption("keybindings")}set keybindings(e){this._setOptions({keybindings:e})}get onInlineShortcut(){return this._getOption("onInlineShortcut")}set onInlineShortcut(e){this._setOptions({onInlineShortcut:e})}get onScrollIntoView(){return this._getOption("onScrollIntoView")}set onScrollIntoView(e){this._setOptions({onScrollIntoView:e})}get onExport(){return this._getOption("onExport")}set onExport(e){this._setOptions({onExport:e})}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOptions({readOnly:e})}get isSelectionEditable(){var e,t;return null!=(t=null==(e=this._mathfield)?void 0:e.isSelectionEditable)&&t}setPromptState(e,t,n){var r;null==(r=this._mathfield)||r.setPromptState(e,t,n)}getPromptState(e){var t,n;return null!=(n=null==(t=this._mathfield)?void 0:t.getPromptState(e))?n:[void 0,!0]}get virtualKeyboardTargetOrigin(){return this._getOption("virtualKeyboardTargetOrigin")}set virtualKeyboardTargetOrigin(e){this._setOptions({virtualKeyboardTargetOrigin:e})}get selection(){return this._mathfield?this._mathfield.model.selection:Wj.has(this)?Wj.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(e){if("number"==typeof e&&(e={ranges:[[e,e]]}),this._mathfield)return this._mathfield.model.selection=e,void pP(this._mathfield);Wj.has(this)?Wj.set(this,Jk(Zk({},Wj.get(this)),{selection:e})):Wj.set(this,{value:void 0,selection:e,options:Yj(this),menuItems:void 0})}get selectionIsCollapsed(){let e=this.selection;return 1===e.ranges.length&&e.ranges[0][0]===e.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:Wj.has(this)?Wj.get(this).selection.ranges[0][0]:0}set position(e){this._mathfield&&(this._mathfield.model.position=e,pP(this._mathfield)),Wj.has(this)?Wj.set(this,Jk(Zk({},Wj.get(this)),{selection:{ranges:[[e,e]]}})):Wj.set(this,{value:void 0,selection:{ranges:[[e,e]]},options:Yj(this),menuItems:void 0})}getOffsetDepth(e){var t,n;return this._mathfield?(null!=(n=null==(t=this._mathfield.model.at(e))?void 0:t.treeDepth)?n:2)-2:0}get lastOffset(){var e,t;return null!=(t=null==(e=this._mathfield)?void 0:e.model.lastOffset)?t:-1}};Zj.version="0.98.6",Zj._fontsDirectory="./fonts",Zj._soundsDirectory="./sounds",Zj.keypressVibration=!0,Zj._keypressSound={spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"},Zj._plonkSound="plonk.wav",Zj.audioBuffers={},Zj.createHTML=e=>e,Zj._speechEngineRate="100%",Zj._speechEngineVoice="Joanna",Zj._textToSpeechMarkup="",Zj._textToSpeechRules="mathlive",Zj._textToSpeechRulesOptions={},Zj.speakHook=function(e){var t,n;if(!eA())return;let r=globalThis.MathfieldElement;if(r.speechEngine&&"local"!==r.speechEngine)if("amazon"===r.speechEngine)if("AWS"in window){let i=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),a={OutputFormat:"mp3",VoiceId:null!=(t=r.speechEngineVoice)?t:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes(null!=(n=r.speechEngineVoice)?n:"Joanna")?"neural":"standard",Text:e,TextType:"ssml"};i.synthesizeSpeech(a,((e,t)=>{if(e)console.trace("MathLive 0.98.6: `polly.synthesizeSpeech()` error: ".concat(e));else if(null!=t&&t.AudioStream){let e=new Uint8Array(t.AudioStream),n=new Blob([e.buffer],{type:"audio/mpeg"}),r=URL.createObjectURL(n);new Audio(r).play().catch((e=>console.log(e)))}}))}else console.error("MathLive 0.98.6: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else"google"===r.speechEngine&&console.error("MathLive 0.98.6: The Google speech engine is not supported yet. Please come again.");else{let t=new SpeechSynthesisUtterance(e);globalThis.speechSynthesis.speak(t)}},Zj.readAloudHook=function(e,t){var n;if(!eA())return;if("amazon"!==globalThis.MathfieldElement.speechEngine)return console.error("MathLive 0.98.6: Use Amazon TTS Engine for synchronized highlighting"),void("function"==typeof globalThis.MathfieldElement.speakHook&&globalThis.MathfieldElement.speakHook(t));if(!globalThis.AWS)return void console.error("MathLive 0.98.6: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");let r=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),i={OutputFormat:"json",VoiceId:null!=(n=globalThis.MathfieldElement.speechEngineVoice)?n:"Joanna",Engine:"standard",Text:t,TextType:"ssml",SpeechMarkTypes:["ssml"]};iK().readAloudElement=e,r.synthesizeSpeech(i,((e,n)=>{if(e)return void console.trace("MathLive 0.98.6: `polly.synthesizeSpeech()` error: ".concat(e));if(null==n||!n.AudioStream)return;let a=new TextDecoder("utf-8").decode(new Uint8Array(n.AudioStream));iK().readAloudMarks=a.split("\n").map((e=>e?JSON.parse(e):{})),iK().readAloudTokens=[];for(let t of iK().readAloudMarks)t.value&&iK().readAloudTokens.push(t.value);iK().readAloudCurrentMark="",i.OutputFormat="mp3",i.SpeechMarkTypes=[],r.synthesizeSpeech(i,((e,n)=>{if(e)return void console.trace('MathLive 0.98.6: `polly.synthesizeSpeech("'.concat(t,'") error:').concat(e));if(null==n||!n.AudioStream)return;let r=new Uint8Array(n.AudioStream),i=new Blob([r.buffer],{type:"audio/mpeg"}),a=URL.createObjectURL(i),o=iK();o.readAloudAudio?o.readAloudAudio.pause():(o.readAloudAudio=new Audio,o.readAloudAudio.addEventListener("ended",(()=>{let e=o.readAloudMathfield;o.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),e?(fP(e),o.readAloudElement=null,o.readAloudMathfield=null,o.readAloudTokens=[],o.readAloudMarks=[],o.readAloudCurrentMark=""):$j(o.readAloudElement)})),o.readAloudAudio.addEventListener("timeupdate",(()=>{let e="",t=1e3*o.readAloudAudio.currentTime+100;for(let n of o.readAloudMarks)n.time<t&&(e=n.value);o.readAloudCurrentMark!==e&&(o.readAloudCurrentToken=e,e&&e===o.readAloudFinalToken?o.readAloudAudio.pause():(o.readAloudCurrentMark=e,Hj(o.readAloudElement,o.readAloudCurrentMark)))}))),o.readAloudAudio.src=a,o.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),o.readAloudAudio.play()}))}))},Zj._decimalSeparator=".",Zj.fractionNavigationOrder="numerator-denominator",Zj._isFunction=e=>{var t,n;let r=globalThis.MathfieldElement.computeEngine;return null!=(n=null==(t=null==r?void 0:r.parse(e).domain)?void 0:t.isFunction)&&n};var Jj=Zj;function Xj(e){return e.replace(/[^a-zA-Z\d]+(.)/g,((e,t)=>t.toUpperCase()))}function Yj(e){let t={readOnly:!1},n=Jj.optionsAttributes;return Object.keys(n).forEach((r=>{if(e.hasAttribute(r)){let i=e.getAttribute(r);"placeholder"===r?t.contentPlaceholder=null!=i?i:"":"boolean"===n[r]?t[Xj(r)]=!0:"on/off"===n[r]?t[Xj(r)]="on"===i||"off"!==i&&void 0:"number"===n[r]?t[Xj(r)]=Number.parseFloat(null!=i?i:"0"):t[Xj(r)]=i}})),t}function Qj(){return!(!("ElementInternals"in window)||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var eK,tK,nK,rK=Jj;if(eA()&&(null==(eK=window.customElements)||!eK.get("math-field"))){null!=window[tK=Symbol.for("io.cortexjs.mathlive")]||(window[tK]={}),window[Symbol.for("io.cortexjs.mathlive")].version="0.98.6",globalThis.MathfieldElement=Jj,null==(nK=window.customElements)||nK.define("math-field",Jj)}function iK(){var e;return null!=globalThis[e=Symbol.for("io.cortexjs.mathlive")]||(globalThis[e]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}vP({switchKeyboardLayer:function(e,t){let n=GP.singleton;return!!n&&(n.show(),kP(),n.currentLayer=t,n.render(),n.focus(),!0)},toggleVirtualKeyboard:function(){let e=window.mathVirtualKeyboard;return e.visible?e.hide({animate:!0}):e.show({animate:!0}),!1},hideVirtualKeyboard:()=>(window.mathVirtualKeyboard.hide({animate:!0}),!1),showVirtualKeyboard:()=>(window.mathVirtualKeyboard.show({animate:!0}),!1)},{target:"virtual-keyboard"});const aK=e=>{let{data:n,l:r,changeData:i,deleteData:a,openkeyboard:o,index:s,changeVisible:l}=e;const u=(0,t.useRef)();(0,t.useEffect)((()=>{u.current.value=n.text,u.current.addEventListener("focusin",(()=>{window.mathVirtualKeyboard.layouts={rows:[["+","-","\\times","\\frac{#@}{#?}","=",".","(",")","\\sqrt{#0}","#@^{#?}"],["1","2","3","4","5","6","7","8","9","0"]]},window.mathVirtualKeyboard.visible=!0,o(!0)})),u.current.addEventListener("focusout",(()=>{window.mathVirtualKeyboard.visible=!1,o(!1)}))}),[n.text,o]);const c=()=>{l(!n.visible)};return(0,Ak.jsxs)("div",{className:"input",id:s,children:[(0,Ak.jsx)("div",{className:"colorPic"+(n.visible?"":" hidden"),style:n.visible?{backgroundColor:"#"+n.color}:{borderColor:"#"+n.color},onClick:c}),(0,Ak.jsx)("div",{hidden:!n.directive,className:"colorPic directive"+(n.visible?"":" hidden"),style:{backgroundColor:"#"+n.directiveColor},onClick:c}),(0,Ak.jsx)("button",{hidden:1===r,className:"closeInput",onClick:()=>{a(n.id)},children:(0,Ak.jsx)(Rk,{})}),(0,Ak.jsx)("p",{className:"itterator",children:s}),(0,Ak.jsx)("math-field",{ref:u,onInput:e=>{const t=/f\^\{\\prime\}\\left\(([^]*)\\right\)/,n=t.exec(e.target.value),r=new Ol;let a=r.parse(e.target.value).json;if(n){const i="\\left(f\\left(".concat(n[1],"\\right)\\right)^{\\prime}");a=r.parse(e.target.value.replace(t,i)).json}i(a,e.target.value)},id:"l"+n.id})]})};function oK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const sK=["label","id","checked","disabled","hidden"];const lK=function(e){let{label:t,id:n,checked:r,disabled:i,hidden:a}=e,o=oK(e,sK);return(0,Ak.jsxs)("div",{className:"checkBox"+(!1|i?" disabled":""),hidden:a,children:[(0,Ak.jsx)("input",l({id:n,type:"checkbox",checked:!0|!i&&r,disabled:!1|i},o)),(0,Ak.jsx)("label",{htmlFor:n,children:t})]})},uK=["data","event"];const cK=function(e){let{data:t,event:n}=e;return oK(e,uK),(0,Ak.jsxs)("select",{name:"samples",className:"samples",defaultValue:"none",onInput:e=>n(e.target.value),children:[(0,Ak.jsx)("option",{value:"none"}),t.map(((e,t)=>(0,Ak.jsx)("option",{value:"sample"+t,children:e.name},"sample"+t)))]})},dK=e=>{let{data:n,onChange:r,onUpdate:i,onAnimation:a}=e;const[o,s]=(0,t.useState)(!1),l=n.anim?(0,Ak.jsx)("button",{className:"Animation",title:"\u0410\u043d\u0456\u043c\u0430\u0446\u0456\u044f",onClick:()=>a()}):(0,Ak.jsx)(Ak.Fragment,{});let u=o?(0,Ak.jsxs)("div",{className:"SettingsVariable",children:[(0,Ak.jsxs)("div",{className:"range",children:[(0,Ak.jsx)("input",{type:"number",inputMode:"numeric",name:"fromRange",id:"fromRange",defaultValue:n.range[0],onInput:e=>{n.range[0]=e.target.value,i(n)}}),"\u2264",n.name,"\u2264",(0,Ak.jsx)("input",{type:"number",inputMode:"numeric",name:"toRange",id:"toRange",defaultValue:n.range[1],onInput:e=>{n.range[1]=e.target.value,i(n)}})]}),(0,Ak.jsx)("label",{htmlFor:"step",children:"\u041a\u0440\u043e\u043a:"}),(0,Ak.jsx)("input",{type:"number",inputMode:"numeric",name:"step",id:"step",defaultValue:n.step,onInput:e=>{n.step=e.target.value,i(n)}})]}):(0,Ak.jsx)(Ak.Fragment,{}),c=n.restricted?(0,Ak.jsx)(Ak.Fragment,{}):(0,Ak.jsx)("div",{className:"SettingsButton",onClick:()=>s(!o),children:(0,Ak.jsx)(jk,{})}),d=n.name.match(/^x_\d+$/)?(0,Ak.jsxs)(Ak.Fragment,{children:["x",(0,Ak.jsx)("sub",{children:n.name.slice(2)})]}):(0,Ak.jsx)(Ak.Fragment,{children:n.name});return(0,Ak.jsxs)("div",{className:"input Variable",id:"variable"+n.id,children:[c,u,l,(0,Ak.jsx)("p",{className:"name",children:d}),(0,Ak.jsx)("input",{type:"range",min:n.range[0]*(n.step===1/0?100:1),max:n.range[1]*(n.step===1/0?100:1),step:n.step,value:n.value*(n.step===1/0?100:1),onInput:e=>r(e.target.value/(n.step===1/0?100:1))},"inputVar"+n.id),(0,Ak.jsxs)("div",{className:"labels",children:[(0,Ak.jsx)("p",{className:"fromRange",children:n.range[0]}),(0,Ak.jsx)("p",{className:"value",style:{left:15+(n.value-n.range[0])/(n.range[1]-n.range[0])*375},children:n.value}),(0,Ak.jsx)("p",{className:"toRange",children:n.range[1]})]})]})},pK=[{name:"\u0420\u044f\u0434 \u0422\u0435\u0439\u043b\u043e\u0440\u0430",caption:"\u2013 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044f <b style='color: #ff2020'>\u0444\u0443\u043d\u043a\u0446\u0456\u0457</b> \u0443 \u0432\u0438\u0433\u043b\u044f\u0434\u0456 \u043d\u0435\u0441\u043a\u0456\u043d\u0435\u0447\u043d\u043e\u0457 \u0441\u0443\u043c\u0438 \u0434\u043e\u0434\u0430\u043d\u043a\u0456\u0432.</br> \u0424\u0443\u043d\u043a\u0446\u0456\u044f \u043c\u0430\u0454 \u0432\u0438\u0433\u043b\u044f\u0434:</br> <math-field read-only>f_{n+1}\\left(x\\right) = f\\left(x_0\\right)+\\frac{f^{\\prime}\\left(x_0\\right)}{1!}\\left(x-x_0\\right)+\\ldots\\ldots+\\frac{f^{\\left(n\\right)}\\left(x_0\\right)}{n!}\\left(x-x_0\\right)^{n}</math-field></br> \u0424\u0443\u043d\u043a\u0446\u0456\u044f \u0440\u043e\u0437\u043a\u043b\u0430\u0434\u0430\u0454\u0442\u044c\u0441\u044f \u0432 \u0440\u044f\u0434 \u043d\u0430\u0432\u043a\u043e\u043b\u043e \u0437\u0430\u0434\u0430\u043d\u043e\u0457 \u0442\u043e\u0447\u043a\u0438 <math-field read-only class='nonfull'>x_0</math-field>. \u0417\u0431\u0456\u043b\u044c\u0448\u0435\u043d\u043d\u044f \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0443 \u043f\u043e \u043c\u043e\u0434\u0443\u043b\u044e \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0454 \u0437\u0431\u0456\u043b\u044c\u0448\u0435\u043d\u043d\u044f \u043a\u0456\u043b\u044c\u043a\u043e\u0441\u0442\u0456 \u0434\u043e\u0434\u0430\u043d\u043a\u0456\u0432.",restricted:!1,data:[{id:1,data:["Equal",["f","x"],["Equal",["f","x"],["Sin",["Add",["Multiply",4,"x"],["Square","x"]]]]],text:"f\\left(x\\right)=\\sin\\left(x^2+4x\\right)",color:"459BE6",directiveColor:"E64545",directive:!1,angle:!1,visible:!0,hidden:!1},{id:2,data:["RepeatFunction",["Multiply",["Divide",["DerivativeFunction","x_0","k"],["Factorial","k"]],["Power",["Subtract","x","x_0"],"k"]],0,"n"],text:"",color:"ff2020",directiveColor:"20ff20",directive:!1,angle:!1,visible:!0,hidden:!0,points:[["x_0"]]}],variable:[{id:0,name:"n",range:[0,10],value:1,step:1,hidden:!1,restricted:!0,anim:[1,1,!1]},{id:1,name:"x_0",range:[-10,10],value:0,step:.1,hidden:!1,restricted:!1}]},{name:"\u0421\u0456\u0447\u043d\u0430 \u0442\u0430 \u0434\u043e\u0442\u0438\u0447\u043d\u0430",caption:"\u041f\u043e\u0431\u0443\u0434\u0443\u0454\u043c\u043e <b style='color: #20ff20'>\u0434\u043e\u0442\u0438\u0447\u043d\u0443</b> \u0432 \u0442\u043e\u0447\u0446\u0456 <math-field read-only class='nonfull'>x_0</math-field> \u0437\u0430 \u0444\u043e\u0440\u043c\u0443\u043b\u043e\u044e: </br> <math-field read-only>f\\left(x\\right)= f\\left(x_0\\right)+f^{\\prime}\\left(x_0\\right)\\left(x-x_0\\right)</math-field></br> \u0411\u0443\u0434\u0443\u0454\u043c\u043e <b style='color: #ff2020'>\u0441\u0456\u0447\u043d\u0443</b> \u0437\u0430 \u0442\u043e\u0447\u043a\u0430\u043c\u0438 <math-field read-only class='nonfull'>x_0</math-field> \u0442\u0430 <math-field read-only class='nonfull'>x_1</math-field> \u0437\u0430 \u0444\u043e\u0440\u043c\u0443\u043b\u043e\u044e: </br> <math-field read-only>f\\left(x\\right) = \\frac{f\\left(x_1\\right)-f\\left(x_0\\right)}{x_1-x_0}\\cdot\\left(x-x_0\\right)+f\\left(x_0\\right)</math-field></br>\u041f\u0440\u0438 \u043d\u0430\u0431\u043b\u0438\u0436\u0435\u043d\u0456 <math-field read-only class='nonfull'>x_1</math-field> \u0434\u043e <math-field read-only class='nonfull'>x_0</math-field> \u0441\u0456\u0447\u043d\u0430 \u0431\u0443\u0434\u0435 \u043d\u0430\u0431\u043b\u0438\u0436\u0430\u0442\u0438\u0441\u044f \u0434\u043e \u0434\u043e\u0442\u0438\u0447\u043d\u043e\u0457. \u0422\u0430\u043a\u0438\u043c \u0447\u0438\u043d\u043e\u043c \u043c\u0438 \u043e\u0442\u0440\u0438\u043c\u0443\u0454\u043c\u043e \u0433\u0440\u0430\u043d\u0438\u0447\u043d\u0438\u0439 \u043f\u0435\u0440\u0435\u0445\u0456\u0434 \u0432\u0456\u0434 \u0441\u0456\u0447\u043d\u043e\u0457 \u0434\u043e \u0434\u043e\u0442\u0438\u0447\u043d\u043e\u0457.",restricted:!1,data:[{id:1,data:["Equal",["f","x"],["Multiply",["Rational",1,5],["Square","x"]]],text:"f\\left(x\\right)=\\frac15x^2",color:"459BE6",directiveColor:"E64545",directive:!1,angle:!1,visible:!0,hidden:!1},{id:2,data:["Add",["Multiply",["DerivativeFunction","x_0",1],["Subtract","x","x_0"]],["f","x_0"]],text:"",color:"20ff20",directiveColor:"10bb10",directive:!1,angle:!0,visible:!0,hidden:!0,points:[["x_0"]]},{id:3,data:["Add",["Multiply",["Divide",["Subtract",["f","x_1"],["f","x_0"]],["Subtract","x_1","x_0"]],["Subtract","x","x_0"]],["f","x_0"]],text:"",color:"ff2020",directiveColor:"bb1010",directive:!1,angle:!0,visible:!0,hidden:!0,points:[["x_0"],["x_1"]]}],variable:[{id:1,name:"x_0",range:[-10,10],value:1,step:.1,hidden:!1,restricted:!1},{id:0,name:"x_1",range:[-10,10],value:4,step:.1,hidden:!1,restricted:!1,anim:[-.1,.01,!1]}]},{name:"Slope \u0442\u0440\u0438\u043a\u0443\u0442\u043d\u0438\u043a",caption:["\u041f\u043e\u0431\u0443\u0434\u0443\u0454\u043c\u043e <b style='color: #20ff20'>\u0434\u043e\u0442\u0438\u0447\u043d\u0443</b> \u0432 \u0442\u043e\u0447\u0446\u0456 <math-field read-only class='nonfull'>x_0</math-field> \u0437\u0430 \u0444\u043e\u0440\u043c\u0443\u043b\u043e\u044e: </br> <math-field read-only>f\\left(x\\right)= f\\left(x_0\\right)+f^{\\prime}\\left(x_0\\right)\\left(x-x_0\\right)</math-field></br> \u0422\u0430\u043a\u043e\u0436 \u0431\u0443\u0434\u0443\u0454\u043c\u043e \u0433\u0440\u0430\u0444\u0456\u043a <b style='color: #ff2020'>\u043f\u043e\u0445\u0456\u0434\u043d\u043e\u0457</b> \u0432\u0456\u0434 \u0444\u0443\u043d\u043a\u0446\u0456\u0457. </br> \u0411\u0443\u0434\u0443\u0454\u043c\u043e 1-\u0439 \u0432\u0456\u0434\u0440\u0456\u0437\u043e\u043a, \u0449\u043e \u043f\u0430\u0440\u0430\u043b\u0435\u043b\u044c\u043d\u0438\u0439 \u043b\u0456\u043d\u0456\u0457 \u0432\u0456\u0441\u0456 \u0430\u0431\u0441\u0446\u0438\u0441  <math-field read-only class='nonfull'>x\u0454\\left\\lbrack x_0-0.5;x_0+0.5\\right\\rbrack</math-field>(\u0432\u0456\u0434\u0440\u0456\u0437\u043e\u043a \u0434\u043e\u0432\u0436\u0438\u043d\u043e\u044e 1).</br>","\u0414\u043e\u0431\u0443\u0434\u043e\u0432\u0443\u0454\u043c\u043e \u043f\u0440\u044f\u043c\u043e\u043a\u0443\u0442\u043d\u0438\u0439 \u0442\u0440\u0438\u043a\u0443\u0442\u043d\u0438\u043a. </br>\u0422\u0430\u043a \u044f\u043a \u043a\u0443\u0442 \u043c\u0456\u0436 \u0432\u0456\u0434\u0440\u0456\u0437\u043a\u043e\u043c \u0434\u043e \u0434\u043e\u0442\u0438\u0447\u043d\u043e\u0457 \u0431\u0443\u0434\u0435 \u0434\u043e\u0440\u0456\u0432\u043d\u044e\u0432\u0430\u0442\u0438 \u043d\u0430\u0445\u0438\u043b\u0443 \u0434\u043e\u0442\u0438\u0447\u043d\u043e\u0457 \u0434\u043e \u0434\u043e\u0434\u0430\u0442\u043d\u043e\u0433\u043e \u043d\u0430\u043f\u0440\u044f\u043c\u0443 \u043e\u0441\u0456 \u0430\u0431\u0446\u0438\u0441(\u043f\u0430\u0440\u0430\u043b\u0435\u043b\u044c\u043d\u0456c\u0442\u044c \u043f\u0440\u044f\u043c\u0438\u0445), \u0442\u043e \u0434\u043e\u0432\u0436\u0438\u043d\u0430 \u0456\u043d\u0448\u043e\u0433\u043e \u0432\u0456\u0434\u0440\u0456\u0437\u043a\u0443 \u0431\u0443\u0434\u0435 \u0434\u043e\u0440\u0456\u0432\u043d\u044e\u0432\u0430\u0442\u0438 \u043c\u043e\u0434\u0443\u043b\u044e \u0442\u0430\u043d\u0433\u0435\u043d\u0441\u0443 \u043a\u0443\u0442\u0430 <b>(\u0434\u043b\u044f \u0434\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u044f \u0431\u0443\u0434\u0435\u043c\u043e \u0432\u0440\u0430\u0445\u043e\u0432\u0443\u0432\u0430\u0442\u0438 \u0437\u043d\u0430\u043a \u0442\u0430\u043d\u0433\u0435\u043d\u0441\u0443)</b></br></br>\u0423 \u0432\u0438\u0441\u043d\u043e\u0432\u043a\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u043f\u043e\u0445\u0456\u0434\u043d\u043e\u0457 \u0432 \u0442\u043e\u0447\u0446\u0456 <math-field read-only class='nonfull'>x_0</math-field> \u0434\u043e\u0440\u0456\u0432\u043d\u044e\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044e \u0442\u0430\u043d\u0433\u0435\u043d\u0441\u0443 \u043a\u0443\u0442\u0430 \u043d\u0430\u0445\u0438\u043b\u0443 \u0434\u043e\u0442\u0438\u0447\u043d\u043e\u0457 \u0434\u043e \u0434\u043e\u0434\u0430\u0442\u043d\u043e\u0433\u043e \u043d\u0430\u043f\u0440\u044f\u043c\u043a\u0443 \u043e\u0441\u0456 \u0430\u0431\u0446\u0438\u0441. \u0426\u0435 \u0434\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u044f \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u043d\u043e\u0433\u043e \u043e\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u043f\u043e\u0445\u0456\u0434\u043d\u043e\u0457."],restricted:!1,data:[{id:1,data:["Equal",["f","x"],["Add",["Multiply","Half",["Square","x"]],"x",-4]],text:"f\\left(x\\right)=\\frac12x^2+x-4",color:"459BE6",directiveColor:"E64545",directive:!1,angle:!1,visible:!0,hidden:!1},{id:2,data:["Equal",["g","x"],["Add",["Multiply",["DerivativeFunction","x_0",1],["Subtract","x","x_0"]],["f","x_0"]]],text:"",color:"20ff20",directiveColor:"10bb10",directive:!1,angle:!1,visible:!0,hidden:!0,triangle:["x_0",1],points:[["x_0"]]},{id:3,data:["DerivativeFunction","x",1],text:"",color:"ff2020",directiveColor:"bb1010",directive:!1,angle:!1,visible:!0,hidden:!0,oy:"x_0"}],variable:[{id:0,name:"x_0",range:[-10,10],value:1,step:.1,hidden:!1,restricted:!1}]}],hK=()=>{const e=()=>Math.floor(8388607*Math.random()+6388607).toString(16),n=function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rand",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rand",a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{id:t,data:[],text:"",color:"rand"===r?e():r,directiveColor:"rand"===i?e():i,directive:n,angle:!1,visible:a,hidden:o}},[r,i]=(0,t.useState)([n(1,!1,"459BE6","E64545")]),[a,o]=(0,t.useState)([]),[s,u]=(0,t.useState)({darkTheme:"true"===localStorage.getItem("darkTheme")|!1,pi:"true"===localStorage.getItem("pi")|!1,disableDirective:!1,preview:!1,hideSettings:!0,hideCaption:!1}),[c,d]=(0,t.useState)(!1),[p,h]=(0,t.useState)(""),[f,m]=(0,t.useState)(""),g=""===p?(0,Ak.jsx)(Ak.Fragment,{}):(0,Ak.jsxs)("div",{className:"nameSample",children:[p,""!==f&&(0,Ak.jsx)("button",{className:"hideCaption",onClick:()=>{u(l(l({},s),{},{hideCaption:!s.hideCaption}))},children:s.hideCaption?(0,Ak.jsx)(Pk,{}):(0,Ak.jsx)(qk,{})})]});const v=""===f?(0,Ak.jsx)(Ak.Fragment,{}):(0,Ak.jsx)("div",{className:"captionSample",hidden:s.hideCaption,children:(0,Ak.jsx)("div",{dangerouslySetInnerHTML:{__html:f}})});const y=s.preview?(0,Ak.jsxs)("div",{className:"preview",children:[(0,Ak.jsx)("div",{className:"ext",onClick:function(){u(l(l({},s),{},{preview:!1}))},children:(0,Ak.jsx)(Rk,{})}),(0,Ak.jsxs)("div",{className:"lit",children:["\u0414\u043d\u0456\u043f\u0440\u043e\u0432\u0441\u044c\u043a\u0438\u0439 \u043d\u0430\u0443\u043a\u043e\u0432\u0438\u0439 \u043b\u0456\u0446\u0435\u0439 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0439\u043d\u0438\u0445 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0456\u0439 \u0414\u043d\u0456\u043f\u0440\u043e\u0432\u0441\u044c\u043a\u043e\u0457",(0,Ak.jsx)("br",{}),"\u043c\u0456\u0441\u044c\u043a\u043e\u0457 \u0440\u0430\u0434\u0438 (\u0414\u041d\u041b\u0406\u0422 \u0414\u041c\u0420)"]}),(0,Ak.jsx)("div",{className:"topic",children:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430 \u0433\u0440\u0430\u0444\u0456\u0447\u043d\u043e\u0433\u043e \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430"}),(0,Ak.jsxs)("div",{className:"performer",children:[(0,Ak.jsx)("b",{children:"\u0420\u043e\u0431\u043e\u0442\u0443 \u0432\u0438\u043a\u043e\u043d\u0430\u0432:"}),(0,Ak.jsx)("br",{}),"\u0404\u0436\u043e\u043b\u043e\u0432 \u041a\u0438\u0440\u0438\u043b\u043e \u0421\u0435\u0440\u0433\u0456\u0439\u043e\u0432\u0438\u0447, 11-\u0410"]}),(0,Ak.jsxs)("div",{className:"supervisor",children:[(0,Ak.jsx)("b",{children:"\u041a\u0443\u0440\u0430\u0442\u043e\u0440 \u0437 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0438:"}),"\u0421\u043e\u0442\u043d\u0456\u0447\u0435\u043d\u043a\u043e \u041e\u043b\u0435\u043d\u0430 \u0412\u0456\u0442\u0430\u043b\u0456\u0457\u0432\u043d\u0430",(0,Ak.jsx)("br",{}),(0,Ak.jsx)("b",{children:"\u041a\u0443\u0440\u0430\u0442\u043e\u0440 \u0437 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0443\u0432\u0430\u043d\u043d\u044f:"}),"\u0411\u043e\u0440\u043e\u0432\u0438\u043a \u041b\u044e\u0434\u043c\u0438\u043b\u0430 \u0406\u0432\u0430\u043d\u0456\u0432\u043d\u0430"]})]}):(0,Ak.jsx)(Ak.Fragment,{});return(0,Ak.jsxs)("div",{className:"App"+(s.darkTheme?" dark":" light")+(s.preview?" preview":""),children:[y,g,v,(0,Ak.jsx)(Nk,{className:"canvas",data:r,settingsGrid:s,variable:a,handleVariable:e=>{let t=e.map(((e,t)=>function(e,t){for(let n of a)if(n.name===t)return n.index=e,n;return function(e,t){return{id:e,name:t,range:arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-10,10],value:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,step:arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,hidden:arguments.length>5&&void 0!==arguments[5]&&arguments[5],restricted:arguments.length>6&&void 0!==arguments[6]&&arguments[6]}}(e,t)}(t,e)));JSON.stringify(t)!==JSON.stringify(a)&&o(t)}}),(0,Ak.jsxs)("div",{className:"Settings",children:[(0,Ak.jsx)("h1",{children:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,Ak.jsx)("button",{className:"hideSettings",onClick:()=>{u(l(l({},s),{},{hideSettings:!s.hideSettings}))},children:s.hideSettings?(0,Ak.jsx)(Pk,{}):(0,Ak.jsx)(qk,{})}),(0,Ak.jsx)(lK,{label:"\u03c0",id:"piSettings",checked:s.pi,hidden:s.hideSettings,onChange:()=>{u(l(l({},s),{},{pi:!s.pi})),localStorage.setItem("pi",!s.pi)}}),(0,Ak.jsx)(lK,{label:"\u0422\u0435\u043c\u043d\u0430 \u0442\u0435\u043c\u0430",id:"darktheme",checked:s.darkTheme,hidden:s.hideSettings,onChange:()=>{u(l(l({},s),{},{darkTheme:!s.darkTheme})),localStorage.setItem("darkTheme",!s.darkTheme)}}),(0,Ak.jsx)(lK,{label:"\u041f\u043e\u0445\u0456\u0434\u043d\u0430",id:"deretive",checked:r[0].directive,disabled:s.disableDirective,hidden:s.hideSettings,onChange:()=>{i(r.map((e=>(e.directive=!e.directive,e))))}}),(0,Ak.jsx)("p",{className:"sampleTitle",children:"\u041f\u0440\u0438\u043a\u043b\u0430\u0434\u0438:"}),(0,Ak.jsx)(cK,{data:pK,event:e=>{if("none"===e)return u(l(l({},s),{},{disableDirective:!1})),i([n(1,!1,"459BE6","E64545")]),o([]),h(""),void m("");var t;t=e.slice(6),u(l(l({},s),{},{disableDirective:!0})),o(JSON.parse(JSON.stringify(pK[t].variable))),i(JSON.parse(JSON.stringify(pK[t].data))),h(pK[t].name),Array.isArray(pK[t].caption)?m(pK[t].caption[0]+pK[t].caption[1]):m(pK[t].caption)}})]}),(0,Ak.jsx)("div",{className:"about",onClick:function(){u(l(l({},s),{},{preview:!0}))},children:"\u041f\u0440\u043e \u043f\u0440\u043e\u0435\u043a\u0442"}),(0,Ak.jsx)("div",{className:c?"inputs openKeyboard":"inputs",children:(0,Ak.jsxs)("div",{className:"inputIn",children:[(0,Ak.jsx)("button",{className:"addInput",onClick:()=>{i([...r,n(r.at(-1).id+1,r.at(-1).directive)])},children:(0,Ak.jsx)(Ik,{})}),r.filter((e=>!1===e.hidden)).map(((e,t)=>(0,Ak.jsx)(aK,{id:"input"+e.id,l:r.filter((e=>!e.hidden)).length,index:t+1,data:e,openkeyboard:e=>{d(e)},changeVisible:t=>{i(r.map((n=>(n.id===e.id&&(n.visible=t),n))))},changeData:(t,n)=>{i(r.map((r=>(r.id===e.id&&(r.data=t,r.text=n),r))))},deleteData:e=>{i(r.filter((t=>e!==t.id)))}},"input"+e.id))),a.filter((e=>!1===e.hidden)).map((e=>(0,Ak.jsx)(dK,{data:e,onUpdate:t=>{o(a.map((n=>n.id===e.id?t:n)))},onChange:t=>{o(a.map((n=>(n.id===e.id&&(n.value=t),n))))},onAnimation:()=>{e.anim&&(!1===e.anim[2]?(o(a.map((t=>(t.id===e.id&&(t.anim[2]=!0),t)))),function(e,t,n){let r=kk.sign(t);t=kk.abs(t);let i=setInterval((function(){let n=!1;a.map((t=>(t.id===e&&!0===t.anim[2]&&(n=!0),t))),!1!==n?o(a.map((n=>(n.id===e&&(Math.abs(n.range[1]-n.value)<t&&1===r?r=-1:Math.abs(n.range[0]-n.value)<t&&-1===r&&(r=1),n.value=kk.round(n.value+t*r,2)),n)))):clearInterval(i)}),1e3*n)}(e.id,e.anim[0],e.anim[1])):o(a.map((t=>(t.id===e.id&&(t.anim[2]=!1),t)))))}},"Variable"+e.id)))]})})]})},fK=e=>{e&&e instanceof Function&&n.e(488).then(n.bind(n,488)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:o}=t;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,Ak.jsx)(t.StrictMode,{children:(0,Ak.jsx)(hK,{})})),fK()})()})();
//# sourceMappingURL=main.c1f2f0af.js.map